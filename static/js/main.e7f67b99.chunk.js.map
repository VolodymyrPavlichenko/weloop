{"version":3,"sources":["util/apollo/operation/index.ts","util/apollo/operation/operation.ts","ui/Icons/collectionPlaceholder.png","../ /^/.//.*//messages/.po$/ groupOptions: {} namespace object","locales lazy /^/.//.*//messages/.js$/ groupOptions: {} namespace object","ui/modules/AddResource/cc-zero.png","ui/modules/AddResource/by.png","ui/modules/AddResource/by-sa.png","fe/lib/graphql/ctx.ts","HOC/pages/settings/SettingsPage.generated.tsx","HOC/modules/Sidebar/Sidebar.generated.tsx","fe/session/me.generated.tsx","fe/session/anon.generated.tsx","graphql/types.generated.ts","mn-constants.tsx","apollo/uploadLink.js","apollo/client.tsx","ui/themes/default.theme.ts","ui/styleguide/Wrapper.tsx","ui/themes/styled.ts","ui/modules/Header/index.tsx","ui/elements/Panel/index.tsx","ui/elements/Loader/index.tsx","ui/elements/Button/index.tsx","ui/modules/Loadmore/index.tsx","ui/elements/Layout/index.tsx","ui/pages/allCollections/index.tsx","HOC/modules/previews/community/CommunityPreview.generated.tsx","HOC/modules/previews/collection/CollectionPreview.generated.tsx","@fragments/misc.generated.tsx","fe/collection/all/useAllCollections.generated.tsx","fe/lib/helpers/usePage.ts","fe/collection/all/useAllCollections.ts","ui/helpers/SimpleLink.tsx","ui/modules/Previews/Collection.tsx","fe/collection/myFollowed/myFollowedCollections.generated.tsx","fe/community/myFollowed/myFollowedCommunities.generated.tsx","fe/lib/helpers/mutations.ts","fe/mutation/follow/useMutateFollow.generated.tsx","HOC/modules/previews/user/UserPreview.generated.tsx","fe/user/followers/collection/useCollectionFollowers.generated.tsx","fe/user/followers/community/useCommunityFollowers.generated.tsx","fe/lib/extraInfo/extraInfo.ts","fe/lib/helpers/data.ts","fe/mutation/upload/getUploadInput.ts","fe/session/useMe.ts","util/keyvaluestore/localSessionStorage.ts","context/global/localizationCtx.tsx","ui/elements/Logo/index.tsx","ui/pages/login/index.tsx","fe/session/useAnon.ts","context/global/pageCtx.tsx","HOC/pages/login/LoginPage.tsx","HOC/context/SideBar.tsx","HOC/modules/previews/resource/ResourcePreview.generated.tsx","HOC/modules/previews/comment/CommentPreview.generated.tsx","HOC/modules/previews/flag/FlagPreview.generated.tsx","HOC/modules/previews/like/LikePreview.generated.tsx","HOC/modules/previews/thread/ThreadPreview.generated.tsx","HOC/modules/previews/follow/FollowPreview.generated.tsx","HOC/modules/previews/activity/ActivityPreview.generated.tsx","fe/activities/outbox/instance/useInstanceOutboxActivities.generated.tsx","fe/community/all/useAllCommunities.generated.tsx","HOC/modules/HeroCommunity/HeroCommunity.generated.tsx","HOC/pages/community/CommunityPage.generated.tsx","fe/community/create/useCreateCommunity.generated.tsx","fe/community/create/useCreateCommunity.ts","ui/modules/DropzoneModal/index.tsx","ui/elements/Alert/index.tsx","ui/modules/Modal/index.tsx","ui/modules/CreateCommunityPanel/index.tsx","HOC/lib/formik-validations.ts","HOC/modules/CreateCommunityPanel/createCommunityPanelHOC.tsx","HOC/modules/SearchBox/SearchBox.tsx","ui/elements/Avatar/index.tsx","ui/modules/Dropdown/index.tsx","ui/modules/MainHeader/dropdown.tsx","ui/modules/MainHeader/index.tsx","HOC/modules/Header/Header.tsx","ui/templates/guest.tsx","HOC/templates/Guest/Guest.tsx","routes/wrappers/RedirectBySession.tsx","routes/lib/helper.tsx","routes/LoginPageRoute.tsx","HOC/lib/notifyMustLogin.tsx","fe/community/myFollowed/myFollowedCommunities.ts","fe/context/follow/useFollowContext.ts","fe/collection/preview/useCollectionPreview.generated.tsx","ui/modules/Sidebar/index.tsx","fe/collection/preview/useCollectionPreview.ts","HOC/modules/previews/collection/CollectionPreview.tsx","HOC/pages/all-collections/AllCollection.tsx","HOC/pages/discover/DiscoverPage.generated.tsx","HOC/modules/FeaturedCollections/featuredCollection.generated.tsx","fe/instance/featuredCollections/instanceFeaturedCollections.generated.tsx","fe/instance/featuredCollections/useInstanceFeaturedCollections.ts","ui/Icons/index.tsx","ui/modules/FeaturedCollections/index.tsx","ui/modules/FeaturedCollections/preview.tsx","HOC/modules/FeaturedCommunities/featuredCommunity.generated.tsx","fe/instance/featuredCommunities/instanceFeaturedCommunities.generated.tsx","fe/mutation/feature/useMutateFeature.generated.tsx","fe/context/feature/useFeatureContext.ts","ui/modules/FeaturedModal/index.tsx","HOC/modules/FeatureModal/FeatureModal.tsx","fe/collection/edit/useEditCollection.generated.tsx","fe/collection/edit/useEditCollection.ts","HOC/modules/HeroCollection/HeroCollection.generated.tsx","HOC/pages/collection/CollectionPage.generated.tsx","fe/collection/useCollection.generated.tsx","fe/collection/useCollection.ts","fe/resource/collection/useCollectionResources.generated.tsx","fe/resource/collection/useCollectionResources.ts","fe/user/followers/collection/useCollectionFollowers.ts","HOC/modules/AddResource/addResource.generated.tsx","fe/resource/add/useAddResource.generated.tsx","fe/resource/add/useAddResource.tsx","ui/modules/AddResource/UploadResource.tsx","HOC/modules/AddResource/addResourceHOC.tsx","ui/modules/EditCollectionPanel/index.tsx","HOC/modules/EditCollectionPanel/editCollectionPanelHOC.tsx","fe/flags/all/useAllFlags.generated.tsx","fe/mutation/flag/useMutateFlag.generated.tsx","fe/context/flag/useFlagContext.ts","ui/modules/FlagModal/index.tsx","HOC/modules/FlagModal/flagModalHOC.tsx","ui/elements/Layout/comment.tsx","ui/modules/HeroCollection/index.tsx","HOC/modules/HeroCollection/HeroCollection.tsx","ui/modules/MoodlePanel/index.tsx","fe/instance/info/useInstanceInfo.generated.tsx","fe/lib/moodleLMS/useSendToMoodle.ts","fe/lib/moodleLMS/LMSintegration.ts","HOC/modules/MoodlePanel/MoodlePanel.tsx","fe/resource/preview/useResourcePreview.generated.tsx","fe/mutation/like/useMutateLike.generated.tsx","fe/context/like/useLikeContext.ts","fe/resource/preview/useResourcePreview.ts","fe/lib/moodleLMS/mappings/gql2LMS.ts","ui/modules/Previews/Resource.tsx","HOC/modules/previews/resource/ResourcePreview.tsx","fe/user/preview/useUserPreview.generated.tsx","fe/user/preview/useUserPreview.ts","HOC/modules/HeroUser/HeroUser.generated.tsx","HOC/pages/user/UserPage.generated.tsx","fe/activities/outbox/user/useUserOutboxActivities.generated.tsx","fe/activities/outbox/user/useUserOutboxActivities.ts","fe/collection/user/useUserFollowedCollections.generated.tsx","fe/collection/user/useUserFollowedCollections.ts","fe/community/user/useUserFollowedCommunities.generated.tsx","fe/community/user/useUserFollowedCommunities.ts","fe/lib/activity/getActivityActor.ts","fe/lib/activity/getActivityMainContext.ts","fe/lib/activity/getActivityEventString.tsx","fe/activities/outbox/community/useCommunityOutboxActivities.generated.tsx","fe/activities/outbox/community/useCommunityOutboxActivities.ts","fe/collection/community/useCommunityCollections.generated.tsx","fe/collection/community/useCommunityCollections.ts","fe/mutation/createThread/useCreateThread.generated.tsx","fe/thread/community/useCommunityThreads.generated.tsx","fe/context/createThread/useCreateThreadContext.ts","fe/community/edit/useEditCommunity.generated.tsx","fe/community/edit/useEditCommunity.ts","fe/community/useCommunity.generated.tsx","fe/community/useCommunity.ts","fe/thread/community/useCommunityThreads.ts","fe/user/followers/community/useCommunityFollowers.ts","fe/collection/create/useCreateCollection.generated.tsx","fe/collection/create/useCreateCollection.ts","ui/modules/CreateCollectionPanel/index.tsx","ui/modules/HeroCommunity/index.tsx","HOC/modules/CreateCollectionPanel/createCollectionPanelHOC.tsx","ui/modules/EditCommunityPanel/index.tsx","HOC/modules/EditCommunityPanel/editCommunityPanelHOC.tsx","HOC/modules/HeroCommunity/HeroCommunity.tsx","fe/activities/preview/useActivityPreview.generated.tsx","ui/modules/SocialText/index.tsx","ui/pages/thread/index.tsx","fe/comment/preview/useCommentPreview.generated.tsx","fe/activities/inbox/my/useMyInboxActivities.generated.tsx","fe/comment/thread/useThreadComments.generated.tsx","fe/comment/reply/useReplyComment.generated.tsx","fe/comment/reply/useReplyComment.ts","fe/comment/preview/useCommentPreview.ts","ui/modules/Previews/Comment.tsx","ui/modules/Previews/MainComment.tsx","HOC/modules/previews/comment/CommentPreview.tsx","fe/thread/preview/useThreadPreview.generated.tsx","ui/modules/ActivityPreview/index.tsx","fe/thread/preview/useThreadPreview.ts","fe/comment/thread/useThreadComments.ts","fe/community/preview/useCommunityPreview.generated.tsx","fe/community/preview/useCommunityPreview.ts","ui/modules/Previews/Community.tsx","HOC/modules/previews/community/CommunityPreview.tsx","ui/modules/Previews/Thread.tsx","HOC/modules/previews/thread/ThreadPreview.tsx","HOC/modules/previews/index.tsx","HOC/pages/thread/ThreadPage.tsx","routes/ThreadPageRoute.tsx","fe/activities/preview/useActivityPreview.ts","fe/lib/activity/getActivitySimpleLink.ts","ui/modules/Previews/LikedComment.tsx","HOC/modules/previews/commentLiked/CommentLikedPreview.tsx","HOC/modules/previews/activity/PreviewComponent.tsx","HOC/modules/previews/activity/ActivityPreview.tsx","ui/modules/SidePanel/index.tsx","ui/pages/community/index.tsx","HOC/pages/community/CommunityPage.tsx","ui/pages/notFound/index.tsx","HOC/pages/not-found/NotFound.tsx","routes/CommunityPageRoute.tsx","fe/lib/activity/getContextCommunityInfo.ts","fe/likes/user/useUserLikes.generated.tsx","fe/likes/user/useUserLikes.ts","fe/user/followed/user/useUserFollowedUsers.generated.tsx","fe/user/followed/user/useUserFollowedUsers.ts","fe/user/useUser.generated.tsx","ui/modules/HeroUser/index.tsx","fe/user/useUser.ts","HOC/modules/HeroUser/HeroUser.tsx","ui/pages/user/index.tsx","HOC/pages/user/UserPage.tsx","routes/UserPageRoute.tsx","ui/modules/Previews/User.tsx","HOC/modules/previews/user/UserPreview.tsx","HOC/modules/ShareLink/shareLink.generated.tsx","fe/resource/shareLink/useShareLink.generated.tsx","ui/modules/ShareLink/fetched.tsx","ui/modules/ShareLink/index.tsx","HOC/modules/ShareLink/shareLinkHOC.tsx","ui/pages/collection/index.tsx","HOC/pages/collection/CollectionPage.tsx","routes/CollectionPageRoute.tsx","HOC/modules/FeaturedCollections/featuredCollections.tsx","ui/pages/discover/index.tsx","fe/activities/outbox/instance/useInstanceOutboxActivities.ts","fe/instance/featuredCommunities/useInstanceFeaturedCommunities.ts","ui/modules/FeaturedCommunities/index.tsx","ui/modules/FeaturedCommunities/preview.tsx","HOC/pages/discover/DiscoverPage.tsx","HOC/modules/FeaturedCommunities/featuredCommunities.tsx","fe/community/all/useAllCommunities.ts","routes/DiscoverPageRoute.tsx","fe/activities/inbox/my/useMyInboxActivities.ts","ui/pages/home/index.tsx","HOC/pages/home/HomeHoc.tsx","routes/HomePageRoute.tsx","HOC/modules/Sidebar/Sidebar.tsx","ui/modules/Burger/index.tsx","ui/templates/withSidebar.tsx","HOC/templates/WithSidebar/WithSidebar.tsx","routes/AllCollectionsPageRoute.tsx","ui/pages/allCommunities/index.tsx","HOC/pages/all-communities/AllCommunities.tsx","routes/AllCommunitiesPageRoute.tsx","ui/pages/confirmEmail/index.tsx","HOC/pages/confirmEmail/ConfirmEmailPage.tsx","routes/ConfirmEmailPageRoute.tsx","ui/pages/createNewPassword/index.tsx","HOC/pages/createNewPassword/CreateNewPassword.tsx","routes/CreateNewPasswordPageRoute.tsx","ui/pages/resetPassword/index.tsx","HOC/pages/resetPasswordRequest/resetPasswordRequestPage.tsx","routes/ResetPasswordPageRoute.tsx","fe/search/SearchData.generated.tsx","fe/lib/moodleLMS/mappings/hit2GQL.ts","fe/lib/moodleLMS/mappings/hit2LMS.ts","ui/pages/search/index.tsx","HOC/pages/search/Search.tsx","routes/SearchPageRoute.tsx","ui/pages/settings/index.tsx","fe/flags/all/useAllFlags.ts","fe/flags/preview/useFlagPreview.generated.tsx","fe/flags/preview/useFlagPreview.ts","ui/modules/Previews/FlaggedItem.tsx","ui/modules/ConfirmationPanel/index.tsx","HOC/modules/previews/flag/FlagPreview.tsx","ui/pages/settings/flags.tsx","HOC/pages/settings/flags/InstanceFlagsSection.tsx","fe/settings/instance/registration/allowlist/instanceRegistrationAllowLists.generated.tsx","fe/settings/instance/registration/allowlist/instanceRegistrationAllowLists.ts","ui/pages/settings/instance.tsx","HOC/pages/settings/instance/InstanceSettingsSection.tsx","ui/pages/settings/invites.tsx","HOC/pages/settings/invites/InstanceInvitesSection.tsx","ui/pages/settings/logs.tsx","HOC/pages/settings/moderationLog/InstanceModerationLogSection.tsx","ui/pages/settings/preferences.tsx","HOC/pages/settings/SettingsPage.tsx","HOC/pages/settings/preferences/PreferencesSettingsSection.tsx","ui/templates/withoutSidebar.tsx","HOC/templates/WithoutSidebar/WithoutSidebar.tsx","routes/SettingsPageRoute.tsx","ui/pages/signUp/index.tsx","HOC/pages/signUp/SignUpPage.tsx","routes/SignupPageRoute.tsx","HOC/pages/lmsMoodleSearch/lmsMoodleSearch.tsx","routes/LMSMoodleSearchRoute.tsx","ui/pages/termsAndConditions/index.tsx","HOC/pages/termsAndConditions/TermsAndConditionsPage.tsx","routes/TermsAndConditionsPage.tsx","containers/App/Router.tsx","containers/App/topMessage.tsx","containers/App/App.tsx","context/global/algolia.tsx","context/global/index.tsx","registerServiceWorker.js","index.tsx"],"names":["ApolloLink","getOpType","op","maybeOpDefNode","query","definitions","find","def","kind","name","value","operationName","operation","getOperationNameAndType","filter","reduce","found","opDefNode","maybeFieldNode","selectionSet","selections","selNode","opType","module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","defaultErrorMsg","ctx","errors","errorMsg","_","message","join","defaultSuccessMsg","notify","content","options","toast","mnCtx","opts","MngErrorLink","forward","getContext","noShowSuccess","successMsg","resp","noShowError","type","data","notifyGqlResponse","SettingsPageMeUserFragmentDoc","gql","SidebarFollowedCommunityFragmentDoc","SidebarMeUserFragmentDoc","UseMeDataFragmentDoc","MeDocument","MeLogoutDocument","MeUpdateMyProfileDocument","AuthDataFragmentDoc","AnonResetPasswordDocument","AnonResetPasswordRequestDocument","AnonLoginDocument","AnonConfirmEmailDocument","AnonSignUpDocument","AnonUsernameAvailableDocument","ActivityVerb","PHOENIX_SOCKET_ENDPOINT","process","REACT_APP_PHOENIX_SOCKET_ENDPOINT","GRAPHQL_ENDPOINT","SENTRY_KEY","REACT_APP_SENTRY_API_KEY","DEFAULT_PAGE_SIZE","parseInt","REACT_APP_DEFAULT_PAGE_SIZE","INVITE_ONLY_TEXT","REACT_APP_INVITE_ONLY_TEXT","logo_small_url","terms_markdown_text","terms_markdown_urls","terms_privacy","locales","desc","rtl","mothershipAppId","REACT_APP_MOTHERSHIP_API_ID","mothershipApiKey","REACT_APP_MOTHERSHIP_API_KEY","mothershipEnv","REACT_APP_MOTHERSHIP_ENV","mothershipCreds","appId","apiKey","indexName","searchDisabled","USERNAME_REGEX","DOMAIN_REGEX","accepted_license_types","colors","typography","primary","s1","s2","s3","m1","m2","m3","l1","l2","l3","GraphQLError","require","Observable","selectURI","selectHttpOptionsAndBody","fallbackHttpConfig","serializeFetchParameter","createSignalIfSupported","parseAndCheckHttpResponse","extractFiles","setPath","path","i","parts","trim","split","length","createUploadLink","uri","fetchUri","fetch","linkFetch","fetchOptions","credentials","headers","includeExtensions","linkConfig","http","context","clientAwareness","version","contextConfig","body","clone","files","size","form","FormData","append","forEach","paths","String","JSON","stringify","variables","file","observer","abortController","signal","controller","response","setContext","result","next","complete","catch","error","abort","initialise","a","localKVStore","appLinks","authToken","get","fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","cache","InMemoryCache","cacheRedirects","Query","activity","args","getCacheKey","__typename","activityId","collection","collectionId","community","communityId","comment","commentId","user","userId","thread","threadId","resource","resourceId","dataIdFromObject","obj","defaultDataIdFromObject","setToken","token","set","delToken","undefined","del","setTokenLink","nextLink","createSession","confirmEmail","resetPassword","authLink","authorization","errorLink","onError","errorResponse","graphQLErrors","networkError","console","HttpStatus","getStatusText","statusCode","of","unexpectedError","err","test","respStr","clientAwarenessHeadersLinkForNonApollo3Server","ALLOWED_ANONYMOUS_MUTATIONS","alertBlockMutationsForAnonymousLink","includes","httpLink","from","Boolean","absintheSocket","createAbsintheSocketLink","AbsintheSocket","PhoenixSocket","link","hasSubscription","client","ApolloClient","defaultOptions","watchQuery","fetchPolicy","errorPolicy","mutate","theme","breakpoints","app","appInverse","secondary","tertiary","positive","negative","warning","lightest","lighter","light","mediumlight","medium","mediumdark","dark","darker","darkest","border","variants","bg","color","avatar","borderRadius","text","subhead","fontFamily","fontSize","textTransform","letterSpacing","fontWeight","suptitle","heading","buttons","height","px","backgroundColor","cursor","danger","outline","space","ThemeProvider","children","moodlenet","styled","styledComponents","Header","SupText","ml","variant","Left","Flex","Text","props","HeaderWrapper","WrapperPanel","media","lessThan","Panel","Box","PanelTitle","Nav","NavItem","Bounce","Loader","className","WrapperButton","Button","transitions","isIcon","disabled","darken","lighten","MNButton","isSubmitting","isDisabled","LoadMore","p","LoadMoreFormik","onClick","submitForm","Wrapper","List","MainContainer","HomeBox","WrapperCont","MenuList","ObjectsList","BottomBordered","CollectionsWrapper","AllCollections","CollectionsBoxes","CommunityInfoFragmentDoc","CommunityPreviewFragmentDoc","CollectionPreviewFragmentDoc","FullPageInfoFragmentDoc","AllCollectionsDocument","AllCollectionsQueryRefetch","usePage","gqlPage","page","useMemo","mngPage","formiks","nextPageFormik","useFormik","initialValues","onSubmit","useCallback","ready","previousPageFormik","previous","pageInfo","hasNextPage","hasPreviousPage","useFormikPaging","edges","after","endCursor","before","update","updatePageNext","isNext","startCursor","updatePagePrev","pageMng","fetched","prev","concat","totalCount","useAllCollections","baseOptions","allCollectionsQ","limit","ApolloReactHooks","allCollectionsPage","collections","fetchMore","updateQuery","fetchMoreResult","SimpleLink","external","href","url","rel","target","SLink","to","Link","Collection","icon","totalResources","summary","displayUsername","isFollowing","toggleFollowFormik","hideActions","isSearch","CollectionWrapper","WrapperLink","Previews","Big","src","Info","Title","Meta","TotResources","Action","ActionItem","bordered","preventDefault","ActionText","sx","Search","Heading","ellipsis","MyFollowedCollectionDataFragmentDoc","MyCollectionFollowsDataFragmentDoc","MyCollectionFollowsDocument","MyCollectionFollowsQueryRefetch","MyFollowedCommunityDataFragmentDoc","MyCommunityFollowsDataFragmentDoc","MyCommunityFollowsDocument","MyCommunityFollowsQueryRefetch","isOptimisticId","FollowDocument","UnfollowDocument","UserPreviewFragmentDoc","CollectionFollowerFragmentDoc","CollectionFollowersDocument","CollectionFollowersQueryRefetch","CommunityFollowerFragmentDoc","CommunityFollowersDocument","CommunityFollowersQueryRefetch","withEncodedExtraInfo","gqlObj","olderGqlObj","extraInfo","olderExtraInfo","mergedExtraInfo","URL_REGEX","isUrlString","getMaybeUploadInput","maybeFileOrString","currentUploadUrl","File","getUploadInput","fileOrString","upload","useMe","meQ","GQL","logoutMut","logoutStatus","updateProfileMutation","updateProfileMutationStatus","push","useHistory","me","loading","isAdmin","isInstanceAdmin","logout","proxy","writeQuery","finally","updateProfile","image","profile","createLocalSessionKVStorage","prefix","storage","localStorage","sessionStorage","pkey","key","parse","getItem","val","setItem","serialize","removeItem","str","warn","kvstore","savedLangCode","defaultLocale","available","locale","i18n","setupI18n","LocaleContext","createContext","current","ProvideLocalizationCtx","useState","setCurrent","catalogs","setCatalogs","useEffect","setHTMLDirection","loadCatalog","cat","localeCode","Settings","localeContextValue","language","Provider","RTL","htmlEl","document","querySelector","dir","style","direction","classList","remove","add","LogoContainer","React","useContext","isHome","Tagline","div","Logo","h5","tt","login","i18nMark","placeholders","email","password","Login","formik","Container","LoginWrapper","FormWrapper","FormLogin","LoginForm","handleSubmit","placeholder","values","onChange","handleChange","Spacer","mt","width","ResetPass","my","Or","Browse","mb","Background","Infos","Right","useAnon","useApolloClient","loginMut","loginStatus","resetPwdMut","resetPwdStatus","confirmEmailMut","confirmEmailStatus","signUpMut","signUpStatus","resetPwdReqMut","resetPwdReqStatus","updateMe","resetPwdReq","signUp","registration","createUser","resetPwd","usernameAvailable","username","PageCtx","setTitle","ProvidePageCtx","subTitle","setSubTitle","subTitleToSet","nextSubTitle","title","Helmet","usePageTitle","validationSchema","Yup","max","required","loginPageTitle","LoginPageHOC","enableReinitialize","SideBarContext","isOpen","toggleOpen","ProvideSideBarContext","useReducer","is","ResourcePreviewFragmentDoc","CommentPreviewBaseFragmentDoc","CommentPreviewFragmentDoc","FlagPreviewFragmentDoc","LikePreviewFragmentDoc","ThreadPreviewFragmentDoc","FollowPreviewFragmentDoc","ActivityPreviewFragmentDoc","InstanceOutboxActivityFragmentDoc","InstanceOutboxActivitiesDocument","InstanceOutboxActivitiesQueryRefetch","AllCommunitiesDocument","HeroCommunityDataFragmentDoc","CommunityPageDataFragmentDoc","CommunityPageThreadFragmentDoc","CommunityPageCollectionBaseFragmentDoc","CreateCommunityDocument","useCreateCommunity","createMut","createMutStatus","create","useCallOrNotifyMustLogin","preferredUsername","refetchQueries","AllCommunitiesQueryRefetch","DropzoneArea","initialUrl","uploadType","onFileSelect","filePattern","fileUrl","setFileUrl","currentFile","setCurrentFile","URL","revokeObjectURL","useDropzone","accept","onDrop","acceptedFiles","localUrl","createObjectURL","getRootProps","getInputProps","isDragActive","InfoContainer","Thumb","WrapperIcon","strokeWidth","Img","backgroundImage","indexOf","FileThumb","FileName","WrapperFile","Alert","AlertWrapper","Dialog","clearFix","Close","Content","Actions","CounterChars","ContainerForm","Row","big","Portal","el","display","ReactDOM","createPortal","this","Component","_el","createElement","setAttribute","appendChild","Modal","closeModal","handleCloseModal","CreateCommunityPanel","cancel","onIconFileSelected","setValues","initialIconUrl","m","Hero","HeroInfo","CollectionContainerForm","Description","marginLeft","TestUrlOrFile","min","CreateCommunityPanelHOC","done","history","vals","res","createCommunity","SearchBox","Avatar","initials","substr","toUpperCase","Dropdown","orientation","close","onOutsideClick","DropdownItem","lined","Item","ItemButton","DropdownSidebar","userLink","toggleDropdown","flex","textAlign","MainHeader","Icon","goBack","HomeLink","alignItems","position","substring","HeaderName","isOpenDropdown","Signin","MainHeaderHOC","notifiedMustLogin","useNotifyMustLogin","showCreateCommunity","toggleShowCreateCommunity","CreateCommunityModal","toggleSideBar","headerProps","Guest","HeaderBox","Page","SearchBar","greaterThan","GuestTemplate","withoutHeader","RedirectAuthenticated","RedirectAuthenticatedToHome","RedirectAnonymous","RedirectAnonymousToLogin","locationHelper","routeProps","routePaths","getPath","params","index","usePath","searchParams","URLSearchParams","toString","generatePath","matchPath","getSimpleLink","actor","internal","isLocal","internalPath","canonicalUrl","simpleLink","LoginPageRoute","exact","component","match","loginLocation","defaultOpts","_fn","deps","fn","loggedIn","useMyFollowedCommunities","myFlwCommunitiesQ","myCommunityFollowsPage","communityFollows","useFollowContext","followMut","followMutStatus","unfollowMut","unfollowMutStatus","mutating","toggleFollow","followerCount","myFollow","contextId","optimisticResponse","optimisticFollow","optimisticUnfollow","createFollow","delete","CollectionPreviewDocument","Status","useCollectionPreview","collectionPreviewQ","CollectionPreviewHOC","flagged","collectionPreviewProps","collectionFragment2UIProps","resourceCount","allCollectionsPageTitle","AllCollectionsPage","allCollectionsUIProps","collectionPreview","SidebarComponent","InternalWrapper","SidebarFixed","SidebarOverflow","CommunityLink","NavLink","SidebarLink","isActive","ItemTitle","ItemTitleDir","Sidebar","isSidebarOpen","status","Loading","discoverPath","homePath","communities","DiscoverPageFeaturedCommunityInfoFragmentDoc","DiscoverPageFeaturedCollectionInfoFragmentDoc","CollectionFeatureFragmentDoc","InstanceFeaturedCollectionsDocument","InstanceFeaturedCollectionsQueryRefetch","useInstanceFeaturedCollections","featuredCollectionsQ","featuredCollectionsPage","instance","featuredCollections","feturedCollections","ChevronLeft","xmlns","viewBox","fill","stroke","strokeLinecap","strokeLinejoin","points","RightContext","ActionContainer","FeaturedCollections","sliderRef","useRef","canEdit","toggleEdit","isEditing","slickPrev","slickNext","ref","c","sliderSettings","slidesToShow","dots","arrows","infinite","autoplay","speed","slidesToScroll","responsive","breakpoint","settings","PlaceholderImg","Remove","CollectionSmall","py","mr","replace","CommunityFeatureFragmentDoc","InstanceFeaturedCommunitiesDocument","InstanceFeaturedCommunitiesQueryRefetch","AddFeaturedDocument","RemoveFeaturedDocument","useFeaturedContext","addFeaturedMut","addFeaturedMutStatus","useRemoveFeaturedMutation","rmFeaturedMut","rmFeaturedMutStatus","toggleFeatured","isFeatured","featureId","FeaturedModal","itemName","itemType","SubmitButton","FeatureModalHOC","featuredContext","toggleFeaturedFormik","EditCollectionQueryDataFragmentDoc","EditCollectionDataDocument","EditCollectionDocument","useEditCollection","editMut","editMutStatus","collectionEditQ","useEditCollectionDataQuery","edit","HeroCollectionDataFragmentDoc","CollectionPageDataFragmentDoc","CollectionPageResourceFragmentDoc","CollectionDataDocument","useCollection","toggleJoin","isCommunityMember","isCreator","creator","canModify","CollectionResourceFragmentDoc","CollectionResourcesDocument","useCollectionResources","collectionQ","resourcesPage","resources","useCollectionFollowers","collectionFollowersQ","collectionFollowersPage","followers","AddResourceCreateResourceMutationResultFragmentDoc","AddResourceCreateResourceDocument","useAddResource","createResource","createResourceStatus","CollectionResourcesQueryRefetch","LicenseIcon0","LicenseIcon1","LicenseIcon2","submit","UploadResource","acceptedLicenses","hideIconField","license0","license1","license2","onResourceFileSelect","initialResourceUrl","onIconFileSelect","Adv","FormInput","LabelWrapper","RadioButton","checked","license","LicenseLabel0","htmlFor","LicenseLabel1","LicenseLabel2","Label","label","input","Input","AddResourceHOC","validateOnBlur","validateOnChange","resourceFile","EditCollectionPanel","EditCollectionPanelHOC","AllFlagsDocument","AllFlagsQueryRefetch","FlagDocument","UnflagDocument","useFlagContext","flagMut","flagMutStatus","unflagMut","unflagMutStatus","flag","myFlag","optimisticFlag","unflag","optimisticUnflag","createFlag","FlagModal","flagFormik","isFlagged","unflagFormik","reason","FlagModalHOC","Comment","MDComment","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","HeroCollection","HeroCont","Username","fullName","ActionsHero","following","toggleJoinFormik","RightDd","AdminDropdownItem","addToFeatured","More","HeroCollectionHOC","basePath","toggleEditing","EditModal","isFlagging","toggleFlagging","isAddingToFeatured","toggleAddToFeatured","AddToFeaturedModal","heroProps","Loaded","communityName","communityIcon","MoodlePanel","sendToMoodleFormik","site","InstanceInfoDocument","useInstanceInfoQuery","useLMS","instanceInfo","useLMSPrefs","updateLMSPrefs","currentLMSPrefs","sendToLMS","LMS","resource_info_stringified","uploadResourceTypes","mediaType","resourceurl","resource_info","course","section","method","action","entries","hiddenField","removeChild","sendToMoodle","setCurrentLMSPrefs","matches","MoodlePanelHOC","BasicLMSPrefs","shallUpdate","useThisLMSPrefs","ResourcePreviewDocument","LikeDocument","UnlikeDocument","useLikeContext","myLike","likerCount","likeMut","likeMutStatus","unlikeMut","unlikeMutStatus","toggleLike","optimisticLike","optimisticUnlike","createLike","likes","useResourcePreview","resourcePreviewQ","likers","collection2lms","community2lms","Resource","collectionLink","collectionName","like","isFile","toggleFlag","ResourceThumb","IconWrapper","TitleLink","TypeItem","LinkResource","TextLink","liked","iLikeIt","toggleLikeFormik","ActionIcon","totalLikes","MoreItem","Summary","Bordered","ResourcePreviewHOC","notifyMustLogin","isOpenSendToMoodle","toggleSendToMoodleModal","isOpenFlag","toggleFlagModal","resourcePreviewProps","resourceFragment2UIProps","resourceLMS","payload","licence","resourceGql2lms","MoodleModal","collectionLocation","tab","UserPreviewDocument","useUserPreview","userPreviewQ","HeroUserUserDataFragmentDoc","UserPageActivitiesFragmentDoc","UserPageUserDataFragmentDoc","UserOutboxActivityFragmentDoc","UserOutboxActivitiesDocument","useUserOutboxActivities","activitiesQ","activitiesPage","outbox","UserFollowedCollectionFragmentDoc","UserFollowedCollectionsDocument","useUserFollowedCollections","userQ","followedCollectionsPage","collectionFollows","UserFollowedCommunityFragmentDoc","UserFollowedCommunitiesDocument","useUserFollowedCommunities","followedCommunitiesPage","getActivityActor","usr","userName","userLocation","getActivityMainContext","comments","getEventStringByContext","verb","mainContext","inReplyTo","Created","Updated","CommunityOutboxActivityFragmentDoc","CommunityOutboxActivitiesDocument","CommunityOutboxActivitiesQueryRefetch","useCommunityOutboxActivities","communityQ","CommunityCollectionFragmentDoc","CommunityCollectionsDocument","useCommunityCollections","collectionsPage","CreateThreadDocument","CommunityThreadFragmentDoc","CommunityThreadsDocument","useCreateThreadContext","createThreadMut","createThread","CommunityThreadsQueryRefetch","EditCommunityQueryDataFragmentDoc","EditCommunityDataDocument","EditCommunityDocument","useEditCommunity","communityEditQ","useEditCommunityDataQuery","CommunityDataDocument","useCommunity","useCommunityThreads","threadsPage","threads","useCommunityFollowers","communityFolowersQ","communityFollowersPage","CreateCollectionDocument","useCreateCollection","CommunityCollectionsQueryRefetch","CreateCollectionPanel","CreateCollectionPanelHOC","createCollection","log","HeroCommunity","EditCommunityPanel","EditCommunityPanelHOC","totalMembers","ActivityPreviewDocument","SocialTextDiv","SocialTextArea","Textarea","SocialActions","SocialText","defaultValue","keepTextOnSubmit","setText","txt","onInput","Thread","MainThread","Comments","Context","isCommunityContext","loadMoreComments","reply","MainThreadContainer","SocialWrapper","msg","replyFormik","replyMessage","TitleSection","LinkImg","CommentPreviewDocument","MyInboxActivityFragmentDoc","MyInboxActivitiesDocument","ThreadCommentsDocument","ReplyDocument","useReplyComment","createReplyMut","inReplyToCommentId","MyInboxActivitiesQueryRefetch","createReply","threadCommentsQueryRes","readQuery","useCommentPreview","commentPreviewQ","threadContext","canReply","isDropdownOpen","Items","MainComment","CommentPreviewHOC","mainComment","notifyUnlogged","commentPreviewProps","ThreadPreviewDocument","useThreadPreview","commentCount","lastActivity","totalReplies","totalComments","ActivityPreview","FeedItem","event","toLowerCase","commentActor","threadUrl","createdAt","communityLink","Contents","preview","ActorComp","Member","MemberInfo","Name","TextEvent","marginTop","DateTime","fromSQL","toRelative","mx","CommunityName","SmallActorComp","Date","useThreadComments","threadPreviewQ","commentPage","CommunityPreviewDocument","useCommunityPreview","communityPreviewQ","Community","followersCount","joined","collectionsCount","WrapperImage","alignSelf","MetaWrapper","CommunityPreviewHOC","communityPreviewProps","communityFragment2UIProps","collectionCount","threadsCount","members","ThreadPreviewHOC","threadPreviewProps","PreviewIndex","threadPageTitle","ThreadPage","titleValues","excerpt","uiProps","getCommunityInfoStrings","activityProps","ActivityPreviewStatus","ThreadPageRoute","threadLocation","useActivityPreview","eventString","getEventString","communityLocation","communityInfoStrings","LikedComment","pl","textDecoration","LikedCommentPreviewHOC","likedCommentPreviewProps","PreviewComponent","ActivityPreviewHOC","activityBox","UI","SidePanel","ComingSoon","aria-label","role","CommunityPageTab","CreateCollectionButton","Menu","tabPaths","pt","timeline","discussions","WrapSocialText","Activities","Collections","Members","newThreadFormik","Threads","loadMoreActivities","loadMoreCollections","loadMoreThreads","communityActivitiesPageTitle","communityCollectionsPageTitle","communityDiscussionsPageTitle","communityMembersPageTitle","CommunityPage","communityPageTitle","Discussions","isJoined","notifiedMustJoin","newThreadId","follow","HeroCommunityBox","showCreateCollectionModal","toggleShowCreateCollectionModal","CreateCollectionModal","communityPageProps","NotFound","notFoundPageTitle","NotFoundHOC","CommunityPageRoute","maybeTabStr","communityInfo","getContextCommunityInfo","UserLikesDocument","useUserLikes","userLikesQ","likesPage","UserFollowedUserFragmentDoc","UserFollowedUsersDocument","useUserFollowedUsers","followedUsersPage","userFollows","UserDataDocument","useUser","totalCollections","totalCommunities","totalUsers","totalActivities","isMe","HeroUser","ProfileBox","HeroBg","FlexProfile","WrapperHero","HeroAction","HeroTitle","AdminBadge","location","Location","userHeroProps","loadedProps","UserPageTab","User","HeroUserBox","LikesBoxes","ActivityBoxes","CommunityBoxes","UserBoxes","loadMoreLikes","loadMoreCommunities","loadMoreFollowing","userStarredPageTitle","userCommunitiesPageTitle","userCollectionsPageTitle","userFollowingPageTitle","userActivitiesPageTitle","UserPage","userInfo","userPageTitle","Starred","Communities","Following","userPageProps","activityContext","followedCollection","followedCommunity","followedUser","website","UserPageRoute","bio","profileUrl","WrapperFlex","Names","UserPreviewHOC","userPreviewProps","pb","ShareLinkWebMetaFragmentDoc","ShareLinkFetchWebMetaDocument","Fetched","ContainerFetched","ShareLink","FetchedRow","Form","FetchLinkFormik","SearchInput","fetchUrl","Span","WrapperLoader","isFetched","cancelFetched","button","gray","shareResourceInitialValues","fetchLinkInitialValues","ShareLinkHOC","fetchWebMeta","webMetaDataResult","urlValidationSchema","webMetaData","fetchWebMetadata","ShareLinkFormik","CollectionPageTab","UploadResourcePanel","Followers","Resources","loadMoreResources","loadMoreFollowers","shareLink","WrapButton","collectionPageFollowersTitle","collectionPageResourcesTitle","CollectionPage","openPanel","setOpenPanel","closePanel","collectionPageTitle","notifyNotLogged","collectionPageProps","CollectionPageRoute","selectedFeatureToRemove","setSelectedFeatureToRemove","feature","collectionFragment","RemoveFeaturedModal","propsUI","Discover","ActivitiesBox","FeaturedCommunitiesBox","FeaturedCollectionsBox","CommunitiesBoxes","WrapperFeatured","useInstanceOutboxActivities","useInstanceFeaturedCommunities","featuredCommunitiesQ","featuredCommunitiesPage","featuredCommunities","FeaturedCommunities","DiscoverPageTabs","CommunitySmall","communityFragment","useAllCommunities","allCommunitiesQ","allCommunitiesPage","discoverActivitiesPageTitle","discoverCollectionsPageTitle","discoverCommunitiesPageTitle","DiscoverPage","discovberPageTitle","activitiesPageNext","allCommunitiesPageNext","allCollectionsPageNext","discoverLocation","DiscoverPageRoute","useMyInboxActivities","inbox","Home","InboxElements","nextInboxFormik","homeMyTimelinePageTitle","HomePageHOC","userActivityEdge","homeProps","HomePageRoute","homeLocation","SidebarHOC","StatusUI","Burger","open","setOpen","StyledBurger","Side","userImage","signout","StyledMenu","Profile","Bottom","nav","mobile","WithSidebar","SidebarBox","Footer","FootWrapper","Bavatar","WithSidebarTemplate","withSidebarProps","AllCollectionsPageRoute","AllCommunities","allCommunitiesPageTitle","AllCommunitiesPage","allCommunitiesUIProps","communityPreview","AllCommunitiesPageRoute","ConfirmEmail","confirmEmailPageTitle","ConfirmEmailPage","welcomeUsername","setTimeout","ConfirmEmailRoute","passwordConfirm","CreateNewPassword","shape","oneOf","createNewPasswordPageTitle","CreateNewPasswordPageHOC","CreateNewPasswordPageRoute","ResetPassword","isSubmitted","VerifiedBox","ButtonLink","resetPasswordPageTitle","ResetPasswordPageHOC","submitCount","ResetPasswordPageRoute","SearchInstanceFragmentDoc","SearchMeFragmentDoc","SearchHostIndexAndMyFollowsDocument","useSearchHostIndexAndMyFollowsQuery","SearchFollowDocument","SearchUnfollowDocument","collectionHit2gql","communityHit2gql","index_mothership_object_id","collectionHit2lms","communityHit2lms","previews","Pagination","Filter","SearchWrapper","El","NavWrapper","SearchPageHOC","connectInfiniteHits","hits","hit","index_type","objectID","showNext","RefinementList","attribute","Configure","hitsPerPage","CollectionPreviewHit","useIsLocal","previewFragment","useFollowHitHelper","CommunityPreviewHit","hitSearchFollow","ResourcePreviewHit","uploadResType","mirror","resourceHit2gql","resourceHit2lms","localHostName","hostname","index_instance","followResult","useSearchUnfollowMutation","unfollow","unfollowResult","searchFollows","searchFollow","canFollow","followId","canUnfollow","SearchPageRoute","Preferences","Instance","Invites","Flags","ModerationLog","sectionPaths","onImageFileSelected","initialImageUrl","SettingsWrapper","preferences","invites","flags","logs","general","Bg","RelevantLink","SectionTitle","useAllFlags","allFlagsQ","flagsPage","FlagPreviewDataDocument","DeleteFlagDocument","DeleteFlagContextDocument","DeactivateFlaggedUserDocument","useFlagPreview","flagId","flagQ","useDeleteFlagContextMutation","deleteFlagContextMut","deleteFlagContextStatus","useDeleteFlagMutation","deleteFlagMut","deleteFlagStatus","useDeactivateFlaggedUserMutation","deactivateFlaggedUserMut","deactivateFlaggedUserStatus","deactivateFlaggedUser","deleteFlagContext","all","ignoreFlag","ignoreFlagStatus","FlaggedItem","FlaggedItemContextElement","blockUser","deleteContent","Reason","ConfirmationPanel","description","confirm","waiting","FlagPreviewHOC","confirmType","setConfirmType","closeConfirm","ConfirmActionModal","CommentPreview","FlagPreviews","loadMoreFlags","FlagPreview","InstanceFlagsSection","AddEmailDomainToAllowListDocument","RemoveEmailDomainFromAllowListDocument","RemoveEmailFromAllowListDocument","SendInviteEmailDocument","InstanceRegisterEmailAccessesDocument","InstanceRegisterEmailDomainAccessesDocument","InstanceRegisterEmailAccessesQueryRefetch","InstanceRegisterEmailDomainAccessesQueryRefetch","useInstanceRegistrationAllowLists","addEmailDomainMut","addEmailDomainStatus","removeEmailDomainMut","removeEmailDomainStatus","removeEmailMut","removeEmailStatus","sendInviteEmailMut","sendInviteEmailStatus","listEmailsQ","listEmailsPage","registerEmailAccesses","listEmailDomainsQ","listEmailDomainsPage","registerEmailDomainAccesses","addEmailDomain","domain","removeEmailDomain","sendInviteEmail","addEmail","removeEmail","DomainText","DomainContainerForm","DomainWrapper","DomainInput","ListRow","Delete","formikAddDomain","removeDomain","domainsList","loadMoreDomains","marginRight","withEmailDomainValidation","InstanceSettingsSection","domainToRemove","setDomainToRemove","unsetDomainToRemove","resetForm","domainId","RemoveDomainConfirmModal","Emails","emailsList","formikAddEmail","sendInvite","loadMoreEmails","EmailWrapper","EmailContainerForm","EmailInput","EmailText","withEmailValidation","InstanceInvitesSection","InstanceModerationLogSection","SettingsPageTab","LanguageSelect","selectedCode","selection","Array","isArray","setLocale","moodleWebsite","TransifexLink","PreferencesSettingsSection","localesOptions","currentOption","option","settingsPreferencesPageTitle","settingsInvitesPageTitle","settingsInstancePageTitle","settingsFlagsPageTitle","settingsModerationLogsPageTitle","settingsGeneralPageTitle","SettingsPage","settingsPageTitle","ModerationLogs","General","updateProfileFormik","settingsLocation","settingsPageProps","WithoutSidebar","CenteredWrapper","WithoutSidebarTemplate","withoutSidebarProps","SettingsPageRoute","SignUpPage","registeredUsername","registeredEmail","Aware","terms","green","signUpPageTitle","SignUpPageHOC","regInput","wantsEmailDigest","wantsNotifications","called","SignupPageRoute","moodleLMSEntryPageTitle","LMSMoodleSearch","badParams","LMSMoodleSearchRoute","paramsRef","q","window","search","getUrlParamsFromEntryPointForMoodleLMS","setProps","TermsAndConditionsPage","terms_users_text_data","terms_cookies_text_data","terms_indexing_text_data","terms_users_data","terms_privacy_enabled","privacy_url_text_data","terms_privacy_text_data","terms_cookies_data","terms_indexing_data","termsAndConditionsPageTitle","TermsAndConditionsPageHOC","terms_users_text","terms_privacy_text","terms_cookies_text","terms_indexing_text","useAxios","useCache","manual","terms_users","exec_terms_users","terms_cookies","exec_terms_cookies","terms_indexing","exec_terms_indexing","privacy_url_text","exec_privacy_url_text","TermsAndConditionsPageRoute","Router","TopMessage","show","setShow","AlertWrap","top","right","App","createURL","searchState","qs","searchClient","algoliasearch","ProvideAlgoliaContext","useLocation","backLoc","searching","isSearchLocation","pathname","slice","setSearchState","setUrlTO","EMPTY_QUERY","searchStateToUrl","clearTimeout","hash","handleSetSearchState","newSearchState","refinementList","InstantSearch","onSearchStateChange","refresh","locationPathname","ProvideContexts","isLocalhost","register","navigator","origin","addEventListener","swUrl","serviceWorker","unregister","reload","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","Global","createGlobalStyle","createLocalKVStore","getApolloClient","apolloClient","ApolloApp","hideProgressBar","transition","Slide","autoClose","newestOnTop","render","getElementById","registerServiceWorker","K","Sentry","dsn","run"],"mappings":"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","file":"static/js/main.e7f67b99.chunk.js","sourcesContent":["export * from './operation';\nexport * from './types.d';\n","import { ApolloLink, FetchResult, Operation } from 'apollo-link';\nimport {\n  OperationDefinitionNode,\n  OperationTypeNode,\n  FieldNode,\n  DocumentNode\n} from 'graphql';\nimport {\n  OperationDef,\n  OpRequestHandler,\n  Result,\n  VarsOperation,\n  Name\n} from './types';\n\nexport function isOp<D extends OperationDef>(\n  operationName: Name<D>,\n  operation: Operation\n): operation is VarsOperation<D> {\n  return operation.operationName === operationName;\n}\n\nexport class ApolloLinkOp<D extends OperationDef> extends ApolloLink {\n  constructor(operationName: Name<D>, reqHandl: OpRequestHandler<D>) {\n    super((operation, nextLink) => {\n      if (isOp<D>(operationName, operation)) {\n        return reqHandl(operation, nextLink);\n      } else {\n        return nextLink(operation);\n      }\n    });\n  }\n}\n\nexport const apolloLinkOp = <D extends OperationDef>(\n  operationName: Name<D>,\n  reqHandl: OpRequestHandler<D>\n) => new ApolloLinkOp<D>(operationName, reqHandl);\n\nexport type OpFetchResult<D extends OperationDef> = FetchResult<Result<D>>;\nexport type OpResultWatcher<D extends OperationDef> = (\n  result: OpFetchResult<D>\n) => OpFetchResult<D> | undefined | void;\nexport const apolloLinkOpResult = <D extends OperationDef>(\n  operationName: Name<D>,\n  watcher: OpResultWatcher<D>\n) =>\n  apolloLinkOp<D>(operationName, (op, next) =>\n    next(op).map(resp => {\n      const watcherResp = watcher(resp);\n      return typeof watcherResp === 'undefined' ? resp : watcherResp;\n    })\n  );\n\nexport const getOpType = (op: Operation) => {\n  const maybeOpDefNode = op.query.definitions.find<OperationDefinitionNode>(\n    (def): def is OperationDefinitionNode =>\n      def.kind === 'OperationDefinition' &&\n      !!def.name &&\n      def.name.value === op.operationName\n  );\n\n  return maybeOpDefNode && maybeOpDefNode.operation;\n};\n\nexport const getOperationNameAndType = <OperationName extends string = string>(\n  query: DocumentNode\n): [OperationName, OperationTypeNode] | [] => {\n  const opDefNodes = query.definitions.filter(\n    (def): def is OperationDefinitionNode => def.kind === 'OperationDefinition'\n  );\n\n  const maybeOperationNameAndType = opDefNodes.reduce<\n    [OperationName, OperationTypeNode] | null\n  >((found, opDefNode) => {\n    if (!found) {\n      const maybeFieldNode =\n        opDefNode.selectionSet.selections.find(\n          (selNode): selNode is FieldNode => selNode.kind === 'Field'\n        ) || null;\n      const opType = opDefNode.operation;\n      found =\n        maybeFieldNode &&\n        ([maybeFieldNode.name.value, opType] as [\n          OperationName,\n          OperationTypeNode\n        ]);\n    }\n    return found;\n  }, null);\n\n  return maybeOperationNameAndType || [];\n};\n","module.exports = __webpack_public_path__ + \"static/media/collectionPlaceholder.43589a77.png\";","var map = {\n\t\"./en_GB/messages.po\": [\n\t\t708,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 491;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./en_GB/messages.js\": [\n\t\t709,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 492;\nmodule.exports = webpackAsyncContext;","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/by.04d377d9.png\";","module.exports = __webpack_public_path__ + \"static/media/by-sa.331e6b36.png\";","import { ExecutionResult, GraphQLError } from 'graphql';\nimport { toast, ToastContent, ToastOptions } from 'react-toastify';\nimport { ApolloLink } from 'apollo-link';\nimport { getOperationNameAndType } from 'util/apollo/operation';\nimport Maybe from 'graphql/tsutils/Maybe';\n\nexport interface APICTX<Data = any> {\n  ctx?: string;\n  noShowError?: boolean;\n  noShowSuccess?: boolean;\n  errorMsg?: (errors: readonly GraphQLError[]) => string;\n  successMsg?: (data: Data) => string;\n}\n\nconst defaultErrorMsg = (ctx: string, errors: readonly GraphQLError[]) => {\n  const errorMsg = errors.map(_ => _.message).join('\\n');\n  return `Ooops, something went wrong with ${ctx}: \\n${errorMsg}`;\n};\nconst defaultSuccessMsg = (ctx: string) => `${ctx} success`;\n\nexport const notifyGqlResponse = <Data>(opts: APICTX<Data> = {}) => (\n  resp: ExecutionResult<Data>\n) => {\n  if (resp.errors && !opts.noShowError) {\n    const errorMsg = opts.errorMsg\n      ? opts.errorMsg(resp.errors)\n      : defaultErrorMsg(opts.ctx || 'this operation', resp.errors);\n    notify(errorMsg, { type: 'error' });\n  } else if (!resp.errors && resp.data && !opts.noShowSuccess) {\n    const successMsg = opts.successMsg\n      ? opts.successMsg(resp.data)\n      : defaultSuccessMsg(opts.ctx || '');\n    notify(successMsg, { type: 'success' });\n  }\n  return resp;\n};\n\nexport const notify = (content: ToastContent, options: ToastOptions) =>\n  toast(content, options);\n\nconst MN_CTX_FLD = 'MN_CTX_FLD';\nexport const mnCtx = <Data>(opts: APICTX<Data>) => ({ [MN_CTX_FLD]: opts });\nexport const getMnCtx = <Data>(context: any): undefined | APICTX<Data> =>\n  context ? context[MN_CTX_FLD] : undefined;\n\nexport const MngErrorLink = new ApolloLink((operation, forward) => {\n  const [, opType] = getOperationNameAndType(operation.query);\n  const mnCtx = operation.getContext()[MN_CTX_FLD] as Maybe<APICTX>;\n  const noShowSuccess =\n    opType === 'query' || (!mnCtx?.ctx && !mnCtx?.successMsg);\n\n  return forward(operation).map(\n    notifyGqlResponse({\n      noShowSuccess,\n      ctx: operation.operationName,\n      ...operation.getContext()[MN_CTX_FLD]\n    })\n  );\n});\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type SettingsPageMeUserFragment = (\n  { __typename: 'User' }\n  & Pick<Types.User, 'id' | 'name' | 'location' | 'summary' | 'displayUsername' | 'website' | 'extraInfo'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, image: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )> }\n);\n\nexport const SettingsPageMeUserFragmentDoc = gql`\n    fragment SettingsPageMeUser on User {\n  id\n  name\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  location\n  summary\n  displayUsername\n  website\n  extraInfo\n}\n    `;\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type SidebarFollowedCommunityFragment = (\n  { __typename: 'Community' }\n  & Pick<Types.Community, 'id' | 'isLocal' | 'canonicalUrl' | 'name'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, image: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )> }\n);\n\nexport type SidebarMeUserFragment = (\n  { __typename: 'User' }\n  & Pick<Types.User, 'id' | 'name' | 'preferredUsername' | 'displayUsername'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, image: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )> }\n);\n\nexport const SidebarFollowedCommunityFragmentDoc = gql`\n    fragment SidebarFollowedCommunity on Community {\n  id\n  isLocal\n  canonicalUrl\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  name\n}\n    `;\nexport const SidebarMeUserFragmentDoc = gql`\n    fragment SidebarMeUser on User {\n  id\n  name\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  preferredUsername\n  displayUsername\n}\n    `;\n","import * as Types from '../../graphql/types.generated';\n\nimport { SidebarMeUserFragment } from '../../HOC/modules/Sidebar/Sidebar.generated';\nimport { SettingsPageMeUserFragment } from '../../HOC/pages/settings/SettingsPage.generated';\nimport gql from 'graphql-tag';\nimport { SettingsPageMeUserFragmentDoc } from '../../HOC/pages/settings/SettingsPage.generated';\nimport { SidebarMeUserFragmentDoc } from '../../HOC/modules/Sidebar/Sidebar.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type MeQueryVariables = {};\n\n\nexport type MeQuery = (\n  { __typename: 'RootQueryType' }\n  & { me: Types.Maybe<(\n    { __typename: 'Me' }\n    & UseMeDataFragment\n  )> }\n);\n\nexport type MeLogoutMutationVariables = {};\n\n\nexport type MeLogoutMutation = (\n  { __typename: 'RootMutationType' }\n  & Pick<Types.RootMutationType, 'deleteSession'>\n);\n\nexport type UseMeDataFragment = (\n  { __typename: 'Me' }\n  & Pick<Types.Me, 'isInstanceAdmin' | 'email' | 'isConfirmed' | 'wantsEmailDigest' | 'wantsNotifications'>\n  & { user: (\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & SettingsPageMeUserFragment\n    & SidebarMeUserFragment\n  ) }\n);\n\nexport type MeUpdateMyProfileMutationVariables = {\n  profile: Types.UpdateProfileInput,\n  icon?: Types.Maybe<Types.UploadInput>,\n  image?: Types.Maybe<Types.UploadInput>\n};\n\n\nexport type MeUpdateMyProfileMutation = (\n  { __typename: 'RootMutationType' }\n  & { updateProfile: Types.Maybe<(\n    { __typename: 'Me' }\n    & { user: (\n      { __typename: 'User' }\n      & SettingsPageMeUserFragment\n    ) }\n  )> }\n);\n\nexport const UseMeDataFragmentDoc = gql`\n    fragment UseMeData on Me {\n  isInstanceAdmin\n  email\n  isConfirmed\n  wantsEmailDigest\n  wantsNotifications\n  user {\n    id\n    ...SettingsPageMeUser\n    ...SidebarMeUser\n  }\n}\n    ${SettingsPageMeUserFragmentDoc}\n${SidebarMeUserFragmentDoc}`;\nexport const MeDocument = gql`\n    query me {\n  me {\n    ...UseMeData\n  }\n}\n    ${UseMeDataFragmentDoc}`;\n\n/**\n * __useMeQuery__\n *\n * To run a query within a React component, call `useMeQuery` and pass it any options that fit your needs.\n * When your component renders, `useMeQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useMeQuery({\n *   variables: {\n *   },\n * });\n */\nexport function useMeQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<MeQuery, MeQueryVariables>) {\n        return ApolloReactHooks.useQuery<MeQuery, MeQueryVariables>(MeDocument, baseOptions);\n      }\nexport function useMeLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<MeQuery, MeQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<MeQuery, MeQueryVariables>(MeDocument, baseOptions);\n        }\nexport type MeQueryHookResult = ReturnType<typeof useMeQuery>;\nexport type MeLazyQueryHookResult = ReturnType<typeof useMeLazyQuery>;\nexport type MeQueryResult = ApolloReactCommon.QueryResult<MeQuery, MeQueryVariables>;\nexport const MeLogoutDocument = gql`\n    mutation meLogout {\n  deleteSession\n}\n    `;\nexport type MeLogoutMutationFn = ApolloReactCommon.MutationFunction<MeLogoutMutation, MeLogoutMutationVariables>;\n\n/**\n * __useMeLogoutMutation__\n *\n * To run a mutation, you first call `useMeLogoutMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useMeLogoutMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [meLogoutMutation, { data, loading, error }] = useMeLogoutMutation({\n *   variables: {\n *   },\n * });\n */\nexport function useMeLogoutMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<MeLogoutMutation, MeLogoutMutationVariables>) {\n        return ApolloReactHooks.useMutation<MeLogoutMutation, MeLogoutMutationVariables>(MeLogoutDocument, baseOptions);\n      }\nexport type MeLogoutMutationHookResult = ReturnType<typeof useMeLogoutMutation>;\nexport type MeLogoutMutationResult = ApolloReactCommon.MutationResult<MeLogoutMutation>;\nexport type MeLogoutMutationOptions = ApolloReactCommon.BaseMutationOptions<MeLogoutMutation, MeLogoutMutationVariables>;\nexport const MeUpdateMyProfileDocument = gql`\n    mutation meUpdateMyProfile($profile: UpdateProfileInput!, $icon: UploadInput, $image: UploadInput) {\n  updateProfile(profile: $profile, icon: $icon, image: $image) {\n    user {\n      ...SettingsPageMeUser\n    }\n  }\n}\n    ${SettingsPageMeUserFragmentDoc}`;\nexport type MeUpdateMyProfileMutationFn = ApolloReactCommon.MutationFunction<MeUpdateMyProfileMutation, MeUpdateMyProfileMutationVariables>;\n\n/**\n * __useMeUpdateMyProfileMutation__\n *\n * To run a mutation, you first call `useMeUpdateMyProfileMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useMeUpdateMyProfileMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [meUpdateMyProfileMutation, { data, loading, error }] = useMeUpdateMyProfileMutation({\n *   variables: {\n *      profile: // value for 'profile'\n *      icon: // value for 'icon'\n *      image: // value for 'image'\n *   },\n * });\n */\nexport function useMeUpdateMyProfileMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<MeUpdateMyProfileMutation, MeUpdateMyProfileMutationVariables>) {\n        return ApolloReactHooks.useMutation<MeUpdateMyProfileMutation, MeUpdateMyProfileMutationVariables>(MeUpdateMyProfileDocument, baseOptions);\n      }\nexport type MeUpdateMyProfileMutationHookResult = ReturnType<typeof useMeUpdateMyProfileMutation>;\nexport type MeUpdateMyProfileMutationResult = ApolloReactCommon.MutationResult<MeUpdateMyProfileMutation>;\nexport type MeUpdateMyProfileMutationOptions = ApolloReactCommon.BaseMutationOptions<MeUpdateMyProfileMutation, MeUpdateMyProfileMutationVariables>;\n\n\nexport interface MeQueryOperation {\n  operationName: 'me'\n  result: MeQuery\n  variables: MeQueryVariables\n  type: 'query'\n}\nexport const MeQueryName:MeQueryOperation['operationName'] = 'me'\n\nexport const MeQueryRefetch = (\n  variables:MeQueryVariables, \n  context?:any\n)=>({\n  query:MeDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface MeLogoutMutationOperation {\n  operationName: 'meLogout'\n  result: MeLogoutMutation\n  variables: MeLogoutMutationVariables\n  type: 'mutation'\n}\nexport const MeLogoutMutationName:MeLogoutMutationOperation['operationName'] = 'meLogout'\n\nexport const MeLogoutMutationRefetch = (\n  variables:MeLogoutMutationVariables, \n  context?:any\n)=>({\n  query:MeLogoutDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface MeUpdateMyProfileMutationOperation {\n  operationName: 'meUpdateMyProfile'\n  result: MeUpdateMyProfileMutation\n  variables: MeUpdateMyProfileMutationVariables\n  type: 'mutation'\n}\nexport const MeUpdateMyProfileMutationName:MeUpdateMyProfileMutationOperation['operationName'] = 'meUpdateMyProfile'\n\nexport const MeUpdateMyProfileMutationRefetch = (\n  variables:MeUpdateMyProfileMutationVariables, \n  context?:any\n)=>({\n  query:MeUpdateMyProfileDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../graphql/types.generated';\n\nimport { UseMeDataFragment } from './me.generated';\nimport gql from 'graphql-tag';\nimport { UseMeDataFragmentDoc } from './me.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type AnonResetPasswordMutationVariables = {\n  password: Types.Scalars['String'],\n  token: Types.Scalars['String']\n};\n\n\nexport type AnonResetPasswordMutation = (\n  { __typename: 'RootMutationType' }\n  & { resetPassword: Types.Maybe<(\n    { __typename: 'AuthPayload' }\n    & AuthDataFragment\n  )> }\n);\n\nexport type AnonResetPasswordRequestMutationVariables = {\n  email: Types.Scalars['String']\n};\n\n\nexport type AnonResetPasswordRequestMutation = (\n  { __typename: 'RootMutationType' }\n  & Pick<Types.RootMutationType, 'resetPasswordRequest'>\n);\n\nexport type AnonLoginMutationVariables = {\n  email: Types.Scalars['String'],\n  password: Types.Scalars['String']\n};\n\n\nexport type AnonLoginMutation = (\n  { __typename: 'RootMutationType' }\n  & { createSession: Types.Maybe<(\n    { __typename: 'AuthPayload' }\n    & AuthDataFragment\n  )> }\n);\n\nexport type AnonConfirmEmailMutationVariables = {\n  token: Types.Scalars['String']\n};\n\n\nexport type AnonConfirmEmailMutation = (\n  { __typename: 'RootMutationType' }\n  & { confirmEmail: Types.Maybe<(\n    { __typename: 'AuthPayload' }\n    & AuthDataFragment\n  )> }\n);\n\nexport type AnonSignUpMutationVariables = {\n  registration: Types.RegistrationInput\n};\n\n\nexport type AnonSignUpMutation = (\n  { __typename: 'RootMutationType' }\n  & { createUser: Types.Maybe<(\n    { __typename: 'Me' }\n    & UseMeDataFragment\n  )> }\n);\n\nexport type AnonUsernameAvailableQueryVariables = {\n  username: Types.Scalars['String']\n};\n\n\nexport type AnonUsernameAvailableQuery = (\n  { __typename: 'RootQueryType' }\n  & Pick<Types.RootQueryType, 'usernameAvailable'>\n);\n\nexport type AuthDataFragment = (\n  { __typename: 'AuthPayload' }\n  & Pick<Types.AuthPayload, 'token'>\n  & { me: (\n    { __typename: 'Me' }\n    & UseMeDataFragment\n  ) }\n);\n\nexport const AuthDataFragmentDoc = gql`\n    fragment AuthData on AuthPayload {\n  me {\n    ...UseMeData\n  }\n  token\n}\n    ${UseMeDataFragmentDoc}`;\nexport const AnonResetPasswordDocument = gql`\n    mutation anonResetPassword($password: String!, $token: String!) {\n  resetPassword(token: $token, password: $password) {\n    ...AuthData\n  }\n}\n    ${AuthDataFragmentDoc}`;\nexport type AnonResetPasswordMutationFn = ApolloReactCommon.MutationFunction<AnonResetPasswordMutation, AnonResetPasswordMutationVariables>;\n\n/**\n * __useAnonResetPasswordMutation__\n *\n * To run a mutation, you first call `useAnonResetPasswordMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAnonResetPasswordMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [anonResetPasswordMutation, { data, loading, error }] = useAnonResetPasswordMutation({\n *   variables: {\n *      password: // value for 'password'\n *      token: // value for 'token'\n *   },\n * });\n */\nexport function useAnonResetPasswordMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AnonResetPasswordMutation, AnonResetPasswordMutationVariables>) {\n        return ApolloReactHooks.useMutation<AnonResetPasswordMutation, AnonResetPasswordMutationVariables>(AnonResetPasswordDocument, baseOptions);\n      }\nexport type AnonResetPasswordMutationHookResult = ReturnType<typeof useAnonResetPasswordMutation>;\nexport type AnonResetPasswordMutationResult = ApolloReactCommon.MutationResult<AnonResetPasswordMutation>;\nexport type AnonResetPasswordMutationOptions = ApolloReactCommon.BaseMutationOptions<AnonResetPasswordMutation, AnonResetPasswordMutationVariables>;\nexport const AnonResetPasswordRequestDocument = gql`\n    mutation anonResetPasswordRequest($email: String!) {\n  resetPasswordRequest(email: $email)\n}\n    `;\nexport type AnonResetPasswordRequestMutationFn = ApolloReactCommon.MutationFunction<AnonResetPasswordRequestMutation, AnonResetPasswordRequestMutationVariables>;\n\n/**\n * __useAnonResetPasswordRequestMutation__\n *\n * To run a mutation, you first call `useAnonResetPasswordRequestMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAnonResetPasswordRequestMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [anonResetPasswordRequestMutation, { data, loading, error }] = useAnonResetPasswordRequestMutation({\n *   variables: {\n *      email: // value for 'email'\n *   },\n * });\n */\nexport function useAnonResetPasswordRequestMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AnonResetPasswordRequestMutation, AnonResetPasswordRequestMutationVariables>) {\n        return ApolloReactHooks.useMutation<AnonResetPasswordRequestMutation, AnonResetPasswordRequestMutationVariables>(AnonResetPasswordRequestDocument, baseOptions);\n      }\nexport type AnonResetPasswordRequestMutationHookResult = ReturnType<typeof useAnonResetPasswordRequestMutation>;\nexport type AnonResetPasswordRequestMutationResult = ApolloReactCommon.MutationResult<AnonResetPasswordRequestMutation>;\nexport type AnonResetPasswordRequestMutationOptions = ApolloReactCommon.BaseMutationOptions<AnonResetPasswordRequestMutation, AnonResetPasswordRequestMutationVariables>;\nexport const AnonLoginDocument = gql`\n    mutation anonLogin($email: String!, $password: String!) {\n  createSession(email: $email, password: $password) {\n    ...AuthData\n  }\n}\n    ${AuthDataFragmentDoc}`;\nexport type AnonLoginMutationFn = ApolloReactCommon.MutationFunction<AnonLoginMutation, AnonLoginMutationVariables>;\n\n/**\n * __useAnonLoginMutation__\n *\n * To run a mutation, you first call `useAnonLoginMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAnonLoginMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [anonLoginMutation, { data, loading, error }] = useAnonLoginMutation({\n *   variables: {\n *      email: // value for 'email'\n *      password: // value for 'password'\n *   },\n * });\n */\nexport function useAnonLoginMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AnonLoginMutation, AnonLoginMutationVariables>) {\n        return ApolloReactHooks.useMutation<AnonLoginMutation, AnonLoginMutationVariables>(AnonLoginDocument, baseOptions);\n      }\nexport type AnonLoginMutationHookResult = ReturnType<typeof useAnonLoginMutation>;\nexport type AnonLoginMutationResult = ApolloReactCommon.MutationResult<AnonLoginMutation>;\nexport type AnonLoginMutationOptions = ApolloReactCommon.BaseMutationOptions<AnonLoginMutation, AnonLoginMutationVariables>;\nexport const AnonConfirmEmailDocument = gql`\n    mutation anonConfirmEmail($token: String!) {\n  confirmEmail(token: $token) {\n    ...AuthData\n  }\n}\n    ${AuthDataFragmentDoc}`;\nexport type AnonConfirmEmailMutationFn = ApolloReactCommon.MutationFunction<AnonConfirmEmailMutation, AnonConfirmEmailMutationVariables>;\n\n/**\n * __useAnonConfirmEmailMutation__\n *\n * To run a mutation, you first call `useAnonConfirmEmailMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAnonConfirmEmailMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [anonConfirmEmailMutation, { data, loading, error }] = useAnonConfirmEmailMutation({\n *   variables: {\n *      token: // value for 'token'\n *   },\n * });\n */\nexport function useAnonConfirmEmailMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AnonConfirmEmailMutation, AnonConfirmEmailMutationVariables>) {\n        return ApolloReactHooks.useMutation<AnonConfirmEmailMutation, AnonConfirmEmailMutationVariables>(AnonConfirmEmailDocument, baseOptions);\n      }\nexport type AnonConfirmEmailMutationHookResult = ReturnType<typeof useAnonConfirmEmailMutation>;\nexport type AnonConfirmEmailMutationResult = ApolloReactCommon.MutationResult<AnonConfirmEmailMutation>;\nexport type AnonConfirmEmailMutationOptions = ApolloReactCommon.BaseMutationOptions<AnonConfirmEmailMutation, AnonConfirmEmailMutationVariables>;\nexport const AnonSignUpDocument = gql`\n    mutation anonSignUp($registration: RegistrationInput!) {\n  createUser(user: $registration) {\n    ...UseMeData\n  }\n}\n    ${UseMeDataFragmentDoc}`;\nexport type AnonSignUpMutationFn = ApolloReactCommon.MutationFunction<AnonSignUpMutation, AnonSignUpMutationVariables>;\n\n/**\n * __useAnonSignUpMutation__\n *\n * To run a mutation, you first call `useAnonSignUpMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAnonSignUpMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [anonSignUpMutation, { data, loading, error }] = useAnonSignUpMutation({\n *   variables: {\n *      registration: // value for 'registration'\n *   },\n * });\n */\nexport function useAnonSignUpMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AnonSignUpMutation, AnonSignUpMutationVariables>) {\n        return ApolloReactHooks.useMutation<AnonSignUpMutation, AnonSignUpMutationVariables>(AnonSignUpDocument, baseOptions);\n      }\nexport type AnonSignUpMutationHookResult = ReturnType<typeof useAnonSignUpMutation>;\nexport type AnonSignUpMutationResult = ApolloReactCommon.MutationResult<AnonSignUpMutation>;\nexport type AnonSignUpMutationOptions = ApolloReactCommon.BaseMutationOptions<AnonSignUpMutation, AnonSignUpMutationVariables>;\nexport const AnonUsernameAvailableDocument = gql`\n    query anonUsernameAvailable($username: String!) {\n  usernameAvailable(username: $username)\n}\n    `;\n\n/**\n * __useAnonUsernameAvailableQuery__\n *\n * To run a query within a React component, call `useAnonUsernameAvailableQuery` and pass it any options that fit your needs.\n * When your component renders, `useAnonUsernameAvailableQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useAnonUsernameAvailableQuery({\n *   variables: {\n *      username: // value for 'username'\n *   },\n * });\n */\nexport function useAnonUsernameAvailableQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<AnonUsernameAvailableQuery, AnonUsernameAvailableQueryVariables>) {\n        return ApolloReactHooks.useQuery<AnonUsernameAvailableQuery, AnonUsernameAvailableQueryVariables>(AnonUsernameAvailableDocument, baseOptions);\n      }\nexport function useAnonUsernameAvailableLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<AnonUsernameAvailableQuery, AnonUsernameAvailableQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<AnonUsernameAvailableQuery, AnonUsernameAvailableQueryVariables>(AnonUsernameAvailableDocument, baseOptions);\n        }\nexport type AnonUsernameAvailableQueryHookResult = ReturnType<typeof useAnonUsernameAvailableQuery>;\nexport type AnonUsernameAvailableLazyQueryHookResult = ReturnType<typeof useAnonUsernameAvailableLazyQuery>;\nexport type AnonUsernameAvailableQueryResult = ApolloReactCommon.QueryResult<AnonUsernameAvailableQuery, AnonUsernameAvailableQueryVariables>;\n\n\nexport interface AnonResetPasswordMutationOperation {\n  operationName: 'anonResetPassword'\n  result: AnonResetPasswordMutation\n  variables: AnonResetPasswordMutationVariables\n  type: 'mutation'\n}\nexport const AnonResetPasswordMutationName:AnonResetPasswordMutationOperation['operationName'] = 'anonResetPassword'\n\nexport const AnonResetPasswordMutationRefetch = (\n  variables:AnonResetPasswordMutationVariables, \n  context?:any\n)=>({\n  query:AnonResetPasswordDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface AnonResetPasswordRequestMutationOperation {\n  operationName: 'anonResetPasswordRequest'\n  result: AnonResetPasswordRequestMutation\n  variables: AnonResetPasswordRequestMutationVariables\n  type: 'mutation'\n}\nexport const AnonResetPasswordRequestMutationName:AnonResetPasswordRequestMutationOperation['operationName'] = 'anonResetPasswordRequest'\n\nexport const AnonResetPasswordRequestMutationRefetch = (\n  variables:AnonResetPasswordRequestMutationVariables, \n  context?:any\n)=>({\n  query:AnonResetPasswordRequestDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface AnonLoginMutationOperation {\n  operationName: 'anonLogin'\n  result: AnonLoginMutation\n  variables: AnonLoginMutationVariables\n  type: 'mutation'\n}\nexport const AnonLoginMutationName:AnonLoginMutationOperation['operationName'] = 'anonLogin'\n\nexport const AnonLoginMutationRefetch = (\n  variables:AnonLoginMutationVariables, \n  context?:any\n)=>({\n  query:AnonLoginDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface AnonConfirmEmailMutationOperation {\n  operationName: 'anonConfirmEmail'\n  result: AnonConfirmEmailMutation\n  variables: AnonConfirmEmailMutationVariables\n  type: 'mutation'\n}\nexport const AnonConfirmEmailMutationName:AnonConfirmEmailMutationOperation['operationName'] = 'anonConfirmEmail'\n\nexport const AnonConfirmEmailMutationRefetch = (\n  variables:AnonConfirmEmailMutationVariables, \n  context?:any\n)=>({\n  query:AnonConfirmEmailDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface AnonSignUpMutationOperation {\n  operationName: 'anonSignUp'\n  result: AnonSignUpMutation\n  variables: AnonSignUpMutationVariables\n  type: 'mutation'\n}\nexport const AnonSignUpMutationName:AnonSignUpMutationOperation['operationName'] = 'anonSignUp'\n\nexport const AnonSignUpMutationRefetch = (\n  variables:AnonSignUpMutationVariables, \n  context?:any\n)=>({\n  query:AnonSignUpDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface AnonUsernameAvailableQueryOperation {\n  operationName: 'anonUsernameAvailable'\n  result: AnonUsernameAvailableQuery\n  variables: AnonUsernameAvailableQueryVariables\n  type: 'query'\n}\nexport const AnonUsernameAvailableQueryName:AnonUsernameAvailableQueryOperation['operationName'] = 'anonUsernameAvailable'\n\nexport const AnonUsernameAvailableQueryRefetch = (\n  variables:AnonUsernameAvailableQueryVariables, \n  context?:any\n)=>({\n  query:AnonUsernameAvailableDocument,\n  variables,\n  context\n})\n      \n","import { GraphQLResolveInfo, GraphQLScalarType, GraphQLScalarTypeConfig } from 'graphql';\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\nexport type RequireFields<T, K extends keyof T> = { [X in Exclude<keyof T, K>]?: T[X] } & { [P in K]-?: NonNullable<T[P]> };\n/** All built-in and custom scalars, mapped to their actual values */\nexport type Scalars = {\n  ID: string,\n  String: string,\n  Boolean: boolean,\n  Int: number,\n  Float: number,\n  /** \n * An opaque position marker for pagination. Paginated queries return\n   * a PageInfo struct with start and end cursors (which are actually\n   * lists of Cursor for ...reasons...). You can then issue queries\n   * requesting results `before` the `start` or `after` the `end`\n   * cursors to request the previous or next page respectively.\n   * \n   * Is actually a string or integer. May be extended in future.\n **/\n  Cursor: any,\n  /** Arbitrary json stored as a string */\n  Json: any,\n  /** Represents an uploaded file. */\n  Upload: any,\n};\n\nexport type ActivitiesPage = {\n   __typename?: 'ActivitiesPage',\n  edges: Array<Activity>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\n/** An event that appears in a feed */\nexport type Activity = {\n   __typename?: 'Activity',\n  /** A url for the like, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The object of the user's verbing */\n  context?: Maybe<ActivityContext>,\n  /** When the activity was created */\n  createdAt: Scalars['String'],\n  /** An instance-local UUID identifying the activity */\n  id: Scalars['String'],\n  /** Whether the activity is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Whether the activity is public */\n  isPublic: Scalars['Boolean'],\n  /** The user who performed the activity */\n  user?: Maybe<User>,\n  /** The verb describing the activity */\n  verb: ActivityVerb,\n};\n\n/** Activity object */\nexport type ActivityContext = Collection | Comment | Community | Flag | Follow | Like | Resource | User;\n\n/** Something a user does, in past tense */\nexport enum ActivityVerb {\n  Created = 'CREATED',\n  Updated = 'UPDATED'\n}\n\nexport type AuthPayload = {\n   __typename?: 'AuthPayload',\n  me: Me,\n  token: Scalars['String'],\n};\n\n/** A collection is the home of resources and discussion threads within a community */\nexport type Collection = {\n   __typename?: 'Collection',\n  /** A url for the collection, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The community the collection belongs to */\n  community?: Maybe<Community>,\n  /** When the collection was created */\n  createdAt: Scalars['String'],\n  /** The user who created the collection */\n  creator?: Maybe<User>,\n  /** A preferred username + the host domain */\n  displayUsername: Scalars['String'],\n  /** A JSON document containing more info beyond the default fields */\n  extraInfo?: Maybe<Scalars['Json']>,\n  /** The total number of times this collection has been featured */\n  featureCount?: Maybe<Scalars['Int']>,\n  /** Flags users have made about the collection, most recently created first */\n  flags?: Maybe<FlagsPage>,\n  /** Total number of followers, including those we can't see */\n  followerCount?: Maybe<Scalars['Int']>,\n  /** Subscriptions users have to the collection */\n  followers?: Maybe<FollowsPage>,\n  /** An avatar url */\n  icon?: Maybe<Content>,\n  /** An instance-local UUID identifying the user */\n  id: Scalars['String'],\n  /** Whether an instance admin has hidden the collection */\n  isDisabled: Scalars['Boolean'],\n  /** Whether the collection is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Whether the collection is public */\n  isPublic: Scalars['Boolean'],\n  /** \n * When the collection or a resource in it was last updated or a\n   * thread or a comment was created or updated\n **/\n  lastActivity: Scalars['String'],\n  /** Total number of likers, including those we can't see */\n  likerCount?: Maybe<Scalars['Int']>,\n  /** Likes users have made of the collection */\n  likers?: Maybe<LikesPage>,\n  /** The current user's flag of the collection, if any */\n  myFlag?: Maybe<Flag>,\n  /** The current user's follow of this collection, if any */\n  myFollow?: Maybe<Follow>,\n  /** The current user's like of this collection, if any */\n  myLike?: Maybe<Like>,\n  /** A name field */\n  name: Scalars['String'],\n  /** Activities on the collection, most recent first */\n  outbox?: Maybe<ActivitiesPage>,\n  /** An instance-unique identifier shared with users and communities */\n  preferredUsername: Scalars['String'],\n  /** The total number of resources in the collection, including private ones */\n  resourceCount?: Maybe<Scalars['Int']>,\n  /** The resources in the collection, most recently created last */\n  resources?: Maybe<ResourcesPage>,\n  /** Possibly biographical information */\n  summary?: Maybe<Scalars['String']>,\n  /** \n * The threads created on the collection, most recently created\n   * first. Does not include threads created on resources.\n **/\n  threads?: Maybe<ThreadsPage>,\n  /** When the collection was last updated */\n  updatedAt: Scalars['String'],\n};\n\n\n/** A collection is the home of resources and discussion threads within a community */\nexport type CollectionFlagsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** A collection is the home of resources and discussion threads within a community */\nexport type CollectionFollowersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** A collection is the home of resources and discussion threads within a community */\nexport type CollectionLikersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** A collection is the home of resources and discussion threads within a community */\nexport type CollectionOutboxArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** A collection is the home of resources and discussion threads within a community */\nexport type CollectionResourcesArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** A collection is the home of resources and discussion threads within a community */\nexport type CollectionThreadsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\nexport type CollectionInput = {\n  extraInfo?: Maybe<Scalars['Json']>,\n  name: Scalars['String'],\n  preferredUsername?: Maybe<Scalars['String']>,\n  summary?: Maybe<Scalars['String']>,\n};\n\nexport type CollectionsPage = {\n   __typename?: 'CollectionsPage',\n  edges: Array<Collection>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\nexport type CollectionUpdateInput = {\n  extraInfo?: Maybe<Scalars['Json']>,\n  name: Scalars['String'],\n  summary?: Maybe<Scalars['String']>,\n};\n\nexport type Comment = {\n   __typename?: 'Comment',\n  /** A url for the user, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The comment text */\n  content: Scalars['String'],\n  /** When the comment was created */\n  createdAt: Scalars['String'],\n  /** The user who created this comment */\n  creator?: Maybe<User>,\n  /** Flags users have made about the comment, most recently created first */\n  flags?: Maybe<FlagsPage>,\n  /** An instance-local UUID identifying the thread */\n  id: Scalars['String'],\n  /** The id of the comment this one was a reply to */\n  inReplyTo?: Maybe<Comment>,\n  /** Whether an comment admin has hidden the thread */\n  isHidden: Scalars['Boolean'],\n  /** Whether the comment is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Whether the comment is publically visible */\n  isPublic: Scalars['Boolean'],\n  /** Total number of likers, including those we can't see */\n  likerCount?: Maybe<Scalars['Int']>,\n  /** Users who like the comment, most recently liked first */\n  likers?: Maybe<LikesPage>,\n  /** The current user's flag of this comment, if any */\n  myFlag?: Maybe<Flag>,\n  /** The current user's like of this comment, if any */\n  myLike?: Maybe<Like>,\n  /** The thread this comment is part of */\n  thread?: Maybe<Thread>,\n  /** When the comment was last updated */\n  updatedAt: Scalars['String'],\n};\n\n\nexport type CommentFlagsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type CommentLikersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\nexport type CommentInput = {\n  content: Scalars['String'],\n};\n\nexport type CommentsPage = {\n   __typename?: 'CommentsPage',\n  edges: Array<Comment>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\nexport type CommunitiesPage = {\n   __typename?: 'CommunitiesPage',\n  edges: Array<Community>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\nexport type Community = {\n   __typename?: 'Community',\n  /** A url for the community, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The total number of collections in the community, including private ones */\n  collectionCount?: Maybe<Scalars['Int']>,\n  /** The communities a user has joined, most recently joined first */\n  collections?: Maybe<CollectionsPage>,\n  /** When the community was created */\n  createdAt: Scalars['String'],\n  /** The user who created the community */\n  creator?: Maybe<User>,\n  /** A preferred username + the host domain */\n  displayUsername: Scalars['String'],\n  /** A JSON document containing more info beyond the default fields */\n  extraInfo?: Maybe<Scalars['Json']>,\n  /** The total number of times this community has been featured */\n  featureCount?: Maybe<Scalars['Int']>,\n  /** Flags users have made about the community, most recently created first */\n  flags?: Maybe<FlagsPage>,\n  /** Total number of followers, including those we can't see */\n  followerCount?: Maybe<Scalars['Int']>,\n  /** Users following the community, most recently followed first */\n  followers?: Maybe<FollowsPage>,\n  /** An avatar url */\n  icon?: Maybe<Content>,\n  /** An instance-local UUID identifying the user */\n  id: Scalars['String'],\n  /** A header background image url */\n  image?: Maybe<Content>,\n  /** Whether an instance admin has disabled the community */\n  isDisabled: Scalars['Boolean'],\n  /** Whether the community is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Whether the community has a public profile */\n  isPublic: Scalars['Boolean'],\n  /** \n * When the community or a resource or collection in it was last\n   * updated or a thread or a comment was created or updated\n **/\n  lastActivity: Scalars['String'],\n  /** Total number of likes, including those we can't see */\n  likerCount?: Maybe<Scalars['Int']>,\n  /** Likes users have given the community */\n  likers?: Maybe<LikesPage>,\n  /** The current user's flag of the community, if any */\n  myFlag?: Maybe<Flag>,\n  /** The current user's follow of the community, if any */\n  myFollow?: Maybe<Follow>,\n  /** The current user's like of this community, if any */\n  myLike?: Maybe<Like>,\n  /** A name field */\n  name: Scalars['String'],\n  /** Activities in the community, most recently created first */\n  outbox?: Maybe<ActivitiesPage>,\n  /** An instance-unique identifier shared with users and collections */\n  preferredUsername: Scalars['String'],\n  /** Possibly biographical information */\n  summary?: Maybe<Scalars['String']>,\n  /** \n * Threads started on the community, in most recently updated\n   * order. Does not include threads started on collections or\n   * resources\n **/\n  threads?: Maybe<ThreadsPage>,\n  /** When the community was last updated */\n  updatedAt: Scalars['String'],\n};\n\n\nexport type CommunityCollectionsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type CommunityFlagsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type CommunityFollowersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type CommunityLikersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type CommunityOutboxArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type CommunityThreadsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\nexport type CommunityInput = {\n  extraInfo?: Maybe<Scalars['Json']>,\n  name: Scalars['String'],\n  preferredUsername?: Maybe<Scalars['String']>,\n  summary?: Maybe<Scalars['String']>,\n};\n\nexport type CommunityUpdateInput = {\n  extraInfo?: Maybe<Scalars['Json']>,\n  name: Scalars['String'],\n  summary?: Maybe<Scalars['String']>,\n};\n\n/** An uploaded file, may contain metadata. */\nexport type Content = {\n   __typename?: 'Content',\n  id: Scalars['ID'],\n  isPublic: Scalars['Boolean'],\n  mediaType: Scalars['String'],\n  metadata?: Maybe<FileMetadata>,\n  mirror?: Maybe<ContentMirror>,\n  upload?: Maybe<ContentUpload>,\n  uploader?: Maybe<User>,\n  url: Scalars['String'],\n};\n\nexport type ContentMirror = {\n   __typename?: 'ContentMirror',\n  url?: Maybe<Scalars['String']>,\n};\n\nexport type ContentUpload = {\n   __typename?: 'ContentUpload',\n  path?: Maybe<Scalars['String']>,\n  size?: Maybe<Scalars['Int']>,\n};\n\n\n/** A thing that can be deleted */\nexport type DeleteContext = Collection | Comment | Community | Feature | Flag | Follow | Like | Resource | Thread | User;\n\n/** A featured piece of content */\nexport type Feature = {\n   __typename?: 'Feature',\n  /** A url for the feature, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The thing that is being featured */\n  context?: Maybe<FeatureContext>,\n  /** When the feature was created */\n  createdAt: Scalars['String'],\n  /** The user who featured */\n  creator?: Maybe<User>,\n  /** An instance-local UUID identifying the feature */\n  id: Scalars['String'],\n  /** Whether the feature is local to the instance */\n  isLocal: Scalars['Boolean'],\n};\n\n/** A thing that can be featured */\nexport type FeatureContext = Collection | Community;\n\nexport type FeaturesPage = {\n   __typename?: 'FeaturesPage',\n  edges: Array<Feature>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\n/** More detailed metadata parsed from a file. */\nexport type FileIntrinsics = {\n   __typename?: 'FileIntrinsics',\n  bitsPerPixel?: Maybe<Scalars['Int']>,\n  bitsPerSample?: Maybe<Scalars['Int']>,\n  blockAlign?: Maybe<Scalars['Int']>,\n  byteRate?: Maybe<Scalars['Int']>,\n  colorPlanes?: Maybe<Scalars['Int']>,\n  numColorPalette?: Maybe<Scalars['Int']>,\n  numFrames?: Maybe<Scalars['Int']>,\n  pageCount?: Maybe<Scalars['Int']>,\n};\n\n/** \n * Metadata associated with a file.\n * \n * None of the parameters are required and are filled depending on the\n * file type.\n **/\nexport type FileMetadata = {\n   __typename?: 'FileMetadata',\n  heightPx?: Maybe<Scalars['Int']>,\n  intrinsics?: Maybe<FileIntrinsics>,\n  numAudioChannels?: Maybe<Scalars['Int']>,\n  sampleRateHz?: Maybe<Scalars['Int']>,\n  widthPx?: Maybe<Scalars['Int']>,\n};\n\n/** A report about objectionable content */\nexport type Flag = {\n   __typename?: 'Flag',\n  /** A url for the flag, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The thing that is being flagged */\n  context: FlagContext,\n  /** When the flag was created */\n  createdAt: Scalars['String'],\n  /** The user who flagged */\n  creator?: Maybe<User>,\n  /** An instance-local UUID identifying the flag */\n  id: Scalars['String'],\n  /** Whether the flag is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Is the flag considered dealt with by the instance moderator? */\n  isResolved: Scalars['Boolean'],\n  /** The reason for flagging */\n  message: Scalars['String'],\n  /** When the flag was updated */\n  updatedAt: Scalars['String'],\n};\n\n/** A thing that can be flagged */\nexport type FlagContext = Collection | Comment | Community | Resource | User;\n\nexport type FlagsPage = {\n   __typename?: 'FlagsPage',\n  edges: Array<Flag>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\n/** A record that a user follows something */\nexport type Follow = {\n   __typename?: 'Follow',\n  /** A url for the flag, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The thing that is being followed */\n  context: FollowContext,\n  /** When the follow was created */\n  createdAt: Scalars['String'],\n  /** The user who followed */\n  creator?: Maybe<User>,\n  /** An instance-local UUID identifying the user */\n  id: Scalars['String'],\n  /** Whether the follow is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Whether the follow is public */\n  isPublic: Scalars['Boolean'],\n  /** When the follow was last updated */\n  updatedAt: Scalars['String'],\n};\n\n/** A thing that can be followed */\nexport type FollowContext = Collection | Community | Thread | User;\n\nexport type FollowsPage = {\n   __typename?: 'FollowsPage',\n  edges: Array<Follow>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\nexport type Instance = {\n   __typename?: 'Instance',\n  description?: Maybe<Scalars['String']>,\n  /** A JSON document containing more info beyond the default fields */\n  extraInfo?: Maybe<Scalars['Json']>,\n  featuredCollections?: Maybe<FeaturesPage>,\n  featuredCommunities?: Maybe<FeaturesPage>,\n  hostname: Scalars['String'],\n  /** A list of public activity on the local instance, most recent first */\n  outbox?: Maybe<ActivitiesPage>,\n  uploadIconTypes: Array<Scalars['String']>,\n  uploadImageTypes: Array<Scalars['String']>,\n  uploadMaxBytes: Scalars['Int'],\n  uploadResourceTypes: Array<Scalars['String']>,\n};\n\n\nexport type InstanceOutboxArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** A record that a user likes a thing */\nexport type Like = {\n   __typename?: 'Like',\n  /** A url for the like, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The thing that is liked */\n  context: LikeContext,\n  /** When the like was created */\n  createdAt: Scalars['String'],\n  /** The user who liked */\n  creator?: Maybe<User>,\n  /** An instance-local UUID identifying the like */\n  id: Scalars['String'],\n  /** Whether the like is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Whether the like is public */\n  isPublic: Scalars['Boolean'],\n  /** When the like was last updated */\n  updatedAt: Scalars['String'],\n};\n\n/** A thing which can be liked */\nexport type LikeContext = Collection | Comment | Community | Resource | User;\n\nexport type LikesPage = {\n   __typename?: 'LikesPage',\n  edges: Array<Like>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\n/** The current user. Contains more information than just the `user` type */\nexport type Me = {\n   __typename?: 'Me',\n  /** The user's email */\n  email: Scalars['String'],\n  /** Has the user confirmed their account? */\n  isConfirmed: Scalars['Boolean'],\n  /** Is the user a witch or wizard? */\n  isInstanceAdmin: Scalars['Boolean'],\n  /** \n * I hope to go away soon, but in the interim I return just enough\n   * information about the collections and communities a user follows\n   * to match them up to the search results in the frontend\n **/\n  searchFollows: Array<SearchFollow>,\n  /** The public info */\n  user: User,\n  /** Would the user like to receive digest emails of updates? */\n  wantsEmailDigest: Scalars['Boolean'],\n  /** Does the user want notifications? Which don't work yet. */\n  wantsNotifications: Scalars['Boolean'],\n};\n\n/** Cursors for pagination */\nexport type PageInfo = {\n   __typename?: 'PageInfo',\n  endCursor?: Maybe<Array<Scalars['Cursor']>>,\n  hasNextPage?: Maybe<Scalars['Boolean']>,\n  hasPreviousPage?: Maybe<Scalars['Boolean']>,\n  startCursor?: Maybe<Array<Scalars['Cursor']>>,\n};\n\nexport type RegisterEmailAccess = {\n   __typename?: 'RegisterEmailAccess',\n  createdAt: Scalars['String'],\n  email: Scalars['String'],\n  id: Scalars['String'],\n  updatedAt: Scalars['String'],\n};\n\nexport type RegisterEmailAccessesPage = {\n   __typename?: 'RegisterEmailAccessesPage',\n  edges: Array<RegisterEmailAccess>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\nexport type RegisterEmailDomainAccess = {\n   __typename?: 'RegisterEmailDomainAccess',\n  createdAt: Scalars['String'],\n  domain: Scalars['String'],\n  id: Scalars['String'],\n  updatedAt: Scalars['String'],\n};\n\nexport type RegisterEmailDomainAccessesPage = {\n   __typename?: 'RegisterEmailDomainAccessesPage',\n  edges: Array<RegisterEmailDomainAccess>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\nexport type RegistrationInput = {\n  email: Scalars['String'],\n  extraInfo?: Maybe<Scalars['Json']>,\n  location?: Maybe<Scalars['String']>,\n  name: Scalars['String'],\n  password: Scalars['String'],\n  preferredUsername: Scalars['String'],\n  summary?: Maybe<Scalars['String']>,\n  wantsEmailDigest: Scalars['Boolean'],\n  wantsNotifications: Scalars['Boolean'],\n  website?: Maybe<Scalars['String']>,\n};\n\nexport type Resource = {\n   __typename?: 'Resource',\n  /** The original author */\n  author?: Maybe<Scalars['String']>,\n  /** A url for the user, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** The collection this resource is a part of */\n  collection?: Maybe<Collection>,\n  /** A link to an external resource */\n  content?: Maybe<Content>,\n  /** When the resource was created */\n  createdAt: Scalars['String'],\n  /** The user who created the resource */\n  creator?: Maybe<User>,\n  /** A JSON document containing more info beyond the default fields */\n  extraInfo?: Maybe<Scalars['Json']>,\n  /** Flags users have made about the resource, most recently created first */\n  flags?: Maybe<FlagsPage>,\n  /** An avatar url */\n  icon?: Maybe<Content>,\n  /** An instance-local UUID identifying the user */\n  id: Scalars['String'],\n  /** Whether an instance admin has hidden the resource */\n  isDisabled: Scalars['Boolean'],\n  /** Whether the resource is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Whether the resource is public */\n  isPublic: Scalars['Boolean'],\n  /** What license is it available under? */\n  license?: Maybe<Scalars['String']>,\n  /** Total number of likers, including those we can't see */\n  likerCount?: Maybe<Scalars['Int']>,\n  /** Users who like the resource, most recently liked first */\n  likers?: Maybe<LikesPage>,\n  /** The current user's flag of the resource, if any */\n  myFlag?: Maybe<Flag>,\n  /** The current user's like of the resource, if any */\n  myLike?: Maybe<Like>,\n  /** A name field */\n  name: Scalars['String'],\n  /** Possibly biographical information */\n  summary?: Maybe<Scalars['String']>,\n  /** When the resource was last updated */\n  updatedAt: Scalars['String'],\n};\n\n\nexport type ResourceFlagsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type ResourceLikersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\nexport type ResourceInput = {\n  author?: Maybe<Scalars['String']>,\n  extraInfo?: Maybe<Scalars['Json']>,\n  license?: Maybe<Scalars['String']>,\n  name: Scalars['String'],\n  summary?: Maybe<Scalars['String']>,\n};\n\nexport type ResourcesPage = {\n   __typename?: 'ResourcesPage',\n  edges: Array<Resource>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\nexport type RootMutationType = {\n   __typename?: 'RootMutationType',\n  /** Fetch metadata from webpage */\n  fetchWebMetadata?: Maybe<WebMetadata>,\n  createRegisterEmailAccess: RegisterEmailAccess,\n  /** Update a collection */\n  updateCollection?: Maybe<Collection>,\n  /** Reset password */\n  resetPassword?: Maybe<AuthPayload>,\n  deleteRegisterEmailAccess?: Maybe<RegisterEmailAccess>,\n  /** Log in */\n  createSession?: Maybe<AuthPayload>,\n  /** Deletes my account! */\n  deleteSelf?: Maybe<Scalars['Boolean']>,\n  /** Update a resource */\n  updateResource?: Maybe<Resource>,\n  /** Follow a community, collection or a user by their canonical url returning the follow */\n  createFollowByUrl?: Maybe<Follow>,\n  /** Confirm email. Returns a login token. */\n  confirmEmail?: Maybe<AuthPayload>,\n  /** Deactivate a remote user, blocking further activities from it */\n  deactivateUser?: Maybe<User>,\n  /** Modify a comment */\n  updateComment?: Maybe<Comment>,\n  /** Like a comment, collection, or resource returning the like */\n  createLike?: Maybe<Like>,\n  /** Reset password request */\n  resetPasswordRequest?: Maybe<Scalars['Boolean']>,\n  /** Sends an email invite */\n  sendInvite?: Maybe<Scalars['Boolean']>,\n  /** Log out */\n  deleteSession?: Maybe<Scalars['Boolean']>,\n  /** Reply to an existing comment in a thread */\n  createReply?: Maybe<Comment>,\n  /** Copy a resource */\n  copyResource?: Maybe<Resource>,\n  createRegisterEmailDomainAccess: RegisterEmailDomainAccess,\n  /** Feature a community, or collection, returning the feature */\n  createFeature?: Maybe<Feature>,\n  /** Follow a community, collection or thread returning the follow */\n  createFollow?: Maybe<Follow>,\n  /** Create a user */\n  createUser?: Maybe<Me>,\n  /** Close a flag */\n  resolveFlag?: Maybe<Flag>,\n  /** Create a community */\n  createCommunity?: Maybe<Community>,\n  /** Update a profile */\n  updateProfile?: Maybe<Me>,\n  /** Create a collection */\n  createCollection?: Maybe<Collection>,\n  deleteRegisterEmailDomainAccess?: Maybe<RegisterEmailDomainAccess>,\n  /** Update a community */\n  updateCommunity?: Maybe<Community>,\n  /** Delete more or less anything */\n  delete?: Maybe<DeleteContext>,\n  /** Flag a user, community, collection, resource or comment, returning the flag */\n  createFlag?: Maybe<Flag>,\n  /** Create a new thread */\n  createThread?: Maybe<Comment>,\n  /** Create a resource */\n  createResource?: Maybe<Resource>,\n};\n\n\nexport type RootMutationTypeFetchWebMetadataArgs = {\n  url: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateRegisterEmailAccessArgs = {\n  email: Scalars['String']\n};\n\n\nexport type RootMutationTypeUpdateCollectionArgs = {\n  collection: CollectionUpdateInput,\n  collectionId: Scalars['String'],\n  icon?: Maybe<UploadInput>\n};\n\n\nexport type RootMutationTypeResetPasswordArgs = {\n  password: Scalars['String'],\n  token: Scalars['String']\n};\n\n\nexport type RootMutationTypeDeleteRegisterEmailAccessArgs = {\n  id: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateSessionArgs = {\n  email: Scalars['String'],\n  password: Scalars['String']\n};\n\n\nexport type RootMutationTypeDeleteSelfArgs = {\n  iAmSure: Scalars['Boolean']\n};\n\n\nexport type RootMutationTypeUpdateResourceArgs = {\n  content?: Maybe<UploadInput>,\n  icon?: Maybe<UploadInput>,\n  resource: ResourceInput,\n  resourceId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateFollowByUrlArgs = {\n  url: Scalars['String']\n};\n\n\nexport type RootMutationTypeConfirmEmailArgs = {\n  token: Scalars['String']\n};\n\n\nexport type RootMutationTypeDeactivateUserArgs = {\n  id: Scalars['String']\n};\n\n\nexport type RootMutationTypeUpdateCommentArgs = {\n  comment: CommentInput,\n  commentId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateLikeArgs = {\n  contextId: Scalars['String']\n};\n\n\nexport type RootMutationTypeResetPasswordRequestArgs = {\n  email: Scalars['String']\n};\n\n\nexport type RootMutationTypeSendInviteArgs = {\n  email: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateReplyArgs = {\n  comment: CommentInput,\n  inReplyToId: Scalars['String'],\n  threadId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCopyResourceArgs = {\n  collectionId: Scalars['String'],\n  resourceId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateRegisterEmailDomainAccessArgs = {\n  domain: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateFeatureArgs = {\n  contextId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateFollowArgs = {\n  contextId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateUserArgs = {\n  icon?: Maybe<UploadInput>,\n  image?: Maybe<UploadInput>,\n  user: RegistrationInput\n};\n\n\nexport type RootMutationTypeResolveFlagArgs = {\n  flagId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateCommunityArgs = {\n  community: CommunityInput,\n  icon?: Maybe<UploadInput>,\n  image?: Maybe<UploadInput>\n};\n\n\nexport type RootMutationTypeUpdateProfileArgs = {\n  icon?: Maybe<UploadInput>,\n  image?: Maybe<UploadInput>,\n  profile: UpdateProfileInput\n};\n\n\nexport type RootMutationTypeCreateCollectionArgs = {\n  collection: CollectionInput,\n  communityId: Scalars['String'],\n  icon?: Maybe<UploadInput>\n};\n\n\nexport type RootMutationTypeDeleteRegisterEmailDomainAccessArgs = {\n  id: Scalars['String']\n};\n\n\nexport type RootMutationTypeUpdateCommunityArgs = {\n  community: CommunityUpdateInput,\n  communityId: Scalars['String'],\n  icon?: Maybe<UploadInput>,\n  image?: Maybe<UploadInput>\n};\n\n\nexport type RootMutationTypeDeleteArgs = {\n  contextId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateFlagArgs = {\n  contextId: Scalars['String'],\n  message: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateThreadArgs = {\n  comment: CommentInput,\n  contextId: Scalars['String']\n};\n\n\nexport type RootMutationTypeCreateResourceArgs = {\n  collectionId: Scalars['String'],\n  content: UploadInput,\n  icon?: Maybe<UploadInput>,\n  resource: ResourceInput\n};\n\nexport type RootQueryType = {\n   __typename?: 'RootQueryType',\n  activity?: Maybe<Activity>,\n  /** Get a collection by id */\n  collection?: Maybe<Collection>,\n  /** Get list of collections, most recent activity first */\n  collections: CollectionsPage,\n  /** Get a comment by its id */\n  comment?: Maybe<Comment>,\n  /** Get list of communities, most followed first */\n  communities: CommunitiesPage,\n  /** Get a community */\n  community?: Maybe<Community>,\n  feature?: Maybe<Feature>,\n  features?: Maybe<FeaturesPage>,\n  flag?: Maybe<Flag>,\n  flags?: Maybe<FlagsPage>,\n  /** Retrieves a follow by id */\n  follow?: Maybe<Follow>,\n  /** A logical object for the local instance */\n  instance?: Maybe<Instance>,\n  /** Fetch a like by ID */\n  like?: Maybe<Like>,\n  /** Get my user */\n  me?: Maybe<Me>,\n  registerEmailAccesses: RegisterEmailAccessesPage,\n  registerEmailDomainAccesses: RegisterEmailDomainAccessesPage,\n  /** Get a resource */\n  resource?: Maybe<Resource>,\n  /** Get a thread */\n  thread?: Maybe<Thread>,\n  /** Get a user */\n  user?: Maybe<User>,\n  /** Check if a user exists with a username */\n  usernameAvailable: Scalars['Boolean'],\n};\n\n\nexport type RootQueryTypeActivityArgs = {\n  activityId: Scalars['String']\n};\n\n\nexport type RootQueryTypeCollectionArgs = {\n  collectionId: Scalars['String']\n};\n\n\nexport type RootQueryTypeCollectionsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type RootQueryTypeCommentArgs = {\n  commentId: Scalars['String']\n};\n\n\nexport type RootQueryTypeCommunitiesArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type RootQueryTypeCommunityArgs = {\n  communityId: Scalars['String']\n};\n\n\nexport type RootQueryTypeFeatureArgs = {\n  featureId: Scalars['String']\n};\n\n\nexport type RootQueryTypeFeaturesArgs = {\n  after?: Maybe<Array<Maybe<Scalars['Cursor']>>>,\n  before?: Maybe<Array<Maybe<Scalars['Cursor']>>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type RootQueryTypeFlagArgs = {\n  flagId: Scalars['String']\n};\n\n\nexport type RootQueryTypeFlagsArgs = {\n  after?: Maybe<Array<Maybe<Scalars['Cursor']>>>,\n  before?: Maybe<Array<Maybe<Scalars['Cursor']>>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type RootQueryTypeFollowArgs = {\n  followId: Scalars['String']\n};\n\n\nexport type RootQueryTypeLikeArgs = {\n  likeId: Scalars['String']\n};\n\n\nexport type RootQueryTypeRegisterEmailAccessesArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type RootQueryTypeRegisterEmailDomainAccessesArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\nexport type RootQueryTypeResourceArgs = {\n  resourceId: Scalars['String']\n};\n\n\nexport type RootQueryTypeThreadArgs = {\n  threadId: Scalars['String']\n};\n\n\nexport type RootQueryTypeUserArgs = {\n  userId: Scalars['String']\n};\n\n\nexport type RootQueryTypeUsernameAvailableArgs = {\n  username: Scalars['String']\n};\n\n/** \n * I hope to go away soon, but in the interim I am a subset of a\n * collection or community the user follows.\n **/\nexport type SearchFollow = {\n   __typename?: 'SearchFollow',\n  canonicalUrl: Scalars['String'],\n  collectionId?: Maybe<Scalars['String']>,\n  communityId?: Maybe<Scalars['String']>,\n  followId: Scalars['String'],\n  isCreator: Scalars['Boolean'],\n};\n\n/** A thread is essentially a list of comments */\nexport type Thread = {\n   __typename?: 'Thread',\n  /** A url for the user, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** Comments in the thread, most recently created first */\n  comments?: Maybe<CommentsPage>,\n  /** The object the thread is attached to */\n  context?: Maybe<ThreadContext>,\n  /** When the thread was created */\n  createdAt: Scalars['String'],\n  /** Total number of followers, including those we can't see */\n  followerCount?: Maybe<Scalars['Int']>,\n  /** Users following the collection, most recently followed first */\n  followers?: Maybe<FollowsPage>,\n  /** An instance-local UUID identifying the thread */\n  id: Scalars['String'],\n  /** Whether an instance admin has hidden the thread */\n  isHidden: Scalars['Boolean'],\n  /** Whether the thread is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Whether the thread is publically visible */\n  isPublic: Scalars['Boolean'],\n  /** The last time the thread or a comment on it was created or updated */\n  lastActivity: Scalars['String'],\n  /** The current user's follow of the community, if any */\n  myFollow?: Maybe<Follow>,\n  /** When the thread was last updated */\n  updatedAt: Scalars['String'],\n};\n\n\n/** A thread is essentially a list of comments */\nexport type ThreadCommentsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** A thread is essentially a list of comments */\nexport type ThreadFollowersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n/** The thing the comment is about */\nexport type ThreadContext = Collection | Community | Flag | Resource;\n\nexport type ThreadsPage = {\n   __typename?: 'ThreadsPage',\n  edges: Array<Thread>,\n  pageInfo: PageInfo,\n  totalCount: Scalars['Int'],\n};\n\nexport type UpdateProfileInput = {\n  extraInfo?: Maybe<Scalars['Json']>,\n  location?: Maybe<Scalars['String']>,\n  name?: Maybe<Scalars['String']>,\n  summary?: Maybe<Scalars['String']>,\n  wantsEmailDigest?: Maybe<Scalars['Boolean']>,\n  wantsNotifications?: Maybe<Scalars['Boolean']>,\n  website?: Maybe<Scalars['String']>,\n};\n\n\nexport type UploadInput = {\n  upload?: Maybe<Scalars['Upload']>,\n  url?: Maybe<Scalars['String']>,\n};\n\n/** User profile information */\nexport type User = {\n   __typename?: 'User',\n  /** The last time the user did anything */\n  lastActivity?: Maybe<Scalars['String']>,\n  /** Comments the user has made, most recently created first */\n  comments?: Maybe<CommentsPage>,\n  /** A header background image url */\n  image?: Maybe<Content>,\n  /** A valid URL */\n  website?: Maybe<Scalars['String']>,\n  /** Total number of likes, including those we can't see */\n  likeCount?: Maybe<Scalars['Int']>,\n  /** The likes a user has created */\n  likes?: Maybe<LikesPage>,\n  /** An avatar url */\n  icon?: Maybe<Content>,\n  /** When the user last updated their profile */\n  updatedAt: Scalars['String'],\n  /** The current user's flag of this user, if any */\n  myFlag?: Maybe<Flag>,\n  /** Whether an instance admin has disabled the user's account */\n  isDisabled: Scalars['Boolean'],\n  /** Whether the user is local to the instance */\n  isLocal: Scalars['Boolean'],\n  /** Subscriptions users have to the collection */\n  followers?: Maybe<FollowsPage>,\n  /** A preferred username + the host domain */\n  displayUsername: Scalars['String'],\n  /** Possibly biographical information */\n  summary?: Maybe<Scalars['String']>,\n  /** Free text */\n  location?: Maybe<Scalars['String']>,\n  /** Total number of likers, including those we can't see */\n  likerCount?: Maybe<Scalars['Int']>,\n  /** The likes a user has from other people */\n  likers?: Maybe<LikesPage>,\n  /** A JSON document containing more info beyond the default fields */\n  extraInfo?: Maybe<Scalars['Json']>,\n  /** Total number of followers, including private follows */\n  followerCount?: Maybe<Scalars['Int']>,\n  /** An instance-local ULID identifying the user */\n  id: Scalars['ID'],\n  /** The communities a user is following, most recently followed first */\n  communityFollows?: Maybe<FollowsPage>,\n  /** A name field */\n  name?: Maybe<Scalars['String']>,\n  /** The current user's like of this user, if any */\n  myLike?: Maybe<Like>,\n  /** Whether the user has a public profile */\n  isPublic: Scalars['Boolean'],\n  /** When the user signed up */\n  createdAt: Scalars['String'],\n  /** Subscriptions users have to the collection */\n  follows?: Maybe<FollowsPage>,\n  /** \n * Activities of others the user is following, most recently created\n   * first. Only available to the current user under `me`\n **/\n  inbox?: Maybe<ActivitiesPage>,\n  /** A url for the user, may be to a remote instance */\n  canonicalUrl?: Maybe<Scalars['String']>,\n  /** An instance-unique identifier shared with communities and collections */\n  preferredUsername: Scalars['String'],\n  /** Total number of things the user follows, including privately */\n  followCount?: Maybe<Scalars['Int']>,\n  /** The users a user is following, most recently followed first */\n  userFollows?: Maybe<FollowsPage>,\n  /** Activities of the user, most recently created first */\n  outbox?: Maybe<ActivitiesPage>,\n  /** The current user's follow of this user, if any */\n  myFollow?: Maybe<Follow>,\n  /** The collections a user is following, most recently followed first */\n  collectionFollows?: Maybe<FollowsPage>,\n};\n\n\n/** User profile information */\nexport type UserCommentsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserLikesArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserFollowersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserLikersArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserCommunityFollowsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserFollowsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserInboxArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserUserFollowsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserOutboxArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\n\n/** User profile information */\nexport type UserCollectionFollowsArgs = {\n  after?: Maybe<Array<Scalars['Cursor']>>,\n  before?: Maybe<Array<Scalars['Cursor']>>,\n  limit?: Maybe<Scalars['Int']>\n};\n\nexport type WebMetadata = {\n   __typename?: 'WebMetadata',\n  author?: Maybe<Scalars['String']>,\n  embedCode?: Maybe<Scalars['String']>,\n  embedType?: Maybe<Scalars['String']>,\n  image?: Maybe<Scalars['String']>,\n  language?: Maybe<Scalars['String']>,\n  mimeType?: Maybe<Scalars['String']>,\n  source?: Maybe<Scalars['String']>,\n  summary?: Maybe<Scalars['String']>,\n  title?: Maybe<Scalars['String']>,\n  url?: Maybe<Scalars['String']>,\n};\n\n\n      export interface IntrospectionResultData {\n        __schema: {\n          types: {\n            kind: string;\n            name: string;\n            possibleTypes: {\n              name: string;\n            }[];\n          }[];\n        };\n      }\n\n      const result: IntrospectionResultData = {\n  \"__schema\": {\n    \"types\": [\n      {\n        \"kind\": \"UNION\",\n        \"name\": \"ActivityContext\",\n        \"possibleTypes\": [\n          {\n            \"name\": \"Collection\"\n          },\n          {\n            \"name\": \"Comment\"\n          },\n          {\n            \"name\": \"Community\"\n          },\n          {\n            \"name\": \"Flag\"\n          },\n          {\n            \"name\": \"Follow\"\n          },\n          {\n            \"name\": \"Like\"\n          },\n          {\n            \"name\": \"Resource\"\n          },\n          {\n            \"name\": \"User\"\n          }\n        ]\n      },\n      {\n        \"kind\": \"UNION\",\n        \"name\": \"FlagContext\",\n        \"possibleTypes\": [\n          {\n            \"name\": \"Collection\"\n          },\n          {\n            \"name\": \"Comment\"\n          },\n          {\n            \"name\": \"Community\"\n          },\n          {\n            \"name\": \"Resource\"\n          },\n          {\n            \"name\": \"User\"\n          }\n        ]\n      },\n      {\n        \"kind\": \"UNION\",\n        \"name\": \"LikeContext\",\n        \"possibleTypes\": [\n          {\n            \"name\": \"Collection\"\n          },\n          {\n            \"name\": \"Comment\"\n          },\n          {\n            \"name\": \"Community\"\n          },\n          {\n            \"name\": \"Resource\"\n          },\n          {\n            \"name\": \"User\"\n          }\n        ]\n      },\n      {\n        \"kind\": \"UNION\",\n        \"name\": \"ThreadContext\",\n        \"possibleTypes\": [\n          {\n            \"name\": \"Collection\"\n          },\n          {\n            \"name\": \"Community\"\n          },\n          {\n            \"name\": \"Flag\"\n          },\n          {\n            \"name\": \"Resource\"\n          }\n        ]\n      },\n      {\n        \"kind\": \"UNION\",\n        \"name\": \"FollowContext\",\n        \"possibleTypes\": [\n          {\n            \"name\": \"Collection\"\n          },\n          {\n            \"name\": \"Community\"\n          },\n          {\n            \"name\": \"Thread\"\n          },\n          {\n            \"name\": \"User\"\n          }\n        ]\n      },\n      {\n        \"kind\": \"UNION\",\n        \"name\": \"FeatureContext\",\n        \"possibleTypes\": [\n          {\n            \"name\": \"Collection\"\n          },\n          {\n            \"name\": \"Community\"\n          }\n        ]\n      },\n      {\n        \"kind\": \"UNION\",\n        \"name\": \"DeleteContext\",\n        \"possibleTypes\": [\n          {\n            \"name\": \"Collection\"\n          },\n          {\n            \"name\": \"Comment\"\n          },\n          {\n            \"name\": \"Community\"\n          },\n          {\n            \"name\": \"Feature\"\n          },\n          {\n            \"name\": \"Flag\"\n          },\n          {\n            \"name\": \"Follow\"\n          },\n          {\n            \"name\": \"Like\"\n          },\n          {\n            \"name\": \"Resource\"\n          },\n          {\n            \"name\": \"Thread\"\n          },\n          {\n            \"name\": \"User\"\n          }\n        ]\n      }\n    ]\n  }\n};\n\n      export default result;\n    \n\n\nexport type ResolverTypeWrapper<T> = Promise<T> | T;\n\nexport type ResolverFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Promise<TResult> | TResult;\n\n\nexport type StitchingResolver<TResult, TParent, TContext, TArgs> = {\n  fragment: string;\n  resolve: ResolverFn<TResult, TParent, TContext, TArgs>;\n};\n\nexport type Resolver<TResult, TParent = {}, TContext = {}, TArgs = {}> =\n  | ResolverFn<TResult, TParent, TContext, TArgs>\n  | StitchingResolver<TResult, TParent, TContext, TArgs>;\n\nexport type SubscriptionSubscribeFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => AsyncIterator<TResult> | Promise<AsyncIterator<TResult>>;\n\nexport type SubscriptionResolveFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\nexport interface SubscriptionSubscriberObject<TResult, TKey extends string, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<{ [key in TKey]: TResult }, TParent, TContext, TArgs>;\n  resolve?: SubscriptionResolveFn<TResult, { [key in TKey]: TResult }, TContext, TArgs>;\n}\n\nexport interface SubscriptionResolverObject<TResult, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<any, TParent, TContext, TArgs>;\n  resolve: SubscriptionResolveFn<TResult, any, TContext, TArgs>;\n}\n\nexport type SubscriptionObject<TResult, TKey extends string, TParent, TContext, TArgs> =\n  | SubscriptionSubscriberObject<TResult, TKey, TParent, TContext, TArgs>\n  | SubscriptionResolverObject<TResult, TParent, TContext, TArgs>;\n\nexport type SubscriptionResolver<TResult, TKey extends string, TParent = {}, TContext = {}, TArgs = {}> =\n  | ((...args: any[]) => SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>)\n  | SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>;\n\nexport type TypeResolveFn<TTypes, TParent = {}, TContext = {}> = (\n  parent: TParent,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Maybe<TTypes>;\n\nexport type NextResolverFn<T> = () => Promise<T>;\n\nexport type DirectiveResolverFn<TResult = {}, TParent = {}, TContext = {}, TArgs = {}> = (\n  next: NextResolverFn<TResult>,\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\n/** Mapping between all available schema types and the resolvers types */\nexport type ResolversTypes = {\n  RootQueryType: ResolverTypeWrapper<{}>,\n  String: ResolverTypeWrapper<Scalars['String']>,\n  Activity: ResolverTypeWrapper<Omit<Activity, 'context'> & { context?: Maybe<ResolversTypes['ActivityContext']> }>,\n  ActivityContext: ResolversTypes['Collection'] | ResolversTypes['Comment'] | ResolversTypes['Community'] | ResolversTypes['Flag'] | ResolversTypes['Follow'] | ResolversTypes['Like'] | ResolversTypes['Resource'] | ResolversTypes['User'],\n  Collection: ResolverTypeWrapper<Collection>,\n  Community: ResolverTypeWrapper<Community>,\n  Int: ResolverTypeWrapper<Scalars['Int']>,\n  Cursor: ResolverTypeWrapper<Scalars['Cursor']>,\n  CollectionsPage: ResolverTypeWrapper<CollectionsPage>,\n  PageInfo: ResolverTypeWrapper<PageInfo>,\n  Boolean: ResolverTypeWrapper<Scalars['Boolean']>,\n  User: ResolverTypeWrapper<User>,\n  CommentsPage: ResolverTypeWrapper<CommentsPage>,\n  Comment: ResolverTypeWrapper<Comment>,\n  FlagsPage: ResolverTypeWrapper<FlagsPage>,\n  Flag: ResolverTypeWrapper<Omit<Flag, 'context'> & { context: ResolversTypes['FlagContext'] }>,\n  FlagContext: ResolversTypes['Collection'] | ResolversTypes['Comment'] | ResolversTypes['Community'] | ResolversTypes['Resource'] | ResolversTypes['User'],\n  Resource: ResolverTypeWrapper<Resource>,\n  Content: ResolverTypeWrapper<Content>,\n  ID: ResolverTypeWrapper<Scalars['ID']>,\n  FileMetadata: ResolverTypeWrapper<FileMetadata>,\n  FileIntrinsics: ResolverTypeWrapper<FileIntrinsics>,\n  ContentMirror: ResolverTypeWrapper<ContentMirror>,\n  ContentUpload: ResolverTypeWrapper<ContentUpload>,\n  Json: ResolverTypeWrapper<Scalars['Json']>,\n  LikesPage: ResolverTypeWrapper<LikesPage>,\n  Like: ResolverTypeWrapper<Omit<Like, 'context'> & { context: ResolversTypes['LikeContext'] }>,\n  LikeContext: ResolversTypes['Collection'] | ResolversTypes['Comment'] | ResolversTypes['Community'] | ResolversTypes['Resource'] | ResolversTypes['User'],\n  Thread: ResolverTypeWrapper<Omit<Thread, 'context'> & { context?: Maybe<ResolversTypes['ThreadContext']> }>,\n  ThreadContext: ResolversTypes['Collection'] | ResolversTypes['Community'] | ResolversTypes['Flag'] | ResolversTypes['Resource'],\n  FollowsPage: ResolverTypeWrapper<FollowsPage>,\n  Follow: ResolverTypeWrapper<Omit<Follow, 'context'> & { context: ResolversTypes['FollowContext'] }>,\n  FollowContext: ResolversTypes['Collection'] | ResolversTypes['Community'] | ResolversTypes['Thread'] | ResolversTypes['User'],\n  ActivitiesPage: ResolverTypeWrapper<ActivitiesPage>,\n  ThreadsPage: ResolverTypeWrapper<ThreadsPage>,\n  ResourcesPage: ResolverTypeWrapper<ResourcesPage>,\n  ActivityVerb: ActivityVerb,\n  CommunitiesPage: ResolverTypeWrapper<CommunitiesPage>,\n  Feature: ResolverTypeWrapper<Omit<Feature, 'context'> & { context?: Maybe<ResolversTypes['FeatureContext']> }>,\n  FeatureContext: ResolversTypes['Collection'] | ResolversTypes['Community'],\n  FeaturesPage: ResolverTypeWrapper<FeaturesPage>,\n  Instance: ResolverTypeWrapper<Instance>,\n  Me: ResolverTypeWrapper<Me>,\n  SearchFollow: ResolverTypeWrapper<SearchFollow>,\n  RegisterEmailAccessesPage: ResolverTypeWrapper<RegisterEmailAccessesPage>,\n  RegisterEmailAccess: ResolverTypeWrapper<RegisterEmailAccess>,\n  RegisterEmailDomainAccessesPage: ResolverTypeWrapper<RegisterEmailDomainAccessesPage>,\n  RegisterEmailDomainAccess: ResolverTypeWrapper<RegisterEmailDomainAccess>,\n  RootMutationType: ResolverTypeWrapper<{}>,\n  WebMetadata: ResolverTypeWrapper<WebMetadata>,\n  CollectionUpdateInput: CollectionUpdateInput,\n  UploadInput: UploadInput,\n  Upload: ResolverTypeWrapper<Scalars['Upload']>,\n  AuthPayload: ResolverTypeWrapper<AuthPayload>,\n  ResourceInput: ResourceInput,\n  CommentInput: CommentInput,\n  RegistrationInput: RegistrationInput,\n  CommunityInput: CommunityInput,\n  UpdateProfileInput: UpdateProfileInput,\n  CollectionInput: CollectionInput,\n  CommunityUpdateInput: CommunityUpdateInput,\n  DeleteContext: ResolversTypes['Collection'] | ResolversTypes['Comment'] | ResolversTypes['Community'] | ResolversTypes['Feature'] | ResolversTypes['Flag'] | ResolversTypes['Follow'] | ResolversTypes['Like'] | ResolversTypes['Resource'] | ResolversTypes['Thread'] | ResolversTypes['User'],\n};\n\n/** Mapping between all available schema types and the resolvers parents */\nexport type ResolversParentTypes = {\n  RootQueryType: {},\n  String: Scalars['String'],\n  Activity: Omit<Activity, 'context'> & { context?: Maybe<ResolversParentTypes['ActivityContext']> },\n  ActivityContext: ResolversParentTypes['Collection'] | ResolversParentTypes['Comment'] | ResolversParentTypes['Community'] | ResolversParentTypes['Flag'] | ResolversParentTypes['Follow'] | ResolversParentTypes['Like'] | ResolversParentTypes['Resource'] | ResolversParentTypes['User'],\n  Collection: Collection,\n  Community: Community,\n  Int: Scalars['Int'],\n  Cursor: Scalars['Cursor'],\n  CollectionsPage: CollectionsPage,\n  PageInfo: PageInfo,\n  Boolean: Scalars['Boolean'],\n  User: User,\n  CommentsPage: CommentsPage,\n  Comment: Comment,\n  FlagsPage: FlagsPage,\n  Flag: Omit<Flag, 'context'> & { context: ResolversParentTypes['FlagContext'] },\n  FlagContext: ResolversParentTypes['Collection'] | ResolversParentTypes['Comment'] | ResolversParentTypes['Community'] | ResolversParentTypes['Resource'] | ResolversParentTypes['User'],\n  Resource: Resource,\n  Content: Content,\n  ID: Scalars['ID'],\n  FileMetadata: FileMetadata,\n  FileIntrinsics: FileIntrinsics,\n  ContentMirror: ContentMirror,\n  ContentUpload: ContentUpload,\n  Json: Scalars['Json'],\n  LikesPage: LikesPage,\n  Like: Omit<Like, 'context'> & { context: ResolversParentTypes['LikeContext'] },\n  LikeContext: ResolversParentTypes['Collection'] | ResolversParentTypes['Comment'] | ResolversParentTypes['Community'] | ResolversParentTypes['Resource'] | ResolversParentTypes['User'],\n  Thread: Omit<Thread, 'context'> & { context?: Maybe<ResolversParentTypes['ThreadContext']> },\n  ThreadContext: ResolversParentTypes['Collection'] | ResolversParentTypes['Community'] | ResolversParentTypes['Flag'] | ResolversParentTypes['Resource'],\n  FollowsPage: FollowsPage,\n  Follow: Omit<Follow, 'context'> & { context: ResolversParentTypes['FollowContext'] },\n  FollowContext: ResolversParentTypes['Collection'] | ResolversParentTypes['Community'] | ResolversParentTypes['Thread'] | ResolversParentTypes['User'],\n  ActivitiesPage: ActivitiesPage,\n  ThreadsPage: ThreadsPage,\n  ResourcesPage: ResourcesPage,\n  ActivityVerb: ActivityVerb,\n  CommunitiesPage: CommunitiesPage,\n  Feature: Omit<Feature, 'context'> & { context?: Maybe<ResolversParentTypes['FeatureContext']> },\n  FeatureContext: ResolversParentTypes['Collection'] | ResolversParentTypes['Community'],\n  FeaturesPage: FeaturesPage,\n  Instance: Instance,\n  Me: Me,\n  SearchFollow: SearchFollow,\n  RegisterEmailAccessesPage: RegisterEmailAccessesPage,\n  RegisterEmailAccess: RegisterEmailAccess,\n  RegisterEmailDomainAccessesPage: RegisterEmailDomainAccessesPage,\n  RegisterEmailDomainAccess: RegisterEmailDomainAccess,\n  RootMutationType: {},\n  WebMetadata: WebMetadata,\n  CollectionUpdateInput: CollectionUpdateInput,\n  UploadInput: UploadInput,\n  Upload: Scalars['Upload'],\n  AuthPayload: AuthPayload,\n  ResourceInput: ResourceInput,\n  CommentInput: CommentInput,\n  RegistrationInput: RegistrationInput,\n  CommunityInput: CommunityInput,\n  UpdateProfileInput: UpdateProfileInput,\n  CollectionInput: CollectionInput,\n  CommunityUpdateInput: CommunityUpdateInput,\n  DeleteContext: ResolversParentTypes['Collection'] | ResolversParentTypes['Comment'] | ResolversParentTypes['Community'] | ResolversParentTypes['Feature'] | ResolversParentTypes['Flag'] | ResolversParentTypes['Follow'] | ResolversParentTypes['Like'] | ResolversParentTypes['Resource'] | ResolversParentTypes['Thread'] | ResolversParentTypes['User'],\n};\n\nexport type ActivitiesPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['ActivitiesPage'] = ResolversParentTypes['ActivitiesPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Activity']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type ActivityResolvers<ContextType = any, ParentType extends ResolversParentTypes['Activity'] = ResolversParentTypes['Activity']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  context?: Resolver<Maybe<ResolversTypes['ActivityContext']>, ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  user?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  verb?: Resolver<ResolversTypes['ActivityVerb'], ParentType, ContextType>,\n};\n\nexport type ActivityContextResolvers<ContextType = any, ParentType extends ResolversParentTypes['ActivityContext'] = ResolversParentTypes['ActivityContext']> = {\n  __resolveType: TypeResolveFn<'Collection' | 'Comment' | 'Community' | 'Flag' | 'Follow' | 'Like' | 'Resource' | 'User', ParentType, ContextType>\n};\n\nexport type AuthPayloadResolvers<ContextType = any, ParentType extends ResolversParentTypes['AuthPayload'] = ResolversParentTypes['AuthPayload']> = {\n  me?: Resolver<ResolversTypes['Me'], ParentType, ContextType>,\n  token?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type CollectionResolvers<ContextType = any, ParentType extends ResolversParentTypes['Collection'] = ResolversParentTypes['Collection']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  community?: Resolver<Maybe<ResolversTypes['Community']>, ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  creator?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  displayUsername?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  extraInfo?: Resolver<Maybe<ResolversTypes['Json']>, ParentType, ContextType>,\n  featureCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  flags?: Resolver<Maybe<ResolversTypes['FlagsPage']>, ParentType, ContextType, CollectionFlagsArgs>,\n  followerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  followers?: Resolver<Maybe<ResolversTypes['FollowsPage']>, ParentType, ContextType, CollectionFollowersArgs>,\n  icon?: Resolver<Maybe<ResolversTypes['Content']>, ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isDisabled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  lastActivity?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  likerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  likers?: Resolver<Maybe<ResolversTypes['LikesPage']>, ParentType, ContextType, CollectionLikersArgs>,\n  myFlag?: Resolver<Maybe<ResolversTypes['Flag']>, ParentType, ContextType>,\n  myFollow?: Resolver<Maybe<ResolversTypes['Follow']>, ParentType, ContextType>,\n  myLike?: Resolver<Maybe<ResolversTypes['Like']>, ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  outbox?: Resolver<Maybe<ResolversTypes['ActivitiesPage']>, ParentType, ContextType, CollectionOutboxArgs>,\n  preferredUsername?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  resourceCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  resources?: Resolver<Maybe<ResolversTypes['ResourcesPage']>, ParentType, ContextType, CollectionResourcesArgs>,\n  summary?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  threads?: Resolver<Maybe<ResolversTypes['ThreadsPage']>, ParentType, ContextType, CollectionThreadsArgs>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type CollectionsPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['CollectionsPage'] = ResolversParentTypes['CollectionsPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Collection']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type CommentResolvers<ContextType = any, ParentType extends ResolversParentTypes['Comment'] = ResolversParentTypes['Comment']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  content?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  creator?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  flags?: Resolver<Maybe<ResolversTypes['FlagsPage']>, ParentType, ContextType, CommentFlagsArgs>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  inReplyTo?: Resolver<Maybe<ResolversTypes['Comment']>, ParentType, ContextType>,\n  isHidden?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  likerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  likers?: Resolver<Maybe<ResolversTypes['LikesPage']>, ParentType, ContextType, CommentLikersArgs>,\n  myFlag?: Resolver<Maybe<ResolversTypes['Flag']>, ParentType, ContextType>,\n  myLike?: Resolver<Maybe<ResolversTypes['Like']>, ParentType, ContextType>,\n  thread?: Resolver<Maybe<ResolversTypes['Thread']>, ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type CommentsPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['CommentsPage'] = ResolversParentTypes['CommentsPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Comment']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type CommunitiesPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['CommunitiesPage'] = ResolversParentTypes['CommunitiesPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Community']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type CommunityResolvers<ContextType = any, ParentType extends ResolversParentTypes['Community'] = ResolversParentTypes['Community']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  collectionCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  collections?: Resolver<Maybe<ResolversTypes['CollectionsPage']>, ParentType, ContextType, CommunityCollectionsArgs>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  creator?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  displayUsername?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  extraInfo?: Resolver<Maybe<ResolversTypes['Json']>, ParentType, ContextType>,\n  featureCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  flags?: Resolver<Maybe<ResolversTypes['FlagsPage']>, ParentType, ContextType, CommunityFlagsArgs>,\n  followerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  followers?: Resolver<Maybe<ResolversTypes['FollowsPage']>, ParentType, ContextType, CommunityFollowersArgs>,\n  icon?: Resolver<Maybe<ResolversTypes['Content']>, ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  image?: Resolver<Maybe<ResolversTypes['Content']>, ParentType, ContextType>,\n  isDisabled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  lastActivity?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  likerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  likers?: Resolver<Maybe<ResolversTypes['LikesPage']>, ParentType, ContextType, CommunityLikersArgs>,\n  myFlag?: Resolver<Maybe<ResolversTypes['Flag']>, ParentType, ContextType>,\n  myFollow?: Resolver<Maybe<ResolversTypes['Follow']>, ParentType, ContextType>,\n  myLike?: Resolver<Maybe<ResolversTypes['Like']>, ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  outbox?: Resolver<Maybe<ResolversTypes['ActivitiesPage']>, ParentType, ContextType, CommunityOutboxArgs>,\n  preferredUsername?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  summary?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  threads?: Resolver<Maybe<ResolversTypes['ThreadsPage']>, ParentType, ContextType, CommunityThreadsArgs>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type ContentResolvers<ContextType = any, ParentType extends ResolversParentTypes['Content'] = ResolversParentTypes['Content']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  mediaType?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  metadata?: Resolver<Maybe<ResolversTypes['FileMetadata']>, ParentType, ContextType>,\n  mirror?: Resolver<Maybe<ResolversTypes['ContentMirror']>, ParentType, ContextType>,\n  upload?: Resolver<Maybe<ResolversTypes['ContentUpload']>, ParentType, ContextType>,\n  uploader?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  url?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type ContentMirrorResolvers<ContextType = any, ParentType extends ResolversParentTypes['ContentMirror'] = ResolversParentTypes['ContentMirror']> = {\n  url?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n};\n\nexport type ContentUploadResolvers<ContextType = any, ParentType extends ResolversParentTypes['ContentUpload'] = ResolversParentTypes['ContentUpload']> = {\n  path?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  size?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n};\n\nexport interface CursorScalarConfig extends GraphQLScalarTypeConfig<ResolversTypes['Cursor'], any> {\n  name: 'Cursor'\n}\n\nexport type DeleteContextResolvers<ContextType = any, ParentType extends ResolversParentTypes['DeleteContext'] = ResolversParentTypes['DeleteContext']> = {\n  __resolveType: TypeResolveFn<'Collection' | 'Comment' | 'Community' | 'Feature' | 'Flag' | 'Follow' | 'Like' | 'Resource' | 'Thread' | 'User', ParentType, ContextType>\n};\n\nexport type FeatureResolvers<ContextType = any, ParentType extends ResolversParentTypes['Feature'] = ResolversParentTypes['Feature']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  context?: Resolver<Maybe<ResolversTypes['FeatureContext']>, ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  creator?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n};\n\nexport type FeatureContextResolvers<ContextType = any, ParentType extends ResolversParentTypes['FeatureContext'] = ResolversParentTypes['FeatureContext']> = {\n  __resolveType: TypeResolveFn<'Collection' | 'Community', ParentType, ContextType>\n};\n\nexport type FeaturesPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['FeaturesPage'] = ResolversParentTypes['FeaturesPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Feature']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type FileIntrinsicsResolvers<ContextType = any, ParentType extends ResolversParentTypes['FileIntrinsics'] = ResolversParentTypes['FileIntrinsics']> = {\n  bitsPerPixel?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  bitsPerSample?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  blockAlign?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  byteRate?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  colorPlanes?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  numColorPalette?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  numFrames?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  pageCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n};\n\nexport type FileMetadataResolvers<ContextType = any, ParentType extends ResolversParentTypes['FileMetadata'] = ResolversParentTypes['FileMetadata']> = {\n  heightPx?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  intrinsics?: Resolver<Maybe<ResolversTypes['FileIntrinsics']>, ParentType, ContextType>,\n  numAudioChannels?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  sampleRateHz?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  widthPx?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n};\n\nexport type FlagResolvers<ContextType = any, ParentType extends ResolversParentTypes['Flag'] = ResolversParentTypes['Flag']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  context?: Resolver<ResolversTypes['FlagContext'], ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  creator?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isResolved?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  message?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type FlagContextResolvers<ContextType = any, ParentType extends ResolversParentTypes['FlagContext'] = ResolversParentTypes['FlagContext']> = {\n  __resolveType: TypeResolveFn<'Collection' | 'Comment' | 'Community' | 'Resource' | 'User', ParentType, ContextType>\n};\n\nexport type FlagsPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['FlagsPage'] = ResolversParentTypes['FlagsPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Flag']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type FollowResolvers<ContextType = any, ParentType extends ResolversParentTypes['Follow'] = ResolversParentTypes['Follow']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  context?: Resolver<ResolversTypes['FollowContext'], ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  creator?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type FollowContextResolvers<ContextType = any, ParentType extends ResolversParentTypes['FollowContext'] = ResolversParentTypes['FollowContext']> = {\n  __resolveType: TypeResolveFn<'Collection' | 'Community' | 'Thread' | 'User', ParentType, ContextType>\n};\n\nexport type FollowsPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['FollowsPage'] = ResolversParentTypes['FollowsPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Follow']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type InstanceResolvers<ContextType = any, ParentType extends ResolversParentTypes['Instance'] = ResolversParentTypes['Instance']> = {\n  description?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  extraInfo?: Resolver<Maybe<ResolversTypes['Json']>, ParentType, ContextType>,\n  featuredCollections?: Resolver<Maybe<ResolversTypes['FeaturesPage']>, ParentType, ContextType>,\n  featuredCommunities?: Resolver<Maybe<ResolversTypes['FeaturesPage']>, ParentType, ContextType>,\n  hostname?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  outbox?: Resolver<Maybe<ResolversTypes['ActivitiesPage']>, ParentType, ContextType, InstanceOutboxArgs>,\n  uploadIconTypes?: Resolver<Array<ResolversTypes['String']>, ParentType, ContextType>,\n  uploadImageTypes?: Resolver<Array<ResolversTypes['String']>, ParentType, ContextType>,\n  uploadMaxBytes?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  uploadResourceTypes?: Resolver<Array<ResolversTypes['String']>, ParentType, ContextType>,\n};\n\nexport interface JsonScalarConfig extends GraphQLScalarTypeConfig<ResolversTypes['Json'], any> {\n  name: 'Json'\n}\n\nexport type LikeResolvers<ContextType = any, ParentType extends ResolversParentTypes['Like'] = ResolversParentTypes['Like']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  context?: Resolver<ResolversTypes['LikeContext'], ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  creator?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type LikeContextResolvers<ContextType = any, ParentType extends ResolversParentTypes['LikeContext'] = ResolversParentTypes['LikeContext']> = {\n  __resolveType: TypeResolveFn<'Collection' | 'Comment' | 'Community' | 'Resource' | 'User', ParentType, ContextType>\n};\n\nexport type LikesPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['LikesPage'] = ResolversParentTypes['LikesPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Like']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type MeResolvers<ContextType = any, ParentType extends ResolversParentTypes['Me'] = ResolversParentTypes['Me']> = {\n  email?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isConfirmed?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isInstanceAdmin?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  searchFollows?: Resolver<Array<ResolversTypes['SearchFollow']>, ParentType, ContextType>,\n  user?: Resolver<ResolversTypes['User'], ParentType, ContextType>,\n  wantsEmailDigest?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  wantsNotifications?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n};\n\nexport type PageInfoResolvers<ContextType = any, ParentType extends ResolversParentTypes['PageInfo'] = ResolversParentTypes['PageInfo']> = {\n  endCursor?: Resolver<Maybe<Array<ResolversTypes['Cursor']>>, ParentType, ContextType>,\n  hasNextPage?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType>,\n  hasPreviousPage?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType>,\n  startCursor?: Resolver<Maybe<Array<ResolversTypes['Cursor']>>, ParentType, ContextType>,\n};\n\nexport type RegisterEmailAccessResolvers<ContextType = any, ParentType extends ResolversParentTypes['RegisterEmailAccess'] = ResolversParentTypes['RegisterEmailAccess']> = {\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  email?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type RegisterEmailAccessesPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['RegisterEmailAccessesPage'] = ResolversParentTypes['RegisterEmailAccessesPage']> = {\n  edges?: Resolver<Array<ResolversTypes['RegisterEmailAccess']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type RegisterEmailDomainAccessResolvers<ContextType = any, ParentType extends ResolversParentTypes['RegisterEmailDomainAccess'] = ResolversParentTypes['RegisterEmailDomainAccess']> = {\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  domain?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type RegisterEmailDomainAccessesPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['RegisterEmailDomainAccessesPage'] = ResolversParentTypes['RegisterEmailDomainAccessesPage']> = {\n  edges?: Resolver<Array<ResolversTypes['RegisterEmailDomainAccess']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type ResourceResolvers<ContextType = any, ParentType extends ResolversParentTypes['Resource'] = ResolversParentTypes['Resource']> = {\n  author?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  collection?: Resolver<Maybe<ResolversTypes['Collection']>, ParentType, ContextType>,\n  content?: Resolver<Maybe<ResolversTypes['Content']>, ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  creator?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType>,\n  extraInfo?: Resolver<Maybe<ResolversTypes['Json']>, ParentType, ContextType>,\n  flags?: Resolver<Maybe<ResolversTypes['FlagsPage']>, ParentType, ContextType, ResourceFlagsArgs>,\n  icon?: Resolver<Maybe<ResolversTypes['Content']>, ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isDisabled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  license?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  likerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  likers?: Resolver<Maybe<ResolversTypes['LikesPage']>, ParentType, ContextType, ResourceLikersArgs>,\n  myFlag?: Resolver<Maybe<ResolversTypes['Flag']>, ParentType, ContextType>,\n  myLike?: Resolver<Maybe<ResolversTypes['Like']>, ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  summary?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type ResourcesPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['ResourcesPage'] = ResolversParentTypes['ResourcesPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Resource']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type RootMutationTypeResolvers<ContextType = any, ParentType extends ResolversParentTypes['RootMutationType'] = ResolversParentTypes['RootMutationType']> = {\n  fetchWebMetadata?: Resolver<Maybe<ResolversTypes['WebMetadata']>, ParentType, ContextType, RequireFields<RootMutationTypeFetchWebMetadataArgs, 'url'>>,\n  createRegisterEmailAccess?: Resolver<ResolversTypes['RegisterEmailAccess'], ParentType, ContextType, RequireFields<RootMutationTypeCreateRegisterEmailAccessArgs, 'email'>>,\n  updateCollection?: Resolver<Maybe<ResolversTypes['Collection']>, ParentType, ContextType, RequireFields<RootMutationTypeUpdateCollectionArgs, 'collection' | 'collectionId'>>,\n  resetPassword?: Resolver<Maybe<ResolversTypes['AuthPayload']>, ParentType, ContextType, RequireFields<RootMutationTypeResetPasswordArgs, 'password' | 'token'>>,\n  deleteRegisterEmailAccess?: Resolver<Maybe<ResolversTypes['RegisterEmailAccess']>, ParentType, ContextType, RequireFields<RootMutationTypeDeleteRegisterEmailAccessArgs, 'id'>>,\n  createSession?: Resolver<Maybe<ResolversTypes['AuthPayload']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateSessionArgs, 'email' | 'password'>>,\n  deleteSelf?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType, RequireFields<RootMutationTypeDeleteSelfArgs, 'iAmSure'>>,\n  updateResource?: Resolver<Maybe<ResolversTypes['Resource']>, ParentType, ContextType, RequireFields<RootMutationTypeUpdateResourceArgs, 'resource' | 'resourceId'>>,\n  createFollowByUrl?: Resolver<Maybe<ResolversTypes['Follow']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateFollowByUrlArgs, 'url'>>,\n  confirmEmail?: Resolver<Maybe<ResolversTypes['AuthPayload']>, ParentType, ContextType, RequireFields<RootMutationTypeConfirmEmailArgs, 'token'>>,\n  deactivateUser?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType, RequireFields<RootMutationTypeDeactivateUserArgs, 'id'>>,\n  updateComment?: Resolver<Maybe<ResolversTypes['Comment']>, ParentType, ContextType, RequireFields<RootMutationTypeUpdateCommentArgs, 'comment' | 'commentId'>>,\n  createLike?: Resolver<Maybe<ResolversTypes['Like']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateLikeArgs, 'contextId'>>,\n  resetPasswordRequest?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType, RequireFields<RootMutationTypeResetPasswordRequestArgs, 'email'>>,\n  sendInvite?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType, RequireFields<RootMutationTypeSendInviteArgs, 'email'>>,\n  deleteSession?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType>,\n  createReply?: Resolver<Maybe<ResolversTypes['Comment']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateReplyArgs, 'comment' | 'inReplyToId' | 'threadId'>>,\n  copyResource?: Resolver<Maybe<ResolversTypes['Resource']>, ParentType, ContextType, RequireFields<RootMutationTypeCopyResourceArgs, 'collectionId' | 'resourceId'>>,\n  createRegisterEmailDomainAccess?: Resolver<ResolversTypes['RegisterEmailDomainAccess'], ParentType, ContextType, RequireFields<RootMutationTypeCreateRegisterEmailDomainAccessArgs, 'domain'>>,\n  createFeature?: Resolver<Maybe<ResolversTypes['Feature']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateFeatureArgs, 'contextId'>>,\n  createFollow?: Resolver<Maybe<ResolversTypes['Follow']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateFollowArgs, 'contextId'>>,\n  createUser?: Resolver<Maybe<ResolversTypes['Me']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateUserArgs, 'user'>>,\n  resolveFlag?: Resolver<Maybe<ResolversTypes['Flag']>, ParentType, ContextType, RequireFields<RootMutationTypeResolveFlagArgs, 'flagId'>>,\n  createCommunity?: Resolver<Maybe<ResolversTypes['Community']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateCommunityArgs, 'community'>>,\n  updateProfile?: Resolver<Maybe<ResolversTypes['Me']>, ParentType, ContextType, RequireFields<RootMutationTypeUpdateProfileArgs, 'profile'>>,\n  createCollection?: Resolver<Maybe<ResolversTypes['Collection']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateCollectionArgs, 'collection' | 'communityId'>>,\n  deleteRegisterEmailDomainAccess?: Resolver<Maybe<ResolversTypes['RegisterEmailDomainAccess']>, ParentType, ContextType, RequireFields<RootMutationTypeDeleteRegisterEmailDomainAccessArgs, 'id'>>,\n  updateCommunity?: Resolver<Maybe<ResolversTypes['Community']>, ParentType, ContextType, RequireFields<RootMutationTypeUpdateCommunityArgs, 'community' | 'communityId'>>,\n  delete?: Resolver<Maybe<ResolversTypes['DeleteContext']>, ParentType, ContextType, RequireFields<RootMutationTypeDeleteArgs, 'contextId'>>,\n  createFlag?: Resolver<Maybe<ResolversTypes['Flag']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateFlagArgs, 'contextId' | 'message'>>,\n  createThread?: Resolver<Maybe<ResolversTypes['Comment']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateThreadArgs, 'comment' | 'contextId'>>,\n  createResource?: Resolver<Maybe<ResolversTypes['Resource']>, ParentType, ContextType, RequireFields<RootMutationTypeCreateResourceArgs, 'collectionId' | 'content' | 'resource'>>,\n};\n\nexport type RootQueryTypeResolvers<ContextType = any, ParentType extends ResolversParentTypes['RootQueryType'] = ResolversParentTypes['RootQueryType']> = {\n  activity?: Resolver<Maybe<ResolversTypes['Activity']>, ParentType, ContextType, RequireFields<RootQueryTypeActivityArgs, 'activityId'>>,\n  collection?: Resolver<Maybe<ResolversTypes['Collection']>, ParentType, ContextType, RequireFields<RootQueryTypeCollectionArgs, 'collectionId'>>,\n  collections?: Resolver<ResolversTypes['CollectionsPage'], ParentType, ContextType, RootQueryTypeCollectionsArgs>,\n  comment?: Resolver<Maybe<ResolversTypes['Comment']>, ParentType, ContextType, RequireFields<RootQueryTypeCommentArgs, 'commentId'>>,\n  communities?: Resolver<ResolversTypes['CommunitiesPage'], ParentType, ContextType, RootQueryTypeCommunitiesArgs>,\n  community?: Resolver<Maybe<ResolversTypes['Community']>, ParentType, ContextType, RequireFields<RootQueryTypeCommunityArgs, 'communityId'>>,\n  feature?: Resolver<Maybe<ResolversTypes['Feature']>, ParentType, ContextType, RequireFields<RootQueryTypeFeatureArgs, 'featureId'>>,\n  features?: Resolver<Maybe<ResolversTypes['FeaturesPage']>, ParentType, ContextType, RootQueryTypeFeaturesArgs>,\n  flag?: Resolver<Maybe<ResolversTypes['Flag']>, ParentType, ContextType, RequireFields<RootQueryTypeFlagArgs, 'flagId'>>,\n  flags?: Resolver<Maybe<ResolversTypes['FlagsPage']>, ParentType, ContextType, RootQueryTypeFlagsArgs>,\n  follow?: Resolver<Maybe<ResolversTypes['Follow']>, ParentType, ContextType, RequireFields<RootQueryTypeFollowArgs, 'followId'>>,\n  instance?: Resolver<Maybe<ResolversTypes['Instance']>, ParentType, ContextType>,\n  like?: Resolver<Maybe<ResolversTypes['Like']>, ParentType, ContextType, RequireFields<RootQueryTypeLikeArgs, 'likeId'>>,\n  me?: Resolver<Maybe<ResolversTypes['Me']>, ParentType, ContextType>,\n  registerEmailAccesses?: Resolver<ResolversTypes['RegisterEmailAccessesPage'], ParentType, ContextType, RootQueryTypeRegisterEmailAccessesArgs>,\n  registerEmailDomainAccesses?: Resolver<ResolversTypes['RegisterEmailDomainAccessesPage'], ParentType, ContextType, RootQueryTypeRegisterEmailDomainAccessesArgs>,\n  resource?: Resolver<Maybe<ResolversTypes['Resource']>, ParentType, ContextType, RequireFields<RootQueryTypeResourceArgs, 'resourceId'>>,\n  thread?: Resolver<Maybe<ResolversTypes['Thread']>, ParentType, ContextType, RequireFields<RootQueryTypeThreadArgs, 'threadId'>>,\n  user?: Resolver<Maybe<ResolversTypes['User']>, ParentType, ContextType, RequireFields<RootQueryTypeUserArgs, 'userId'>>,\n  usernameAvailable?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType, RequireFields<RootQueryTypeUsernameAvailableArgs, 'username'>>,\n};\n\nexport type SearchFollowResolvers<ContextType = any, ParentType extends ResolversParentTypes['SearchFollow'] = ResolversParentTypes['SearchFollow']> = {\n  canonicalUrl?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  collectionId?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  communityId?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  followId?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isCreator?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n};\n\nexport type ThreadResolvers<ContextType = any, ParentType extends ResolversParentTypes['Thread'] = ResolversParentTypes['Thread']> = {\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  comments?: Resolver<Maybe<ResolversTypes['CommentsPage']>, ParentType, ContextType, ThreadCommentsArgs>,\n  context?: Resolver<Maybe<ResolversTypes['ThreadContext']>, ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  followerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  followers?: Resolver<Maybe<ResolversTypes['FollowsPage']>, ParentType, ContextType, ThreadFollowersArgs>,\n  id?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  isHidden?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  lastActivity?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  myFollow?: Resolver<Maybe<ResolversTypes['Follow']>, ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type ThreadContextResolvers<ContextType = any, ParentType extends ResolversParentTypes['ThreadContext'] = ResolversParentTypes['ThreadContext']> = {\n  __resolveType: TypeResolveFn<'Collection' | 'Community' | 'Flag' | 'Resource', ParentType, ContextType>\n};\n\nexport type ThreadsPageResolvers<ContextType = any, ParentType extends ResolversParentTypes['ThreadsPage'] = ResolversParentTypes['ThreadsPage']> = {\n  edges?: Resolver<Array<ResolversTypes['Thread']>, ParentType, ContextType>,\n  pageInfo?: Resolver<ResolversTypes['PageInfo'], ParentType, ContextType>,\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport interface UploadScalarConfig extends GraphQLScalarTypeConfig<ResolversTypes['Upload'], any> {\n  name: 'Upload'\n}\n\nexport type UserResolvers<ContextType = any, ParentType extends ResolversParentTypes['User'] = ResolversParentTypes['User']> = {\n  lastActivity?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  comments?: Resolver<Maybe<ResolversTypes['CommentsPage']>, ParentType, ContextType, UserCommentsArgs>,\n  image?: Resolver<Maybe<ResolversTypes['Content']>, ParentType, ContextType>,\n  website?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  likeCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  likes?: Resolver<Maybe<ResolversTypes['LikesPage']>, ParentType, ContextType, UserLikesArgs>,\n  icon?: Resolver<Maybe<ResolversTypes['Content']>, ParentType, ContextType>,\n  updatedAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  myFlag?: Resolver<Maybe<ResolversTypes['Flag']>, ParentType, ContextType>,\n  isDisabled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  isLocal?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  followers?: Resolver<Maybe<ResolversTypes['FollowsPage']>, ParentType, ContextType, UserFollowersArgs>,\n  displayUsername?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  summary?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  location?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  likerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  likers?: Resolver<Maybe<ResolversTypes['LikesPage']>, ParentType, ContextType, UserLikersArgs>,\n  extraInfo?: Resolver<Maybe<ResolversTypes['Json']>, ParentType, ContextType>,\n  followerCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  communityFollows?: Resolver<Maybe<ResolversTypes['FollowsPage']>, ParentType, ContextType, UserCommunityFollowsArgs>,\n  name?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  myLike?: Resolver<Maybe<ResolversTypes['Like']>, ParentType, ContextType>,\n  isPublic?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  createdAt?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  follows?: Resolver<Maybe<ResolversTypes['FollowsPage']>, ParentType, ContextType, UserFollowsArgs>,\n  inbox?: Resolver<Maybe<ResolversTypes['ActivitiesPage']>, ParentType, ContextType, UserInboxArgs>,\n  canonicalUrl?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  preferredUsername?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  followCount?: Resolver<Maybe<ResolversTypes['Int']>, ParentType, ContextType>,\n  userFollows?: Resolver<Maybe<ResolversTypes['FollowsPage']>, ParentType, ContextType, UserUserFollowsArgs>,\n  outbox?: Resolver<Maybe<ResolversTypes['ActivitiesPage']>, ParentType, ContextType, UserOutboxArgs>,\n  myFollow?: Resolver<Maybe<ResolversTypes['Follow']>, ParentType, ContextType>,\n  collectionFollows?: Resolver<Maybe<ResolversTypes['FollowsPage']>, ParentType, ContextType, UserCollectionFollowsArgs>,\n};\n\nexport type WebMetadataResolvers<ContextType = any, ParentType extends ResolversParentTypes['WebMetadata'] = ResolversParentTypes['WebMetadata']> = {\n  author?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  embedCode?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  embedType?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  image?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  language?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  mimeType?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  source?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  summary?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  title?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  url?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n};\n\nexport type Resolvers<ContextType = any> = {\n  ActivitiesPage?: ActivitiesPageResolvers<ContextType>,\n  Activity?: ActivityResolvers<ContextType>,\n  ActivityContext?: ActivityContextResolvers,\n  AuthPayload?: AuthPayloadResolvers<ContextType>,\n  Collection?: CollectionResolvers<ContextType>,\n  CollectionsPage?: CollectionsPageResolvers<ContextType>,\n  Comment?: CommentResolvers<ContextType>,\n  CommentsPage?: CommentsPageResolvers<ContextType>,\n  CommunitiesPage?: CommunitiesPageResolvers<ContextType>,\n  Community?: CommunityResolvers<ContextType>,\n  Content?: ContentResolvers<ContextType>,\n  ContentMirror?: ContentMirrorResolvers<ContextType>,\n  ContentUpload?: ContentUploadResolvers<ContextType>,\n  Cursor?: GraphQLScalarType,\n  DeleteContext?: DeleteContextResolvers,\n  Feature?: FeatureResolvers<ContextType>,\n  FeatureContext?: FeatureContextResolvers,\n  FeaturesPage?: FeaturesPageResolvers<ContextType>,\n  FileIntrinsics?: FileIntrinsicsResolvers<ContextType>,\n  FileMetadata?: FileMetadataResolvers<ContextType>,\n  Flag?: FlagResolvers<ContextType>,\n  FlagContext?: FlagContextResolvers,\n  FlagsPage?: FlagsPageResolvers<ContextType>,\n  Follow?: FollowResolvers<ContextType>,\n  FollowContext?: FollowContextResolvers,\n  FollowsPage?: FollowsPageResolvers<ContextType>,\n  Instance?: InstanceResolvers<ContextType>,\n  Json?: GraphQLScalarType,\n  Like?: LikeResolvers<ContextType>,\n  LikeContext?: LikeContextResolvers,\n  LikesPage?: LikesPageResolvers<ContextType>,\n  Me?: MeResolvers<ContextType>,\n  PageInfo?: PageInfoResolvers<ContextType>,\n  RegisterEmailAccess?: RegisterEmailAccessResolvers<ContextType>,\n  RegisterEmailAccessesPage?: RegisterEmailAccessesPageResolvers<ContextType>,\n  RegisterEmailDomainAccess?: RegisterEmailDomainAccessResolvers<ContextType>,\n  RegisterEmailDomainAccessesPage?: RegisterEmailDomainAccessesPageResolvers<ContextType>,\n  Resource?: ResourceResolvers<ContextType>,\n  ResourcesPage?: ResourcesPageResolvers<ContextType>,\n  RootMutationType?: RootMutationTypeResolvers<ContextType>,\n  RootQueryType?: RootQueryTypeResolvers<ContextType>,\n  SearchFollow?: SearchFollowResolvers<ContextType>,\n  Thread?: ThreadResolvers<ContextType>,\n  ThreadContext?: ThreadContextResolvers,\n  ThreadsPage?: ThreadsPageResolvers<ContextType>,\n  Upload?: GraphQLScalarType,\n  User?: UserResolvers<ContextType>,\n  WebMetadata?: WebMetadataResolvers<ContextType>,\n};\n\n\n/**\n * @deprecated\n * Use \"Resolvers\" root object instead. If you wish to get \"IResolvers\", add \"typesPrefix: I\" to your config.\n*/\nexport type IResolvers<ContextType = any> = Resolvers<ContextType>;\n","export const PHOENIX_SOCKET_ENDPOINT = process.env.REACT_APP_PHOENIX_SOCKET_ENDPOINT;\nexport const GRAPHQL_ENDPOINT = process.env.REACT_APP_GRAPHQL_ENDPOINT;\nexport const NODE_ENV = process.env.NODE_ENV;\nexport const PUBLIC_URL = process.env.PUBLIC_URL;\nexport const SENTRY_KEY = process.env.REACT_APP_SENTRY_API_KEY;\nexport const DEFAULT_PAGE_SIZE = parseInt(`${process.env.REACT_APP_DEFAULT_PAGE_SIZE}`) || 15;\n\nexport const APP_NAME = 'ZenPub';\nexport const INSTANCE_DESCRIPTION = 'Federated economic network for Reflow pilots';\nexport const INVITE_ONLY_TEXT =\n  process.env.REACT_APP_INVITE_ONLY_TEXT ||\n  'Please note, signups on this instance are currently invite-only.';\nexport const INSTANCE_TAGLINE = 'Co-creating circular and regenerative resource flows in cities';\nexport const INSTANCE_PROMPT =\n  \"You don't need to sign up to preview what people are sharing and discussing publicly.\";\nexport const prompt_signin = 'Sign in';\nexport const my_timeline = 'My Timeline';\nexport const instance_bg_img =\n  'https://reflowproject.eu/wp-content/uploads/2019/08/reflow-cocreation-1.png';\nexport const logo_large_url =\n  'https://pbs.twimg.com/profile_images/1176826011293556738/9jzWwP_g.png';\nexport const logo_small_url =\n  'https://pbs.twimg.com/profile_images/1176826011293556738/9jzWwP_g.png';\n\nexport const terms_markdown_text = {\n  // replace the text as needed\n  terms_users: 'This is a test instance. Your data is not secure or private.',\n  terms_cookies: 'This site uses cookies.',\n  terms_indexing:\n    'Information you post on this site may be publicly available and will be copied onto other servers in the federated network.'\n};\n\nexport const terms_markdown_urls = {\n  // replace the URLs as needed, or enable/disable to use `terms_markdown_text` instead\n  enabled: false,\n  terms_users: 'https://moodle.net/terms/users.md',\n  terms_cookies: 'https://moodle.net/terms/cookies.md',\n  terms_indexing: 'https://moodle.net/terms/indexing.md'\n};\n\nexport const terms_privacy = {\n  // replace the URLs as needed, or enable/disable to use `text_markdown` instead\n  enabled: true,\n  // replace the URL with that of your instance's privacy policy (in markdown format)\n  url_markdown: 'https://moodle.net/terms/privacy.md',\n  // replace the text as needed (in markdown format as well)\n  text_markdown:\n    'This site uses cookies and follows GDPR rules. Contact the instance operators if you want your data exported or deleted.'\n};\n\nexport const related_urls = {\n  // replace the URLs as needed\n  project_homepage: 'https://commonspub.org',\n  code: 'https://gitlab.com/CommonsPub',\n  feedback: 'https://zo.team'\n};\n\nexport const IS_DEV = NODE_ENV === 'development';\n\nexport type LocaleDef = { code: string; desc: string; rtl: boolean };\n\nexport const locales: LocaleDef[] = [\n  { code: 'en_GB', desc: 'English, British', rtl: false },\n  { code: 'en_US', desc: 'English, USA', rtl: false },\n  { code: 'es_MX', desc: 'Español, Méjico', rtl: false },\n  { code: 'es_ES', desc: 'Español, España', rtl: false },\n  { code: 'fr_FR', desc: 'Français, France', rtl: false },\n  { code: 'eu', desc: 'Euskara', rtl: false },\n  { code: 'ar_SA', desc: 'العربية, المملكة العربية السعودية', rtl: true }\n];\n\nexport const languages = {\n  en_GB: 'English, British',\n  en_US: 'English, USA',\n  es_MX: 'Español, Méjico',\n  es_ES: 'Español, España',\n  fr_FR: 'Français, France',\n  eu: 'Euskara',\n  ar_SA: 'العربية, المملكة العربية السعودية'\n};\nexport type LocaleKey = keyof typeof languages;\n// export const locales = Object.keys(languages) as LocaleKey[];\n\nconst mothershipAppId = process.env.REACT_APP_MOTHERSHIP_API_ID;\nconst mothershipApiKey = process.env.REACT_APP_MOTHERSHIP_API_KEY;\nconst mothershipEnv = process.env.REACT_APP_MOTHERSHIP_ENV;\n\nexport const mothershipCreds =\n  mothershipAppId && mothershipApiKey\n    ? {\n        appId: mothershipAppId,\n        apiKey: mothershipApiKey,\n        indexName: mothershipEnv\n      }\n    : null;\n\nexport const searchDisabled = !mothershipAppId || !mothershipApiKey;\nexport const USERNAME_REGEX = /^[a-zA-Z][a-zA-Z0-9-]{2,}$/;\nexport const EMAIL_REGEX = /^.+@.+\\..+$/;\nexport const DOMAIN_REGEX = /^.+\\..+$/;\n\nexport const max_file_size = '10MB';\n\nexport const accepted_file_types =\n  '.pdf, .rtf, .docx, .doc, .odt, .ott, .xls, .xlsx, .ods, .ots, .csv, .ppt, .pps, .pptx, .odp, .otp, .odg, .otg, .odc, .ogg, .mp3, .flac, .m4a, .wav, .mp4, .mkv, .flv, .avi, .gif, .jpg, .jpeg, .png, .svg, .webm, .eps, .tex, .mbz';\n\n// these licenses must match the icons (in the same order) configured in the UploadResource UI module\n// please use standard identifiers from https://spdx.org/licenses/preview/ in order to preserve interoperability\nexport const accepted_license_types = ['CC0-1.0', 'CC-BY-4.0', 'CC-BY-SA-4.0'];\n\nexport const nord = {\n  // Main\n  app: '#2E3440',\n  appInverse: '#3B4252',\n  primary: '#BF616A',\n  secondary: '#D08770',\n  tertiary: '#EBCB8B',\n\n  // Status\n  positive: '#2db783',\n  negative: '#ff5a5f',\n  warning: '#ffebb3',\n\n  // Monochrome\n  lightest: '#333333',\n  lighter: '#444444',\n  light: '#666666',\n  mediumlight: '#999999',\n  medium: '#DDDDDD',\n  mediumdark: '#EEEEEE',\n  dark: '#F3F3F3',\n  darker: '#F8F8F8',\n  darkest: '#FFFFFF',\n  border: '1px solid #2E3440'\n};\n\nexport const colors = {\n  // Main\n  app: 'rgb(245, 246, 247)',\n  appInverse: '#fff',\n  primary: '#0d2451',\n  secondary: '#1EA7FD',\n  tertiary: '#DDDDDD',\n\n  // Status\n  positive: '#2db783',\n  negative: '#ff5a5f',\n  warning: '#ffebb3',\n\n  // Monochrome\n  lightest: '#FFFFFF',\n  lighter: '#F8F8F8',\n  light: '#F3F3F3',\n  mediumlight: '#EEEEEE',\n  medium: '#DDDDDD',\n  mediumdark: '#999999',\n  dark: '#666666',\n  darker: '#444444',\n  darkest: '#333333',\n  border: '1px solid #F3F3F3'\n};\n\nexport const typography = {\n  type: {\n    primary: '\"Open Sans\", sans-serif'\n  },\n  size: {\n    s1: '12px',\n    s2: '14px',\n    s3: '16px',\n    m1: '20px',\n    m2: '24px',\n    m3: '28px',\n    l1: '32px',\n    l2: '40px',\n    l3: '48px',\n    code: '90px'\n  }\n};\n\n/* log ENV if DEV */\nIS_DEV &&\n  console.log(`-environment-\n${Object.keys(process.env)\n  .map(key => `${key}=${process.env[key]}`)\n  .join('\\n')}\n-------------\n`);\n/***/\n","const { GraphQLError } = require('graphql');\n// FORKED FROM: https://github.com/jaydenseric/apollo-upload-client\n\nconst { ApolloLink, Observable } = require('apollo-link');\nconst {\n  selectURI,\n  selectHttpOptionsAndBody,\n  fallbackHttpConfig,\n  serializeFetchParameter,\n  createSignalIfSupported,\n  parseAndCheckHttpResponse\n} = require('apollo-link-http-common');\nconst { extractFiles } = require('extract-files');\n\n/**\n * A React Native [`File`](https://developer.mozilla.org/docs/web/api/file)\n * substitute.\n *\n * Be aware that inspecting network requests with Chrome dev tools interferes\n * with the React Native `FormData` implementation, causing network errors.\n * @kind typedef\n * @name ReactNativeFileSubstitute\n * @type {object}\n * @see [`extract-files` docs](https://github.com/jaydenseric/extract-files#type-reactnativefilesubstitute).\n * @see [React Native `FormData` polyfill source](https://github.com/facebook/react-native/blob/v0.45.1/Libraries/Network/FormData.js#L34).\n * @prop {string} uri Filesystem path.\n * @prop {string} [name] File name.\n * @prop {string} [type] File content type. Some environments (particularly Android) require a valid MIME type; Expo `ImageResult.type` is unreliable as it can be just `image`.\n * @example <caption>A camera roll file.</caption>\n * ```js\n * {\n *   uri: uriFromCameraRoll,\n *   name: 'a.jpg',\n *   type: 'image/jpeg'\n * }\n * ```\n */\n\n/**\n * Used to mark a\n * [React Native `File` substitute]{@link ReactNativeFileSubstitute}.\n * It’s too risky to assume all objects with `uri`, `type` and `name` properties\n * are files to extract. Re-exported from [`extract-files`](https://npm.im/extract-files)\n * for convenience.\n * @kind class\n * @name ReactNativeFile\n * @param {ReactNativeFileSubstitute} file A React Native [`File`](https://developer.mozilla.org/docs/web/api/file) substitute.\n * @example <caption>A React Native file that can be used in query or mutation variables.</caption>\n * ```js\n * const { ReactNativeFile } = require('apollo-upload-client')\n *\n * const file = new ReactNativeFile({\n *   uri: uriFromCameraRoll,\n *   name: 'a.jpg',\n *   type: 'image/jpeg'\n * })\n * ```\n */\n\n/**\n * GraphQL request `fetch` options.\n * @kind typedef\n * @name FetchOptions\n * @type {object}\n * @see [Polyfillable fetch options](https://github.github.io/fetch#options).\n * @prop {object} headers HTTP request headers.\n * @prop {string} [credentials] Authentication credentials mode.\n */\n\nconst setPath = (map, path, value) => {\n  const parts = path.trim().split('.');\n  let i;\n  for (i = 0; i < parts.length - 1; i++) {\n    map = map[parts[i]];\n  }\n  map[parts[i]] = value;\n};\n\n/**\n * Creates a terminating [Apollo Link](https://apollographql.com/docs/link)\n * capable of file uploads. Options match [`createHttpLink`](https://apollographql.com/docs/link/links/http#options).\n * @see [GraphQL multipart request spec](https://github.com/jaydenseric/graphql-multipart-request-spec).\n * @see [apollo-link on GitHub](https://github.com/apollographql/apollo-link).\n * @kind function\n * @name createUploadLink\n * @param {object} options Options.\n * @param {string} [options.uri=/graphql] GraphQL endpoint URI.\n * @param {Function} [options.fetch] [`fetch`](https://fetch.spec.whatwg.org) implementation to use, defaulting to the `fetch` global.\n * @param {FetchOptions} [options.fetchOptions] `fetch` options; overridden by upload requirements.\n * @param {string} [options.credentials] Overrides `options.fetchOptions.credentials`.\n * @param {object} [options.headers] Merges with and overrides `options.fetchOptions.headers`.\n * @param {boolean} [options.includeExtensions=false] Toggles sending `extensions` fields to the GraphQL server.\n * @returns {ApolloLink} A terminating [Apollo Link](https://apollographql.com/docs/link) capable of file uploads.\n * @example <caption>A basic Apollo Client setup.</caption>\n * ```js\n * const { ApolloClient } = require('apollo-client')\n * const { InMemoryCache } = require('apollo-cache-inmemory')\n * const { createUploadLink } = require('apollo-upload-client')\n *\n * const client = new ApolloClient({\n *   cache: new InMemoryCache(),\n *   link: createUploadLink()\n * })\n * ```\n */\nexport const createUploadLink = ({\n  uri: fetchUri = '/graphql',\n  fetch: linkFetch = fetch,\n  fetchOptions,\n  credentials,\n  headers,\n  includeExtensions\n} = {}) => {\n  const linkConfig = {\n    http: { includeExtensions },\n    options: fetchOptions,\n    credentials,\n    headers\n  };\n\n  return new ApolloLink(operation => {\n    const uri = selectURI(operation, fetchUri);\n    const context = operation.getContext();\n\n    // Apollo Engine client awareness:\n    // https://apollographql.com/docs/platform/client-awareness\n\n    const {\n      // From Apollo Client config.\n      clientAwareness: { name, version } = {},\n      headers\n    } = context;\n\n    const contextConfig = {\n      http: context.http,\n      options: context.fetchOptions,\n      credentials: context.credentials,\n      headers: {\n        // Client awareness headers are context overridable.\n        ...(name && { 'apollographql-client-name': name }),\n        ...(version && { 'apollographql-client-version': version }),\n        ...headers\n      }\n    };\n\n    const { options, body } = selectHttpOptionsAndBody(\n      operation,\n      fallbackHttpConfig,\n      linkConfig,\n      contextConfig\n    );\n\n    const { clone, files } = extractFiles(body);\n\n    if (files.size) {\n      // Automatically set by fetch when the body is a FormData instance.\n      delete options.headers['content-type'];\n\n      // GraphQL multipart request spec:\n      // https://github.com/jaydenseric/graphql-multipart-request-spec\n\n      const form = new FormData();\n      form.append('operationName', clone.operationName);\n      form.append('query', clone.query);\n\n      // update paths in variables\n      let i = 0;\n      files.forEach(paths => {\n        paths.forEach(path => setPath(clone, path, String(++i)));\n      });\n      form.append('variables', JSON.stringify(clone.variables));\n\n      // actually add files to form\n      i = 0;\n      files.forEach((paths, file) => {\n        form.append(++i, file, file.name);\n      });\n\n      options.body = form;\n    } else options.body = serializeFetchParameter(clone, 'Payload');\n\n    return new Observable(observer => {\n      // If no abort controller signal was provided in fetch options, and the\n      // environment supports the AbortController interface, create and use a\n      // default abort controller.\n      let abortController;\n      if (!options.signal) {\n        const { controller } = createSignalIfSupported();\n        if (controller) {\n          abortController = controller;\n          options.signal = abortController.signal;\n        }\n      }\n\n      linkFetch(uri, options)\n        .then(response => {\n          // Forward the response on the context.\n          operation.setContext({ response });\n          return response;\n        })\n        .then(parseAndCheckHttpResponse(operation))\n        .then(result => {\n          observer.next(result);\n          observer.complete();\n        })\n        .catch(error => {\n          if (error.name === 'AbortError')\n            // Fetch was aborted.\n            return;\n\n          if (error.result && error.result.errors && error.result.data)\n            // There is a GraphQL result to forward.\n            observer.next(error.result);\n\n          observer.next({ errors: [new GraphQLError(String(error))] });\n        });\n\n      // Cleanup function.\n      return () => {\n        if (abortController)\n          // Abort fetch.\n          abortController.abort();\n      };\n    });\n  });\n};\n","import * as AbsintheSocket from '@absinthe/socket';\nimport { createAbsintheSocketLink } from '@absinthe/socket-apollo-link';\nimport { hasSubscription } from '@jumpn/utils-graphql';\nimport {\n  defaultDataIdFromObject,\n  InMemoryCache,\n  IntrospectionFragmentMatcher\n} from 'apollo-cache-inmemory';\nimport { ApolloClient } from 'apollo-client';\nimport { ApolloLink, FetchResult, Observable } from 'apollo-link';\nimport { setContext } from 'apollo-link-context';\nimport { onError } from 'apollo-link-error';\n// import { createHttpLink } from 'apollo-link-http';\nimport apolloLogger from 'apollo-link-logger';\nimport {\n  AnonConfirmEmailMutationName,\n  AnonLoginMutationName,\n  AnonResetPasswordMutationName,\n  AnonResetPasswordRequestMutationName,\n  AnonSignUpMutationName\n} from 'fe/session/anon.generated';\nimport { MeLogoutMutationName } from 'fe/session/me.generated';\nimport { GraphQLError } from 'graphql';\nimport HttpStatus from 'http-status-codes';\nimport { Socket as PhoenixSocket } from 'phoenix';\nimport { RootMutationType, RootQueryType } from '../graphql/types.generated';\nimport { GRAPHQL_ENDPOINT, IS_DEV, PHOENIX_SOCKET_ENDPOINT } from '../mn-constants';\nimport { getOpType } from '../util/apollo/operation';\nimport { KVStore } from '../util/keyvaluestore/types';\nimport { createUploadLink } from './uploadLink.js';\nimport introspectionQueryResultData from 'graphql/types.generated';\n\nexport type MutationName = keyof RootMutationType;\nexport type QueryName = keyof RootQueryType;\nexport type OperationName = QueryName | MutationName;\n\ninterface Cfg {\n  localKVStore: KVStore;\n  appLinks: ApolloLink[];\n}\n\nconst AUTH_TOKEN_KEY = 'AUTH_TOKEN';\n\nexport default async function initialise({ localKVStore, appLinks }: Cfg) {\n  let authToken = localKVStore.get(AUTH_TOKEN_KEY);\n  const fragmentMatcher = new IntrospectionFragmentMatcher({\n    introspectionQueryResultData\n  });\n\n  const cache = new InMemoryCache({\n    fragmentMatcher,\n    cacheRedirects: {\n      Query: {\n        activity: (_, args, { getCacheKey }) =>\n          getCacheKey({ __typename: 'Activity', id: args.activityId }),\n        collection: (_, args, { getCacheKey }) =>\n          getCacheKey({ __typename: 'Collection', id: args.collectionId }),\n        community: (_, args, { getCacheKey }) =>\n          getCacheKey({ __typename: 'Community', id: args.communityId }),\n        comment: (_, args, { getCacheKey }) =>\n          getCacheKey({ __typename: 'Comment', id: args.commentId }),\n        user: (_, args, { getCacheKey }) => getCacheKey({ __typename: 'User', id: args.userId }),\n        thread: (_, args, { getCacheKey }) =>\n          getCacheKey({ __typename: 'Thread', id: args.threadId }),\n        resource: (_, args, { getCacheKey }) =>\n          getCacheKey({ __typename: 'Resource', id: args.resourceId })\n      }\n    },\n    dataIdFromObject: obj => {\n      switch (obj.__typename) {\n        case 'User': {\n          //@ts-ignore\n          const id: string = 'userId' in obj ? obj.userId : obj.id;\n          return id;\n        }\n        //   case 'Me': return (obj as Me).email\n        default:\n          return defaultDataIdFromObject(obj); // fall back to default handling\n      }\n    }\n  });\n\n  const setToken = (token?: string | null | undefined) => {\n    if (!token) {\n      delToken();\n    } else {\n      authToken = token;\n      localKVStore.set(AUTH_TOKEN_KEY, token);\n    }\n  };\n\n  const delToken = () => {\n    authToken = undefined;\n    localKVStore.del(AUTH_TOKEN_KEY);\n  };\n\n  const setTokenLink = new ApolloLink((operation, nextLink) => {\n    const { operationName } = operation;\n\n    if (operationName === MeLogoutMutationName) {\n      delToken();\n    }\n\n    return nextLink(operation).map(resp => {\n      if (\n        operationName === AnonLoginMutationName ||\n        operationName === AnonResetPasswordMutationName ||\n        operationName === AnonConfirmEmailMutationName\n      ) {\n        setToken(\n          resp.data?.createSession?.token ||\n            resp.data?.confirmEmail?.token ||\n            resp.data?.resetPassword?.token\n        );\n      }\n      return resp;\n    });\n  });\n\n  /**\n   * This context link is used to assign the necessary Authorization header\n   * to all HTTP requests to the GraphQL backend. In the case that the user\n   * is authenticated it sets their access token as the value, otherwise null.\n   */\n  const authLink = setContext((_, { headers }) => {\n    // return the headers to the context so httpLink can read them\n    return {\n      headers: {\n        ...headers,\n        authorization: authToken ? `Bearer ${authToken}` : null\n      }\n    };\n  });\n\n  const errorLink = onError(errorResponse => {\n    const { operation, response, graphQLErrors, networkError } = errorResponse;\n    console.error(`errorLink on operation`, errorResponse);\n\n    if (networkError) {\n      // NETWORK ERROR\n      const message =\n        'statusCode' in networkError\n          ? HttpStatus.getStatusText(networkError.statusCode)\n          : networkError.message;\n      return Observable.of<FetchResult>({\n        errors: [new GraphQLError(`network error:${message}`)]\n      });\n    } else if (graphQLErrors) {\n      // GRAPHQL ERROR\n      const unexpectedError = graphQLErrors.find(\n        err =>\n          /Failed to fetch/gi.test(err.message) ||\n          /JSON.parse/gi.test(err.message) ||\n          /ServerParseError/gi.test(err.message)\n      );\n      return Observable.of<FetchResult>({\n        errors: unexpectedError ? [new GraphQLError(`Unexpected error`)] : graphQLErrors\n      });\n    } else if (response?.errors) {\n      // RESPONSE ERROR\n      return Observable.of<FetchResult>({\n        data: response.data,\n        errors: response.errors\n      });\n    } else {\n      // UNKNOWN ERROR\n      const respStr = JSON.stringify(response, null, 2);\n      const message = `unknown error:\\noperation:${operation}\\nresponse:${respStr}`;\n      return Observable.of<FetchResult>({\n        errors: [new GraphQLError(message)]\n      });\n    }\n  });\n\n  const clientAwarenessHeadersLinkForNonApollo3Server = setContext((_, ctx) => {\n    const { headers } = ctx;\n    return {\n      ...ctx,\n      clientAwareness: undefined,\n      headers: {\n        ...headers\n      }\n    };\n  });\n\n  const ALLOWED_ANONYMOUS_MUTATIONS = [\n    AnonSignUpMutationName,\n    AnonLoginMutationName,\n    AnonConfirmEmailMutationName,\n    AnonResetPasswordMutationName,\n    AnonResetPasswordRequestMutationName\n  ];\n  const alertBlockMutationsForAnonymousLink = new ApolloLink((operation, nextLink) => {\n    if (!authToken) {\n      const optype = getOpType(operation);\n      if (\n        optype === 'mutation' &&\n        //@ts-ignore\n        !ALLOWED_ANONYMOUS_MUTATIONS.includes(operation.operationName)\n      ) {\n        return Observable.of<FetchResult>({\n          errors: [new GraphQLError('You should log in for performing this operation!')]\n        });\n      }\n    }\n\n    return nextLink(operation);\n  });\n  // used for graphql query and mutations\n  const httpLink = ApolloLink.from(\n    [\n      IS_DEV ? apolloLogger : null,\n      ...appLinks,\n      alertBlockMutationsForAnonymousLink,\n      errorLink,\n      authLink,\n      clientAwarenessHeadersLinkForNonApollo3Server,\n      setTokenLink,\n      createUploadLink({ uri: GRAPHQL_ENDPOINT!! })\n    ].filter(Boolean)\n  );\n\n  // used for graphql subscriptions\n  const absintheSocket = createAbsintheSocketLink(\n    AbsintheSocket.create(new PhoenixSocket(PHOENIX_SOCKET_ENDPOINT))\n  );\n  // if the operation is a subscription then use\n  // the absintheSocket otherwise use the httpLink\n  const link = ApolloLink.split(\n    operation => hasSubscription(operation.query),\n    absintheSocket,\n    httpLink\n  );\n\n  const client = new ApolloClient({\n    cache,\n    link,\n    defaultOptions: {\n      watchQuery: {\n        fetchPolicy: 'cache-first',\n        errorPolicy: 'ignore'\n      },\n      query: {\n        fetchPolicy: 'cache-first',\n        errorPolicy: 'all'\n      },\n      mutate: {\n        errorPolicy: 'all'\n      }\n    }\n  });\n  return {\n    client\n  };\n}\n","import { MoodleThemeInterface } from './styled';\nimport { colors, typography } from 'mn-constants';\n\n// Global style variables\nexport const theme: MoodleThemeInterface = {\n  breakpoints: ['40em', '52em', '64em'],\n  // fontSizes: ['12px', '14px', '16px', '20px', '24px', '28px', '32px', '48px'],\n  colors: {\n    // Main\n    app: colors.app,\n    appInverse: colors.appInverse,\n    primary: colors.primary,\n    secondary: colors.secondary,\n    tertiary: colors.tertiary,\n\n    // Status\n    positive: colors.positive,\n    negative: colors.negative,\n    warning: colors.warning,\n\n    // Monochrome\n    lightest: colors.lightest,\n    lighter: colors.lighter,\n    light: colors.light,\n    mediumlight: colors.mediumlight,\n    medium: colors.medium,\n    mediumdark: colors.mediumdark,\n    dark: colors.dark,\n    darker: colors.darker,\n    darkest: colors.darkest,\n\n    border: colors.border\n  },\n  variants: {\n    negative: {\n      bg: colors.negative,\n      color: colors.light\n    },\n    positive: {\n      bg: colors.positive,\n      color: colors.light\n    },\n    warning: {\n      bg: colors.warning,\n      color: colors.darker\n    },\n    avatar: {\n      borderRadius: '100% !important'\n    }\n  },\n  text: {\n    subhead: {\n      fontFamily: typography.type.primary,\n      fontSize: typography.size.s3,\n      color: colors.dark,\n      textTransform: 'capitalize',\n      letterSpacing: '0.5px',\n      fontWeight: '600'\n    },\n    suptitle: {\n      fontFamily: typography.type.primary,\n      fontSize: typography.size.s1,\n      color: colors.dark,\n      textTransform: 'uppercase',\n      letterSpacing: '1px',\n      fontWeight: '700'\n    },\n    link: {\n      fontFamily: typography.type.primary,\n      fontSize: typography.size.s2,\n      color: colors.dark,\n      letterSpacing: '.5px',\n      fontWeight: '600'\n    },\n    text: {\n      fontFamily: typography.type.primary,\n      fontSize: typography.size.s2,\n      color: colors.dark,\n      letterSpacing: '.5px',\n      fontWeight: '500'\n    },\n    heading: {\n      fontFamily: typography.type.primary,\n      fontSize: typography.size.m3,\n      color: colors.dark,\n      letterSpacing: '1px',\n      fontWeight: '800'\n    }\n  },\n  buttons: {\n    primary: {\n      fontWeight: '600',\n      height: '40px',\n      px: 4,\n      backgroundColor: colors.primary,\n      borderRadius: '4px',\n      fontSize: typography.size.s2,\n      cursor: 'pointer',\n      textTransform: 'uppercase',\n      letterSpacing: '1px'\n    },\n    danger: {\n      fontWeight: '600',\n      height: '40px',\n      px: 4,\n      backgroundColor: colors.negative,\n      color: colors.lighter,\n      borderRadius: '4px',\n      fontSize: typography.size.s2,\n      cursor: 'pointer',\n      textTransform: 'uppercase',\n      letterSpacing: '1px'\n    },\n    outline: {\n      fontWeight: '600',\n      height: '40px',\n      px: 4,\n      backgroundColor: 'transparent',\n      borderRadius: '4px',\n      fontSize: typography.size.s2,\n      cursor: 'pointer',\n      textTransform: 'uppercase',\n      letterSpacing: '1px',\n      color: colors.dark,\n      border: `1px solid ${colors.primary}`\n    }\n  },\n  space: ['0px', '4px', '8px', '16px', '32px', '64px', '128px', '256px'],\n  fontFamily: typography.type.primary\n};\n","import React, { FC } from 'react';\nimport { moodlenet } from 'ui/themes';\nimport { ThemeProvider as StyledTheme } from 'styled-components';\nimport { MoodleThemeInterface } from 'ui/themes/styled';\n\nconst ThemeProvider: FC<{ theme?: MoodleThemeInterface | undefined }> = ({\n  children,\n  theme = moodlenet\n}) => {\n  return <StyledTheme theme={theme}>{children}</StyledTheme>;\n};\n\nexport default ThemeProvider;\n","import * as styledComponents from 'styled-components';\n\nexport interface MoodleThemeInterface {\n  breakpoints: string[];\n  colors: {\n    app: string;\n    appInverse: string;\n    primary: string;\n    secondary: string;\n    tertiary: string;\n    positive: string;\n    negative: string;\n    warning: string;\n    lightest: string;\n    lighter: string;\n    light: string;\n    mediumlight: string;\n    medium: string;\n    mediumdark: string;\n    dark: string;\n    darker: string;\n    darkest: string;\n\n    border: string;\n  };\n  text: {\n    subhead: {\n      fontFamily: string;\n      fontSize: string;\n      color: string;\n      textTransform: string;\n      letterSpacing: string;\n      fontWeight: string;\n    };\n    suptitle: {\n      fontFamily: string;\n      fontSize: string;\n      color: string;\n      textTransform: string;\n      letterSpacing: string;\n      fontWeight: string;\n    };\n    link: {\n      fontFamily: string;\n      fontSize: string;\n      color: string;\n      letterSpacing: string;\n      fontWeight: string;\n    };\n    text: {\n      fontFamily: string;\n      fontSize: string;\n      color: string;\n      letterSpacing: string;\n      fontWeight: string;\n    };\n    heading: {\n      fontFamily: string;\n      fontSize: string;\n      color: string;\n      letterSpacing: string;\n      fontWeight: string;\n    };\n  };\n  variants: {\n    negative: {\n      bg: string;\n      color: string;\n    };\n    positive: {\n      bg: string;\n      color: string;\n    };\n    warning: {\n      bg: string;\n      color: string;\n    };\n    avatar: {\n      borderRadius: string;\n    };\n  };\n  buttons: {\n    primary: {\n      fontWeight: string;\n      borderRadius: string;\n      height: string;\n      px: number;\n      fontSize: string;\n      backgroundColor: string;\n      cursor: string;\n      textTransform: string;\n      letterSpacing: string;\n    };\n    danger: {\n      fontWeight: string;\n      borderRadius: string;\n      height: string;\n      color: string;\n      px: number;\n      fontSize: string;\n      backgroundColor: string;\n      cursor: string;\n      textTransform: string;\n      letterSpacing: string;\n    };\n\n    outline: {\n      fontWeight: string;\n      borderRadius: string;\n      height: string;\n      px: number;\n      fontSize: string;\n      backgroundColor: string;\n      cursor: string;\n      color: string;\n      textTransform: string;\n      letterSpacing: string;\n      border: string;\n    };\n  };\n  space: string[];\n  fontFamily: string;\n}\n\nexport interface StyledThemeInterface {\n  theme: MoodleThemeInterface;\n}\n\nconst {\n  default: styled,\n  css,\n  createGlobalStyle,\n  keyframes,\n  ThemeProvider,\n  withTheme\n} = styledComponents;\n\nexport { css, createGlobalStyle, keyframes, ThemeProvider, withTheme };\n\nexport default styled;\n","import React from 'react';\nimport styled from 'ui/themes/styled';\n// import { Link } from 'react-router-dom';\nimport { Flex, Text } from 'rebass/styled-components';\n// import Avatar from 'ui/elements/Avatar';\n\nexport const Header: React.FC<{ name: string }> = ({ name }) => {\n  return (\n    <HeaderWrapper>\n      <Left>\n        <SupText ml={2} variant=\"suptitle\">\n          {name}\n        </SupText>\n      </Left>\n    </HeaderWrapper>\n  );\n};\n\nconst Left = styled(Flex)`\n  flex: auto;\n  align-items: center;\n`;\n\nconst SupText = styled(Text)`\n  color: ${props => props.theme.colors.darker};\n  text-transform: capitalize;\n`;\n\nconst HeaderWrapper = styled(Flex)`\n  border-bottom: ${props => props.theme.colors.border};\n  height: 50px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 8px;\n  background: ${props => props.theme.colors.appInverse};\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  a {\n    display: flex;\n    flex: 1;\n    text-decoration: none;\n  }\n`;\n","import styled from '../../themes/styled';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { typography } from 'mn-constants';\n\nexport const WrapperPanel = styled(Flex)`\n  width: 240px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-left: 8px;\n  font-family: ${props => props.theme.fontFamily};\n  &.extra {\n    width: 100%;\n  }\n  ${media.lessThan('1095px')`\n  width: 290px;\n`};\n  ${media.lessThan('1005px')`\n   display: none;\n  `};\n`;\n\nexport const PanelInner = styled(Flex)`\n  position: sticky;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n`;\n\nexport const Panel = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 4px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-bottom: 8px !important;\n`;\n\nexport const PanelTitle = styled(Text)`\n  text-transform: capitalize;\n  border-bottom: ${props => props.theme.colors.border};\n  padding: 16px;\n  color: ${props => props.theme.colors.darker};\n  font-size: ${typography.size.s1};\n  font-weight: 600;\n`;\n\nexport const Nav = styled(Box)`\n  padding: 16px;\n`;\n\nexport const NavItem = styled(Text)`\ncolor: ${props => props.theme.colors.dark}\nfont-size: ${typography.size.s2};\na {\n  color: ${props => props.theme.colors.dark}\n  text-decoration: none;\n}\n  `;\n","import * as React from 'react';\nimport styled from 'ui/themes/styled';\nimport { Box } from 'rebass/styled-components';\nimport './loader.css';\nconst Bounce = styled(Box)<{ color: string }>`\n  background-color: ${props =>\n    props.color === 'primary' ? '#ffffffeb' : props.theme.colors.primary};\n`;\n\n/**\n * Loader spinner component.\n * @param props {Object} props of the loader\n * @constructor\n */\nfunction Loader({ ...props }) {\n  return (\n    <div className=\"spinner\" {...props}>\n      <Bounce color={props.variant} className=\"bounce1\" />\n      <Bounce color={props.variant} className=\"bounce2\" />\n      <Bounce color={props.variant} className=\"bounce3\" />\n    </div>\n  );\n}\n\nexport default Loader;\n","import React, { FC } from 'react';\nimport styled from 'ui/themes/styled';\nimport Loader from '../Loader';\nimport { darken, lighten, transitions } from 'polished';\nimport { Button } from 'rebass/styled-components';\nimport { ButtonProps } from 'rebass';\n\nconst WrapperButton = styled(Button)<{\n  variant: string;\n  isIcon: boolean;\n  disabled: boolean;\n}>`\n  ${transitions('background, 0.2s')};\n  width: ${props => (props.isIcon === true ? '40px' : 'auto')};\n  border-radius: ${props => (props.isIcon === true ? '100%' : '4px')};\n  padding: ${props => (props.isIcon === true ? '0px' : 'auto')};\n  opacity: ${props => (props.disabled === true ? '0.7' : '1')};\n  cursor: ${props => (props.disabled === true ? 'default' : 'pointer')};\n  &:hover && not:['disabled'] {\n    background: ${props =>\n      props.variant === 'primary' || props.variant === 'danger'\n        ? darken('0.1', props.theme.colors.primary)\n        : lighten('0.3', props.theme.colors.primary)};\n  }\n`;\n\nexport interface Props extends ButtonProps {\n  isSubmitting?: boolean;\n  variant: string;\n  isDisabled?: boolean;\n  isIcon?: boolean;\n}\n\nconst MNButton: FC<Props> = props => (\n  //@ts-ignore\n  <WrapperButton\n    {...props}\n    isSubmitting={props.isSubmitting}\n    disabled={props.isDisabled}\n    isIcon={props.isIcon}\n    variant={props.variant}\n  >\n    {props.isSubmitting ? <Loader variant={props.variant} /> : props.children}\n  </WrapperButton>\n);\n\nexport default MNButton;\n","import React from 'react';\nimport styled from 'ui/themes/styled';\nimport { Box } from 'rebass/styled-components';\nimport Button from 'ui/elements/Button';\nimport { Trans } from '@lingui/macro';\nimport { FormikHook } from 'ui/@types/types';\n\nexport interface Props {\n  LoadMoreFormik: FormikHook;\n}\n\nexport const LoadMore: React.FC<Props> = props => {\n  return (\n    <Wrapper p={2}>\n      <Button\n        isSubmitting={props.LoadMoreFormik.isSubmitting}\n        isDisabled={props.LoadMoreFormik.isSubmitting}\n        onClick={props.LoadMoreFormik.submitForm}\n        variant=\"outline\"\n      >\n        <Trans>Load more</Trans>\n      </Button>\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  button {\n    width: 100%;\n  }\n`;\n","import styled from 'ui/themes/styled';\nimport { Box, Flex } from 'rebass/styled-components';\nimport media from 'styled-media-query';\n\nexport const List = styled(Box)`\n  > div:last-of-type {\n    border-bottom: none;\n  }\n`;\n\nexport const MainContainer = styled(Flex)`\n  align-items: stretch;\n  flex-grow: 1;\n  flex-direction: row;\n  width: 100%;\n`;\n\nexport const HomeBox = styled(Flex)`\n  width: 600px;\n  align-items: flex-start;\n  flex-shrink: 1;\n  flex-grow: 1;\n  flex-basis: auto;\n  flex-direction: column;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  // ${media.lessThan('large')`\n  //   width: 100%;\n  // `};\n`;\n\nexport const WrapperCont = styled(Flex)`\n  width: 100%;\n  margin: 0 auto;\n  height: 100%;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  display: flex;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  // background: ${props => props.theme.colors.appInverse};\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n`;\n\nexport const Wrapper = styled(Flex)`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  & ul {\n    display: block;\n\n    & li {\n      display: inline-block;\n\n      & h5 {\n        font-size: 13px;\n        font-weight: 500;\n      }\n    }\n  }\n  & h4 {\n    margin: 0;\n    font-weight: 400 !important;\n    font-size: 14px !important;\n    color: #151b26;\n    line-height: 40px;\n  }\n`;\n\nexport const MenuList = styled(Flex)`\n  border-bottom: ${props => props.theme.colors.border};\n  border-top: ${props => props.theme.colors.border};\n  height: 60px;\n  // margin-top: 16px;\n  padding: 12px 8px;\n  background: ${props => props.theme.colors.appInverse};\n  a {\n    font-weight: 600;\n    text-decoration: none;\n    margin-right: 8px;\n    color: ${props => props.theme.colors.darker};\n    letterspacing: 1px;\n    font-size: 13px;\n    padding: 0px 8px;\n    line-height: 34px;\n    white-space: nowrap;\n    &.active {\n      color: ${props => props.theme.colors.lighter};\n      background: ${props => props.theme.colors.primary};\n      border-radius: 4px;\n    }\n  }\n`;\n\nexport const ObjectsList = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n\n  &.replies > div {\n    margin-bottom: 0;\n    border-bottom: ${props => props.theme.colors.border};\n  }\n  > div {\n    &:last-of-type {\n      margin-bottom: 4px;\n      border-bottom: 0;\n    }\n  }\n`;\n\nexport const BottomBordered = styled(Box)`\n  border-bottom: ${props => props.theme.colors.border};\n`;\n\nexport const CollectionsWrapper = styled(Box)`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 16px;\n  row-gap: 16px;\n  margin: 16px;\n  margin-bottom: 24px !important;\n`;\n","import * as React from 'react';\nimport { FormikHook } from 'ui/@types/types';\nimport { Header } from 'ui/modules/Header';\nimport { WrapperPanel } from 'ui/elements/Panel';\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport {\n  Wrapper,\n  WrapperCont,\n  MainContainer,\n  HomeBox,\n  ObjectsList,\n  CollectionsWrapper\n} from 'ui/elements/Layout';\nimport { ReactElement } from 'react';\n\nexport interface Props {\n  CollectionsBoxes: ReactElement;\n  LoadMoreFormik: FormikHook;\n}\n\nexport const AllCollections: React.FC<Props> = ({ CollectionsBoxes, LoadMoreFormik }) => {\n  return (\n    <>\n      <MainContainer>\n        <HomeBox>\n          <WrapperCont>\n            <Wrapper>\n              <Header name=\"All Collections\" />\n              <ObjectsList>\n                <CollectionsWrapper>{CollectionsBoxes}</CollectionsWrapper>\n              </ObjectsList>\n              {LoadMoreFormik && <LoadMore LoadMoreFormik={LoadMoreFormik} />}\n            </Wrapper>\n          </WrapperCont>\n        </HomeBox>\n        <WrapperPanel />\n      </MainContainer>\n    </>\n  );\n};\n","import * as Types from '../../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type CommunityPreviewFragment = (\n  { __typename: 'Community' }\n  & Pick<Types.Community, 'id' | 'summary' | 'collectionCount' | 'followerCount'>\n  & { myFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  )>, threads: Types.Maybe<(\n    { __typename: 'ThreadsPage' }\n    & Pick<Types.ThreadsPage, 'totalCount'>\n  )> }\n  & CommunityInfoFragment\n);\n\nexport type CommunityInfoFragment = (\n  { __typename: 'Community' }\n  & Pick<Types.Community, 'id' | 'name' | 'isLocal' | 'canonicalUrl' | 'displayUsername' | 'preferredUsername'>\n  & { creator: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n  )>, icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, myFollow: Types.Maybe<(\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  )> }\n);\n\nexport const CommunityInfoFragmentDoc = gql`\n    fragment CommunityInfo on Community {\n  id\n  name\n  creator {\n    id\n  }\n  icon {\n    id\n    url\n  }\n  isLocal\n  myFollow {\n    id\n  }\n  canonicalUrl\n  displayUsername\n  preferredUsername\n}\n    `;\nexport const CommunityPreviewFragmentDoc = gql`\n    fragment CommunityPreview on Community {\n  ...CommunityInfo\n  id\n  summary\n  myFlag {\n    id\n  }\n  collectionCount\n  followerCount\n  threads {\n    totalCount\n  }\n}\n    ${CommunityInfoFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { CommunityInfoFragment } from '../community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityInfoFragmentDoc } from '../community/CommunityPreview.generated';\n\n\nexport type CollectionPreviewFragment = (\n  { __typename: 'Collection' }\n  & Pick<Types.Collection, 'id' | 'isLocal' | 'canonicalUrl' | 'name' | 'summary' | 'resourceCount' | 'displayUsername' | 'preferredUsername'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, myFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  )>, myFollow: Types.Maybe<(\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  )>, community: Types.Maybe<(\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id'>\n    & CommunityInfoFragment\n  )> }\n);\n\nexport const CollectionPreviewFragmentDoc = gql`\n    fragment CollectionPreview on Collection {\n  id\n  icon {\n    id\n    url\n  }\n  isLocal\n  canonicalUrl\n  name\n  summary\n  resourceCount\n  displayUsername\n  myFlag {\n    id\n  }\n  myFollow {\n    id\n  }\n  preferredUsername\n  community {\n    id\n    ...CommunityInfo\n  }\n}\n    ${CommunityInfoFragmentDoc}`;\n","import * as Types from '../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type FullPageInfoFragment = (\n  { __typename: 'PageInfo' }\n  & Pick<Types.PageInfo, 'endCursor' | 'hasNextPage' | 'hasPreviousPage' | 'startCursor'>\n);\n\nexport const FullPageInfoFragmentDoc = gql`\n    fragment FullPageInfo on PageInfo {\n  endCursor\n  hasNextPage\n  hasPreviousPage\n  startCursor\n}\n    `;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport { CollectionPreviewFragment } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport gql from 'graphql-tag';\nimport { CollectionPreviewFragmentDoc } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type AllCollectionsQueryVariables = {\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type AllCollectionsQuery = (\n  { __typename: 'RootQueryType' }\n  & { collections: (\n    { __typename: 'CollectionsPage' }\n    & Pick<Types.CollectionsPage, 'totalCount'>\n    & { edges: Array<(\n      { __typename: 'Collection' }\n      & CollectionPreviewFragment\n    )>, pageInfo: (\n      { __typename: 'PageInfo' }\n      & FullPageInfoFragment\n    ) }\n  ) }\n);\n\n\nexport const AllCollectionsDocument = gql`\n    query allCollections($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collections(limit: $limit, before: $before, after: $after) @connection(key: \"allCollections\") {\n    edges {\n      ...CollectionPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ${CollectionPreviewFragmentDoc}\n${FullPageInfoFragmentDoc}`;\n\n/**\n * __useAllCollectionsQuery__\n *\n * To run a query within a React component, call `useAllCollectionsQuery` and pass it any options that fit your needs.\n * When your component renders, `useAllCollectionsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useAllCollectionsQuery({\n *   variables: {\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useAllCollectionsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<AllCollectionsQuery, AllCollectionsQueryVariables>) {\n        return ApolloReactHooks.useQuery<AllCollectionsQuery, AllCollectionsQueryVariables>(AllCollectionsDocument, baseOptions);\n      }\nexport function useAllCollectionsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<AllCollectionsQuery, AllCollectionsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<AllCollectionsQuery, AllCollectionsQueryVariables>(AllCollectionsDocument, baseOptions);\n        }\nexport type AllCollectionsQueryHookResult = ReturnType<typeof useAllCollectionsQuery>;\nexport type AllCollectionsLazyQueryHookResult = ReturnType<typeof useAllCollectionsLazyQuery>;\nexport type AllCollectionsQueryResult = ApolloReactCommon.QueryResult<AllCollectionsQuery, AllCollectionsQueryVariables>;\n\n\nexport interface AllCollectionsQueryOperation {\n  operationName: 'allCollections'\n  result: AllCollectionsQuery\n  variables: AllCollectionsQueryVariables\n  type: 'query'\n}\nexport const AllCollectionsQueryName:AllCollectionsQueryOperation['operationName'] = 'allCollections'\n\nexport const AllCollectionsQueryRefetch = (\n  variables:AllCollectionsQueryVariables, \n  context?:any\n)=>({\n  query:AllCollectionsDocument,\n  variables,\n  context\n})\n      \n","import Maybe from 'graphql/tsutils/Maybe';\nimport { PageInfo } from 'graphql/types.generated';\nimport { useMemo, useCallback } from 'react';\nimport { useFormik } from 'formik';\nimport { FormikHook } from 'ui/@types/types';\n\ninterface Page<EdgeType> {\n  edges: EdgeType[];\n  pageInfo: PageInfo;\n  totalCount: number;\n}\ninterface NextPageCursor {\n  after: PageInfo['endCursor'];\n  before: undefined;\n}\ninterface PreviousPageCursor {\n  before: PageInfo['startCursor'];\n  after: undefined;\n}\ntype PageUpdater<EdgeType> = (_: { prev: Page<EdgeType>; fetched: Page<EdgeType> }) => any; //Page<EdgeType>;\n\ntype Fetch<EdgeType, Cursor extends FellowPageCursor> = (\n  _: (\n    | {\n        cursor: NextPageCursor;\n        isNext: true;\n      }\n    | {\n        cursor: PreviousPageCursor;\n        isNext: false;\n      }\n  ) & {\n    update: PageUpdater<EdgeType>;\n  }\n) => Promise<unknown>;\n\ntype FellowPageCursor = NextPageCursor | PreviousPageCursor;\ntype BaseMngPage<Ready extends boolean> = {\n  ready: Ready;\n};\ninterface MngPageInitialized<EdgeType> extends Page<EdgeType>, BaseMngPage<true> {\n  next(): Promise<unknown>;\n  previous(): Promise<unknown>;\n}\ninterface MngPageUninitialized<EdgeType> extends BaseMngPage<false> {\n  edges: EdgeType[];\n}\n\nexport type MngPage<EdgeType> = MngPageUninitialized<EdgeType> | MngPageInitialized<EdgeType>;\n\nexport type FormikPaging = [FormikHook | null, FormikHook | null];\nexport const useFormikPaging = <EdgeType>(page: MngPage<EdgeType>): FormikPaging => {\n  const nextPageFormik = useFormik({\n    initialValues: {},\n    onSubmit: useCallback(() => (page?.ready ? page.next() : undefined), [page])\n  });\n  const previousPageFormik = useFormik({\n    initialValues: {},\n    onSubmit: useCallback(() => (page?.ready ? page.previous() : undefined), [page])\n  });\n  return useMemo(\n    () => [\n      page.ready && page.pageInfo.hasNextPage ? nextPageFormik : null,\n      page.ready && page.pageInfo.hasPreviousPage ? previousPageFormik : null\n    ],\n    [nextPageFormik, previousPageFormik, page]\n  );\n};\n\nexport const usePage = <EdgeType>(\n  gqlPage: Maybe<Page<EdgeType>>,\n  fetch: Fetch<EdgeType, NextPageCursor> // = () => Promise.resolve()\n): MngPage<EdgeType> & { formiks: FormikPaging } => {\n  const page = useMemo<MngPage<EdgeType>>(() => mngPage(gqlPage, fetch), [gqlPage, fetch]);\n  const formiks = useFormikPaging(page);\n  return useMemo(\n    () => ({\n      ...page,\n      formiks\n    }),\n    [formiks, page]\n  );\n};\n\nexport const mngPage = <EdgeType>(\n  page: Maybe<Page<EdgeType>>,\n  fetch: Fetch<EdgeType, NextPageCursor> = () => Promise.resolve()\n): MngPage<EdgeType> => {\n  if (!page) {\n    return {\n      ready: false,\n      edges: []\n    };\n  }\n  const next: MngPageInitialized<EdgeType>['next'] = async () =>\n    page.pageInfo.hasNextPage &&\n    fetch({\n      cursor: {\n        after: page.pageInfo.endCursor,\n        before: undefined\n      },\n      update: updatePageNext,\n      isNext: true\n    });\n\n  const previous: MngPageInitialized<EdgeType>['previous'] = async () =>\n    page.pageInfo.hasPreviousPage &&\n    fetch({\n      cursor: {\n        before: page.pageInfo.startCursor,\n        after: undefined\n      },\n      update: updatePagePrev,\n      isNext: false\n    });\n\n  const pageMng: MngPage<EdgeType> = {\n    ...page,\n    next,\n    previous,\n    ready: !!page\n  };\n  return pageMng;\n};\n\nconst updatePageNext = <EdgeType>({\n  fetched,\n  prev\n}: {\n  fetched: Page<EdgeType>;\n  prev: Page<EdgeType>;\n}) => {\n  return {\n    ...fetched,\n    edges: prev.edges.concat(fetched.edges),\n    totalCount: fetched.totalCount,\n    pageInfo: {\n      ...prev.pageInfo,\n      endCursor: fetched.pageInfo.endCursor,\n      hasNextPage: fetched.pageInfo.hasNextPage\n    }\n  };\n};\nconst updatePagePrev = <EdgeType>({\n  fetched,\n  prev\n}: {\n  fetched: Page<EdgeType>;\n  prev: Page<EdgeType>;\n}) => {\n  return {\n    ...fetched,\n    edges: fetched.edges.concat(prev.edges),\n    totalCount: fetched.totalCount,\n    pageInfo: {\n      ...prev.pageInfo,\n      startCursor: fetched.pageInfo.startCursor,\n      hasPreviousPage: fetched.pageInfo.hasPreviousPage\n    }\n  };\n};\n","import { useAllCollectionsQuery } from './useAllCollections.generated';\nimport { useMemo } from 'react';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useAllCollections = () => {\n  const allCollectionsQ = useAllCollectionsQuery({\n    variables: { limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const allCollectionsPage = usePage(\n    allCollectionsQ.data?.collections,\n    ({ cursor, update }) => {\n      return allCollectionsQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.collections && prev.collections\n            ? {\n                ...fetchMoreResult,\n                collections: update({\n                  prev: prev.collections,\n                  fetched: fetchMoreResult.collections\n                })\n              }\n            : prev;\n        }\n      });\n    }\n  );\n  return useMemo(() => {\n    return {\n      allCollectionsPage\n    };\n  }, [allCollectionsPage]);\n};\n","import React, { FC } from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'ui/themes/styled';\n\nexport interface SimpleLink {\n  external: boolean;\n  url: string;\n}\nexport interface Props {\n  link: SimpleLink;\n}\nexport const SimpleLink: FC<Props> = ({ link, children }) => {\n  return link.external ? (\n    <a href={link.url} rel=\"noopener noreferrer\" target=\"_blank\">\n      {children}\n    </a>\n  ) : (\n    <SLink to={link.url}>{children}</SLink>\n  );\n};\n\nconst SLink = styled(Link)`\n  text-decoration: none;\n`;\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Archive } from 'react-feather';\nimport { Box, Flex, Heading, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\n// import Avatar from 'ui/elements/Avatar';\nimport { SimpleLink } from 'ui/helpers/SimpleLink';\nimport styled from 'ui/themes/styled';\nimport { typography } from 'mn-constants';\nimport { darken, ellipsis } from 'polished';\n\nexport interface Props {\n  link: SimpleLink;\n  icon: string;\n  name: string;\n  summary: string;\n  displayUsername: string;\n  totalResources: number | null;\n  isFollowing: boolean;\n  toggleFollowFormik: FormikHook;\n  hideActions?: boolean;\n  isSearch?: boolean;\n}\n\nexport const Collection: React.FC<Props> = ({\n  link,\n  icon,\n  name,\n  summary,\n  displayUsername,\n  totalResources,\n  isFollowing,\n  toggleFollowFormik,\n  hideActions,\n  isSearch\n}) => {\n  return (\n    <CollectionWrapper>\n      {isSearch && (\n        <Search variant=\"text\">\n          <Trans>Collection</Trans>\n        </Search>\n      )}\n      <WrapperLink link={link}>\n        <Previews>\n          <Big src={icon} />\n          {/* <Smalls>\n        <Small>a</Small>\n        <Small>b</Small>\n        <Small>c</Small>\n      </Smalls> */}\n        </Previews>\n        <Info>\n          <Title>{name}</Title>\n          <Meta>\n            <TotResources variant=\"text\">\n              {totalResources || 0} <Trans>Resources</Trans>\n            </TotResources>\n            <Action>\n              {hideActions ? null : (\n                <ActionItem\n                  bordered\n                  isFollowing={isFollowing ? true : false}\n                  onClick={(e: React.MouseEvent) => {\n                    e.preventDefault();\n                    toggleFollowFormik.submitForm();\n                  }}\n                >\n                  <ActionText ml={1} variant={'suptitle'} sx={{ textTransform: 'capitalize' }}>\n                    {isFollowing ? <Trans>Following </Trans> : <Trans>follow</Trans>}\n                  </ActionText>\n                </ActionItem>\n              )}\n            </Action>\n          </Meta>\n        </Info>\n      </WrapperLink>\n    </CollectionWrapper>\n  );\n};\n\nexport const Search = styled(Text)`\n  padding: 8px;\n  background-color: ${props => props.theme.colors.appInverse};\n  font-weight: 700;\n  font-size: 11px;\n  text-transform: uppercase;\n  color: ${props => props.theme.colors.dark};\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n`;\n\nconst Meta = styled(Flex)`\n  color: ${props => props.theme.colors.mediumdark};\n  align-items: center;\n  position: relative;\n  z-index: 99999999;\n`;\n\nconst Title = styled(Heading)`\n  color: ${props => props.theme.colors.darker};\n  font-size: 16px;\n  text-decoration: none;\n  word-break: break-all;\n  margin-top: 4px;\n  ${ellipsis('250px')};\n`;\n\nconst CollectionWrapper = styled(Box)`\n  max-width: 300px;\n  position: relative;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n  padding: 8px;\n  border-radius: 4px;\n  border: 1px solid #ececec;\n`;\nconst Previews = styled(Box)`\n  display: grid;\n  // grid-template-rows: 150px 90px;\n  grid-template-rows: 150px;\n  grid-template-areas: 'big big big';\n  // grid-template-areas: \"big big big\"\n  //                       \"small small small \";\n  column-gap: 4px;\n  row-gap: 4px;\n`;\nconst Big = styled(Box)<{ src?: string }>`\n  height: 150px;\n  background: ${props => props.theme.colors.medium};\n  border-radius: 4px;\n  grid-area: big;\n\n  background-image: url(\"${props => props.src}\");\n  background-size: cover;\n  background-position: center center;\n`;\n// const Smalls = styled(Box)`\n// grid-area: small;\n// display: grid;\n// grid-template-columns: 1fr 1fr 1fr;\n// column-gap: 4px;\n// `\n// const Small = styled(Box)`\n//   background: ${props => props.theme.colors.medium};\n//   border-radius: 4px;\n//   `\nconst Info = styled(Box)`\n  margin: 8px;\n`;\nconst TotResources = styled(Text)`\n  font-size: 13px;\n  flex: 1;\n`;\nconst Action = styled(Box)``;\n\nconst ActionText = styled(Text)`\n  color: ${props => props.theme.colors.darker};\n  font-weight: 600;\n  font-size: 13px;\n`;\n\nexport const tempCollection: React.FC<Props> = ({\n  link,\n  icon,\n  name,\n  summary,\n  displayUsername,\n  totalResources,\n  isFollowing,\n  toggleFollowFormik,\n  hideActions\n}) => {\n  return (\n    <Bordered mb={1}>\n      <WrapperLink link={link}>\n        <AvatarCollection src={icon} />\n        <Infos ml={3}>\n          <Flex>\n            <Box flex={1}>\n              <Title>{name}</Title>\n              {/* <C>+{displayUsername}</Username> */}\n            </Box>\n          </Flex>\n          <Summary variant=\"text\" mt={1} mb={2}>\n            {summary && summary.length > 140\n              ? summary.replace(/^([\\s\\S]{140}[^\\s]*)[\\s\\S]*/, '$1...')\n              : summary}\n          </Summary>\n          <MetaWrapper mt={2} alignItems=\"center\">\n            <Archive size={18} />\n            <Text ml={2} variant=\"suptitle\">\n              {totalResources || 0} <Trans>Resources</Trans>\n            </Text>\n          </MetaWrapper>\n\n          <Meta mt={2}>\n            {hideActions ? null : (\n              <ActionItem\n                bordered\n                isFollowing={isFollowing ? true : false}\n                onClick={toggleFollowFormik.submitForm}\n              >\n                <Text variant={'suptitle'} sx={{ textTransform: 'capitalize' }}>\n                  {isFollowing ? <Trans>Unfollow </Trans> : <Trans>follow</Trans>}\n                </Text>\n              </ActionItem>\n            )}\n          </Meta>\n        </Infos>\n      </WrapperLink>\n    </Bordered>\n  );\n};\n\nconst WrapperLink = styled(SimpleLink)`\n  // color: red;\n  // a {\n  //   position: absolute;\n  //   top: 0;\n  //   left: 0;\n  //   right: 0;\n  //   bottom: 0;\n  //   z-index: 1;\n  // }\n`;\n\nconst MetaWrapper = styled(Flex)`\n  color: ${props => props.theme.colors.dark};\n  svg {\n    margin: 0;\n  }\n`;\n\nconst Summary = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n`;\nconst AvatarCollection = styled(Box)<{ src?: string }>`\n  border-radius: 4px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  min-width: 48px;\n  height: 48px;\n  padding: 15%;\n  background-color: transparent;\n  background-image: url(\"${props => props.src}\");\n  background-size: cover;\n  background-position: center center;\n`;\n\nconst ActionItem = styled(Flex)<{ isFollowing?: boolean; bordered?: boolean }>`\n  align-items: center;\n\n  color: ${props =>\n    props.isFollowing ? props.theme.colors.lighter : props.theme.colors.mediumdark};\n  div {\n    color: ${props => (props.isFollowing ? props.theme.colors.lighter : props.theme.colors.darker)};\n  }\n  cursor: pointer;\n  background: ${props => (props.isFollowing ? props.theme.colors.primary : 'transparent')};\n  border: 1px solid ${props => (props.isFollowing ? props.theme.colors.primary : 'transparent')};\n  border: 1px solid ${props => (props.bordered ? props.theme.colors.primary : 'transparent')};\n  border-radius: 4px;\n  padding: 2px 8px;\n  text-align: center;\n  font-size: ${typography.size.s1};\n\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    background: ${props =>\n      props.isFollowing ? props.theme.colors.mediumdark : props.theme.colors.primary};\n    border-color: ${props =>\n      props.isFollowing ? props.theme.colors.mediumdark : props.theme.colors.primary};\n  }\n`;\n\n// const ActionIcon = styled(Box)`\n//   width: 30px;\n//   height: 30px;\n//   border-radius: 99999px;\n//   display: inline-flex;\n//   align-items: center;\n//   align-content: center;\n//   text-align: center;\n//   margin-left: -8px;\n//   svg {\n//     margin: 0 auto;\n//   }\n// `;\n\n// const TitleLink = styled(SimpleLink)`\n//   text-decoration: none;\n//   color: ${props => props.theme.colors.darker};\n//   background: red;\n//   > a {\n//     text-decoration: none;\n//   }\n// `;\n\n// const Meta = styled(Flex)`\n//   color: ${props => props.theme.colors.medium};\n//   position: absolute;\n//   z-index: 2;\n//   bottom: 0;\n//   left: 0;\n// `;\n\n// const Username = styled(Text)`\n//   color: ${props => props.theme.colors.mediumdark};\n//   flex: 1;\n//   font-size: 14px;\n//   text-transform: lowercase;\n// `;\n\nconst Bordered = styled(Flex)`\n  border-radius: 4px;\n  border: ${props => props.theme.colors.border};\n  background: ${props => props.theme.colors.appInverse};\n  text-decoration: none;\n  position: relative;\n  &:hover {\n    background: ${props => darken('0.05', props.theme.colors.appInverse)};\n  }\n  * {\n    text-decoration: none !important;\n    &:hover {\n      text-decoration: none !important;\n    }\n  }\n`;\n\nconst Infos = styled(Box)`\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n`;\n// const Title = styled(Heading)`\n//   color: ${props => props.theme.colors.darker};\n//   font-size: 20px;\n//   text-decoration: none;\n//   word-break: break-all;\n//   margin-top: 8px;\n//   ${ellipsis('380px')};\n// `;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CollectionPreviewFragment } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CollectionPreviewFragmentDoc } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type MyCollectionFollowsQueryVariables = {};\n\n\nexport type MyCollectionFollowsQuery = (\n  { __typename: 'RootQueryType' }\n  & { me: Types.Maybe<(\n    { __typename: 'Me' }\n    & MyCollectionFollowsDataFragment\n  )> }\n);\n\nexport type MyCollectionFollowsDataFragment = (\n  { __typename: 'Me' }\n  & { user: (\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & { collectionFollows: Types.Maybe<(\n      { __typename: 'FollowsPage' }\n      & Pick<Types.FollowsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n        & { context: (\n          { __typename: 'Collection' }\n          & MyFollowedCollectionDataFragment\n        ) | { __typename: 'Community' } | { __typename: 'Thread' } | { __typename: 'User' } }\n      )> }\n    )> }\n  ) }\n);\n\nexport type MyFollowedCollectionDataFragment = (\n  { __typename: 'Collection' }\n  & CollectionPreviewFragment\n);\n\nexport const MyFollowedCollectionDataFragmentDoc = gql`\n    fragment MyFollowedCollectionData on Collection {\n  ...CollectionPreview\n}\n    ${CollectionPreviewFragmentDoc}`;\nexport const MyCollectionFollowsDataFragmentDoc = gql`\n    fragment MyCollectionFollowsData on Me {\n  user {\n    id\n    collectionFollows {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Collection {\n            ...MyFollowedCollectionData\n          }\n        }\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${MyFollowedCollectionDataFragmentDoc}`;\nexport const MyCollectionFollowsDocument = gql`\n    query myCollectionFollows {\n  me @connection(key: \"myCollectionFollows\") {\n    ...MyCollectionFollowsData\n  }\n}\n    ${MyCollectionFollowsDataFragmentDoc}`;\n\n/**\n * __useMyCollectionFollowsQuery__\n *\n * To run a query within a React component, call `useMyCollectionFollowsQuery` and pass it any options that fit your needs.\n * When your component renders, `useMyCollectionFollowsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useMyCollectionFollowsQuery({\n *   variables: {\n *   },\n * });\n */\nexport function useMyCollectionFollowsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<MyCollectionFollowsQuery, MyCollectionFollowsQueryVariables>) {\n        return ApolloReactHooks.useQuery<MyCollectionFollowsQuery, MyCollectionFollowsQueryVariables>(MyCollectionFollowsDocument, baseOptions);\n      }\nexport function useMyCollectionFollowsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<MyCollectionFollowsQuery, MyCollectionFollowsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<MyCollectionFollowsQuery, MyCollectionFollowsQueryVariables>(MyCollectionFollowsDocument, baseOptions);\n        }\nexport type MyCollectionFollowsQueryHookResult = ReturnType<typeof useMyCollectionFollowsQuery>;\nexport type MyCollectionFollowsLazyQueryHookResult = ReturnType<typeof useMyCollectionFollowsLazyQuery>;\nexport type MyCollectionFollowsQueryResult = ApolloReactCommon.QueryResult<MyCollectionFollowsQuery, MyCollectionFollowsQueryVariables>;\n\n\nexport interface MyCollectionFollowsQueryOperation {\n  operationName: 'myCollectionFollows'\n  result: MyCollectionFollowsQuery\n  variables: MyCollectionFollowsQueryVariables\n  type: 'query'\n}\nexport const MyCollectionFollowsQueryName:MyCollectionFollowsQueryOperation['operationName'] = 'myCollectionFollows'\n\nexport const MyCollectionFollowsQueryRefetch = (\n  variables:MyCollectionFollowsQueryVariables, \n  context?:any\n)=>({\n  query:MyCollectionFollowsDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommunityPreviewFragment } from '../../../HOC/modules/previews/community/CommunityPreview.generated';\nimport { SidebarFollowedCommunityFragment } from '../../../HOC/modules/Sidebar/Sidebar.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { SidebarFollowedCommunityFragmentDoc } from '../../../HOC/modules/Sidebar/Sidebar.generated';\nimport { CommunityPreviewFragmentDoc } from '../../../HOC/modules/previews/community/CommunityPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\n\nexport type MyCommunityFollowsQueryVariables = {\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type MyCommunityFollowsQuery = (\n  { __typename: 'RootQueryType' }\n  & { me: Types.Maybe<(\n    { __typename: 'Me' }\n    & MyCommunityFollowsDataFragment\n  )> }\n);\n\nexport type MyCommunityFollowsDataFragment = (\n  { __typename: 'Me' }\n  & { user: (\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & { communityFollows: Types.Maybe<(\n      { __typename: 'FollowsPage' }\n      & Pick<Types.FollowsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n        & { context: { __typename: 'Collection' } | (\n          { __typename: 'Community' }\n          & MyFollowedCommunityDataFragment\n        ) | { __typename: 'Thread' } | { __typename: 'User' } }\n      )> }\n    )> }\n  ) }\n);\n\nexport type MyFollowedCommunityDataFragment = (\n  { __typename: 'Community' }\n  & SidebarFollowedCommunityFragment\n  & CommunityPreviewFragment\n);\n\nexport const MyFollowedCommunityDataFragmentDoc = gql`\n    fragment MyFollowedCommunityData on Community {\n  ...SidebarFollowedCommunity\n  ...CommunityPreview\n}\n    ${SidebarFollowedCommunityFragmentDoc}\n${CommunityPreviewFragmentDoc}`;\nexport const MyCommunityFollowsDataFragmentDoc = gql`\n    fragment MyCommunityFollowsData on Me {\n  user {\n    id\n    communityFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Community {\n            ...MyFollowedCommunityData\n          }\n        }\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${MyFollowedCommunityDataFragmentDoc}`;\nexport const MyCommunityFollowsDocument = gql`\n    query myCommunityFollows($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  me @connection(key: \"myCommunityFollows\") {\n    ...MyCommunityFollowsData\n  }\n}\n    ${MyCommunityFollowsDataFragmentDoc}`;\n\n/**\n * __useMyCommunityFollowsQuery__\n *\n * To run a query within a React component, call `useMyCommunityFollowsQuery` and pass it any options that fit your needs.\n * When your component renders, `useMyCommunityFollowsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useMyCommunityFollowsQuery({\n *   variables: {\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useMyCommunityFollowsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<MyCommunityFollowsQuery, MyCommunityFollowsQueryVariables>) {\n        return ApolloReactHooks.useQuery<MyCommunityFollowsQuery, MyCommunityFollowsQueryVariables>(MyCommunityFollowsDocument, baseOptions);\n      }\nexport function useMyCommunityFollowsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<MyCommunityFollowsQuery, MyCommunityFollowsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<MyCommunityFollowsQuery, MyCommunityFollowsQueryVariables>(MyCommunityFollowsDocument, baseOptions);\n        }\nexport type MyCommunityFollowsQueryHookResult = ReturnType<typeof useMyCommunityFollowsQuery>;\nexport type MyCommunityFollowsLazyQueryHookResult = ReturnType<typeof useMyCommunityFollowsLazyQuery>;\nexport type MyCommunityFollowsQueryResult = ApolloReactCommon.QueryResult<MyCommunityFollowsQuery, MyCommunityFollowsQueryVariables>;\n\n\nexport interface MyCommunityFollowsQueryOperation {\n  operationName: 'myCommunityFollows'\n  result: MyCommunityFollowsQuery\n  variables: MyCommunityFollowsQueryVariables\n  type: 'query'\n}\nexport const MyCommunityFollowsQueryName:MyCommunityFollowsQueryOperation['operationName'] = 'myCommunityFollows'\n\nexport const MyCommunityFollowsQueryRefetch = (\n  variables:MyCommunityFollowsQueryVariables, \n  context?:any\n)=>({\n  query:MyCommunityFollowsDocument,\n  variables,\n  context\n})\n      \n","export const OPTIMISTIC_ID_STRING = '#';\nexport const isOptimisticId = (_: any) => _ === OPTIMISTIC_ID_STRING;\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type FollowMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type FollowMutation = (\n  { __typename: 'RootMutationType' }\n  & { createFollow: Types.Maybe<(\n    { __typename: 'Follow' }\n    & { context: (\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id' | 'followerCount'>\n      & { myFollow: Types.Maybe<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id' | 'followerCount'>\n      & { myFollow: Types.Maybe<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Thread' }\n      & Pick<Types.Thread, 'id' | 'followerCount'>\n      & { myFollow: Types.Maybe<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n      )> }\n    ) | (\n      { __typename: 'User' }\n      & Pick<Types.User, 'followerCount'>\n      & { userId: Types.User['id'] }\n      & { myFollow: Types.Maybe<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n      )> }\n    ) }\n  )> }\n);\n\nexport type UnfollowMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type UnfollowMutation = (\n  { __typename: 'RootMutationType' }\n  & { delete: Types.Maybe<{ __typename: 'Collection' } | { __typename: 'Comment' } | { __typename: 'Community' } | { __typename: 'Feature' } | { __typename: 'Flag' } | (\n    { __typename: 'Follow' }\n    & { context: (\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id' | 'followerCount'>\n      & { myFollow: Types.Maybe<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id' | 'followerCount'>\n      & { myFollow: Types.Maybe<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Thread' }\n      & Pick<Types.Thread, 'id' | 'followerCount'>\n      & { myFollow: Types.Maybe<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n      )> }\n    ) | (\n      { __typename: 'User' }\n      & Pick<Types.User, 'followerCount'>\n      & { userId: Types.User['id'] }\n      & { myFollow: Types.Maybe<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n      )> }\n    ) }\n  ) | { __typename: 'Like' } | { __typename: 'Resource' } | { __typename: 'Thread' } | { __typename: 'User' }> }\n);\n\n\nexport const FollowDocument = gql`\n    mutation follow($contextId: String!) {\n  createFollow(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on Community {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on Thread {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on User {\n        userId: id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n    }\n  }\n}\n    `;\nexport type FollowMutationFn = ApolloReactCommon.MutationFunction<FollowMutation, FollowMutationVariables>;\n\n/**\n * __useFollowMutation__\n *\n * To run a mutation, you first call `useFollowMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useFollowMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [followMutation, { data, loading, error }] = useFollowMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useFollowMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<FollowMutation, FollowMutationVariables>) {\n        return ApolloReactHooks.useMutation<FollowMutation, FollowMutationVariables>(FollowDocument, baseOptions);\n      }\nexport type FollowMutationHookResult = ReturnType<typeof useFollowMutation>;\nexport type FollowMutationResult = ApolloReactCommon.MutationResult<FollowMutation>;\nexport type FollowMutationOptions = ApolloReactCommon.BaseMutationOptions<FollowMutation, FollowMutationVariables>;\nexport const UnfollowDocument = gql`\n    mutation unfollow($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Follow {\n      context {\n        ... on Collection {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on Community {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on Thread {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on User {\n          userId: id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n      }\n    }\n  }\n}\n    `;\nexport type UnfollowMutationFn = ApolloReactCommon.MutationFunction<UnfollowMutation, UnfollowMutationVariables>;\n\n/**\n * __useUnfollowMutation__\n *\n * To run a mutation, you first call `useUnfollowMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useUnfollowMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [unfollowMutation, { data, loading, error }] = useUnfollowMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useUnfollowMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<UnfollowMutation, UnfollowMutationVariables>) {\n        return ApolloReactHooks.useMutation<UnfollowMutation, UnfollowMutationVariables>(UnfollowDocument, baseOptions);\n      }\nexport type UnfollowMutationHookResult = ReturnType<typeof useUnfollowMutation>;\nexport type UnfollowMutationResult = ApolloReactCommon.MutationResult<UnfollowMutation>;\nexport type UnfollowMutationOptions = ApolloReactCommon.BaseMutationOptions<UnfollowMutation, UnfollowMutationVariables>;\n\n\nexport interface FollowMutationOperation {\n  operationName: 'follow'\n  result: FollowMutation\n  variables: FollowMutationVariables\n  type: 'mutation'\n}\nexport const FollowMutationName:FollowMutationOperation['operationName'] = 'follow'\n\nexport const FollowMutationRefetch = (\n  variables:FollowMutationVariables, \n  context?:any\n)=>({\n  query:FollowDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface UnfollowMutationOperation {\n  operationName: 'unfollow'\n  result: UnfollowMutation\n  variables: UnfollowMutationVariables\n  type: 'mutation'\n}\nexport const UnfollowMutationName:UnfollowMutationOperation['operationName'] = 'unfollow'\n\nexport const UnfollowMutationRefetch = (\n  variables:UnfollowMutationVariables, \n  context?:any\n)=>({\n  query:UnfollowDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type UserPreviewFragment = (\n  { __typename: 'User' }\n  & Pick<Types.User, 'displayUsername' | 'summary' | 'canonicalUrl'>\n  & { userId: Types.User['id'], userName: Types.User['name'] }\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, image: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, myFollow: Types.Maybe<(\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  )>, myFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  )> }\n);\n\nexport const UserPreviewFragmentDoc = gql`\n    fragment UserPreview on User {\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  userId: id\n  userName: name\n  displayUsername\n  summary\n  canonicalUrl\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n}\n    `;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { UserPreviewFragment } from '../../../../HOC/modules/previews/user/UserPreview.generated';\nimport { FullPageInfoFragment } from '../../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../../@fragments/misc.generated';\nimport { UserPreviewFragmentDoc } from '../../../../HOC/modules/previews/user/UserPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type CollectionFollowersQueryVariables = {\n  collectionId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type CollectionFollowersQuery = (\n  { __typename: 'RootQueryType' }\n  & { collection: Types.Maybe<(\n    { __typename: 'Collection' }\n    & Pick<Types.Collection, 'id'>\n    & { followers: Types.Maybe<(\n      { __typename: 'FollowsPage' }\n      & Pick<Types.FollowsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n        & { creator: Types.Maybe<(\n          { __typename: 'User' }\n          & CollectionFollowerFragment\n        )> }\n      )> }\n    )> }\n  )> }\n);\n\nexport type CollectionFollowerFragment = (\n  { __typename: 'User' }\n  & UserPreviewFragment\n);\n\nexport const CollectionFollowerFragmentDoc = gql`\n    fragment CollectionFollower on User {\n  ...UserPreview\n}\n    ${UserPreviewFragmentDoc}`;\nexport const CollectionFollowersDocument = gql`\n    query collectionFollowers($collectionId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collection(collectionId: $collectionId) @connection(key: \"collectionFollowers\", filter: [\"collectionId\"]) {\n    id\n    followers(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        creator {\n          ...CollectionFollower\n        }\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CollectionFollowerFragmentDoc}`;\n\n/**\n * __useCollectionFollowersQuery__\n *\n * To run a query within a React component, call `useCollectionFollowersQuery` and pass it any options that fit your needs.\n * When your component renders, `useCollectionFollowersQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCollectionFollowersQuery({\n *   variables: {\n *      collectionId: // value for 'collectionId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useCollectionFollowersQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CollectionFollowersQuery, CollectionFollowersQueryVariables>) {\n        return ApolloReactHooks.useQuery<CollectionFollowersQuery, CollectionFollowersQueryVariables>(CollectionFollowersDocument, baseOptions);\n      }\nexport function useCollectionFollowersLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CollectionFollowersQuery, CollectionFollowersQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CollectionFollowersQuery, CollectionFollowersQueryVariables>(CollectionFollowersDocument, baseOptions);\n        }\nexport type CollectionFollowersQueryHookResult = ReturnType<typeof useCollectionFollowersQuery>;\nexport type CollectionFollowersLazyQueryHookResult = ReturnType<typeof useCollectionFollowersLazyQuery>;\nexport type CollectionFollowersQueryResult = ApolloReactCommon.QueryResult<CollectionFollowersQuery, CollectionFollowersQueryVariables>;\n\n\nexport interface CollectionFollowersQueryOperation {\n  operationName: 'collectionFollowers'\n  result: CollectionFollowersQuery\n  variables: CollectionFollowersQueryVariables\n  type: 'query'\n}\nexport const CollectionFollowersQueryName:CollectionFollowersQueryOperation['operationName'] = 'collectionFollowers'\n\nexport const CollectionFollowersQueryRefetch = (\n  variables:CollectionFollowersQueryVariables, \n  context?:any\n)=>({\n  query:CollectionFollowersDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../../graphql/types.generated';\n\nimport { UserPreviewFragment } from '../../../../HOC/modules/previews/user/UserPreview.generated';\nimport { FullPageInfoFragment } from '../../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../../@fragments/misc.generated';\nimport { UserPreviewFragmentDoc } from '../../../../HOC/modules/previews/user/UserPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type CommunityFollowersQueryVariables = {\n  communityId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type CommunityFollowersQuery = (\n  { __typename: 'RootQueryType' }\n  & { community: Types.Maybe<(\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id'>\n    & { followers: Types.Maybe<(\n      { __typename: 'FollowsPage' }\n      & Pick<Types.FollowsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n        & { creator: Types.Maybe<(\n          { __typename: 'User' }\n          & CommunityFollowerFragment\n        )> }\n      )> }\n    )> }\n  )> }\n);\n\nexport type CommunityFollowerFragment = (\n  { __typename: 'User' }\n  & UserPreviewFragment\n);\n\nexport const CommunityFollowerFragmentDoc = gql`\n    fragment CommunityFollower on User {\n  ...UserPreview\n}\n    ${UserPreviewFragmentDoc}`;\nexport const CommunityFollowersDocument = gql`\n    query communityFollowers($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: \"communityFollowers\", filter: [\"communityId\"]) {\n    id\n    followers(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        creator {\n          ...CommunityFollower\n        }\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CommunityFollowerFragmentDoc}`;\n\n/**\n * __useCommunityFollowersQuery__\n *\n * To run a query within a React component, call `useCommunityFollowersQuery` and pass it any options that fit your needs.\n * When your component renders, `useCommunityFollowersQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCommunityFollowersQuery({\n *   variables: {\n *      communityId: // value for 'communityId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useCommunityFollowersQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CommunityFollowersQuery, CommunityFollowersQueryVariables>) {\n        return ApolloReactHooks.useQuery<CommunityFollowersQuery, CommunityFollowersQueryVariables>(CommunityFollowersDocument, baseOptions);\n      }\nexport function useCommunityFollowersLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CommunityFollowersQuery, CommunityFollowersQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CommunityFollowersQuery, CommunityFollowersQueryVariables>(CommunityFollowersDocument, baseOptions);\n        }\nexport type CommunityFollowersQueryHookResult = ReturnType<typeof useCommunityFollowersQuery>;\nexport type CommunityFollowersLazyQueryHookResult = ReturnType<typeof useCommunityFollowersLazyQuery>;\nexport type CommunityFollowersQueryResult = ApolloReactCommon.QueryResult<CommunityFollowersQuery, CommunityFollowersQueryVariables>;\n\n\nexport interface CommunityFollowersQueryOperation {\n  operationName: 'communityFollowers'\n  result: CommunityFollowersQuery\n  variables: CommunityFollowersQueryVariables\n  type: 'query'\n}\nexport const CommunityFollowersQueryName:CommunityFollowersQueryOperation['operationName'] = 'communityFollowers'\n\nexport const CommunityFollowersQueryRefetch = (\n  variables:CommunityFollowersQueryVariables, \n  context?:any\n)=>({\n  query:CommunityFollowersDocument,\n  variables,\n  context\n})\n      \n","import Maybe from 'graphql/tsutils/Maybe';\n\nexport type WithExtraInfo<\n  GQLType extends Maybe<{ extraInfo?: any }>,\n  ExtraInfoType\n> = GQLType extends undefined | null\n  ? GQLType\n  : Omit<GQLType, 'extraInfo'> & { extraInfo?: Maybe<ExtraInfoType> };\nexport const withEncodedExtraInfo = <GQLType extends { extraInfo?: any }>(\n  gqlObj: GQLType,\n  olderGqlObj: Maybe<GQLType>\n): GQLType & { extraInfo?: string } => {\n  const newExtraInfo = gqlObj.extraInfo;\n  const isSomeNewExtraInfo = !!newExtraInfo;\n  if (!isSomeNewExtraInfo) {\n    return {\n      ...gqlObj,\n      extraInfo: void 0\n    };\n  }\n\n  const olderExtraInfo = olderGqlObj?.extraInfo;\n  const mergedExtraInfo = JSON.stringify({\n    ...olderExtraInfo,\n    ...gqlObj.extraInfo\n  });\n\n  return {\n    ...gqlObj,\n    extraInfo: mergedExtraInfo\n  };\n};\n","export type UrlString = string; //& { readonly _: unique symbol };\nexport const URL_REGEX = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const isUrlString = (_: any): _ is UrlString => 'string' === typeof _ && URL_REGEX.test(_);\n","import { UploadInput } from 'graphql/types.generated';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { UrlString, isUrlString } from 'fe/lib/helpers/data';\n\nexport const getMaybeUploadInput = (\n  maybeFileOrString: Maybe<File | string>,\n  currentUploadUrl: Maybe<string>\n): UploadInput | undefined =>\n  !maybeFileOrString ||\n  (isUrlString(maybeFileOrString) && maybeFileOrString === currentUploadUrl)\n    ? void 0\n    : maybeFileOrString instanceof File || isUrlString(maybeFileOrString)\n    ? getUploadInput(maybeFileOrString)\n    : void 0;\n\nexport const getUploadInput = (fileOrString: File | UrlString): UploadInput =>\n  isUrlString(fileOrString) ? { url: fileOrString } : { upload: fileOrString };\n","import { withEncodedExtraInfo, WithExtraInfo } from 'fe/lib/extraInfo/extraInfo';\nimport { mnCtx } from 'fe/lib/graphql/ctx';\nimport { LMSPrefs } from 'fe/lib/moodleLMS/LMSintegration';\nimport { getMaybeUploadInput } from 'fe/mutation/upload/getUploadInput';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { UpdateProfileInput } from 'graphql/types.generated';\nimport { useCallback, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport * as GQL from './me.generated';\n\ntype UserProfileExtraInfo = {\n  LMS?: LMSPrefs;\n};\n\nexport type UpdateProfileInputWithEI = WithExtraInfo<UpdateProfileInput, UserProfileExtraInfo>;\n\nexport interface UpdateProfile {\n  profile: UpdateProfileInputWithEI;\n  icon?: Maybe<File | string>;\n  image?: Maybe<File | string>;\n}\nexport const useMe = () => {\n  const meQ = GQL.useMeQuery({ context: mnCtx({ noShowError: true }) });\n  const [logoutMut, logoutStatus] = GQL.useMeLogoutMutation();\n  const [updateProfileMutation, updateProfileMutationStatus] = GQL.useMeUpdateMyProfileMutation();\n\n  const { push } = useHistory();\n  const me = meQ.data?.me;\n  const loading = meQ.loading;\n  const isAdmin = !!me?.isInstanceAdmin;\n  const logout = useCallback(async () => {\n    if (logoutStatus.loading || !me?.user) {\n      return;\n    }\n    return logoutMut({\n      update: proxy => {\n        proxy.writeQuery<GQL.MeQuery>({\n          data: {\n            __typename: 'RootQueryType',\n            me: null\n          },\n          query: GQL.MeDocument\n        });\n      }\n    }).finally(() => push('/login'));\n  }, [logoutStatus.loading, me, logoutMut, push]);\n\n  const updateProfile = useCallback(\n    async ({ icon, image, profile }: UpdateProfile) => {\n      if (updateProfileMutationStatus.loading || !me?.user) {\n        return;\n      }\n      return updateProfileMutation({\n        variables: {\n          profile: withEncodedExtraInfo(profile, me.user),\n          icon: getMaybeUploadInput(icon, me.user.icon?.url),\n          image: getMaybeUploadInput(image, me.user.image?.url)\n        },\n        context: mnCtx({ ctx: 'Profile update' })\n      });\n    },\n    [updateProfileMutation, me, updateProfileMutationStatus]\n  );\n\n  return useMemo(() => {\n    return {\n      me,\n      isAdmin,\n      logout,\n      loading,\n      updateProfile\n    };\n  }, [me, isAdmin, logout, loading, updateProfile]);\n};\n","import { KVStore, CreateKVStore } from './types';\n\ntype Type = 'session' | 'local';\nexport const SESSION: Type = 'session';\nexport const LOCAL: Type = 'local';\nexport const createLocalSessionKVStorage = (type: Type): CreateKVStore => (\n  prefix = ''\n): KVStore => {\n  const storage = type === 'local' ? localStorage : sessionStorage;\n  const pkey = (key: string) => `${prefix}${key}`;\n  const get: KVStore['get'] = key => parse(storage.getItem(pkey(key)), type, pkey(key));\n  const set: KVStore['set'] = (key, val) => storage.setItem(pkey(key), serialize(val));\n  const del: KVStore['del'] = key => {\n    const val = get(pkey(key));\n    storage.removeItem(pkey(key));\n    return val;\n  };\n  return {\n    get,\n    set,\n    del\n  };\n};\n\nconst parse = (str: string | null, type: Type, key: string): any => {\n  if (str === null) {\n    return null;\n  }\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    console.warn(`KVStore[${type}]#parse: could not parse ${str} at key [${key}]`);\n    return null;\n  }\n};\nconst serialize = (val: any) => JSON.stringify(val);\n","import { Settings } from 'luxon';\nimport { Catalog, Catalogs, I18n, setupI18n } from '@lingui/core';\nimport { I18nProvider } from '@lingui/react';\nimport React, { createContext, useEffect, useMemo, useState, useCallback } from 'react';\nimport { IS_DEV, LocaleDef, locales as available } from '../../mn-constants';\nimport { createLocalSessionKVStorage, LOCAL } from 'util/keyvaluestore/localSessionStorage';\nconst LOCALIZATION_STORE = 'LOCALIZATION';\nconst LOCALE_KEY = '#locale';\nconst kvstore = createLocalSessionKVStorage(LOCAL)(LOCALIZATION_STORE);\nexport type LocaleContextT = {\n  current: LocaleDef;\n  i18n: I18n;\n  available: LocaleDef[];\n  set(locale: LocaleDef): void;\n};\nconst getStoredLocaleCode = (): string | null => kvstore.get(LOCALE_KEY);\nconst setStoredLocaleCode = (localeCode: string): void => kvstore.set(LOCALE_KEY, localeCode);\n\nconst savedLangCode = getStoredLocaleCode();\nconst defaultLocale =\n  (savedLangCode && available.find(locale => locale.code === savedLangCode)) || available[0];\n\nexport const i18n = setupI18n({\n  locales: available.map(locale => locale.code)\n});\nexport const LocaleContext = createContext<LocaleContextT>({\n  current: defaultLocale,\n  i18n,\n  available,\n  set: () => void 0\n});\nexport const ProvideLocalizationCtx: React.FC = ({ children }) => {\n  const [current, setCurrent] = useState(defaultLocale);\n  const [catalogs, setCatalogs] = useState<Catalogs>({});\n  useEffect(() => {\n    setHTMLDirection(current.rtl);\n    if (catalogs[current.code]) {\n      return;\n    }\n    loadCatalog(current.code)\n      .then(cat => setCatalogs({ ...catalogs, [current.code]: cat }))\n      .catch(err => console.error(`Error loading Locale: ${current.code}`, err));\n  }, [catalogs, current]);\n\n  const set = useCallback(\n    (locale: LocaleDef) => {\n      setCurrent(locale);\n      const { code } = locale;\n      Settings.defaultLocale = code.split('_')[0];\n      setStoredLocaleCode(code);\n    },\n    [setCurrent]\n  );\n\n  const localeContextValue = useMemo<LocaleContextT>(\n    () => ({\n      current,\n      available,\n      i18n,\n      set\n    }),\n    [current, set]\n  );\n\n  return (\n    <I18nProvider i18n={i18n} language={current.code} catalogs={catalogs}>\n      <LocaleContext.Provider value={localeContextValue}>{children}</LocaleContext.Provider>\n    </I18nProvider>\n  );\n};\n\nconst loadCatalog = async (localeCode: string): Promise<Catalog> => {\n  if (IS_DEV) {\n    return import(\n      /* webpackMode: \"lazy\", webpackChunkName: \"i18n-[index]\" */\n      `@lingui/loader!../../locales/${localeCode}/messages.po`\n    );\n  } else {\n    return import(\n      /* webpackMode: \"lazy\", webpackChunkName: \"i18n-[index]\" */\n      `../../locales/${localeCode}/messages.js`\n    );\n  }\n};\n\nconst setHTMLDirection = (RTL: boolean) => {\n  const htmlEl = document.querySelector('html');\n  if (htmlEl) {\n    const dir = RTL ? 'rtl' : 'ltr';\n    htmlEl.style.direction = dir;\n    htmlEl.classList.remove('--rtl', '--ltr');\n    htmlEl.classList.add(`--${dir}`);\n  }\n};\n","import React, { FC } from 'react';\nimport styled from 'ui/themes/styled';\nimport { INSTANCE_TAGLINE } from 'mn-constants'; // + instance_bg_img\nimport { GRAPHQL_ENDPOINT } from 'mn-constants';\nimport { Link } from 'react-router-dom';\nimport { LocaleContext } from 'context/global/localizationCtx';\nimport { logo_large_url } from 'mn-constants';\nexport interface Props {\n  isHome?: boolean;\n}\n\nconst LogoContainer: FC<Props> = props => {\n  const { i18n } = React.useContext(LocaleContext);\n\n  return (\n    <Header>\n      {props.isHome ? (\n        <Logo />\n      ) : (\n        <Link to=\"/\">\n          <Logo />\n        </Link>\n      )}\n      <Tagline>{i18n._(INSTANCE_TAGLINE)}</Tagline>\n      <Tagline>{GRAPHQL_ENDPOINT}</Tagline>\n    </Header>\n  );\n};\n\nexport default LogoContainer;\n\nconst Header = styled.div`\n  grid-area: header;\n  text-align: center;\n`;\n\nconst Logo = styled.div`\n  background: url(\"${logo_large_url}\");\n  width: 300px;\n  display: inline-block;\n  height: 100px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n`;\n\nconst Tagline = styled.h5`\n  font-size: 16px;\n  margin-top: 8px;\n  margin-bottom: 40px;\n  color: #000000a1;\n  font-weight: 500;\n`;\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input } from '@rebass/forms';\nimport { LocaleContext } from 'context/global/localizationCtx';\nimport { instance_bg_img, INSTANCE_DESCRIPTION, INSTANCE_PROMPT } from 'mn-constants'; // + instance_bg_img\nimport * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Box, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\nimport LogoContainer from 'ui/elements/Logo';\nimport { Panel, WrapperPanel } from 'ui/elements/Panel';\nimport styled from 'ui/themes/styled';\n\nlet tt = {\n  login: i18nMark('Sign in'),\n  placeholders: {\n    email: i18nMark('Enter your email'),\n    password: i18nMark('Enter your password')\n  }\n};\n\nexport interface Props {\n  formik: FormikHook<LoginFormValues>;\n}\n\nexport interface LoginFormValues {\n  email: string;\n  password: string;\n}\n\nexport const Login: React.FC<Props> = ({ formik }) => {\n  const { i18n } = React.useContext(LocaleContext);\n\n  return (\n    <>\n      <Container>\n        <LoginWrapper>\n          <LogoContainer isHome={true} />\n          <FormWrapper>\n            <FormLogin>\n              <LoginForm>\n                <Box p={3}>\n                  <form onSubmit={formik.handleSubmit}>\n                    <Input\n                      placeholder={tt.placeholders.email}\n                      name=\"email\"\n                      value={formik.values.email}\n                      onChange={formik.handleChange}\n                    />\n                    <Spacer />\n                    <Input\n                      type=\"password\"\n                      placeholder={tt.placeholders.password}\n                      name=\"password\"\n                      value={formik.values.password}\n                      onChange={formik.handleChange}\n                    />\n                    <Button\n                      mt={3}\n                      variant=\"primary\"\n                      isSubmitting={formik.isSubmitting}\n                      isDisabled={formik.isSubmitting}\n                      type=\"submit\"\n                      style={{ width: '100%' }}\n                      // onClick={formik.submitForm}\n                    >\n                      <Trans>Sign in</Trans>\n                    </Button>\n                  </form>\n                </Box>\n              </LoginForm>\n              <ResetPass variant=\"text\" my={3} mt={2}>\n                <Link to=\"/reset\">\n                  <Trans>Trouble logging in?</Trans>\n                </Link>\n              </ResetPass>\n            </FormLogin>\n            <Or>\n              <Trans>Or</Trans>\n            </Or>\n            <Browse mt={3} p={3}>\n              <Text variant=\"heading\" fontSize={3}>\n                <Trans>Browse this instance</Trans>\n              </Text>\n              <Text variant=\"text\" mt={2}>\n                {i18n._(INSTANCE_PROMPT)}\n              </Text>\n              <Link to={'/discover'}>\n                <Button mt={3} variant=\"outline\">\n                  <Trans>Browse</Trans>\n                </Button>\n              </Link>\n            </Browse>\n          </FormWrapper>\n          <Right>\n            <Link to=\"signup\">\n              <Button\n                mb={2}\n                style={{ width: '100%', height: '50px' }}\n                variant=\"outline\"\n                // onClick={this.props.handleSignup}\n              >\n                <Trans>Sign up</Trans>\n              </Button>\n            </Link>\n            <WrapperPanel className=\"extra\">\n              <Panel>\n                <Background />\n                <Infos p={3}>\n                  <Info>\n                    <Text variant=\"suptitle\">\n                      <Trans>Instance description</Trans>\n                    </Text>\n                    <Text mt={2} variant=\"text\">\n                      {INSTANCE_DESCRIPTION}\n                    </Text>\n                  </Info>\n                </Infos>\n              </Panel>\n            </WrapperPanel>\n          </Right>\n        </LoginWrapper>\n      </Container>\n    </>\n  );\n};\n\nexport default Login;\n\nconst Background = styled(Box)`\n  background: url(\"${instance_bg_img}\");\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  padding: 50%;\n  width: 400px;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n`;\n\nconst Infos = styled(Box)``;\n\nconst Info = styled(Box)``;\n\nconst LoginWrapper = styled.div`\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr 1fr;\n  grid-template-areas: 'header header' 'form image' 'footer footer';\n  ${media.lessThan('medium')`\n    grid-template-columns: 1fr;\n    grid-template-areas: 'header' 'image' 'form' 'footer';\n    padding: 16px\n  `};\n`;\n\nconst Container = styled.div`\n  margin: 0 auto;\n  max-width: 900px;\n  margin-top: 60px;\n  padding-bottom: 50px;\n`;\n\nconst FormWrapper = styled.div`\n  grid-area: form;\n`;\n\nconst FormLogin = styled.div`\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 4px;\n  height: inherit;\n  border: 1px solid #dddfe2;\n  text-align: left;\n  height: fit-content;\n`;\n\nconst Right = styled(Box)`\n  .extra {\n    width: 100%;\n    margin-left: 0px;\n  }\n  a {\n    text-decoration: none;\n    color: inherit;\n  }\n`;\n\nconst Browse = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  a {\n    text-decoration: none;\n    color: ${props => props.theme.colors.mediumdark};\n    button {\n      color: ${props => props.theme.colors.mediumdark} !important;\n    }\n  }\n`;\n\nconst Or = styled.div`\n  position: relative;\n  color: rgba(0, 0, 0, 0.5);\n  text-align: center;\n  margin-top: 24px;\n  &:before {\n    position: absolute;\n    content: '';\n    width: calc(50% - 24px);\n    left: 0;\n    top: 8px;\n    height: 1px;\n    display: block;\n    background: rgba(0, 0, 0, 0.45);\n  }\n  &:after {\n    position: absolute;\n    content: '';\n    width: calc(50% - 24px);\n    right: 0;\n    top: 8px;\n    height: 1px;\n    display: block;\n    background: rgba(0, 0, 0, 0.45);\n  }\n`;\n\nconst ResetPass = styled(Text)`\n  text-align: center;\n  text-decoration: underline;\n  cursor: pointer;\n  a {\n    font-size: 14px;\n    color: inherit;\n  }\n`;\n\nconst LoginForm = styled.div`\n  margin: 0;\n  margin-bottom: 16px;\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n`;\n\nconst Spacer = styled.div`\n  width: 10px;\n  height: 10px;\n`;\n","import { DataProxy } from 'apollo-cache';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { RegistrationInput } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport { useApolloClient } from 'react-apollo';\nimport * as GQL from './anon.generated';\nimport { MeDocument, MeQuery, UseMeDataFragment } from './me.generated';\nimport { mnCtx } from 'fe/lib/graphql/ctx';\n\nexport const useAnon = () => {\n  const client = useApolloClient();\n  const [loginMut, loginStatus] = GQL.useAnonLoginMutation();\n  const [resetPwdMut, resetPwdStatus] = GQL.useAnonResetPasswordMutation();\n  const [\n    confirmEmailMut,\n    confirmEmailStatus\n  ] = GQL.useAnonConfirmEmailMutation();\n  const [signUpMut, signUpStatus] = GQL.useAnonSignUpMutation();\n  //  const [usernameAvailableQ, usernameAvailableStatus] = GQL.useAnonUsernameAvailableLazyQuery();\n  const [\n    resetPwdReqMut,\n    resetPwdReqStatus\n  ] = GQL.useAnonResetPasswordRequestMutation();\n  return useMemo(() => {\n    const resetPwd = ({\n      password,\n      token\n    }: {\n      token: string;\n      password: string;\n    }) => {\n      if (resetPwdStatus.loading) {\n        return;\n      }\n      return resetPwdMut({\n        variables: { password, token },\n        update: (proxy, resp) => updateMe(proxy, resp.data?.resetPassword?.me)\n      });\n    };\n\n    const confirmEmail = (token: string) => {\n      if (confirmEmailStatus.loading) {\n        return;\n      }\n      return confirmEmailMut({\n        variables: { token },\n        update: (proxy, resp) => updateMe(proxy, resp.data?.confirmEmail?.me)\n      });\n    };\n\n    const signUp = (registration: RegistrationInput) => {\n      if (signUpStatus.loading) {\n        return;\n      }\n      return signUpMut({\n        variables: { registration },\n        update: (proxy, resp) => updateMe(proxy, resp.data?.createUser)\n      });\n    };\n\n    const resetPwdReq = (email: string) => {\n      if (resetPwdReqStatus.loading) {\n        return;\n      }\n      return resetPwdReqMut({\n        variables: { email }\n      });\n    };\n\n    const login = (email: string, password: string) => {\n      if (loginStatus.loading) {\n        return;\n      }\n      return loginMut({\n        variables: { email, password },\n        context: mnCtx({ ctx: 'Login' }),\n        update: (proxy, resp) => updateMe(proxy, resp.data?.createSession?.me)\n      });\n    };\n    const usernameAvailable = (username: string) => {\n      return client\n        .query<\n          GQL.AnonUsernameAvailableQuery,\n          GQL.AnonUsernameAvailableQueryVariables\n        >({\n          query: GQL.AnonUsernameAvailableDocument,\n          variables: { username }\n        })\n        .then(_ => _.data.usernameAvailable);\n    };\n\n    return {\n      login,\n      loginStatus,\n\n      resetPwdReq,\n      resetPwdReqStatus,\n\n      confirmEmail,\n      confirmEmailStatus,\n\n      signUp,\n      signUpStatus,\n\n      resetPwd,\n      resetPwdStatus,\n\n      usernameAvailable\n    };\n  }, [\n    signUpStatus,\n    signUpMut,\n    confirmEmailMut,\n    confirmEmailStatus,\n    loginMut,\n    loginStatus,\n    resetPwdMut,\n    resetPwdStatus,\n    resetPwdReqMut,\n    resetPwdReqStatus,\n    client\n  ]);\n};\n\nconst updateMe = (proxy: DataProxy, me: Maybe<UseMeDataFragment>) => {\n  proxy.writeQuery<MeQuery>({\n    query: MeDocument,\n    data: {\n      __typename: 'RootQueryType',\n      me: me\n        ? {\n            __typename: 'Me' as 'Me',\n            ...me,\n            user: {\n              __typename: 'User' as 'User',\n              ...me.user\n            }\n          }\n        : null\n    }\n  });\n};\n","import { APP_NAME } from 'mn-constants';\nimport React, { createContext, useContext, useMemo, useState, useCallback, useEffect } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { LocaleContext } from './localizationCtx';\nimport { MessageDescriptor } from '@lingui/core';\n\ntype SubTitleDescOrFalse = MessageDescriptor | false;\ntype SubTitle = string | undefined;\nexport interface PageCtx {\n  setTitle(subTitle: SubTitleDescOrFalse, values?: any): void;\n}\nexport const PageCtx = createContext<PageCtx>({ setTitle: _ => _ });\nexport const ProvidePageCtx: React.FC = ({ children }) => {\n  const { i18n } = useContext(LocaleContext);\n  const [subTitle, setSubTitle] = useState<SubTitle>();\n  const setTitle = useCallback<PageCtx['setTitle']>(\n    (subTitleToSet, values) => {\n      const nextSubTitle = subTitleToSet === false ? void 0 : i18n._({ ...subTitleToSet, values });\n      if (nextSubTitle === subTitle) {\n        return;\n      }\n      setSubTitle(nextSubTitle);\n    },\n    [i18n, subTitle]\n  );\n\n  const ctx = useMemo<PageCtx>(\n    () => ({\n      setTitle\n    }),\n    [setTitle]\n  );\n  const title = subTitle ? `${APP_NAME} - ${subTitle}` : APP_NAME;\n  //console.table({ title, subTitle });\n  return (\n    <PageCtx.Provider value={ctx}>\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      {children}\n    </PageCtx.Provider>\n  );\n};\n\nexport const usePageTitle = (subTitle: SubTitleDescOrFalse, values?: any) => {\n  const { setTitle } = useContext(PageCtx);\n  // https://reactjs.org/blog/2020/02/26/react-v16.13.0.html#warnings-for-some-updates-during-render\n  useEffect(() => {\n    setTitle(subTitle, values);\n  }, [setTitle, subTitle, values]);\n};\n","import { useFormik } from 'formik';\nimport React, { FC } from 'react';\nimport Login, { LoginFormValues } from 'ui/pages/login';\nimport * as Yup from 'yup';\nimport { useAnon } from 'fe/session/useAnon';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n\nexport const validationSchema: Yup.ObjectSchema<LoginFormValues> = Yup.object<LoginFormValues>({\n  email: Yup.string()\n    .max(50)\n    .required(),\n  password: Yup.string()\n    .max(50)\n    .required()\n});\nexport interface Props {}\n\nconst loginPageTitle = t`Login`;\n\nexport const LoginPageHOC: FC<Props> = () => {\n  usePageTitle(loginPageTitle);\n  const { login } = useAnon();\n  const formik = useFormik<LoginFormValues>({\n    initialValues: {\n      email: '',\n      password: ''\n    },\n    enableReinitialize: true,\n    onSubmit: ({ email, password }) => login(email, password),\n    validationSchema\n  });\n  return <Login formik={formik} />;\n};\n","import React, { createContext, FC, useMemo, useReducer } from 'react';\n\nexport interface SideBarContext {\n  isOpen: boolean;\n  toggleOpen(): unknown;\n}\nexport const SideBarContext = createContext<SideBarContext>({\n  isOpen: true,\n  toggleOpen: () => true\n});\nexport const ProvideSideBarContext: FC = ({ children }) => {\n  const [isOpen, toggleOpen] = useReducer(is => !is, true);\n  const ctx = useMemo<SideBarContext>(\n    () => ({\n      isOpen,\n      toggleOpen\n    }),\n    [isOpen, toggleOpen]\n  );\n  return <SideBarContext.Provider value={ctx}>{children}</SideBarContext.Provider>;\n};\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { CommunityInfoFragment } from '../community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityInfoFragmentDoc } from '../community/CommunityPreview.generated';\n\n\nexport type ResourcePreviewFragment = (\n  { __typename: 'Resource' }\n  & Pick<Types.Resource, 'id' | 'name' | 'summary' | 'canonicalUrl' | 'license'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, payload: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'mediaType' | 'url'>\n    & { mirror: Types.Maybe<(\n      { __typename: 'ContentMirror' }\n      & Pick<Types.ContentMirror, 'url'>\n    )>, upload: Types.Maybe<(\n      { __typename: 'ContentUpload' }\n      & Pick<Types.ContentUpload, 'size'>\n    )> }\n  )>, myLike: Types.Maybe<(\n    { __typename: 'Like' }\n    & Pick<Types.Like, 'id'>\n  )>, myFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  )>, likers: Types.Maybe<(\n    { __typename: 'LikesPage' }\n    & Pick<Types.LikesPage, 'totalCount'>\n  )>, collection: Types.Maybe<(\n    { __typename: 'Collection' }\n    & Pick<Types.Collection, 'id' | 'name' | 'preferredUsername' | 'canonicalUrl' | 'summary'>\n    & { icon: Types.Maybe<(\n      { __typename: 'Content' }\n      & Pick<Types.Content, 'id' | 'url'>\n    )>, community: Types.Maybe<(\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id'>\n      & CommunityInfoFragment\n    )> }\n  )> }\n);\n\nexport const ResourcePreviewFragmentDoc = gql`\n    fragment ResourcePreview on Resource {\n  id\n  icon {\n    id\n    url\n  }\n  name\n  summary\n  canonicalUrl\n  payload: content {\n    id\n    mediaType\n    mirror {\n      url\n    }\n    upload {\n      size\n    }\n    url\n  }\n  myLike {\n    id\n  }\n  myFlag {\n    id\n  }\n  likers {\n    totalCount\n  }\n  collection {\n    id\n    name\n    preferredUsername\n    canonicalUrl\n    icon {\n      id\n      url\n    }\n    summary\n    community {\n      id\n      ...CommunityInfo\n    }\n  }\n  license\n}\n    ${CommunityInfoFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { CommunityPreviewFragment } from '../community/CommunityPreview.generated';\nimport { ResourcePreviewFragment } from '../resource/ResourcePreview.generated';\nimport { CollectionPreviewFragment } from '../collection/CollectionPreview.generated';\nimport { CommunityInfoFragment } from '../community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityInfoFragmentDoc } from '../community/CommunityPreview.generated';\nimport { CollectionPreviewFragmentDoc } from '../collection/CollectionPreview.generated';\nimport { ResourcePreviewFragmentDoc } from '../resource/ResourcePreview.generated';\nimport { CommunityPreviewFragmentDoc } from '../community/CommunityPreview.generated';\n\n\n\n\n\nexport type CommentPreviewFragment = (\n  { __typename: 'Comment' }\n  & Pick<Types.Comment, 'id' | 'likerCount'>\n  & { inReplyTo: Types.Maybe<(\n    { __typename: 'Comment' }\n    & CommentPreviewBaseFragment\n  )>, myLike: Types.Maybe<(\n    { __typename: 'Like' }\n    & Pick<Types.Like, 'id'>\n  )>, myFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  )>, thread: Types.Maybe<(\n    { __typename: 'Thread' }\n    & Pick<Types.Thread, 'id'>\n    & { comments: Types.Maybe<(\n      { __typename: 'CommentsPage' }\n      & { edges: Array<(\n        { __typename: 'Comment' }\n        & CommentPreviewBaseFragment\n      )> }\n    )>, context: Types.Maybe<(\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id'>\n      & { community: Types.Maybe<(\n        { __typename: 'Community' }\n        & Pick<Types.Community, 'id'>\n        & CommunityInfoFragment\n      )> }\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id'>\n      & CommunityInfoFragment\n    ) | (\n      { __typename: 'Flag' }\n      & Pick<Types.Flag, 'id'>\n    ) | (\n      { __typename: 'Resource' }\n      & Pick<Types.Resource, 'id'>\n      & { collection: Types.Maybe<(\n        { __typename: 'Collection' }\n        & Pick<Types.Collection, 'id'>\n        & { community: Types.Maybe<(\n          { __typename: 'Community' }\n          & Pick<Types.Community, 'id'>\n          & CommunityInfoFragment\n        )> }\n      )> }\n    )> }\n  )> }\n  & CommentPreviewBaseFragment\n);\n\nexport type CommentPreviewBaseFragment = (\n  { __typename: 'Comment' }\n  & Pick<Types.Comment, 'id' | 'isLocal' | 'content' | 'canonicalUrl' | 'createdAt'>\n  & { creator: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'canonicalUrl'>\n    & { userId: Types.User['id'], userName: Types.User['name'] }\n    & { icon: Types.Maybe<(\n      { __typename: 'Content' }\n      & Pick<Types.Content, 'id' | 'url'>\n    )>, image: Types.Maybe<(\n      { __typename: 'Content' }\n      & Pick<Types.Content, 'id' | 'url'>\n    )> }\n  )> }\n);\n\nexport type CommentPreviewThreadFragment = (\n  { __typename: 'Thread' }\n  & Pick<Types.Thread, 'id' | 'isLocal' | 'canonicalUrl'>\n  & { context: Types.Maybe<(\n    { __typename: 'Collection' }\n    & CollectionPreviewFragment\n  ) | (\n    { __typename: 'Community' }\n    & CommunityPreviewFragment\n  ) | { __typename: 'Flag' } | (\n    { __typename: 'Resource' }\n    & ResourcePreviewFragment\n  )> }\n);\n\nexport const CommentPreviewBaseFragmentDoc = gql`\n    fragment CommentPreviewBase on Comment {\n  id\n  isLocal\n  content\n  canonicalUrl\n  createdAt\n  creator {\n    icon {\n      id\n      url\n    }\n    image {\n      id\n      url\n    }\n    userId: id\n    userName: name\n    canonicalUrl\n  }\n}\n    `;\nexport const CommentPreviewFragmentDoc = gql`\n    fragment CommentPreview on Comment {\n  ...CommentPreviewBase\n  id\n  inReplyTo {\n    ...CommentPreviewBase\n  }\n  likerCount\n  myLike {\n    id\n  }\n  myFlag {\n    id\n  }\n  thread {\n    id\n    comments(limit: 1) {\n      edges {\n        ...CommentPreviewBase\n      }\n    }\n    context {\n      ... on Flag {\n        id\n      }\n      ... on Community {\n        id\n        ...CommunityInfo\n      }\n      ... on Collection {\n        id\n        community {\n          id\n          ...CommunityInfo\n        }\n      }\n      ... on Resource {\n        id\n        collection {\n          id\n          community {\n            id\n            ...CommunityInfo\n          }\n        }\n      }\n    }\n  }\n}\n    ${CommentPreviewBaseFragmentDoc}\n${CommunityInfoFragmentDoc}`;\nexport const CommentPreviewThreadFragmentDoc = gql`\n    fragment CommentPreviewThread on Thread {\n  id\n  isLocal\n  canonicalUrl\n  context {\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on Community {\n      ...CommunityPreview\n    }\n  }\n}\n    ${CollectionPreviewFragmentDoc}\n${ResourcePreviewFragmentDoc}\n${CommunityPreviewFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { CommentPreviewFragment } from '../comment/CommentPreview.generated';\nimport { ResourcePreviewFragment } from '../resource/ResourcePreview.generated';\nimport { CollectionPreviewFragment } from '../collection/CollectionPreview.generated';\nimport { CommunityPreviewFragment } from '../community/CommunityPreview.generated';\nimport { UserPreviewFragment } from '../user/UserPreview.generated';\nimport gql from 'graphql-tag';\nimport { UserPreviewFragmentDoc } from '../user/UserPreview.generated';\nimport { CommunityPreviewFragmentDoc } from '../community/CommunityPreview.generated';\nimport { CollectionPreviewFragmentDoc } from '../collection/CollectionPreview.generated';\nimport { ResourcePreviewFragmentDoc } from '../resource/ResourcePreview.generated';\nimport { CommentPreviewFragmentDoc } from '../comment/CommentPreview.generated';\n\n\n\n\n\n\nexport type FlagPreviewFragment = (\n  { __typename: 'Flag' }\n  & Pick<Types.Flag, 'id' | 'message' | 'isResolved' | 'createdAt'>\n  & { creator: Types.Maybe<(\n    { __typename: 'User' }\n    & UserPreviewFragment\n  )>, context: (\n    { __typename: 'Collection' }\n    & CollectionPreviewFragment\n  ) | (\n    { __typename: 'Comment' }\n    & CommentPreviewFragment\n  ) | (\n    { __typename: 'Community' }\n    & CommunityPreviewFragment\n  ) | (\n    { __typename: 'Resource' }\n    & ResourcePreviewFragment\n  ) | (\n    { __typename: 'User' }\n    & UserPreviewFragment\n  ) }\n);\n\nexport const FlagPreviewFragmentDoc = gql`\n    fragment FlagPreview on Flag {\n  id\n  message\n  isResolved\n  creator {\n    ...UserPreview\n  }\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n  }\n}\n    ${UserPreviewFragmentDoc}\n${CommunityPreviewFragmentDoc}\n${CollectionPreviewFragmentDoc}\n${ResourcePreviewFragmentDoc}\n${CommentPreviewFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { CommentPreviewFragment } from '../comment/CommentPreview.generated';\nimport { UserPreviewFragment } from '../user/UserPreview.generated';\nimport { ResourcePreviewFragment } from '../resource/ResourcePreview.generated';\nimport { CollectionPreviewFragment } from '../collection/CollectionPreview.generated';\nimport { CommunityPreviewFragment } from '../community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityPreviewFragmentDoc } from '../community/CommunityPreview.generated';\nimport { CollectionPreviewFragmentDoc } from '../collection/CollectionPreview.generated';\nimport { ResourcePreviewFragmentDoc } from '../resource/ResourcePreview.generated';\nimport { UserPreviewFragmentDoc } from '../user/UserPreview.generated';\nimport { CommentPreviewFragmentDoc } from '../comment/CommentPreview.generated';\n\n\n\n\n\n\nexport type LikePreviewFragment = (\n  { __typename: 'Like' }\n  & Pick<Types.Like, 'id' | 'createdAt'>\n  & { context: (\n    { __typename: 'Collection' }\n    & CollectionPreviewFragment\n  ) | (\n    { __typename: 'Comment' }\n    & CommentPreviewFragment\n  ) | (\n    { __typename: 'Community' }\n    & CommunityPreviewFragment\n  ) | (\n    { __typename: 'Resource' }\n    & ResourcePreviewFragment\n  ) | (\n    { __typename: 'User' }\n    & UserPreviewFragment\n  ) }\n);\n\nexport const LikePreviewFragmentDoc = gql`\n    fragment LikePreview on Like {\n  id\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n  }\n}\n    ${CommunityPreviewFragmentDoc}\n${CollectionPreviewFragmentDoc}\n${ResourcePreviewFragmentDoc}\n${UserPreviewFragmentDoc}\n${CommentPreviewFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { FlagPreviewFragment } from '../flag/FlagPreview.generated';\nimport { ResourcePreviewFragment } from '../resource/ResourcePreview.generated';\nimport { CollectionPreviewFragment } from '../collection/CollectionPreview.generated';\nimport { CommunityPreviewFragment } from '../community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityPreviewFragmentDoc } from '../community/CommunityPreview.generated';\nimport { CollectionPreviewFragmentDoc } from '../collection/CollectionPreview.generated';\nimport { ResourcePreviewFragmentDoc } from '../resource/ResourcePreview.generated';\nimport { FlagPreviewFragmentDoc } from '../flag/FlagPreview.generated';\nimport { CommentPreviewFragment, CommentPreviewFragmentDoc } from '../comment/CommentPreview.generated';\n\n\n\n\n\nexport type ThreadPreviewFragment = (\n  { __typename: 'Thread' }\n  & Pick<Types.Thread, 'id' | 'lastActivity' | 'createdAt'>\n  & { context: Types.Maybe<(\n    { __typename: 'Collection' }\n    & CollectionPreviewFragment\n  ) | (\n    { __typename: 'Community' }\n    & CommunityPreviewFragment\n  ) | (\n    { __typename: 'Flag' }\n    & FlagPreviewFragment\n  ) | (\n    { __typename: 'Resource' }\n    & ResourcePreviewFragment\n  )>, comments: Types.Maybe<(\n    { __typename: 'CommentsPage' }\n    & Pick<Types.CommentsPage, 'totalCount'>\n    & { edges: Array<(\n      { __typename: 'Comment' }\n      & CommentPreviewFragment\n    )> }\n  )> }\n);\n\nexport const ThreadPreviewFragmentDoc = gql`\n    fragment ThreadPreview on Thread {\n  id\n  lastActivity\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on Flag {\n      ...FlagPreview\n    }\n  }\n  comments(limit: 1) {\n    totalCount\n    edges {\n      ...CommentPreview\n    }\n  }\n}\n    ${CommunityPreviewFragmentDoc}\n${CollectionPreviewFragmentDoc}\n${ResourcePreviewFragmentDoc}\n${FlagPreviewFragmentDoc}\n${CommentPreviewFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { ThreadPreviewFragment } from '../thread/ThreadPreview.generated';\nimport { UserPreviewFragment } from '../user/UserPreview.generated';\nimport { CollectionPreviewFragment } from '../collection/CollectionPreview.generated';\nimport { CommunityPreviewFragment } from '../community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityPreviewFragmentDoc } from '../community/CommunityPreview.generated';\nimport { CollectionPreviewFragmentDoc } from '../collection/CollectionPreview.generated';\nimport { UserPreviewFragmentDoc } from '../user/UserPreview.generated';\nimport { ThreadPreviewFragmentDoc } from '../thread/ThreadPreview.generated';\n\n\n\n\n\nexport type FollowPreviewFragment = (\n  { __typename: 'Follow' }\n  & Pick<Types.Follow, 'id'>\n  & { context: (\n    { __typename: 'Collection' }\n    & CollectionPreviewFragment\n  ) | (\n    { __typename: 'Community' }\n    & CommunityPreviewFragment\n  ) | (\n    { __typename: 'Thread' }\n    & ThreadPreviewFragment\n  ) | (\n    { __typename: 'User' }\n    & UserPreviewFragment\n  ) }\n);\n\nexport const FollowPreviewFragmentDoc = gql`\n    fragment FollowPreview on Follow {\n  id\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Thread {\n      ...ThreadPreview\n    }\n  }\n}\n    ${CommunityPreviewFragmentDoc}\n${CollectionPreviewFragmentDoc}\n${UserPreviewFragmentDoc}\n${ThreadPreviewFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { FollowPreviewFragment } from '../follow/FollowPreview.generated';\nimport { LikePreviewFragment } from '../like/LikePreview.generated';\nimport { FlagPreviewFragment } from '../flag/FlagPreview.generated';\nimport { CommentPreviewFragment } from '../comment/CommentPreview.generated';\nimport { UserPreviewFragment } from '../user/UserPreview.generated';\nimport { ResourcePreviewFragment } from '../resource/ResourcePreview.generated';\nimport { CollectionPreviewFragment } from '../collection/CollectionPreview.generated';\nimport { CommunityPreviewFragment } from '../community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityPreviewFragmentDoc } from '../community/CommunityPreview.generated';\nimport { CollectionPreviewFragmentDoc } from '../collection/CollectionPreview.generated';\nimport { ResourcePreviewFragmentDoc } from '../resource/ResourcePreview.generated';\nimport { UserPreviewFragmentDoc } from '../user/UserPreview.generated';\nimport { CommentPreviewFragmentDoc } from '../comment/CommentPreview.generated';\nimport { FlagPreviewFragmentDoc } from '../flag/FlagPreview.generated';\nimport { LikePreviewFragmentDoc } from '../like/LikePreview.generated';\nimport { FollowPreviewFragmentDoc } from '../follow/FollowPreview.generated';\n\n\n\n\n\n\n\n\n\nexport type ActivityPreviewFragment = (\n  { __typename: 'Activity' }\n  & Pick<Types.Activity, 'id' | 'verb' | 'createdAt'>\n  & { user: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'canonicalUrl'>\n    & { userId: Types.User['id'], userName: Types.User['name'] }\n    & { icon: Types.Maybe<(\n      { __typename: 'Content' }\n      & Pick<Types.Content, 'id' | 'url'>\n    )>, image: Types.Maybe<(\n      { __typename: 'Content' }\n      & Pick<Types.Content, 'id' | 'url'>\n    )> }\n  )>, context: Types.Maybe<(\n    { __typename: 'Collection' }\n    & CollectionPreviewFragment\n  ) | (\n    { __typename: 'Comment' }\n    & CommentPreviewFragment\n  ) | (\n    { __typename: 'Community' }\n    & CommunityPreviewFragment\n  ) | (\n    { __typename: 'Flag' }\n    & FlagPreviewFragment\n  ) | (\n    { __typename: 'Follow' }\n    & FollowPreviewFragment\n  ) | (\n    { __typename: 'Like' }\n    & LikePreviewFragment\n  ) | (\n    { __typename: 'Resource' }\n    & ResourcePreviewFragment\n  ) | (\n    { __typename: 'User' }\n    & UserPreviewFragment\n  )> }\n);\n\nexport const ActivityPreviewFragmentDoc = gql`\n    fragment ActivityPreview on Activity {\n  id\n  verb\n  createdAt\n  user {\n    icon {\n      id\n      url\n    }\n    image {\n      id\n      url\n    }\n    userId: id\n    userName: name\n    canonicalUrl\n  }\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n    ... on Flag {\n      ...FlagPreview\n    }\n    ... on Like {\n      ...LikePreview\n    }\n    ... on Follow {\n      ...FollowPreview\n    }\n  }\n}\n    ${CommunityPreviewFragmentDoc}\n${CollectionPreviewFragmentDoc}\n${ResourcePreviewFragmentDoc}\n${UserPreviewFragmentDoc}\n${CommentPreviewFragmentDoc}\n${FlagPreviewFragmentDoc}\n${LikePreviewFragmentDoc}\n${FollowPreviewFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { ActivityPreviewFragment } from '../../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport { FullPageInfoFragment } from '../../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../../@fragments/misc.generated';\nimport { ActivityPreviewFragmentDoc } from '../../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type InstanceOutboxActivitiesQueryVariables = {\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  limit?: Types.Maybe<Types.Scalars['Int']>\n};\n\n\nexport type InstanceOutboxActivitiesQuery = (\n  { __typename: 'RootQueryType' }\n  & { instance: Types.Maybe<(\n    { __typename: 'Instance' }\n    & { outbox: Types.Maybe<(\n      { __typename: 'ActivitiesPage' }\n      & Pick<Types.ActivitiesPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Activity' }\n        & InstanceOutboxActivityFragment\n      )> }\n    )> }\n  )> }\n);\n\nexport type InstanceOutboxActivityFragment = (\n  { __typename: 'Activity' }\n  & ActivityPreviewFragment\n);\n\nexport const InstanceOutboxActivityFragmentDoc = gql`\n    fragment InstanceOutboxActivity on Activity {\n  ...ActivityPreview\n}\n    ${ActivityPreviewFragmentDoc}`;\nexport const InstanceOutboxActivitiesDocument = gql`\n    query instanceOutboxActivities($after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  instance @connection(key: \"instanceOutboxActivities\") {\n    outbox(after: $after, before: $before, limit: $limit) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...InstanceOutboxActivity\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${InstanceOutboxActivityFragmentDoc}`;\n\n/**\n * __useInstanceOutboxActivitiesQuery__\n *\n * To run a query within a React component, call `useInstanceOutboxActivitiesQuery` and pass it any options that fit your needs.\n * When your component renders, `useInstanceOutboxActivitiesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useInstanceOutboxActivitiesQuery({\n *   variables: {\n *      after: // value for 'after'\n *      before: // value for 'before'\n *      limit: // value for 'limit'\n *   },\n * });\n */\nexport function useInstanceOutboxActivitiesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<InstanceOutboxActivitiesQuery, InstanceOutboxActivitiesQueryVariables>) {\n        return ApolloReactHooks.useQuery<InstanceOutboxActivitiesQuery, InstanceOutboxActivitiesQueryVariables>(InstanceOutboxActivitiesDocument, baseOptions);\n      }\nexport function useInstanceOutboxActivitiesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<InstanceOutboxActivitiesQuery, InstanceOutboxActivitiesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<InstanceOutboxActivitiesQuery, InstanceOutboxActivitiesQueryVariables>(InstanceOutboxActivitiesDocument, baseOptions);\n        }\nexport type InstanceOutboxActivitiesQueryHookResult = ReturnType<typeof useInstanceOutboxActivitiesQuery>;\nexport type InstanceOutboxActivitiesLazyQueryHookResult = ReturnType<typeof useInstanceOutboxActivitiesLazyQuery>;\nexport type InstanceOutboxActivitiesQueryResult = ApolloReactCommon.QueryResult<InstanceOutboxActivitiesQuery, InstanceOutboxActivitiesQueryVariables>;\n\n\nexport interface InstanceOutboxActivitiesQueryOperation {\n  operationName: 'instanceOutboxActivities'\n  result: InstanceOutboxActivitiesQuery\n  variables: InstanceOutboxActivitiesQueryVariables\n  type: 'query'\n}\nexport const InstanceOutboxActivitiesQueryName:InstanceOutboxActivitiesQueryOperation['operationName'] = 'instanceOutboxActivities'\n\nexport const InstanceOutboxActivitiesQueryRefetch = (\n  variables:InstanceOutboxActivitiesQueryVariables, \n  context?:any\n)=>({\n  query:InstanceOutboxActivitiesDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport { CommunityPreviewFragment } from '../../../HOC/modules/previews/community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityPreviewFragmentDoc } from '../../../HOC/modules/previews/community/CommunityPreview.generated';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type AllCommunitiesQueryVariables = {\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type AllCommunitiesQuery = (\n  { __typename: 'RootQueryType' }\n  & { communities: (\n    { __typename: 'CommunitiesPage' }\n    & Pick<Types.CommunitiesPage, 'totalCount'>\n    & { edges: Array<(\n      { __typename: 'Community' }\n      & CommunityPreviewFragment\n    )>, pageInfo: (\n      { __typename: 'PageInfo' }\n      & FullPageInfoFragment\n    ) }\n  ) }\n);\n\n\nexport const AllCommunitiesDocument = gql`\n    query allCommunities($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  communities(limit: $limit, before: $before, after: $after) @connection(key: \"allCommunities\") {\n    edges {\n      ...CommunityPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ${CommunityPreviewFragmentDoc}\n${FullPageInfoFragmentDoc}`;\n\n/**\n * __useAllCommunitiesQuery__\n *\n * To run a query within a React component, call `useAllCommunitiesQuery` and pass it any options that fit your needs.\n * When your component renders, `useAllCommunitiesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useAllCommunitiesQuery({\n *   variables: {\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useAllCommunitiesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<AllCommunitiesQuery, AllCommunitiesQueryVariables>) {\n        return ApolloReactHooks.useQuery<AllCommunitiesQuery, AllCommunitiesQueryVariables>(AllCommunitiesDocument, baseOptions);\n      }\nexport function useAllCommunitiesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<AllCommunitiesQuery, AllCommunitiesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<AllCommunitiesQuery, AllCommunitiesQueryVariables>(AllCommunitiesDocument, baseOptions);\n        }\nexport type AllCommunitiesQueryHookResult = ReturnType<typeof useAllCommunitiesQuery>;\nexport type AllCommunitiesLazyQueryHookResult = ReturnType<typeof useAllCommunitiesLazyQuery>;\nexport type AllCommunitiesQueryResult = ApolloReactCommon.QueryResult<AllCommunitiesQuery, AllCommunitiesQueryVariables>;\n\n\nexport interface AllCommunitiesQueryOperation {\n  operationName: 'allCommunities'\n  result: AllCommunitiesQuery\n  variables: AllCommunitiesQueryVariables\n  type: 'query'\n}\nexport const AllCommunitiesQueryName:AllCommunitiesQueryOperation['operationName'] = 'allCommunities'\n\nexport const AllCommunitiesQueryRefetch = (\n  variables:AllCommunitiesQueryVariables, \n  context?:any\n)=>({\n  query:AllCommunitiesDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type HeroCommunityDataFragment = (\n  { __typename: 'Community' }\n  & Pick<Types.Community, 'id' | 'displayUsername' | 'name' | 'summary' | 'followerCount'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, myFollow: Types.Maybe<(\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  )>, myFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  )>, creator: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n  )> }\n);\n\nexport type HeroCommunityMeDataFragment = (\n  { __typename: 'Me' }\n  & { user: (\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n  ) }\n);\n\nexport const HeroCommunityDataFragmentDoc = gql`\n    fragment HeroCommunityData on Community {\n  id\n  displayUsername\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  followerCount\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  creator {\n    id\n  }\n}\n    `;\nexport const HeroCommunityMeDataFragmentDoc = gql`\n    fragment HeroCommunityMeData on Me {\n  user {\n    id\n  }\n}\n    `;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { ActivityPreviewFragment } from '../../modules/previews/activity/ActivityPreview.generated';\nimport { ThreadPreviewFragment } from '../../modules/previews/thread/ThreadPreview.generated';\nimport { HeroCommunityDataFragment } from '../../modules/HeroCommunity/HeroCommunity.generated';\nimport gql from 'graphql-tag';\nimport { HeroCommunityDataFragmentDoc } from '../../modules/HeroCommunity/HeroCommunity.generated';\nimport { ThreadPreviewFragmentDoc } from '../../modules/previews/thread/ThreadPreview.generated';\nimport { ActivityPreviewFragmentDoc } from '../../modules/previews/activity/ActivityPreview.generated';\nimport { CollectionPreviewFragment, CollectionPreviewFragmentDoc } from 'HOC/modules/previews/collection/CollectionPreview.generated';\n\n\n\n\nexport type CommunityPageDataFragment = (\n  { __typename: 'Community' }\n  & Pick<Types.Community, 'id'>\n  & { myFollow: Types.Maybe<(\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  )> }\n  & HeroCommunityDataFragment\n);\n\nexport type CommunityPageThreadFragment = (\n  { __typename: 'Thread' }\n  & Pick<Types.Thread, 'id'>\n  & ThreadPreviewFragment\n);\n\nexport type CommunityPageCollectionBaseFragment = (\n  { __typename: 'Collection' }\n  & Pick<Types.Collection, 'id'>\n  & CollectionPreviewFragment\n);\n\nexport type CommunityPageActivityBaseFragment = (\n  { __typename: 'Activity' }\n  & Pick<Types.Activity, 'id'>\n  & ActivityPreviewFragment\n);\n\nexport const CommunityPageDataFragmentDoc = gql`\n    fragment CommunityPageData on Community {\n  id\n  myFollow {\n    id\n  }\n  ...HeroCommunityData\n}\n    ${HeroCommunityDataFragmentDoc}`;\nexport const CommunityPageThreadFragmentDoc = gql`\n    fragment CommunityPageThread on Thread {\n  id\n  ...ThreadPreview\n}\n    ${ThreadPreviewFragmentDoc}`;\nexport const CommunityPageCollectionBaseFragmentDoc = gql`\n    fragment CommunityPageCollectionBase on Collection {\n  id\n  ...CollectionPreview\n}\n    ${CollectionPreviewFragmentDoc}`;\nexport const CommunityPageActivityBaseFragmentDoc = gql`\n    fragment CommunityPageActivityBase on Activity {\n  id\n  ...ActivityPreview\n}\n    ${ActivityPreviewFragmentDoc}`;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommunityPageDataFragment } from '../../../HOC/pages/community/CommunityPage.generated';\nimport gql from 'graphql-tag';\nimport { CommunityPageDataFragmentDoc } from '../../../HOC/pages/community/CommunityPage.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type CreateCommunityMutationVariables = {\n  community: Types.CommunityInput,\n  icon?: Types.Maybe<Types.UploadInput>\n};\n\n\nexport type CreateCommunityMutation = (\n  { __typename: 'RootMutationType' }\n  & { createCommunity: Types.Maybe<(\n    { __typename: 'Community' }\n    & CommunityPageDataFragment\n  )> }\n);\n\n\nexport const CreateCommunityDocument = gql`\n    mutation createCommunity($community: CommunityInput!, $icon: UploadInput) {\n  createCommunity(community: $community, icon: $icon) {\n    ...CommunityPageData\n  }\n}\n    ${CommunityPageDataFragmentDoc}`;\nexport type CreateCommunityMutationFn = ApolloReactCommon.MutationFunction<CreateCommunityMutation, CreateCommunityMutationVariables>;\n\n/**\n * __useCreateCommunityMutation__\n *\n * To run a mutation, you first call `useCreateCommunityMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useCreateCommunityMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [createCommunityMutation, { data, loading, error }] = useCreateCommunityMutation({\n *   variables: {\n *      community: // value for 'community'\n *      icon: // value for 'icon'\n *   },\n * });\n */\nexport function useCreateCommunityMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<CreateCommunityMutation, CreateCommunityMutationVariables>) {\n        return ApolloReactHooks.useMutation<CreateCommunityMutation, CreateCommunityMutationVariables>(CreateCommunityDocument, baseOptions);\n      }\nexport type CreateCommunityMutationHookResult = ReturnType<typeof useCreateCommunityMutation>;\nexport type CreateCommunityMutationResult = ApolloReactCommon.MutationResult<CreateCommunityMutation>;\nexport type CreateCommunityMutationOptions = ApolloReactCommon.BaseMutationOptions<CreateCommunityMutation, CreateCommunityMutationVariables>;\n\n\nexport interface CreateCommunityMutationOperation {\n  operationName: 'createCommunity'\n  result: CreateCommunityMutation\n  variables: CreateCommunityMutationVariables\n  type: 'mutation'\n}\nexport const CreateCommunityMutationName:CreateCommunityMutationOperation['operationName'] = 'createCommunity'\n\nexport const CreateCommunityMutationRefetch = (\n  variables:CreateCommunityMutationVariables, \n  context?:any\n)=>({\n  query:CreateCommunityDocument,\n  variables,\n  context\n})\n      \n","import { InstanceOutboxActivitiesQueryRefetch } from 'fe/activities/outbox/instance/useInstanceOutboxActivities.generated';\nimport { getMaybeUploadInput } from 'fe/mutation/upload/getUploadInput';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { CommunityInput } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\nimport { AllCommunitiesQueryRefetch } from '../all/useAllCommunities.generated';\nimport { MyCommunityFollowsQueryRefetch } from '../myFollowed/myFollowedCommunities.generated';\nimport { useCreateCommunityMutation } from './useCreateCommunity.generated';\n\nexport interface CreateCommunity {\n  community: CommunityInput;\n  icon: Maybe<File | string>;\n}\nexport const useCreateCommunity = () => {\n  const [createMut, createMutStatus] = useCreateCommunityMutation();\n\n  const create = useCallOrNotifyMustLogin(\n    async ({ community, icon }: CreateCommunity) => {\n      if (createMutStatus.loading) {\n        return;\n      }\n\n      return createMut({\n        variables: {\n          icon: getMaybeUploadInput(icon, null),\n          community: {\n            name: community.name,\n            summary: community.summary,\n            preferredUsername: community.preferredUsername\n          }\n        },\n        refetchQueries: [\n          MyCommunityFollowsQueryRefetch({}),\n          InstanceOutboxActivitiesQueryRefetch({ limit: DEFAULT_PAGE_SIZE }),\n          AllCommunitiesQueryRefetch({ limit: DEFAULT_PAGE_SIZE })\n        ]\n      });\n    },\n    [createMutStatus, createMut]\n  );\n  return useMemo(() => {\n    return {\n      create\n    };\n  }, [create]);\n};\n","import React, { useEffect, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { Image, File } from 'react-feather';\nimport { Box, Flex } from 'rebass/styled-components';\n// import { UploadCloud } from 'react-feather';\n// import { Trans } from '@lingui/macro';\nimport styled from 'ui/themes/styled';\n// import { useInstanceInfoQuery } from 'fe/instance/info/useInstanceInfo.generated';\n// import { Trans } from '@lingui/macro';\n// import Alert from 'ui/elements/Alert';\n// import { AlertWrapper } from '../Modal';\n\ninterface Props {\n  initialUrl: string | undefined | null;\n  onFileSelect(file: File | undefined): unknown;\n  uploadType?: 'resource' | string;\n  filePattern?: FilePattern;\n}\n\ntype FilePattern = 'image/*' | '*';\n\nconst DropzoneArea: React.FC<Props> = ({ initialUrl, uploadType, onFileSelect, filePattern }) => {\n  const [fileUrl, setFileUrl] = useState<undefined | null | string>();\n  // const { data: instanceInfoData } = useInstanceInfoQuery();\n  // const uploadMaxBytes = instanceInfoData?.instance?.uploadMaxBytes || 0;\n\n  const [currentFile, setCurrentFile] = useState<{\n    file: File;\n    localUrl: string;\n  }>();\n\n  useEffect(\n    () => () => {\n      fileUrl && URL.revokeObjectURL(fileUrl);\n    },\n    [fileUrl]\n  );\n\n  useEffect(() => {\n    setFileUrl(initialUrl);\n  }, [initialUrl]);\n\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n    // rejectedFiles,\n    // acceptedFiles\n  } = useDropzone({\n    accept: filePattern,\n    // maxSize: uploadMaxBytes,\n    onDrop: acceptedFiles => {\n      const file = acceptedFiles[0];\n      if (!file) {\n        onFileSelect(void 0);\n        setCurrentFile(void 0);\n        return;\n      }\n      onFileSelect(file);\n      setCurrentFile({ file, localUrl: URL.createObjectURL(file) });\n    }\n  });\n  // const rejectedFile = rejectedFiles[0];\n  // console.log({ rejectedFiles, acceptedFiles });\n  return (\n    <>\n      <Box sx={{ height: '100%' }} {...getRootProps({ className: 'dropzone' })}>\n        <InfoContainer className={isDragActive ? 'active' : 'none'}>\n          {!currentFile && uploadType === 'resource' ? (\n            <Thumb className=\"thumb\">\n              <WrapperIcon>\n                <File size={30} strokeWidth={1} color={'rgba(250,250,250, .5)'} />\n              </WrapperIcon>\n            </Thumb>\n          ) : null}\n          {uploadType !== 'resource' ? (\n            <Thumb className=\"thumb\">\n              <WrapperIcon>\n                <Image size={30} strokeWidth={1} color={'rgba(250,250,250, .5)'} />\n              </WrapperIcon>\n              <Img\n                style={{\n                  backgroundImage: `url(\"${currentFile ? currentFile.localUrl : fileUrl}\")`\n                }}\n              />\n            </Thumb>\n          ) : null}\n          {!currentFile ? null : uploadType === 'resource' ? (\n            currentFile.file.type.indexOf('image') === -1 ? (\n              // <WrapperFile>\n              <FileThumb>\n                <File size={20} />\n                {currentFile && <FileName>{currentFile.file.name}</FileName>}\n              </FileThumb>\n            ) : (\n              // </WrapperFile>\n              <WrapperFile>\n                <Thumb>\n                  <WrapperIcon>\n                    <Image size={30} strokeWidth={1} color={'rgba(250,250,250, .5)'} />\n                  </WrapperIcon>\n                  <Img\n                    style={{\n                      backgroundImage: `url(\"${currentFile.localUrl}\")`\n                    }}\n                  />\n                </Thumb>\n                <FileName>{currentFile && currentFile.file.name}</FileName>\n              </WrapperFile>\n            )\n          ) : null}\n\n          <input {...getInputProps()} />\n\n          {/* <UploadCloud size={30} strokeWidth={1} />\n          {isDragActive ? (\n            <Info>\n              <Trans>Drop the file here ...</Trans>\n            </Info>\n          ) : (\n            <Info>\n              <Trans>Drag 'n' drop a file here, or click to select file</Trans>\n            </Info>\n          )} */}\n          {/* rejectedFile ? (\n            <AlertWrapper>\n              <Alert variant=\"negative\">\n                <Trans>\n                  File {rejectedFile.name} too big, can't exceed{' '}\n                  {Math.floor(uploadMaxBytes / 1024 / 1024)}MB\n                </Trans>\n              </Alert>\n            </AlertWrapper>\n          ) : null */}\n        </InfoContainer>\n      </Box>\n    </>\n  );\n};\n\nexport default DropzoneArea;\n\nconst InfoContainer = styled.div`\n  background: ${props => props.theme.colors.lighter};\n  border-radius: 4px;\n  text-align: center;\n  cursor: pointer;\n  box-sizing: border-box;\n  height: inherit;\n  margin: 0px;\n  &.active {\n    border: 1px dashed ${props => props.theme.colors.primary};\n  }\n  .;\n`;\n\nconst FileName = styled.p`\n  margin-bottom: 0px;\n  margin-top: 5px;\n  font-weight: bold;\n  text-align: center;\n  font-style: italic;\n`;\n\nconst WrapperIcon = styled(Flex)`\n  width: 40px;\n  height: 40px;\n  align-items: center;\n  border-radius: 100px;\n  position: absolute;\n  left: 50%;\n  margin-left: -20px;\n  top: 50%;\n  margin-top: -20px;\n  z-index: 9;\n`;\n\nconst WrapperFile = styled.div`\n  padding: 20px 10px;\n  border-radius: 4px;\n`;\n\nconst FileThumb = styled.div`\n  padding: 20px 10px;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.3);\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n`;\n\nconst Thumb = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  position: relative;\n  height: 120px;\n  &:after {\n    position: absolute;\n    content: '';\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    border-radius: 4px;\n    display: block;\n    background: rgba(0, 0, 0, 0.3);\n  }\n  &:hover {\n    &:after {\n      background: rgba(0, 0, 0, 0.1);\n    }\n  }\n  svg {\n    width: 40px;\n  }\n`;\n\nconst Img = styled(Box)`\n    display: block;\n    border-radius: 4px;\n    height: inherit;\n    background-size: cover;\n}\n`;\n","import * as React from 'react';\nimport { Box } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\n\nconst Wrapper = styled(Box)`\n  border-radius: 4px;\n  line-height: 26px;\n  padding: 8px 16px;\n  font-family: ${props => props.theme.fontFamily};\n  font-weight: 600;\n  font-size: 13px;\n`;\nconst Alert: React.FC<{ variant: string }> = ({ variant, children }) => (\n  <Wrapper variant={variant || 'info'}>{children}</Wrapper>\n);\n\nexport default Alert;\n","import { clearFix } from 'polished';\nimport React, { useCallback } from 'react';\nimport ReactDOM from 'react-dom';\n// import Icons from 'ui/atoms/icons.tsx'\nimport styled from 'ui/themes/styled';\nimport { Box } from 'rebass/styled-components';\nimport { X } from 'react-feather';\nimport media from 'styled-media-query';\nconst Background = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(51, 60, 69, 0.95);\n  z-index: 9999999999999;\n  height: 100%;\n  justify-content: center;\n  overflow: auto;\n  cursor: pointer;\n`;\n\nexport const AlertWrapper = styled.div`\n  margin-top: 4px;\n  z-index: 99999;\n  position: relative;\n`;\n\nconst Dialog = styled.div`\n  width: 700px;\n  box-shadow: 0 2px 8px 3px rgba(0, 0, 0, 0.3);\n  z-index: 9999999999;\n  background-color: #ffffff;\n  padding: 0;\n  margin: 40px auto;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  margin-left: -350px;\n  border-radius: 3px;\n  outline: none;\n  transform: translateY(-50%);\n\n  ${media.lessThan('medium')`\n    width: auto;\n    margin: 0;\n    left: 8px;\n    right: 8px;\n  `};\n`;\n\nconst Action = styled.div`\n  ${clearFix()};\n  position: relative;\n`;\n\nconst Close = styled(Box)`\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  cursor: pointer;\n  background: ${props => props.theme.colors.primary};\n  width: 24px;\n  height: 24px;\n  border-radius: 40px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n`;\n\nconst Content = styled.div`\n  ${clearFix()};\n  font-family: ${props => props.theme.fontFamily};\n`;\n\nexport const Container = styled.div`\n  font-family: ${props => props.theme.fontFamily};\n`;\nexport const Actions = styled(Box)`\n  ${clearFix()};\n  height: 60px;\n  padding-top: 10px;\n  padding-right: 10px;\n  & button {\n    float: right;\n  }\n`;\n\nexport const CounterChars = styled.div`\n  float: right;\n  font-size: 11px;\n  text-transform: uppercase;\n  background: #d0d9db;\n  padding: 2px 10px;\n  font-weight: 600;\n  margin-top: 4px;\n  color: #32302e;\n  letter-spacing: 1px;\n`;\n\nexport const ContainerForm = styled.div`\n  flex: 1;\n  ${clearFix()};\n  input {\n    height: 40px;\n    background: white;\n    border-radius: 2px;\n    border: ${props => props.theme.colors.border};\n  }\n  textarea {\n    line-height: 20px;\n    background: white;\n    border-radius: 2px;\n    border: ${props => props.theme.colors.border};\n    font-family: ${props => props.theme.fontFamily};\n  }\n`;\n\nexport const Header = styled.div`\n  padding: 0 16px;\n  padding-top: 16px;\n  // border-bottom: 1px solid ${props => props.theme.colors.lighter};\n  & h5 {\n    text-align: center !important;\n    margin: 0 !important;\n    font-size: 18px;\n  }\n`;\n\nexport const Row = styled.div<{ big?: boolean }>`\n  ${clearFix()};\n  border-bottom: 1px solid ${props => props.theme.colors.lighter};\n  height: ${props => (props.big ? '180px' : 'auto')};\n  display: flex;\n  padding: 20px;\n  & textarea {\n    height: 120px;\n  }\n  & label {\n    width: 200px;\n    line-height: 40px;\n    ${media.lessThan('medium')`\n    width: 100%;\n  `};\n  }\n\n  ${media.lessThan('medium')`\n    display: block;\n\n  `};\n`;\n\nclass Portal extends React.Component {\n  static el = (() => {\n    const _el = document.createElement('div');\n    _el.setAttribute('id', 'modalPortal');\n    _el.style.display = 'none';\n    document.body.appendChild(_el);\n    return _el;\n  })();\n  componentDidMount() {\n    Portal.el.style.display = 'block';\n  }\n\n  componentWillUnmount() {\n    Portal.el.style.display = 'none';\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, Portal.el);\n  }\n}\n\ninterface Props {\n  closeModal: () => void;\n}\n\nconst Modal: React.FC<Props> = ({ closeModal, children }) => {\n  const handleCloseModal = useCallback(() => closeModal(), [closeModal]);\n  return (\n    <Portal>\n      <Background onClick={handleCloseModal} />\n      <Dialog>\n        <Action>\n          <Close onClick={handleCloseModal}>\n            <X color=\"#fff\" size={16} />\n          </Close>\n        </Action>\n        <Content>{children}</Content>\n      </Dialog>\n    </Portal>\n  );\n};\n\nexport default Modal;\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input, Textarea } from '@rebass/forms';\nimport { FormikHook } from 'ui/@types/types';\nimport * as React from 'react';\nimport Button from 'ui/elements/Button';\nimport { clearFix } from 'polished';\nimport media from 'styled-media-query';\nimport styled from 'ui/themes/styled';\nimport { Flex, Text, Box, Heading } from 'rebass/styled-components';\nimport DropzoneArea from 'ui/modules/DropzoneModal';\nimport Alert from 'ui/elements/Alert';\nimport {\n  Actions,\n  AlertWrapper,\n  Container,\n  ContainerForm,\n  CounterChars,\n  Header\n} from 'ui/modules/Modal';\n\nconst tt = {\n  placeholders: {\n    name: i18nMark('Choose a name for the community'),\n    summary: i18nMark(\n      'Please describe who might be interested in this community and what kind of collections it is likely to contain...'\n    ),\n    icon: i18nMark('Enter the URL of an image to represent the community')\n  }\n};\n\nexport interface Props {\n  cancel(): any;\n  formik: FormikHook<CreateCommunityFormValues>;\n}\n\nexport interface CreateCommunityFormValues {\n  name: string;\n  summary: string;\n  icon: File | string | undefined;\n}\n\nexport const CreateCommunityPanel: React.FC<Props> = ({ cancel, formik }) => {\n  const onIconFileSelected = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, icon: file }),\n    [formik]\n  );\n  const initialIconUrl = 'string' === typeof formik.values.icon ? formik.values.icon : '';\n  return (\n    <Container>\n      <form onSubmit={formik.handleSubmit}>\n        <Header>\n          <Heading m={2}>\n            <Trans>Create a new community</Trans>\n          </Heading>\n        </Header>\n        <Hero>\n          <Box sx={{ width: '120px', height: '120px' }}>\n            <DropzoneArea\n              initialUrl={initialIconUrl}\n              onFileSelect={onIconFileSelected}\n              filePattern=\"image/*\"\n            />\n          </Box>\n          {/* <Background style={{ backgroundImage: `url(\"${c.icon}\")` }} /> */}\n          <HeroInfo>\n            <Title fontSize={5} fontWeight={'bold'}>\n              <CollectionContainerForm>\n                <Input\n                  placeholder={tt.placeholders.name}\n                  disabled={formik.isSubmitting}\n                  name=\"name\"\n                  value={formik.values.name}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{60 - formik.values.name.length}</CounterChars>\n                {formik.errors.name && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.name}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Title>\n\n            <Description fontSize={2} mt={2}>\n              <CollectionContainerForm>\n                <Textarea\n                  placeholder={tt.placeholders.summary}\n                  disabled={formik.isSubmitting}\n                  name=\"summary\"\n                  value={formik.values.summary}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{500 - formik.values.summary.length}</CounterChars>\n                {formik.errors.summary && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.summary}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Description>\n          </HeroInfo>\n        </Hero>\n\n        <Actions>\n          <Button\n            variant=\"primary\"\n            isSubmitting={formik.isSubmitting}\n            isDisabled={formik.isSubmitting}\n            type=\"submit\"\n            style={{ marginLeft: '10px' }}\n            // onClick={formik.submitForm}\n          >\n            <Trans>Save</Trans>\n          </Button>\n          <Button variant=\"outline\" onClick={cancel}>\n            <Trans>Cancel</Trans>\n          </Button>\n        </Actions>\n      </form>\n    </Container>\n  );\n};\n\nconst CollectionContainerForm = styled(ContainerForm)`\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n`;\n\nconst Title = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst Description = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst HeroInfo = styled.div`\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ${clearFix()};\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ${props => props.theme.colors.mediumdark};\n    ${media.lessThan('medium')`\n      margin-top: 8px;\n    `};\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ${props => props.theme.colors.mediumdark};\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n`;\n\nconst Hero = styled(Flex)`\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ${media.lessThan('medium')`\n  text-align: center;\n  display: block;\n`};\n`;\n\nexport default CreateCommunityPanel;\n","import { isUrlString } from 'fe/lib/helpers/data';\nimport { Schema } from 'yup';\n\nexport const TestUrlOrFile: Parameters<Schema<File | string>['test']> = ([\n  'imageurl',\n  'need a file or an url',\n  (val: File | string) => {\n    return !val\n      ? true\n      : typeof val === 'string'\n      ? isUrlString(val)\n      : val instanceof File;\n  }\n] as any) as Parameters<Schema<any>['test']>;\n","import { useCreateCommunity } from 'fe/community/create/useCreateCommunity';\nimport { useFormik } from 'formik';\nimport React, { FC } from 'react';\nimport { useHistory } from 'react-router';\nimport {\n  CreateCommunityFormValues,\n  CreateCommunityPanel\n} from 'ui/modules/CreateCommunityPanel';\nimport * as Yup from 'yup';\nimport { TestUrlOrFile } from 'HOC/lib/formik-validations';\n\nexport const validationSchema: Yup.ObjectSchema<CreateCommunityFormValues> = Yup.object<\n  CreateCommunityFormValues\n>({\n  name: Yup.string()\n    .min(2)\n    .max(60)\n    .required(),\n  summary: Yup.string().max(500),\n  icon: Yup.mixed<File | string>().test(...TestUrlOrFile)\n});\nexport interface Props {\n  done(): any;\n}\nexport const CreateCommunityPanelHOC: FC<Props> = ({ done }: Props) => {\n  const history = useHistory();\n  const { create } = useCreateCommunity();\n  const formik = useFormik<CreateCommunityFormValues>({\n    enableReinitialize: true,\n    validationSchema,\n    initialValues: {\n      name: '',\n      summary: '',\n      icon: ''\n    },\n    onSubmit: vals => {\n      return create({\n        community: {\n          preferredUsername: vals.name.split(' ').join('_'),\n          name: vals.name,\n          summary: vals.summary\n        },\n        icon: vals.icon\n      }).then(res => {\n        done();\n        res?.data?.createCommunity?.id &&\n          history.push(`/communities/${res.data.createCommunity.id}`);\n      });\n    }\n  });\n  return <CreateCommunityPanel cancel={done} formik={formik} />;\n};\n","import React, { FC } from 'react';\nimport { SearchBox as ISDSearchBox } from 'react-instantsearch-dom';\nimport { searchDisabled } from 'mn-constants';\n\nexport const SearchBox: FC = () => {\n  return searchDisabled ? null : <ISDSearchBox />;\n};\n","import * as React from 'react';\nimport styled from 'ui/themes/styled';\nimport { Box } from 'rebass/styled-components';\n\nconst Wrapper = styled(Box)<{ bg?: string; size?: string }>`\n  font-family: ${props => props.theme.fontFamily};\n  border-radius: 4px;\n  min-width: ${props =>\n    props.size === 'm'\n      ? '140px'\n      : props.size === 'l'\n      ? '200px'\n      : props.size === 's'\n      ? '32px'\n      : '48px'};\n  height: ${props =>\n    props.size === 'm'\n      ? '140px'\n      : props.size === 'l'\n      ? '200px'\n      : props.size === 's'\n      ? '32px'\n      : '48px'};\n  background-color: ${props => (props.bg ? 'transparent' : props.theme.colors.light)};\n  background-image: url(\"${props => props.bg}\");\n  background-size: cover;\n  background-position: center center;\n  span {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    line-height: normal;\n    font-weight: 700;\n    ${props => props.theme.colors.mediumdark};\n  }\n`;\nconst Avatar: React.FC<{\n  src?: string;\n  initials?: string;\n  variant?: string;\n  size?: string;\n}> = ({ size, src, initials, variant }) => (\n  <Wrapper size={size} bg={src}>\n    {initials && !src ? <span>{initials.substr(0, 2).toUpperCase()}</span> : null}\n  </Wrapper>\n);\n\nexport default Avatar;\n","import OutsideClickHandler from 'react-outside-click-handler';\nimport React, { FC } from 'react';\nimport { Box, Flex } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\n// import {  Flag, Upload, Copy } from 'react-feather';\n\ninterface Props {\n  close(): unknown;\n  orientation: string;\n}\nexport const Dropdown: FC<Props> = ({ orientation, close, children }) => (\n  <OutsideClickHandler onOutsideClick={close}>\n    <Wrapper className=\"dropdown\" orientation={orientation}>\n      {children}\n    </Wrapper>\n  </OutsideClickHandler>\n);\n\nconst Wrapper = styled(Box)<{ orientation: string }>`\n  text-align: left;\n  background: ${props => props.theme.colors.appInverse};\n  min-width: 200px;\n  display: block;\n  border-radius: 6px;\n  box-shadow: rgba(101, 119, 134, 0.2) 0px 0px 15px, rgba(101, 119, 134, 0.15) 0px 0px 3px 1px;\n  position: absolute;\n  top: ${props => (props.orientation === 'top' ? '8px' : 'auto')};\n  bottom: ${props => (props.orientation === 'bottom' ? '4px' : 'auto')};\n  left: ${props => (props.orientation === 'top' ? '0px' : '0px')};\n  right: ${props => (props.orientation === 'bottom' ? '0px' : 'auto')};\n  z-index: 9999999999999999999999999999;\n`;\nexport const DropdownItem = styled(Flex)`\n  align-items: center;\n  cursor: pointer;\n  padding: 16px;\n  min-width: 100%;\n  width: max-content;\n  flex: 1;\n  &:first-of-type {\n    border-top-left-radius: 6px;\n    border-top-right-radius: 6px;\n  }\n  &:hover {\n    div {\n      color: ${props => props.theme.colors.mediumdark} !important;\n    }\n    background: ${props => props.theme.colors.light} !important;\n  }\n`;\n","import * as React from 'react';\nimport { Settings, User, Power, Users } from 'react-feather';\nimport styled from '../../themes/styled';\nimport { Trans } from '@lingui/macro';\nimport { useHistory } from 'react-router';\nimport { Text, Flex } from 'rebass/styled-components';\nimport { Dropdown } from '../Dropdown';\n\nconst List = styled.div<{ lined?: boolean }>`\n  padding: 8px;\n  border-bottom: ${props => (props.lined ? '1px solid #dadada' : null)};\n`;\nconst Item = styled(Flex)`\n  line-height: 50px;\n  height: 50px;\n  cursor: pointer;\n  align-items: center;\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n    .--rtl & {\n      margin-right: 0px;\n      margin-left: 8px;\n    }\n    & svg {\n      vertical-align: sub;\n    }\n  }\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n  &:hover {\n    color: ${props => props.theme.colors.primary};\n  }\n`;\n\nconst ItemButton = styled(Item)`\n  border: 1px solid ${props => props.theme.colors.medium};\n  border-radius: 4px;\n  height: 34px;\n  &:hover {\n    background: ${props => props.theme.colors.light};\n  }\n  div {\n    font-size: 12px;\n    letter-spacing: 0;\n  }\n`;\n\nexport interface Props {\n  logout(): void;\n  toggleDropdown: any;\n  userLink: string;\n  createCommunity: any;\n  isAdmin: boolean;\n}\n\nexport const DropdownSidebar: React.FC<Props> = ({\n  logout,\n  userLink,\n  toggleDropdown,\n  isAdmin,\n  createCommunity\n}) => {\n  const { push } = useHistory();\n  return (\n    <Dropdown orientation={'top'} close={toggleDropdown}>\n      <List lined>\n        <Item variant=\"link\" onClick={() => push(userLink)}>\n          <span>\n            <User size={16} color={'#333'} />\n          </span>\n          <Text variant=\"text\">\n            <Trans>Profile</Trans>\n          </Text>\n        </Item>\n        <Item variant=\"link\" onClick={() => push('/settings')}>\n          <span>\n            <Settings size={16} color={'#333'} />\n          </span>\n          <Text variant=\"text\">\n            <Trans>Settings</Trans>\n          </Text>\n        </Item>\n      </List>\n      {isAdmin && (\n        <List lined>\n          <ItemButton variant=\"link\" onClick={() => push('/settings/instance')}>\n            <Text variant=\"text\" sx={{ flex: 1, textAlign: 'center' }}>\n              <Trans>Admin dashboard</Trans>\n            </Text>\n          </ItemButton>\n        </List>\n      )}\n      <List lined>\n        <Item variant=\"link\" onClick={() => createCommunity()}>\n          <span>\n            <Users size={16} color={'#333'} />\n          </span>\n          <Text variant=\"text\">\n            <Trans>New Community</Trans>\n          </Text>\n        </Item>\n      </List>\n      <List lined>\n        <Item variant=\"link\">\n          <Text variant=\"text\">\n            <a href=\"/terms\" target=\"_blank\">\n              <Trans>Code of Conduct</Trans>\n            </a>\n          </Text>\n        </Item>\n        <Text variant=\"text\">v1.0 beta</Text>\n      </List>\n      <List>\n        <Item variant=\"link\" onClick={logout}>\n          <span>\n            <Power size={16} strokeWidth={1} color={'#333'} />\n          </span>\n          <Text variant=\"text\">\n            <Trans>Sign out</Trans>\n          </Text>\n        </Item>\n      </List>\n    </Dropdown>\n  );\n};\n","import { LocaleContext } from 'context/global/localizationCtx';\nimport { logo_small_url, prompt_signin } from 'mn-constants';\nimport { darken, ellipsis } from 'polished';\nimport React, { ReactElement } from 'react';\nimport { ChevronDown, ChevronLeft } from 'react-feather';\n// import { Link } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\n// import {Input} from '@rebass/forms'\nimport Avatar from 'ui/elements/Avatar';\nimport styled from 'ui/themes/styled';\n// import Avatar from 'ui/elements/Avatar';\nimport { DropdownSidebar } from './dropdown';\n\nexport interface Props {\n  user: null | {\n    icon: string;\n    name: string;\n    link: string;\n    isAdmin: boolean;\n    logout(): unknown;\n  };\n  Search: ReactElement;\n  toggleSideBar(): unknown;\n  createCommunity(): unknown;\n  isOpenDropdown: boolean;\n  toggleDropdown(): unknown;\n}\n\nexport const MainHeader: React.FC<Props> = props => {\n  const history = useHistory();\n  const { i18n } = React.useContext(LocaleContext);\n  return (\n    <HeaderWrapper>\n      <Container>\n        <Left>\n          <Icon onClick={() => history.goBack()}>\n            <ChevronLeft size=\"20\" />\n          </Icon>\n          {/* <HamburgerIcon onClick={props.toggleSideBar}>\n            <Menu size=\"20\" />\n          </HamburgerIcon> */}\n          <HomeLink to={props.user ? '/' : '/discover'}>\n            <Avatar size=\"s\" src={logo_small_url} />\n          </HomeLink>\n          <Search>\n            {/* <Input /> */}\n            {props.Search}\n          </Search>\n        </Left>\n        <Header alignItems={'center'}>\n          {props.user ? (\n            <NavItem\n              sx={{ position: 'relative' }}\n              alignItems=\"center\"\n              onClick={props.toggleDropdown}\n            >\n              <Avatar\n                size=\"s\"\n                initials={props.user.name.substring(0, 2)}\n                src={props.user.icon}\n                variant=\"avatar\"\n              />\n              <HeaderName ml={2} variant=\"link\">\n                {props.user.name}\n              </HeaderName>\n              <Right ml={2}>\n                <ChevronDown size=\"20\" />\n              </Right>\n              {props.isOpenDropdown && (\n                <DropdownSidebar\n                  isAdmin={props.user.isAdmin}\n                  createCommunity={props.createCommunity}\n                  logout={props.user.logout}\n                  userLink={props.user.link}\n                  toggleDropdown={props.toggleDropdown}\n                />\n              )}\n            </NavItem>\n          ) : (\n            <Box>\n              <Signin>\n                <Link to=\"/\">\n                  <Text variant=\"link\">{i18n._(prompt_signin)}</Text>\n                </Link>\n              </Signin>\n            </Box>\n          )}\n        </Header>\n      </Container>\n    </HeaderWrapper>\n  );\n};\n\nconst Container = styled(Box)`\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  grid-template-columns: 1fr 200px;\n`;\nconst Search = styled(Box)`\n  display: flex;\n  margin-top: 7px;\n  input {\n    width: 100%;\n    font-size: 13px;\n    border-radius: 4px;\n    max-width: 500px;\n    height: 36px;\n    margin: 0;\n    border: 0;\n    background: ${props => props.theme.colors.app};\n  }\n`;\n\nconst Right = styled(Box)`\n  color: ${props => props.theme.colors.medium};\n`;\n\nconst HeaderName = styled(Text)`\n  ${ellipsis('180px')};\n  color: ${props => props.theme.colors.darker};\n`;\n\nconst NavItem = styled(Flex)`\n  border-radius: 0px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  margin-top: 5px;\n  float: right;\n  &:hover {\n    background: ${props => props.theme.colors.lighter};\n  }\n  ${media.lessThan('1280px')`\nimg {\n    margin-right: 0;\n}\n`};\n`;\n\nconst Header = styled(Box)`\n  cursor: pointer;\n  flex: 0 0 200px;\n  order: 2;\n  justify-content: flex-end;\n  img {\n    min-width: 36px;\n    height: 36px;\n    border-radius: 36px;\n  }\n`;\nconst Signin = styled(NavItem)`\n  height: 30px;\n  line-height: 30px;\n  text-decoration: none;\n  padding: 0 8px;\n  background: ${props => props.theme.colors.primary};\n  color: ${props => props.theme.colors.lighter};\n  border-radius: 4px;\n  margin-top: 10px;\n  &:hover {\n    background: ${props => darken('0.1', props.theme.colors.primary)};\n  }\n  a {\n    text-decoration: none;\n    font-size: 13px;\n  }\n  div {\n    text-decoration: none;\n    color: ${props => props.theme.colors.lighter};\n    font-size: 13px;\n  }\n`;\nconst Icon = styled(Box)`\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ${props => props.theme.colors.lighter};\n    svg {\n      stroke: ${props => props.theme.colors.primary};\n    }\n  }\n  svg {\n    stroke: ${props => props.theme.colors.mediumdark};\n    margin: 0 auto;\n  }\n`;\n\nconst Left = styled(Box)`\n  display: grid;\n  grid-template-columns: auto auto 1fr;\n  column-gap: 8px;\n`;\n\nconst HeaderWrapper = styled(Box)`\n  border-bottom: ${props => props.theme.colors.border};\n  height: 50px;\n  background: ${props => props.theme.colors.appInverse};\n`;\n\n// const HamburgerIcon = styled(Icon)`\n//   display: none;\n//   min-width: 40px;\n//   ${media.lessThan('medium')`\n//       display: flex;\n//   `};\n// `;\n\nconst HomeLink = styled(Link)`\n  margin-top: 9px;\n  cursor: pointer;\n`;\n","import { useMe } from 'fe/session/useMe';\nimport { SideBarContext } from 'HOC/context/SideBar';\nimport { useNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { CreateCommunityPanelHOC } from 'HOC/modules/CreateCommunityPanel/createCommunityPanelHOC';\nimport { SearchBox } from 'HOC/modules/SearchBox/SearchBox';\nimport React, { FC, useContext, useMemo, useReducer } from 'react';\nimport { MainHeader, Props as MainHeaderProps } from 'ui/modules/MainHeader';\nimport Modal from 'ui/modules/Modal';\n\nexport interface MainHeaderHOC {}\nexport const MainHeaderHOC: FC<MainHeaderHOC> = () => {\n  const meQ = useMe();\n  const user = meQ.me?.user;\n  const notifiedMustLogin = useNotifyMustLogin();\n\n  const [showCreateCommunity, toggleShowCreateCommunity] = useReducer(\n    is => (notifiedMustLogin() ? false : !is),\n    false\n  );\n\n  const CreateCommunityModal = showCreateCommunity ? (\n    <Modal closeModal={toggleShowCreateCommunity}>\n      <CreateCommunityPanelHOC done={toggleShowCreateCommunity} />\n    </Modal>\n  ) : null;\n\n  const { toggleOpen: toggleSideBar } = useContext(SideBarContext);\n\n  const [isOpenDropdown, toggleDropdown] = useReducer(is => !is, false);\n  const headerProps = useMemo<MainHeaderProps>(() => {\n    const props: MainHeaderProps = {\n      Search: <SearchBox key=\"search\" />,\n      user: user\n        ? {\n            isAdmin: meQ.isAdmin,\n            logout: meQ.logout,\n            icon: user.icon?.url || '',\n            link: `/user/${user.id}`,\n            name: user.name || ''\n          }\n        : null,\n      toggleSideBar,\n      createCommunity: toggleShowCreateCommunity,\n      isOpenDropdown,\n      toggleDropdown\n    };\n    return props;\n  }, [user, meQ.isAdmin, meQ.logout, toggleSideBar, isOpenDropdown]);\n  return (\n    <>\n      {CreateCommunityModal}\n      <MainHeader {...headerProps} />\n    </>\n  );\n};\n","import React, { ReactElement } from 'react';\nimport { Box } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\nimport { useHistory } from 'react-router';\nimport { ChevronLeft } from 'react-feather';\n// import Footer from 'ui/modules/Footer';\nimport media from 'styled-media-query';\nimport { Link } from 'react-router-dom';\n\nexport interface Props {\n  HeaderBox?: ReactElement;\n  SearchBox: ReactElement;\n}\nexport const Guest: React.FC<Props> = ({ children, HeaderBox, SearchBox }) => {\n  const history = useHistory();\n\n  return (\n    <Page>\n      <SearchBar>\n        <Icon onClick={() => history.goBack()}>\n          <ChevronLeft size=\"20\" />\n        </Icon>\n        {SearchBox}\n        <Link to=\"/login\">Log in</Link>\n      </SearchBar>\n      <Header>{HeaderBox}</Header>\n      <Wrapper>{children}</Wrapper>\n      {/* <Footer /> */}\n    </Page>\n  );\n};\n\nconst Icon = styled(Box)`\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ${props => props.theme.colors.lighter};\n    svg {\n      stroke: ${props => props.theme.colors.primary};\n    }\n  }\n  svg {\n    stroke: ${props => props.theme.colors.mediumdark};\n    margin: 0 auto;\n  }\n`;\n\nconst Header = styled(Box)`\n  ${media.lessThan('medium')`\n    display: none;\n  `}\n`;\n\nconst SearchBar = styled(Box)`\na {\n  height: 40px;\n  line-height: 40px;\n  font-size: 14px;\n  padding: 0 8px;\n  border-radius: 4px;\n  text-decoration: none;\n  background: ${props => props.theme.colors.primary};\n  color: ${props => props.theme.colors.lighter};\n  margin-right: 8px;\n}\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ${props => props.theme.colors.appInverse}\nborder-bottom: ${props => props.theme.colors.border};\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  font-size: 13px;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ${props => props.theme.colors.app};\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 8px;\n  margin-left: 8px;\n  flex:1;\n}\n${media.greaterThan('medium')`\n    display: none;\n  `}\n`;\n\nconst Page = styled(Box)`\n  height: 100vh;\n  grid-template-rows: 50px auto;\n  row-gap: 8px;\n  display: grid;\n`;\n\nconst Wrapper = styled(Box)`\n  max-width: 1096px;\n  margin: 0 auto;\n  height: calc(100vh - 66px);\n  display: grid;\n  grid-template-rows: auto;\n  grid-template-columns: 1fr;\n  column-gap: 8px;\n`;\n","import { MainHeaderHOC } from 'HOC/modules/Header/Header';\nimport React, { FC } from 'react';\nimport { Guest, Props } from 'ui/templates/guest';\nimport { ProvideSideBarContext } from 'HOC/context/SideBar';\nimport { SearchBox } from 'HOC/modules/SearchBox/SearchBox';\n\nexport interface GuestTemplate {\n  withoutHeader?: boolean;\n}\nexport const GuestTemplate: FC<GuestTemplate> = ({ children, withoutHeader = false }) => {\n  const HeaderBox = withoutHeader ? undefined : <MainHeaderHOC />;\n  const props: Props = {\n    HeaderBox,\n    SearchBox: <SearchBox />\n  };\n  return (\n    <ProvideSideBarContext>\n      <Guest {...props}>{children}</Guest>\n    </ProvideSideBarContext>\n  );\n};\n","import { useMe } from 'fe/session/useMe';\nimport React, { FC } from 'react';\nimport { Redirect } from 'react-router-dom';\ninterface Props {\n  to: string;\n}\n\nexport const RedirectAuthenticated: FC<Props> = ({ children, to }) => {\n  const { me, loading } = useMe();\n\n  if (loading) {\n    return null;\n  }\n\n  if (me) {\n    return <Redirect to={to} />;\n  }\n\n  return <>{children}</>;\n};\nexport const RedirectAuthenticatedToHome: FC = ({ children }) => (\n  <RedirectAuthenticated to=\"/\">{children}</RedirectAuthenticated>\n);\n\nexport const RedirectAnonymous: FC<Props> = ({ children, to }) => {\n  const { me, loading } = useMe();\n  if (loading) {\n    return null;\n  }\n\n  if (!me) {\n    return <Redirect to={to} />;\n  }\n\n  return <>{children}</>;\n};\n\nexport const RedirectAnonymousToLogin: FC = ({ children }) => (\n  <RedirectAnonymous to=\"/login\">{children}</RedirectAnonymous>\n);\n","import { generatePath, matchPath } from 'react-router';\nimport { RouteProps } from 'react-router-dom';\nimport { SimpleLink } from 'ui/helpers/SimpleLink';\ninterface MinimalActor {\n  isLocal: boolean;\n  canonicalUrl?: string;\n}\ntype LocationParams = { [paramName: string]: string | number | boolean | undefined } | undefined;\ntype QueryParams = LocationParams;\n\ninterface LocationHelp<Params extends LocationParams, Query extends QueryParams, State = any> {\n  getPath(params: Params, query: Query, pathIndex?: number): string;\n  is(path: string): boolean;\n  getSimpleLink(\n    params: Params,\n    query: Query,\n    actor?: MinimalActor | null,\n    pathIndex?: number\n  ): SimpleLink;\n}\n\nexport const locationHelper = <\n  Params extends LocationParams,\n  Query extends QueryParams,\n  State = any\n>(\n  routeProps: RouteProps\n): LocationHelp<Params, Query, State> => {\n  type ThisLocation = LocationHelp<Params, Query, State>;\n  const routePaths =\n    'string' === typeof routeProps.path\n      ? [routeProps.path]\n      : !routeProps.path?.length\n      ? []\n      : routeProps.path;\n\n  const is: ThisLocation['is'] = path => !!matchPath(path, routeProps);\n\n  const getPath: ThisLocation['getPath'] = (params, query, index = 0) => {\n    const usePath = routePaths[index];\n    //@ts-ignore\n    const searchParams = new URLSearchParams(query || {}).toString();\n    const url = generatePath(usePath, params);\n    return searchParams ? `${url}?${searchParams}` : url;\n  };\n\n  const getSimpleLink: ThisLocation['getSimpleLink'] = (params, query, actor = null, index = 0) => {\n    const internal = actor ? actor.isLocal : true;\n    const internalPath = getPath(params, query, index);\n    const url = internal ? internalPath : actor?.canonicalUrl || '#?#';\n    const simpleLink: SimpleLink = {\n      external: !internal,\n      url\n    };\n    return simpleLink;\n  };\n\n  return {\n    is,\n    getSimpleLink,\n    getPath\n  };\n};\n\n// interface LocationHelpHook<Params extends LocationParams, Query extends QueryParams, State = any> {\n//   is(): boolean;\n//   getSimpleLink(\n//     params: Params,\n//     query: Query,\n//     actor?: MinimalActor | null,\n//     pathIndex?: number\n//   ): SimpleLink;\n// }\n\n// export const useLocationHelp = <\n//   Params extends LocationParams,\n//   Query extends QueryParams,\n//   State = any\n// >(\n//   helper: LocationHelp<Params, Query, State>\n// ): LocationHelpHook<Params, Query, State> => {\n//   const history = useHistory();\n//   type ThisLocationHook = LocationHelpHook<Params, Query, State>;\n\n//   const is = useCallback(() => !!helper.is(history.location.pathname), [\n//     helper,\n//     history.location.pathname\n//   ]);\n\n//   const getSimpleLink: ThisLocationHook['getSimpleLink'] = useCallback(\n//     (params, query, actor = null, index = 0) => {\n//       const internal = actor ? actor.isLocal : true;\n//       const internalPath = helper.getPath(params, query, index);\n//       const url = internal ? internalPath : actor?.canonicalUrl || '#?#';\n//       const simpleLink: SimpleLink = {\n//         external: !internal,\n//         url\n//       };\n//       return simpleLink;\n//     },\n//     [helper]\n//   );\n\n//   return useMemo(\n//     () => ({\n//       getSimpleLink,\n//       is\n//     }),\n//     [getSimpleLink, is]\n//   );\n// };\n","import { LoginPageHOC } from 'HOC/pages/login/LoginPage';\nimport { GuestTemplate } from 'HOC/templates/Guest/Guest';\nimport React, { FC } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { RedirectAuthenticatedToHome } from './wrappers/RedirectBySession';\nimport { locationHelper } from './lib/helper';\n\ninterface LoginPageRouter {}\nconst LoginPageRouter: FC<RouteComponentProps<LoginPageRouter>> = ({ match }) => {\n  return (\n    <RedirectAuthenticatedToHome>\n      <GuestTemplate withoutHeader>\n        <LoginPageHOC />\n      </GuestTemplate>\n    </RedirectAuthenticatedToHome>\n  );\n};\n\nexport const LoginPageRoute: RouteProps = {\n  exact: true,\n  path: '/login',\n  component: LoginPageRouter\n};\n\nexport const loginLocation = locationHelper<undefined, undefined>(LoginPageRoute);\n","import { useMe } from 'fe/session/useMe';\nimport React, { useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { toast, ToastContent, ToastOptions } from 'react-toastify';\nimport { Trans } from '@lingui/macro';\nimport { loginLocation } from 'routes/LoginPageRoute';\n\nexport interface Opts {\n  content?: ToastContent | (() => ToastContent);\n  opts?: ToastOptions;\n}\nconst defaultOpts: Opts = {\n  content: () => (\n    <Trans>\n      You need to <Link to={loginLocation.getPath(undefined, undefined)}>login</Link> for that\n    </Trans>\n  ),\n  opts: { type: 'warning' }\n};\n\nexport function useCallOrNotifyMustLogin<T, Args extends any[]>(\n  _fn: (...args: Args) => Promise<T>,\n  deps: any[],\n  opts?: Opts\n): (...args: Args) => Promise<T | null> {\n  const fn = useCallback(_fn, deps);\n  const notify = useNotifyMustLogin(opts);\n  return useCallback<(...args: Args) => Promise<T | null>>(\n    async (...args: Args) => {\n      return notify() ? null : fn(...args);\n    },\n    [fn, notify]\n  );\n}\n\nexport const useNotifyMustLogin = (options?: Opts) => {\n  const { me } = useMe();\n  const loggedIn = !!me?.user?.id;\n\n  return useCallback(() => {\n    const { content, opts } = { ...defaultOpts, ...options };\n    !loggedIn && toast(content, opts);\n    return !loggedIn;\n  }, [loggedIn, options]);\n};\n","import { useMemo } from 'react';\nimport * as GQL from './myFollowedCommunities.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\n// import { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const SIDEBAR_MY_JOINED_LIST_LIMIT = 10;\n\nexport const useMyFollowedCommunities = () => {\n  const myFlwCommunitiesQ = GQL.useMyCommunityFollowsQuery({\n    variables: { limit: SIDEBAR_MY_JOINED_LIST_LIMIT }\n  });\n\n  const myCommunityFollowsPage = usePage(\n    myFlwCommunitiesQ.data?.me?.user.communityFollows,\n    ({ cursor, update }) => {\n      return myFlwCommunitiesQ.fetchMore({\n        variables: { ...cursor, limit: SIDEBAR_MY_JOINED_LIST_LIMIT },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.me?.user?.communityFollows && prev.me?.user?.communityFollows\n            ? {\n                ...fetchMoreResult,\n                me: {\n                  ...fetchMoreResult.me,\n                  user: {\n                    ...fetchMoreResult.me.user,\n                    communityFollows: update({\n                      prev: prev.me?.user.communityFollows,\n                      fetched: fetchMoreResult.me?.user.communityFollows\n                    })\n                  }\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(() => {\n    return {\n      myCommunityFollowsPage\n    };\n  }, [myCommunityFollowsPage]);\n};\n","import { MyCollectionFollowsQueryRefetch } from 'fe/collection/myFollowed/myFollowedCollections.generated';\nimport { MyCommunityFollowsQueryRefetch } from 'fe/community/myFollowed/myFollowedCommunities.generated';\nimport { mnCtx } from 'fe/lib/graphql/ctx';\nimport { isOptimisticId, OPTIMISTIC_ID_STRING } from 'fe/lib/helpers/mutations';\nimport * as GQL from 'fe/mutation/follow/useMutateFollow.generated';\nimport { CollectionFollowersQueryRefetch } from 'fe/user/followers/collection/useCollectionFollowers.generated';\nimport { CommunityFollowersQueryRefetch } from 'fe/user/followers/community/useCommunityFollowers.generated';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { Collection, Community, User, Follow } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { useMemo } from 'react';\nimport { SIDEBAR_MY_JOINED_LIST_LIMIT } from 'fe/community/myFollowed/myFollowedCommunities';\n\ntype Context = Collection | Community | User; //| Thread;\n\nexport type UseFollowContext = Maybe<\n  Pick<Context, 'id' | 'followerCount' | '__typename' | 'name'> & {\n    myFollow: Maybe<Pick<Follow, 'id'>>;\n  }\n>;\n\nexport const useFollowContext = (ctx: UseFollowContext) => {\n  const [followMut, followMutStatus] = GQL.useFollowMutation();\n  const [unfollowMut, unfollowMutStatus] = GQL.useUnfollowMutation();\n  const mutating = followMutStatus.loading || unfollowMutStatus.loading;\n  const toggleFollow = useCallOrNotifyMustLogin(async () => {\n    const { id, followerCount, myFollow, __typename, name } = ctx || {};\n    if (!id || mutating) {\n      return;\n    }\n    if (!myFollow) {\n      const context = mnCtx({\n        ctx:\n          __typename === 'Collection'\n            ? `Following Collection ${name}`\n            : __typename === 'User'\n            ? `Following User ${name}`\n            : __typename === 'Community'\n            ? `Joined Community ${name}`\n            : void 0\n      });\n      return followMut({\n        variables: {\n          contextId: id\n        },\n        context,\n        optimisticResponse: optimisticFollow(__typename, id, followerCount || 0),\n        refetchQueries:\n          __typename === 'Community'\n            ? [\n                MyCommunityFollowsQueryRefetch({\n                  limit: SIDEBAR_MY_JOINED_LIST_LIMIT\n                }),\n                CommunityFollowersQueryRefetch({ communityId: id })\n              ]\n            : __typename === 'Collection'\n            ? [\n                MyCollectionFollowsQueryRefetch({\n                  limit: SIDEBAR_MY_JOINED_LIST_LIMIT\n                }),\n                CollectionFollowersQueryRefetch({ collectionId: id })\n              ]\n            : []\n      });\n    } else {\n      const context = mnCtx({\n        ctx:\n          __typename === 'Collection'\n            ? `Unfollowing Collection ${name}`\n            : __typename === 'User'\n            ? `Unfollowing User ${name}`\n            : __typename === 'Community'\n            ? `Leaving Community ${name}`\n            : void 0\n      });\n\n      return isOptimisticId(myFollow.id)\n        ? undefined\n        : unfollowMut({\n            variables: {\n              contextId: myFollow.id\n            },\n            context,\n            optimisticResponse: optimisticUnfollow(__typename, id, followerCount || 1),\n            refetchQueries:\n              __typename === 'Community'\n                ? [\n                    MyCommunityFollowsQueryRefetch({}),\n                    CommunityFollowersQueryRefetch({ communityId: id })\n                  ]\n                : __typename === 'Collection'\n                ? [\n                    MyCollectionFollowsQueryRefetch({}),\n                    CollectionFollowersQueryRefetch({ collectionId: id })\n                  ]\n                : []\n          });\n    }\n  }, [ctx, mutating]);\n\n  return useMemo(\n    () => ({\n      toggleFollow\n    }),\n    [toggleFollow]\n  );\n};\n\nconst optimisticFollow = (\n  __typename: any,\n  id: string,\n  followerCount: number\n): GQL.FollowMutation => ({\n  __typename: 'RootMutationType',\n  createFollow: {\n    __typename: 'Follow',\n    context: {\n      __typename,\n      id,\n      myFollow: { __typename: 'Follow', id: OPTIMISTIC_ID_STRING },\n      followerCount: followerCount + 1\n    }\n  }\n});\nconst optimisticUnfollow = (\n  __typename: any,\n  id: string,\n  followerCount: number\n): GQL.UnfollowMutation => ({\n  __typename: 'RootMutationType',\n  delete: {\n    __typename: 'Follow',\n    context: {\n      __typename,\n      id,\n      myFollow: null,\n      followerCount: followerCount - 1\n    }\n  }\n});\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CollectionPreviewFragment } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport gql from 'graphql-tag';\nimport { CollectionPreviewFragmentDoc } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type CollectionPreviewQueryVariables = {\n  collectionId: Types.Scalars['String']\n};\n\n\nexport type CollectionPreviewQuery = (\n  { __typename: 'RootQueryType' }\n  & { collection: Types.Maybe<(\n    { __typename: 'Collection' }\n    & Pick<Types.Collection, 'id'>\n    & CollectionPreviewFragment\n  )> }\n);\n\n\nexport const CollectionPreviewDocument = gql`\n    query collectionPreview($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    id\n    ...CollectionPreview\n  }\n}\n    ${CollectionPreviewFragmentDoc}`;\n\n/**\n * __useCollectionPreviewQuery__\n *\n * To run a query within a React component, call `useCollectionPreviewQuery` and pass it any options that fit your needs.\n * When your component renders, `useCollectionPreviewQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCollectionPreviewQuery({\n *   variables: {\n *      collectionId: // value for 'collectionId'\n *   },\n * });\n */\nexport function useCollectionPreviewQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CollectionPreviewQuery, CollectionPreviewQueryVariables>) {\n        return ApolloReactHooks.useQuery<CollectionPreviewQuery, CollectionPreviewQueryVariables>(CollectionPreviewDocument, baseOptions);\n      }\nexport function useCollectionPreviewLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CollectionPreviewQuery, CollectionPreviewQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CollectionPreviewQuery, CollectionPreviewQueryVariables>(CollectionPreviewDocument, baseOptions);\n        }\nexport type CollectionPreviewQueryHookResult = ReturnType<typeof useCollectionPreviewQuery>;\nexport type CollectionPreviewLazyQueryHookResult = ReturnType<typeof useCollectionPreviewLazyQuery>;\nexport type CollectionPreviewQueryResult = ApolloReactCommon.QueryResult<CollectionPreviewQuery, CollectionPreviewQueryVariables>;\n\n\nexport interface CollectionPreviewQueryOperation {\n  operationName: 'collectionPreview'\n  result: CollectionPreviewQuery\n  variables: CollectionPreviewQueryVariables\n  type: 'query'\n}\nexport const CollectionPreviewQueryName:CollectionPreviewQueryOperation['operationName'] = 'collectionPreview'\n\nexport const CollectionPreviewQueryRefetch = (\n  variables:CollectionPreviewQueryVariables, \n  context?:any\n)=>({\n  query:CollectionPreviewDocument,\n  variables,\n  context\n})\n      \n","import { Trans } from '@lingui/macro';\nimport { LocaleContext } from 'context/global/localizationCtx';\nimport { logo_small_url, my_timeline } from 'mn-constants';\nimport { ellipsis } from 'polished';\nimport * as React from 'react';\nimport { Globe } from 'react-feather';\nimport { NavLink } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { FormikHook } from 'ui/@types/types';\n// import Dropdown from \"./dropdown\";\nimport Avatar from 'ui/elements/Avatar';\n// import Loader from \"../../components/elements/Loader/Loader\";\nimport styled from '../../themes/styled';\nimport { LoadMore } from '../Loadmore';\n\nexport enum Status {\n  Loading,\n  Loaded\n}\n\nconst SidebarComponent = styled(Flex)`\n  width: 240px;\n  // ${media.lessThan('medium')`\n  //   width: 50px;\n  // `}\n`;\n\nconst InternalWrapper = styled(Box)<{ isOpen: boolean }>`\n  transition: 'all 250ms ease';\n  flex: 1;\n`;\n\nconst SidebarFixed = styled(Box)`\n  justify-content: space-between;\n  height: 100%;\n  display: flex;\n  ${media.lessThan('1280px')`\nwidth: auto;\n`} ${media.lessThan('860px')`\n    position: relative;\nwidth: 100%\n`};\n`;\n\nconst SidebarOverflow = styled(Box)`\n  overflow-y: auto;\n  flex: 1;\n`;\n\n// const Header = styled(Box)`\n//   cursor: pointer;\n//   img {\n//     min-width: 36px;\n//     height: 36px;\n//     border-radius: 36px;\n//   }\n//   input {\n//     margin: 0 8px !important;\n//     border-radius: 100px;/1\n//     border-width: 1px;\n//     ${media.lessThan('1280px')`\n// display: none;\n//     `};\n//   }\n// `;\nconst Nav = styled(Box)`\n  a {\n    text-decoration: none;\n  }\n`;\n\nconst CommunityLink = styled(NavLink)`\n  margin-bottom: 0px;\n  img {\n    width: 36px;\n    height: 36px;\n  }\n  &.active {\n    > div {\n      background: ${props => props.theme.colors.primary};\n    }\n    div {\n      color: ${props => props.theme.colors.appInverse} !important;\n    }\n    position: relative;\n  }\n`;\n\nconst SidebarLink = styled(NavLink)`\n  position: relative;\n  color: inherit;\n  img {\n    width: 36px;\n    height: 36px;\n  }\n  &.active {\n    div {\n      color: ${props => props.theme.colors.primary};\n      position: relative;\n    }\n  }\n  div {\n    color: ${props => (props.isActive ? props.theme.colors.primary : props.theme.colors.darker)};\n  }\n`;\n\nconst NavItem = styled(Flex)`\n  border-radius: 4px;\n  padding: 0px 4px;\n  &:hover {\n    background: ${props => props.theme.colors.medium};\n  }\n  ${media.lessThan('1280px')`\nimg {\n    margin-right: 0;\n}\n`};\n`;\n\nconst ItemTitle = styled(Text)`\n  height: 50px;\n  line-height: 50px;\n  font-size: 14px;\n  font-weight: 600;\n  color: ${props => props.theme.colors.darker};\n  a:focus,\n  a:active {\n    color: inherit;\n  }\n  ${ellipsis('220px')};\n`;\n\n// const Right = styled(Box)`\n// color: ${props => props.theme.colors.medium};\n// //${media.lessThan('1280px')`\n// //display: none;\n// //`};\n// `;\n\nconst ItemTitleDir = styled(ItemTitle)`\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n`;\n\n// const HeaderName = styled(Text)`\n//   flex: 1;\n//   ${ellipsis('180px')};\n//   font-size: 15px;\n// `;\n\nexport interface CommunityPreview {\n  link: string;\n  name: string;\n  icon: string;\n}\n\ninterface SidebarLoaded {\n  status: Status.Loaded;\n  discoverPath: string;\n  homePath: string;\n  isSidebarOpen: boolean;\n  communities: CommunityPreview[];\n  LoadMoreFormik: FormikHook | null;\n}\n\nexport interface SidebarLoading {\n  status: Status.Loading;\n  isSidebarOpen: boolean;\n}\n\nexport type Props = SidebarLoaded | SidebarLoading;\n\nexport const Sidebar: React.FC<Props> = props => {\n  const { i18n } = React.useContext(LocaleContext);\n\n  //  console.log('isSidebarOpen ' + props.isSidebarOpen );\n  return (\n    <>\n      {props.isSidebarOpen ? (\n        <SidebarComponent className=\"sidebar\">\n          <InternalWrapper>\n            <SidebarFixed>\n              {props.status === Status.Loading ? (\n                <Text>Loading</Text>\n              ) : (\n                <SidebarOverflow>\n                  <>\n                    <Nav>\n                      <SidebarLink exact to={props.discoverPath}>\n                        <NavItem alignItems={'center'}>\n                          <Box height=\"50px\">\n                            <Globe size={36} strokeWidth=\"1\" />\n                          </Box>\n                          <ItemTitleDir variant=\"link\">\n                            <Trans>Discover</Trans>\n                          </ItemTitleDir>\n                        </NavItem>\n                      </SidebarLink>\n                      <SidebarLink exact to={props.homePath}>\n                        <NavItem alignItems={'center'}>\n                          <Avatar size=\"s\" src={logo_small_url} />\n                          <ItemTitleDir variant=\"link\">{i18n._(my_timeline)}</ItemTitleDir>\n                        </NavItem>\n                      </SidebarLink>\n                    </Nav>\n                    <Nav>\n                      {props.communities.map((community: CommunityPreview, i) => (\n                        <CommunityLink exact key={community.link} to={community.link}>\n                          <NavItem alignItems={'center'} mb={2}>\n                            <Avatar\n                              size=\"s\"\n                              initials={community.name.substr(0, 2)}\n                              src={community.icon}\n                            />\n                            <ItemTitleDir variant=\"link\">{community.name}</ItemTitleDir>\n                          </NavItem>\n                        </CommunityLink>\n                      ))}\n                      {props.LoadMoreFormik && <LoadMore LoadMoreFormik={props.LoadMoreFormik} />}\n                    </Nav>\n                  </>\n                </SidebarOverflow>\n              )}\n            </SidebarFixed>\n          </InternalWrapper>\n        </SidebarComponent>\n      ) : null}\n    </>\n  );\n};\n\nexport default Sidebar;\n","import { useFollowContext } from 'fe/context/follow/useFollowContext';\nimport { Collection } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport { useCollectionPreviewQuery } from './useCollectionPreview.generated';\n\nexport const useCollectionPreview = (collectionId: Collection['id']) => {\n  const collectionPreviewQ = useCollectionPreviewQuery({\n    variables: { collectionId }\n  });\n  const { toggleFollow } = useFollowContext(\n    collectionPreviewQ.data?.collection\n  );\n  return useMemo(() => {\n    return {\n      collection: collectionPreviewQ.data?.collection,\n      toggleFollow\n    };\n  }, [collectionPreviewQ, toggleFollow]);\n};\n","import { Collection } from 'graphql/types.generated';\nimport React, { FC, useMemo } from 'react';\nimport {\n  Collection as CollectionPreviewUI,\n  Props as CollectionPreviewProps\n} from 'ui/modules/Previews/Collection';\nimport { useCollectionPreview } from 'fe/collection/preview/useCollectionPreview';\nimport { useFormik } from 'formik';\nimport { CollectionPreviewFragment } from './CollectionPreview.generated';\nimport { FormikHook } from 'ui/@types/types';\n\nexport interface Props {\n  collectionId: Collection['id'];\n  flagged?: boolean;\n}\n\nexport const CollectionPreviewHOC: FC<Props> = ({ collectionId, flagged }) => {\n  const { collection, toggleFollow } = useCollectionPreview(collectionId);\n  const toggleFollowFormik = useFormik({\n    initialValues: {},\n    onSubmit: toggleFollow\n  });\n\n  const collectionPreviewProps = useMemo<CollectionPreviewProps | null>(() => {\n    if (!collection) {\n      return null;\n    }\n\n    const hideActions = flagged ? true : false;\n    return collectionFragment2UIProps({\n      collection,\n      toggleFollowFormik,\n      hideActions\n    });\n  }, [collection, toggleFollowFormik, flagged]);\n\n  return collectionPreviewProps && <CollectionPreviewUI {...collectionPreviewProps} />;\n};\n\nexport const collectionFragment2UIProps = (args: {\n  collection: CollectionPreviewFragment;\n  toggleFollowFormik: FormikHook;\n  hideActions: boolean;\n}) => {\n  const { collection, hideActions, toggleFollowFormik } = args;\n  const {\n    id,\n    icon,\n    isLocal,\n    canonicalUrl,\n    name,\n    summary,\n    resourceCount,\n    displayUsername,\n    myFollow\n  } = collection;\n\n  const props: CollectionPreviewProps = {\n    displayUsername,\n    icon: icon?.url || '',\n    isFollowing: !!myFollow,\n    link: {\n      url: isLocal ? `/collections/${id}` : canonicalUrl || '',\n      external: !isLocal\n    },\n    name,\n    summary: summary || '',\n    totalResources: resourceCount || null,\n    toggleFollowFormik,\n    hideActions: hideActions\n  };\n  return props;\n};\n","import React, { FC, useMemo } from 'react';\nimport {\n  AllCollections as AllCollectionsUI,\n  Props as AllCollectionsUIProps\n} from 'ui/pages/allCollections';\nimport { useAllCollections } from 'fe/collection/all/useAllCollections';\nimport { CollectionPreviewHOC } from 'HOC/modules/previews/collection/CollectionPreview';\nimport { useFormik } from 'formik';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n\nconst allCollectionsPageTitle = t`All Collections`;\n\nexport interface AllCollectionsPage {}\nexport const AllCollectionsPage: FC<AllCollectionsPage> = () => {\n  usePageTitle(allCollectionsPageTitle);\n  const { allCollectionsPage } = useAllCollections();\n  const LoadMoreFormik = useFormik({\n    initialValues: {},\n    onSubmit: () => (allCollectionsPage.ready ? allCollectionsPage.next() : undefined)\n  });\n  const allCollectionsUIProps = useMemo<AllCollectionsUIProps>(() => {\n    const CollectionsBoxes = (\n      <>\n        {allCollectionsPage.edges.map(collectionPreview => (\n          <CollectionPreviewHOC collectionId={collectionPreview.id} />\n        ))}\n      </>\n    );\n    const props: AllCollectionsUIProps = {\n      CollectionsBoxes,\n      LoadMoreFormik\n    };\n\n    return props;\n  }, [allCollectionsPage, LoadMoreFormik]);\n\n  return <AllCollectionsUI {...allCollectionsUIProps} />;\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type DiscoverPageFeaturedCommunityInfoFragment = (\n  { __typename: 'Community' }\n  & Pick<Types.Community, 'id' | 'name'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )> }\n);\n\nexport type DiscoverPageFeaturedCollectionInfoFragment = (\n  { __typename: 'Collection' }\n  & Pick<Types.Collection, 'id' | 'name'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )> }\n);\n\nexport const DiscoverPageFeaturedCommunityInfoFragmentDoc = gql`\n    fragment DiscoverPageFeaturedCommunityInfo on Community {\n  id\n  icon {\n    id\n    url\n  }\n  name\n}\n    `;\nexport const DiscoverPageFeaturedCollectionInfoFragmentDoc = gql`\n    fragment DiscoverPageFeaturedCollectionInfo on Collection {\n  id\n  icon {\n    id\n    url\n  }\n  name\n}\n    `;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { DiscoverPageFeaturedCollectionInfoFragment } from '../../pages/discover/DiscoverPage.generated';\nimport gql from 'graphql-tag';\nimport { DiscoverPageFeaturedCollectionInfoFragmentDoc } from '../../pages/discover/DiscoverPage.generated';\n\n\nexport type CollectionFeatureFragment = (\n  { __typename: 'Feature' }\n  & Pick<Types.Feature, 'id'>\n  & { context: Types.Maybe<(\n    { __typename: 'Collection' }\n    & DiscoverPageFeaturedCollectionInfoFragment\n  ) | { __typename: 'Community' }> }\n);\n\nexport const CollectionFeatureFragmentDoc = gql`\n    fragment CollectionFeature on Feature {\n  id\n  context {\n    ...DiscoverPageFeaturedCollectionInfo\n  }\n}\n    ${DiscoverPageFeaturedCollectionInfoFragmentDoc}`;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CollectionFeatureFragment } from '../../../HOC/modules/FeaturedCollections/featuredCollection.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CollectionFeatureFragmentDoc } from '../../../HOC/modules/FeaturedCollections/featuredCollection.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type InstanceFeaturedCollectionsQueryVariables = {};\n\n\nexport type InstanceFeaturedCollectionsQuery = (\n  { __typename: 'RootQueryType' }\n  & { instance: Types.Maybe<(\n    { __typename: 'Instance' }\n    & { featuredCollections: Types.Maybe<(\n      { __typename: 'FeaturesPage' }\n      & Pick<Types.FeaturesPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Feature' }\n        & CollectionFeatureFragment\n      )> }\n    )> }\n  )> }\n);\n\n\nexport const InstanceFeaturedCollectionsDocument = gql`\n    query instanceFeaturedCollections {\n  instance {\n    featuredCollections @connection(key: \"instanceFeaturedCollections\") {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CollectionFeature\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CollectionFeatureFragmentDoc}`;\n\n/**\n * __useInstanceFeaturedCollectionsQuery__\n *\n * To run a query within a React component, call `useInstanceFeaturedCollectionsQuery` and pass it any options that fit your needs.\n * When your component renders, `useInstanceFeaturedCollectionsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useInstanceFeaturedCollectionsQuery({\n *   variables: {\n *   },\n * });\n */\nexport function useInstanceFeaturedCollectionsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<InstanceFeaturedCollectionsQuery, InstanceFeaturedCollectionsQueryVariables>) {\n        return ApolloReactHooks.useQuery<InstanceFeaturedCollectionsQuery, InstanceFeaturedCollectionsQueryVariables>(InstanceFeaturedCollectionsDocument, baseOptions);\n      }\nexport function useInstanceFeaturedCollectionsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<InstanceFeaturedCollectionsQuery, InstanceFeaturedCollectionsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<InstanceFeaturedCollectionsQuery, InstanceFeaturedCollectionsQueryVariables>(InstanceFeaturedCollectionsDocument, baseOptions);\n        }\nexport type InstanceFeaturedCollectionsQueryHookResult = ReturnType<typeof useInstanceFeaturedCollectionsQuery>;\nexport type InstanceFeaturedCollectionsLazyQueryHookResult = ReturnType<typeof useInstanceFeaturedCollectionsLazyQuery>;\nexport type InstanceFeaturedCollectionsQueryResult = ApolloReactCommon.QueryResult<InstanceFeaturedCollectionsQuery, InstanceFeaturedCollectionsQueryVariables>;\n\n\nexport interface InstanceFeaturedCollectionsQueryOperation {\n  operationName: 'instanceFeaturedCollections'\n  result: InstanceFeaturedCollectionsQuery\n  variables: InstanceFeaturedCollectionsQueryVariables\n  type: 'query'\n}\nexport const InstanceFeaturedCollectionsQueryName:InstanceFeaturedCollectionsQueryOperation['operationName'] = 'instanceFeaturedCollections'\n\nexport const InstanceFeaturedCollectionsQueryRefetch = (\n  variables:InstanceFeaturedCollectionsQueryVariables, \n  context?:any\n)=>({\n  query:InstanceFeaturedCollectionsDocument,\n  variables,\n  context\n})\n      \n","import { useMemo } from 'react';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { useInstanceFeaturedCollectionsQuery } from './instanceFeaturedCollections.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useInstanceFeaturedCollections = () => {\n  const featuredCollectionsQ = useInstanceFeaturedCollectionsQuery();\n  const featuredCollectionsPage = usePage(\n    featuredCollectionsQ.data?.instance?.featuredCollections,\n    ({ cursor, update }) => {\n      return featuredCollectionsQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.instance?.featuredCollections &&\n            prev.instance?.featuredCollections\n            ? {\n                ...fetchMoreResult,\n                instance: {\n                  ...fetchMoreResult.instance,\n                  feturedCollections: update({\n                    prev: prev.instance.featuredCollections,\n                    fetched: fetchMoreResult.instance.featuredCollections\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(() => {\n    return {\n      featuredCollectionsPage\n    };\n  }, [featuredCollectionsPage]);\n};\n","import * as React from 'react';\n\ninterface IconProps {\n  width: number;\n  height: number;\n  strokeWidth: number;\n  color: string;\n}\n\n// ACTIVITIES\nexport const Activity: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\" />\n  </svg>\n);\n\n// SIDEBAR\nexport const Sidebar: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <g\n      id=\"Artboard\"\n      stroke=\"none\"\n      strokeWidth=\"1\"\n      fill=\"none\"\n      fillRule=\"evenodd\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <g\n        id=\"sidebar\"\n        transform=\"translate(9.000000, 9.000000) scale(-1, 1) translate(-9.000000, -9.000000) translate(1.000000, 1.000000)\"\n        stroke={color}\n        strokeWidth={strokeWidth}\n      >\n        <rect id=\"Rectangle-path\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" rx=\"2\" />\n        <path d=\"M5.33333333,0 L5.33333333,16\" id=\"Shape\" />\n      </g>\n    </g>\n  </svg>\n);\n\n// GRID\nexport const Grid: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <g\n      id=\"Artboard-Copy\"\n      stroke=\"none\"\n      strokeWidth=\"1\"\n      fill=\"none\"\n      fillRule=\"evenodd\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <g\n        id=\"grid\"\n        transform=\"translate(1.000000, 1.000000)\"\n        stroke={color}\n        strokeWidth={strokeWidth}\n      >\n        <rect id=\"Rectangle-path\" x=\"0\" y=\"0\" width=\"7\" height=\"7\" />\n        <rect id=\"Rectangle-path\" x=\"11\" y=\"0\" width=\"7\" height=\"7\" />\n        <rect id=\"Rectangle-path\" x=\"11\" y=\"11\" width=\"7\" height=\"7\" />\n        <rect id=\"Rectangle-path\" x=\"0\" y=\"11\" width=\"7\" height=\"7\" />\n      </g>\n    </g>\n  </svg>\n);\n\n// SIDEBAR\nexport const Diary: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <path d=\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\" />\n    <path d=\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\" />\n  </svg>\n);\n\n// SIDEBAR\nexport const Collection: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <polygon points=\"12 2 2 7 12 12 22 7 12 2\" />\n    <polyline points=\"2 17 12 22 22 17\" />\n    <polyline points=\"2 12 12 17 22 12\" />\n  </svg>\n);\n\n// CALENDAR\nexport const Calendar: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n    <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\" />\n    <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\" />\n    <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\" />\n  </svg>\n);\n\n// LINK\nexport const Link: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\" />\n    <path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\" />\n  </svg>\n);\n\n// EYE\nexport const Eye: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" />\n    <circle cx=\"12\" cy=\"12\" r=\"3\" />\n  </svg>\n);\n\n// INVENTORY\nexport const Inventory: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <rect x=\"2\" y=\"7\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\" />\n    <path d=\"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16\" />\n  </svg>\n);\n\n// GLOBE\nexport const Globe: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <circle cx=\"12\" cy=\"12\" r=\"10\" />\n    <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\" />\n    <path d=\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\" />\n  </svg>\n);\n\n// HOME\nexport const Home: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\" />\n    <polyline points=\"9 22 9 12 15 12 15 22\" />\n  </svg>\n);\n\n// WORK\nexport const Work: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <circle cx=\"12\" cy=\"12\" r=\"10\" />\n    <circle cx=\"12\" cy=\"12\" r=\"6\" />\n    <circle cx=\"12\" cy=\"12\" r=\"2\" />\n  </svg>\n);\n\n// Search\nexport const Search: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <circle cx=\"11\" cy=\"11\" r=\"8\" />\n    <line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n  </svg>\n);\n\n// VALIDATE\nexport const Validate: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <circle cx=\"18\" cy=\"18\" r=\"3\" />\n    <circle cx=\"6\" cy=\"6\" r=\"3\" />\n    <path d=\"M13 6h3a2 2 0 0 1 2 2v7\" />\n    <line x1=\"6\" y1=\"9\" x2=\"6\" y2=\"21\" />\n  </svg>\n);\n\n// BELL\nexport const Bell: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <path d=\"M22 17H2a3 3 0 0 0 3-3V9a7 7 0 0 1 14 0v5a3 3 0 0 0 3 3zm-8.27 4a2 2 0 0 1-3.46 0\" />\n  </svg>\n);\n\n// User\nexport const User: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\" />\n    <circle cx=\"12\" cy=\"7\" r=\"4\" />\n  </svg>\n);\n// Settings\nexport const Settings: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <line x1=\"4\" y1=\"21\" x2=\"4\" y2=\"14\" />\n    <line x1=\"4\" y1=\"10\" x2=\"4\" y2=\"3\" />\n    <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"12\" />\n    <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"3\" />\n    <line x1=\"20\" y1=\"21\" x2=\"20\" y2=\"16\" />\n    <line x1=\"20\" y1=\"12\" x2=\"20\" y2=\"3\" />\n    <line x1=\"1\" y1=\"14\" x2=\"7\" y2=\"14\" />\n    <line x1=\"9\" y1=\"8\" x2=\"15\" y2=\"8\" />\n    <line x1=\"17\" y1=\"16\" x2=\"23\" y2=\"16\" />\n  </svg>\n);\n// Power\nexport const Power: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <path d=\"M18.36 6.64a9 9 0 1 1-12.73 0\" />\n    <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"12\" />\n  </svg>\n);\n// Preferites\nexport const Preferites: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\" />\n  </svg>\n);\n\n// MENU\nexport const Menu: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    color={color}\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-activity\"\n  >\n    <line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\" />\n    <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\" />\n    <line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\" />\n  </svg>\n);\n\n// CARD\nexport const Card: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-clipboard\"\n  >\n    <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\" />\n    <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\" />\n  </svg>\n);\n\n// CARD\nexport const ChevronLeft: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-clipboard\"\n  >\n    <polyline points=\"15 18 9 12 15 6\" />\n  </svg>\n);\n\n// LEFT\nexport const Left: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-clipboard\"\n  >\n    <line x1=\"20\" y1=\"12\" x2=\"4\" y2=\"12\" />\n    <polyline points=\"10 18 4 12 10 6\" />\n  </svg>\n);\n// ArrowUP\nexport const Arrowup: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-clipboard\"\n  >\n    <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"5\" />\n    <polyline points=\"5 12 12 5 19 12\" />\n  </svg>\n);\n\n// RIGHT\nexport const ArrowRight: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-clipboard\"\n  >\n    <line x1=\"4\" y1=\"12\" x2=\"20\" y2=\"12\" />\n    <polyline points=\"14 6 20 12 14 18\" />\n  </svg>\n);\n\n// CLOCK\nexport const Clock: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-clipboard\"\n  >\n    <circle cx=\"12\" cy=\"12\" r=\"10\" />\n    <polyline points=\"12 6 12 12 16 14\" />\n  </svg>\n);\n\n// TEXT\nexport const Text: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-align-left\"\n  >\n    <line x1=\"17\" y1=\"10\" x2=\"3\" y2=\"10\" />\n    <line x1=\"21\" y1=\"6\" x2=\"3\" y2=\"6\" />\n    <line x1=\"21\" y1=\"14\" x2=\"3\" y2=\"14\" />\n    <line x1=\"17\" y1=\"18\" x2=\"3\" y2=\"18\" />\n  </svg>\n);\n\n// MESSAGE\nexport const Message: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-message-square\"\n  >\n    <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" />\n  </svg>\n);\n\n// CROSS\nexport const Cross: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-x\"\n  >\n    <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n    <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n  </svg>\n);\n\n// USERS\nexport const Users: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\" />\n    <circle cx=\"9\" cy=\"7\" r=\"4\" />\n    <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\" />\n    <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n  </svg>\n);\n\n// CHECK\nexport const Check: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"20 6 9 17 4 12\" />\n  </svg>\n);\n\n// SHIELD\nexport const Shield: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <path d=\"M12 22s8-4 8-10V4l-8-2-8 2v8c0 6 8 10 8 10z\" />\n  </svg>\n);\n\n// PLUS\nexport const Plus: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n  </svg>\n);\n\n// Inbox\nexport const Inbox: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"22 12 16 12 14 15 10 15 8 12 2 12\" />\n    <path d=\"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z\" />\n  </svg>\n);\n\n// MORE\nexport const More: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <circle cx=\"12\" cy=\"12\" r=\"1\" />\n    <circle cx=\"19\" cy=\"12\" r=\"1\" />\n    <circle cx=\"5\" cy=\"12\" r=\"1\" />\n  </svg>\n);\n\n// EDIT\nexport const Edit: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polygon points=\"16 3 21 8 8 21 3 21 3 16 16 3\" />\n  </svg>\n);\n\n// SEND\nexport const Send: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\" />\n    <polygon points=\"22 2 15 22 11 13 2 9 22 2\" />\n  </svg>\n);\n\n// Reply\nexport const Reply: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"9 14 4 9 9 4\" />\n    <path d=\"M20 20v-7a4 4 0 0 0-4-4H4\" />\n  </svg>\n);\n\n// Reply\nexport const Right: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"9 18 15 12 9 6\" />\n  </svg>\n);\n\n// Down\nexport const Down: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"6 9 12 15 18 9\" />\n  </svg>\n);\n\n// Share\nexport const Share: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"17 1 21 5 17 9\" />\n    <path d=\"M3 11V9a4 4 0 0 1 4-4h14\" />\n    <polyline points=\"7 23 3 19 7 15\" />\n    <path d=\"M21 13v2a4 4 0 0 1-4 4H3\" />\n  </svg>\n);\n\n// Share\nexport const UpRight: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"15 14 20 9 15 4\" />\n    <path d=\"M4 20v-7a4 4 0 0 1 4-4h12\" />\n  </svg>\n);\n\n// Share\nexport const UpLeft: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"9 14 4 9 9 4\" />\n    <path d=\"M20 20v-7a4 4 0 0 0-4-4H4\" />\n  </svg>\n);\n\n// EDIT-2\nexport const Edit2: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <path d=\"M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34\" />\n    <polygon points=\"18 2 22 6 12 16 8 16 8 12 18 2\" />\n  </svg>\n);\n\n// TRASH\nexport const Trash: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"3 6 5 6 21 6\" />\n    <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n    <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" />\n    <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" />\n  </svg>\n);\n\n// FOLDER\nexport const Folder: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\" />\n  </svg>\n);\n// UP\nexport const Up: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"18 15 12 9 6 15\" />\n  </svg>\n);\n\n// NEWFILE\nexport const NewFile: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\n    <polyline points=\"14 2 14 8 20 8\" />\n    <line x1=\"12\" y1=\"18\" x2=\"12\" y2=\"12\" />\n    <line x1=\"9\" y1=\"15\" x2=\"15\" y2=\"15\" />\n  </svg>\n);\n\n// STAR\nexport const Star: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\" />\n  </svg>\n);\n\n// TYPE\nexport const Type: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <polyline points=\"4 7 4 4 20 4 20 7\" />\n    <line x1=\"9\" y1=\"20\" x2=\"15\" y2=\"20\" />\n    <line x1=\"12\" y1=\"4\" x2=\"12\" y2=\"20\" />\n  </svg>\n);\n\n// Dollar\nexport const Dollar: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"23\" />\n    <path d=\"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\" />\n  </svg>\n);\n\n// LOCK\nexport const Lock: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\" />\n    <path d=\"M7 11V7a5 5 0 0 1 10 0v4\" />\n  </svg>\n);\n\n// COPY\nexport const Copy: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\" />\n    <path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\" />\n  </svg>\n);\n\n// COPY\nexport const Resource: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\n    <polyline points=\"14 2 14 8 20 8\" />\n    <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\n    <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\n    <polyline points=\"10 9 9 9 8 9\" />\n  </svg>\n);\n\n// // COPY\n// export const Community: React.FC<IconProps> = ({\n//   width = 24,\n//   height = 24,\n//   strokeWidth = 2,\n//   color = '#333'\n// }) => (\n//   <svg\n//     xmlns=\"http://www.w3.org/2000/svg\"\n//     color={color}\n//     width={width}\n//     height={height}\n//     viewBox=\"0 0 24 24\"\n//     fill=\"none\"\n//     stroke=\"currentColor\"\n//     strokeWidth={strokeWidth}\n//     strokeLinecap=\"round\"\n//     strokeLinejoin=\"round\"\n//     className=\"feather feather-users\"\n//   >\n//     <path d=\"M18 8h1a4 4 0 0 1 0 8h-1\" />\n//     <path d=\"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z\" />\n//     <line x1=\"6\" y1=\"1\" x2=\"6\" y2=\"4\" />\n//     <line x1=\"10\" y1=\"1\" x2=\"10\" y2=\"4\" />\n//     <line x1=\"14\" y1=\"1\" x2=\"14\" y2=\"4\" />\n//   </svg>\n// );\n\n// COPY\nexport const Community: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\" />\n    <circle cx=\"9\" cy=\"7\" r=\"4\" />\n    <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\" />\n    <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n  </svg>\n);\n\n// COPY\nexport const Unfollow: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <path d=\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\" />\n    <line x1=\"1\" y1=\"1\" x2=\"23\" y2=\"23\" />\n  </svg>\n);\n\n// Minus\nexport const Minus: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n  </svg>\n);\n\n// LOADING\nexport const Loading: React.FC<IconProps> = ({\n  width = 24,\n  height = 24,\n  strokeWidth = 2,\n  color = '#333'\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    color={color}\n    width={width}\n    height={height}\n    viewBox=\"0 0 38 38\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={strokeWidth}\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-users\"\n  >\n    <defs>\n      <linearGradient x1=\"8.042%\" y1=\"0%\" x2=\"65.682%\" y2=\"23.865%\" id=\"a\">\n        <stop stopColor={color} stopOpacity=\"0\" offset=\"0%\" />\n        <stop stopColor={color} stopOpacity=\".631\" offset=\"63.146%\" />\n        <stop stopColor={color} offset=\"100%\" />\n      </linearGradient>\n    </defs>\n    <g fill=\"none\" fillRule=\"evenodd\">\n      <g transform=\"translate(1 1)\">\n        <path\n          d=\"M36 18c0-9.94-8.06-18-18-18\"\n          id=\"Oval-2\"\n          stroke=\"url(#a)\"\n          strokeWidth={strokeWidth}\n        >\n          <animateTransform\n            attributeName=\"transform\"\n            type=\"rotate\"\n            from=\"0 18 18\"\n            to=\"360 18 18\"\n            dur=\"0.9s\"\n            repeatCount=\"indefinite\"\n          />\n        </path>\n        <circle fill={color} cx=\"36\" cy=\"18\" r=\"1\">\n          <animateTransform\n            attributeName=\"transform\"\n            type=\"rotate\"\n            from=\"0 18 18\"\n            to=\"360 18 18\"\n            dur=\"0.9s\"\n            repeatCount=\"indefinite\"\n          />\n        </circle>\n      </g>\n    </g>\n  </svg>\n);\n\nexport default {\n  Activity,\n  UpLeft,\n  Down,\n  UpRight,\n  Dollar,\n  Search,\n  Eye,\n  Resource,\n  Minus,\n  Share,\n  Send,\n  Reply,\n  Sidebar,\n  Grid,\n  Type,\n  Up,\n  Clock,\n  Link,\n  Copy,\n  NewFile,\n  Community,\n  Folder,\n  Lock,\n  Star,\n  Collection,\n  Trash,\n  Edit2,\n  Loading,\n  Arrowup,\n  Calendar,\n  Edit,\n  Diary,\n  Inventory,\n  Globe,\n  Home,\n  Work,\n  Validate,\n  Inbox,\n  Bell,\n  User,\n  Settings,\n  Power,\n  Preferites,\n  Menu,\n  Card,\n  Left,\n  Right,\n  Text,\n  ChevronLeft,\n  ArrowRight,\n  Unfollow,\n  Message,\n  Cross,\n  Users,\n  Check,\n  Shield,\n  Plus,\n  More\n};\n","import { Trans } from '@lingui/macro';\nimport React, { SFC, useRef, ReactElement } from 'react';\nimport Slider from 'react-slick';\nimport { Box, Flex } from 'rebass';\nimport 'slick-carousel/slick/slick-theme.css';\nimport 'slick-carousel/slick/slick.css';\nimport Button from 'ui/elements/Button';\nimport { ChevronLeft, Right } from 'ui/Icons';\nimport styled from 'ui/themes/styled';\n\nexport const Title = styled(Flex)`\n  font-size: 15px;\n  font-weight: 700;\n  padding: 8px;\n  border-bottom: ${props => props.theme.colors.border};\n  margin: 0;\n  color: ${props => props.theme.colors.mediumdark};\n  & h5 {\n    margin: 0;\n    color: ${props => props.theme.colors.mediumdark};\n    display: inline-block;\n    flex: 1;\n    padding: 0;\n    font-size: 12px;\n    text-transform: uppercase;\n    height: 30px;\n    font-weight: 500;\n    line-height: 30px;\n  }\n`;\n\nexport const RightContext = styled(Flex)`\n  & span {\n    cursor: pointer;\n    display: inline-block;\n    height: 30px;\n    & svg {\n      color: ${props => props.theme.colors.mediumdark} !important;\n      vertical-align: middle;\n      height: 30px;\n    }\n    &:hover {\n      & svg {\n        color: ${props => props.theme.colors.mediumdark} !important;\n      }\n    }\n  }\n  float: right;\n`;\n\nconst ActionContainer = styled(Flex)`\n  justify-content: right;\n  align-items: center;\n`;\n\nconst ActionItem = styled(Flex)`\n  display: inline-flex;\n  color: ${props => props.theme.colors.medium};\n  cursor: pointer;\n  padding-right: 10px;\n  button {\n    height: 30px;\n    line-height: 10px;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ${props => props.theme.colors.primary};\n    }\n  }\n`;\n\nexport interface FeaturedCollectionsData {\n  canEdit: boolean;\n  featuredCollections: ReactElement[];\n  toggleEdit(): any;\n  isEditing: boolean;\n}\n\nexport const FeaturedCollections: SFC<FeaturedCollectionsData> = props => {\n  const sliderRef = useRef<Slider>();\n\n  return (\n    <>\n      <Title>\n        <h5>\n          <Trans>Featured collections</Trans>{' '}\n        </h5>\n\n        <RightContext>\n          {props.canEdit ? (\n            <ActionContainer>\n              <ActionItem onClick={props.toggleEdit}>\n                {!props.isEditing ? (\n                  <Button variant={'outline'}>\n                    <Trans>Edit</Trans>\n                  </Button>\n                ) : (\n                  <Button variant={'outline'}>\n                    <Trans>Done</Trans>\n                  </Button>\n                )}\n              </ActionItem>\n            </ActionContainer>\n          ) : null}\n          <span onClick={sliderRef.current && sliderRef.current.slickPrev}>\n            <ChevronLeft width={26} height={26} strokeWidth={1} color={'#333'} />\n          </span>\n          <span onClick={sliderRef.current && sliderRef.current.slickNext}>\n            <Right width={26} height={26} strokeWidth={1} color={'#333'} />\n          </span>\n        </RightContext>\n      </Title>\n      <Box px={2}>\n        <Slider\n          ref={c => (sliderRef.current = c || undefined)}\n          {...sliderSettings(props.featuredCollections.length)}\n        >\n          {props.featuredCollections}\n        </Slider>\n      </Box>\n    </>\n  );\n};\n\nexport default FeaturedCollections;\n\nconst sliderSettings = (slidesToShow: number) => ({\n  dots: false,\n  arrows: false,\n  infinite: true,\n  autoplay: false,\n  speed: 500,\n  slidesToShow: slidesToShow > 3 ? 3 : slidesToShow,\n  slidesToScroll: 1,\n  responsive: [\n    {\n      breakpoint: 1024,\n      settings: {\n        slidesToShow: slidesToShow > 3 ? 3 : slidesToShow,\n        slidesToScroll: 1\n      }\n    },\n    {\n      breakpoint: 600,\n      settings: {\n        slidesToShow: slidesToShow > 2 ? 2 : slidesToShow,\n        slidesToScroll: 1\n      }\n    },\n    {\n      breakpoint: 480,\n      settings: {\n        slidesToShow: 1,\n        slidesToScroll: 1\n      }\n    }\n  ]\n});\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Box, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport styled from 'ui/themes/styled';\nimport { ellipsis } from 'polished';\nimport { X } from 'react-feather';\nconst PlaceholderImg = require('ui/Icons/collectionPlaceholder.png');\n\nexport interface CollectionBase {\n  link: string;\n  name: string;\n  icon: string;\n}\n\nexport interface CollectionProps {\n  collection: CollectionBase;\n  canEdit: boolean;\n  isEditing: boolean;\n  remove(): unknown;\n}\nconst CollectionSmall: React.FC<CollectionProps> = ({ collection, canEdit, isEditing, remove }) => {\n  return (\n    <Wrapper py={1} mb={2} mr={3}>\n      {canEdit && isEditing ? (\n        <Remove onClick={remove}>\n          <X color=\"#fff\" size={16} />\n        </Remove>\n      ) : null}\n      <Link to={collection.link}>\n        <Img\n          style={{\n            backgroundImage: `url(\"${collection.icon || PlaceholderImg}\")`\n          }}\n        >\n          <Infos>\n            <Title fontSize={1} my={2} fontWeight={600}>\n              {collection.name.length > 80\n                ? collection.name.replace(/^(.{76}[^\\s]*).*/, '$1...')\n                : collection.name}\n            </Title>\n          </Infos>\n        </Img>\n      </Link>\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled(Box)`\n  cursor: pointer;\n  position: relative;\n  max-width: 200px;\n  max-height: 270px;\n  border-radius: 4px;\n  padding-top: 10px;\n  ${media.lessThan('medium')`\n  display: block;\n`} & a {\n    color: inherit;\n    text-decoration: none;\n    width: 100%;\n  }\n`;\nconst Img = styled.div`\n  //   width: 100%;\n  height: auto;\n  padding: 50%;\n  border-radius: 4px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n`;\nconst Infos = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  padding: 0 8px;\n  background: rgba(0, 0, 0, 0.8);\n`;\n\nconst Title = styled(Text)`\n  color: rgba(250, 250, 250);\n  ${ellipsis('170px')};\n  font-size: 14px;\n  margin: 0;\n  line-height: 40px;\n`;\n\nconst Remove = styled(Box)`\n  position: absolute;\n  right: -9px;\n  top: 0px;\n  cursor: pointer;\n  background: ${props => props.theme.colors.medium};\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n`;\nexport default CollectionSmall;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { DiscoverPageFeaturedCommunityInfoFragment } from '../../pages/discover/DiscoverPage.generated';\nimport gql from 'graphql-tag';\nimport { DiscoverPageFeaturedCommunityInfoFragmentDoc } from '../../pages/discover/DiscoverPage.generated';\n\n\nexport type CommunityFeatureFragment = (\n  { __typename: 'Feature' }\n  & Pick<Types.Feature, 'id'>\n  & { context: Types.Maybe<{ __typename: 'Collection' } | (\n    { __typename: 'Community' }\n    & DiscoverPageFeaturedCommunityInfoFragment\n  )> }\n);\n\nexport const CommunityFeatureFragmentDoc = gql`\n    fragment CommunityFeature on Feature {\n  id\n  context {\n    ...DiscoverPageFeaturedCommunityInfo\n  }\n}\n    ${DiscoverPageFeaturedCommunityInfoFragmentDoc}`;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommunityFeatureFragment } from '../../../HOC/modules/FeaturedCommunities/featuredCommunity.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CommunityFeatureFragmentDoc } from '../../../HOC/modules/FeaturedCommunities/featuredCommunity.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type InstanceFeaturedCommunitiesQueryVariables = {};\n\n\nexport type InstanceFeaturedCommunitiesQuery = (\n  { __typename: 'RootQueryType' }\n  & { instance: Types.Maybe<(\n    { __typename: 'Instance' }\n    & { featuredCommunities: Types.Maybe<(\n      { __typename: 'FeaturesPage' }\n      & Pick<Types.FeaturesPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Feature' }\n        & CommunityFeatureFragment\n      )> }\n    )> }\n  )> }\n);\n\n\nexport const InstanceFeaturedCommunitiesDocument = gql`\n    query instanceFeaturedCommunities {\n  instance {\n    featuredCommunities @connection(key: \"instanceFeaturedCommunities\") {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityFeature\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CommunityFeatureFragmentDoc}`;\n\n/**\n * __useInstanceFeaturedCommunitiesQuery__\n *\n * To run a query within a React component, call `useInstanceFeaturedCommunitiesQuery` and pass it any options that fit your needs.\n * When your component renders, `useInstanceFeaturedCommunitiesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useInstanceFeaturedCommunitiesQuery({\n *   variables: {\n *   },\n * });\n */\nexport function useInstanceFeaturedCommunitiesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<InstanceFeaturedCommunitiesQuery, InstanceFeaturedCommunitiesQueryVariables>) {\n        return ApolloReactHooks.useQuery<InstanceFeaturedCommunitiesQuery, InstanceFeaturedCommunitiesQueryVariables>(InstanceFeaturedCommunitiesDocument, baseOptions);\n      }\nexport function useInstanceFeaturedCommunitiesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<InstanceFeaturedCommunitiesQuery, InstanceFeaturedCommunitiesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<InstanceFeaturedCommunitiesQuery, InstanceFeaturedCommunitiesQueryVariables>(InstanceFeaturedCommunitiesDocument, baseOptions);\n        }\nexport type InstanceFeaturedCommunitiesQueryHookResult = ReturnType<typeof useInstanceFeaturedCommunitiesQuery>;\nexport type InstanceFeaturedCommunitiesLazyQueryHookResult = ReturnType<typeof useInstanceFeaturedCommunitiesLazyQuery>;\nexport type InstanceFeaturedCommunitiesQueryResult = ApolloReactCommon.QueryResult<InstanceFeaturedCommunitiesQuery, InstanceFeaturedCommunitiesQueryVariables>;\n\n\nexport interface InstanceFeaturedCommunitiesQueryOperation {\n  operationName: 'instanceFeaturedCommunities'\n  result: InstanceFeaturedCommunitiesQuery\n  variables: InstanceFeaturedCommunitiesQueryVariables\n  type: 'query'\n}\nexport const InstanceFeaturedCommunitiesQueryName:InstanceFeaturedCommunitiesQueryOperation['operationName'] = 'instanceFeaturedCommunities'\n\nexport const InstanceFeaturedCommunitiesQueryRefetch = (\n  variables:InstanceFeaturedCommunitiesQueryVariables, \n  context?:any\n)=>({\n  query:InstanceFeaturedCommunitiesDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type AddFeaturedMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type AddFeaturedMutation = (\n  { __typename: 'RootMutationType' }\n  & { createFeature: Types.Maybe<(\n    { __typename: 'Feature' }\n    & { context: Types.Maybe<(\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id'>\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id'>\n    )> }\n  )> }\n);\n\nexport type RemoveFeaturedMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type RemoveFeaturedMutation = (\n  { __typename: 'RootMutationType' }\n  & { delete: Types.Maybe<{ __typename: 'Collection' } | { __typename: 'Comment' } | { __typename: 'Community' } | (\n    { __typename: 'Feature' }\n    & { context: Types.Maybe<(\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id'>\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id'>\n    )> }\n  ) | { __typename: 'Flag' } | { __typename: 'Follow' } | { __typename: 'Like' } | { __typename: 'Resource' } | { __typename: 'Thread' } | { __typename: 'User' }> }\n);\n\n\nexport const AddFeaturedDocument = gql`\n    mutation addFeatured($contextId: String!) {\n  createFeature(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n      }\n      ... on Community {\n        id\n      }\n    }\n  }\n}\n    `;\nexport type AddFeaturedMutationFn = ApolloReactCommon.MutationFunction<AddFeaturedMutation, AddFeaturedMutationVariables>;\n\n/**\n * __useAddFeaturedMutation__\n *\n * To run a mutation, you first call `useAddFeaturedMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAddFeaturedMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [addFeaturedMutation, { data, loading, error }] = useAddFeaturedMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useAddFeaturedMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AddFeaturedMutation, AddFeaturedMutationVariables>) {\n        return ApolloReactHooks.useMutation<AddFeaturedMutation, AddFeaturedMutationVariables>(AddFeaturedDocument, baseOptions);\n      }\nexport type AddFeaturedMutationHookResult = ReturnType<typeof useAddFeaturedMutation>;\nexport type AddFeaturedMutationResult = ApolloReactCommon.MutationResult<AddFeaturedMutation>;\nexport type AddFeaturedMutationOptions = ApolloReactCommon.BaseMutationOptions<AddFeaturedMutation, AddFeaturedMutationVariables>;\nexport const RemoveFeaturedDocument = gql`\n    mutation removeFeatured($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Feature {\n      context {\n        ... on Collection {\n          id\n        }\n        ... on Community {\n          id\n        }\n      }\n    }\n  }\n}\n    `;\nexport type RemoveFeaturedMutationFn = ApolloReactCommon.MutationFunction<RemoveFeaturedMutation, RemoveFeaturedMutationVariables>;\n\n/**\n * __useRemoveFeaturedMutation__\n *\n * To run a mutation, you first call `useRemoveFeaturedMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useRemoveFeaturedMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [removeFeaturedMutation, { data, loading, error }] = useRemoveFeaturedMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useRemoveFeaturedMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<RemoveFeaturedMutation, RemoveFeaturedMutationVariables>) {\n        return ApolloReactHooks.useMutation<RemoveFeaturedMutation, RemoveFeaturedMutationVariables>(RemoveFeaturedDocument, baseOptions);\n      }\nexport type RemoveFeaturedMutationHookResult = ReturnType<typeof useRemoveFeaturedMutation>;\nexport type RemoveFeaturedMutationResult = ApolloReactCommon.MutationResult<RemoveFeaturedMutation>;\nexport type RemoveFeaturedMutationOptions = ApolloReactCommon.BaseMutationOptions<RemoveFeaturedMutation, RemoveFeaturedMutationVariables>;\n\n\nexport interface AddFeaturedMutationOperation {\n  operationName: 'addFeatured'\n  result: AddFeaturedMutation\n  variables: AddFeaturedMutationVariables\n  type: 'mutation'\n}\nexport const AddFeaturedMutationName:AddFeaturedMutationOperation['operationName'] = 'addFeatured'\n\nexport const AddFeaturedMutationRefetch = (\n  variables:AddFeaturedMutationVariables, \n  context?:any\n)=>({\n  query:AddFeaturedDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface RemoveFeaturedMutationOperation {\n  operationName: 'removeFeatured'\n  result: RemoveFeaturedMutation\n  variables: RemoveFeaturedMutationVariables\n  type: 'mutation'\n}\nexport const RemoveFeaturedMutationName:RemoveFeaturedMutationOperation['operationName'] = 'removeFeatured'\n\nexport const RemoveFeaturedMutationRefetch = (\n  variables:RemoveFeaturedMutationVariables, \n  context?:any\n)=>({\n  query:RemoveFeaturedDocument,\n  variables,\n  context\n})\n      \n","import { InstanceFeaturedCollectionsQueryRefetch } from 'fe/instance/featuredCollections/instanceFeaturedCollections.generated';\nimport { InstanceFeaturedCommunitiesQueryRefetch } from 'fe/instance/featuredCommunities/instanceFeaturedCommunities.generated';\nimport {\n  useAddFeaturedMutation,\n  useRemoveFeaturedMutation\n} from 'fe/mutation/feature/useMutateFeature.generated';\nimport { Collection, Community, Feature } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { useMemo } from 'react';\n\nexport type Actor = Collection | Community;\n\nexport type UseFeaturedContext =\n  | {\n      isFeatured: false;\n      actor: /* Maybe< */ Pick<Actor, 'id' | '__typename'> /* > */;\n    }\n  | {\n      isFeatured: true;\n      featureId: Feature['id'];\n      __typename: Actor['__typename'];\n    };\n\nexport const useFeaturedContext = (ctx: UseFeaturedContext) => {\n  const [addFeaturedMut, addFeaturedMutStatus] = useAddFeaturedMutation();\n  const [rmFeaturedMut, rmFeaturedMutStatus] = useRemoveFeaturedMutation();\n  const mutating = addFeaturedMutStatus.loading || rmFeaturedMutStatus.loading;\n  // const featuredCollectionsQ = useFeaturedCollectionsQuery();\n  // const featuredCommunitiesQ = useFeaturedCommunitiesQuery();\n\n  // const featuredCommunities = useMemo(\n  //   () => manageEdges(featuredCommunitiesQ.data?.instance?.featuredCommunities),\n  //   [featuredCommunitiesQ]\n  // );\n\n  // const featuredCollections = useMemo(\n  //   () => manageEdges(featuredCollectionsQ.data?.instance?.featuredCollections),\n  //   [featuredCollectionsQ]\n  // );\n\n  // const isFeatured = useMemo(\n  //   () =>\n  //     !ctx || !ctx.__typename\n  //       ? null\n  //       : ctx.__typename === 'Collection'\n  //       ? !!featuredCollections.find(\n  //           featCollection => featCollection.id === ctx.id\n  //         )\n  //       : ctx.__typename === 'Community'\n  //       ? !!featuredCommunities.find(\n  //           featCommunity => featCommunity.id === ctx.id\n  //         )\n  //       : null,\n  //   [featuredCollections, featuredCommunities, ctx]\n  // );\n\n  const toggleFeatured = useCallOrNotifyMustLogin(async () => {\n    if (!ctx.isFeatured) {\n      const { id, __typename } = ctx.actor;\n      if (!id || !__typename || mutating) {\n        return;\n      }\n\n      return addFeaturedMut({\n        variables: {\n          contextId: id\n        },\n        refetchQueries: [\n          __typename === 'Community'\n            ? InstanceFeaturedCommunitiesQueryRefetch({})\n            : InstanceFeaturedCollectionsQueryRefetch({})\n        ]\n      });\n    } else {\n      return rmFeaturedMut({\n        variables: {\n          contextId: ctx.featureId // need it\n        },\n        refetchQueries: [\n          ctx.__typename === 'Community'\n            ? InstanceFeaturedCommunitiesQueryRefetch({})\n            : InstanceFeaturedCollectionsQueryRefetch({})\n        ]\n      });\n    }\n  }, [ctx]);\n\n  return useMemo(\n    () => ({\n      // isFeatured,\n      toggleFeatured\n    }),\n    [toggleFeatured /* , isFeatured */]\n  );\n};\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Heading, Text } from 'rebass/styled-components';\nimport Button from 'ui/elements/Button';\nimport styled from 'ui/themes/styled';\nimport { FormikHook } from 'ui/@types/types';\nimport { Actions, Container, ContainerForm, Header, Row } from 'ui/modules/Modal';\n\nexport interface Props {\n  cancel(): any;\n  isFeatured: boolean;\n  itemType: string;\n  itemName: string;\n  formik: FormikHook;\n}\n\nexport const FeaturedModal: React.FC<Props> = ({\n  cancel,\n  isFeatured,\n  itemName,\n  itemType,\n  formik\n}) => {\n  // const { i18n } = React.useContext(LocaleContext);\n  return !isFeatured ? (\n    <Container>\n      <Header>\n        <Heading m={2}>\n          <Trans>Add To Featured List</Trans>\n        </Heading>\n      </Header>\n      <Row>\n        <ContainerForm>\n          <Text>\n            Are you sure you want to add {itemName} {itemType} to the featured list of the Discover\n            Page?\n          </Text>\n        </ContainerForm>\n      </Row>\n      <Actions>\n        <SubmitButton\n          variant=\"primary\"\n          isSubmitting={formik.isSubmitting}\n          isDisabled={formik.isSubmitting}\n          type=\"submit\"\n          style={{ marginLeft: '10px' }}\n          onClick={formik.submitForm}\n        >\n          <Trans>Add</Trans>\n        </SubmitButton>\n        <Button variant=\"outline\" onClick={cancel}>\n          <Trans>Cancel</Trans>\n        </Button>\n      </Actions>\n    </Container>\n  ) : (\n    <Container>\n      <Header>\n        <Heading m={2}>\n          <Trans>Remove from Featured List</Trans>\n        </Heading>\n      </Header>\n      <Row>\n        <ContainerForm>\n          <Text>\n            Are you sure you want to remove {itemName} {itemType} from the featured list of the\n            Discover Page?\n          </Text>\n        </ContainerForm>\n      </Row>\n      <Actions>\n        <SubmitButton\n          variant=\"primary\"\n          isSubmitting={formik.isSubmitting}\n          isDisabled={formik.isSubmitting}\n          style={{ marginLeft: '10px' }}\n          onClick={formik.submitForm}\n        >\n          <Trans>Remove</Trans>\n        </SubmitButton>\n        <Button variant=\"outline\" onClick={cancel}>\n          <Trans>Cancel</Trans>\n        </Button>\n      </Actions>\n    </Container>\n  );\n};\n\nexport default FeaturedModal;\n\nconst SubmitButton = styled(Button)`\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n`;\n","import React, { FC, useMemo } from 'react';\nimport {\n  Actor,\n  useFeaturedContext,\n  UseFeaturedContext\n} from 'fe/context/feature/useFeatureContext';\nimport { useFormik } from 'formik';\nimport { Feature } from 'graphql/types.generated';\nimport FeaturedModalUI, { Props } from 'ui/modules/FeaturedModal';\n\nexport interface FeatureModal {\n  ctx: Pick<Actor, 'id' | '__typename' | 'name'>;\n  featureId: undefined | null | Feature['id'];\n  done(): unknown;\n}\nexport const FeatureModalHOC: FC<FeatureModal> = ({ ctx, featureId, done }) => {\n  const featuredContext = useMemo<UseFeaturedContext>(\n    () =>\n      featureId\n        ? {\n            isFeatured: true,\n            featureId: featureId,\n            __typename: ctx.__typename\n          }\n        : { isFeatured: false, actor: ctx },\n    [ctx, featureId]\n  );\n\n  const { toggleFeatured } = useFeaturedContext(featuredContext);\n\n  const toggleFeaturedFormik = useFormik({\n    initialValues: {},\n    onSubmit: () => toggleFeatured().then(done)\n  });\n\n  const props = useMemo<null | Props>(() => {\n    const props: Props = {\n      isFeatured: !!featureId,\n      itemName: ctx.name,\n      itemType: ctx.__typename || '',\n      formik: toggleFeaturedFormik,\n      cancel: done\n    };\n\n    return props;\n  }, [ctx.__typename, ctx.name, done, featureId, toggleFeaturedFormik]);\n\n  return props && <FeaturedModalUI {...props} />;\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type EditCollectionQueryDataFragment = (\n  { __typename: 'Collection' }\n  & Pick<Types.Collection, 'id' | 'name' | 'summary' | 'updatedAt'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )> }\n);\n\nexport type EditCollectionDataQueryVariables = {\n  collectionId: Types.Scalars['String']\n};\n\n\nexport type EditCollectionDataQuery = (\n  { __typename: 'RootQueryType' }\n  & { collection: Types.Maybe<(\n    { __typename: 'Collection' }\n    & EditCollectionQueryDataFragment\n  )> }\n);\n\nexport type EditCollectionMutationVariables = {\n  collection: Types.CollectionUpdateInput,\n  collectionId: Types.Scalars['String'],\n  icon?: Types.Maybe<Types.UploadInput>\n};\n\n\nexport type EditCollectionMutation = (\n  { __typename: 'RootMutationType' }\n  & { updateCollection: Types.Maybe<(\n    { __typename: 'Collection' }\n    & EditCollectionQueryDataFragment\n  )> }\n);\n\nexport const EditCollectionQueryDataFragmentDoc = gql`\n    fragment EditCollectionQueryData on Collection {\n  id\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  updatedAt\n}\n    `;\nexport const EditCollectionDataDocument = gql`\n    query editCollectionData($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    ...EditCollectionQueryData\n  }\n}\n    ${EditCollectionQueryDataFragmentDoc}`;\n\n/**\n * __useEditCollectionDataQuery__\n *\n * To run a query within a React component, call `useEditCollectionDataQuery` and pass it any options that fit your needs.\n * When your component renders, `useEditCollectionDataQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useEditCollectionDataQuery({\n *   variables: {\n *      collectionId: // value for 'collectionId'\n *   },\n * });\n */\nexport function useEditCollectionDataQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<EditCollectionDataQuery, EditCollectionDataQueryVariables>) {\n        return ApolloReactHooks.useQuery<EditCollectionDataQuery, EditCollectionDataQueryVariables>(EditCollectionDataDocument, baseOptions);\n      }\nexport function useEditCollectionDataLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<EditCollectionDataQuery, EditCollectionDataQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<EditCollectionDataQuery, EditCollectionDataQueryVariables>(EditCollectionDataDocument, baseOptions);\n        }\nexport type EditCollectionDataQueryHookResult = ReturnType<typeof useEditCollectionDataQuery>;\nexport type EditCollectionDataLazyQueryHookResult = ReturnType<typeof useEditCollectionDataLazyQuery>;\nexport type EditCollectionDataQueryResult = ApolloReactCommon.QueryResult<EditCollectionDataQuery, EditCollectionDataQueryVariables>;\nexport const EditCollectionDocument = gql`\n    mutation editCollection($collection: CollectionUpdateInput!, $collectionId: String!, $icon: UploadInput) {\n  updateCollection(collection: $collection, collectionId: $collectionId, icon: $icon) {\n    ...EditCollectionQueryData\n  }\n}\n    ${EditCollectionQueryDataFragmentDoc}`;\nexport type EditCollectionMutationFn = ApolloReactCommon.MutationFunction<EditCollectionMutation, EditCollectionMutationVariables>;\n\n/**\n * __useEditCollectionMutation__\n *\n * To run a mutation, you first call `useEditCollectionMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useEditCollectionMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [editCollectionMutation, { data, loading, error }] = useEditCollectionMutation({\n *   variables: {\n *      collection: // value for 'collection'\n *      collectionId: // value for 'collectionId'\n *      icon: // value for 'icon'\n *   },\n * });\n */\nexport function useEditCollectionMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<EditCollectionMutation, EditCollectionMutationVariables>) {\n        return ApolloReactHooks.useMutation<EditCollectionMutation, EditCollectionMutationVariables>(EditCollectionDocument, baseOptions);\n      }\nexport type EditCollectionMutationHookResult = ReturnType<typeof useEditCollectionMutation>;\nexport type EditCollectionMutationResult = ApolloReactCommon.MutationResult<EditCollectionMutation>;\nexport type EditCollectionMutationOptions = ApolloReactCommon.BaseMutationOptions<EditCollectionMutation, EditCollectionMutationVariables>;\n\n\nexport interface EditCollectionDataQueryOperation {\n  operationName: 'editCollectionData'\n  result: EditCollectionDataQuery\n  variables: EditCollectionDataQueryVariables\n  type: 'query'\n}\nexport const EditCollectionDataQueryName:EditCollectionDataQueryOperation['operationName'] = 'editCollectionData'\n\nexport const EditCollectionDataQueryRefetch = (\n  variables:EditCollectionDataQueryVariables, \n  context?:any\n)=>({\n  query:EditCollectionDataDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface EditCollectionMutationOperation {\n  operationName: 'editCollection'\n  result: EditCollectionMutation\n  variables: EditCollectionMutationVariables\n  type: 'mutation'\n}\nexport const EditCollectionMutationName:EditCollectionMutationOperation['operationName'] = 'editCollection'\n\nexport const EditCollectionMutationRefetch = (\n  variables:EditCollectionMutationVariables, \n  context?:any\n)=>({\n  query:EditCollectionDocument,\n  variables,\n  context\n})\n      \n","import { getMaybeUploadInput } from 'fe/mutation/upload/getUploadInput';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { Collection, CollectionUpdateInput } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { useMemo } from 'react';\nimport {\n  useEditCollectionDataQuery,\n  useEditCollectionMutation\n} from './useEditCollection.generated';\n\nexport interface EditCollection {\n  collection: CollectionUpdateInput;\n  icon: Maybe<File | string>;\n}\nexport const useEditCollection = (collectionId: Collection['id']) => {\n  const [editMut, editMutStatus] = useEditCollectionMutation();\n  const collectionEditQ = useEditCollectionDataQuery({\n    variables: { collectionId }\n  });\n\n  const edit = useCallOrNotifyMustLogin(\n    async ({ collection, icon }: EditCollection) => {\n      if (editMutStatus.loading) {\n        return;\n      }\n      return editMut({\n        variables: {\n          collectionId,\n          icon: getMaybeUploadInput(\n            icon,\n            collectionEditQ.data?.collection?.icon?.url\n          ),\n          collection: {\n            name: collection.name,\n            summary: collection.summary\n          }\n        }\n      });\n    },\n    [collectionId, editMut, editMutStatus, collectionEditQ]\n  );\n  return useMemo(() => {\n    const collection = collectionEditQ.data?.collection;\n    return {\n      edit,\n      collection\n    };\n  }, [edit, collectionEditQ]);\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type HeroCollectionDataFragment = (\n  { __typename: 'Collection' }\n  & Pick<Types.Collection, 'id' | 'name' | 'displayUsername' | 'summary' | 'followerCount'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, community: Types.Maybe<(\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id' | 'name'>\n    & { icon: Types.Maybe<(\n      { __typename: 'Content' }\n      & Pick<Types.Content, 'id' | 'url'>\n    )>, myFollow: Types.Maybe<(\n      { __typename: 'Follow' }\n      & Pick<Types.Follow, 'id'>\n    )> }\n  )>, followers: Types.Maybe<(\n    { __typename: 'FollowsPage' }\n    & Pick<Types.FollowsPage, 'totalCount'>\n  )>, myFollow: Types.Maybe<(\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  )>, myFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  )>, creator: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n  )> }\n);\n\nexport type HeroCollectionMeDataFragment = (\n  { __typename: 'Me' }\n  & { user: (\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n  ) }\n);\n\nexport const HeroCollectionDataFragmentDoc = gql`\n    fragment HeroCollectionData on Collection {\n  id\n  name\n  displayUsername\n  summary\n  icon {\n    id\n    url\n  }\n  community {\n    id\n    name\n    icon {\n      id\n      url\n    }\n    myFollow {\n      id\n    }\n  }\n  followerCount\n  followers {\n    totalCount\n  }\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  creator {\n    id\n  }\n}\n    `;\nexport const HeroCollectionMeDataFragmentDoc = gql`\n    fragment HeroCollectionMeData on Me {\n  user {\n    id\n  }\n}\n    `;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { ActivityPreviewFragment } from '../../modules/previews/activity/ActivityPreview.generated';\nimport { ResourcePreviewFragment } from '../../modules/previews/resource/ResourcePreview.generated';\nimport { HeroCollectionDataFragment } from '../../modules/HeroCollection/HeroCollection.generated';\nimport gql from 'graphql-tag';\nimport { HeroCollectionDataFragmentDoc } from '../../modules/HeroCollection/HeroCollection.generated';\nimport { ResourcePreviewFragmentDoc } from '../../modules/previews/resource/ResourcePreview.generated';\nimport { ActivityPreviewFragmentDoc } from '../../modules/previews/activity/ActivityPreview.generated';\n\n\n\n\nexport type CollectionPageDataFragment = (\n  { __typename: 'Collection' }\n  & Pick<Types.Collection, 'name'>\n  & HeroCollectionDataFragment\n);\n\nexport type CollectionPageResourceFragment = (\n  { __typename: 'Resource' }\n  & Pick<Types.Resource, 'id' | 'createdAt'>\n  & ResourcePreviewFragment\n);\n\nexport type CollectionPageActivityFragment = (\n  { __typename: 'Activity' }\n  & Pick<Types.Activity, 'id'>\n  & ActivityPreviewFragment\n);\n\nexport const CollectionPageDataFragmentDoc = gql`\n    fragment CollectionPageData on Collection {\n  name\n  ...HeroCollectionData\n}\n    ${HeroCollectionDataFragmentDoc}`;\nexport const CollectionPageResourceFragmentDoc = gql`\n    fragment CollectionPageResource on Resource {\n  id\n  createdAt\n  ...ResourcePreview\n}\n    ${ResourcePreviewFragmentDoc}`;\nexport const CollectionPageActivityFragmentDoc = gql`\n    fragment CollectionPageActivity on Activity {\n  id\n  ...ActivityPreview\n}\n    ${ActivityPreviewFragmentDoc}`;\n","import * as Types from '../../graphql/types.generated';\n\nimport { CollectionPageDataFragment } from '../../HOC/pages/collection/CollectionPage.generated';\nimport gql from 'graphql-tag';\nimport { CollectionPageDataFragmentDoc } from '../../HOC/pages/collection/CollectionPage.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type CollectionDataQueryVariables = {\n  collectionId: Types.Scalars['String']\n};\n\n\nexport type CollectionDataQuery = (\n  { __typename: 'RootQueryType' }\n  & { collection: Types.Maybe<(\n    { __typename: 'Collection' }\n    & CollectionPageDataFragment\n  )> }\n);\n\n\nexport const CollectionDataDocument = gql`\n    query collectionData($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    ...CollectionPageData\n  }\n}\n    ${CollectionPageDataFragmentDoc}`;\n\n/**\n * __useCollectionDataQuery__\n *\n * To run a query within a React component, call `useCollectionDataQuery` and pass it any options that fit your needs.\n * When your component renders, `useCollectionDataQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCollectionDataQuery({\n *   variables: {\n *      collectionId: // value for 'collectionId'\n *   },\n * });\n */\nexport function useCollectionDataQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CollectionDataQuery, CollectionDataQueryVariables>) {\n        return ApolloReactHooks.useQuery<CollectionDataQuery, CollectionDataQueryVariables>(CollectionDataDocument, baseOptions);\n      }\nexport function useCollectionDataLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CollectionDataQuery, CollectionDataQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CollectionDataQuery, CollectionDataQueryVariables>(CollectionDataDocument, baseOptions);\n        }\nexport type CollectionDataQueryHookResult = ReturnType<typeof useCollectionDataQuery>;\nexport type CollectionDataLazyQueryHookResult = ReturnType<typeof useCollectionDataLazyQuery>;\nexport type CollectionDataQueryResult = ApolloReactCommon.QueryResult<CollectionDataQuery, CollectionDataQueryVariables>;\n\n\nexport interface CollectionDataQueryOperation {\n  operationName: 'collectionData'\n  result: CollectionDataQuery\n  variables: CollectionDataQueryVariables\n  type: 'query'\n}\nexport const CollectionDataQueryName:CollectionDataQueryOperation['operationName'] = 'collectionData'\n\nexport const CollectionDataQueryRefetch = (\n  variables:CollectionDataQueryVariables, \n  context?:any\n)=>({\n  query:CollectionDataDocument,\n  variables,\n  context\n})\n      \n","import { useFollowContext } from 'fe/context/follow/useFollowContext';\nimport { useMe } from 'fe/session/useMe';\nimport { Collection } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport { useEditCollection } from '../collection/edit/useEditCollection';\nimport { useCollectionDataQuery } from '../collection/useCollection.generated';\n\nexport const useCollection = (collectionId: Collection['id']) => {\n  const { me } = useMe();\n\n  const collectionQ = useCollectionDataQuery({ variables: { collectionId } });\n  const collection = collectionQ.data?.collection;\n  const { toggleFollow: toggleJoin } = useFollowContext(collection);\n  const { edit } = useEditCollection(collectionId);\n  const isCommunityMember = !!collection?.community?.myFollow;\n  const isCreator = !!me && !!collection?.creator && me.user.id === collection.creator.id;\n  const canModify = !!me?.isInstanceAdmin || isCreator;\n\n  return useMemo(() => {\n    return {\n      isCommunityMember,\n      isCreator,\n      collection,\n      toggleJoin,\n      edit,\n      canModify\n    };\n  }, [collection, isCreator, toggleJoin, edit, canModify, isCommunityMember]);\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CollectionPageResourceFragment } from '../../../HOC/pages/collection/CollectionPage.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CollectionPageResourceFragmentDoc } from '../../../HOC/pages/collection/CollectionPage.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type CollectionResourcesQueryVariables = {\n  collectionId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type CollectionResourcesQuery = (\n  { __typename: 'RootQueryType' }\n  & { collection: Types.Maybe<(\n    { __typename: 'Collection' }\n    & Pick<Types.Collection, 'id'>\n    & { resources: Types.Maybe<(\n      { __typename: 'ResourcesPage' }\n      & Pick<Types.ResourcesPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Resource' }\n        & CollectionResourceFragment\n      )> }\n    )> }\n  )> }\n);\n\nexport type CollectionResourceFragment = (\n  { __typename: 'Resource' }\n  & CollectionPageResourceFragment\n);\n\nexport const CollectionResourceFragmentDoc = gql`\n    fragment CollectionResource on Resource {\n  ...CollectionPageResource\n}\n    ${CollectionPageResourceFragmentDoc}`;\nexport const CollectionResourcesDocument = gql`\n    query collectionResources($collectionId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collection(collectionId: $collectionId) @connection(key: \"collectionResources\", filter: [\"collectionId\"]) {\n    id\n    resources(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CollectionResource\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CollectionResourceFragmentDoc}`;\n\n/**\n * __useCollectionResourcesQuery__\n *\n * To run a query within a React component, call `useCollectionResourcesQuery` and pass it any options that fit your needs.\n * When your component renders, `useCollectionResourcesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCollectionResourcesQuery({\n *   variables: {\n *      collectionId: // value for 'collectionId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useCollectionResourcesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CollectionResourcesQuery, CollectionResourcesQueryVariables>) {\n        return ApolloReactHooks.useQuery<CollectionResourcesQuery, CollectionResourcesQueryVariables>(CollectionResourcesDocument, baseOptions);\n      }\nexport function useCollectionResourcesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CollectionResourcesQuery, CollectionResourcesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CollectionResourcesQuery, CollectionResourcesQueryVariables>(CollectionResourcesDocument, baseOptions);\n        }\nexport type CollectionResourcesQueryHookResult = ReturnType<typeof useCollectionResourcesQuery>;\nexport type CollectionResourcesLazyQueryHookResult = ReturnType<typeof useCollectionResourcesLazyQuery>;\nexport type CollectionResourcesQueryResult = ApolloReactCommon.QueryResult<CollectionResourcesQuery, CollectionResourcesQueryVariables>;\n\n\nexport interface CollectionResourcesQueryOperation {\n  operationName: 'collectionResources'\n  result: CollectionResourcesQuery\n  variables: CollectionResourcesQueryVariables\n  type: 'query'\n}\nexport const CollectionResourcesQueryName:CollectionResourcesQueryOperation['operationName'] = 'collectionResources'\n\nexport const CollectionResourcesQueryRefetch = (\n  variables:CollectionResourcesQueryVariables, \n  context?:any\n)=>({\n  query:CollectionResourcesDocument,\n  variables,\n  context\n})\n      \n","import { Collection } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useCollectionResources.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useCollectionResources = (collectionId: Collection['id']) => {\n  const collectionQ = GQL.useCollectionResourcesQuery({\n    variables: { collectionId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const resourcesPage = usePage(\n    collectionQ.data?.collection?.resources,\n    ({ cursor, update }) => {\n      return collectionQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, collectionId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.collection?.resources &&\n            prev.collection?.resources\n            ? {\n                ...fetchMoreResult,\n                collection: {\n                  ...fetchMoreResult.collection,\n                  resources: update({\n                    prev: prev.collection.resources,\n                    fetched: fetchMoreResult.collection.resources\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(\n    () => ({\n      resourcesPage\n    }),\n    [resourcesPage]\n  );\n};\n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { Collection } from 'graphql/types.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\nimport * as GQL from './useCollectionFollowers.generated';\n\nexport const useCollectionFollowers = (collectionId: Collection['id']) => {\n  const collectionFollowersQ = GQL.useCollectionFollowersQuery({\n    variables: { collectionId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const collectionFollowersPage = usePage(\n    collectionFollowersQ.data?.collection?.followers,\n    ({ cursor, update }) => {\n      return collectionFollowersQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, collectionId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.collection?.followers &&\n            prev.collection?.followers\n            ? {\n                ...fetchMoreResult,\n                collection: {\n                  ...fetchMoreResult.collection,\n                  followers: update({\n                    prev: prev.collection.followers,\n                    fetched: fetchMoreResult.collection.followers\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(\n    () => ({\n      collectionFollowersPage\n    }),\n    [collectionFollowersPage]\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { ResourcePreviewFragment } from '../previews/resource/ResourcePreview.generated';\nimport gql from 'graphql-tag';\nimport { ResourcePreviewFragmentDoc } from '../previews/resource/ResourcePreview.generated';\n\n\nexport type AddResourceCreateResourceMutationResultFragment = (\n  { __typename: 'Resource' }\n  & Pick<Types.Resource, 'id'>\n  & ResourcePreviewFragment\n);\n\nexport const AddResourceCreateResourceMutationResultFragmentDoc = gql`\n    fragment AddResourceCreateResourceMutationResult on Resource {\n  id\n  ...ResourcePreview\n}\n    ${ResourcePreviewFragmentDoc}`;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { AddResourceCreateResourceMutationResultFragment } from '../../../HOC/modules/AddResource/addResource.generated';\nimport gql from 'graphql-tag';\nimport { AddResourceCreateResourceMutationResultFragmentDoc } from '../../../HOC/modules/AddResource/addResource.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type AddResourceCreateResourceMutationVariables = {\n  collectionId: Types.Scalars['String'],\n  resource: Types.ResourceInput,\n  icon?: Types.Maybe<Types.UploadInput>,\n  content: Types.UploadInput\n};\n\n\nexport type AddResourceCreateResourceMutation = (\n  { __typename: 'RootMutationType' }\n  & { createResource: Types.Maybe<(\n    { __typename: 'Resource' }\n    & Pick<Types.Resource, 'id'>\n    & AddResourceCreateResourceMutationResultFragment\n  )> }\n);\n\n\nexport const AddResourceCreateResourceDocument = gql`\n    mutation addResourceCreateResource($collectionId: String!, $resource: ResourceInput!, $icon: UploadInput, $content: UploadInput!) {\n  createResource(collectionId: $collectionId, resource: $resource, content: $content, icon: $icon) {\n    id\n    ...AddResourceCreateResourceMutationResult\n  }\n}\n    ${AddResourceCreateResourceMutationResultFragmentDoc}`;\nexport type AddResourceCreateResourceMutationFn = ApolloReactCommon.MutationFunction<AddResourceCreateResourceMutation, AddResourceCreateResourceMutationVariables>;\n\n/**\n * __useAddResourceCreateResourceMutation__\n *\n * To run a mutation, you first call `useAddResourceCreateResourceMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAddResourceCreateResourceMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [addResourceCreateResourceMutation, { data, loading, error }] = useAddResourceCreateResourceMutation({\n *   variables: {\n *      collectionId: // value for 'collectionId'\n *      resource: // value for 'resource'\n *      icon: // value for 'icon'\n *      content: // value for 'content'\n *   },\n * });\n */\nexport function useAddResourceCreateResourceMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AddResourceCreateResourceMutation, AddResourceCreateResourceMutationVariables>) {\n        return ApolloReactHooks.useMutation<AddResourceCreateResourceMutation, AddResourceCreateResourceMutationVariables>(AddResourceCreateResourceDocument, baseOptions);\n      }\nexport type AddResourceCreateResourceMutationHookResult = ReturnType<typeof useAddResourceCreateResourceMutation>;\nexport type AddResourceCreateResourceMutationResult = ApolloReactCommon.MutationResult<AddResourceCreateResourceMutation>;\nexport type AddResourceCreateResourceMutationOptions = ApolloReactCommon.BaseMutationOptions<AddResourceCreateResourceMutation, AddResourceCreateResourceMutationVariables>;\n\n\nexport interface AddResourceCreateResourceMutationOperation {\n  operationName: 'addResourceCreateResource'\n  result: AddResourceCreateResourceMutation\n  variables: AddResourceCreateResourceMutationVariables\n  type: 'mutation'\n}\nexport const AddResourceCreateResourceMutationName:AddResourceCreateResourceMutationOperation['operationName'] = 'addResourceCreateResource'\n\nexport const AddResourceCreateResourceMutationRefetch = (\n  variables:AddResourceCreateResourceMutationVariables, \n  context?:any\n)=>({\n  query:AddResourceCreateResourceDocument,\n  variables,\n  context\n})\n      \n","import {\n  getMaybeUploadInput,\n  getUploadInput\n} from 'fe/mutation/upload/getUploadInput';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { Collection, ResourceInput } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport { CollectionResourcesQueryRefetch } from '../collection/useCollectionResources.generated';\nimport * as GQL from './useAddResource.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\n\nexport interface AddResource {\n  collectionId: Collection['id'];\n  resource: ResourceInput;\n  content: File | string;\n  icon: Maybe<File | string>;\n}\nexport const useAddResource = () => {\n  const [\n    createResource,\n    createResourceStatus\n  ] = GQL.useAddResourceCreateResourceMutation();\n  const create = useCallOrNotifyMustLogin(\n    async ({ collectionId, content, icon, resource }: AddResource) => {\n      if (createResourceStatus.loading) {\n        return;\n      }\n\n      return createResource({\n        variables: {\n          collectionId: collectionId,\n          resource,\n          content: getUploadInput(content),\n          icon: getMaybeUploadInput(icon, null)\n        },\n        refetchQueries: [\n          CollectionResourcesQueryRefetch({\n            collectionId,\n            limit: DEFAULT_PAGE_SIZE\n          })\n        ]\n      });\n    },\n    [createResourceStatus, createResource]\n  );\n  return useMemo(() => {\n    return {\n      create\n    };\n  }, [create]);\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input, Textarea } from '@rebass/forms';\nimport * as React from 'react';\nimport { Box, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport Alert from 'ui/elements/Alert';\nimport Button from 'ui/elements/Button';\nimport { Actions, AlertWrapper, ContainerForm, CounterChars, Row } from 'ui/modules/Modal';\nimport styled from 'ui/themes/styled';\n// import { clearFix } from 'polished';\nimport DropzoneArea from 'ui/modules/DropzoneModal';\nimport { LocaleContext } from '../../../context/global/localizationCtx';\n\n// these icons must match the types and order of the `accepted_license_types` configured in constants.tsx\nconst LicenseIcon0 = require('./cc-zero.png');\nconst LicenseIcon1 = require('./by.png');\nconst LicenseIcon2 = require('./by-sa.png');\n\nconst tt = {\n  placeholders: {\n    // url: i18nMark('Enter the URL of the resource'),\n    name: i18nMark('A title for the resource'),\n    summary: i18nMark('Please type or copy/paste a summary about the resource...'),\n    //author: i18nMark('A name for the resource author'),\n    submit: i18nMark('Uploading the resource')\n    // image: i18nMark('Enter the URL of an image to represent the resource')\n  }\n};\n\nexport interface Props {\n  cancel: () => any;\n  formik: FormikHook<ResourceFormValues>;\n  acceptedLicenses: string[];\n  hideIconField: boolean;\n}\n\nexport interface ResourceFormValues {\n  license: string;\n  name: string;\n  summary: string;\n  resource: File | null;\n  icon: File | string | null;\n}\n\nexport const UploadResource: React.FC<Props> = ({\n  cancel,\n  formik,\n  acceptedLicenses,\n  hideIconField\n}) => {\n  const [license0, license1, license2] = acceptedLicenses;\n  const { i18n } = React.useContext(LocaleContext);\n  // console.log(formik.values.resourceFiles);\n  // {formik.values.resourceFiles![0] !== undefined ? console.log('re %',formik.values.resourceFiles![0].type) : null}\n  const onResourceFileSelect = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, resource: file }),\n    [formik]\n  );\n  const initialResourceUrl =\n    'string' === typeof formik.values.resource ? formik.values.resource : '';\n  const onIconFileSelect = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, icon: file }),\n    [formik]\n  );\n  const initialIconUrl = 'string' === typeof formik.values.icon ? formik.values.icon : '';\n  return (\n    <Wrapper>\n      <Row>\n        <label>\n          <Trans>Resource</Trans>\n        </label>\n        <ContainerForm>\n          <DropzoneArea\n            initialUrl={initialResourceUrl}\n            onFileSelect={onResourceFileSelect}\n            uploadType=\"resource\"\n          />\n          <Adv>\n            <Trans>Max filesize: 20MB</Trans>\n          </Adv>\n        </ContainerForm>\n      </Row>\n      <Row>\n        <label>\n          <Trans>Title</Trans>\n        </label>\n        <ContainerForm>\n          <>\n            <FormInput\n              placeholder={i18n._(tt.placeholders.name)}\n              name=\"name\"\n              value={formik.values.name}\n              onChange={formik.handleChange}\n            />\n            <CounterChars>{90 - formik.values.name.length}</CounterChars>\n          </>\n          {formik.errors.name && (\n            <AlertWrapper>\n              <Alert variant=\"negative\">{formik.errors.name}</Alert>\n            </AlertWrapper>\n          )}\n        </ContainerForm>\n      </Row>\n      {/* <Row>\n        <label>\n          <Trans>Author</Trans>\n        </label>\n        <ContainerForm>\n          <>\n            <FormInput\n              placeholder={i18n._(tt.placeholders.author)}\n              name=\"author\"\n              value={formik.values.author}\n              onChange={formik.handleChange}\n            />\n            <CounterChars>{90 - formik.values.author.length}</CounterChars>\n          </>\n          {formik.errors.author && (\n            <AlertWrapper>\n              <Alert variant=\"negative\">{formik.errors.author}</Alert>\n            </AlertWrapper>\n          )}\n        </ContainerForm>\n      </Row> */}\n      <Row big>\n        <label>\n          <Trans>Description</Trans>\n        </label>\n        <ContainerForm>\n          <>\n            <Textarea\n              placeholder={i18n._(tt.placeholders.summary)}\n              name=\"summary\"\n              value={formik.values.summary}\n              onChange={formik.handleChange}\n            />\n            <CounterChars>{1000 - formik.values.summary.length}</CounterChars>\n          </>\n        </ContainerForm>\n      </Row>\n      {hideIconField ? null : (\n        <Row>\n          <label>\n            <Trans>Image</Trans>\n          </label>\n          <ContainerForm>\n            <Box sx={{ width: '120px', height: '120px' }}>\n              <DropzoneArea\n                initialUrl={initialIconUrl}\n                onFileSelect={onIconFileSelect}\n                filePattern={'image/*'}\n              />\n            </Box>\n          </ContainerForm>\n        </Row>\n      )}\n\n      <Row>\n        <LabelWrapper>\n          <label>\n            <Trans>CC License</Trans>\n          </label>\n          <Link href=\"https://blog.moodle.net/2019/free-cultural-works/\" target=\"blank\">\n            <Trans>Confused? Read this!</Trans>\n          </Link>\n        </LabelWrapper>\n        <ContainerForm>\n          <RadioButton\n            type=\"radio\"\n            name=\"license\"\n            id={license0}\n            value={license0}\n            checked={formik.values.license === license0}\n            onChange={formik.handleChange}\n          />\n          <LicenseLabel0 htmlFor={license0}>{license0}</LicenseLabel0>\n          <RadioButton\n            type=\"radio\"\n            name=\"license\"\n            id={license1}\n            value={license1}\n            checked={formik.values.license === license1}\n            onChange={formik.handleChange}\n          />\n          <LicenseLabel1 htmlFor={license1}>{license1}</LicenseLabel1>\n          <RadioButton\n            type=\"radio\"\n            name=\"license\"\n            id={license2}\n            value={license2}\n            checked={formik.values.license === license2}\n            onChange={formik.handleChange}\n          />\n          <LicenseLabel2 htmlFor={license2}>{license2}</LicenseLabel2>\n        </ContainerForm>\n      </Row>\n      <Actions>\n        <SubmitButton\n          variant=\"primary\"\n          isSubmitting={formik.isSubmitting}\n          isDisabled={formik.isSubmitting}\n          type=\"submit\"\n          style={{ marginLeft: '10px' }}\n          onClick={formik.submitForm}\n        >\n          <Trans>Publish</Trans>\n        </SubmitButton>\n        <Button variant=\"outline\" onClick={cancel}>\n          <Trans>Cancel</Trans>\n        </Button>\n      </Actions>\n    </Wrapper>\n  );\n};\n\nexport default UploadResource;\n\nconst Adv = styled(Text)`\n  font-size: 12px;\n`;\n\nconst Wrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n`;\n\nconst LabelWrapper = styled.div`\n  width: 200px;\n`;\n\nconst Link = styled.a`\n  display: block;\n  font-size: 13px;\n`;\n\nconst Label = styled.label`\n  background-repeat: no-repeat;\n  background-position: center center;\n  width: 110px !important;\n  line-height: 38px !important;\n  display: inline-block;\n  background-size: contain;\n  margin-right: 4px;\n  border: 4px solid transparent;\n  text-indent: -9999px;\n  cursor: pointer;\n  border-radius: 5px;\n`;\n\nconst LicenseLabel0 = styled(Label)`\n  background-image: url(\"${LicenseIcon0}\");\n`;\n\nconst LicenseLabel1 = styled(Label)`\n  background-image: url(\"${LicenseIcon1}\");\n`;\n\nconst LicenseLabel2 = styled(Label)`\n  background-image: url(\"${LicenseIcon2}\");\n`;\n\nconst RadioButton = styled.input`\n  position: absolute;\n  left: -9999px;\n  &:hover {\n    + ${LicenseLabel0},\n    + ${LicenseLabel1},\n    + ${LicenseLabel2} {\n      border: 4px solid #97a395;\n    }\n  }\n  &:checked{\n    + ${LicenseLabel0},\n    + ${LicenseLabel1},\n    + ${LicenseLabel2} {\n      border: 4px solid #67d654;\n    }\n`;\n\nconst FormInput = styled(Input)`\n  height: 40px;\n  background: white;\n  border-radius: 2px;\n  border: ${props => props.theme.colors.border};\n`;\n\nconst SubmitButton = styled(Button)`\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n`;\n","import { useAddResource } from 'fe/resource/add/useAddResource';\nimport { useFormik } from 'formik';\nimport React, { FC, useEffect } from 'react';\nimport { ResourceFormValues, UploadResource } from 'ui/modules/AddResource/UploadResource';\nimport * as Yup from 'yup';\nimport { accepted_license_types } from 'mn-constants';\nimport { ResourceInput } from 'graphql/types.generated';\nimport { TestUrlOrFile } from 'HOC/lib/formik-validations';\n\nexport const validationSchema: Yup.ObjectSchema<ResourceFormValues> = Yup.object<\n  ResourceFormValues\n>({\n  name: Yup.string()\n    .max(90)\n    .required('title is required'),\n  summary: Yup.string().max(1000),\n  icon: Yup.mixed<File | string>().test(...TestUrlOrFile),\n  resource: Yup.mixed<File>().required(),\n  license: Yup.string()\n});\n\nexport const initialValues: ResourceFormValues = {\n  name: '',\n  summary: '',\n  icon: '',\n  license: accepted_license_types[1],\n  resource: null\n};\n\nexport interface AddResourceHOC {\n  collectionId: string;\n  done(): any;\n}\n\nexport const AddResourceHOC: FC<AddResourceHOC> = ({ done, collectionId }: AddResourceHOC) => {\n  const { create } = useAddResource();\n  const formik = useFormik<ResourceFormValues>({\n    validationSchema,\n    initialValues,\n    enableReinitialize: true,\n    validateOnBlur: false,\n    validateOnChange: false,\n    onSubmit: vals => {\n      const { resource: resourceFile, icon, name, license, summary } = vals;\n      if (!resourceFile) {\n        return;\n      }\n\n      const resource: ResourceInput = {\n        name,\n        summary,\n        license\n      };\n\n      return create({\n        collectionId,\n        resource,\n        content: resourceFile,\n        icon\n      }).then(done);\n    }\n  });\n  const hideIconField =\n    !formik.values.resource || formik.values.resource.type.indexOf('image') !== -1;\n\n  useEffect(() => {\n    hideIconField && formik.values.icon && formik.setValues({ ...formik.values, icon: null });\n  }, [formik, hideIconField]);\n\n  return (\n    <UploadResource\n      hideIconField={hideIconField}\n      cancel={done}\n      formik={formik}\n      acceptedLicenses={accepted_license_types}\n    />\n  );\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input, Textarea } from '@rebass/forms';\nimport { FormikHook } from 'ui/@types/types';\nimport * as React from 'react';\nimport { Flex, Text, Box } from 'rebass/styled-components';\nimport DropzoneArea from 'ui/modules/DropzoneModal';\nimport Alert from 'ui/elements/Alert';\nimport Button from 'ui/elements/Button';\nimport { clearFix } from 'polished';\nimport media from 'styled-media-query';\nimport styled from 'ui/themes/styled';\n\nimport { Actions, AlertWrapper, Container, ContainerForm, CounterChars } from 'ui/modules/Modal';\n\nconst tt = {\n  placeholders: {\n    name: i18nMark('Edit the name of the collection'),\n    summary: i18nMark(\n      'Please describe what the collection is for and what kind of resources it is likely to contain...'\n    ),\n    icon: i18nMark('Enter the URL of an icon to represent the collection')\n  }\n};\n\nexport interface Props {\n  formik: FormikHook<EditCollectionFormValues>;\n  cancel(): any;\n}\n\nexport interface EditCollectionFormValues {\n  name: string;\n  summary: string;\n  icon: string | File | undefined;\n}\n\nexport const EditCollectionPanel: React.FC<Props> = ({ cancel, formik }) => {\n  const onIconFileSelected = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, icon: file }),\n    [formik]\n  );\n  const initialIconUrl = 'string' === typeof formik.values.icon ? formik.values.icon : '';\n  return (\n    <Container>\n      <form onSubmit={formik.handleSubmit}>\n        <Hero>\n          <Box sx={{ width: '120px', height: '120px' }}>\n            <DropzoneArea\n              initialUrl={initialIconUrl}\n              onFileSelect={onIconFileSelected}\n              filePattern=\"image/*\"\n            />\n          </Box>\n          {/* <Background style={{ backgroundImage: `url(\"${c.icon}\")` }} /> */}\n          <HeroInfo>\n            <Title fontSize={5} fontWeight={'bold'}>\n              <CollectionContainerForm>\n                <Input\n                  placeholder={tt.placeholders.name}\n                  disabled={formik.isSubmitting}\n                  name=\"name\"\n                  value={formik.values.name}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{60 - formik.values.name.length}</CounterChars>\n                {formik.errors.name && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.name}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Title>\n\n            <Description fontSize={2} mt={2}>\n              <CollectionContainerForm>\n                <Textarea\n                  placeholder={tt.placeholders.summary}\n                  disabled={formik.isSubmitting}\n                  name=\"summary\"\n                  value={formik.values.summary}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{500 - formik.values.summary.length}</CounterChars>\n                {formik.errors.summary && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.summary}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Description>\n          </HeroInfo>\n        </Hero>\n\n        <Actions>\n          <Button\n            variant=\"primary\"\n            isSubmitting={formik.isSubmitting}\n            isDisabled={formik.isSubmitting}\n            type=\"submit\"\n            style={{ marginLeft: '10px' }}\n            // onClick={formik.submitForm}\n          >\n            <Trans>Save</Trans>\n          </Button>\n          <Button variant=\"outline\" onClick={cancel}>\n            <Trans>Cancel</Trans>\n          </Button>\n        </Actions>\n      </form>\n    </Container>\n  );\n};\n\nconst CollectionContainerForm = styled(ContainerForm)`\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n`;\n\nconst Title = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst Description = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst HeroInfo = styled.div`\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ${clearFix()};\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ${props => props.theme.colors.mediumdark};\n    ${media.lessThan('medium')`\n      margin-top: 8px;\n    `};\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ${props => props.theme.colors.mediumdark};\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n`;\n\nconst Hero = styled(Flex)`\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ${media.lessThan('medium')`\n  text-align: center;\n  display: block;\n`};\n`;\n\n// const Background = styled.div`\n//   height: 120px;\n//   width: 120px;\n//   border-radius: 4px;\n//   background-size: cover;\n//   background-repeat: no-repeat;\n//   background-color: ${props => props.theme.colors.light};\n//   position: relative;\n//   margin: 0 auto;\n// `;\n\nexport default EditCollectionPanel;\n","import { useEditCollection } from 'fe/collection/edit/useEditCollection';\nimport { useFormik } from 'formik';\nimport { Collection } from 'graphql/types.generated';\nimport React, { FC, useMemo } from 'react';\nimport {\n  EditCollectionFormValues,\n  EditCollectionPanel\n} from 'ui/modules/EditCollectionPanel';\nimport * as Yup from 'yup';\nimport { TestUrlOrFile } from 'HOC/lib/formik-validations';\n\nexport const validationSchema: Yup.ObjectSchema<EditCollectionFormValues> = Yup.object<\n  EditCollectionFormValues\n>({\n  name: Yup.string()\n    .min(2)\n    .max(60)\n    .required(),\n  summary: Yup.string().max(500),\n  icon: Yup.mixed<File | string>().test(...TestUrlOrFile)\n});\n\nexport interface Props {\n  collectionId: Collection['id'];\n  done(): any;\n}\nexport const EditCollectionPanelHOC: FC<Props> = ({\n  done,\n  collectionId\n}: Props) => {\n  const { collection, edit } = useEditCollection(collectionId);\n  const initialValues = useMemo<EditCollectionFormValues>(\n    () => ({\n      icon: collection?.icon?.url || '',\n      name: collection?.name || '',\n      summary: collection?.summary || ''\n    }),\n    [collection]\n  );\n\n  const formik = useFormik<EditCollectionFormValues>({\n    enableReinitialize: true,\n    onSubmit: vals => {\n      return edit({\n        collection: {\n          name: vals.name,\n          summary: vals.summary || undefined\n        },\n        icon: vals.icon\n      }).then(done);\n    },\n    validationSchema,\n    initialValues\n  });\n  return <EditCollectionPanel cancel={done} formik={formik} />;\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport { FlagPreviewFragment } from '../../../HOC/modules/previews/flag/FlagPreview.generated';\nimport gql from 'graphql-tag';\nimport { FlagPreviewFragmentDoc } from '../../../HOC/modules/previews/flag/FlagPreview.generated';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type AllFlagsQueryVariables = {\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type AllFlagsQuery = (\n  { __typename: 'RootQueryType' }\n  & { flags: Types.Maybe<(\n    { __typename: 'FlagsPage' }\n    & Pick<Types.FlagsPage, 'totalCount'>\n    & { edges: Array<(\n      { __typename: 'Flag' }\n      & FlagPreviewFragment\n    )>, pageInfo: (\n      { __typename: 'PageInfo' }\n      & FullPageInfoFragment\n    ) }\n  )> }\n);\n\n\nexport const AllFlagsDocument = gql`\n    query allFlags($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  flags(limit: $limit, before: $before, after: $after) @connection(key: \"allFlags\") {\n    edges {\n      ...FlagPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ${FlagPreviewFragmentDoc}\n${FullPageInfoFragmentDoc}`;\n\n/**\n * __useAllFlagsQuery__\n *\n * To run a query within a React component, call `useAllFlagsQuery` and pass it any options that fit your needs.\n * When your component renders, `useAllFlagsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useAllFlagsQuery({\n *   variables: {\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useAllFlagsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<AllFlagsQuery, AllFlagsQueryVariables>) {\n        return ApolloReactHooks.useQuery<AllFlagsQuery, AllFlagsQueryVariables>(AllFlagsDocument, baseOptions);\n      }\nexport function useAllFlagsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<AllFlagsQuery, AllFlagsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<AllFlagsQuery, AllFlagsQueryVariables>(AllFlagsDocument, baseOptions);\n        }\nexport type AllFlagsQueryHookResult = ReturnType<typeof useAllFlagsQuery>;\nexport type AllFlagsLazyQueryHookResult = ReturnType<typeof useAllFlagsLazyQuery>;\nexport type AllFlagsQueryResult = ApolloReactCommon.QueryResult<AllFlagsQuery, AllFlagsQueryVariables>;\n\n\nexport interface AllFlagsQueryOperation {\n  operationName: 'allFlags'\n  result: AllFlagsQuery\n  variables: AllFlagsQueryVariables\n  type: 'query'\n}\nexport const AllFlagsQueryName:AllFlagsQueryOperation['operationName'] = 'allFlags'\n\nexport const AllFlagsQueryRefetch = (\n  variables:AllFlagsQueryVariables, \n  context?:any\n)=>({\n  query:AllFlagsDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type FlagMutationVariables = {\n  contextId: Types.Scalars['String'],\n  message: Types.Scalars['String']\n};\n\n\nexport type FlagMutation = (\n  { __typename: 'RootMutationType' }\n  & { createFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & { context: (\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id'>\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Comment' }\n      & Pick<Types.Comment, 'id'>\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id'>\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Resource' }\n      & Pick<Types.Resource, 'id'>\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) | (\n      { __typename: 'User' }\n      & { userId: Types.User['id'] }\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) }\n  )> }\n);\n\nexport type UnflagMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type UnflagMutation = (\n  { __typename: 'RootMutationType' }\n  & { delete: Types.Maybe<{ __typename: 'Collection' } | { __typename: 'Comment' } | { __typename: 'Community' } | { __typename: 'Feature' } | (\n    { __typename: 'Flag' }\n    & { context: (\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id'>\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Comment' }\n      & Pick<Types.Comment, 'id'>\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id'>\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Resource' }\n      & Pick<Types.Resource, 'id'>\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) | (\n      { __typename: 'User' }\n      & { userId: Types.User['id'] }\n      & { myFlag: Types.Maybe<(\n        { __typename: 'Flag' }\n        & Pick<Types.Flag, 'id'>\n      )> }\n    ) }\n  ) | { __typename: 'Follow' } | { __typename: 'Like' } | { __typename: 'Resource' } | { __typename: 'Thread' } | { __typename: 'User' }> }\n);\n\n\nexport const FlagDocument = gql`\n    mutation flag($contextId: String!, $message: String!) {\n  createFlag(contextId: $contextId, message: $message) {\n    context {\n      ... on Collection {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Comment {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Community {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Resource {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on User {\n        userId: id\n        myFlag {\n          id\n        }\n      }\n    }\n  }\n}\n    `;\nexport type FlagMutationFn = ApolloReactCommon.MutationFunction<FlagMutation, FlagMutationVariables>;\n\n/**\n * __useFlagMutation__\n *\n * To run a mutation, you first call `useFlagMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useFlagMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [flagMutation, { data, loading, error }] = useFlagMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *      message: // value for 'message'\n *   },\n * });\n */\nexport function useFlagMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<FlagMutation, FlagMutationVariables>) {\n        return ApolloReactHooks.useMutation<FlagMutation, FlagMutationVariables>(FlagDocument, baseOptions);\n      }\nexport type FlagMutationHookResult = ReturnType<typeof useFlagMutation>;\nexport type FlagMutationResult = ApolloReactCommon.MutationResult<FlagMutation>;\nexport type FlagMutationOptions = ApolloReactCommon.BaseMutationOptions<FlagMutation, FlagMutationVariables>;\nexport const UnflagDocument = gql`\n    mutation unflag($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Flag {\n      context {\n        ... on Collection {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Comment {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Community {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Resource {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on User {\n          userId: id\n          myFlag {\n            id\n          }\n        }\n      }\n    }\n  }\n}\n    `;\nexport type UnflagMutationFn = ApolloReactCommon.MutationFunction<UnflagMutation, UnflagMutationVariables>;\n\n/**\n * __useUnflagMutation__\n *\n * To run a mutation, you first call `useUnflagMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useUnflagMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [unflagMutation, { data, loading, error }] = useUnflagMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useUnflagMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<UnflagMutation, UnflagMutationVariables>) {\n        return ApolloReactHooks.useMutation<UnflagMutation, UnflagMutationVariables>(UnflagDocument, baseOptions);\n      }\nexport type UnflagMutationHookResult = ReturnType<typeof useUnflagMutation>;\nexport type UnflagMutationResult = ApolloReactCommon.MutationResult<UnflagMutation>;\nexport type UnflagMutationOptions = ApolloReactCommon.BaseMutationOptions<UnflagMutation, UnflagMutationVariables>;\n\n\nexport interface FlagMutationOperation {\n  operationName: 'flag'\n  result: FlagMutation\n  variables: FlagMutationVariables\n  type: 'mutation'\n}\nexport const FlagMutationName:FlagMutationOperation['operationName'] = 'flag'\n\nexport const FlagMutationRefetch = (\n  variables:FlagMutationVariables, \n  context?:any\n)=>({\n  query:FlagDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface UnflagMutationOperation {\n  operationName: 'unflag'\n  result: UnflagMutation\n  variables: UnflagMutationVariables\n  type: 'mutation'\n}\nexport const UnflagMutationName:UnflagMutationOperation['operationName'] = 'unflag'\n\nexport const UnflagMutationRefetch = (\n  variables:UnflagMutationVariables, \n  context?:any\n)=>({\n  query:UnflagDocument,\n  variables,\n  context\n})\n      \n","import { AllFlagsQueryRefetch } from 'fe/flags/all/useAllFlags.generated';\nimport { isOptimisticId, OPTIMISTIC_ID_STRING } from 'fe/lib/helpers/mutations';\nimport * as GQL from 'fe/mutation/flag/useMutateFlag.generated';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { Collection, Comment, Community, Resource, User, Flag } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { useMemo } from 'react';\n\ntype Context = Collection | Comment | Community | User | Resource;\n\nexport type FollowContext = Pick<Context, 'id' | '__typename'> & {\n  myFlag: Maybe<Pick<Flag, 'id'>>;\n};\n\nexport type UseFollowContext = Maybe<FollowContext>;\n\nexport const useFlagContext = (ctx: Maybe<UseFollowContext>) => {\n  const [flagMut, flagMutStatus] = GQL.useFlagMutation();\n  const [unflagMut, unflagMutStatus] = GQL.useUnflagMutation();\n  const mutating = flagMutStatus.loading || unflagMutStatus.loading;\n  const flag = useCallOrNotifyMustLogin(\n    async (message: string) => {\n      if (!ctx || ctx.myFlag || mutating) {\n        return;\n      }\n      return flagMut({\n        variables: {\n          contextId: ctx.id,\n          message\n        },\n        optimisticResponse: optimisticFlag(ctx.__typename, ctx.id),\n        refetchQueries: [AllFlagsQueryRefetch({})]\n      });\n    },\n    [ctx, mutating]\n  );\n\n  const unflag = useCallOrNotifyMustLogin(async () => {\n    if (!ctx || !ctx.myFlag || mutating) {\n      return;\n    }\n    return isOptimisticId(ctx.myFlag.id)\n      ? undefined\n      : unflagMut({\n          variables: {\n            contextId: ctx.myFlag.id\n          },\n          optimisticResponse: optimisticUnflag(ctx.__typename, ctx.id)\n        });\n  }, [ctx, mutating]);\n\n  return useMemo(\n    () => ({\n      flag,\n      unflag\n    }),\n    [flag, unflag]\n  );\n};\n\nconst optimisticFlag = (__typename: any, id: string): GQL.FlagMutation => ({\n  __typename: 'RootMutationType',\n  createFlag: {\n    __typename: 'Flag',\n    context: {\n      __typename,\n      id,\n      myFlag: { __typename: 'Flag', id: OPTIMISTIC_ID_STRING }\n    }\n  }\n});\nconst optimisticUnflag = (__typename: any, id: string): GQL.UnflagMutation => ({\n  __typename: 'RootMutationType',\n  delete: {\n    __typename: 'Flag',\n    context: {\n      __typename,\n      id,\n      myFlag: null\n    }\n  }\n});\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport * as React from 'react';\nimport { LocaleContext } from '../../../context/global/localizationCtx';\nimport { Textarea } from '@rebass/forms';\nimport { Heading } from 'rebass/styled-components';\nimport Button from 'ui/elements/Button';\nimport styled from 'ui/themes/styled';\nimport Alert from '../../elements/Alert';\nimport { FormikHook } from 'ui/@types/types';\nimport {\n  Actions,\n  AlertWrapper,\n  Container,\n  ContainerForm,\n  CounterChars,\n  Header,\n  Row\n} from 'ui/modules/Modal';\n\n// const TextWrapper = styled(Flex)`\n//   padding: 16px;\n//   align-items: center;\n// `;\n\nconst tt = {\n  placeholders: {\n    flag: i18nMark('Please describe the reason for flagging the item')\n  }\n};\n\nexport interface Props {\n  cancel(): any;\n  isFlagged: boolean;\n  flagFormik: FormikHook<BasicCreateFlagFormValues>;\n  unflagFormik: FormikHook;\n}\n\nexport interface BasicCreateFlagFormValues {\n  reason: string;\n}\n\nexport const FlagModal: React.FC<Props> = ({ cancel, flagFormik, isFlagged, unflagFormik }) => {\n  const { i18n } = React.useContext(LocaleContext);\n\n  return !isFlagged ? (\n    <Container>\n      <Header>\n        <Heading>\n          <Trans>Report as inappropriate</Trans>\n        </Heading>\n      </Header>\n      <Row big>\n        <ContainerForm>\n          <Textarea\n            placeholder={i18n._(tt.placeholders.flag)}\n            name=\"reason\"\n            value={flagFormik.values.reason}\n            onChange={flagFormik.handleChange}\n          />\n          <CounterChars>{200 - flagFormik.values.reason.length}</CounterChars>\n          {flagFormik.errors.reason && (\n            <AlertWrapper>\n              <Alert variant=\"negative\">{flagFormik.errors.reason}</Alert>\n            </AlertWrapper>\n          )}\n        </ContainerForm>\n      </Row>\n      <Actions>\n        <SubmitButton\n          variant=\"primary\"\n          isSubmitting={flagFormik.isSubmitting}\n          isDisabled={flagFormik.isSubmitting}\n          type=\"submit\"\n          style={{ marginLeft: '10px' }}\n          onClick={flagFormik.submitForm}\n        >\n          <Trans>Send</Trans>\n        </SubmitButton>\n        <Button variant=\"outline\" onClick={cancel}>\n          <Trans>Cancel</Trans>\n        </Button>\n      </Actions>\n    </Container>\n  ) : (\n    <Container>\n      <Header>\n        <Heading>\n          <Trans>Unflag</Trans>\n        </Heading>\n      </Header>\n      <Row>\n        <ContainerForm>\n          <Trans>Are you sure you want to unflag this item?</Trans>\n        </ContainerForm>\n      </Row>\n      <Actions>\n        <Button\n          variant=\"primary\"\n          isSubmitting={unflagFormik.isSubmitting}\n          isDisabled={unflagFormik.isSubmitting}\n          onClick={unflagFormik.submitForm}\n          style={{ marginLeft: '10px' }}\n        >\n          <Trans>Unflag</Trans>\n        </Button>\n        <Button variant=\"outline\" onClick={cancel}>\n          <Trans>Cancel</Trans>\n        </Button>\n      </Actions>\n    </Container>\n  );\n};\n\nexport default FlagModal;\n\nconst SubmitButton = styled(Button)`\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n`;\n","import { FollowContext, useFlagContext } from 'fe/context/flag/useFlagContext';\nimport { useFormik } from 'formik';\nimport React, { FC } from 'react';\nimport { BasicCreateFlagFormValues, FlagModal } from 'ui/modules/FlagModal';\nimport * as Yup from 'yup';\n\nexport const validationSchema: Yup.ObjectSchema<BasicCreateFlagFormValues> = Yup.object<\n  BasicCreateFlagFormValues\n>({\n  reason: Yup.string()\n    .max(200)\n    .required()\n});\n\nexport interface FlagModalHOC {\n  ctx: FollowContext;\n  done(): any;\n}\n\nexport const FlagModalHOC: FC<FlagModalHOC> = ({ done, ctx }) => {\n  const { unflag, flag } = useFlagContext(ctx);\n\n  const unflagFormik = useFormik({\n    onSubmit: () => {\n      unflag();\n      done();\n    },\n    initialValues: {}\n  });\n\n  const flagFormik = useFormik<BasicCreateFlagFormValues>({\n    enableReinitialize: true,\n    onSubmit: vals => {\n      flag(vals.reason);\n      done();\n    },\n    validationSchema,\n    initialValues: { reason: '' }\n  });\n  return (\n    <FlagModal\n      cancel={done}\n      isFlagged={!!ctx.myFlag}\n      flagFormik={flagFormik}\n      unflagFormik={unflagFormik}\n    />\n  );\n};\n\nexport default FlagModalHOC;\n","import styled from 'ui/themes/styled';\nimport { Text } from 'rebass/styled-components';\nimport 'github-markdown-css/github-markdown.css';\nimport DOMPurify from 'dompurify';\nimport React from 'react';\nimport { typography } from 'mn-constants';\n\nconst Comment = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n  text-decoration: none;\n  font-size: ${typography.size.s2} !important;\n  letter-spacing: 0 !important;\n  font-family: ${props => props.theme.fontFamily} !important;\n  &.markdown-body {\n    box-sizing: border-box;\n    min-width: 200px;\n    max-width: 568px;\n  }\n`;\n\nexport interface Props {\n  content: string;\n}\n\nexport const MDComment: React.SFC<Props> = ({ content }) => (\n  <Comment\n    className={'markdown-body'}\n    dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(content) }}\n    variant=\"text\"\n  />\n);\n","// import { ChevronLeft } from 'react-feather';\nimport { Trans } from '@lingui/macro';\nimport { clearFix, darken } from 'polished';\nimport React, { FC } from 'react';\nimport { Flag as FlagIcon, MoreVertical, Settings, Star } from 'react-feather';\n// import {  NavLink } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { FormikHook } from 'ui/@types/types';\n// import { useHistory } from 'react-router';\n// import Avatar from 'ui/elements/Avatar';\nimport Button from 'ui/elements/Button';\nimport { MDComment } from 'ui/elements/Layout/comment';\nimport { Dropdown, DropdownItem } from 'ui/modules/Dropdown';\nimport styled from 'ui/themes/styled';\n\nexport enum Status {\n  Loading,\n  Loaded\n}\n\nexport interface CollectionLoading {\n  status: Status.Loading;\n}\n\nexport interface CollectionLoaded {\n  status: Status.Loaded;\n  isAdmin: boolean;\n  // isFeatured?: boolean;\n  basePath: string;\n  icon: string;\n  name: string;\n  fullName: string;\n  summary: string;\n  canModify: boolean;\n  communityId: string;\n  communityName: string;\n  communityIcon: string;\n  toggleJoinFormik: FormikHook;\n  isFlagged: boolean;\n  followerCount: number; //FIX ME add followerCount\n  // contributorCount?: number; //FIX ME add contributorCount\n  following: boolean;\n\n  edit(): any;\n\n  flag(): any;\n\n  addToFeatured(): any;\n\n  isOpenDropdown: boolean;\n  toggleDropdown(): any;\n}\nexport interface Props {\n  collection: CollectionLoaded | CollectionLoading;\n}\n\nexport const HeroCollection: FC<Props> = ({ collection: c }) => {\n  return c.status === Status.Loading ? (\n    <Text>Loading...</Text>\n  ) : (\n    <HeroCont>\n      <Hero>\n        {/* <Box sx={{ position: 'relative' }}> */}\n        {/* <Background style={{ backgroundImage: `url(\"${c.icon}\")` }} /> */}\n        {/* <Right>\n            <Link to={`/communities/${c.communityId}`}>\n              <LinkImg>\n                <Avatar size=\"s\" src={c.communityIcon} />\n              </LinkImg>\n              {/* <CommTitle variant=\"link\">{c.communityName}</CommTitle> */}\n        {/* </Link> */}\n        {/* </Right> */}\n        {/* </Box> */}\n        <HeroInfo>\n          <Title fontWeight={'bold'}>{c.name}</Title>\n          <Username mt={1} fontSize={2}>\n            +{c.fullName}\n          </Username>\n          <Box mt={2}>\n            <MDComment content={c.summary} />\n          </Box>\n\n          <Info mt={2}>\n            {/* <CountWrapper>\n              <CountTot to={`${c.basePath}/followers`}>\n                <Text variant=\"suptitle\">\n                  <Total mr={2}>{c.followerCount}</Total>\n                  <Trans>Followers</Trans>\n                </Text>\n              </CountTot>\n            </CountWrapper> */}\n            <ActionsHero mt={3} alignItems={'center'}>\n              <Button\n                variant={c.following ? 'danger' : 'primary'}\n                disabled={c.toggleJoinFormik.isSubmitting}\n                onClick={c.toggleJoinFormik.submitForm}\n                isSubmitting={c.toggleJoinFormik.isSubmitting}\n              >\n                {c.following ? 'Unfollow' : 'Follow'}\n              </Button>\n              <More ml={2} onClick={c.toggleDropdown}>\n                <MoreVertical size={20} />\n                {c.isOpenDropdown && (\n                  <RightDd>\n                    <Dropdown orientation={'bottom'} close={c.toggleDropdown}>\n                      {c.canModify && (\n                        <DropdownItem onClick={c.edit}>\n                          <Settings size={20} color={'rgb(101, 119, 134)'} />\n                          <Text sx={{ flex: 1 }} ml={2}>\n                            <Trans>Edit the collection</Trans>\n                          </Text>\n                        </DropdownItem>\n                      )}\n                      <DropdownItem onClick={c.flag}>\n                        <FlagIcon size={20} color={'rgb(101, 119, 134)'} />\n                        <Text sx={{ flex: 1 }} ml={2}>\n                          {!c.isFlagged ? (\n                            <Trans>Flag this collection</Trans>\n                          ) : (\n                            <Trans>Unflag this collection</Trans>\n                          )}\n                        </Text>\n                      </DropdownItem>\n                      {c.isAdmin ? (\n                        <AdminDropdownItem onClick={c.addToFeatured}>\n                          <Star size={20} color={'rgb(211, 103, 5)'} />\n                          <Text sx={{ flex: 1 }} ml={2}>\n                            {\n                              /* c.isFeatured ? (\n                          <Trans>Remove from featured list</Trans>\n                        ) :  */ <Trans>\n                                Add to featured list\n                              </Trans>\n                            }\n                          </Text>\n                        </AdminDropdownItem>\n                      ) : null}\n                    </Dropdown>\n                  </RightDd>\n                )}\n              </More>\n            </ActionsHero>\n          </Info>\n        </HeroInfo>\n      </Hero>\n    </HeroCont>\n  );\n};\n\nexport default HeroCollection;\n\nconst RightDd = styled(Box)`\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n`;\n\nconst Info = styled(Flex)`\n  align-items: center;\n`;\n\nconst More = styled(Box)`\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ${props => props.theme.colors.border};\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ${props => props.theme.colors.mediumdark};\n  }\n`;\n\nconst AdminDropdownItem = styled(DropdownItem)`\n  border-top: 1px solid ${props => darken('0.1', props.theme.colors.light)};\n`;\n\n// const LinkImg = styled(Box)`\n//   margin-right: 8px;\n//   .--rtl & {\n//     margin-right: 0px;\n//     margin-left: 8px;\n//   }\n//   div {\n//     border: 2px solid white;\n//     min-width: 42px;\n//     min-height: 42px;\n//   }\n// `;\n// const Right = styled(Flex)`\n//   align-items: center;\n//   display: inline-block;\n//   position: absolute;\n//   left: 8px;\n//   bottom: -18px\n//   top: 106px;\n//   a {\n//     text-decoration: none;\n//     display: flex;\n//     align-items: center;\n//   }\n// `;\n\nconst Title = styled(Text)`\n  color: ${props => props.theme.colors.darker};\n  font-size: 24px;\n`;\n\nconst Username = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  font-size: 14px;\n  text-transform: lowercase;\n`;\n\nconst ActionsHero = styled(Flex)``;\n\nconst HeroInfo = styled.div`\n  flex: 1;\n  position: relative;\n  ${clearFix()};\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ${props => props.theme.colors.mediumdark};\n    ${media.lessThan('medium')`\n      margin-top: 8px;\n    `};\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ${props => props.theme.colors.mediumdark};\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n`;\nconst HeroCont = styled(Box)`\n  margin-bottom: 16px;\n  border-radius: 6px;\n  box-sizing: border-box;\n  background: ${props => props.theme.colors.appInverse};\n`;\n\nconst Hero = styled(Flex)`\n  width: 100%;\n  position: relative;\n  padding: 16px;\n`;\n\n// const Background = styled.div`\n//   height: 120px;\n//   width: 120px;\n//   border-radius: 4px;\n//   background-size: cover;\n//   background-repeat: no-repeat;\n//   background-color: ${props => props.theme.colors.light};\n//   position: relative;\n//   margin: 0 auto;\n// `;\n\n// const CountWrapper = styled(Flex)`\n//   margin-top: 10px;\n//   flex: 1;\n//   > div {\n//     display: flex;\n//   }\n// `;\n\n// const CountTot = styled(NavLink)`\n//   margin-top: 0px;\n//   cursor: pointer;\n//   cursor: pointer;\n//   margin-right: 20px;\n//   text-decoration: none;\n//   ${clearFix()} & span {\n//     margin-right: 4px;\n//     float: left;\n//     height: 32px;\n//     line-height: 32px;\n//     & svg {\n//       vertical-align: middle;\n//     }\n//     .--rtl & {\n//       float: right;\n//       margin-right: 0px;\n//       margin-left: 8px;\n//     }\n//   }\n// `;\n\n// const Total = styled(Text)`\n//   display: inline-flex;\n//   color: ${props => props.theme.colors.primary};\n// `;\n","import { useCollection } from 'fe/collection/useCollection';\nimport { useMe } from 'fe/session/useMe';\nimport { useFormik } from 'formik';\nimport { Collection } from 'graphql/types.generated';\nimport { EditCollectionPanelHOC } from 'HOC/modules/EditCollectionPanel/editCollectionPanelHOC';\nimport { FeatureModalHOC } from 'HOC/modules/FeatureModal/FeatureModal';\nimport { FlagModalHOC } from 'HOC/modules/FlagModal/flagModalHOC';\nimport React, { FC, useMemo, useReducer } from 'react';\nimport HeroCollectionUI, { Props, Status } from 'ui/modules/HeroCollection';\nimport Modal from 'ui/modules/Modal';\nimport { useNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\n\nexport interface HeroCollectionHOC {\n  collectionId: Collection['id'];\n  basePath: string;\n}\n\nexport const HeroCollectionHOC: FC<HeroCollectionHOC> = ({ collectionId, basePath }) => {\n  const { collection, canModify, toggleJoin } = useCollection(collectionId);\n  const { isAdmin } = useMe();\n  const toggleJoinFormik = useFormik<{}>({\n    initialValues: {},\n    onSubmit: toggleJoin\n  });\n\n  const notifiedMustLogin = useNotifyMustLogin();\n  const [isOpenDropdown, toggleDropdown] = React.useReducer(is => !is, false);\n\n  const [isEditing, toggleEditing] = useReducer(is => {\n    return !canModify || notifiedMustLogin() ? false : !is;\n  }, false);\n  const EditModal =\n    collection && isEditing ? (\n      <Modal closeModal={toggleEditing}>\n        <EditCollectionPanelHOC collectionId={collection.id} done={toggleEditing} />\n      </Modal>\n    ) : null;\n\n  const [isFlagging, toggleFlagging] = useReducer(is => {\n    return notifiedMustLogin() ? false : !is;\n  }, false);\n  const FlagModal =\n    collection && isFlagging ? (\n      <Modal closeModal={toggleFlagging}>\n        <FlagModalHOC done={toggleFlagging} ctx={collection} />\n      </Modal>\n    ) : null;\n\n  const [isAddingToFeatured, toggleAddToFeatured] = useReducer(is => {\n    return !isAdmin || notifiedMustLogin() ? false : !is;\n  }, false);\n  const AddToFeaturedModal =\n    collection && isAddingToFeatured ? (\n      <Modal closeModal={toggleAddToFeatured}>\n        <FeatureModalHOC done={toggleAddToFeatured} ctx={collection} featureId={null} />\n      </Modal>\n    ) : null;\n\n  const heroProps = useMemo<Props>(() => {\n    if (!collection) {\n      return {\n        collection: {\n          status: Status.Loading\n        }\n      };\n    }\n\n    const props: Props = {\n      collection: {\n        isOpenDropdown,\n        toggleDropdown,\n        basePath,\n        isAdmin,\n        status: Status.Loaded,\n        canModify,\n        following: !!collection.myFollow,\n        isFlagged: !!collection.myFlag,\n        followerCount: collection.followerCount || 0,\n        icon: collection.icon?.url || '',\n        name: collection.name,\n        fullName: collection.displayUsername,\n        summary: collection.summary || '',\n        communityName: collection.community?.name || '',\n        communityId: collection.community?.id || '',\n        communityIcon: collection.community?.icon?.url || '',\n        toggleJoinFormik,\n\n        edit: toggleEditing,\n\n        addToFeatured: toggleAddToFeatured,\n\n        flag: toggleFlagging\n      }\n    };\n    return props;\n  }, [collection, isOpenDropdown, basePath, isAdmin, canModify, toggleJoinFormik]);\n  return (\n    <>\n      {EditModal}\n      {AddToFeaturedModal}\n      {FlagModal}\n      <HeroCollectionUI {...heroProps} />\n    </>\n  );\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport * as React from 'react';\nimport { LocaleContext } from '../../../context/global/localizationCtx';\nimport { Input } from '@rebass/forms';\nimport { Heading } from 'rebass/styled-components';\nimport Button from 'ui/elements/Button';\nimport styled from 'ui/themes/styled';\nimport Alert from 'ui/elements/Alert';\nimport { FormikHook } from 'ui/@types/types';\nimport {\n  Actions,\n  AlertWrapper,\n  Container,\n  ContainerForm,\n  CounterChars,\n  Header,\n  Row\n} from 'ui/modules/Modal';\n\n// const TextWrapper = styled(Flex)`\n//   padding: 16px;\n//   align-items: center;\n// `;\n\nconst tt = {\n  placeholders: {\n    name: i18nMark('Website'),\n    flag: i18nMark('Please write the Moodle LMS instance')\n  }\n};\n\nexport interface Props {\n  cancel(): any;\n  sendToMoodleFormik: FormikHook<BasicMoodleLMSConfigFormValues>;\n}\n\nexport interface BasicMoodleLMSConfigFormValues {\n  site: string;\n}\n\nexport const MoodlePanel: React.FC<Props> = ({ cancel, sendToMoodleFormik }) => {\n  const { i18n } = React.useContext(LocaleContext);\n\n  return (\n    <Container>\n      <Header>\n        <Heading m={2}>\n          <Trans>Send to Moodle</Trans>\n        </Heading>\n      </Header>\n      <Row big>\n        <ContainerForm>\n          <Input\n            placeholder={i18n._(tt.placeholders.flag)}\n            name=\"site\"\n            value={sendToMoodleFormik.values.site}\n            onChange={sendToMoodleFormik.handleChange}\n          />\n          <CounterChars>{200 - sendToMoodleFormik.values.site.length}</CounterChars>\n          {sendToMoodleFormik.errors.site && (\n            <AlertWrapper>\n              <Alert variant=\"negative\">{sendToMoodleFormik.errors.site}</Alert>\n            </AlertWrapper>\n          )}\n        </ContainerForm>\n      </Row>\n      <Actions>\n        <SubmitButton\n          variant=\"primary\"\n          isSubmitting={sendToMoodleFormik.isSubmitting}\n          isDisabled={sendToMoodleFormik.isSubmitting}\n          type=\"submit\"\n          style={{ marginLeft: '10px' }}\n          onClick={sendToMoodleFormik.submitForm}\n        >\n          <Trans>Send</Trans>\n        </SubmitButton>\n        <Button variant=\"outline\" onClick={cancel}>\n          <Trans>Cancel</Trans>\n        </Button>\n      </Actions>\n    </Container>\n  );\n};\n\nexport default MoodlePanel;\n\nconst SubmitButton = styled(Button)`\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n`;\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type InstanceInfoQueryVariables = {};\n\n\nexport type InstanceInfoQuery = (\n  { __typename: 'RootQueryType' }\n  & { instance: Types.Maybe<(\n    { __typename: 'Instance' }\n    & Pick<Types.Instance, 'description' | 'extraInfo' | 'hostname' | 'uploadIconTypes' | 'uploadImageTypes' | 'uploadMaxBytes' | 'uploadResourceTypes'>\n  )> }\n);\n\n\nexport const InstanceInfoDocument = gql`\n    query instanceInfo {\n  instance {\n    description\n    extraInfo\n    hostname\n    uploadIconTypes\n    uploadImageTypes\n    uploadMaxBytes\n    uploadResourceTypes\n  }\n}\n    `;\n\n/**\n * __useInstanceInfoQuery__\n *\n * To run a query within a React component, call `useInstanceInfoQuery` and pass it any options that fit your needs.\n * When your component renders, `useInstanceInfoQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useInstanceInfoQuery({\n *   variables: {\n *   },\n * });\n */\nexport function useInstanceInfoQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<InstanceInfoQuery, InstanceInfoQueryVariables>) {\n        return ApolloReactHooks.useQuery<InstanceInfoQuery, InstanceInfoQueryVariables>(InstanceInfoDocument, baseOptions);\n      }\nexport function useInstanceInfoLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<InstanceInfoQuery, InstanceInfoQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<InstanceInfoQuery, InstanceInfoQueryVariables>(InstanceInfoDocument, baseOptions);\n        }\nexport type InstanceInfoQueryHookResult = ReturnType<typeof useInstanceInfoQuery>;\nexport type InstanceInfoLazyQueryHookResult = ReturnType<typeof useInstanceInfoLazyQuery>;\nexport type InstanceInfoQueryResult = ApolloReactCommon.QueryResult<InstanceInfoQuery, InstanceInfoQueryVariables>;\n\n\nexport interface InstanceInfoQueryOperation {\n  operationName: 'instanceInfo'\n  result: InstanceInfoQuery\n  variables: InstanceInfoQueryVariables\n  type: 'query'\n}\nexport const InstanceInfoQueryName:InstanceInfoQueryOperation['operationName'] = 'instanceInfo'\n\nexport const InstanceInfoQueryRefetch = (\n  variables:InstanceInfoQueryVariables, \n  context?:any\n)=>({\n  query:InstanceInfoDocument,\n  variables,\n  context\n})\n      \n","// import { LMSPrefsPanel } from './LMSPrefsPanel';\nimport { useMemo, useCallback, useState, useEffect } from 'react';\nimport { LMSPrefs, sendToMoodle } from './LMSintegration';\nimport { SESSION, createLocalSessionKVStorage } from 'util/keyvaluestore/localSessionStorage';\nimport { useInstanceInfoQuery } from 'fe/instance/info/useInstanceInfo.generated';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { ResourceLMS /* ResourceGqlMin, ResourceHitMin  */ } from 'fe/lib/moodleLMS/mappings/types';\n// import { resourceGql2lms } from 'HOC/lib/LMSMappings/gql2LMS';\n// import { resourceHit2lms } from 'HOC/lib/LMSMappings/hit2LMS';\nimport { useMe } from 'fe/session/useMe';\nconst storage = createLocalSessionKVStorage(SESSION)('LMS_');\nconst LMS_PREFS_KEY = 'Prefs';\n\nexport const useLMS = (resource: Maybe<ResourceLMS>) => {\n  const { data: instanceInfo } = useInstanceInfoQuery();\n\n  const { updateLMSPrefs, currentLMSPrefs } = useLMSPrefs();\n  // console.table({ currentLMSPrefs, canonicalUrl: resource?.canonicalUrl });\n\n  const sendToLMS = useCallback(\n    (LMS: LMSPrefs) => {\n      if (!(instanceInfo?.instance && resource)) {\n        return false;\n      }\n      const resource_info_stringified = JSON.stringify(resource);\n      const type = instanceInfo.instance.uploadResourceTypes.includes(resource.mediaType)\n        ? 'file'\n        : 'link';\n      sendToMoodle(resource.url, resource_info_stringified, type, LMS);\n      return true;\n    },\n    [instanceInfo, resource]\n  );\n\n  return useMemo(\n    () => ({\n      updateLMSPrefs,\n      sendToLMS,\n      currentLMSPrefs\n    }),\n    [updateLMSPrefs, sendToLMS, currentLMSPrefs]\n  );\n};\n\nexport const useLMSPrefs = () => {\n  const { loading, me, updateProfile } = useMe();\n  const profile = me?.user;\n  const [currentLMSPrefs, setCurrentLMSPrefs] = useState(\n    storage.get(LMS_PREFS_KEY) as LMSPrefs | null\n  );\n\n  useEffect(() => {\n    profile?.extraInfo?.LMS\n      ? setCurrentLMSPrefs(profile.extraInfo.LMS)\n      : setCurrentLMSPrefs(storage.get(LMS_PREFS_KEY) as LMSPrefs | null);\n  }, [profile]);\n\n  const updateLMSPrefs = useCallback(\n    async (LMS: LMSPrefs) => {\n      setCurrentLMSPrefs(LMS);\n      storage.set(LMS_PREFS_KEY, LMS);\n      if (!loading && profile) {\n        await updateProfile({ profile: { extraInfo: { LMS } } });\n      }\n    },\n    [updateProfile, profile, loading]\n  );\n  return useMemo(\n    () => ({\n      updateLMSPrefs,\n      currentLMSPrefs,\n      loading\n    }),\n    [updateLMSPrefs, currentLMSPrefs, loading]\n  );\n};\n","export interface LMSPrefs {\n  site: string;\n  course?: string;\n  section?: string;\n}\n\nexport const getUrlParamsFromEntryPointForMoodleLMS = (): LMSPrefs | null => {\n  const q = new URLSearchParams(window.location.search);\n  const site = q.get('site');\n  if (!site) {\n    return null;\n  }\n  const course = q.get('course') || void 0;\n  const section = q.get('section') || void 0;\n  return {\n    site,\n    course,\n    section\n  };\n};\n\nexport const sendToMoodle = (\n  resourceurl: string,\n  resource_info: string,\n  type: 'file' | 'link',\n  { site, course, section }: LMSPrefs\n) => {\n  const form = document.createElement('form');\n  form.target = '_blank';\n  form.method = 'POST';\n  form.action = `${site}/admin/tool/moodlenet/import.php`;\n  form.style.display = 'none';\n  const params = {\n    resourceurl,\n    course,\n    section,\n    type,\n    resource_info\n  };\n  // console.table({site,...params})\n  Object.entries(params).forEach(([name, val]) => {\n    const hiddenField = document.createElement('input');\n    hiddenField.type = 'hidden';\n    hiddenField.name = name;\n    hiddenField.value = val || '';\n    form.appendChild(hiddenField);\n  });\n\n  document.body.appendChild(form);\n  form.submit();\n  document.body.removeChild(form);\n};\n","import { useFormik } from 'formik';\nimport { ResourceLMS } from 'fe/lib/moodleLMS/mappings/types';\nimport { DOMAIN_REGEX } from 'mn-constants';\nimport React, { FC } from 'react';\nimport { BasicMoodleLMSConfigFormValues, MoodlePanel } from 'ui/modules/MoodlePanel';\nimport * as Yup from 'yup';\nimport { LMSPrefs } from 'fe/lib/moodleLMS/LMSintegration';\nimport { useLMS } from 'fe/lib/moodleLMS/useSendToMoodle';\n\nexport interface MoodlePanelHOC {\n  done(success?: boolean): unknown;\n  resource: ResourceLMS;\n}\nconst validationSchema = Yup.object<BasicMoodleLMSConfigFormValues>({\n  site: Yup.string()\n    .matches(DOMAIN_REGEX)\n    .required()\n});\nexport const MoodlePanelHOC: FC<MoodlePanelHOC> = ({ done, resource }) => {\n  const { currentLMSPrefs, sendToLMS, updateLMSPrefs } = useLMS(resource);\n  const sendToMoodleFormik = useFormik<BasicMoodleLMSConfigFormValues>({\n    initialValues: currentLMSPrefs || { site: '' },\n    enableReinitialize: true,\n    validationSchema,\n    onSubmit: BasicLMSPrefs => {\n      const shallUpdate = !currentLMSPrefs || currentLMSPrefs.site !== BasicLMSPrefs.site;\n      const useThisLMSPrefs: LMSPrefs | null = shallUpdate\n        ? { ...BasicLMSPrefs, course: undefined, section: undefined }\n        : currentLMSPrefs;\n      if (!useThisLMSPrefs) {\n        return;\n      }\n      shallUpdate && updateLMSPrefs(useThisLMSPrefs);\n      done(sendToLMS(useThisLMSPrefs));\n    }\n  });\n  return <MoodlePanel cancel={done} sendToMoodleFormik={sendToMoodleFormik} />;\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { ResourcePreviewFragment } from '../../../HOC/modules/previews/resource/ResourcePreview.generated';\nimport gql from 'graphql-tag';\nimport { ResourcePreviewFragmentDoc } from '../../../HOC/modules/previews/resource/ResourcePreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type ResourcePreviewQueryVariables = {\n  resourceId: Types.Scalars['String']\n};\n\n\nexport type ResourcePreviewQuery = (\n  { __typename: 'RootQueryType' }\n  & { resource: Types.Maybe<(\n    { __typename: 'Resource' }\n    & Pick<Types.Resource, 'id'>\n    & ResourcePreviewFragment\n  )> }\n);\n\n\nexport const ResourcePreviewDocument = gql`\n    query resourcePreview($resourceId: String!) {\n  resource(resourceId: $resourceId) {\n    id\n    ...ResourcePreview\n  }\n}\n    ${ResourcePreviewFragmentDoc}`;\n\n/**\n * __useResourcePreviewQuery__\n *\n * To run a query within a React component, call `useResourcePreviewQuery` and pass it any options that fit your needs.\n * When your component renders, `useResourcePreviewQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useResourcePreviewQuery({\n *   variables: {\n *      resourceId: // value for 'resourceId'\n *   },\n * });\n */\nexport function useResourcePreviewQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<ResourcePreviewQuery, ResourcePreviewQueryVariables>) {\n        return ApolloReactHooks.useQuery<ResourcePreviewQuery, ResourcePreviewQueryVariables>(ResourcePreviewDocument, baseOptions);\n      }\nexport function useResourcePreviewLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<ResourcePreviewQuery, ResourcePreviewQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<ResourcePreviewQuery, ResourcePreviewQueryVariables>(ResourcePreviewDocument, baseOptions);\n        }\nexport type ResourcePreviewQueryHookResult = ReturnType<typeof useResourcePreviewQuery>;\nexport type ResourcePreviewLazyQueryHookResult = ReturnType<typeof useResourcePreviewLazyQuery>;\nexport type ResourcePreviewQueryResult = ApolloReactCommon.QueryResult<ResourcePreviewQuery, ResourcePreviewQueryVariables>;\n\n\nexport interface ResourcePreviewQueryOperation {\n  operationName: 'resourcePreview'\n  result: ResourcePreviewQuery\n  variables: ResourcePreviewQueryVariables\n  type: 'query'\n}\nexport const ResourcePreviewQueryName:ResourcePreviewQueryOperation['operationName'] = 'resourcePreview'\n\nexport const ResourcePreviewQueryRefetch = (\n  variables:ResourcePreviewQueryVariables, \n  context?:any\n)=>({\n  query:ResourcePreviewDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type LikeMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type LikeMutation = (\n  { __typename: 'RootMutationType' }\n  & { createLike: Types.Maybe<(\n    { __typename: 'Like' }\n    & { context: (\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id' | 'likerCount'>\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Comment' }\n      & Pick<Types.Comment, 'id' | 'likerCount'>\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id' | 'likerCount'>\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Resource' }\n      & Pick<Types.Resource, 'id'>\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )>, likers: Types.Maybe<(\n        { __typename: 'LikesPage' }\n        & Pick<Types.LikesPage, 'totalCount'>\n      )> }\n    ) | (\n      { __typename: 'User' }\n      & Pick<Types.User, 'likerCount'>\n      & { userId: Types.User['id'] }\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )> }\n    ) }\n  )> }\n);\n\nexport type UnlikeMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type UnlikeMutation = (\n  { __typename: 'RootMutationType' }\n  & { delete: Types.Maybe<{ __typename: 'Collection' } | { __typename: 'Comment' } | { __typename: 'Community' } | { __typename: 'Feature' } | { __typename: 'Flag' } | { __typename: 'Follow' } | (\n    { __typename: 'Like' }\n    & { context: (\n      { __typename: 'Collection' }\n      & Pick<Types.Collection, 'id' | 'likerCount'>\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Comment' }\n      & Pick<Types.Comment, 'id' | 'likerCount'>\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Community' }\n      & Pick<Types.Community, 'id' | 'likerCount'>\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )> }\n    ) | (\n      { __typename: 'Resource' }\n      & Pick<Types.Resource, 'id'>\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )>, likers: Types.Maybe<(\n        { __typename: 'LikesPage' }\n        & Pick<Types.LikesPage, 'totalCount'>\n      )> }\n    ) | (\n      { __typename: 'User' }\n      & Pick<Types.User, 'likerCount'>\n      & { userId: Types.User['id'] }\n      & { myLike: Types.Maybe<(\n        { __typename: 'Like' }\n        & Pick<Types.Like, 'id'>\n      )> }\n    ) }\n  ) | { __typename: 'Resource' } | { __typename: 'Thread' } | { __typename: 'User' }> }\n);\n\n\nexport const LikeDocument = gql`\n    mutation like($contextId: String!) {\n  createLike(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Comment {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Community {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Resource {\n        id\n        myLike {\n          id\n        }\n        likers {\n          totalCount\n        }\n      }\n      ... on User {\n        userId: id\n        myLike {\n          id\n        }\n        likerCount\n      }\n    }\n  }\n}\n    `;\nexport type LikeMutationFn = ApolloReactCommon.MutationFunction<LikeMutation, LikeMutationVariables>;\n\n/**\n * __useLikeMutation__\n *\n * To run a mutation, you first call `useLikeMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useLikeMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [likeMutation, { data, loading, error }] = useLikeMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useLikeMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<LikeMutation, LikeMutationVariables>) {\n        return ApolloReactHooks.useMutation<LikeMutation, LikeMutationVariables>(LikeDocument, baseOptions);\n      }\nexport type LikeMutationHookResult = ReturnType<typeof useLikeMutation>;\nexport type LikeMutationResult = ApolloReactCommon.MutationResult<LikeMutation>;\nexport type LikeMutationOptions = ApolloReactCommon.BaseMutationOptions<LikeMutation, LikeMutationVariables>;\nexport const UnlikeDocument = gql`\n    mutation unlike($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Like {\n      context {\n        ... on Collection {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Comment {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Community {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Resource {\n          id\n          myLike {\n            id\n          }\n          likers {\n            totalCount\n          }\n        }\n        ... on User {\n          userId: id\n          myLike {\n            id\n          }\n          likerCount\n        }\n      }\n    }\n  }\n}\n    `;\nexport type UnlikeMutationFn = ApolloReactCommon.MutationFunction<UnlikeMutation, UnlikeMutationVariables>;\n\n/**\n * __useUnlikeMutation__\n *\n * To run a mutation, you first call `useUnlikeMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useUnlikeMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [unlikeMutation, { data, loading, error }] = useUnlikeMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useUnlikeMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<UnlikeMutation, UnlikeMutationVariables>) {\n        return ApolloReactHooks.useMutation<UnlikeMutation, UnlikeMutationVariables>(UnlikeDocument, baseOptions);\n      }\nexport type UnlikeMutationHookResult = ReturnType<typeof useUnlikeMutation>;\nexport type UnlikeMutationResult = ApolloReactCommon.MutationResult<UnlikeMutation>;\nexport type UnlikeMutationOptions = ApolloReactCommon.BaseMutationOptions<UnlikeMutation, UnlikeMutationVariables>;\n\n\nexport interface LikeMutationOperation {\n  operationName: 'like'\n  result: LikeMutation\n  variables: LikeMutationVariables\n  type: 'mutation'\n}\nexport const LikeMutationName:LikeMutationOperation['operationName'] = 'like'\n\nexport const LikeMutationRefetch = (\n  variables:LikeMutationVariables, \n  context?:any\n)=>({\n  query:LikeDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface UnlikeMutationOperation {\n  operationName: 'unlike'\n  result: UnlikeMutation\n  variables: UnlikeMutationVariables\n  type: 'mutation'\n}\nexport const UnlikeMutationName:UnlikeMutationOperation['operationName'] = 'unlike'\n\nexport const UnlikeMutationRefetch = (\n  variables:UnlikeMutationVariables, \n  context?:any\n)=>({\n  query:UnlikeDocument,\n  variables,\n  context\n})\n      \n","import { isOptimisticId, OPTIMISTIC_ID_STRING } from 'fe/lib/helpers/mutations';\nimport * as GQL from 'fe/mutation/like/useMutateLike.generated';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport {\n  // Community,\n  // Collection,\n  // User,\n  Comment,\n  Resource\n} from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { useMemo } from 'react';\n\ntype Typename = Exclude<\n  // | Collection['__typename']\n  | Comment['__typename']\n  // | Community['__typename']\n  // | User['__typename']\n  | Resource['__typename'],\n  null | undefined\n>;\n\nexport const useLikeContext = (\n  contextId: Maybe<string>,\n  myLike: Maybe<{ id: string }>,\n  likerCount: Maybe<number>,\n  __typename: Typename\n) => {\n  const [likeMut, likeMutStatus] = GQL.useLikeMutation();\n  const [unlikeMut, unlikeMutStatus] = GQL.useUnlikeMutation();\n  const mutating = likeMutStatus.loading || unlikeMutStatus.loading;\n  const toggleLike = useCallOrNotifyMustLogin(async () => {\n    if (!contextId || mutating) {\n      return;\n    }\n    if (!myLike) {\n      return likeMut({\n        variables: {\n          contextId\n        },\n        optimisticResponse: optimisticLike(\n          __typename,\n          contextId,\n          likerCount || 0\n        )\n      });\n    } else {\n      return isOptimisticId(myLike.id)\n        ? undefined\n        : unlikeMut({\n            variables: {\n              contextId: myLike.id\n            },\n            optimisticResponse: optimisticUnlike(\n              __typename,\n              contextId,\n              likerCount || 0\n            )\n          });\n    }\n  }, [contextId, myLike, mutating, __typename, likerCount]);\n\n  return useMemo(\n    () => ({\n      toggleLike\n    }),\n    [toggleLike]\n  );\n};\n\nconst optimisticLike = (\n  __typename: any,\n  id: string,\n  likerCount: number\n): GQL.LikeMutation => ({\n  __typename: 'RootMutationType',\n  createLike: {\n    __typename: 'Like',\n    context: {\n      __typename,\n      id,\n      myLike: { __typename: 'Like', id: OPTIMISTIC_ID_STRING },\n      ...(__typename === 'Resource'\n        ? { likes: { __typename: 'LikesEdges', totalCount: likerCount + 1 } }\n        : { likerCount: likerCount + 1 })\n    }\n  }\n});\nconst optimisticUnlike = (\n  __typename: any,\n  id: string,\n  likerCount: number\n): GQL.UnlikeMutation => ({\n  __typename: 'RootMutationType',\n  delete: {\n    __typename: 'Like',\n    context: {\n      __typename,\n      id,\n      myLike: null,\n      ...(__typename === 'Resource'\n        ? { likes: { __typename: 'LikesEdges', totalCount: likerCount - 1 } }\n        : { likerCount: likerCount - 1 })\n    }\n  }\n});\n","import { Resource } from 'graphql/types.generated';\nimport { useResourcePreviewQuery } from './useResourcePreview.generated';\nimport { useMemo } from 'react';\nimport { useLikeContext } from 'fe/context/like/useLikeContext';\n\nexport const useResourcePreview = (resourceId: Resource['id']) => {\n  const resourcePreviewQ = useResourcePreviewQuery({\n    variables: { resourceId }\n  });\n  const { toggleLike } = useLikeContext(\n    resourcePreviewQ.data?.resource?.id,\n    resourcePreviewQ.data?.resource?.myLike,\n    resourcePreviewQ.data?.resource?.likers?.totalCount,\n    'Resource'\n  );\n  return useMemo(() => {\n    return {\n      resource: resourcePreviewQ.data?.resource,\n      toggleLike\n    };\n  }, [resourcePreviewQ, toggleLike]);\n};\n","import {\n  CollectionGqlMin,\n  CollectionLMS,\n  CommunityGqlMin,\n  CommunityLMS,\n  ResourceGqlMin,\n  ResourceLMS\n} from './types';\nimport Maybe from 'graphql/tsutils/Maybe';\n\nexport const resourceGql2lms = (resource: Maybe<ResourceGqlMin>): ResourceLMS | null => {\n  const collection = collection2lms(resource?.collection);\n  if (!(resource && collection)) {\n    return null;\n  }\n  const { name, canonicalUrl, icon, license, summary, content, payload } = resource;\n  return {\n    canonicalUrl: canonicalUrl || '',\n    collection,\n    icon: icon?.url || '',\n    name,\n    summary: summary || '',\n    url: content?.url || payload?.url || '',\n    licence: license || '',\n    mediaType: content?.mediaType || ''\n  };\n};\n\nexport const collection2lms = (collection: Maybe<CollectionGqlMin>): CollectionLMS | null => {\n  const community = community2lms(collection?.community);\n\n  if (!(collection && community)) {\n    return null;\n  }\n\n  const { preferredUsername, canonicalUrl, icon, summary, name } = collection;\n  return {\n    canonicalUrl: canonicalUrl || '',\n    icon,\n    name,\n    preferredUsername,\n    summary: summary || '',\n    community\n  };\n};\n\nexport const community2lms = (community: Maybe<CommunityGqlMin>): CommunityLMS | null => {\n  if (!community) {\n    return null;\n  }\n  const { name, preferredUsername, icon, summary, canonicalUrl } = community;\n  return {\n    canonicalUrl: canonicalUrl || '',\n    icon: icon?.url || '',\n    name,\n    preferredUsername,\n    summary: summary || ''\n  };\n};\n","import { Trans } from '@lingui/macro';\nimport { typography } from 'mn-constants';\nimport { ellipsis } from 'polished';\nimport * as React from 'react';\nimport { ExternalLink, Flag, MoreHorizontal, Paperclip, Share, Star } from 'react-feather';\nimport { NavLink } from 'react-router-dom';\n// import { FileText, ExternalLink, Star } from 'react-feather';\nimport { Box, Flex, Heading, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport Avatar from 'ui/elements/Avatar';\n// import { ellipsis } from 'polished';\nimport { Dropdown, DropdownItem } from 'ui/modules/Dropdown';\nimport styled from 'ui/themes/styled';\nimport { Search } from './Collection';\n// import {Link} from 'react-router-dom'\n\n// const LicenseIcon0 = require('./cc-zero.png');\n// const LicenseIcon1 = require('./by.png');\n// const LicenseIcon2 = require('./by-sa.png');\nexport interface LikeActions {\n  toggleLikeFormik: FormikHook<{}>;\n  totalLikes: number;\n  iLikeIt: boolean;\n}\n\nexport interface Props {\n  icon: string;\n  name: string;\n  summary: string;\n  link: string;\n  like: null | LikeActions;\n  license: string | null;\n  // acceptedLicenses?: string[];\n  isFile: boolean;\n  // type?: string;\n  isFlagged: boolean;\n  hideActions?: boolean;\n  isSearch?: boolean;\n  collectionLink: string;\n  collectionName: string;\n  isOpenDropdown: boolean;\n  toggleDropdown(): unknown;\n  sendToMoodle(): unknown;\n  toggleFlag: null | (() => unknown);\n  // sendToMoodle:null|(()=>unknown)\n}\n\nexport const Resource: React.FC<Props> = ({\n  icon,\n  name,\n  summary,\n  link,\n  collectionLink,\n  collectionName,\n  like,\n  isFile,\n  license,\n  // acceptedLicenses,\n  // type,\n  isFlagged,\n  isSearch,\n  // sendToMoodle,\n  hideActions,\n  isOpenDropdown,\n  toggleDropdown,\n  toggleFlag,\n  sendToMoodle\n}) => {\n  return (\n    <Bordered>\n      {isSearch && (\n        <Search>\n          <Trans>Resource</Trans>\n        </Search>\n      )}\n      <Wrapper p={2}>\n        {icon !== '' ? (\n          <Avatar size=\"m\" src={icon} />\n        ) : isFile ? (\n          <ResourceThumb>\n            <IconWrapper>\n              <Paperclip strokeWidth=\"2\" size={64} />\n            </IconWrapper>\n          </ResourceThumb>\n        ) : (\n          <ResourceThumb>\n            <IconWrapper>\n              <ExternalLink strokeWidth=\"2\" size={64} />\n            </IconWrapper>\n          </ResourceThumb>\n        )}\n        <Infos flex={1} ml={3}>\n          <TitleLink href={link} target=\"_blank\">\n            {/* <Badge mt={1}>Video</Badge> */}\n            <Title flex=\"1\">\n              {isFile ? (\n                <Paperclip strokeWidth=\"1\" size={18} />\n              ) : (\n                <ExternalLink strokeWidth=\"1\" size={18} />\n              )}\n              {name}\n            </Title>\n          </TitleLink>\n          {isFile ? (\n            <>\n              <TypeItem mt={1}>{license}</TypeItem>\n            </>\n          ) : (\n            <>\n              <LinkResource>\n                <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <TextLink flex={1}>{link}</TextLink>\n                </a>\n              </LinkResource>\n            </>\n          )}\n          <Summary variant=\"text\" mt={2}>\n            {summary}\n          </Summary>\n        </Infos>\n      </Wrapper>\n      <Meta>\n        <Collection ml={2}>\n          Added in <NavLink to={collectionLink}> +{collectionName}</NavLink>\n        </Collection>\n        {hideActions ? null : (\n          <Actions>\n            {like && (\n              <ActionItem\n                bordered\n                liked={like.iLikeIt ? true : false}\n                onClick={like.toggleLikeFormik.submitForm}\n              >\n                <ActionIcon>\n                  <Star strokeWidth=\"1\" size=\"18\" />\n                </ActionIcon>\n                <ActionText variant={'text'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                  {like.totalLikes}\n                </ActionText>\n              </ActionItem>\n            )}\n            <MoreItem onClick={toggleDropdown} sx={{ position: 'relative' }}>\n              <ActionIcon>\n                <MoreHorizontal className=\"hover\" size={18} />\n              </ActionIcon>\n              {isOpenDropdown && (\n                <Right>\n                  <Dropdown orientation=\"bottom\" close={toggleDropdown}>\n                    {toggleFlag && (\n                      <DropdownItem onClick={toggleFlag}>\n                        <Flag size={18} />\n                        <Text sx={{ flex: 1 }} ml={2}>\n                          {!isFlagged ? (\n                            <Trans>Flag this resource</Trans>\n                          ) : (\n                            <Trans>Unflag this resource</Trans>\n                          )}\n                        </Text>\n                      </DropdownItem>\n                    )}\n                    <DropdownItem onClick={sendToMoodle}>\n                      <Share size={18} />\n                      <Text sx={{ flex: 1 }} ml={2}>\n                        <Trans>Send to Moodle</Trans>\n                      </Text>\n                    </DropdownItem>\n                  </Dropdown>\n                </Right>\n              )}\n            </MoreItem>\n          </Actions>\n        )}\n      </Meta>\n    </Bordered>\n  );\n};\n\nconst Right = styled(Box)`\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n`;\n\nconst Meta = styled(Flex)`\n  align-items: center;\n`;\n\nconst Collection = styled(Flex)`\n  flex: 1;\n  font-size: 13px;\n  a {\n    text-decoration: underline;\n    font-weight: 600;\n    color: ${props => props.theme.colors.dark};\n  }\n`;\n\nconst Summary = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n  word-break: break-word;\n`;\nconst ActionText = styled(Text)`\n  font-size: ${typography.size.s1};\n  color: ${props => props.theme.colors.darker};\n`;\nconst ActionIcon = styled(Box)`\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n`;\n\nconst LinkResource = styled(Box)`\n  align-items: center;\n  color: ${props => props.theme.colors.mediumdark};\n  cursor: pointer;\n  font-size: ${typography.size.s2};\n  text-decoration: none;\n  margin-top: 4px;\n\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n    text-decoration: none;\n  }\n`;\n\nconst Actions = styled(Flex)`\n  justify-content: start;\n  padding: 8px;\n  padding-top: 0;\n`;\n\nconst MoreItem = styled(Flex)`\n  align-items: center;\n  cursor: pointer;\n  margin-right: 8px;\n  margin-left: 8px;\n`;\n\nconst ActionItem = styled(Flex)<{ liked?: boolean; bordered?: boolean }>`\n  align-items: center;\n  color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  div {\n    color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  cursor: pointer;\n  background: ${props => (props.liked ? props.theme.colors.primary : 'transparent')};\n  border: 1px solid ${props => (props.liked ? props.theme.colors.primary : 'transparent')};\n  border: 1px solid ${props => (props.bordered ? props.theme.colors.primary : 'transparent')};\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ${typography.size.s1};\n  svg {\n    stroke: none;\n    fill: ${props => (props.liked ? props.theme.colors.lightest : props.theme.colors.primary)};\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg {\n      fill: ${props => (props.liked ? props.theme.colors.lightest : props.theme.colors.lightest)};\n    }\n    div {\n      color: ${props => (props.liked ? props.theme.colors.lightest : props.theme.colors.lightest)};\n    }\n    color: ${props => (props.liked ? props.theme.colors.lightest : props.theme.colors.lightest)};\n    background: ${props =>\n      props.liked ? props.theme.colors.mediumdark : props.theme.colors.primary};\n    border-color: ${props =>\n      props.liked ? props.theme.colors.mediumdark : props.theme.colors.primary};\n  }\n`;\n\nconst TypeItem = styled(Text)`\n  border-radius: 5px;\n  color: ${props => props.theme.colors.dark};\n  text-transform: uppercase;\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-size: 12px;\n  font-weight: 600;\n  cursor: default;\n  margin-right: 4px;\n  display: inline-flex;\n  border: 1px solid ${props => props.theme.colors.secondary};\n`;\n\nconst ResourceThumb = styled(Box)<{ bg?: string }>`\n  border-radius: 4px;\n  min-width: 140px;\n  height: 140px;\n  display: flex;\n  align-items: center;\n\n  vertical-align: text-center;\n  background-color: ${props => props.theme.colors.light};\n`;\n\nconst IconWrapper = styled.div`\n  margin: auto;\n  & svg {\n    stroke: ${props => props.theme.colors.medium};\n  }\n`;\n\n// const ResourceType = styled(Text)`\n//   border-radius: 5px;\n//   color: ${props => props.theme.colors.primary};\n//   text-transform: uppercase;\n//   border-radius: 10px;\n//   border: 1px solid;\n//   padding: 0px 6px;\n//   font-size: 11px;\n//   cursor: default;\n//   margin-right: 6px;\n//   display: inline-flex;\n// `;\n\nconst TextLink = styled(Text)`\n  ${ellipsis('380px')};\n  font-size: 13px;\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst Bordered = styled(Box)`\n  border: ${props => props.theme.colors.border};\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n`;\n\nconst TitleLink = styled.a`\n  text-decoration: none;\n  color: ${props => props.theme.colors.darker};\n\n  svg {\n    margin: 0px;\n    margin-right: 5px;\n    display: inline-flex;\n    position: relative;\n    top: 2px;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst Wrapper = styled(Flex)`\n  position: relative;\n  text-decoration: none;\n  background: ${props => props.theme.colors.appInverse};\n  margin-top: 0;\n  border-radius: 6px;\n`;\n\nconst Infos = styled(Box)`\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n`;\nconst Title = styled(Heading)`\n  color: ${props => props.theme.colors.darker};\n  font-size: 18px;\n  text-decoration: none;\n`;\n","import { MoodlePanelHOC } from 'HOC/modules/MoodlePanel/MoodlePanel';\nimport { useResourcePreview } from 'fe/resource/preview/useResourcePreview';\nimport { useFormik } from 'formik';\nimport { Resource } from 'graphql/types.generated';\nimport { resourceGql2lms } from 'fe/lib/moodleLMS/mappings/gql2LMS';\nimport { useNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { FlagModalHOC } from 'HOC/modules/FlagModal/flagModalHOC';\n// import { accepted_license_types } from 'mn-constants';\nimport React, { FC, useMemo, useReducer } from 'react';\nimport { collectionLocation } from 'routes/CollectionPageRoute';\nimport Modal from 'ui/modules/Modal';\nimport {\n  Props as ResourcePreviewProps,\n  Resource as ResourcePreviewUI\n} from 'ui/modules/Previews/Resource';\nimport { ResourcePreviewFragment } from './ResourcePreview.generated';\n\nexport interface Props {\n  resourceId: Resource['id'];\n  flagged?: boolean;\n}\n\nexport const ResourcePreviewHOC: FC<Props> = ({ resourceId, flagged }) => {\n  const { resource, toggleLike } = useResourcePreview(resourceId);\n\n  const toggleLikeFormik = useFormik({\n    initialValues: {},\n    onSubmit: toggleLike\n  });\n  const notifyMustLogin = useNotifyMustLogin();\n  const [isOpenDropdown, toggleDropdown] = useReducer(is => !is, false);\n  const [isOpenSendToMoodle, toggleSendToMoodleModal] = useReducer(is => !is, false);\n  const [isOpenFlag, toggleFlagModal] = useReducer(is => (notifyMustLogin() ? false : !is), false);\n  const resourcePreviewProps = useMemo<ResourcePreviewProps | null>(() => {\n    if (!resource) {\n      return null;\n    }\n    const hideActions = flagged ? true : false;\n    return {\n      ...resourceFragment2UIProps({\n        resource,\n        like: {\n          iLikeIt: !!resource.myLike,\n          toggleLikeFormik,\n          totalLikes: resource.likers?.totalCount || 0\n        },\n        hideActions\n      }),\n      isOpenDropdown,\n      toggleDropdown,\n      sendToMoodle: toggleSendToMoodleModal,\n      toggleFlag: toggleFlagModal\n    };\n  }, [resource, flagged, toggleLikeFormik, isOpenDropdown]);\n\n  const FlagModal =\n    isOpenFlag && resource ? (\n      <Modal closeModal={toggleFlagModal}>\n        <FlagModalHOC done={toggleFlagModal} ctx={resource} />\n      </Modal>\n    ) : null;\n\n  const resourceLMS = useMemo(() => resourceGql2lms(resource), [resource]);\n  const MoodleModal =\n    resourceLMS && isOpenSendToMoodle ? (\n      <Modal closeModal={toggleSendToMoodleModal}>\n        <MoodlePanelHOC done={toggleSendToMoodleModal} resource={resourceLMS} />\n      </Modal>\n    ) : null;\n  return (\n    resourcePreviewProps && (\n      <>\n        {FlagModal}\n        {MoodleModal}\n        <ResourcePreviewUI {...resourcePreviewProps} />\n      </>\n    )\n  );\n};\n\nexport const resourceFragment2UIProps = (args: {\n  resource: ResourcePreviewFragment;\n  like: ResourcePreviewProps['like'];\n  // FlagModal: ResourcePreviewProps['FlagModal'];\n  // MoodlePanel: ResourcePreviewProps['MoodlePanel'];\n  hideActions: boolean;\n}) => {\n  const { /* FlagModal, MoodlePanel, */ hideActions, like, resource } = args;\n  const props: Omit<\n    ResourcePreviewProps,\n    'isOpenDropdown' | 'toggleDropdown' | 'sendToMoodle' | 'toggleFlag'\n  > = {\n    icon: resource.icon?.url || '',\n    link: resource.payload?.url || '',\n    name: resource.name || '',\n    summary: resource.summary || '',\n    like,\n    isFile: !!resource.payload?.upload,\n    //acceptedLicenses: accepted_license_types,\n    license: resource.license || null,\n    isFlagged: !!resource.myFlag,\n    //FlagModal,\n    // sendToMoodle,\n    // MoodlePanel,\n    // type: resource.payload?.mediaType,\n    hideActions: hideActions,\n    collectionName: resource.collection?.name || '',\n    collectionLink: collectionLocation.getPath(\n      { collectionId: resource.collection?.id || '', tab: undefined },\n      undefined\n    )\n  };\n  return props;\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { UserPreviewFragment } from '../../../HOC/modules/previews/user/UserPreview.generated';\nimport gql from 'graphql-tag';\nimport { UserPreviewFragmentDoc } from '../../../HOC/modules/previews/user/UserPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type UserPreviewQueryVariables = {\n  userId: Types.Scalars['String']\n};\n\n\nexport type UserPreviewQuery = (\n  { __typename: 'RootQueryType' }\n  & { user: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & UserPreviewFragment\n  )> }\n);\n\n\nexport const UserPreviewDocument = gql`\n    query userPreview($userId: String!) {\n  user(userId: $userId) {\n    id\n    ...UserPreview\n  }\n}\n    ${UserPreviewFragmentDoc}`;\n\n/**\n * __useUserPreviewQuery__\n *\n * To run a query within a React component, call `useUserPreviewQuery` and pass it any options that fit your needs.\n * When your component renders, `useUserPreviewQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useUserPreviewQuery({\n *   variables: {\n *      userId: // value for 'userId'\n *   },\n * });\n */\nexport function useUserPreviewQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<UserPreviewQuery, UserPreviewQueryVariables>) {\n        return ApolloReactHooks.useQuery<UserPreviewQuery, UserPreviewQueryVariables>(UserPreviewDocument, baseOptions);\n      }\nexport function useUserPreviewLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<UserPreviewQuery, UserPreviewQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<UserPreviewQuery, UserPreviewQueryVariables>(UserPreviewDocument, baseOptions);\n        }\nexport type UserPreviewQueryHookResult = ReturnType<typeof useUserPreviewQuery>;\nexport type UserPreviewLazyQueryHookResult = ReturnType<typeof useUserPreviewLazyQuery>;\nexport type UserPreviewQueryResult = ApolloReactCommon.QueryResult<UserPreviewQuery, UserPreviewQueryVariables>;\n\n\nexport interface UserPreviewQueryOperation {\n  operationName: 'userPreview'\n  result: UserPreviewQuery\n  variables: UserPreviewQueryVariables\n  type: 'query'\n}\nexport const UserPreviewQueryName:UserPreviewQueryOperation['operationName'] = 'userPreview'\n\nexport const UserPreviewQueryRefetch = (\n  variables:UserPreviewQueryVariables, \n  context?:any\n)=>({\n  query:UserPreviewDocument,\n  variables,\n  context\n})\n      \n","import { User } from 'graphql/types.generated';\nimport { useUserPreviewQuery } from './useUserPreview.generated';\nimport { useMemo } from 'react';\nimport { useFollowContext } from 'fe/context/follow/useFollowContext';\n\nexport const useUserPreview = (userId: User['id']) => {\n  const userPreviewQ = useUserPreviewQuery({ variables: { userId } });\n  const { toggleFollow } = useFollowContext(userPreviewQ.data?.user);\n\n  return useMemo(() => {\n    return {\n      user: userPreviewQ.data?.user,\n      toggleFollow\n    };\n  }, [userPreviewQ, toggleFollow]);\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type HeroUserUserDataFragment = (\n  { __typename: 'User' }\n  & Pick<Types.User, 'id' | 'displayUsername' | 'location' | 'summary' | 'name' | 'followerCount'>\n  & { image: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )>, myFollow: Types.Maybe<(\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  )>, myFlag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  )> }\n);\n\nexport const HeroUserUserDataFragmentDoc = gql`\n    fragment HeroUserUserData on User {\n  id\n  image {\n    id\n    url\n  }\n  icon {\n    id\n    url\n  }\n  displayUsername\n  location\n  summary\n  name\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  followerCount\n}\n    `;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { HeroUserUserDataFragment } from '../../modules/HeroUser/HeroUser.generated';\nimport gql from 'graphql-tag';\nimport { HeroUserUserDataFragmentDoc } from '../../modules/HeroUser/HeroUser.generated';\n\n\nexport type UserPageActivitiesFragment = (\n  { __typename: 'Activity' }\n  & Pick<Types.Activity, 'id'>\n);\n\nexport type UserPageUserDataFragment = (\n  { __typename: 'User' }\n  & Pick<Types.User, 'id' | 'website'>\n  & { userId: Types.User['id'], userName: Types.User['name'] }\n  & { collectionFollows: Types.Maybe<(\n    { __typename: 'FollowsPage' }\n    & Pick<Types.FollowsPage, 'totalCount'>\n  )>, communityFollows: Types.Maybe<(\n    { __typename: 'FollowsPage' }\n    & Pick<Types.FollowsPage, 'totalCount'>\n  )>, userFollows: Types.Maybe<(\n    { __typename: 'FollowsPage' }\n    & Pick<Types.FollowsPage, 'totalCount'>\n  )>, outbox: Types.Maybe<(\n    { __typename: 'ActivitiesPage' }\n    & Pick<Types.ActivitiesPage, 'totalCount'>\n  )> }\n  & HeroUserUserDataFragment\n);\n\nexport const UserPageActivitiesFragmentDoc = gql`\n    fragment UserPageActivities on Activity {\n  id\n}\n    `;\nexport const UserPageUserDataFragmentDoc = gql`\n    fragment UserPageUserData on User {\n  id\n  userId: id\n  collectionFollows {\n    totalCount\n  }\n  communityFollows {\n    totalCount\n  }\n  userFollows {\n    totalCount\n  }\n  outbox {\n    totalCount\n  }\n  website\n  userName: name\n  ...HeroUserUserData\n}\n    ${HeroUserUserDataFragmentDoc}`;\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { ActivityPreviewFragment } from '../../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport { UserPageActivitiesFragment } from '../../../../HOC/pages/user/UserPage.generated';\nimport { FullPageInfoFragment } from '../../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../../@fragments/misc.generated';\nimport { UserPageActivitiesFragmentDoc } from '../../../../HOC/pages/user/UserPage.generated';\nimport { ActivityPreviewFragmentDoc } from '../../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\n\nexport type UserOutboxActivitiesQueryVariables = {\n  userId: Types.Scalars['String'],\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  limit?: Types.Maybe<Types.Scalars['Int']>\n};\n\n\nexport type UserOutboxActivitiesQuery = (\n  { __typename: 'RootQueryType' }\n  & { user: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & { outbox: Types.Maybe<(\n      { __typename: 'ActivitiesPage' }\n      & Pick<Types.ActivitiesPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Activity' }\n        & UserOutboxActivityFragment\n      )> }\n    )> }\n  )> }\n);\n\nexport type UserOutboxActivityFragment = (\n  { __typename: 'Activity' }\n  & UserPageActivitiesFragment\n  & ActivityPreviewFragment\n);\n\nexport const UserOutboxActivityFragmentDoc = gql`\n    fragment UserOutboxActivity on Activity {\n  ...UserPageActivities\n  ...ActivityPreview\n}\n    ${UserPageActivitiesFragmentDoc}\n${ActivityPreviewFragmentDoc}`;\nexport const UserOutboxActivitiesDocument = gql`\n    query userOutboxActivities($userId: String!, $after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  user(userId: $userId) @connection(key: \"userOutboxActivities\", filter: [\"userId\"]) {\n    id\n    outbox(after: $after, before: $before, limit: $limit) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...UserOutboxActivity\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${UserOutboxActivityFragmentDoc}`;\n\n/**\n * __useUserOutboxActivitiesQuery__\n *\n * To run a query within a React component, call `useUserOutboxActivitiesQuery` and pass it any options that fit your needs.\n * When your component renders, `useUserOutboxActivitiesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useUserOutboxActivitiesQuery({\n *   variables: {\n *      userId: // value for 'userId'\n *      after: // value for 'after'\n *      before: // value for 'before'\n *      limit: // value for 'limit'\n *   },\n * });\n */\nexport function useUserOutboxActivitiesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<UserOutboxActivitiesQuery, UserOutboxActivitiesQueryVariables>) {\n        return ApolloReactHooks.useQuery<UserOutboxActivitiesQuery, UserOutboxActivitiesQueryVariables>(UserOutboxActivitiesDocument, baseOptions);\n      }\nexport function useUserOutboxActivitiesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<UserOutboxActivitiesQuery, UserOutboxActivitiesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<UserOutboxActivitiesQuery, UserOutboxActivitiesQueryVariables>(UserOutboxActivitiesDocument, baseOptions);\n        }\nexport type UserOutboxActivitiesQueryHookResult = ReturnType<typeof useUserOutboxActivitiesQuery>;\nexport type UserOutboxActivitiesLazyQueryHookResult = ReturnType<typeof useUserOutboxActivitiesLazyQuery>;\nexport type UserOutboxActivitiesQueryResult = ApolloReactCommon.QueryResult<UserOutboxActivitiesQuery, UserOutboxActivitiesQueryVariables>;\n\n\nexport interface UserOutboxActivitiesQueryOperation {\n  operationName: 'userOutboxActivities'\n  result: UserOutboxActivitiesQuery\n  variables: UserOutboxActivitiesQueryVariables\n  type: 'query'\n}\nexport const UserOutboxActivitiesQueryName:UserOutboxActivitiesQueryOperation['operationName'] = 'userOutboxActivities'\n\nexport const UserOutboxActivitiesQueryRefetch = (\n  variables:UserOutboxActivitiesQueryVariables, \n  context?:any\n)=>({\n  query:UserOutboxActivitiesDocument,\n  variables,\n  context\n})\n      \n","import { User } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useUserOutboxActivities.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useUserOutboxActivities = (userId: User['id']) => {\n  const activitiesQ = GQL.useUserOutboxActivitiesQuery({\n    variables: { userId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const activitiesPage = usePage(\n    activitiesQ.data?.user?.outbox,\n    ({ cursor, update }) => {\n      return activitiesQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, userId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.user?.outbox && prev.user?.outbox\n            ? {\n                ...fetchMoreResult,\n                user: {\n                  ...fetchMoreResult.user,\n                  outbox: update({\n                    prev: prev.user.outbox,\n                    fetched: fetchMoreResult.user.outbox\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(() => {\n    return {\n      activitiesPage\n    };\n  }, [activitiesPage]);\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CollectionPreviewFragment } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CollectionPreviewFragmentDoc } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type UserFollowedCollectionsQueryVariables = {\n  userId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type UserFollowedCollectionsQuery = (\n  { __typename: 'RootQueryType' }\n  & { user: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & { collectionFollows: Types.Maybe<(\n      { __typename: 'FollowsPage' }\n      & Pick<Types.FollowsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n        & { context: (\n          { __typename: 'Collection' }\n          & UserFollowedCollectionFragment\n        ) | { __typename: 'Community' } | { __typename: 'Thread' } | { __typename: 'User' } }\n      )> }\n    )> }\n  )> }\n);\n\nexport type UserFollowedCollectionFragment = (\n  { __typename: 'Collection' }\n  & CollectionPreviewFragment\n);\n\nexport const UserFollowedCollectionFragmentDoc = gql`\n    fragment UserFollowedCollection on Collection {\n  ...CollectionPreview\n}\n    ${CollectionPreviewFragmentDoc}`;\nexport const UserFollowedCollectionsDocument = gql`\n    query userFollowedCollections($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: \"userFollowedCollections\", filter: [\"userId\"]) {\n    id\n    collectionFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Collection {\n            ...UserFollowedCollection\n          }\n        }\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${UserFollowedCollectionFragmentDoc}`;\n\n/**\n * __useUserFollowedCollectionsQuery__\n *\n * To run a query within a React component, call `useUserFollowedCollectionsQuery` and pass it any options that fit your needs.\n * When your component renders, `useUserFollowedCollectionsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useUserFollowedCollectionsQuery({\n *   variables: {\n *      userId: // value for 'userId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useUserFollowedCollectionsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<UserFollowedCollectionsQuery, UserFollowedCollectionsQueryVariables>) {\n        return ApolloReactHooks.useQuery<UserFollowedCollectionsQuery, UserFollowedCollectionsQueryVariables>(UserFollowedCollectionsDocument, baseOptions);\n      }\nexport function useUserFollowedCollectionsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<UserFollowedCollectionsQuery, UserFollowedCollectionsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<UserFollowedCollectionsQuery, UserFollowedCollectionsQueryVariables>(UserFollowedCollectionsDocument, baseOptions);\n        }\nexport type UserFollowedCollectionsQueryHookResult = ReturnType<typeof useUserFollowedCollectionsQuery>;\nexport type UserFollowedCollectionsLazyQueryHookResult = ReturnType<typeof useUserFollowedCollectionsLazyQuery>;\nexport type UserFollowedCollectionsQueryResult = ApolloReactCommon.QueryResult<UserFollowedCollectionsQuery, UserFollowedCollectionsQueryVariables>;\n\n\nexport interface UserFollowedCollectionsQueryOperation {\n  operationName: 'userFollowedCollections'\n  result: UserFollowedCollectionsQuery\n  variables: UserFollowedCollectionsQueryVariables\n  type: 'query'\n}\nexport const UserFollowedCollectionsQueryName:UserFollowedCollectionsQueryOperation['operationName'] = 'userFollowedCollections'\n\nexport const UserFollowedCollectionsQueryRefetch = (\n  variables:UserFollowedCollectionsQueryVariables, \n  context?:any\n)=>({\n  query:UserFollowedCollectionsDocument,\n  variables,\n  context\n})\n      \n","import { User } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useUserFollowedCollections.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport interface Props {\n  userId: User['id'];\n}\n\nexport const useUserFollowedCollections = (userId: User['id']) => {\n  const userQ = GQL.useUserFollowedCollectionsQuery({\n    variables: { userId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const followedCollectionsPage = usePage(\n    userQ.data?.user?.collectionFollows,\n    ({ cursor, update }) => {\n      return userQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, userId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.user?.collectionFollows &&\n            prev.user?.collectionFollows\n            ? {\n                ...fetchMoreResult,\n                user: {\n                  ...fetchMoreResult.user,\n                  collectionFollows: update({\n                    prev: prev.user.collectionFollows,\n                    fetched: fetchMoreResult.user.collectionFollows\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(\n    () => ({\n      followedCollectionsPage\n    }),\n    [followedCollectionsPage]\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommunityPreviewFragment } from '../../../HOC/modules/previews/community/CommunityPreview.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CommunityPreviewFragmentDoc } from '../../../HOC/modules/previews/community/CommunityPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type UserFollowedCommunitiesQueryVariables = {\n  userId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type UserFollowedCommunitiesQuery = (\n  { __typename: 'RootQueryType' }\n  & { user: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & { communityFollows: Types.Maybe<(\n      { __typename: 'FollowsPage' }\n      & Pick<Types.FollowsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n        & { context: { __typename: 'Collection' } | (\n          { __typename: 'Community' }\n          & UserFollowedCommunityFragment\n        ) | { __typename: 'Thread' } | { __typename: 'User' } }\n      )> }\n    )> }\n  )> }\n);\n\nexport type UserFollowedCommunityFragment = (\n  { __typename: 'Community' }\n  & CommunityPreviewFragment\n);\n\nexport const UserFollowedCommunityFragmentDoc = gql`\n    fragment UserFollowedCommunity on Community {\n  ...CommunityPreview\n}\n    ${CommunityPreviewFragmentDoc}`;\nexport const UserFollowedCommunitiesDocument = gql`\n    query userFollowedCommunities($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: \"userFollowedCommunities\", filter: [\"userId\"]) {\n    id\n    communityFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Community {\n            ...UserFollowedCommunity\n          }\n        }\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${UserFollowedCommunityFragmentDoc}`;\n\n/**\n * __useUserFollowedCommunitiesQuery__\n *\n * To run a query within a React component, call `useUserFollowedCommunitiesQuery` and pass it any options that fit your needs.\n * When your component renders, `useUserFollowedCommunitiesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useUserFollowedCommunitiesQuery({\n *   variables: {\n *      userId: // value for 'userId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useUserFollowedCommunitiesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<UserFollowedCommunitiesQuery, UserFollowedCommunitiesQueryVariables>) {\n        return ApolloReactHooks.useQuery<UserFollowedCommunitiesQuery, UserFollowedCommunitiesQueryVariables>(UserFollowedCommunitiesDocument, baseOptions);\n      }\nexport function useUserFollowedCommunitiesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<UserFollowedCommunitiesQuery, UserFollowedCommunitiesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<UserFollowedCommunitiesQuery, UserFollowedCommunitiesQueryVariables>(UserFollowedCommunitiesDocument, baseOptions);\n        }\nexport type UserFollowedCommunitiesQueryHookResult = ReturnType<typeof useUserFollowedCommunitiesQuery>;\nexport type UserFollowedCommunitiesLazyQueryHookResult = ReturnType<typeof useUserFollowedCommunitiesLazyQuery>;\nexport type UserFollowedCommunitiesQueryResult = ApolloReactCommon.QueryResult<UserFollowedCommunitiesQuery, UserFollowedCommunitiesQueryVariables>;\n\n\nexport interface UserFollowedCommunitiesQueryOperation {\n  operationName: 'userFollowedCommunities'\n  result: UserFollowedCommunitiesQuery\n  variables: UserFollowedCommunitiesQueryVariables\n  type: 'query'\n}\nexport const UserFollowedCommunitiesQueryName:UserFollowedCommunitiesQueryOperation['operationName'] = 'userFollowedCommunities'\n\nexport const UserFollowedCommunitiesQueryRefetch = (\n  variables:UserFollowedCommunitiesQueryVariables, \n  context?:any\n)=>({\n  query:UserFollowedCommunitiesDocument,\n  variables,\n  context\n})\n      \n","import { User } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useUserFollowedCommunities.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport interface Props {\n  userId: User['id'];\n}\n\nexport const useUserFollowedCommunities = (userId: User['id']) => {\n  const userQ = GQL.useUserFollowedCommunitiesQuery({\n    variables: { userId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const followedCommunitiesPage = usePage(\n    userQ.data?.user?.communityFollows,\n    ({ cursor, update }) => {\n      return userQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, userId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.user?.communityFollows && prev.user?.communityFollows\n            ? {\n                ...fetchMoreResult,\n                user: {\n                  ...fetchMoreResult.user,\n                  communityFollows: update({\n                    prev: prev.user.communityFollows,\n                    fetched: fetchMoreResult.user.communityFollows\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(\n    () => ({\n      followedCommunitiesPage\n    }),\n    [followedCommunitiesPage]\n  );\n};\n","import { userLocation } from 'routes/UserPageRoute';\nimport * as UIT from 'ui/modules/ActivityPreview/types';\nimport { UserPreviewFragment } from '../../../HOC/modules/previews/user/UserPreview.generated';\nexport const getActivityActor = (\n  usr: Pick<UserPreviewFragment, 'icon' | 'image' | 'userName' | 'userId' | '__typename'>\n): UIT.Actor => {\n  return {\n    icon: usr.icon?.url || usr.image?.url || '',\n    name: usr.userName || '',\n    link: userLocation.getPath({ tab: undefined, userId: usr.userId }, undefined)\n  };\n};\n","import Maybe from 'graphql/tsutils/Maybe';\nimport { ActivityPreviewFragment } from 'HOC/modules/previews/activity/ActivityPreview.generated';\nimport { ActorPreviewFragment } from 'fe/lib/activity/types';\n\nexport const getActivityMainContext = (\n  context: Maybe<ActivityPreviewFragment['context']>\n): Maybe<ActorPreviewFragment> => {\n  if (!context) {\n    return null;\n  }\n  if (\n    context.__typename === 'Flag' ||\n    context.__typename === 'Follow' ||\n    context.__typename === 'Like'\n  ) {\n    if (!context.context) {\n      return null;\n    }\n    if (context.context.__typename === 'Thread') {\n      return context.context.comments?.edges[0];\n    }\n    return getActivityMainContext(context.context);\n  }\n  // \"Collection\" | \"Comment\" | \"Community\" | \"Resource\" | \"User\"\n  return context;\n};\n","import { ActivityPreviewFragment } from 'HOC/modules/previews/activity/ActivityPreview.generated';\nimport { ActivityVerb } from 'graphql/types.generated';\nimport { getActivityMainContext } from './getActivityMainContext';\nimport Maybe from 'graphql/tsutils/Maybe';\n\nexport const getEventString = (activity: Maybe<ActivityPreviewFragment>) => {\n  return activity\n    ? getEventStringByContext(activity.context, activity.verb)\n    : '';\n};\nexport const getEventStringByContext = (\n  context: ActivityPreviewFragment['context'],\n  verb: ActivityVerb\n) => {\n  if (!context) {\n    return '';\n  }\n  const mainContext = getActivityMainContext(context);\n  if (!mainContext) {\n    return '';\n  }\n  const { __typename } = mainContext;\n  const event =\n    context.__typename === 'Flag'\n      ? `Flagged a ${__typename}`\n      : context.__typename === 'Like'\n      ? `Starred a ${__typename}`\n      : context.__typename === 'Follow'\n      ? `Followed a ${__typename}`\n      : context.__typename === 'Resource'\n      ? `Added a ${__typename}`\n      : context.__typename === 'Comment'\n      ? context.inReplyTo\n        ? `Replied to a discussion`\n        : `Started a discussion`\n      : verb === ActivityVerb.Created\n      ? `Created a ${__typename}`\n      : verb === ActivityVerb.Updated\n      ? `Updated a ${__typename}`\n      : `Acted on a ${__typename}`;\n\n  return event;\n};\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { ActivityPreviewFragment } from '../../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport { FullPageInfoFragment } from '../../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../../@fragments/misc.generated';\nimport { ActivityPreviewFragmentDoc } from '../../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type CommunityOutboxActivitiesQueryVariables = {\n  communityId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type CommunityOutboxActivitiesQuery = (\n  { __typename: 'RootQueryType' }\n  & { community: Types.Maybe<(\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id'>\n    & { outbox: Types.Maybe<(\n      { __typename: 'ActivitiesPage' }\n      & Pick<Types.ActivitiesPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Activity' }\n        & CommunityOutboxActivityFragment\n      )> }\n    )> }\n  )> }\n);\n\nexport type CommunityOutboxActivityFragment = (\n  { __typename: 'Activity' }\n  & ActivityPreviewFragment\n);\n\nexport const CommunityOutboxActivityFragmentDoc = gql`\n    fragment CommunityOutboxActivity on Activity {\n  ...ActivityPreview\n}\n    ${ActivityPreviewFragmentDoc}`;\nexport const CommunityOutboxActivitiesDocument = gql`\n    query communityOutboxActivities($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: \"communityOutboxActivities\", filter: [\"communityId\"]) {\n    id\n    outbox(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityOutboxActivity\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CommunityOutboxActivityFragmentDoc}`;\n\n/**\n * __useCommunityOutboxActivitiesQuery__\n *\n * To run a query within a React component, call `useCommunityOutboxActivitiesQuery` and pass it any options that fit your needs.\n * When your component renders, `useCommunityOutboxActivitiesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCommunityOutboxActivitiesQuery({\n *   variables: {\n *      communityId: // value for 'communityId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useCommunityOutboxActivitiesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CommunityOutboxActivitiesQuery, CommunityOutboxActivitiesQueryVariables>) {\n        return ApolloReactHooks.useQuery<CommunityOutboxActivitiesQuery, CommunityOutboxActivitiesQueryVariables>(CommunityOutboxActivitiesDocument, baseOptions);\n      }\nexport function useCommunityOutboxActivitiesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CommunityOutboxActivitiesQuery, CommunityOutboxActivitiesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CommunityOutboxActivitiesQuery, CommunityOutboxActivitiesQueryVariables>(CommunityOutboxActivitiesDocument, baseOptions);\n        }\nexport type CommunityOutboxActivitiesQueryHookResult = ReturnType<typeof useCommunityOutboxActivitiesQuery>;\nexport type CommunityOutboxActivitiesLazyQueryHookResult = ReturnType<typeof useCommunityOutboxActivitiesLazyQuery>;\nexport type CommunityOutboxActivitiesQueryResult = ApolloReactCommon.QueryResult<CommunityOutboxActivitiesQuery, CommunityOutboxActivitiesQueryVariables>;\n\n\nexport interface CommunityOutboxActivitiesQueryOperation {\n  operationName: 'communityOutboxActivities'\n  result: CommunityOutboxActivitiesQuery\n  variables: CommunityOutboxActivitiesQueryVariables\n  type: 'query'\n}\nexport const CommunityOutboxActivitiesQueryName:CommunityOutboxActivitiesQueryOperation['operationName'] = 'communityOutboxActivities'\n\nexport const CommunityOutboxActivitiesQueryRefetch = (\n  variables:CommunityOutboxActivitiesQueryVariables, \n  context?:any\n)=>({\n  query:CommunityOutboxActivitiesDocument,\n  variables,\n  context\n})\n      \n","import { Community } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useCommunityOutboxActivities.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useCommunityOutboxActivities = (communityId: Community['id']) => {\n  const communityQ = GQL.useCommunityOutboxActivitiesQuery({\n    variables: { communityId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const activitiesPage = usePage(\n    communityQ.data?.community?.outbox,\n    ({ cursor, update }) => {\n      return communityQ.fetchMore({\n        variables: { ...cursor, communityId, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.community?.outbox && prev.community?.outbox\n            ? {\n                ...fetchMoreResult,\n                community: {\n                  ...fetchMoreResult.community,\n                  outbox: update({\n                    prev: prev.community.outbox,\n                    fetched: fetchMoreResult.community.outbox\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n  return useMemo(\n    () => ({\n      activitiesPage\n    }),\n    [activitiesPage]\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommunityPageCollectionBaseFragment } from '../../../HOC/pages/community/CommunityPage.generated';\nimport { CollectionPreviewFragment } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CollectionPreviewFragmentDoc } from '../../../HOC/modules/previews/collection/CollectionPreview.generated';\nimport { CommunityPageCollectionBaseFragmentDoc } from '../../../HOC/pages/community/CommunityPage.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\n\nexport type CommunityCollectionsQueryVariables = {\n  communityId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type CommunityCollectionsQuery = (\n  { __typename: 'RootQueryType' }\n  & { community: Types.Maybe<(\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id'>\n    & { collections: Types.Maybe<(\n      { __typename: 'CollectionsPage' }\n      & Pick<Types.CollectionsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Collection' }\n        & CommunityCollectionFragment\n      )> }\n    )> }\n  )> }\n);\n\nexport type CommunityCollectionFragment = (\n  { __typename: 'Collection' }\n  & CollectionPreviewFragment\n  & CommunityPageCollectionBaseFragment\n);\n\nexport const CommunityCollectionFragmentDoc = gql`\n    fragment CommunityCollection on Collection {\n  ...CollectionPreview\n  ...CommunityPageCollectionBase\n}\n    ${CollectionPreviewFragmentDoc}\n${CommunityPageCollectionBaseFragmentDoc}`;\nexport const CommunityCollectionsDocument = gql`\n    query communityCollections($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: \"communityCollections\", filter: [\"communityId\"]) {\n    id\n    collections(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityCollection\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CommunityCollectionFragmentDoc}`;\n\n/**\n * __useCommunityCollectionsQuery__\n *\n * To run a query within a React component, call `useCommunityCollectionsQuery` and pass it any options that fit your needs.\n * When your component renders, `useCommunityCollectionsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCommunityCollectionsQuery({\n *   variables: {\n *      communityId: // value for 'communityId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useCommunityCollectionsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CommunityCollectionsQuery, CommunityCollectionsQueryVariables>) {\n        return ApolloReactHooks.useQuery<CommunityCollectionsQuery, CommunityCollectionsQueryVariables>(CommunityCollectionsDocument, baseOptions);\n      }\nexport function useCommunityCollectionsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CommunityCollectionsQuery, CommunityCollectionsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CommunityCollectionsQuery, CommunityCollectionsQueryVariables>(CommunityCollectionsDocument, baseOptions);\n        }\nexport type CommunityCollectionsQueryHookResult = ReturnType<typeof useCommunityCollectionsQuery>;\nexport type CommunityCollectionsLazyQueryHookResult = ReturnType<typeof useCommunityCollectionsLazyQuery>;\nexport type CommunityCollectionsQueryResult = ApolloReactCommon.QueryResult<CommunityCollectionsQuery, CommunityCollectionsQueryVariables>;\n\n\nexport interface CommunityCollectionsQueryOperation {\n  operationName: 'communityCollections'\n  result: CommunityCollectionsQuery\n  variables: CommunityCollectionsQueryVariables\n  type: 'query'\n}\nexport const CommunityCollectionsQueryName:CommunityCollectionsQueryOperation['operationName'] = 'communityCollections'\n\nexport const CommunityCollectionsQueryRefetch = (\n  variables:CommunityCollectionsQueryVariables, \n  context?:any\n)=>({\n  query:CommunityCollectionsDocument,\n  variables,\n  context\n})\n      \n","import { Community } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useCommunityCollections.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport interface Props {\n  communityId: Community['id'];\n}\n\nexport const useCommunityCollections = (communityId: Community['id']) => {\n  const communityQ = GQL.useCommunityCollectionsQuery({\n    variables: { communityId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const collectionsPage = usePage(\n    communityQ.data?.community?.collections,\n    ({ cursor, update }) => {\n      return communityQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, communityId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.community?.collections &&\n            prev.community?.collections\n            ? {\n                ...fetchMoreResult,\n                community: {\n                  ...fetchMoreResult.community,\n                  collections: update({\n                    prev: prev.community.collections,\n                    fetched: fetchMoreResult.community.collections\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(\n    () => ({\n      collectionsPage\n    }),\n    [collectionsPage]\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type CreateThreadMutationVariables = {\n  contextId: Types.Scalars['String'],\n  comment: Types.CommentInput\n};\n\n\nexport type CreateThreadMutation = (\n  { __typename: 'RootMutationType' }\n  & { createThread: Types.Maybe<(\n    { __typename: 'Comment' }\n    & { thread: Types.Maybe<(\n      { __typename: 'Thread' }\n      & Pick<Types.Thread, 'id'>\n    )> }\n  )> }\n);\n\n\nexport const CreateThreadDocument = gql`\n    mutation createThread($contextId: String!, $comment: CommentInput!) {\n  createThread(comment: $comment, contextId: $contextId) {\n    thread {\n      id\n    }\n  }\n}\n    `;\nexport type CreateThreadMutationFn = ApolloReactCommon.MutationFunction<CreateThreadMutation, CreateThreadMutationVariables>;\n\n/**\n * __useCreateThreadMutation__\n *\n * To run a mutation, you first call `useCreateThreadMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useCreateThreadMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [createThreadMutation, { data, loading, error }] = useCreateThreadMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *      comment: // value for 'comment'\n *   },\n * });\n */\nexport function useCreateThreadMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<CreateThreadMutation, CreateThreadMutationVariables>) {\n        return ApolloReactHooks.useMutation<CreateThreadMutation, CreateThreadMutationVariables>(CreateThreadDocument, baseOptions);\n      }\nexport type CreateThreadMutationHookResult = ReturnType<typeof useCreateThreadMutation>;\nexport type CreateThreadMutationResult = ApolloReactCommon.MutationResult<CreateThreadMutation>;\nexport type CreateThreadMutationOptions = ApolloReactCommon.BaseMutationOptions<CreateThreadMutation, CreateThreadMutationVariables>;\n\n\nexport interface CreateThreadMutationOperation {\n  operationName: 'createThread'\n  result: CreateThreadMutation\n  variables: CreateThreadMutationVariables\n  type: 'mutation'\n}\nexport const CreateThreadMutationName:CreateThreadMutationOperation['operationName'] = 'createThread'\n\nexport const CreateThreadMutationRefetch = (\n  variables:CreateThreadMutationVariables, \n  context?:any\n)=>({\n  query:CreateThreadDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommunityPageThreadFragment } from '../../../HOC/pages/community/CommunityPage.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CommunityPageThreadFragmentDoc } from '../../../HOC/pages/community/CommunityPage.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type CommunityThreadsQueryVariables = {\n  communityId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type CommunityThreadsQuery = (\n  { __typename: 'RootQueryType' }\n  & { community: Types.Maybe<(\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id'>\n    & { threads: Types.Maybe<(\n      { __typename: 'ThreadsPage' }\n      & Pick<Types.ThreadsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Thread' }\n        & CommunityThreadFragment\n      )> }\n    )> }\n  )> }\n);\n\nexport type CommunityThreadFragment = (\n  { __typename: 'Thread' }\n  & CommunityPageThreadFragment\n);\n\nexport const CommunityThreadFragmentDoc = gql`\n    fragment CommunityThread on Thread {\n  ...CommunityPageThread\n}\n    ${CommunityPageThreadFragmentDoc}`;\nexport const CommunityThreadsDocument = gql`\n    query communityThreads($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: \"communityThreads\", filter: [\"communityId\"]) {\n    id\n    threads(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityThread\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CommunityThreadFragmentDoc}`;\n\n/**\n * __useCommunityThreadsQuery__\n *\n * To run a query within a React component, call `useCommunityThreadsQuery` and pass it any options that fit your needs.\n * When your component renders, `useCommunityThreadsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCommunityThreadsQuery({\n *   variables: {\n *      communityId: // value for 'communityId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useCommunityThreadsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CommunityThreadsQuery, CommunityThreadsQueryVariables>) {\n        return ApolloReactHooks.useQuery<CommunityThreadsQuery, CommunityThreadsQueryVariables>(CommunityThreadsDocument, baseOptions);\n      }\nexport function useCommunityThreadsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CommunityThreadsQuery, CommunityThreadsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CommunityThreadsQuery, CommunityThreadsQueryVariables>(CommunityThreadsDocument, baseOptions);\n        }\nexport type CommunityThreadsQueryHookResult = ReturnType<typeof useCommunityThreadsQuery>;\nexport type CommunityThreadsLazyQueryHookResult = ReturnType<typeof useCommunityThreadsLazyQuery>;\nexport type CommunityThreadsQueryResult = ApolloReactCommon.QueryResult<CommunityThreadsQuery, CommunityThreadsQueryVariables>;\n\n\nexport interface CommunityThreadsQueryOperation {\n  operationName: 'communityThreads'\n  result: CommunityThreadsQuery\n  variables: CommunityThreadsQueryVariables\n  type: 'query'\n}\nexport const CommunityThreadsQueryName:CommunityThreadsQueryOperation['operationName'] = 'communityThreads'\n\nexport const CommunityThreadsQueryRefetch = (\n  variables:CommunityThreadsQueryVariables, \n  context?:any\n)=>({\n  query:CommunityThreadsDocument,\n  variables,\n  context\n})\n      \n","import { CommunityOutboxActivitiesQueryRefetch } from 'fe/activities/outbox/community/useCommunityOutboxActivities.generated';\nimport { InstanceOutboxActivitiesQueryRefetch } from 'fe/activities/outbox/instance/useInstanceOutboxActivities.generated';\nimport { useCreateThreadMutation } from 'fe/mutation/createThread/useCreateThread.generated';\nimport { CommunityThreadsQueryRefetch } from 'fe/thread/community/useCommunityThreads.generated';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { Community } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\n\nexport type ContextTypes = Community;\nexport type Context = Pick<ContextTypes, '__typename' | 'id'>;\n\nexport const useCreateThreadContext = (\n  contextId: Maybe<Context['id']>,\n  __typename: Maybe<Context['__typename']>\n) => {\n  const [createThreadMut, createThreadMutStatus] = useCreateThreadMutation();\n  const mutating = createThreadMutStatus.loading;\n  const createThread = useCallOrNotifyMustLogin(\n    async (content: string) => {\n      if (!contextId || mutating) {\n        return;\n      }\n      return createThreadMut({\n        variables: {\n          contextId,\n          comment: { content }\n        },\n        refetchQueries: [\n          InstanceOutboxActivitiesQueryRefetch({ limit: DEFAULT_PAGE_SIZE }),\n          ...(__typename === 'Community'\n            ? [\n                CommunityThreadsQueryRefetch({\n                  communityId: contextId,\n                  limit: DEFAULT_PAGE_SIZE\n                }),\n                CommunityOutboxActivitiesQueryRefetch({\n                  communityId: contextId,\n                  limit: DEFAULT_PAGE_SIZE\n                })\n              ]\n            : [])\n        ]\n      }).then(res => res.data?.createThread?.thread?.id);\n    },\n    [contextId, __typename, mutating]\n  );\n\n  return useMemo(\n    () => ({\n      createThread\n    }),\n    [createThread]\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type EditCommunityQueryDataFragment = (\n  { __typename: 'Community' }\n  & Pick<Types.Community, 'id' | 'name' | 'summary' | 'updatedAt'>\n  & { icon: Types.Maybe<(\n    { __typename: 'Content' }\n    & Pick<Types.Content, 'id' | 'url'>\n  )> }\n);\n\nexport type EditCommunityDataQueryVariables = {\n  communityId: Types.Scalars['String']\n};\n\n\nexport type EditCommunityDataQuery = (\n  { __typename: 'RootQueryType' }\n  & { community: Types.Maybe<(\n    { __typename: 'Community' }\n    & EditCommunityQueryDataFragment\n  )> }\n);\n\nexport type EditCommunityMutationVariables = {\n  community: Types.CommunityUpdateInput,\n  communityId: Types.Scalars['String'],\n  icon?: Types.Maybe<Types.UploadInput>\n};\n\n\nexport type EditCommunityMutation = (\n  { __typename: 'RootMutationType' }\n  & { updateCommunity: Types.Maybe<(\n    { __typename: 'Community' }\n    & EditCommunityQueryDataFragment\n  )> }\n);\n\nexport const EditCommunityQueryDataFragmentDoc = gql`\n    fragment EditCommunityQueryData on Community {\n  id\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  updatedAt\n}\n    `;\nexport const EditCommunityDataDocument = gql`\n    query editCommunityData($communityId: String!) {\n  community(communityId: $communityId) {\n    ...EditCommunityQueryData\n  }\n}\n    ${EditCommunityQueryDataFragmentDoc}`;\n\n/**\n * __useEditCommunityDataQuery__\n *\n * To run a query within a React component, call `useEditCommunityDataQuery` and pass it any options that fit your needs.\n * When your component renders, `useEditCommunityDataQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useEditCommunityDataQuery({\n *   variables: {\n *      communityId: // value for 'communityId'\n *   },\n * });\n */\nexport function useEditCommunityDataQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<EditCommunityDataQuery, EditCommunityDataQueryVariables>) {\n        return ApolloReactHooks.useQuery<EditCommunityDataQuery, EditCommunityDataQueryVariables>(EditCommunityDataDocument, baseOptions);\n      }\nexport function useEditCommunityDataLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<EditCommunityDataQuery, EditCommunityDataQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<EditCommunityDataQuery, EditCommunityDataQueryVariables>(EditCommunityDataDocument, baseOptions);\n        }\nexport type EditCommunityDataQueryHookResult = ReturnType<typeof useEditCommunityDataQuery>;\nexport type EditCommunityDataLazyQueryHookResult = ReturnType<typeof useEditCommunityDataLazyQuery>;\nexport type EditCommunityDataQueryResult = ApolloReactCommon.QueryResult<EditCommunityDataQuery, EditCommunityDataQueryVariables>;\nexport const EditCommunityDocument = gql`\n    mutation editCommunity($community: CommunityUpdateInput!, $communityId: String!, $icon: UploadInput) {\n  updateCommunity(community: $community, communityId: $communityId, icon: $icon) {\n    ...EditCommunityQueryData\n  }\n}\n    ${EditCommunityQueryDataFragmentDoc}`;\nexport type EditCommunityMutationFn = ApolloReactCommon.MutationFunction<EditCommunityMutation, EditCommunityMutationVariables>;\n\n/**\n * __useEditCommunityMutation__\n *\n * To run a mutation, you first call `useEditCommunityMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useEditCommunityMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [editCommunityMutation, { data, loading, error }] = useEditCommunityMutation({\n *   variables: {\n *      community: // value for 'community'\n *      communityId: // value for 'communityId'\n *      icon: // value for 'icon'\n *   },\n * });\n */\nexport function useEditCommunityMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<EditCommunityMutation, EditCommunityMutationVariables>) {\n        return ApolloReactHooks.useMutation<EditCommunityMutation, EditCommunityMutationVariables>(EditCommunityDocument, baseOptions);\n      }\nexport type EditCommunityMutationHookResult = ReturnType<typeof useEditCommunityMutation>;\nexport type EditCommunityMutationResult = ApolloReactCommon.MutationResult<EditCommunityMutation>;\nexport type EditCommunityMutationOptions = ApolloReactCommon.BaseMutationOptions<EditCommunityMutation, EditCommunityMutationVariables>;\n\n\nexport interface EditCommunityDataQueryOperation {\n  operationName: 'editCommunityData'\n  result: EditCommunityDataQuery\n  variables: EditCommunityDataQueryVariables\n  type: 'query'\n}\nexport const EditCommunityDataQueryName:EditCommunityDataQueryOperation['operationName'] = 'editCommunityData'\n\nexport const EditCommunityDataQueryRefetch = (\n  variables:EditCommunityDataQueryVariables, \n  context?:any\n)=>({\n  query:EditCommunityDataDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface EditCommunityMutationOperation {\n  operationName: 'editCommunity'\n  result: EditCommunityMutation\n  variables: EditCommunityMutationVariables\n  type: 'mutation'\n}\nexport const EditCommunityMutationName:EditCommunityMutationOperation['operationName'] = 'editCommunity'\n\nexport const EditCommunityMutationRefetch = (\n  variables:EditCommunityMutationVariables, \n  context?:any\n)=>({\n  query:EditCommunityDocument,\n  variables,\n  context\n})\n      \n","import { getMaybeUploadInput } from 'fe/mutation/upload/getUploadInput';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { Community, CommunityUpdateInput } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { useMemo } from 'react';\nimport {\n  useEditCommunityDataQuery,\n  useEditCommunityMutation\n} from './useEditCommunity.generated';\n\nexport interface UpdateCommunity {\n  community: CommunityUpdateInput;\n  icon: Maybe<File | string>;\n}\nexport const useEditCommunity = (communityId: Community['id']) => {\n  const [editMut, editMutStatus] = useEditCommunityMutation();\n  const communityEditQ = useEditCommunityDataQuery({\n    variables: { communityId }\n  });\n\n  const edit = useCallOrNotifyMustLogin(\n    async ({ community, icon }: UpdateCommunity) => {\n      if (editMutStatus.loading) {\n        return;\n      }\n      return editMut({\n        variables: {\n          communityId,\n          icon: getMaybeUploadInput(\n            icon,\n            communityEditQ.data?.community?.icon?.url\n          ),\n          community: {\n            name: community.name,\n            summary: community.summary\n          }\n        }\n      });\n    },\n    [communityId, editMutStatus, editMut, communityEditQ]\n  );\n\n  return useMemo(() => {\n    const community = communityEditQ.data?.community;\n    return {\n      edit,\n      community\n    };\n  }, [edit, communityEditQ]);\n};\n","import * as Types from '../../graphql/types.generated';\n\nimport { CommunityPageDataFragment } from '../../HOC/pages/community/CommunityPage.generated';\nimport gql from 'graphql-tag';\nimport { CommunityPageDataFragmentDoc } from '../../HOC/pages/community/CommunityPage.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type CommunityDataQueryVariables = {\n  communityId: Types.Scalars['String']\n};\n\n\nexport type CommunityDataQuery = (\n  { __typename: 'RootQueryType' }\n  & { community: Types.Maybe<(\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id'>\n    & CommunityPageDataFragment\n  )> }\n);\n\n\nexport const CommunityDataDocument = gql`\n    query communityData($communityId: String!) {\n  community(communityId: $communityId) {\n    id\n    ...CommunityPageData\n  }\n}\n    ${CommunityPageDataFragmentDoc}`;\n\n/**\n * __useCommunityDataQuery__\n *\n * To run a query within a React component, call `useCommunityDataQuery` and pass it any options that fit your needs.\n * When your component renders, `useCommunityDataQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCommunityDataQuery({\n *   variables: {\n *      communityId: // value for 'communityId'\n *   },\n * });\n */\nexport function useCommunityDataQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CommunityDataQuery, CommunityDataQueryVariables>) {\n        return ApolloReactHooks.useQuery<CommunityDataQuery, CommunityDataQueryVariables>(CommunityDataDocument, baseOptions);\n      }\nexport function useCommunityDataLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CommunityDataQuery, CommunityDataQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CommunityDataQuery, CommunityDataQueryVariables>(CommunityDataDocument, baseOptions);\n        }\nexport type CommunityDataQueryHookResult = ReturnType<typeof useCommunityDataQuery>;\nexport type CommunityDataLazyQueryHookResult = ReturnType<typeof useCommunityDataLazyQuery>;\nexport type CommunityDataQueryResult = ApolloReactCommon.QueryResult<CommunityDataQuery, CommunityDataQueryVariables>;\n\n\nexport interface CommunityDataQueryOperation {\n  operationName: 'communityData'\n  result: CommunityDataQuery\n  variables: CommunityDataQueryVariables\n  type: 'query'\n}\nexport const CommunityDataQueryName:CommunityDataQueryOperation['operationName'] = 'communityData'\n\nexport const CommunityDataQueryRefetch = (\n  variables:CommunityDataQueryVariables, \n  context?:any\n)=>({\n  query:CommunityDataDocument,\n  variables,\n  context\n})\n      \n","import { useCreateThreadContext } from 'fe/context/createThread/useCreateThreadContext';\nimport { useFollowContext } from 'fe/context/follow/useFollowContext';\nimport { useMe } from 'fe/session/useMe';\nimport { Community } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport { useEditCommunity } from './edit/useEditCommunity';\nimport { useCommunityDataQuery } from './useCommunity.generated';\n\nexport const useCommunity = (communityId: Community['id']) => {\n  const { me } = useMe();\n\n  const communityQ = useCommunityDataQuery({ variables: { communityId } });\n  const { createThread } = useCreateThreadContext(communityId, 'Community');\n  const community = communityQ.data?.community;\n  const { toggleFollow: toggleJoin } = useFollowContext(community);\n  const { edit } = useEditCommunity(communityId);\n  const isCreator =\n    !!me && !!community?.creator && me.user.id === community.creator.id;\n  const canModify = !!me?.isInstanceAdmin || isCreator;\n\n  return useMemo(() => {\n    return {\n      community,\n      createThread,\n      toggleJoin,\n      edit,\n      canModify,\n      isCreator\n    };\n  }, [community, toggleJoin, edit, canModify, createThread, isCreator]);\n};\n","import { Community } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useCommunityThreads.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useCommunityThreads = (communityId: Community['id']) => {\n  const communityQ = GQL.useCommunityThreadsQuery({\n    variables: { communityId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const threadsPage = usePage(\n    communityQ.data?.community?.threads,\n    ({ cursor, update }) => {\n      return communityQ.fetchMore({\n        variables: { ...cursor, communityId, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.community?.threads && prev.community?.threads\n            ? {\n                ...fetchMoreResult,\n                community: {\n                  ...fetchMoreResult.community,\n                  threads: update({\n                    prev: prev.community.threads,\n                    fetched: fetchMoreResult.community.threads\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(\n    () => ({\n      threadsPage\n    }),\n    [threadsPage]\n  );\n};\n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { Community } from 'graphql/types.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\nimport * as GQL from './useCommunityFollowers.generated';\n\nexport const useCommunityFollowers = (communityId: Community['id']) => {\n  const communityFolowersQ = GQL.useCommunityFollowersQuery({\n    variables: { communityId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const communityFollowersPage = usePage(\n    communityFolowersQ.data?.community?.followers,\n    ({ cursor, update }) => {\n      return communityFolowersQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, communityId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.community?.followers &&\n            prev.community?.followers\n            ? {\n                ...fetchMoreResult,\n                community: {\n                  ...fetchMoreResult.community,\n                  followers: update({\n                    prev: prev.community.followers,\n                    fetched: fetchMoreResult.community.followers\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(\n    () => ({\n      communityFollowersPage\n    }),\n    [communityFollowersPage]\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CollectionPageDataFragment } from '../../../HOC/pages/collection/CollectionPage.generated';\nimport gql from 'graphql-tag';\nimport { CollectionPageDataFragmentDoc } from '../../../HOC/pages/collection/CollectionPage.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type CreateCollectionMutationVariables = {\n  collection: Types.CollectionInput,\n  communityId: Types.Scalars['String'],\n  icon?: Types.Maybe<Types.UploadInput>\n};\n\n\nexport type CreateCollectionMutation = (\n  { __typename: 'RootMutationType' }\n  & { createCollection: Types.Maybe<(\n    { __typename: 'Collection' }\n    & CollectionPageDataFragment\n  )> }\n);\n\n\nexport const CreateCollectionDocument = gql`\n    mutation createCollection($collection: CollectionInput!, $communityId: String!, $icon: UploadInput) {\n  createCollection(collection: $collection, communityId: $communityId, icon: $icon) {\n    ...CollectionPageData\n  }\n}\n    ${CollectionPageDataFragmentDoc}`;\nexport type CreateCollectionMutationFn = ApolloReactCommon.MutationFunction<CreateCollectionMutation, CreateCollectionMutationVariables>;\n\n/**\n * __useCreateCollectionMutation__\n *\n * To run a mutation, you first call `useCreateCollectionMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useCreateCollectionMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [createCollectionMutation, { data, loading, error }] = useCreateCollectionMutation({\n *   variables: {\n *      collection: // value for 'collection'\n *      communityId: // value for 'communityId'\n *      icon: // value for 'icon'\n *   },\n * });\n */\nexport function useCreateCollectionMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<CreateCollectionMutation, CreateCollectionMutationVariables>) {\n        return ApolloReactHooks.useMutation<CreateCollectionMutation, CreateCollectionMutationVariables>(CreateCollectionDocument, baseOptions);\n      }\nexport type CreateCollectionMutationHookResult = ReturnType<typeof useCreateCollectionMutation>;\nexport type CreateCollectionMutationResult = ApolloReactCommon.MutationResult<CreateCollectionMutation>;\nexport type CreateCollectionMutationOptions = ApolloReactCommon.BaseMutationOptions<CreateCollectionMutation, CreateCollectionMutationVariables>;\n\n\nexport interface CreateCollectionMutationOperation {\n  operationName: 'createCollection'\n  result: CreateCollectionMutation\n  variables: CreateCollectionMutationVariables\n  type: 'mutation'\n}\nexport const CreateCollectionMutationName:CreateCollectionMutationOperation['operationName'] = 'createCollection'\n\nexport const CreateCollectionMutationRefetch = (\n  variables:CreateCollectionMutationVariables, \n  context?:any\n)=>({\n  query:CreateCollectionDocument,\n  variables,\n  context\n})\n      \n","import { CommunityOutboxActivitiesQueryRefetch } from 'fe/activities/outbox/community/useCommunityOutboxActivities.generated';\nimport { InstanceOutboxActivitiesQueryRefetch } from 'fe/activities/outbox/instance/useInstanceOutboxActivities.generated';\nimport { getMaybeUploadInput } from 'fe/mutation/upload/getUploadInput';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { CollectionInput, Community } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\nimport { AllCollectionsQueryRefetch } from '../all/useAllCollections.generated';\nimport { CommunityCollectionsQueryRefetch } from '../community/useCommunityCollections.generated';\nimport { MyCollectionFollowsQueryRefetch } from '../myFollowed/myFollowedCollections.generated';\nimport { useCreateCollectionMutation } from './useCreateCollection.generated';\n\nexport interface CreateCollection {\n  collection: CollectionInput;\n  icon: Maybe<File | string>;\n}\nexport const useCreateCollection = (communityId: Community['id']) => {\n  const [createMut, createMutStatus] = useCreateCollectionMutation();\n\n  const create = useCallOrNotifyMustLogin(\n    async ({ collection, icon }: CreateCollection) => {\n      if (createMutStatus.loading) {\n        return;\n      }\n\n      return createMut({\n        variables: {\n          communityId: communityId,\n          icon: getMaybeUploadInput(icon, null),\n          collection: {\n            name: collection.name,\n            summary: collection.summary,\n            preferredUsername: collection.preferredUsername\n          }\n        },\n        refetchQueries: [\n          CommunityCollectionsQueryRefetch({\n            communityId,\n            limit: DEFAULT_PAGE_SIZE\n          }),\n          CommunityOutboxActivitiesQueryRefetch({\n            communityId,\n            limit: DEFAULT_PAGE_SIZE\n          }),\n          InstanceOutboxActivitiesQueryRefetch({ limit: DEFAULT_PAGE_SIZE }),\n          AllCollectionsQueryRefetch({ limit: DEFAULT_PAGE_SIZE }),\n          MyCollectionFollowsQueryRefetch({ limit: DEFAULT_PAGE_SIZE })\n        ]\n      });\n    },\n    [communityId, createMutStatus, createMut]\n  );\n  return useMemo(() => {\n    return {\n      create\n    };\n  }, [create]);\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input, Textarea } from '@rebass/forms';\nimport { FormikHook } from 'ui/@types/types';\nimport * as React from 'react';\nimport Button from 'ui/elements/Button';\nimport { clearFix } from 'polished';\nimport media from 'styled-media-query';\nimport styled from 'ui/themes/styled';\nimport { Flex, Text, Box, Heading } from 'rebass/styled-components';\nimport DropzoneArea from 'ui/modules/DropzoneModal';\nimport Alert from 'ui/elements/Alert';\nimport {\n  Actions,\n  AlertWrapper,\n  Container,\n  ContainerForm,\n  CounterChars,\n  Header\n} from 'ui/modules/Modal';\n\nconst tt = {\n  placeholders: {\n    name: i18nMark('Choose a name for the collection'),\n    summary: i18nMark(\n      'Please describe what the collection is for and what kind of resources it is likely to contain...'\n    ),\n    icon: i18nMark('Enter the URL of an image to represent the collection')\n  }\n};\n\nexport interface Props {\n  cancel(): any;\n  formik: FormikHook<BasicCreateCollectionFormValues>;\n}\n\nexport interface BasicCreateCollectionFormValues {\n  name: string;\n  summary: string;\n  icon: File | string | undefined;\n}\n\nexport const CreateCollectionPanel: React.FC<Props> = ({ cancel, formik }) => {\n  const onIconFileSelected = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, icon: file }),\n    [formik]\n  );\n  const initialIconUrl = 'string' === typeof formik.values.icon ? formik.values.icon : '';\n\n  return (\n    <Container>\n      <form onSubmit={formik.handleSubmit}>\n        <Header>\n          <Heading m={2}>\n            <Trans>Create a new collection</Trans>\n          </Heading>\n        </Header>\n        <Hero>\n          <Box sx={{ width: '120px', height: '120px' }}>\n            <DropzoneArea\n              initialUrl={initialIconUrl}\n              onFileSelect={onIconFileSelected}\n              filePattern=\"image/*\"\n            />\n          </Box>\n          {/* <Background style={{ backgroundImage: `url(\"${c.icon}\")` }} /> */}\n          <HeroInfo>\n            <Title fontSize={5} fontWeight={'bold'}>\n              <CollectionContainerForm>\n                <Input\n                  placeholder={tt.placeholders.name}\n                  disabled={formik.isSubmitting}\n                  name=\"name\"\n                  value={formik.values.name}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{60 - formik.values.name.length}</CounterChars>\n                {formik.errors.name && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.name}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Title>\n\n            <Description fontSize={2} mt={2}>\n              <CollectionContainerForm>\n                <Textarea\n                  placeholder={tt.placeholders.summary}\n                  disabled={formik.isSubmitting}\n                  name=\"summary\"\n                  value={formik.values.summary}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{500 - formik.values.summary.length}</CounterChars>\n                {formik.errors.summary && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.summary}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Description>\n          </HeroInfo>\n        </Hero>\n\n        <Actions>\n          <Button\n            variant=\"primary\"\n            isSubmitting={formik.isSubmitting}\n            isDisabled={formik.isSubmitting}\n            type=\"submit\"\n            style={{ marginLeft: '10px' }}\n            // onClick={formik.submitForm}\n          >\n            <Trans>Save</Trans>\n          </Button>\n          <Button variant=\"outline\" onClick={cancel}>\n            <Trans>Cancel</Trans>\n          </Button>\n        </Actions>\n      </form>\n    </Container>\n  );\n};\n\nconst CollectionContainerForm = styled(ContainerForm)`\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n`;\n\nconst Title = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst Description = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst HeroInfo = styled.div`\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ${clearFix()};\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ${props => props.theme.colors.mediumdark};\n    ${media.lessThan('medium')`\n      margin-top: 8px;\n    `};\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ${props => props.theme.colors.mediumdark};\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n`;\n\nconst Hero = styled(Flex)`\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ${media.lessThan('medium')`\n  text-align: center;\n  display: block;\n`};\n`;\n\nexport default CreateCollectionPanel;\n","import { Trans } from '@lingui/macro';\n// import { NavLink } from 'react-router-dom';\n// import { MDComment } from 'ui/elements/Layout/comment';\nimport Markdown from 'markdown-to-jsx';\nimport { darken } from 'polished';\nimport React, { FC } from 'react';\nimport { Flag, MoreVertical, Settings, Star } from 'react-feather';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\nimport { Dropdown, DropdownItem } from 'ui/modules/Dropdown';\nimport styled from 'ui/themes/styled';\n\nexport enum Status {\n  Loading,\n  Loaded\n}\n\nexport interface CommunityLoaded {\n  status: Status.Loaded;\n  isAdmin: boolean;\n  isCreator: boolean;\n  // isFeatured: boolean;\n  basePath: string;\n  icon: string;\n  name: string;\n  summary: string;\n  fullName: string;\n  totalMembers: number;\n  following: boolean;\n  isFlagged: boolean;\n  canModify: boolean;\n  toggleJoinFormik: FormikHook;\n\n  edit(): any;\n\n  flag(): any;\n\n  addToFeatured(): any;\n\n  isOpenDropdown: boolean;\n  toggleDropdown(): any;\n}\n\nexport interface CommunityLoading {\n  status: Status.Loading;\n}\n\nexport interface Props {\n  community: CommunityLoaded | CommunityLoading;\n}\n\nexport const HeroCommunity: FC<Props> = ({ community: c }) => {\n  return c.status === Status.Loading ? (\n    <Text>Loading...</Text>\n  ) : (\n    <>\n      <Hero p={1}>\n        <Background\n          id=\"header\"\n          style={{\n            backgroundImage: `url(\"${c.icon}\")`\n          }}\n        />\n        <HeroInfo>\n          <Title variant=\"heading\" mt={0}>\n            {c.name}\n          </Title>\n          <Username fontSize={0}>@{c.fullName}</Username>\n          {c.summary && (\n            <Box mt={2}>\n              <Markdown>{c.summary}</Markdown>\n              {/* <MDComment content={c.summary} /> */}\n            </Box>\n          )}\n          <Info mt={3}>\n            <Actions>\n              <Button\n                mr={2}\n                variant={c.following ? 'danger' : 'primary'}\n                isSubmitting={c.toggleJoinFormik.isSubmitting}\n                isDisabled={c.toggleJoinFormik.isSubmitting || c.isCreator}\n                onClick={c.toggleJoinFormik.submitForm}\n              >\n                {c.following ? <Trans>Leave</Trans> : <Trans>Join</Trans>}\n              </Button>\n              <More onClick={c.toggleDropdown}>\n                <MoreVertical size={20} />\n                {c.isOpenDropdown && (\n                  <RightDd>\n                    <Dropdown orientation={'bottom'} close={c.toggleDropdown}>\n                      {c.canModify && (\n                        <DropdownItem onClick={c.edit}>\n                          <Settings size={20} color={'rgb(101, 119, 134)'} />\n                          <Text sx={{ flex: 1 }} ml={2}>\n                            <Trans>Edit the community</Trans>\n                          </Text>\n                        </DropdownItem>\n                      )}\n                      <DropdownItem onClick={c.flag}>\n                        <Flag size={20} color={'rgb(101, 119, 134)'} />\n                        <Text sx={{ flex: 1 }} ml={2}>\n                          {!c.isFlagged ? (\n                            <Trans>Flag this community</Trans>\n                          ) : (\n                            <Trans>Unflag this community</Trans>\n                          )}\n                        </Text>\n                      </DropdownItem>\n                      {c.isAdmin ? (\n                        <AdminDropdownItem onClick={c.addToFeatured}>\n                          <Star size={20} color={'rgb(211, 103, 5)'} />\n                          <Text sx={{ flex: 1 }} ml={2}>\n                            {\n                              /* c.isFeatured ? (\n                            <Trans>Remove from featured list</Trans>\n                          ) :  */ <Trans>\n                                Add to featured list\n                              </Trans>\n                            }\n                          </Text>\n                        </AdminDropdownItem>\n                      ) : null}\n                    </Dropdown>\n                  </RightDd>\n                )}\n              </More>\n            </Actions>\n          </Info>\n        </HeroInfo>\n      </Hero>\n    </>\n  );\n};\n\n// const InfoCommunity = styled(Flex)`\n//   align-items: center;\n// `;\n\nconst RightDd = styled(Box)`\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n`;\n\n// const Badge = styled(Box)`\n//   border: 1px solid ${props => props.theme.colors.secondary};\n//   padding: 4px;\n//   border-radius: 4px;\n//   color:  ${props => props.theme.colors.secondary};\n//   font-size: ${typography.size.s1}\n// `\n\nconst AdminDropdownItem = styled(DropdownItem)`\n    border-top: 1px solid ${props => darken('0.1', props.theme.colors.light)};\n    // svg {\n    //   stroke: ${props => darken('0.1', props.theme.colors.primary)};\n    // }\n    `;\n\nconst More = styled(Box)`\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ${props => props.theme.colors.border};\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ${props => props.theme.colors.mediumdark};\n  }\n`;\n\nconst Info = styled(Flex)`\n  align-items: center;\n  justify-content: space-between;\n`;\n// const Total = styled(Text)`\n//   color: ${props => props.theme.colors.primary};\n// `;\n\nconst Title = styled(Text)`\n  color: ${props => props.theme.colors.darker};\n  ${media.lessThan('medium')`\nfont-size: 20px !important;\n`};\n`;\n\nconst Actions = styled(Flex)`\n  align-items: center;\n`;\n\nconst Username = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  text-transform: lowercase;\n  font-size: 14px;\n`;\n\n// const MembersTot = styled(NavLink)`\n//   margin-top: 0px;\n//   cursor: pointer;\n//   cursor: pointer;\n//   text-decoration: none;\n//   * {\n//     text-decoration: none;\n//   }\n//   flex: 1;\n//   > div {\n//     display: flex;\n//   }\n//   ${clearFix()} & span {\n//     margin-right: 4px;\n//     float: left;\n//     height: 32px;\n//     line-height: 32px;\n//     & svg {\n//       vertical-align: middle;\n//     }\n//     .--rtl & {\n//       float: right;\n//       margin-right: 0px;\n//       margin-left: 8px;\n//     }\n//   }\n// `;\n\nconst Hero = styled(Box)`\n  width: 100%;\n  position: relative;\n  background: ${props => props.theme.colors.appInverse};\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n`;\n\nconst Background = styled.div`\n  margin-top: 24px;\n  height: 250px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-color: ${props => props.theme.colors.medium};\n  position: relative;\n  margin: 0 auto;\n  border-radius: 4px;\n  background-position: center center;\n//   ${media.lessThan('medium')`\n//     display: none;\n// `};\n`;\n\nconst HeroInfo = styled.div`\n  padding: 16px;\n  ${media.lessThan('medium')`\n   padding: 8px;\n`} & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n`;\n\nexport default HeroCommunity;\n","import { useCreateCollection } from 'fe/collection/create/useCreateCollection';\nimport { useFormik } from 'formik';\nimport React, { FC } from 'react';\nimport {\n  BasicCreateCollectionFormValues,\n  CreateCollectionPanel\n} from 'ui/modules/CreateCollectionPanel';\nimport * as Yup from 'yup';\nimport { useHistory } from 'react-router-dom';\nimport { TestUrlOrFile } from 'HOC/lib/formik-validations';\n\nexport const validationSchema: Yup.ObjectSchema<BasicCreateCollectionFormValues> = Yup.object<\n  BasicCreateCollectionFormValues\n>({\n  name: Yup.string()\n    .min(2)\n    .max(60)\n    .required(),\n  summary: Yup.string().max(500),\n  icon: Yup.mixed<string | File>().test(...TestUrlOrFile)\n});\nexport interface Props {\n  communityId: string;\n  done(): any;\n}\nexport const CreateCollectionPanelHOC: FC<Props> = ({\n  communityId,\n  done\n}: Props) => {\n  const history = useHistory();\n  const { create } = useCreateCollection(communityId);\n\n  const formik = useFormik<BasicCreateCollectionFormValues>({\n    initialValues: {\n      name: '',\n      summary: '',\n      icon: ''\n    },\n    enableReinitialize: true,\n    onSubmit: vals => {\n      return create({\n        collection: {\n          preferredUsername: vals.name.split(' ').join('_'),\n          name: vals.name,\n          summary: vals.summary\n        },\n        icon: vals.icon\n      })\n        .then(\n          res =>\n            res?.data?.createCollection?.id &&\n            history.push(`/collections/${res.data.createCollection.id}`)\n        )\n        .catch(err => console.log(err));\n    },\n    validationSchema\n  });\n  return <CreateCollectionPanel cancel={done} formik={formik} />;\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input, Textarea } from '@rebass/forms';\nimport { FormikHook } from 'ui/@types/types';\nimport * as React from 'react';\nimport DropzoneArea from 'ui/modules/DropzoneModal';\nimport Alert from 'ui/elements/Alert';\nimport Button from 'ui/elements/Button';\nimport { clearFix } from 'polished';\nimport media from 'styled-media-query';\nimport styled from 'ui/themes/styled';\nimport { Flex, Text, Box } from 'rebass/styled-components';\n\nimport { Actions, AlertWrapper, Container, ContainerForm, CounterChars } from 'ui/modules/Modal';\n\nconst tt = {\n  placeholders: {\n    name: i18nMark('Choose a name for the community'),\n    summary: i18nMark(\n      'Please describe who might be interested in this community and what kind of collections it is likely to contain...'\n    ),\n    icon: i18nMark('Enter the URL of an image to represent the community')\n  }\n};\n\nexport interface Props {\n  cancel: () => any;\n  formik: FormikHook<EditCommunityFormValues>;\n}\n\nexport interface EditCommunityFormValues {\n  name: string;\n  summary: string;\n  icon: string | File | undefined;\n}\n\nexport const EditCommunityPanel: React.FC<Props> = ({ cancel, formik }) => {\n  const onIconFileSelected = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, icon: file }),\n    [formik]\n  );\n  const initialIconUrl = 'string' === typeof formik.values.icon ? formik.values.icon : '';\n  return (\n    <Container>\n      <form onSubmit={formik.handleSubmit}>\n        <Hero>\n          <Box sx={{ width: '120px', height: '120px' }}>\n            <DropzoneArea\n              initialUrl={initialIconUrl}\n              onFileSelect={onIconFileSelected}\n              filePattern=\"image/*\"\n            />\n          </Box>\n          {/* <Background style={{ backgroundImage: `url(\"${c.icon}\")` }} /> */}\n          <HeroInfo>\n            <Title fontSize={5} fontWeight={'bold'}>\n              <CollectionContainerForm>\n                <Input\n                  placeholder={tt.placeholders.name}\n                  disabled={formik.isSubmitting}\n                  name=\"name\"\n                  value={formik.values.name}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{60 - formik.values.name.length}</CounterChars>\n                {formik.errors.name && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.name}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Title>\n\n            <Description fontSize={2} mt={2}>\n              <CollectionContainerForm>\n                <Textarea\n                  placeholder={tt.placeholders.summary}\n                  disabled={formik.isSubmitting}\n                  name=\"summary\"\n                  value={formik.values.summary}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{500 - formik.values.summary.length}</CounterChars>\n                {formik.errors.summary && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.summary}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Description>\n          </HeroInfo>\n        </Hero>\n\n        <Actions>\n          <Button\n            variant=\"primary\"\n            isSubmitting={formik.isSubmitting}\n            isDisabled={formik.isSubmitting}\n            type=\"submit\"\n            style={{ marginLeft: '10px' }}\n            // onClick={formik.submitForm}\n          >\n            <Trans>Save</Trans>\n          </Button>\n          <Button variant=\"outline\" onClick={cancel}>\n            <Trans>Cancel</Trans>\n          </Button>\n        </Actions>\n      </form>\n    </Container>\n  );\n};\n\nconst CollectionContainerForm = styled(ContainerForm)`\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n`;\n\nconst Title = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst Description = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst HeroInfo = styled.div`\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ${clearFix()};\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ${props => props.theme.colors.mediumdark};\n    ${media.lessThan('medium')`\n      margin-top: 8px;\n    `};\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ${props => props.theme.colors.mediumdark};\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n`;\n\nconst Hero = styled(Flex)`\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ${media.lessThan('medium')`\n  text-align: center;\n  display: block;\n`};\n`;\n\nexport default EditCommunityPanel;\n","import { useEditCommunity } from 'fe/community/edit/useEditCommunity';\nimport { useFormik } from 'formik';\nimport { Community } from 'graphql/types.generated';\nimport React, { FC, useMemo } from 'react';\nimport {\n  EditCommunityFormValues,\n  EditCommunityPanel\n} from 'ui/modules/EditCommunityPanel';\nimport * as Yup from 'yup';\nimport { TestUrlOrFile } from 'HOC/lib/formik-validations';\n\nexport const validationSchema: Yup.ObjectSchema<EditCommunityFormValues> = Yup.object<\n  EditCommunityFormValues\n>({\n  name: Yup.string()\n    .min(2)\n    .max(60)\n    .required(),\n  summary: Yup.string().max(500),\n  icon: Yup.mixed<File | string>().test(...TestUrlOrFile)\n});\n\nexport interface Props {\n  communityId: Community['id'];\n  done(): any;\n}\nexport const EditCommunityPanelHOC: FC<Props> = ({\n  done,\n  communityId\n}: Props) => {\n  const { community, edit } = useEditCommunity(communityId);\n  const initialValues = useMemo<EditCommunityFormValues>(\n    () => ({\n      icon: community?.icon?.url || '',\n      name: community?.name || '',\n      summary: community?.summary || ''\n    }),\n    [community]\n  );\n\n  const formik = useFormik<EditCommunityFormValues>({\n    enableReinitialize: true,\n    onSubmit: vals => {\n      return edit({\n        community: {\n          name: vals.name,\n          summary: vals.summary || undefined\n        },\n        icon: vals.icon\n      }).then(done);\n    },\n    validationSchema,\n    initialValues\n  });\n  return <EditCommunityPanel cancel={done} formik={formik} />;\n};\n","import { useCommunity } from 'fe/community/useCommunity';\nimport { useMe } from 'fe/session/useMe';\nimport { useFormik } from 'formik';\nimport { Community } from 'graphql/types.generated';\nimport React, { FC, useMemo, useReducer } from 'react';\nimport HeroCommunityUI, { Props as HeroProps, Status } from 'ui/modules/HeroCommunity';\nimport { EditCommunityPanelHOC } from 'HOC/modules/EditCommunityPanel/editCommunityPanelHOC';\nimport { FeatureModalHOC } from 'HOC/modules/FeatureModal/FeatureModal';\nimport { FlagModalHOC } from 'HOC/modules/FlagModal/flagModalHOC';\nimport { useNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport Modal from 'ui/modules/Modal';\n\nexport interface HeroCommunity {\n  communityId: Community['id'];\n  basePath: string;\n}\n\nexport const HeroCommunity: FC<HeroCommunity> = ({ communityId, basePath }) => {\n  const { isAdmin } = useMe();\n  const { toggleJoin, community, canModify, isCreator } = useCommunity(communityId);\n\n  const toggleJoinFormik = useFormik<{}>({\n    initialValues: {},\n    onSubmit: toggleJoin\n  });\n\n  const notifiedMustLogin = useNotifyMustLogin();\n  const [isOpenDropdown, toggleDropdown] = React.useReducer(is => !is, false);\n\n  const [isEditing, toggleEditing] = useReducer(is => {\n    return !canModify || notifiedMustLogin() ? false : !is;\n  }, false);\n  const EditModal =\n    community && isEditing ? (\n      <Modal closeModal={toggleEditing}>\n        <EditCommunityPanelHOC communityId={community.id} done={toggleEditing} />\n      </Modal>\n    ) : null;\n\n  const [isFlagging, toggleFlagging] = useReducer(is => {\n    return notifiedMustLogin() ? false : !is;\n  }, false);\n  const FlagModal =\n    community && isFlagging ? (\n      <Modal closeModal={toggleFlagging}>\n        <FlagModalHOC done={toggleFlagging} ctx={community} />\n      </Modal>\n    ) : null;\n\n  const [isAddingToFeatured, toggleAddToFeatured] = useReducer(is => {\n    return !isAdmin || notifiedMustLogin() ? false : !is;\n  }, false);\n  const AddToFeaturedModal =\n    community && isAddingToFeatured ? (\n      <Modal closeModal={toggleAddToFeatured}>\n        <FeatureModalHOC done={toggleAddToFeatured} ctx={community} featureId={null} />\n      </Modal>\n    ) : null;\n\n  const heroProps = useMemo<HeroProps>(() => {\n    if (!community) {\n      const props: HeroProps = {\n        community: {\n          status: Status.Loading\n        }\n      };\n      return props;\n    }\n\n    const props: HeroProps = {\n      community: {\n        basePath,\n        status: Status.Loaded,\n        canModify,\n        isAdmin,\n        isCreator,\n        following: !!community.myFollow,\n        isFlagged: !!community.myFlag,\n        icon: community.icon?.url || '',\n        name: community.name,\n        fullName: community.displayUsername,\n        totalMembers: community.followerCount || 0,\n        summary: community.summary || '',\n        toggleJoinFormik,\n        addToFeatured: toggleAddToFeatured,\n        edit: toggleEditing,\n        flag: toggleFlagging,\n        isOpenDropdown,\n        toggleDropdown\n      }\n    };\n    return props;\n  }, [community, basePath, canModify, isAdmin, isCreator, toggleJoinFormik, isOpenDropdown]);\n\n  return (\n    <>\n      {EditModal}\n      {FlagModal}\n      {AddToFeaturedModal}\n      <HeroCommunityUI {...heroProps} />\n    </>\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { ActivityPreviewFragment } from '../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport gql from 'graphql-tag';\nimport { ActivityPreviewFragmentDoc } from '../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type ActivityPreviewQueryVariables = {\n  activityId: Types.Scalars['String']\n};\n\n\nexport type ActivityPreviewQuery = (\n  { __typename: 'RootQueryType' }\n  & { activity: Types.Maybe<(\n    { __typename: 'Activity' }\n    & Pick<Types.Activity, 'id'>\n    & ActivityPreviewFragment\n  )> }\n);\n\n\nexport const ActivityPreviewDocument = gql`\n    query activityPreview($activityId: String!) {\n  activity(activityId: $activityId) {\n    id\n    ...ActivityPreview\n  }\n}\n    ${ActivityPreviewFragmentDoc}`;\n\n/**\n * __useActivityPreviewQuery__\n *\n * To run a query within a React component, call `useActivityPreviewQuery` and pass it any options that fit your needs.\n * When your component renders, `useActivityPreviewQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useActivityPreviewQuery({\n *   variables: {\n *      activityId: // value for 'activityId'\n *   },\n * });\n */\nexport function useActivityPreviewQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<ActivityPreviewQuery, ActivityPreviewQueryVariables>) {\n        return ApolloReactHooks.useQuery<ActivityPreviewQuery, ActivityPreviewQueryVariables>(ActivityPreviewDocument, baseOptions);\n      }\nexport function useActivityPreviewLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<ActivityPreviewQuery, ActivityPreviewQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<ActivityPreviewQuery, ActivityPreviewQueryVariables>(ActivityPreviewDocument, baseOptions);\n        }\nexport type ActivityPreviewQueryHookResult = ReturnType<typeof useActivityPreviewQuery>;\nexport type ActivityPreviewLazyQueryHookResult = ReturnType<typeof useActivityPreviewLazyQuery>;\nexport type ActivityPreviewQueryResult = ApolloReactCommon.QueryResult<ActivityPreviewQuery, ActivityPreviewQueryVariables>;\n\n\nexport interface ActivityPreviewQueryOperation {\n  operationName: 'activityPreview'\n  result: ActivityPreviewQuery\n  variables: ActivityPreviewQueryVariables\n  type: 'query'\n}\nexport const ActivityPreviewQueryName:ActivityPreviewQueryOperation['operationName'] = 'activityPreview'\n\nexport const ActivityPreviewQueryRefetch = (\n  variables:ActivityPreviewQueryVariables, \n  context?:any\n)=>({\n  query:ActivityPreviewDocument,\n  variables,\n  context\n})\n      \n","import { Textarea } from '@rebass/forms';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Flex } from 'rebass/styled-components';\n// import { dropEmoji } from '../../lib/emoji';\n// import EmojiPicker from 'emoji-picker-react';\n// import OutsideClickHandler from 'react-outside-click-handler';\nimport Button from 'ui/elements/Button';\nimport styled from 'ui/themes/styled';\nimport { Trans } from '@lingui/macro';\n// const PickerWrap = styled.div`\n//   position: absolute;\n//   right: 10px;\n//   top: 45px;\n//   z-index: 999999999999999999;\n// `;\nconst Wrapper = styled(Flex)`\n  width: 100%;\n  position: relative;\n  height: 200px;\n  flex-direction: column;\n`;\nconst SocialTextDiv = styled(Flex)`\n  position: relative;\n  width: 100%;\n  align-items: center;\n  border: ${props => props.theme.colors.border};\n  border-radius: 4px;\n  margin-bottom: 8px;\n  background: white;\n  flex: 1;\n`;\n// const EmojiPickerTrigger = styled(Box)`\n//   cursor: pointer;\n//   &:hover {\n//     svg {\n//       stroke: ${props => props.theme.colors.primary}\n//     }\n//   }\n// `;\n\nconst SocialTextArea = styled(Textarea)`\n  height: 100%;\n  resize: none;\n  background: ${props => props.theme.colors.appInverse};\n  flex: 1;\n  border: 0 !important;\n  font-size: 16px !important;\n  &:focus {\n    outline: none;\n  }\n  font-family: 'Open Sans', sans-serif !important;\n`;\n\nconst SocialActions = styled(Flex)`\n  align-self: flex-end;\n`;\n\nexport interface Props {\n  submit(text: string): void;\n  defaultValue?: string;\n  keepTextOnSubmit?: boolean;\n  placeholder?: string;\n}\nexport const SocialText: React.FC<Props> = ({\n  submit,\n  defaultValue = '',\n  keepTextOnSubmit = false,\n  placeholder = ''\n}) => {\n  const ref = useRef<any>(null);\n  const [text, setText] = useState(defaultValue);\n  // const [isEmojiOpen, setEmojiOpen] = useState(false);\n  // const toggleEmoji = useCallback(() => setEmojiOpen(!isEmojiOpen), [\n  //   isEmojiOpen\n  // ]);\n  // const addEmoji = React.useCallback(\n  //   (code, obj) => {\n  //     // console.log(code, obj);\n  //     if (!ref.current) {\n  //       return;\n  //     }\n  //     const textarea = ref.current as HTMLTextAreaElement;\n  //     const selectionStart = textarea.selectionStart;\n  //     // const selectionEnd = textarea.selectionEnd\n  //     const offset = dropEmoji(textarea, obj.emoji);\n  //     const pos = selectionStart + offset;\n  //     textarea.focus();\n  //     // console.log([selectionStart,selectionEnd], offset, pos, [textarea.selectionStart, textarea.selectionEnd] )\n  //     textarea.selectionEnd = pos;\n  //   },\n  //   [ref.current]\n  // );\n  const handleSubmit = useCallback(() => {\n    if (!text) {\n      return;\n    }\n    submit(text);\n    if (!keepTextOnSubmit) {\n      setText('');\n    }\n  }, [text, keepTextOnSubmit, submit]);\n  useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n    ref.current.value = text;\n  }, [text]);\n  const onChange = useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    const txt = ref.current.value;\n    setText(txt);\n  }, [setText]);\n  return (\n    <Wrapper>\n      <SocialTextDiv>\n        <SocialTextArea\n          placeholder={placeholder}\n          ref={ref}\n          defaultValue={defaultValue}\n          onInput={onChange}\n        />\n        {/* {isEmojiOpen && (\n          <OutsideClickHandler onOutsideClick={toggleEmoji}>\n            <PickerWrap>\n              <EmojiPicker preload onEmojiClick={addEmoji} />\n            </PickerWrap>\n          </OutsideClickHandler>\n        )} */}\n      </SocialTextDiv>\n      <SocialActions>\n        {/* <EmojiPickerTrigger onClick={toggleEmoji}>\n            <Smile color={'rgba(0,0,0,.4)'} size=\"24\" />\n          </EmojiPickerTrigger> */}\n        <Button\n          variant=\"primary\"\n          sx={{\n            cursor: text ? 'pointer' : 'default',\n            textTransform: 'capitalize'\n          }}\n          onClick={handleSubmit}\n        >\n          <Trans>Publish</Trans>\n        </Button>\n      </SocialActions>\n    </Wrapper>\n  );\n};\nexport default SocialText;\n","import * as React from 'react';\nimport { Flex, Box, Text } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\nimport { Link } from 'react-router-dom';\nimport Avatar from 'ui/elements/Avatar';\nimport { WrapperPanel } from 'ui/elements/Panel';\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport { FormikHook } from 'ui/@types/types';\n\nimport { Wrapper, WrapperCont, ObjectsList, MainContainer, HomeBox } from 'ui/elements/Layout';\nimport SocialText from 'ui/modules/SocialText';\nimport { i18nMark } from '@lingui/react';\nimport { Trans } from '@lingui/react';\nimport { LocaleContext } from '../../../context/global/localizationCtx';\nimport { ReactElement } from 'react';\n\nconst tt = {\n  placeholders: {\n    name: i18nMark('Post a reply')\n  }\n};\n\nexport interface ReplyActions {\n  replyFormik: FormikHook<{ replyMessage: string }>;\n}\nexport interface Props {\n  MainThread: ReactElement;\n  Comments: ReactElement;\n  Context: ReactElement;\n  communityId: string;\n  communityName: string;\n  communityIcon: string;\n  isCommunityContext: boolean;\n  reply: ReplyActions | null;\n  loadMoreComments: FormikHook | null;\n}\n\nexport const Thread: React.FC<Props> = ({\n  MainThread,\n  Comments,\n  communityId,\n  communityName,\n  communityIcon,\n  Context,\n  isCommunityContext,\n  loadMoreComments,\n  reply\n}) => {\n  // console.log(Context);\n  const { i18n } = React.useContext(LocaleContext);\n  return (\n    <MainContainer>\n      <HomeBox mb={3}>\n        <WrapperCont>\n          <Wrapper>\n            <Box mb={2}>\n              {!isCommunityContext && <Box p={2}>{Context}</Box>}\n              <MainThreadContainer>{MainThread}</MainThreadContainer>\n            </Box>\n            <ObjectsList className=\"replies\">{Comments}</ObjectsList>\n            {loadMoreComments && <LoadMore LoadMoreFormik={loadMoreComments} />}\n            {reply && (\n              <SocialWrapper my={3}>\n                <SocialText\n                  placeholder={i18n._(tt.placeholders.name)}\n                  defaultValue={''}\n                  submit={msg => {\n                    reply.replyFormik.setValues({ replyMessage: msg });\n                    reply.replyFormik.submitForm();\n                  }}\n                />\n              </SocialWrapper>\n            )}\n          </Wrapper>\n        </WrapperCont>\n      </HomeBox>\n      <WrapperPanel>\n        <TitleSection mb={2} variant=\"suptitle\">\n          <Trans>Community</Trans>\n        </TitleSection>\n        <HeaderWrapper id={communityId} name={communityName} icon={communityIcon} />\n      </WrapperPanel>\n    </MainContainer>\n  );\n};\n\nexport const HeaderWrapper: React.FC<{ id: string; name: string; icon: string }> = ({\n  id,\n  name,\n  icon\n}) => {\n  return (\n    <>\n      <Header>\n        <Right>\n          <Link to={`/communities/${id}`}>\n            <LinkImg>\n              <Avatar size=\"s\" src={icon} />\n            </LinkImg>\n            <Text variant=\"suptitle\">{name}</Text>\n          </Link>\n        </Right>\n      </Header>\n    </>\n  );\n};\n\nconst TitleSection = styled(Text)`\n  text-transform: capitalize;\n`;\n\nconst SocialWrapper = styled(Box)`\n  // background: ${props => props.theme.colors.appInverse};\n`;\n\nconst MainThreadContainer = styled(Box)`\n  //  border-bottom: ${props => props.theme.colors.border};\n`;\n\nconst LinkImg = styled(Box)`\n  margin-right: 8px;\n  .--rtl & {\n    margin-right: 0px;\n    margin-left: 8px;\n  }\n`;\nconst Right = styled(Flex)`\n  align-items: center;\n  a {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nconst Header = styled(Flex)`\n  border-bottom: ${props => props.theme.colors.border};\n  height: 50px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 8px;\n  cursor: pointer;\n  background: ${props => props.theme.colors.appInverse};\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  a {\n    display: flex;\n    flex: 1;\n    text-decoration: none;\n  }\n`;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommentPreviewFragment } from '../../../HOC/modules/previews/comment/CommentPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommentPreviewFragmentDoc } from '../../../HOC/modules/previews/comment/CommentPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type CommentPreviewQueryVariables = {\n  commentId: Types.Scalars['String']\n};\n\n\nexport type CommentPreviewQuery = (\n  { __typename: 'RootQueryType' }\n  & { comment: Types.Maybe<(\n    { __typename: 'Comment' }\n    & Pick<Types.Comment, 'id'>\n    & CommentPreviewFragment\n  )> }\n);\n\n\nexport const CommentPreviewDocument = gql`\n    query commentPreview($commentId: String!) {\n  comment(commentId: $commentId) {\n    id\n    ...CommentPreview\n  }\n}\n    ${CommentPreviewFragmentDoc}`;\n\n/**\n * __useCommentPreviewQuery__\n *\n * To run a query within a React component, call `useCommentPreviewQuery` and pass it any options that fit your needs.\n * When your component renders, `useCommentPreviewQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCommentPreviewQuery({\n *   variables: {\n *      commentId: // value for 'commentId'\n *   },\n * });\n */\nexport function useCommentPreviewQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CommentPreviewQuery, CommentPreviewQueryVariables>) {\n        return ApolloReactHooks.useQuery<CommentPreviewQuery, CommentPreviewQueryVariables>(CommentPreviewDocument, baseOptions);\n      }\nexport function useCommentPreviewLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CommentPreviewQuery, CommentPreviewQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CommentPreviewQuery, CommentPreviewQueryVariables>(CommentPreviewDocument, baseOptions);\n        }\nexport type CommentPreviewQueryHookResult = ReturnType<typeof useCommentPreviewQuery>;\nexport type CommentPreviewLazyQueryHookResult = ReturnType<typeof useCommentPreviewLazyQuery>;\nexport type CommentPreviewQueryResult = ApolloReactCommon.QueryResult<CommentPreviewQuery, CommentPreviewQueryVariables>;\n\n\nexport interface CommentPreviewQueryOperation {\n  operationName: 'commentPreview'\n  result: CommentPreviewQuery\n  variables: CommentPreviewQueryVariables\n  type: 'query'\n}\nexport const CommentPreviewQueryName:CommentPreviewQueryOperation['operationName'] = 'commentPreview'\n\nexport const CommentPreviewQueryRefetch = (\n  variables:CommentPreviewQueryVariables, \n  context?:any\n)=>({\n  query:CommentPreviewDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../../graphql/types.generated';\n\nimport { ActivityPreviewFragment } from '../../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport { FullPageInfoFragment } from '../../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../../@fragments/misc.generated';\nimport { ActivityPreviewFragmentDoc } from '../../../../HOC/modules/previews/activity/ActivityPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type MyInboxActivitiesQueryVariables = {\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  limit?: Types.Maybe<Types.Scalars['Int']>\n};\n\n\nexport type MyInboxActivitiesQuery = (\n  { __typename: 'RootQueryType' }\n  & { me: Types.Maybe<(\n    { __typename: 'Me' }\n    & { user: (\n      { __typename: 'User' }\n      & Pick<Types.User, 'id'>\n      & { inbox: Types.Maybe<(\n        { __typename: 'ActivitiesPage' }\n        & Pick<Types.ActivitiesPage, 'totalCount'>\n        & { pageInfo: (\n          { __typename: 'PageInfo' }\n          & FullPageInfoFragment\n        ), edges: Array<(\n          { __typename: 'Activity' }\n          & MyInboxActivityFragment\n        )> }\n      )> }\n    ) }\n  )> }\n);\n\nexport type MyInboxActivityFragment = (\n  { __typename: 'Activity' }\n  & ActivityPreviewFragment\n);\n\nexport const MyInboxActivityFragmentDoc = gql`\n    fragment MyInboxActivity on Activity {\n  ...ActivityPreview\n}\n    ${ActivityPreviewFragmentDoc}`;\nexport const MyInboxActivitiesDocument = gql`\n    query myInboxActivities($after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  me @connection(key: \"myInboxActivities\") {\n    user {\n      id\n      inbox(after: $after, before: $before, limit: $limit) {\n        totalCount\n        pageInfo {\n          ...FullPageInfo\n        }\n        edges {\n          ...MyInboxActivity\n        }\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${MyInboxActivityFragmentDoc}`;\n\n/**\n * __useMyInboxActivitiesQuery__\n *\n * To run a query within a React component, call `useMyInboxActivitiesQuery` and pass it any options that fit your needs.\n * When your component renders, `useMyInboxActivitiesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useMyInboxActivitiesQuery({\n *   variables: {\n *      after: // value for 'after'\n *      before: // value for 'before'\n *      limit: // value for 'limit'\n *   },\n * });\n */\nexport function useMyInboxActivitiesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<MyInboxActivitiesQuery, MyInboxActivitiesQueryVariables>) {\n        return ApolloReactHooks.useQuery<MyInboxActivitiesQuery, MyInboxActivitiesQueryVariables>(MyInboxActivitiesDocument, baseOptions);\n      }\nexport function useMyInboxActivitiesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<MyInboxActivitiesQuery, MyInboxActivitiesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<MyInboxActivitiesQuery, MyInboxActivitiesQueryVariables>(MyInboxActivitiesDocument, baseOptions);\n        }\nexport type MyInboxActivitiesQueryHookResult = ReturnType<typeof useMyInboxActivitiesQuery>;\nexport type MyInboxActivitiesLazyQueryHookResult = ReturnType<typeof useMyInboxActivitiesLazyQuery>;\nexport type MyInboxActivitiesQueryResult = ApolloReactCommon.QueryResult<MyInboxActivitiesQuery, MyInboxActivitiesQueryVariables>;\n\n\nexport interface MyInboxActivitiesQueryOperation {\n  operationName: 'myInboxActivities'\n  result: MyInboxActivitiesQuery\n  variables: MyInboxActivitiesQueryVariables\n  type: 'query'\n}\nexport const MyInboxActivitiesQueryName:MyInboxActivitiesQueryOperation['operationName'] = 'myInboxActivities'\n\nexport const MyInboxActivitiesQueryRefetch = (\n  variables:MyInboxActivitiesQueryVariables, \n  context?:any\n)=>({\n  query:MyInboxActivitiesDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommentPreviewFragment } from '../../../HOC/modules/previews/comment/CommentPreview.generated';\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport { CommentPreviewFragmentDoc } from '../../../HOC/modules/previews/comment/CommentPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type ThreadCommentsQueryVariables = {\n  threadId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type ThreadCommentsQuery = (\n  { __typename: 'RootQueryType' }\n  & { thread: Types.Maybe<(\n    { __typename: 'Thread' }\n    & { comments: Types.Maybe<(\n      { __typename: 'CommentsPage' }\n      & Pick<Types.CommentsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Comment' }\n        & CommentPreviewFragment\n      )> }\n    )> }\n  )> }\n);\n\n\nexport const ThreadCommentsDocument = gql`\n    query threadComments($threadId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  thread(threadId: $threadId) @connection(key: \"threadComments\", filter: [\"threadId\"]) {\n    comments(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommentPreview\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${CommentPreviewFragmentDoc}`;\n\n/**\n * __useThreadCommentsQuery__\n *\n * To run a query within a React component, call `useThreadCommentsQuery` and pass it any options that fit your needs.\n * When your component renders, `useThreadCommentsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useThreadCommentsQuery({\n *   variables: {\n *      threadId: // value for 'threadId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useThreadCommentsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<ThreadCommentsQuery, ThreadCommentsQueryVariables>) {\n        return ApolloReactHooks.useQuery<ThreadCommentsQuery, ThreadCommentsQueryVariables>(ThreadCommentsDocument, baseOptions);\n      }\nexport function useThreadCommentsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<ThreadCommentsQuery, ThreadCommentsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<ThreadCommentsQuery, ThreadCommentsQueryVariables>(ThreadCommentsDocument, baseOptions);\n        }\nexport type ThreadCommentsQueryHookResult = ReturnType<typeof useThreadCommentsQuery>;\nexport type ThreadCommentsLazyQueryHookResult = ReturnType<typeof useThreadCommentsLazyQuery>;\nexport type ThreadCommentsQueryResult = ApolloReactCommon.QueryResult<ThreadCommentsQuery, ThreadCommentsQueryVariables>;\n\n\nexport interface ThreadCommentsQueryOperation {\n  operationName: 'threadComments'\n  result: ThreadCommentsQuery\n  variables: ThreadCommentsQueryVariables\n  type: 'query'\n}\nexport const ThreadCommentsQueryName:ThreadCommentsQueryOperation['operationName'] = 'threadComments'\n\nexport const ThreadCommentsQueryRefetch = (\n  variables:ThreadCommentsQueryVariables, \n  context?:any\n)=>({\n  query:ThreadCommentsDocument,\n  variables,\n  context\n})\n      \n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommentPreviewFragment } from '../../../HOC/modules/previews/comment/CommentPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommentPreviewFragmentDoc } from '../../../HOC/modules/previews/comment/CommentPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type ReplyMutationVariables = {\n  comment: Types.CommentInput,\n  inReplyToCommentId: Types.Scalars['String'],\n  threadId: Types.Scalars['String']\n};\n\n\nexport type ReplyMutation = (\n  { __typename: 'RootMutationType' }\n  & { createReply: Types.Maybe<(\n    { __typename: 'Comment' }\n    & CommentPreviewFragment\n  )> }\n);\n\n\nexport const ReplyDocument = gql`\n    mutation reply($comment: CommentInput!, $inReplyToCommentId: String!, $threadId: String!) {\n  createReply(comment: $comment, inReplyToId: $inReplyToCommentId, threadId: $threadId) {\n    ...CommentPreview\n  }\n}\n    ${CommentPreviewFragmentDoc}`;\nexport type ReplyMutationFn = ApolloReactCommon.MutationFunction<ReplyMutation, ReplyMutationVariables>;\n\n/**\n * __useReplyMutation__\n *\n * To run a mutation, you first call `useReplyMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useReplyMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [replyMutation, { data, loading, error }] = useReplyMutation({\n *   variables: {\n *      comment: // value for 'comment'\n *      inReplyToCommentId: // value for 'inReplyToCommentId'\n *      threadId: // value for 'threadId'\n *   },\n * });\n */\nexport function useReplyMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<ReplyMutation, ReplyMutationVariables>) {\n        return ApolloReactHooks.useMutation<ReplyMutation, ReplyMutationVariables>(ReplyDocument, baseOptions);\n      }\nexport type ReplyMutationHookResult = ReturnType<typeof useReplyMutation>;\nexport type ReplyMutationResult = ApolloReactCommon.MutationResult<ReplyMutation>;\nexport type ReplyMutationOptions = ApolloReactCommon.BaseMutationOptions<ReplyMutation, ReplyMutationVariables>;\n\n\nexport interface ReplyMutationOperation {\n  operationName: 'reply'\n  result: ReplyMutation\n  variables: ReplyMutationVariables\n  type: 'mutation'\n}\nexport const ReplyMutationName:ReplyMutationOperation['operationName'] = 'reply'\n\nexport const ReplyMutationRefetch = (\n  variables:ReplyMutationVariables, \n  context?:any\n)=>({\n  query:ReplyDocument,\n  variables,\n  context\n})\n      \n","import { MyInboxActivitiesQueryRefetch } from 'fe/activities/inbox/my/useMyInboxActivities.generated';\nimport { CommunityOutboxActivitiesQueryRefetch } from 'fe/activities/outbox/community/useCommunityOutboxActivities.generated';\nimport { InstanceOutboxActivitiesQueryRefetch } from 'fe/activities/outbox/instance/useInstanceOutboxActivities.generated';\nimport { mnCtx } from 'fe/lib/graphql/ctx';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { Comment, Community, Thread } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\nimport {\n  ThreadCommentsDocument,\n  ThreadCommentsQuery,\n  ThreadCommentsQueryVariables\n} from '../thread/useThreadComments.generated';\nimport * as GQL from './useReplyComment.generated';\nexport const useReplyComment = (\n  comment: Maybe<{\n    id: Comment['id'];\n    thread: Maybe<{ id: Thread['id'] }>;\n  }>,\n  communityId: Maybe<Community['id']>,\n  to: Maybe<string>\n) => {\n  const [createReplyMut, status] = GQL.useReplyMutation();\n\n  const mutating = status.loading;\n\n  const reply = useCallOrNotifyMustLogin(\n    async (content: string) => {\n      if (mutating || !comment || !comment.thread) {\n        return;\n      }\n      const threadId = comment.thread.id;\n      return createReplyMut({\n        variables: {\n          threadId,\n          inReplyToCommentId: comment.id,\n          comment: { content }\n        },\n        context: mnCtx<GQL.ReplyMutation>({\n          successMsg: () => `Sent reply ${to ? `@${to} ` : ''} correctly`\n        }),\n        refetchQueries: [\n          InstanceOutboxActivitiesQueryRefetch({ limit: DEFAULT_PAGE_SIZE }),\n          MyInboxActivitiesQueryRefetch({ limit: DEFAULT_PAGE_SIZE }),\n          ...(communityId\n            ? [\n                CommunityOutboxActivitiesQueryRefetch({\n                  communityId,\n                  limit: DEFAULT_PAGE_SIZE\n                })\n              ]\n            : [])\n        ],\n        update: (proxy, result) => {\n          const comment = result.data?.createReply;\n          if (!comment) {\n            return;\n          }\n          try {\n            const threadCommentsQueryRes = proxy.readQuery<\n              ThreadCommentsQuery,\n              ThreadCommentsQueryVariables\n            >({\n              query: ThreadCommentsDocument,\n              variables: { threadId, limit: DEFAULT_PAGE_SIZE }\n            });\n            if (\n              !threadCommentsQueryRes?.thread?.comments ||\n              threadCommentsQueryRes.thread.comments.pageInfo.hasNextPage\n            ) {\n              return;\n            }\n            const edges = [...threadCommentsQueryRes.thread.comments.edges, comment];\n\n            const data: ThreadCommentsQuery = {\n              ...threadCommentsQueryRes,\n              thread: {\n                ...threadCommentsQueryRes.thread,\n                comments: {\n                  ...threadCommentsQueryRes.thread.comments,\n                  edges\n                }\n              }\n            };\n            proxy.writeQuery<ThreadCommentsQuery, ThreadCommentsQueryVariables>({\n              data,\n              query: ThreadCommentsDocument,\n              variables: { threadId, limit: DEFAULT_PAGE_SIZE }\n            });\n          } catch (err) {\n            console.warn(err);\n          }\n        }\n      });\n    },\n    [mutating, communityId, to]\n  );\n\n  return useMemo(\n    () => ({\n      reply\n    }),\n    [reply]\n  );\n};\n","import { Comment } from 'graphql/types.generated';\nimport { useCommentPreviewQuery } from './useCommentPreview.generated';\nimport { useMemo } from 'react';\nimport { useLikeContext } from 'fe/context/like/useLikeContext';\nimport { useReplyComment } from '../reply/useReplyComment';\n\nexport const useCommentPreview = (commentId: Comment['id']) => {\n  const commentPreviewQ = useCommentPreviewQuery({ variables: { commentId } });\n  const { toggleLike } = useLikeContext(\n    commentPreviewQ.data?.comment?.id,\n    commentPreviewQ.data?.comment?.myLike,\n    commentPreviewQ.data?.comment?.likerCount,\n    'Comment'\n  );\n  const threadContext = commentPreviewQ.data?.comment?.thread?.context;\n  const community =\n    threadContext?.__typename === 'Resource'\n      ? threadContext.collection?.community\n      : threadContext?.__typename === 'Collection'\n      ? threadContext.community\n      : threadContext?.__typename === 'Community'\n      ? threadContext\n      : undefined;\n  const canReply = !!community?.myFollow;\n  const { reply } = useReplyComment(\n    commentPreviewQ.data?.comment,\n    community?.id,\n    commentPreviewQ.data?.comment?.creator?.userName\n  );\n  return useMemo(() => {\n    return {\n      comment: commentPreviewQ.data?.comment,\n      community,\n      toggleLike,\n      reply,\n      canReply\n    };\n  }, [commentPreviewQ, community, toggleLike, reply, canReply]);\n};\n","import { Trans } from '@lingui/macro';\nimport { typography } from 'mn-constants';\nimport { darken } from 'polished';\nimport React from 'react';\nimport { CornerDownLeft, Flag, MoreHorizontal, Star } from 'react-feather';\nimport { NavLink } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport { MDComment } from 'ui/elements/Layout/comment';\nimport { Dropdown, DropdownItem } from 'ui/modules/Dropdown';\nimport styled from 'ui/themes/styled';\n\nexport interface LikeActions {\n  toggleLikeFormik: FormikHook<{}>;\n  totalLikes: number;\n  iLikeIt: boolean;\n}\nexport interface ReplyActions {\n  replyFormik: FormikHook<{ replyMessage: string }>;\n}\nexport interface CommentProps {\n  flag(): unknown;\n  like: LikeActions;\n  content: string;\n  url: string;\n  isFlagged: boolean;\n  hideActions?: boolean;\n  isDropdownOpen: boolean;\n  toggleDropdown(): unknown;\n}\n\nexport const Comment: React.SFC<CommentProps> = ({\n  content,\n  like,\n  url,\n  isFlagged,\n  hideActions,\n  isDropdownOpen,\n  toggleDropdown,\n  flag\n}) => {\n  return (\n    <Wrapper>\n      {/* <Link to={url}> */}\n      <MDComment content={content} />\n      {/* <Summary\n        dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(content) }}\n        sx={{ textDecoration: 'none' }}\n        variant=\"text\"\n        mb={2}\n      /> */}\n      {/* </Link> */}\n      {hideActions ? (\n        <Actions mt={2}>\n          <Box>\n            <Items>\n              <ActionItem\n                liked={like.iLikeIt ? true : false}\n                onClick={like.toggleLikeFormik.submitForm}\n              >\n                <ActionIcon>\n                  <Star strokeWidth=\"1\" size=\"18\" />\n                </ActionIcon>\n                <ActionText variant={'text'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                  {like.totalLikes + ' '} <Trans>Star</Trans>\n                </ActionText>\n              </ActionItem>\n              <ActionItem onClick={toggleDropdown} sx={{ position: 'relative' }}>\n                <ActionIcon>\n                  <MoreHorizontal className=\"hover\" size={18} />\n                </ActionIcon>\n                <ActionText variant={'text'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                  <Trans>More</Trans>\n                </ActionText>\n                {isDropdownOpen && (\n                  <Dropdown orientation=\"bottom\" close={toggleDropdown}>\n                    <DropdownItem onClick={flag}>\n                      <Flag size={20} color={'rgb(101, 119, 134)'} />\n                      <Text sx={{ flex: 1 }} ml={2}>\n                        {!isFlagged ? (\n                          <Trans>Flag this comment</Trans>\n                        ) : (\n                          <Trans>Unflag this comment</Trans>\n                        )}\n                      </Text>\n                    </DropdownItem>\n                  </Dropdown>\n                )}\n              </ActionItem>\n            </Items>\n          </Box>\n        </Actions>\n      ) : (\n        <Actions mt={2}>\n          {/* {talkModalVisible && (\n            <Box mb={2}>\n            <SocialText\n            placeholder={i18n._(tt.placeholders.name)}\n            defaultValue={''}\n            submit={msg => {\n              showTalkModal(false);\n              reply.replyFormik.setValues({ replyMessage: msg });\n              reply.replyFormik.submitForm();\n            }}\n            />\n            </Box>\n          )} */}\n          <Box>\n            <Items>\n              <ActionItem>\n                <NavLink to={url}>\n                  <ActionIcon>\n                    <CornerDownLeft\n                      className=\"hover\"\n                      strokeWidth=\"1\"\n                      color=\"rgba(0,0,0,.4)\"\n                      size=\"18\"\n                    />\n                  </ActionIcon>\n                  <ActionText ml={1} variant={'text'} sx={{ textTransform: 'capitalize' }}>\n                    <Trans>Reply</Trans>\n                  </ActionText>\n                </NavLink>\n              </ActionItem>\n              <ActionItem\n                liked={like.iLikeIt ? true : false}\n                onClick={like.toggleLikeFormik.submitForm}\n              >\n                <ActionIcon>\n                  <Star strokeWidth=\"1\" size=\"18\" />\n                </ActionIcon>\n                <ActionText variant={'text'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                  {like.totalLikes + ' '} <Trans>Star</Trans>\n                </ActionText>\n              </ActionItem>\n              <ActionItem onClick={toggleDropdown} sx={{ position: 'relative' }}>\n                <ActionIcon>\n                  <MoreHorizontal className=\"hover\" size={18} />\n                </ActionIcon>\n                <ActionText variant={'text'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                  <Trans>More</Trans>\n                </ActionText>\n                {isDropdownOpen && (\n                  <Dropdown orientation=\"bottom\" close={toggleDropdown}>\n                    <DropdownItem onClick={flag}>\n                      <Flag size={20} color={'rgb(101, 119, 134)'} />\n                      <Text sx={{ flex: 1 }} ml={2}>\n                        {!isFlagged ? (\n                          <Trans>Flag this comment</Trans>\n                        ) : (\n                          <Trans>Unflag this comment</Trans>\n                        )}\n                      </Text>\n                    </DropdownItem>\n                  </Dropdown>\n                )}\n              </ActionItem>\n            </Items>\n          </Box>\n        </Actions>\n      )}\n      {/* <Forked>\n        <b>SoapDog</b> forked this discussion: Yeah, they've wrote a lot of\n        stuff... (3)\n      </Forked> */}\n    </Wrapper>\n  );\n};\n\n// const Forked = styled(Box)`\n//   padding: 8px;\n//   border-top: ${props => props.theme.colors.border};\n//   border-bottom: ${props => props.theme.colors.border};\n//   margin-top: 16px;\n//   font-size: ${typography.size.s1};\n//   margin-left: -16px;\n//   margin-right: -16px;\n//   margin-bottom: -16px;\n//   color: ${props => props.theme.colors.mediumdark};\n// `;\n\n// const Summary = styled(Text)`\n//   color: ${props => props.theme.colors.dark};\n//   img {\n//     width: 100%;\n//   }\n// `;\n\nconst Items = styled(Flex)`\n  flex: 1;\n  justify-content: start;\n`;\n\nconst Actions = styled(Box)`\n  // border-top: ${props => props.theme.colors.border};\n  margin-top: 16px;\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n  margin-top: 16px;\n`;\n\nconst ActionItem = styled(Flex)<{ liked?: boolean }>`\n  align-items: center;\n  color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  div {\n    color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  &:hover {\n    background: ${props =>\n      props.liked\n        ? darken('0.1', props.theme.colors.secondary)\n        : darken('0.05', props.theme.colors.mediumlight)};\n  }\n  cursor: pointer;\n  background: ${props =>\n    props.liked ? props.theme.colors.secondary : props.theme.colors.mediumlight};\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ${typography.size.s1};\n  svg {\n    stroke: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ${props => props.theme.colors.mediumdark};\n      // fill: ${props => props.theme.colors.mediumdark};\n    }\n  }\n`;\n\nconst ActionIcon = styled(Box)`\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n`;\n\nconst ActionText = styled(Text)`\n  font-size: ${typography.size.s1};\n`;\n\nconst Wrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  a {\n    text-decoration: none\n    &:hover {\n      text-decoration: none;\n    }\n  }\n`;\n","import { Trans } from '@lingui/macro';\nimport DOMPurify from 'dompurify';\nimport { typography } from 'mn-constants';\nimport { darken } from 'polished';\nimport React from 'react';\nimport { Flag, MoreHorizontal, Star } from 'react-feather';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport { Dropdown, DropdownItem } from 'ui/modules/Dropdown';\nimport styled from 'ui/themes/styled';\n\nexport interface LikeActions {\n  toggleLikeFormik: FormikHook<{}>;\n  totalLikes: number;\n  iLikeIt: boolean;\n}\n\nexport interface CommentProps {\n  flag(): unknown;\n  like: LikeActions;\n  content: string;\n  isFlagged?: boolean;\n  hideActions?: boolean;\n  isDropdownOpen: boolean;\n  toggleDropdown(): unknown;\n}\n\nexport const MainComment: React.SFC<CommentProps> = ({\n  isDropdownOpen,\n  toggleDropdown,\n  flag,\n  content,\n  like,\n  isFlagged,\n  hideActions\n}) => {\n  return (\n    <Box>\n      <Wrapper>\n        <Summary\n          dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(content) }}\n          sx={{ fontSize: '24px' }}\n          variant=\"text\"\n          mb={2}\n        />\n        <Actions mt={2}>\n          {hideActions ? null : (\n            <Box>\n              <Items>\n                <ActionItem\n                  liked={like.iLikeIt ? true : false}\n                  onClick={like.toggleLikeFormik.submitForm}\n                >\n                  <ActionIcon>\n                    <Star strokeWidth=\"1\" size=\"18\" />\n                  </ActionIcon>\n                  <ActionText variant={'text'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                    {like.totalLikes + ' '} <Trans>Star</Trans>\n                  </ActionText>\n                </ActionItem>\n                <ActionItem onClick={toggleDropdown} sx={{ position: 'relative' }}>\n                  <ActionIcon>\n                    <MoreHorizontal className=\"hover\" size={18} />\n                  </ActionIcon>\n                  <ActionText variant={'text'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                    <Trans>More</Trans>\n                  </ActionText>\n                  {isDropdownOpen && (\n                    <Dropdown orientation=\"bottom\" close={toggleDropdown}>\n                      <DropdownItem onClick={flag}>\n                        <Flag size={20} color={'rgb(101, 119, 134)'} />\n                        <Text sx={{ flex: 1 }} ml={2}>\n                          {!isFlagged ? (\n                            <Trans>Flag this comment</Trans>\n                          ) : (\n                            <Trans>Unflag this comment</Trans>\n                          )}\n                        </Text>\n                      </DropdownItem>\n                    </Dropdown>\n                  )}\n                </ActionItem>\n              </Items>\n            </Box>\n          )}\n        </Actions>\n      </Wrapper>\n      {/* {reply && (\n        <SocialWrapper my={2}>\n          <SocialText\n            placeholder={i18n._(tt.placeholders.name)}\n            defaultValue={''}\n            submit={msg => {\n              reply.replyFormik.setValues({ replyMessage: msg });\n              reply.replyFormik.submitForm();\n            }}\n          />\n        </SocialWrapper>\n      )} */}\n    </Box>\n  );\n};\n\n// const SocialWrapper = styled(Box)`\n//   background: ${props => props.theme.colors.appInverse};\n// `;\n\nconst ActionText = styled(Text)`\n  font-size: ${typography.size.s1};\n`;\n\nconst Summary = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n  img {\n    width: 100%;\n  }\n`;\n\nconst Items = styled(Flex)`\n  flex: 1;\n  justify-content: start;\n`;\n\nconst Actions = styled(Box)`\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n`;\n\nconst ActionItem = styled(Flex)<{ liked?: boolean }>`\n  align-items: center;\n  color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  div {\n    color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  &:hover {\n    background: ${props =>\n      props.liked\n        ? darken('0.1', props.theme.colors.secondary)\n        : darken('0.05', props.theme.colors.mediumlight)};\n  }\n  cursor: pointer;\n  background: ${props =>\n    props.liked ? props.theme.colors.secondary : props.theme.colors.mediumlight};\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ${typography.size.s1};\n  svg {\n    stroke: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ${props => props.theme.colors.mediumdark};\n      // fill: ${props => props.theme.colors.mediumdark};\n    }\n  }\n`;\nconst ActionIcon = styled(Box)`\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n`;\n\nconst Wrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n`;\n","import { useCommentPreview } from 'fe/comment/preview/useCommentPreview';\nimport { Comment } from 'graphql/types.generated';\nimport React, { FC, useMemo, useReducer } from 'react';\nimport { Comment as CommentPreviewUI, CommentProps } from 'ui/modules/Previews/Comment';\nimport { FlagModalHOC } from 'HOC/modules/FlagModal/flagModalHOC';\nimport { useFormik } from 'formik';\nimport { MainComment } from 'ui/modules/Previews/MainComment';\nimport Modal from 'ui/modules/Modal';\nimport { useNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\n\nexport interface CommentPreviewHOC {\n  commentId: Comment['id'];\n  mainComment: boolean;\n  hideActions?: boolean;\n}\n\nexport const CommentPreviewHOC: FC<CommentPreviewHOC> = ({\n  commentId,\n  mainComment,\n  hideActions\n}) => {\n  const { comment, toggleLike /* reply, canReply */ } = useCommentPreview(commentId);\n  const toggleLikeFormik = useFormik({\n    initialValues: {},\n    onSubmit: toggleLike\n  });\n\n  // const replyFormik = useFormik<{ replyMessage: string }>({\n  //   initialValues: { replyMessage: '' },\n  //   onSubmit: ({ replyMessage }) => reply(replyMessage)\n  // });\n\n  const [isDropdownOpen, toggleDropdown] = useReducer(is => !is, false);\n\n  const notifyUnlogged = useNotifyMustLogin();\n\n  const [isFlagging, toggleFlagging] = useReducer(is => (notifyUnlogged() ? false : !is), false);\n\n  const FlagModal =\n    isFlagging && comment ? (\n      <Modal closeModal={toggleFlagging}>\n        <FlagModalHOC done={toggleFlagging} ctx={comment} />\n      </Modal>\n    ) : null;\n\n  const commentPreviewProps = useMemo<CommentProps | null>(() => {\n    if (!comment) {\n      return null;\n    }\n    const props: CommentProps = {\n      url: comment.thread ? `/thread/${comment.thread.id}` : '',\n      content: comment.content,\n      // reply: canReply\n      //   ? {\n      //       replyFormik\n      //     }\n      //   : null,\n      like: {\n        iLikeIt: !!comment.myLike,\n        totalLikes: comment.likerCount || 0,\n        toggleLikeFormik\n      },\n      isFlagged: !!comment.myFlag,\n      hideActions: !!hideActions,\n      isDropdownOpen,\n      toggleDropdown,\n      flag: toggleFlagging\n    };\n    return props;\n  }, [comment, hideActions, isDropdownOpen, toggleLikeFormik]);\n\n  return (\n    commentPreviewProps && (\n      <>\n        {FlagModal}\n        {mainComment ? (\n          <MainComment {...commentPreviewProps} />\n        ) : (\n          <CommentPreviewUI {...commentPreviewProps} />\n        )}\n      </>\n    )\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { ThreadPreviewFragment } from '../../../HOC/modules/previews/thread/ThreadPreview.generated';\nimport gql from 'graphql-tag';\nimport { ThreadPreviewFragmentDoc } from '../../../HOC/modules/previews/thread/ThreadPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type ThreadPreviewQueryVariables = {\n  threadId: Types.Scalars['String']\n};\n\n\nexport type ThreadPreviewQuery = (\n  { __typename: 'RootQueryType' }\n  & { thread: Types.Maybe<(\n    { __typename: 'Thread' }\n    & Pick<Types.Thread, 'id'>\n    & ThreadPreviewFragment\n  )> }\n);\n\n\nexport const ThreadPreviewDocument = gql`\n    query threadPreview($threadId: String!) {\n  thread(threadId: $threadId) {\n    id\n    ...ThreadPreview\n  }\n}\n    ${ThreadPreviewFragmentDoc}`;\n\n/**\n * __useThreadPreviewQuery__\n *\n * To run a query within a React component, call `useThreadPreviewQuery` and pass it any options that fit your needs.\n * When your component renders, `useThreadPreviewQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useThreadPreviewQuery({\n *   variables: {\n *      threadId: // value for 'threadId'\n *   },\n * });\n */\nexport function useThreadPreviewQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<ThreadPreviewQuery, ThreadPreviewQueryVariables>) {\n        return ApolloReactHooks.useQuery<ThreadPreviewQuery, ThreadPreviewQueryVariables>(ThreadPreviewDocument, baseOptions);\n      }\nexport function useThreadPreviewLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<ThreadPreviewQuery, ThreadPreviewQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<ThreadPreviewQuery, ThreadPreviewQueryVariables>(ThreadPreviewDocument, baseOptions);\n        }\nexport type ThreadPreviewQueryHookResult = ReturnType<typeof useThreadPreviewQuery>;\nexport type ThreadPreviewLazyQueryHookResult = ReturnType<typeof useThreadPreviewLazyQuery>;\nexport type ThreadPreviewQueryResult = ApolloReactCommon.QueryResult<ThreadPreviewQuery, ThreadPreviewQueryVariables>;\n\n\nexport interface ThreadPreviewQueryOperation {\n  operationName: 'threadPreview'\n  result: ThreadPreviewQuery\n  variables: ThreadPreviewQueryVariables\n  type: 'query'\n}\nexport const ThreadPreviewQueryName:ThreadPreviewQueryOperation['operationName'] = 'threadPreview'\n\nexport const ThreadPreviewQueryRefetch = (\n  variables:ThreadPreviewQueryVariables, \n  context?:any\n)=>({\n  query:ThreadPreviewDocument,\n  variables,\n  context\n})\n      \n","import { Trans } from '@lingui/macro';\nimport { DateTime } from 'luxon';\nimport { clearFix } from 'polished';\nimport React, { FC, ReactElement } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport Avatar from 'ui/elements/Avatar';\nimport styled from 'ui/themes/styled';\nimport { Actor } from './types';\nimport { typography } from 'mn-constants';\n\nexport enum Status {\n  Loading,\n  Loaded\n}\nexport interface ActivityLoaded extends Activity {\n  status: Status.Loaded; // FIX ME after fix flags story in settings page\n}\nexport interface ActivityLoading {\n  status: Status.Loading; // FIX ME after fix flags story in settings page\n}\n\nexport interface Activity {\n  createdAt: string;\n  actor: Actor | null;\n  commentActor?: Actor;\n  event: string;\n  threadUrl?: string;\n  preview: ReactElement;\n  communityLink: string;\n  communityName: string;\n}\n\nexport type Props = ActivityLoaded | ActivityLoading;\n\nexport const ActivityPreview: FC<Props> = activity => {\n  if (activity.status === Status.Loading) {\n    return <Trans>loading...</Trans>;\n  }\n  return (\n    <FeedItem mb={2}>\n      {activity.event.toLowerCase().includes('like') ||\n      activity.event.toLowerCase().includes('flag')\n        ? activity.actor && <SmallActorComp actor={activity.actor} event={activity.event} />\n        : activity.event.toLowerCase().includes('commented')\n        ? activity.actor && (\n            <SmallActorComp\n              actor={activity.actor}\n              commentActor={activity.commentActor}\n              event={activity.event}\n              threadUrl={activity.threadUrl}\n            />\n          )\n        : activity.event.toLowerCase().includes('discussion') ||\n          activity.event.toLowerCase().includes('comment')\n        ? activity.actor && (\n            <ActorComp\n              actor={activity.actor}\n              createdAt={activity.createdAt}\n              threadUrl={activity.threadUrl}\n              event={activity.event}\n              communityLink={activity.communityLink}\n              communityName={activity.communityName}\n            />\n          )\n        : activity.actor && (\n            <ActorComp\n              actor={activity.actor}\n              createdAt={activity.createdAt}\n              event={activity.event}\n              communityLink={activity.communityLink}\n              communityName={activity.communityName}\n            />\n          )}\n\n      <Contents mt={2}>\n        <Wrapper>{activity.preview}</Wrapper>\n      </Contents>\n    </FeedItem>\n  );\n};\n\nexport interface ActorProps {\n  actor?: Actor;\n  createdAt: string;\n  event: string;\n  threadUrl?: string;\n  communityName: string;\n  communityLink: string;\n}\nexport const ActorComp: FC<ActorProps> = ({\n  actor,\n  createdAt,\n  event,\n  threadUrl,\n  communityName,\n  communityLink\n}) => {\n  return (\n    <Member>\n      {actor && (\n        <>\n          <Avatar initials={actor.name} src={actor.icon} variant=\"avatar\" />\n          <MemberInfo ml={2}>\n            <Flex mt={1} alignItems=\"center\">\n              <Flex flex={1}>\n                <Name>\n                  <Link to={actor.link}>{actor.name}</Link>\n                </Name>\n                <TextEvent sx={{ textTransform: 'lowercase' }} variant=\"text\" ml={1}>\n                  {threadUrl ? <Link to={threadUrl}>{event}</Link> : event}\n                </TextEvent>\n              </Flex>\n            </Flex>\n            <Flex sx={{ marginTop: '2px' }} alignItems=\"center\">\n              <Date>{DateTime.fromSQL(createdAt).toRelative()}</Date>\n              <Spacer mx={1}>·</Spacer>\n              <CommunityName to={communityLink}>{communityName}</CommunityName>\n            </Flex>\n          </MemberInfo>\n        </>\n      )}\n    </Member>\n  );\n};\n\nexport interface SmallActorProps {\n  actor: Actor;\n  commentActor?: Actor;\n  event: string;\n  threadUrl?: string;\n}\n\nexport const SmallActorComp: FC<SmallActorProps> = ({ actor, commentActor, event, threadUrl }) => {\n  return (\n    <Member sx={{ alignItems: 'center !important' }}>\n      <Avatar\n        size=\"s\"\n        initials={commentActor ? commentActor.name : actor.name}\n        src={commentActor ? commentActor.icon : actor.icon}\n        variant=\"avatar\"\n      />\n      <MemberInfo sx={{ marginTop: 0 }} ml={2}>\n        <Flex alignItems=\"center\">\n          <Flex flex={1}>\n            <Name>\n              <Link to={commentActor ? commentActor.link : actor.link}>\n                {commentActor ? commentActor.name : actor.name}\n              </Link>\n            </Name>\n            <TextEvent sx={{ textTransform: 'lowercase' }} variant=\"text\" ml={1}>\n              {threadUrl ? <Link to={threadUrl}>{event}</Link> : event}\n            </TextEvent>\n          </Flex>\n        </Flex>\n      </MemberInfo>\n    </Member>\n  );\n};\n\nconst CommunityName = styled(Link)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  font-size: ${typography.size.s1};\n`;\n\nconst TextEvent = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n  a {\n    font-weight: 600;\n    color: ${props => props.theme.colors.darker};\n  }\n`;\n\nconst Contents = styled(Box)``;\n\nconst Spacer = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n`;\n\nconst Date = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  font-size: ${typography.size.s1};\n`;\n\nconst Name = styled(Text)`\n  font-weight: 600;\n  color: ${props => props.theme.colors.primary};\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  flex-direction: row;\n  a {\n    font-weight: 800;\n    display: flex;\n    text-decoration: none;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n    color: ${props => props.theme.colors.primary} !important;\n  }\n`;\n\nconst Member = styled(Flex)`\n  align-items: stretch;\n`;\n\nconst MemberInfo = styled(Box)`\n  width: 100%;\n  margin-top: -4px;\n`;\n\nconst Wrapper = styled(Box)``;\nconst FeedItem = styled(Box)`\n  position: relative;\n  padding: 16px;\n  word-wrap: break-word;\n  font-size: 14px;\n  ${clearFix()};\n  transition: background 0.5s ease;\n  margin-top: 0\n  z-index: 10;\n  position: relative;\n  border-radius: 4px;\n  background: ${props => props.theme.colors.appInverse};\n  margin-bottom: 8px;\n  a {\n    text-decoration: none;\n    &:hover {\n      text-decoration: underline\n    }\n  }\n\n`;\n","import { Thread } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport { useThreadPreviewQuery } from './useThreadPreview.generated';\nimport { useReplyComment } from 'fe/comment/reply/useReplyComment';\n\nexport const useThreadPreview = (threadId: Thread['id']) => {\n  const threadPreviewQ = useThreadPreviewQuery({ variables: { threadId } });\n  const thread = threadPreviewQ.data?.thread;\n\n  const community =\n    thread?.context?.__typename === 'Resource'\n      ? thread?.context.collection?.community\n      : thread?.context?.__typename === 'Collection'\n      ? thread?.context.community\n      : thread?.context?.__typename === 'Community'\n      ? thread?.context\n      : undefined;\n  const canReply = !!community?.myFollow;\n  const { reply } = useReplyComment(\n    thread?.comments?.edges[0],\n    community?.id,\n    thread?.comments?.edges[0]?.creator?.userName\n  );\n\n  return useMemo(() => {\n    const mainComment = thread?.comments?.edges[0];\n    const commentCount = thread?.comments?.totalCount;\n    const context = thread?.context;\n    const lastActivity = thread?.lastActivity;\n    return {\n      mainComment,\n      context,\n      reply,\n      canReply,\n      lastActivity,\n      totalReplies: commentCount && commentCount - 1,\n      totalComments: thread?.comments ? thread.comments.totalCount - 1 : 0\n    };\n  }, [canReply, reply, thread]);\n};\n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { Thread } from 'graphql/types.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\nimport { useThreadCommentsQuery } from './useThreadComments.generated';\nexport const useThreadComments = (threadId: Thread['id']) => {\n  const threadPreviewQ = useThreadCommentsQuery({\n    variables: { threadId, limit: DEFAULT_PAGE_SIZE }\n  });\n  const commentPage = usePage(\n    threadPreviewQ.data?.thread?.comments,\n    ({ cursor, update }) => {\n      return threadPreviewQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, threadId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.thread?.comments && prev.thread?.comments\n            ? {\n                ...fetchMoreResult,\n                thread: {\n                  ...fetchMoreResult.thread,\n                  comments: update({\n                    prev: prev.thread.comments,\n                    fetched: fetchMoreResult.thread.comments\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(() => {\n    return {\n      commentPage\n    };\n  }, [commentPage]);\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { CommunityPreviewFragment } from '../../../HOC/modules/previews/community/CommunityPreview.generated';\nimport gql from 'graphql-tag';\nimport { CommunityPreviewFragmentDoc } from '../../../HOC/modules/previews/community/CommunityPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type CommunityPreviewQueryVariables = {\n  communityId: Types.Scalars['String']\n};\n\n\nexport type CommunityPreviewQuery = (\n  { __typename: 'RootQueryType' }\n  & { community: Types.Maybe<(\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id'>\n    & CommunityPreviewFragment\n  )> }\n);\n\n\nexport const CommunityPreviewDocument = gql`\n    query communityPreview($communityId: String!) {\n  community(communityId: $communityId) {\n    id\n    ...CommunityPreview\n  }\n}\n    ${CommunityPreviewFragmentDoc}`;\n\n/**\n * __useCommunityPreviewQuery__\n *\n * To run a query within a React component, call `useCommunityPreviewQuery` and pass it any options that fit your needs.\n * When your component renders, `useCommunityPreviewQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useCommunityPreviewQuery({\n *   variables: {\n *      communityId: // value for 'communityId'\n *   },\n * });\n */\nexport function useCommunityPreviewQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<CommunityPreviewQuery, CommunityPreviewQueryVariables>) {\n        return ApolloReactHooks.useQuery<CommunityPreviewQuery, CommunityPreviewQueryVariables>(CommunityPreviewDocument, baseOptions);\n      }\nexport function useCommunityPreviewLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<CommunityPreviewQuery, CommunityPreviewQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<CommunityPreviewQuery, CommunityPreviewQueryVariables>(CommunityPreviewDocument, baseOptions);\n        }\nexport type CommunityPreviewQueryHookResult = ReturnType<typeof useCommunityPreviewQuery>;\nexport type CommunityPreviewLazyQueryHookResult = ReturnType<typeof useCommunityPreviewLazyQuery>;\nexport type CommunityPreviewQueryResult = ApolloReactCommon.QueryResult<CommunityPreviewQuery, CommunityPreviewQueryVariables>;\n\n\nexport interface CommunityPreviewQueryOperation {\n  operationName: 'communityPreview'\n  result: CommunityPreviewQuery\n  variables: CommunityPreviewQueryVariables\n  type: 'query'\n}\nexport const CommunityPreviewQueryName:CommunityPreviewQueryOperation['operationName'] = 'communityPreview'\n\nexport const CommunityPreviewQueryRefetch = (\n  variables:CommunityPreviewQueryVariables, \n  context?:any\n)=>({\n  query:CommunityPreviewDocument,\n  variables,\n  context\n})\n      \n","import { Community } from 'graphql/types.generated';\nimport { useCommunityPreviewQuery } from './useCommunityPreview.generated';\nimport { useMemo } from 'react';\nimport { useFollowContext } from 'fe/context/follow/useFollowContext';\nimport { useMe } from 'fe/session/useMe';\n\nexport const useCommunityPreview = (communityId: Community['id']) => {\n  const communityPreviewQ = useCommunityPreviewQuery({\n    variables: { communityId }\n  });\n  const { me } = useMe();\n  const community = communityPreviewQ.data?.community;\n  const { toggleFollow } = useFollowContext(communityPreviewQ.data?.community);\n  const isCreator =\n    !!me && !!community?.creator && me.user.id === community.creator.id;\n\n  return useMemo(() => {\n    return {\n      community: communityPreviewQ.data?.community,\n      toggleJoin: toggleFollow,\n      isCreator\n    };\n  }, [communityPreviewQ, toggleFollow, isCreator]);\n};\n","import { Trans } from '@lingui/macro';\nimport React from 'react';\nimport { Box, Flex, Text, Heading } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport Avatar from 'ui/elements/Avatar';\nimport styled from 'ui/themes/styled';\nimport { SimpleLink } from 'ui/helpers/SimpleLink';\nimport { Users, Folder } from 'react-feather';\nimport Button from 'ui/elements/Button';\nimport { darken } from 'polished';\nimport { Search } from './Collection';\n\nexport interface Props {\n  name: string;\n  icon: string;\n  summary: string;\n  followersCount: number;\n  collectionsCount: number;\n  threadsCount: number;\n  toggleJoinFormik: FormikHook<{}>;\n  joined: boolean;\n  link: SimpleLink;\n  displayUsername: string;\n  hideActions: boolean;\n  isCreator: boolean;\n  isSearch?: boolean;\n  // followers: string[]\n}\n\nexport const Community: React.FC<Props> = ({\n  name,\n  icon,\n  summary,\n  isCreator,\n  followersCount,\n  joined,\n  toggleJoinFormik,\n  collectionsCount,\n  link,\n  displayUsername,\n  hideActions,\n  isSearch\n  // followers\n}) => (\n  <Bordered>\n    {isSearch && (\n      <Search>\n        <Trans>Community</Trans>\n      </Search>\n    )}\n    <Wrapper p={2}>\n      <WrapperLink link={link}>\n        <WrapperImage>\n          <Avatar size=\"l\" src={icon} />\n        </WrapperImage>\n        <Box p={2}>\n          <Flex>\n            <Box flex={1}>\n              <Title variant=\"heading\" fontSize={3}>\n                {name.length > 60 ? name.replace(/^(.{56}[^\\s]*).*/, '$1...') : name}\n              </Title>\n              <Username>{displayUsername}</Username>\n            </Box>\n          </Flex>\n\n          {summary ? (\n            <Summary variant=\"text\" mt={2}>\n              {summary.length > 90\n                ? summary.replace(/^([\\s\\S]{86}[^\\s]*)[\\s\\S]*/, '$1...')\n                : summary}\n            </Summary>\n          ) : null}\n\n          {/* <Users>\n            {followers.map((u, i) => (<Avatar key={i} src={u}/>))}\n          </Users> */}\n        </Box>\n        <Meta px={2}>\n          <MetaWrapper mt={2} alignItems=\"center\">\n            <Users size={18} />\n            <Text ml={2} variant=\"suptitle\">\n              {followersCount || 0} <Trans>Users</Trans>\n            </Text>\n          </MetaWrapper>\n\n          <MetaWrapper mt={2} alignSelf=\"center\" alignItems=\"center\">\n            <Folder size={18} />\n            <Text ml={2} variant=\"suptitle\">\n              {collectionsCount || 0} <Trans>Collections</Trans>\n            </Text>\n          </MetaWrapper>\n          {hideActions ? null : (\n            <Actions my={3}>\n              <Button\n                variant=\"outline\"\n                isDisabled={isCreator ? true : false}\n                isSubmitting={toggleJoinFormik.isSubmitting}\n                onClick={e => {\n                  e.preventDefault();\n                  toggleJoinFormik.submitForm();\n                }}\n              >\n                <Text variant={'suptitle'}>\n                  {joined ? <Trans>Leave</Trans> : <Trans>Join</Trans>}\n                </Text>\n              </Button>\n            </Actions>\n          )}\n        </Meta>\n      </WrapperLink>\n    </Wrapper>\n  </Bordered>\n);\n\n// const Users = styled(Box)``\nconst Summary = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n`;\n\nconst Actions = styled(Box)`\n  button {\n    width: 100%;\n  }\n`;\n\nconst MetaWrapper = styled(Flex)`\n  svg {\n    margin: 0;\n  }\n`;\n\nconst WrapperLink = styled(SimpleLink)`\n  text-decoration: none;\n`;\n\nconst Username = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  flex: 1;\n`;\n\nconst Meta = styled(Box)`\n  color: ${props => props.theme.colors.mediumdark};\n  // justify-content: space-evenly;\n`;\n\nconst Bordered = styled(Box)`\n  border: ${props => props.theme.colors.border};\n  border-radius: 4px;\n`;\n\nconst Wrapper = styled(Box)`\n  position: relative;\n  max-height: 560px;\n  overflow: hidden;\n  z-index: 9;\n  // padding-bottom: 0;\n  cursor: pointer;\n  background: ${props => props.theme.colors.appInverse};\n  &:hover {\n    background: ${props => darken('0.05', props.theme.colors.appInverse)};\n  }\n    \n    text-decoration: none;\n  }\n  &&& a {\n    color: inherit;\n    text-decoration: none;\n    &&&:hover {\n      text-decoration: none;\n    }\n  }\n`;\n\nconst WrapperImage = styled.div`\n  position: relative;\n  div {\n    width: 100%;\n    heigth: 150px;\n    background-repeat: no-repeat;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n  &:hover {\n    & span {\n      display: block;\n    }\n  }\n`;\n\n// const TitleLink = styled(SimpleLink)`\n//   text-decoration: none;\n//   color: ${props => props.theme.colors.mediumdark};\n//   &:hover {\n//     text-decoration: underline;\n//   }\n// `;\n\nconst Title = styled(Heading)`\n  color: ${props => props.theme.colors.darker};\n  font-size: 20px;\n  text-decoration: none;\n  word-break: break-all;\n`;\n","import { useCommunityPreview } from 'fe/community/preview/useCommunityPreview';\nimport { Community } from 'graphql/types.generated';\nimport React, { FC, useMemo } from 'react';\nimport {\n  Community as CommunityPreviewUI,\n  Props as CommunityPreviewProps\n} from 'ui/modules/Previews/Community';\nimport { useFormik } from 'formik';\nimport { CommunityPreviewFragment } from './CommunityPreview.generated';\nimport { FormikHook } from 'ui/@types/types';\n\nexport interface Props {\n  communityId: Community['id'];\n  flagged?: boolean;\n}\n\nexport const CommunityPreviewHOC: FC<Props> = ({ communityId, flagged }) => {\n  const { community, toggleJoin, isCreator } = useCommunityPreview(communityId);\n\n  const toggleJoinFormik = useFormik({\n    initialValues: {},\n    onSubmit: toggleJoin\n  });\n  const communityPreviewProps = useMemo<CommunityPreviewProps | null>(() => {\n    if (!community) {\n      return null;\n    }\n    const hideActions = flagged ? true : false;\n    return communityFragment2UIProps({\n      community,\n      hideActions,\n      isCreator,\n      toggleJoinFormik\n    });\n  }, [community, flagged, isCreator, toggleJoinFormik]);\n\n  return communityPreviewProps && <CommunityPreviewUI {...communityPreviewProps} />;\n};\n\nexport const communityFragment2UIProps = (args: {\n  community: CommunityPreviewFragment;\n  toggleJoinFormik: FormikHook;\n  hideActions: boolean;\n  isCreator: boolean;\n}) => {\n  const { community, hideActions, toggleJoinFormik, isCreator } = args;\n  const {\n    id,\n    canonicalUrl,\n    icon,\n    name,\n    summary,\n    myFollow,\n    collectionCount,\n    followerCount,\n    threads,\n    displayUsername,\n    isLocal\n  } = community;\n\n  const props: CommunityPreviewProps = {\n    icon: icon?.url || '',\n    name,\n    isCreator,\n    summary: summary || '',\n    collectionsCount: collectionCount || 0,\n    joined: !!myFollow,\n    followersCount: followerCount || 0,\n    threadsCount: threads?.totalCount || 0,\n    toggleJoinFormik,\n    link: {\n      url: isLocal ? `/communities/${id}` : canonicalUrl || '',\n      external: !isLocal\n    },\n    displayUsername,\n    hideActions: hideActions\n  };\n  return props;\n};\n","import React from 'react';\nimport styled from 'ui/themes/styled';\nimport { Box, Text, Flex } from 'rebass/styled-components';\nimport { DateTime } from 'luxon';\nimport { Trans } from '@lingui/macro';\nimport { NavLink } from 'react-router-dom';\nimport { MessageSquare, Star } from 'react-feather';\n\nexport interface CommentProps {\n  content: string;\n  // title: string;\n  lastActivity: string;\n  totalReplies: string;\n  totalLikes: string;\n  members: string[];\n  link: string;\n}\n\nexport const Thread: React.SFC<CommentProps> = ({\n  content,\n  // title,\n  lastActivity,\n  totalReplies,\n  totalLikes,\n  members,\n  link\n}) => {\n  return (\n    <Wrapper p={3}>\n      {/* <Text variant=\"heading\" sx={{ fontSize: '16px' }}>\n        {title || 'no title'}\n      </Text> */}\n      <NavLink to={link}>\n        <Summary variant=\"text\">{content}</Summary>\n        <Flex mt={2} alignItems=\"center\">\n          <Flex flex={1}>\n            <Date>\n              <Trans>Last activity</Trans> {DateTime.fromSQL(lastActivity).toRelative()}\n            </Date>\n            <Meta>\n              <Flex alignItems=\"center\">\n                <Icon mr={1}>\n                  <MessageSquare size={16} />\n                </Icon>{' '}\n                {totalReplies || 0}\n              </Flex>\n              <Flex ml={3} alignItems=\"center\">\n                <Icon mr={1}>\n                  <Star size={16} />\n                </Icon>\n                {totalLikes || 0}\n              </Flex>\n            </Meta>\n          </Flex>\n          <Flex>\n            {members.map((m, i) => (\n              <Member ml={1} src={m} />\n            ))}\n          </Flex>\n        </Flex>\n      </NavLink>\n    </Wrapper>\n  );\n};\n\nconst Icon = styled(Box)`\n  svg {\n    vertical-align: middle;\n  }\n`;\n\nconst Summary = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n`;\n\nconst Member = styled(Box)<{ src: string }>`\n  max-width: 28px !important;\n  max-height: 28px !important;\n  border-radius: 28px !important;\n  background: url(\"${props => props.src}\");\n  background-repeat: no-repeat;\n  background-position: cover;\n  width: 28px;\n  height: 28px;\n  background-size: cover;\n`;\n\nconst Meta = styled(Flex)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  font-size: 13px;\n`;\n\nconst Date = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  font-size: 13px;\n  flex: 1;\n`;\n\nconst Wrapper = styled(Box)`\n  border-bottom: ${props => props.theme.colors.border};\n  background: ${props => props.theme.colors.appInverse};\n  cursor: pointer;\n  &:hover {\n    background: ${props => props.theme.colors.lighter};\n  }\n  a {\n    text-decoration: none;\n    * {\n      text-decoration: none;\n    }\n  }\n`;\n","import { useThreadPreview } from 'fe/thread/preview/useThreadPreview';\nimport { Thread } from 'graphql/types.generated';\nimport React, { FC, useMemo } from 'react';\nimport {\n  CommentProps as ThreadPreviewUIProps,\n  Thread as ThreadPreviewUI\n} from 'ui/modules/Previews/Thread';\n\nexport interface Props {\n  threadId: Thread['id'];\n}\n\nexport const ThreadPreviewHOC: FC<Props> = ({ threadId }) => {\n  const { mainComment, totalReplies } = useThreadPreview(threadId);\n\n  const threadPreviewProps = useMemo<ThreadPreviewUIProps | null>(() => {\n    if (!mainComment) {\n      return null;\n    }\n\n    const props: ThreadPreviewUIProps = {\n      content: mainComment.content,\n      // lastActivity: lastActivity ? `${lastActivity}` : '',\n      lastActivity: mainComment.createdAt,\n      members: [],\n      totalLikes: `${mainComment.likerCount || 0}`,\n      totalReplies: totalReplies ? `${totalReplies}` : '',\n      link: `/thread/${threadId}`\n    };\n\n    return props;\n  }, [mainComment, totalReplies, threadId]);\n\n  return threadPreviewProps && <ThreadPreviewUI {...threadPreviewProps} />;\n};\n","import React, { FC } from 'react';\nimport {\n  Activity,\n  Collection,\n  Comment,\n  Community,\n  Resource,\n  Thread,\n  User\n} from 'graphql/types.generated';\nimport { ActivityPreviewHOC } from './activity/ActivityPreview';\nimport { CollectionPreviewHOC } from './collection/CollectionPreview';\nimport { CommentPreviewHOC } from './comment/CommentPreview';\nimport { CommunityPreviewHOC } from './community/CommunityPreview';\nimport { ResourcePreviewHOC } from './resource/ResourcePreview';\nimport { ThreadPreviewHOC } from './thread/ThreadPreview';\nimport { UserPreviewHOC } from './user/UserPreview';\nimport Maybe from 'graphql/tsutils/Maybe';\n\nexport type Ctx = Pick<\n  Activity | Collection | Comment | Community | Resource | Thread | User,\n  'id' | '__typename'\n>;\ninterface PreviewIndex {\n  ctx: Maybe<Ctx>;\n}\n\nexport const PreviewIndex: FC<PreviewIndex> = ({ ctx }) => {\n  if (!ctx) {\n    return null;\n  }\n  switch (ctx.__typename) {\n    case 'Activity':\n      return <ActivityPreviewHOC activityId={ctx.id} />;\n    case 'Collection':\n      return <CollectionPreviewHOC collectionId={ctx.id} />;\n    case 'Comment':\n      return <CommentPreviewHOC commentId={ctx.id} mainComment={false} />;\n    case 'Community':\n      return <CommunityPreviewHOC communityId={ctx.id} />;\n    case 'Resource':\n      return <ResourcePreviewHOC resourceId={ctx.id} />;\n    case 'Thread':\n      return <ThreadPreviewHOC threadId={ctx.id} />;\n    case 'User':\n      return <UserPreviewHOC userId={ctx.id} />;\n    default:\n      return null;\n  }\n};\n","import React, { useMemo, FC } from 'react';\nimport { Thread as ThreadPageUI, Props } from 'ui/pages/thread';\nimport { CommentPreviewHOC } from 'HOC/modules/previews/comment/CommentPreview';\nimport { useThreadPreview } from 'fe/thread/preview/useThreadPreview';\nimport { Thread } from 'graphql/types.generated';\nimport { getCommunityInfoStrings } from 'fe/lib/activity/getContextCommunityInfo';\nimport {\n  ActivityPreview,\n  Status as ActivityPreviewStatus,\n  ActivityLoaded as ActivityPreviewProps\n} from 'ui/modules/ActivityPreview';\nimport { getActivityActor } from 'fe/lib/activity/getActivityActor';\nimport { useThreadComments } from 'fe/comment/thread/useThreadComments';\nimport { PreviewIndex } from 'HOC/modules/previews';\nimport { useFormik } from 'formik';\nimport { Box } from 'rebass';\nimport { usePageTitle } from 'context/global/pageCtx';\nimport { t } from '@lingui/macro';\nimport { getActivityMainContext } from 'fe/lib/activity/getActivityMainContext';\n\nexport interface ThreadPage {\n  threadId: Thread['id'];\n}\nconst threadPageTitle = t`Discussion: {excerpt}`;\n\nexport const ThreadPage: FC<ThreadPage> = ({ threadId }) => {\n  const { commentPage } = useThreadComments(threadId);\n  const [loadMoreComments] = commentPage.formiks;\n  const thread = useThreadPreview(threadId);\n  const titleValues = thread.mainComment && {\n    excerpt: `${thread.mainComment.content.substring(0, 30)} ...`\n  };\n  usePageTitle(!!titleValues && threadPageTitle, titleValues);\n  const replyFormik = useFormik<{ replyMessage: string }>({\n    initialValues: { replyMessage: '' },\n    onSubmit: ({ replyMessage }) => thread.reply(replyMessage)\n  });\n\n  const uiProps = useMemo<null | Props>(() => {\n    const { context: threadContext, mainComment } = thread;\n    const context = getActivityMainContext(threadContext);\n    if (!(mainComment && context)) {\n      return null;\n    }\n\n    const { communityName, communityId, communityIcon } = getCommunityInfoStrings(context);\n\n    const activityProps: Pick<\n      ActivityPreviewProps,\n      'status' | 'communityLink' | 'communityName' | 'event'\n    > = {\n      communityLink: `/communities/${communityId}`,\n      communityName,\n      event: 'started a discussion',\n      status: ActivityPreviewStatus.Loaded\n    };\n\n    const MainThread = (\n      <ActivityPreview\n        {...{\n          ...activityProps,\n          actor: mainComment.creator ? getActivityActor(mainComment.creator) : null,\n          preview: <CommentPreviewHOC commentId={mainComment.id} mainComment={true} />,\n          createdAt: mainComment.createdAt\n        }}\n      />\n    );\n\n    const Comments = (\n      <>\n        {commentPage.edges\n          .filter(comment => comment.id !== thread.mainComment?.id)\n          .map(comment => (\n            <Box mb={1} key={comment.id}>\n              <ActivityPreview\n                {...{\n                  ...activityProps,\n                  event: 'replied',\n                  actor: comment.creator\n                    ? getActivityActor(comment.creator)\n                    : { icon: '', link: '', name: '' },\n                  preview: (\n                    <CommentPreviewHOC\n                      commentId={comment.id}\n                      mainComment={false}\n                      hideActions={true}\n                    />\n                  ),\n                  createdAt: comment.createdAt\n                }}\n              />\n            </Box>\n          ))}\n      </>\n    );\n\n    const Context = (\n      <PreviewIndex\n        ctx={context.__typename === 'User' ? { ...context, id: context.userId } : context}\n      />\n    );\n    const props: Props = {\n      Comments,\n      Context,\n      MainThread,\n      communityIcon,\n      communityId,\n      communityName,\n      reply: thread.canReply\n        ? {\n            replyFormik\n          }\n        : null,\n      isCommunityContext: thread.context?.__typename === 'Community',\n      loadMoreComments\n    };\n\n    return props;\n  }, [thread, commentPage, loadMoreComments, replyFormik]);\n  return uiProps && <ThreadPageUI {...uiProps} />;\n};\n","import React, { FC, useMemo } from 'react';\nimport { ThreadPage } from 'HOC/pages/thread/ThreadPage';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\nimport { locationHelper } from './lib/helper';\n\ninterface ThreadPageRouter {\n  threadId: string;\n}\nconst ThreadPageRouter: FC<RouteComponentProps<ThreadPageRouter>> = ({ match }) => {\n  const threadId = match.params.threadId;\n\n  const props = useMemo<ThreadPage>(\n    () => ({\n      threadId\n    }),\n    [threadId]\n  );\n\n  return (\n    <WithSidebarTemplate>\n      <ThreadPage {...props} />\n    </WithSidebarTemplate>\n  );\n};\n\nexport const ThreadPageRoute: RouteProps = {\n  exact: true,\n  path: '/thread/:threadId',\n  component: ThreadPageRouter\n};\n\ntype Params = {\n  threadId: string;\n};\n\nexport const threadLocation = locationHelper<Params, undefined>(ThreadPageRoute);\n","import { Activity } from 'graphql/types.generated';\nimport { useActivityPreviewQuery } from './useActivityPreview.generated';\nimport { useMemo } from 'react';\nimport { getActivityMainContext } from 'fe/lib/activity/getActivityMainContext';\nimport { getEventString } from 'fe/lib/activity/getActivityEventString';\nimport { getActivitySimpleLink } from 'fe/lib/activity/getActivitySimpleLink';\nimport { getCommunityInfoStrings } from 'fe/lib/activity/getContextCommunityInfo';\n\nexport const useActivityPreview = (activityId: Activity['id']) => {\n  const activityPreviewQ = useActivityPreviewQuery({\n    variables: { activityId }\n  });\n  const activity = activityPreviewQ.data?.activity;\n  const mainContext = getActivityMainContext(activity?.context);\n  const eventString = getEventString(activity) || '';\n  const link = getActivitySimpleLink(mainContext);\n  const communityInfoStrings = getCommunityInfoStrings(mainContext);\n\n  return useMemo(() => {\n    return {\n      activity,\n      mainContext,\n      eventString,\n      link,\n      communityInfoStrings\n    };\n  }, [activity, mainContext, eventString, link, communityInfoStrings]);\n};\n","import { CollectionPreviewFragment } from 'HOC/modules/previews/collection/CollectionPreview.generated';\nimport { CommentPreviewFragment } from 'HOC/modules/previews/comment/CommentPreview.generated';\nimport { CommunityPreviewFragment } from 'HOC/modules/previews/community/CommunityPreview.generated';\nimport { ResourcePreviewFragment } from 'HOC/modules/previews/resource/ResourcePreview.generated';\nimport { UserPreviewFragment } from 'HOC/modules/previews/user/UserPreview.generated';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { threadLocation } from 'routes/ThreadPageRoute';\nimport { userLocation } from 'routes/UserPageRoute';\nimport { collectionLocation } from 'routes/CollectionPageRoute';\nimport { communityLocation } from 'routes/CommunityPageRoute';\n\ntype LinkCtx =\n  | Pick<UserPreviewFragment, '__typename' | 'userId'>\n  | Pick<CommentPreviewFragment, '__typename' | 'thread'>\n  | Pick<ResourcePreviewFragment, '__typename' | 'payload'>\n  | Pick<CollectionPreviewFragment | CommunityPreviewFragment, '__typename' | 'id'>;\n\nexport const getActivitySimpleLink = (ctx: Maybe<LinkCtx>) => {\n  if (!ctx) {\n    return '';\n  } else if (ctx.__typename === 'Comment') {\n    return ctx.thread ? threadLocation.getPath({ threadId: ctx.thread.id }, undefined) : '';\n  } else if (ctx.__typename === 'Resource') {\n    return ctx.payload ? ctx.payload.url : '';\n  } else if (ctx.__typename === 'User') {\n    return userLocation.getPath({ userId: ctx.userId, tab: undefined }, undefined);\n  } else if (ctx.__typename === 'Collection') {\n    return collectionLocation.getPath({ collectionId: ctx.id, tab: undefined }, undefined);\n  } else if (ctx.__typename === 'Community') {\n    return communityLocation.getPath({ communityId: ctx.id, tab: undefined }, undefined);\n  }\n  return null;\n};\n","import { Trans } from '@lingui/macro';\nimport DOMPurify from 'dompurify';\nimport { typography } from 'mn-constants';\nimport React from 'react';\nimport { CornerDownLeft, Star } from 'react-feather';\nimport { NavLink } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport styled from 'ui/themes/styled';\nimport { ActorComp } from '../ActivityPreview';\nimport { Actor } from '../ActivityPreview/types';\n\nexport interface LikeActions {\n  toggleLikeFormik: FormikHook<{}>;\n  totalLikes: number;\n  iLikeIt: boolean;\n}\nexport interface ReplyActions {\n  replyFormik: FormikHook<{ replyMessage: string }>;\n}\nexport interface CommentProps {\n  like: LikeActions;\n  content: string;\n  actor: Actor;\n  createdAt: string;\n  communityName: string;\n  communityLink: string;\n  hideActions?: boolean;\n  url: string;\n}\n\nexport const LikedComment: React.SFC<CommentProps> = ({\n  content,\n  like,\n  actor,\n  createdAt,\n  communityName,\n  communityLink,\n  hideActions,\n  url\n}) => {\n  return (\n    <Wrapper pl={2}>\n      <ActorComp\n        actor={actor}\n        createdAt={createdAt}\n        event={''}\n        communityName={communityName}\n        communityLink={communityLink}\n      />\n      <Summary\n        dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(content) }}\n        sx={{ textDecoration: 'none' }}\n        variant=\"text\"\n        mb={2}\n      />\n      <Actions mt={2}>\n        {hideActions ? null : (\n          <Box>\n            <Items>\n              <ActionItem>\n                <NavLink to={url}>\n                  <ActionIcon>\n                    <CornerDownLeft\n                      className=\"hover\"\n                      strokeWidth=\"1\"\n                      color=\"rgba(0,0,0,.4)\"\n                      size=\"18\"\n                    />\n                  </ActionIcon>\n                  <ActionText\n                    ml={1}\n                    variant={'text'}\n                    sx={{ textTransform: 'capitalize', textDecoration: 'none' }}\n                  >\n                    <Trans>Reply</Trans>\n                  </ActionText>\n                </NavLink>\n              </ActionItem>\n              <ActionItem\n                liked={like.iLikeIt ? true : false}\n                onClick={like.toggleLikeFormik.submitForm}\n              >\n                <ActionIcon>\n                  <Star strokeWidth=\"1\" size=\"18\" />\n                </ActionIcon>\n                <ActionText variant={'text'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                  {like.totalLikes + ' '} <Trans>Star</Trans>\n                </ActionText>\n              </ActionItem>\n            </Items>\n          </Box>\n        )}\n      </Actions>\n    </Wrapper>\n  );\n};\n\nconst Summary = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n`;\n\nconst Items = styled(Flex)`\n  flex: 1;\n  justify-content: start;\n`;\n\nconst Actions = styled(Box)`\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n`;\n\nconst ActionItem = styled(Flex)<{ liked?: boolean }>`\n  align-items: center;\n  color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  div {\n    color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  cursor: pointer;\n  background: ${props =>\n    props.liked ? props.theme.colors.secondary : props.theme.colors.mediumlight};\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ${typography.size.s1};\n  svg {\n    stroke: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ${props => props.theme.colors.mediumdark};\n      // fill: ${props => props.theme.colors.mediumdark};\n    }\n  }\n`;\n\nconst ActionIcon = styled(Box)`\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n`;\n\nconst ActionText = styled(Text)`\n  font-size: ${typography.size.s1};\n`;\n\nconst Wrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  border-left: 3px solid ${props => props.theme.colors.light};\n`;\n","import { useCommentPreview } from 'fe/comment/preview/useCommentPreview';\nimport { Comment } from 'graphql/types.generated';\nimport React, { FC, useMemo } from 'react';\nimport {\n  LikedComment as LikedCommentPreviewUI,\n  CommentProps as LikedCommentProps\n} from 'ui/modules/Previews/LikedComment';\nimport { useFormik } from 'formik';\nimport { getCommunityInfoStrings } from 'fe/lib/activity/getContextCommunityInfo';\nimport { getActivityActor } from 'fe/lib/activity/getActivityActor';\nimport { threadLocation } from 'routes/ThreadPageRoute';\n\nexport interface LikedCommentPreviewHOC {\n  commentId: Comment['id'];\n}\n\nexport const LikedCommentPreviewHOC: FC<LikedCommentPreviewHOC> = ({ commentId }) => {\n  const { comment, toggleLike /* reply */ } = useCommentPreview(commentId);\n  const toggleLikeFormik = useFormik({\n    initialValues: {},\n    onSubmit: toggleLike\n  });\n\n  // const replyFormik = useFormik<{ replyMessage: string }>({\n  //   initialValues: { replyMessage: '' },\n  //   onSubmit: ({ replyMessage }) => reply(replyMessage)\n  // });\n\n  const likedCommentPreviewProps = useMemo<LikedCommentProps | null>(() => {\n    if (!comment) {\n      return null;\n    }\n    const { communityLink, communityName } = getCommunityInfoStrings(comment);\n    const props: LikedCommentProps = {\n      url: comment.thread ? threadLocation.getPath({ threadId: comment.thread.id }, undefined) : '',\n      communityLink,\n      communityName,\n      actor: comment.creator ? getActivityActor(comment.creator) : { icon: '', link: '', name: '' },\n      createdAt: comment.createdAt,\n      content: comment.content,\n      like: {\n        iLikeIt: !!comment.myLike,\n        totalLikes: comment.likerCount || 0,\n        toggleLikeFormik\n      }\n    };\n    return props;\n  }, [comment, toggleLikeFormik]);\n\n  return likedCommentPreviewProps && <LikedCommentPreviewUI {...likedCommentPreviewProps} />;\n};\n","import React, { FC } from 'react';\nimport { ActivityContextPreviewFragment } from 'fe/lib/activity/types';\nimport { CollectionPreviewHOC } from '../collection/CollectionPreview';\nimport { CommentPreviewHOC } from '../comment/CommentPreview';\nimport { CommunityPreviewHOC } from '../community/CommunityPreview';\nimport { ResourcePreviewHOC } from '../resource/ResourcePreview';\nimport { UserPreviewHOC } from '../user/UserPreview';\nimport { LikedCommentPreviewHOC } from '../commentLiked/CommentLikedPreview';\nimport { getActivityMainContext } from 'fe/lib/activity/getActivityMainContext';\n\nexport const PreviewComponent: FC<{\n  context: ActivityContextPreviewFragment;\n  flagged?: boolean;\n}> = ({ context, flagged }) => {\n  if (context.__typename === 'Collection') {\n    if (flagged) {\n      return (\n        <CollectionPreviewHOC collectionId={context.id} flagged={flagged} />\n      );\n    } else {\n      return <CollectionPreviewHOC collectionId={context.id} />;\n    }\n  } else if (context.__typename === 'Comment') {\n    return <CommentPreviewHOC commentId={context.id} mainComment={false} />;\n  } else if (context.__typename === 'Community') {\n    if (flagged) {\n      return <CommunityPreviewHOC communityId={context.id} flagged={flagged} />;\n    } else {\n      return <CommunityPreviewHOC communityId={context.id} />;\n    }\n  } else if (context.__typename === 'Resource') {\n    if (flagged) {\n      return <ResourcePreviewHOC resourceId={context.id} flagged={flagged} />;\n    } else {\n      return <ResourcePreviewHOC resourceId={context.id} />;\n    }\n  } else if (context.__typename === 'User') {\n    if (flagged) {\n      return <UserPreviewHOC userId={context.userId} flagged={flagged} />;\n    } else {\n      return <UserPreviewHOC userId={context.userId} />;\n    }\n  } else {\n    if (\n      context.__typename === 'Like' &&\n      context.context?.__typename === 'Comment'\n    ) {\n      return <LikedCommentPreviewHOC commentId={context.context.id} />;\n    } else {\n      const mainContext = getActivityMainContext(context);\n      return mainContext ? <PreviewComponent context={mainContext} /> : null;\n    }\n  }\n};\n","import { useActivityPreview } from 'fe/activities/preview/useActivityPreview';\nimport { getActivityActor } from 'fe/lib/activity/getActivityActor';\nimport * as GQL from 'graphql/types.generated';\nimport React, { FC, useMemo } from 'react';\nimport * as UI from 'ui/modules/ActivityPreview';\nimport { PreviewComponent } from './PreviewComponent';\nimport { threadLocation } from 'routes/ThreadPageRoute';\n\nexport interface Props {\n  activityId: GQL.Activity['id'];\n}\nexport const ActivityPreviewHOC: FC<Props> = ({ activityId }) => {\n  const activityBox = useActivityPreview(activityId);\n  const props = useMemo<null | UI.Props>(() => {\n    const { activity, communityInfoStrings, eventString } = activityBox;\n    if (!activity) {\n      return { status: UI.Status.Loading };\n    } else {\n      if (!activity.context) {\n        console.error('ActivityPreviewHOC: user or context :null', activity);\n        return null;\n      }\n\n      const threadId =\n        activity.context.__typename === 'Comment'\n          ? activity.context.thread?.id\n          : activity.context.__typename === 'Like' &&\n            activity.context.context?.__typename === 'Comment'\n          ? activity.context.context.thread?.id\n          : undefined;\n\n      const props: UI.Props = {\n        status: UI.Status.Loaded,\n        createdAt: activity.createdAt,\n        actor: activity.user && getActivityActor(activity.user),\n        threadUrl: threadId && threadLocation.getPath({ threadId }, undefined),\n        event: eventString,\n        ...communityInfoStrings,\n        preview: <PreviewComponent context={activity.context} />\n      };\n      return props;\n    }\n  }, [activityBox]);\n\n  return props && <UI.ActivityPreview {...props} />;\n};\n","import * as React from 'react';\nimport { Nav, NavItem, Panel, PanelTitle, WrapperPanel } from 'ui/elements/Panel';\nimport { Trans } from '@lingui/macro';\nimport { Text } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\n\nexport type Props = {};\n\nexport const SidePanel: React.FC<Props> = props => {\n  return (\n    <>\n      <WrapperPanel>\n        <Panel>\n          <PanelTitle fontSize={0} fontWeight={'bold'}>\n            Popular hashtags\n          </PanelTitle>\n          <Nav>\n            <NavItem mb={3} fontSize={0}>\n              #pedagogy\n            </NavItem>\n            <NavItem mb={3} fontSize={0}>\n              #transition\n            </NavItem>\n            <NavItem mb={3} fontSize={0}>\n              #english\n            </NavItem>\n            <NavItem mb={3} fontSize={0}>\n              #template\n            </NavItem>\n            <NavItem mb={3} fontSize={0}>\n              #assessment\n            </NavItem>\n            <NavItem fontSize={0}>\n              <ComingSoon variant=\"text\">\n                <span aria-label=\"icon\" role=\"img\">\n                  ✨\n                </span>\n                <Trans>This feature is coming soon!</Trans>\n                <span aria-label=\"icon\" role=\"img\">\n                  ✨\n                </span>\n              </ComingSoon>\n            </NavItem>\n          </Nav>\n        </Panel>\n        <Panel>\n          <PanelTitle fontSize={0} fontWeight={'bold'}>\n            Popular categories\n          </PanelTitle>\n          <Nav>\n            <NavItem mb={3} fontSize={0}>\n              Humanities\n            </NavItem>\n            <NavItem mb={3} fontSize={0}>\n              Behavioural science\n            </NavItem>\n            <NavItem mb={3} fontSize={0}>\n              English\n            </NavItem>\n            <NavItem mb={3} fontSize={0}>\n              Romana\n            </NavItem>\n            <NavItem mb={3} fontSize={0}>\n              Postgraduate\n            </NavItem>\n            <ComingSoon variant=\"text\">\n              <span aria-label=\"icon\" role=\"img\">\n                ✨\n              </span>\n              <Trans>This feature is coming soon!</Trans>{' '}\n              <span aria-label=\"icon\" role=\"img\">\n                ✨\n              </span>\n            </ComingSoon>\n          </Nav>\n        </Panel>\n      </WrapperPanel>\n    </>\n  );\n};\n\nconst ComingSoon = styled(Text)`\n  background: aliceblue;\n  text-align: center;\n  padding: 4px;\n  border-radius: 4px;\n`;\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { ReactElement } from 'react';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\nimport {\n  HomeBox,\n  List,\n  MainContainer,\n  MenuList,\n  ObjectsList,\n  Wrapper,\n  WrapperCont\n} from 'ui/elements/Layout';\n// import { Header } from 'ui/modules/Header';\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport { SidePanel } from 'ui/modules/SidePanel';\nimport SocialText from 'ui/modules/SocialText';\nimport styled from 'ui/themes/styled';\n\nexport interface Props {\n  isJoined: boolean;\n  Activities: ReactElement[];\n  Members: ReactElement[];\n  Collections: ReactElement[];\n  HeroCommunity: ReactElement;\n  Threads: ReactElement[];\n  newThreadFormik: null | FormikHook<{ text: string }>;\n  createCollection: () => unknown;\n  loadMoreActivities: FormikHook | null;\n  loadMoreCollections: FormikHook | null;\n  loadMoreThreads: FormikHook | null;\n  tabPaths: {\n    timeline: string;\n    members: string;\n    discussions: string;\n    collections: string;\n  };\n}\n\nexport const Community: React.FC<Props> = ({\n  Activities,\n  HeroCommunity,\n  Collections,\n  Members,\n  tabPaths,\n  newThreadFormik,\n  // isJoined,\n  Threads,\n  loadMoreActivities,\n  loadMoreCollections,\n  loadMoreThreads,\n  createCollection\n}) => {\n  return (\n    <MainContainer>\n      <HomeBox>\n        <WrapperCont>\n          <Wrapper>\n            {/* <Header name={communityName} /> */}\n            {HeroCommunity}\n            <Menu tabPaths={tabPaths} />\n            <Switch>\n              <Route exact path={tabPaths.timeline}>\n                <>\n                  <List mt={2}>{Activities}</List>\n                  {loadMoreActivities && <LoadMore LoadMoreFormik={loadMoreActivities} />}\n                </>\n              </Route>\n              <Route exact path={tabPaths.collections}>\n                <>\n                  <Title px={3} mt={2}>\n                    <Text sx={{ flex: 1 }} variant=\"suptitle\">\n                      <Trans>All collections</Trans>\n                    </Text>\n                    <CreateCollectionButton variant=\"outline\" onClick={createCollection}>\n                      <Trans>Create a new collection</Trans>\n                    </CreateCollectionButton>\n                  </Title>\n                  <ObjectsList>\n                    <CollectionsBoxes>{Collections}</CollectionsBoxes>\n                  </ObjectsList>\n                  {loadMoreCollections && <LoadMore LoadMoreFormik={loadMoreCollections} />}\n                </>\n              </Route>\n              <Route exact path={tabPaths.discussions}>\n                <>\n                  <WrapSocialText p={3} mb={2}>\n                    {newThreadFormik && (\n                      <SocialText\n                        placeholder=\"Start a new thread...\"\n                        submit={text => {\n                          newThreadFormik.setValues({ text });\n                          newThreadFormik.submitForm();\n                        }}\n                      />\n                    )}\n                  </WrapSocialText>\n                  <Title px={3} mt={2}>\n                    <Text variant=\"suptitle\">All discussions</Text>\n                  </Title>\n                  <ObjectsList>{Threads}</ObjectsList>\n                  {loadMoreThreads && <LoadMore LoadMoreFormik={loadMoreThreads} />}\n                </>\n              </Route>\n              <Route path={tabPaths.members}>\n                <>\n                  <ObjectsList>{Members}</ObjectsList>\n                </>\n              </Route>\n            </Switch>\n          </Wrapper>\n        </WrapperCont>\n      </HomeBox>\n      <SidePanel />\n    </MainContainer>\n  );\n};\n\nconst CreateCollectionButton = styled(Button)`\n  padding: 0;\n  text-transform: capitalize;\n  height: 34px;\n  line-height: 34px;\n  padding: 0 16px;\n`;\n\nconst CollectionsBoxes = styled(Box)`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 16px;\n  row-gap: 16px;\n  margin: 16px;\n  margin-bottom: 24px !important;\n  ${media.lessThan('medium')`\n  grid-template-columns: 1fr;\n  > div {\n    margin: 0 auto;\n    width: 300px;\n  }\n  `}\n`;\n\n// const FollowersMenu = ({ basePath }: { basePath: string }) => (\n//   <MenuList m={2}>\n//     <NavLink exact to={`${basePath}`}>\n//       Members\n//     </NavLink>\n//   </MenuList>\n// );\n\nconst Menu: React.FC<{ tabPaths: Props['tabPaths'] }> = ({ tabPaths }) => (\n  <MenuList p={3} pt={0}>\n    <NavLink to={tabPaths.timeline}>\n      <Trans>Recent activity</Trans>\n    </NavLink>\n    <NavLink exact to={tabPaths.collections}>\n      <Trans>Collections</Trans>\n    </NavLink>\n    <NavLink to={tabPaths.discussions}>\n      <Trans>Discussions</Trans>\n    </NavLink>\n    <NavLink to={tabPaths.members}>\n      <Trans>Members</Trans>\n    </NavLink>\n  </MenuList>\n);\n\nconst Title = styled(Flex)`\n  background: ${props => props.theme.colors.appInverse};\n  height: 50px;\n  line-height: 50px;\n  align-items: center;}\n  </>\n);\n\n  border-bottom: ${props => props.theme.colors.border};\n  button {\n    width: 190px;\n    font-size: 14px;\n    text-transform: inherit;\n    letter-spacing: 0;\n    padding: 0;\n    height: 32px;\n    line-height: 32px;\n    background: #ffe5cd;\n    color: #ca6a11;\n    border: none;\n  }\n`;\n\n// const Container = styled(Box)`\n//   background: ${props => props.theme.colors.appInverse};\n// `;\n\nconst WrapSocialText = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n`;\n\nexport default Community;\n","import { t } from '@lingui/macro';\nimport { i18n } from 'context/global/localizationCtx';\nimport { usePageTitle } from 'context/global/pageCtx';\nimport { useCommunityOutboxActivities } from 'fe/activities/outbox/community/useCommunityOutboxActivities';\nimport { useCommunityCollections } from 'fe/collection/community/useCommunityCollections';\nimport { useCommunity } from 'fe/community/useCommunity';\nimport { useCommunityThreads } from 'fe/thread/community/useCommunityThreads';\nimport { useCommunityFollowers } from 'fe/user/followers/community/useCommunityFollowers';\nimport { useFormik } from 'formik';\nimport { Community } from 'graphql/types.generated';\nimport { useNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { CreateCollectionPanelHOC } from 'HOC/modules/CreateCollectionPanel/createCollectionPanelHOC';\nimport { HeroCommunity } from 'HOC/modules/HeroCommunity/HeroCommunity';\nimport { ActivityPreviewHOC } from 'HOC/modules/previews/activity/ActivityPreview';\nimport { CollectionPreviewHOC } from 'HOC/modules/previews/collection/CollectionPreview';\nimport { ThreadPreviewHOC } from 'HOC/modules/previews/thread/ThreadPreview';\nimport { UserPreviewHOC } from 'HOC/modules/previews/user/UserPreview';\nimport React, { FC, ReactElement, useMemo, useReducer } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Box } from 'rebass/styled-components';\nimport Modal from 'ui/modules/Modal';\nimport CommunityPageUI, { Props as CommunityProps } from 'ui/pages/community';\nimport { communityLocation } from 'routes/CommunityPageRoute';\n\nexport enum CommunityPageTab {\n  Activities,\n  Collections,\n  Discussions,\n  Members\n}\nexport interface CommunityPage {\n  communityId: Community['id'];\n  tab: CommunityPageTab;\n  basePath: string;\n}\n\nconst communityActivitiesPageTitle = t`Community {name} - Activities`;\nconst communityCollectionsPageTitle = t`Community {name} - Collections`;\nconst communityDiscussionsPageTitle = t`Community {name} - Discussions`;\nconst communityMembersPageTitle = t`Community {name} - Members`;\n\nexport const CommunityPage: FC<CommunityPage> = ({ communityId, basePath, tab }) => {\n  const { community, createThread } = useCommunity(communityId);\n\n  const communityPageTitle =\n    tab === CommunityPageTab.Members\n      ? communityMembersPageTitle\n      : tab === CommunityPageTab.Activities\n      ? communityActivitiesPageTitle\n      : tab === CommunityPageTab.Discussions\n      ? communityDiscussionsPageTitle\n      : tab === CommunityPageTab.Collections\n      ? communityCollectionsPageTitle\n      : communityCollectionsPageTitle; //never\n  usePageTitle(!!community?.name && communityPageTitle, community);\n\n  const { communityFollowersPage } = useCommunityFollowers(communityId);\n  const { threadsPage } = useCommunityThreads(communityId);\n  const [loadMoreThreads] = threadsPage.formiks;\n  const { collectionsPage } = useCommunityCollections(communityId);\n  const [loadMoreCollections] = collectionsPage.formiks;\n  const { activitiesPage } = useCommunityOutboxActivities(communityId);\n  const [loadMoreActivities] = activitiesPage.formiks;\n\n  const isJoined = !!community?.myFollow;\n  const notifiedMustJoin = (msg: string) => {\n    if (!isJoined) {\n      toast(msg, { type: 'warning' });\n      return true;\n    }\n    return false;\n  };\n\n  const history = useHistory();\n  const newThreadFormik = useFormik<{ text: string }>({\n    initialValues: { text: '' },\n    // validationSchema,\n    onSubmit: ({ text }) =>\n      notifiedMustJoin(i18n._(`You should join this community to create a new trhead`))\n        ? undefined\n        : createThread(text).then(newThreadId => {\n            history.push(`/thread/${newThreadId}`);\n          })\n  });\n\n  const Activities = activitiesPage.edges.map(activity => (\n    <ActivityPreviewHOC activityId={activity.id} key={activity.id} />\n  ));\n\n  const Collections = collectionsPage.edges.map(collection => (\n    <Box key={collection.id}>\n      <CollectionPreviewHOC collectionId={collection.id} key={collection.id} />\n    </Box>\n  ));\n\n  const Threads = threadsPage.edges\n    .map(thread =>\n      thread.comments?.edges[0] ? (\n        <Box key={thread.id}>\n          <ThreadPreviewHOC threadId={thread.id} />\n        </Box>\n      ) : (\n        (console.warn(\n          `Found a thread [id:${thread.id}] with an empty comments edges .. skipping`,\n          thread\n        ),\n        null)\n      )\n    )\n    .filter((_): _ is ReactElement => !!_);\n\n  const Members = communityFollowersPage.edges\n    .map(\n      follow => follow.creator && <UserPreviewHOC key={follow.id} userId={follow.creator?.userId} />\n    )\n    .filter((_): _ is ReactElement => !!_);\n\n  const HeroCommunityBox = <HeroCommunity communityId={communityId} basePath={basePath} />;\n\n  const notifiedMustLogin = useNotifyMustLogin();\n  const [showCreateCollectionModal, toggleShowCreateCollectionModal] = useReducer(\n    is =>\n      !notifiedMustJoin(i18n._(`You should join this community to create new collections`)) &&\n      !notifiedMustLogin() &&\n      !is,\n    false\n  );\n\n  const CreateCollectionModal = showCreateCollectionModal ? (\n    <Modal closeModal={toggleShowCreateCollectionModal}>\n      <CreateCollectionPanelHOC done={toggleShowCreateCollectionModal} communityId={communityId} />\n    </Modal>\n  ) : null;\n\n  const communityPageProps = useMemo<CommunityProps | null>(() => {\n    if (!community) {\n      return null;\n    }\n    const tabPaths: CommunityProps['tabPaths'] = {\n      collections: communityLocation.getPath({ communityId, tab: undefined }, undefined),\n      discussions: communityLocation.getPath({ communityId, tab: 'discussions' }, undefined),\n      members: communityLocation.getPath({ communityId, tab: 'members' }, undefined),\n      timeline: communityLocation.getPath({ communityId, tab: 'timeline' }, undefined)\n    };\n    const props: CommunityProps = {\n      Members,\n      Activities,\n      Collections,\n      HeroCommunity: HeroCommunityBox,\n      Threads,\n      tabPaths,\n      isJoined,\n      newThreadFormik: isJoined ? newThreadFormik : null,\n      loadMoreActivities,\n      loadMoreCollections,\n      loadMoreThreads,\n      createCollection: toggleShowCreateCollectionModal\n    };\n    return props;\n  }, [\n    community,\n    communityId,\n    Members,\n    Activities,\n    Collections,\n    HeroCommunityBox,\n    Threads,\n    isJoined,\n    newThreadFormik,\n    loadMoreActivities,\n    loadMoreCollections,\n    loadMoreThreads\n  ]);\n\n  return (\n    communityPageProps && (\n      <>\n        {CreateCollectionModal}\n        <CommunityPageUI {...communityPageProps} />\n      </>\n    )\n  );\n};\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Heading, Box } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\n// import { WrapperPanel } from 'ui/elements/Panel';\nimport LogoContainer from 'ui/elements/Logo';\n\nconst Container = styled.div`\n  margin: 0 auto;\n  width: 432px;\n  margin-top: 60px;\n  padding: 16px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    color: #fff !important;\n    text-transform: uppercase\n      &:hover {\n      background: #d67218 !important;\n    }\n  }\n`;\n\nexport const NotFound = () => {\n  return (\n    <>\n      <Container>\n        <Box sx={{ textAlign: 'center' }}>\n          <LogoContainer />\n          <Heading>\n            <span aria-label=\"icon\" role=\"img\">\n              🤔\n            </span>\n            <Trans>Page not found</Trans>\n          </Heading>\n        </Box>\n      </Container>\n    </>\n  );\n};\n","import { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\nimport React, { FC } from 'react';\nimport { NotFound } from 'ui/pages/notFound';\n\nexport interface NotFoundHOC {}\n\nconst notFoundPageTitle = t`Page Not Found`;\n\nexport const NotFoundHOC: FC<NotFoundHOC> = () => {\n  usePageTitle(notFoundPageTitle, {});\n  return <NotFound />;\n};\n","import React, { FC, useMemo } from 'react';\nimport { CommunityPageTab, CommunityPage } from 'HOC/pages/community/CommunityPage';\nimport { NotFoundHOC } from 'HOC/pages/not-found/NotFound';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\nimport { locationHelper } from './lib/helper';\n\ninterface CommunityPageRouter {\n  communityId: string;\n  tab?: string;\n}\nconst CommunityPageRouter: FC<RouteComponentProps<CommunityPageRouter>> = ({ match }) => {\n  const communityId = match.params.communityId;\n  const maybeTabStr = match.params.tab;\n  const tab =\n    maybeTabStr === 'timeline'\n      ? CommunityPageTab.Activities\n      : maybeTabStr === 'members'\n      ? CommunityPageTab.Members\n      : maybeTabStr === 'discussions'\n      ? CommunityPageTab.Discussions\n      : !maybeTabStr\n      ? CommunityPageTab.Collections\n      : null;\n\n  const props = useMemo<CommunityPage | null>(() => {\n    return tab === null\n      ? null\n      : {\n          communityId,\n          tab,\n          basePath: `/communities/${communityId}`\n        };\n  }, [tab, communityId]);\n\n  if (props === null) {\n    return <NotFoundHOC />;\n  }\n\n  return (\n    <WithSidebarTemplate>\n      <CommunityPage {...props} />\n    </WithSidebarTemplate>\n  );\n};\n\nexport const CommunityPageRoute: RouteProps = {\n  exact: true,\n  path: '/communities/:communityId/:tab(timeline|members|discussions)?',\n  component: CommunityPageRouter\n};\n\ntype Tab = undefined | 'timeline' | 'members' | 'discussions';\ntype Params = {\n  communityId: string;\n  tab: Tab;\n};\n\nexport const communityLocation = locationHelper<Params, undefined>(CommunityPageRoute);\n","import { ActorPreviewFragment } from 'fe/lib/activity/types';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { CommunityInfoFragment } from 'HOC/modules/previews/community/CommunityPreview.generated';\nimport { UserPreviewFragment } from 'HOC/modules/previews/user/UserPreview.generated';\nimport { communityLocation } from 'routes/CommunityPageRoute';\n\nexport const getContextCommunityInfo = (\n  context: Maybe<Exclude<ActorPreviewFragment, UserPreviewFragment>>\n): Maybe<CommunityInfoFragment> => {\n  if (!context) {\n    return null;\n  } else if (context.__typename === 'Community') {\n    return context;\n  } else if (context.__typename === 'Collection') {\n    return context.community;\n  } else if (context.__typename === 'Resource') {\n    return context.collection?.community;\n  } else if (context.__typename === 'Comment') {\n    return (\n      context.thread &&\n      context.thread.context &&\n      (context.thread.context.__typename === 'Flag'\n        ? null\n        : context.thread.context.__typename === 'Resource'\n        ? context.thread.context.collection?.community\n        : context.thread.context.__typename === 'Collection'\n        ? context.thread.context.community\n        : context.thread.context.__typename === 'Community'\n        ? context.thread.context\n        : null) // context.thread.context:never\n    );\n  }\n  return null;\n};\nexport const getCommunityInfoStrings = (context: Maybe<ActorPreviewFragment>) => {\n  let communityLink = '';\n  let communityName = '';\n  let communityId = '';\n  let communityIcon = '';\n  if (context && context.__typename !== 'User') {\n    const communityInfo = getContextCommunityInfo(context);\n    if (communityInfo) {\n      communityLink = communityLocation.getPath(\n        { communityId: communityInfo.id, tab: undefined },\n        undefined\n      );\n      communityName = communityInfo.name;\n      communityId = communityInfo.id;\n      communityIcon = communityInfo.icon?.url || '';\n    }\n  }\n  return {\n    communityLink,\n    communityName,\n    communityId,\n    communityIcon\n  };\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { FullPageInfoFragment } from '../../../@fragments/misc.generated';\nimport { LikePreviewFragment } from '../../../HOC/modules/previews/like/LikePreview.generated';\nimport gql from 'graphql-tag';\nimport { LikePreviewFragmentDoc } from '../../../HOC/modules/previews/like/LikePreview.generated';\nimport { FullPageInfoFragmentDoc } from '../../../@fragments/misc.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type UserLikesQueryVariables = {\n  userId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type UserLikesQuery = (\n  { __typename: 'RootQueryType' }\n  & { user: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & { likes: Types.Maybe<(\n      { __typename: 'LikesPage' }\n      & Pick<Types.LikesPage, 'totalCount'>\n      & { edges: Array<(\n        { __typename: 'Like' }\n        & LikePreviewFragment\n      )>, pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ) }\n    )> }\n  )> }\n);\n\n\nexport const UserLikesDocument = gql`\n    query userLikes($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) {\n    id\n    likes(limit: $limit, before: $before, after: $after) @connection(key: \"userLikes\") {\n      edges {\n        ...LikePreview\n      }\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n    }\n  }\n}\n    ${LikePreviewFragmentDoc}\n${FullPageInfoFragmentDoc}`;\n\n/**\n * __useUserLikesQuery__\n *\n * To run a query within a React component, call `useUserLikesQuery` and pass it any options that fit your needs.\n * When your component renders, `useUserLikesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useUserLikesQuery({\n *   variables: {\n *      userId: // value for 'userId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useUserLikesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<UserLikesQuery, UserLikesQueryVariables>) {\n        return ApolloReactHooks.useQuery<UserLikesQuery, UserLikesQueryVariables>(UserLikesDocument, baseOptions);\n      }\nexport function useUserLikesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<UserLikesQuery, UserLikesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<UserLikesQuery, UserLikesQueryVariables>(UserLikesDocument, baseOptions);\n        }\nexport type UserLikesQueryHookResult = ReturnType<typeof useUserLikesQuery>;\nexport type UserLikesLazyQueryHookResult = ReturnType<typeof useUserLikesLazyQuery>;\nexport type UserLikesQueryResult = ApolloReactCommon.QueryResult<UserLikesQuery, UserLikesQueryVariables>;\n\n\nexport interface UserLikesQueryOperation {\n  operationName: 'userLikes'\n  result: UserLikesQuery\n  variables: UserLikesQueryVariables\n  type: 'query'\n}\nexport const UserLikesQueryName:UserLikesQueryOperation['operationName'] = 'userLikes'\n\nexport const UserLikesQueryRefetch = (\n  variables:UserLikesQueryVariables, \n  context?:any\n)=>({\n  query:UserLikesDocument,\n  variables,\n  context\n})\n      \n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { useUserLikesQuery } from './useUserLikes.generated';\nimport { useMemo } from 'react';\nimport { User } from 'graphql/types.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useUserLikes = (userId: User['id']) => {\n  const userLikesQ = useUserLikesQuery({\n    variables: { userId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const likesPage = usePage(\n    userLikesQ.data?.user?.likes,\n    ({ cursor, update }) => {\n      return userLikesQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, userId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.user?.likes && prev.user?.likes\n            ? {\n                ...fetchMoreResult,\n                user: {\n                  ...fetchMoreResult.user,\n                  likes: update({\n                    prev: prev.user.likes,\n                    fetched: fetchMoreResult.user.likes\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n  return useMemo(() => {\n    return {\n      likesPage\n    };\n  }, [likesPage]);\n};\n","import * as Types from '../../../../graphql/types.generated';\n\nimport { UserPreviewFragment } from '../../../../HOC/modules/previews/user/UserPreview.generated';\nimport { FullPageInfoFragment } from '../../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../../@fragments/misc.generated';\nimport { UserPreviewFragmentDoc } from '../../../../HOC/modules/previews/user/UserPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\n\nexport type UserFollowedUsersQueryVariables = {\n  userId: Types.Scalars['String'],\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type UserFollowedUsersQuery = (\n  { __typename: 'RootQueryType' }\n  & { user: Types.Maybe<(\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n    & { userFollows: Types.Maybe<(\n      { __typename: 'FollowsPage' }\n      & Pick<Types.FollowsPage, 'totalCount'>\n      & { pageInfo: (\n        { __typename: 'PageInfo' }\n        & FullPageInfoFragment\n      ), edges: Array<(\n        { __typename: 'Follow' }\n        & Pick<Types.Follow, 'id'>\n        & { context: { __typename: 'Collection' } | { __typename: 'Community' } | { __typename: 'Thread' } | (\n          { __typename: 'User' }\n          & UserFollowedUserFragment\n        ) }\n      )> }\n    )> }\n  )> }\n);\n\nexport type UserFollowedUserFragment = (\n  { __typename: 'User' }\n  & UserPreviewFragment\n);\n\nexport const UserFollowedUserFragmentDoc = gql`\n    fragment UserFollowedUser on User {\n  ...UserPreview\n}\n    ${UserPreviewFragmentDoc}`;\nexport const UserFollowedUsersDocument = gql`\n    query userFollowedUsers($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: \"userFollowedUsers\", filter: [\"userId\"]) {\n    id\n    userFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on User {\n            ...UserFollowedUser\n          }\n        }\n      }\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}\n${UserFollowedUserFragmentDoc}`;\n\n/**\n * __useUserFollowedUsersQuery__\n *\n * To run a query within a React component, call `useUserFollowedUsersQuery` and pass it any options that fit your needs.\n * When your component renders, `useUserFollowedUsersQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useUserFollowedUsersQuery({\n *   variables: {\n *      userId: // value for 'userId'\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useUserFollowedUsersQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<UserFollowedUsersQuery, UserFollowedUsersQueryVariables>) {\n        return ApolloReactHooks.useQuery<UserFollowedUsersQuery, UserFollowedUsersQueryVariables>(UserFollowedUsersDocument, baseOptions);\n      }\nexport function useUserFollowedUsersLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<UserFollowedUsersQuery, UserFollowedUsersQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<UserFollowedUsersQuery, UserFollowedUsersQueryVariables>(UserFollowedUsersDocument, baseOptions);\n        }\nexport type UserFollowedUsersQueryHookResult = ReturnType<typeof useUserFollowedUsersQuery>;\nexport type UserFollowedUsersLazyQueryHookResult = ReturnType<typeof useUserFollowedUsersLazyQuery>;\nexport type UserFollowedUsersQueryResult = ApolloReactCommon.QueryResult<UserFollowedUsersQuery, UserFollowedUsersQueryVariables>;\n\n\nexport interface UserFollowedUsersQueryOperation {\n  operationName: 'userFollowedUsers'\n  result: UserFollowedUsersQuery\n  variables: UserFollowedUsersQueryVariables\n  type: 'query'\n}\nexport const UserFollowedUsersQueryName:UserFollowedUsersQueryOperation['operationName'] = 'userFollowedUsers'\n\nexport const UserFollowedUsersQueryRefetch = (\n  variables:UserFollowedUsersQueryVariables, \n  context?:any\n)=>({\n  query:UserFollowedUsersDocument,\n  variables,\n  context\n})\n      \n","import { User } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useUserFollowedUsers.generated';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport interface Props {\n  userId: User['id'];\n}\n\nexport const useUserFollowedUsers = (userId: User['id']) => {\n  const userQ = GQL.useUserFollowedUsersQuery({\n    variables: { userId, limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const followedUsersPage = usePage(\n    userQ.data?.user?.userFollows,\n    ({ cursor, update }) => {\n      return userQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE, userId },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.user?.userFollows && prev.user?.userFollows\n            ? {\n                ...fetchMoreResult,\n                user: {\n                  ...fetchMoreResult.user,\n                  userFollows: update({\n                    prev: prev.user.userFollows,\n                    fetched: fetchMoreResult.user.userFollows\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(\n    () => ({\n      followedUsersPage\n    }),\n    [followedUsersPage]\n  );\n};\n","import * as Types from '../../graphql/types.generated';\n\nimport { UserPageUserDataFragment } from '../../HOC/pages/user/UserPage.generated';\nimport gql from 'graphql-tag';\nimport { UserPageUserDataFragmentDoc } from '../../HOC/pages/user/UserPage.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type UserDataQueryVariables = {\n  userId: Types.Scalars['String']\n};\n\n\nexport type UserDataQuery = (\n  { __typename: 'RootQueryType' }\n  & { user: Types.Maybe<(\n    { __typename: 'User' }\n    & UserPageUserDataFragment\n  )> }\n);\n\n\nexport const UserDataDocument = gql`\n    query userData($userId: String!) {\n  user(userId: $userId) {\n    ...UserPageUserData\n  }\n}\n    ${UserPageUserDataFragmentDoc}`;\n\n/**\n * __useUserDataQuery__\n *\n * To run a query within a React component, call `useUserDataQuery` and pass it any options that fit your needs.\n * When your component renders, `useUserDataQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useUserDataQuery({\n *   variables: {\n *      userId: // value for 'userId'\n *   },\n * });\n */\nexport function useUserDataQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<UserDataQuery, UserDataQueryVariables>) {\n        return ApolloReactHooks.useQuery<UserDataQuery, UserDataQueryVariables>(UserDataDocument, baseOptions);\n      }\nexport function useUserDataLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<UserDataQuery, UserDataQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<UserDataQuery, UserDataQueryVariables>(UserDataDocument, baseOptions);\n        }\nexport type UserDataQueryHookResult = ReturnType<typeof useUserDataQuery>;\nexport type UserDataLazyQueryHookResult = ReturnType<typeof useUserDataLazyQuery>;\nexport type UserDataQueryResult = ApolloReactCommon.QueryResult<UserDataQuery, UserDataQueryVariables>;\n\n\nexport interface UserDataQueryOperation {\n  operationName: 'userData'\n  result: UserDataQuery\n  variables: UserDataQueryVariables\n  type: 'query'\n}\nexport const UserDataQueryName:UserDataQueryOperation['operationName'] = 'userData'\n\nexport const UserDataQueryRefetch = (\n  variables:UserDataQueryVariables, \n  context?:any\n)=>({\n  query:UserDataDocument,\n  variables,\n  context\n})\n      \n","import { Trans } from '@lingui/macro';\nimport React, { FC } from 'react';\nimport { Flag, MapPin, MoreVertical } from 'react-feather';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\n// import { NavLink } from 'react-router-dom';\nimport { MDComment } from 'ui/elements/Layout/comment';\nimport { Dropdown, DropdownItem } from 'ui/modules/Dropdown';\nimport styled from 'ui/themes/styled';\n\nexport enum Status {\n  Loading,\n  Loaded\n}\n\nexport interface Loading {\n  status: Status.Loading;\n}\nexport interface Loaded {\n  status: Status.Loaded;\n  me: boolean;\n  image: string;\n  icon: string;\n  name: string;\n  isFlagged: boolean;\n  displayUsername: string;\n  location: string;\n  summary: string;\n}\nexport interface LoadedMe extends Loaded {\n  me: true;\n  isAdmin: boolean;\n}\nexport interface LoadedOther extends Loaded {\n  me: false;\n  following: boolean;\n  toggleFollowFormik: FormikHook<{}>;\n  isOpenDropdown: boolean;\n  toggleDropdown(): unknown;\n  flag(): any;\n}\nexport type Props = LoadedMe | LoadedOther | Loading;\n\nexport const HeroUser: FC<Props> = props => {\n  if (props.status === Status.Loading) {\n    return null;\n  }\n\n  return (\n    <ProfileBox p={1}>\n      <Hero>\n        <HeroBg src={props.image} />\n        <FlexProfile>\n          <WrapperHero>\n            <Img\n              style={{\n                backgroundImage: `url(\"${props.icon}\")`\n              }}\n            />\n          </WrapperHero>\n          <HeroAction mr={2}>\n            {props.me ? (\n              <></>\n            ) : (\n              <>\n                <Button\n                  mr={2}\n                  variant={props.following ? 'danger' : 'primary'}\n                  isSubmitting={props.toggleFollowFormik.isSubmitting}\n                  isDisabled={props.toggleFollowFormik.isSubmitting}\n                  onClick={props.toggleFollowFormik.submitForm}\n                >\n                  {props.following ? <Trans>Unfollow</Trans> : <Trans>Follow</Trans>}\n                </Button>\n                <More>\n                  <MoreVertical size={20} onClick={props.toggleDropdown} />\n                  {props.isOpenDropdown && (\n                    <RightDd>\n                      <Dropdown orientation={'bottom'} close={props.toggleDropdown}>\n                        <DropdownItem onClick={props.flag}>\n                          <Flag size={20} color={'rgb(101, 119, 134)'} />\n                          <Text sx={{ flex: 1 }} ml={2}>\n                            {!props.isFlagged ? (\n                              <Trans>Flag this user</Trans>\n                            ) : (\n                              <Trans>Unflag this user</Trans>\n                            )}{' '}\n                          </Text>\n                        </DropdownItem>\n                      </Dropdown>\n                    </RightDd>\n                  )}\n                </More>\n              </>\n            )}\n          </HeroAction>\n        </FlexProfile>\n        <HeroInfo ml={3}>\n          <HeroTitle sx={{ fontSize: '18px' }} mt={2} variant=\"heading\" fontWeight={'bold'}>\n            {props.name}\n          </HeroTitle>\n          <Username mt={1} fontSize={2}>\n            @{props.displayUsername}\n            {props.me && props.isAdmin && <AdminBadge ml={2}>Admin</AdminBadge>}\n          </Username>\n\n          <Box mt={2}>\n            <MDComment content={props.summary} />\n          </Box>\n          {props.location ? (\n            <Location mt={2}>\n              <span>\n                <MapPin strokeWidth={1} size={20} />\n              </span>\n              {props.location}\n            </Location>\n          ) : null}\n        </HeroInfo>\n      </Hero>\n    </ProfileBox>\n  );\n};\n\nconst RightDd = styled(Box)`\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n`;\n\nconst AdminBadge = styled(Box)`\n  padding: 1px 8px;\n  border: 1px solid ${props => props.theme.colors.primary};\n  border-radius: 2px;\n  color: ${props => props.theme.colors.primary};\n  display: inline-block;\n`;\n\nconst More = styled(Box)`\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ${props => props.theme.colors.border};\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ${props => props.theme.colors.mediumdark};\n  }\n`;\n\nconst HeroAction = styled(Flex)`\n  align-items: center;\n`;\n\nconst HeroTitle = styled(Text)`\n  color: ${props => props.theme.colors.darker};\n`;\n\nconst FlexProfile = styled(Flex)`\n  justify-content: space-between;\n  ${media.lessThan('860px')`\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n`};\n`;\n\nconst ProfileBox = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  padding-bottom: 16px;\n`;\n\nconst Username = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  font-size: 14px;\n`;\n\nconst Location = styled(Flex)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  line-height: 26px;\n  font-size: 14px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ${props => props.theme.colors.mediumdark};\n      vertical-align: text-bottom;\n    }\n    .--rtl & {\n      margin-left: 8px;\n      margin-right: 0px;\n    }\n  }\n`;\n\nconst HeroBg = styled.div<{ src: string }>`\n  height: 250px;\n  margin: -4px;\n  background: ${props => props.theme.colors.light};\n  background-image: url(\"${props => (props.src ? props.src : props.theme.colors.light)}\");\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  position: relative;\n`;\n\nconst WrapperHero = styled.div`\n  padding: 24px;\n  padding-top: 0;\n  z-index: 9999;\n  position: relative;\n  margin-top: -60px;\n  padding-bottom: 0;\n`;\n\nconst Img = styled.div`\n  width: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: ${props => props.theme.colors.light};\n  border: 3px solid ${props => props.theme.colors.appInverse};\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 16px;\n`;\n\nconst Hero = styled.div`\n  width: 100%;\n  position: relative;\n  border-radius: 6px;\n`;\n\nconst HeroInfo = styled(Box)`\n  & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n`;\n","import { User } from 'graphql/types.generated';\nimport { useMemo } from 'react';\nimport * as GQL from './useUser.generated';\nimport { useMe } from 'fe/session/useMe';\nimport { useFollowContext } from 'fe/context/follow/useFollowContext';\n\nexport const useUser = (userId: User['id']) => {\n  const userQ = GQL.useUserDataQuery({ variables: { userId } });\n  const { me, isAdmin } = useMe();\n  const user = userQ.data?.user;\n  const { toggleFollow } = useFollowContext(user);\n\n  return useMemo(() => {\n    const user = userQ.data?.user;\n    const totalCollections = user?.collectionFollows?.totalCount;\n    const totalCommunities = user?.communityFollows?.totalCount;\n    const totalUsers = user?.userFollows?.totalCount;\n    const totalActivities = user?.outbox?.totalCount;\n    const isMe = !!(me && user && me.user.id === user.id);\n\n    return {\n      isMe,\n      isAdmin,\n      user,\n      toggleFollow,\n      totalCollections,\n      totalCommunities,\n      totalUsers,\n      totalActivities\n    };\n  }, [me, userQ, toggleFollow, isAdmin]);\n};\n","import { useUser } from 'fe/user/useUser';\nimport { useFormik } from 'formik';\nimport { User } from 'graphql/types.generated';\nimport { useNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport React, { FC, useMemo, useReducer } from 'react';\nimport { HeroUser as HeroUserUI, Loaded, LoadedOther, Props, Status } from 'ui/modules/HeroUser';\nimport Modal from 'ui/modules/Modal';\nimport { FlagModalHOC } from '../FlagModal/flagModalHOC';\n\nexport interface HeroUser {\n  userId: User['id'];\n}\nexport const HeroUser: FC<HeroUser> = ({ userId }) => {\n  const { user, isAdmin, isMe, toggleFollow } = useUser(userId);\n  const [isOpenDropdown, toggleDropdown] = useReducer(is => !is, false);\n\n  const toggleFollowFormik = useFormik({\n    initialValues: {},\n    onSubmit: toggleFollow\n  });\n  const notifiedMustLogin = useNotifyMustLogin();\n\n  const [isFlagging, toggleFlagging] = useReducer(is => {\n    return notifiedMustLogin() ? false : !is;\n  }, false);\n\n  const FlagModal =\n    user && isFlagging ? (\n      <Modal closeModal={toggleFlagging}>\n        <FlagModalHOC done={toggleFlagging} ctx={user} />\n      </Modal>\n    ) : null;\n  const userHeroProps = useMemo<Props>(() => {\n    if (!user) {\n      return {\n        status: Status.Loading\n      };\n    }\n\n    const loadedProps: Omit<Loaded, 'me'> = {\n      status: Status.Loaded,\n      displayUsername: user.displayUsername,\n      icon: user.icon?.url || '',\n      image: user.image?.url || '',\n      location: user.location || '',\n      name: user.name || '',\n      summary: user.summary || '',\n      isFlagged: !!user.myFlag\n    };\n\n    if (isMe) {\n      const props: Props = {\n        isAdmin: isAdmin,\n        me: isMe,\n        ...loadedProps\n      };\n\n      return props;\n    } else {\n      const props: LoadedOther = {\n        flag: toggleFlagging,\n        me: isMe,\n        following: !!user.myFollow,\n        isOpenDropdown,\n        toggleDropdown,\n        toggleFollowFormik,\n        ...loadedProps\n      };\n\n      return props;\n    }\n  }, [isMe, user, toggleFollowFormik, isAdmin, isOpenDropdown]);\n\n  return (\n    <>\n      {FlagModal}\n      <HeroUserUI {...userHeroProps} />\n    </>\n  );\n};\n","import { ellipsis } from 'polished';\nimport * as React from 'react';\nimport { Link } from 'react-feather';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\n// import { Header } from 'ui/modules/Header';\nimport { FormikHook } from 'ui/@types/types';\nimport {\n  CollectionsWrapper,\n  HomeBox,\n  List,\n  MainContainer,\n  MenuList,\n  ObjectsList,\n  Wrapper,\n  WrapperCont\n} from 'ui/elements/Layout';\nimport { Nav, NavItem, Panel, PanelTitle, WrapperPanel } from 'ui/elements/Panel';\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport styled from 'ui/themes/styled';\nimport { ReactElement } from 'react';\n\nexport interface Props {\n  ActivityBoxes: ReactElement;\n  LikesBoxes: ReactElement; // FIX ME remove ? after add LikesBoxes at HOC\n  HeroUserBox: ReactElement;\n  CommunityBoxes: ReactElement;\n  CollectionsBoxes: ReactElement;\n  UserBoxes: ReactElement;\n  basePath: string;\n  totalCommunities: string;\n  totalActivities: string;\n  totalCollections: string;\n  totalUsers: string;\n  userLink: string;\n  userName: string;\n  loadMoreActivities: FormikHook | null;\n  loadMoreLikes: FormikHook | null;\n  loadMoreCommunities: FormikHook | null;\n  loadMoreCollections: FormikHook | null;\n  loadMoreFollowing: FormikHook | null;\n}\n\nexport const User: React.FC<Props> = ({\n  HeroUserBox,\n  LikesBoxes,\n  ActivityBoxes,\n  CommunityBoxes,\n  CollectionsBoxes,\n  UserBoxes,\n  basePath,\n  totalCommunities,\n  userLink,\n  totalCollections,\n  totalUsers,\n  userName,\n  loadMoreActivities,\n  loadMoreLikes,\n  loadMoreCommunities,\n  loadMoreCollections,\n  loadMoreFollowing\n}) => {\n  return (\n    <MainContainer>\n      <HomeBox>\n        <WrapperCont>\n          <Wrapper>\n            <Box mb={2}>\n              {/* <Header name={userName} /> */}\n              {HeroUserBox}\n              <Menu\n                basePath={basePath}\n                totalCommunities={totalCommunities}\n                totalCollections={totalCollections}\n                totalUsers={totalUsers}\n              />\n            </Box>\n            <Switch>\n              <Route exact path={`${basePath}/`}>\n                <List>{ActivityBoxes}</List>\n                {loadMoreActivities && <LoadMore LoadMoreFormik={loadMoreActivities} />}\n              </Route>\n              <Route exact path={`${basePath}/starred`}>\n                <List>{LikesBoxes}</List>\n                {loadMoreLikes && <LoadMore LoadMoreFormik={loadMoreLikes} />}\n              </Route>\n              <Route path={`${basePath}/communities`}>\n                <ObjectsList>{CommunityBoxes}</ObjectsList>\n                {loadMoreCommunities && <LoadMore LoadMoreFormik={loadMoreCommunities} />}\n              </Route>\n              <Route path={`${basePath}/collections`}>\n                <ObjectsList>\n                  <CollectionsWrapper>{CollectionsBoxes}</CollectionsWrapper>\n                </ObjectsList>\n                {loadMoreCollections && <LoadMore LoadMoreFormik={loadMoreCollections} />}\n              </Route>\n              {/* <Route path={`${basePath}/following`}>\n                {UserBoxes}\n                {loadMoreFollowing ? (\n                  <LoadMore LoadMoreFormik={loadMoreFollowing} />\n                ) : null}{' '} */}\n              {/* FIX ME after add LoadMoreFormik */}\n              {/* </Route> */}\n            </Switch>\n          </Wrapper>\n        </WrapperCont>\n      </HomeBox>\n      <WrapperPanel>\n        {userLink.length > 0 ? (\n          <Panel>\n            <PanelTitle fontSize={0} fontWeight={'bold'}>\n              Relevant links\n            </PanelTitle>\n            <Nav>\n              <NavItem fontSize={1}>\n                <Flex>\n                  <Link size={20} />{' '}\n                  <a href={userLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                    <TextLink ml={2} flex={1}>\n                      {userLink}\n                    </TextLink>\n                  </a>\n                </Flex>\n              </NavItem>\n            </Nav>\n          </Panel>\n        ) : null}\n      </WrapperPanel>\n    </MainContainer>\n  );\n};\n\nconst Menu = ({\n  basePath,\n  totalCommunities,\n  totalCollections,\n  totalUsers\n}: {\n  basePath: string;\n  totalCommunities: string;\n  totalCollections: string;\n  totalUsers: string;\n}) => (\n  <MenuList p={3} pt={3}>\n    <NavLink exact to={`${basePath}`}>\n      Recent activity\n    </NavLink>\n    <NavLink exact to={`${basePath}/starred`}>\n      Starred\n    </NavLink>\n    <NavLink exact to={`${basePath}/communities`}>\n      {totalCommunities} communities\n    </NavLink>\n    <NavLink exact to={`${basePath}/collections`}>\n      {totalCollections} collections\n    </NavLink>\n    {/* <NavLink exact to={`${basePath}/following`}>\n      {totalUsers} following\n    </NavLink> */}\n  </MenuList>\n);\n\nconst TextLink = styled(Text)`\n  ${ellipsis('250px')};\n  color: ${props => props.theme.colors.dark};\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n","import { useUserOutboxActivities } from 'fe/activities/outbox/user/useUserOutboxActivities';\nimport { useUserFollowedCollections } from 'fe/collection/user/useUserFollowedCollections';\nimport { UserFollowedCollectionFragment } from 'fe/collection/user/useUserFollowedCollections.generated';\nimport { useUserFollowedCommunities } from 'fe/community/user/useUserFollowedCommunities';\nimport { UserFollowedCommunityFragment } from 'fe/community/user/useUserFollowedCommunities.generated';\nimport { getActivityActor } from 'fe/lib/activity/getActivityActor';\nimport { getEventStringByContext } from 'fe/lib/activity/getActivityEventString';\nimport { getCommunityInfoStrings } from 'fe/lib/activity/getContextCommunityInfo';\nimport { useUserLikes } from 'fe/likes/user/useUserLikes';\nimport { useUserFollowedUsers } from 'fe/user/followed/user/useUserFollowedUsers';\nimport { UserFollowedUserFragment } from 'fe/user/followed/user/useUserFollowedUsers.generated';\nimport { useUser } from 'fe/user/useUser';\nimport { ActivityVerb, User } from 'graphql/types.generated';\nimport { HeroUser } from 'HOC/modules/HeroUser/HeroUser';\nimport { ActivityPreviewHOC } from 'HOC/modules/previews/activity/ActivityPreview';\nimport { PreviewComponent } from 'HOC/modules/previews/activity/PreviewComponent';\nimport { CollectionPreviewHOC } from 'HOC/modules/previews/collection/CollectionPreview';\nimport { LikedCommentPreviewHOC } from 'HOC/modules/previews/commentLiked/CommentLikedPreview';\nimport { CommunityPreviewHOC } from 'HOC/modules/previews/community/CommunityPreview';\nimport { UserPreviewHOC } from 'HOC/modules/previews/user/UserPreview';\nimport React, { FC, useMemo } from 'react';\nimport { Box } from 'rebass';\nimport { ActivityPreview, Status, Props as ActivityPreviewProps } from 'ui/modules/ActivityPreview';\nimport { Props, User as UserPageUI } from 'ui/pages/user';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\nexport interface UserPage {\n  userId: User['id'];\n  tab: UserPageTab;\n  basePath: string;\n}\nexport enum UserPageTab {\n  Starred,\n  Communities,\n  Collections,\n  Following,\n  Activities\n}\n\nconst userStarredPageTitle = t`User {name} - Starred`;\nconst userCommunitiesPageTitle = t`User {name} - Communities`;\nconst userCollectionsPageTitle = t`User {name} - Collections`;\nconst userFollowingPageTitle = t`User {name} - Following`;\nconst userActivitiesPageTitle = t`User {name} - Activities`;\n\nexport const UserPage: FC<UserPage> = ({ userId, basePath, tab }) => {\n  const userInfo = useUser(userId);\n\n  const userPageTitle =\n    tab === UserPageTab.Starred\n      ? userStarredPageTitle\n      : tab === UserPageTab.Communities\n      ? userCommunitiesPageTitle\n      : tab === UserPageTab.Collections\n      ? userCollectionsPageTitle\n      : tab === UserPageTab.Following\n      ? userFollowingPageTitle\n      : tab === UserPageTab.Activities\n      ? userActivitiesPageTitle\n      : userActivitiesPageTitle; //never\n  usePageTitle(!!userInfo?.user?.name && userPageTitle, userInfo.user);\n\n  const { likesPage } = useUserLikes(userId);\n  const [loadMoreLikes] = likesPage.formiks;\n\n  const { activitiesPage } = useUserOutboxActivities(userId);\n  const [loadMoreActivities] = activitiesPage.formiks;\n\n  const { followedCollectionsPage } = useUserFollowedCollections(userId);\n  const [loadMoreCollections] = followedCollectionsPage.formiks;\n\n  const { followedCommunitiesPage } = useUserFollowedCommunities(userId);\n  const [loadMoreCommunities] = followedCommunitiesPage.formiks;\n\n  const { followedUsersPage } = useUserFollowedUsers(userId);\n  const [loadMoreFollowing] = followedUsersPage.formiks;\n\n  const userPageProps = useMemo<Props>(() => {\n    const { totalActivities, totalCollections, totalCommunities, totalUsers } = userInfo;\n    const LikesBoxes = (\n      <>\n        {likesPage.edges.map(like => {\n          const { communityLink, communityName } = getCommunityInfoStrings(like.context);\n          const actor = userInfo.user ? getActivityActor(userInfo.user) : null;\n          const activityContext = like;\n          const event = getEventStringByContext(activityContext, ActivityVerb.Created);\n          const preview =\n            like.context.__typename === 'Comment' ? (\n              <LikedCommentPreviewHOC key={like.id} commentId={like.context.id} />\n            ) : (\n              <PreviewComponent context={activityContext} />\n            );\n          const activityProps: ActivityPreviewProps = {\n            actor,\n            communityLink,\n            communityName,\n            createdAt: like.createdAt,\n            event,\n            status: Status.Loaded,\n            preview\n          };\n          // console.log(activityProps, likesPage);\n          return <ActivityPreview {...activityProps} key={activityContext.id} />;\n        })}\n      </>\n    );\n    const ActivityBoxes = (\n      <>\n        {activitiesPage.edges.map(activity => (\n          <ActivityPreviewHOC activityId={activity.id} key={activity.id} />\n        ))}\n      </>\n    );\n    const CollectionsBoxes = (\n      <>\n        {followedCollectionsPage.edges\n          .map(follow => follow.context)\n          .filter(\n            (context): context is UserFollowedCollectionFragment =>\n              context.__typename === 'Collection'\n          )\n          .map(followedCollection => (\n            <Box m={2} mb={0} key={followedCollection.id}>\n              <CollectionPreviewHOC\n                collectionId={followedCollection.id}\n                key={followedCollection.id}\n              />\n            </Box>\n          ))}\n      </>\n    );\n    const CommunityBoxes = (\n      <>\n        {followedCommunitiesPage.edges\n          .map(follow => follow.context)\n          .filter(\n            (context): context is UserFollowedCommunityFragment =>\n              context.__typename === 'Community'\n          )\n          .map(followedCommunity => (\n            <CommunityPreviewHOC communityId={followedCommunity.id} key={followedCommunity.id} />\n          ))}\n      </>\n    );\n\n    const UserBoxes = (\n      <>\n        {followedUsersPage.edges\n          .map(follow => follow.context)\n          .filter((context): context is UserFollowedUserFragment => context.__typename === 'User')\n          .map(followedUser => (\n            <UserPreviewHOC userId={followedUser.userId} key={followedUser.userId} />\n          ))}\n      </>\n    );\n\n    const HeroUserBox = <HeroUser userId={userId} />;\n\n    const props: Props = {\n      basePath,\n      ActivityBoxes,\n      LikesBoxes,\n      HeroUserBox,\n      CollectionsBoxes,\n      CommunityBoxes,\n      UserBoxes,\n      userName: userInfo.user?.name || '',\n      totalActivities: `${totalActivities || '0'}`,\n      totalCollections: `${totalCollections || '0'}`,\n      totalCommunities: `${totalCommunities || '0'}`,\n      totalUsers: `${totalUsers || '0'}`,\n      userLink: userInfo.user?.website || '',\n      loadMoreActivities,\n      loadMoreCollections,\n      loadMoreCommunities,\n      loadMoreFollowing,\n      loadMoreLikes\n    };\n    return props;\n  }, [\n    userInfo,\n    likesPage,\n    activitiesPage.edges,\n    followedCollectionsPage.edges,\n    followedCommunitiesPage.edges,\n    followedUsersPage.edges,\n    userId,\n    basePath,\n    loadMoreActivities,\n    loadMoreCollections,\n    loadMoreCommunities,\n    loadMoreFollowing,\n    loadMoreLikes\n  ]);\n  return <UserPageUI {...userPageProps} />;\n};\n","import React, { FC, useMemo } from 'react';\nimport { UserPage, UserPageTab } from 'HOC/pages/user/UserPage';\nimport { NotFoundHOC } from 'HOC/pages/not-found/NotFound';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\nimport { locationHelper } from './lib/helper';\n\ninterface UserPageRouter {\n  userId: string;\n  tab?: string;\n}\nconst UserPageRouter: FC<RouteComponentProps<UserPageRouter>> = ({ match }) => {\n  const userId = match.params.userId;\n  const maybeTabStr = match.params.tab as Tab;\n  const tab =\n    maybeTabStr === 'starred'\n      ? UserPageTab.Starred\n      : maybeTabStr === 'communities'\n      ? UserPageTab.Communities\n      : maybeTabStr === 'collections'\n      ? UserPageTab.Collections\n      : maybeTabStr === 'following'\n      ? UserPageTab.Following\n      : !maybeTabStr\n      ? UserPageTab.Activities\n      : null;\n\n  const props = useMemo<UserPage | null>(\n    () =>\n      tab === null\n        ? null\n        : {\n            tab,\n            userId,\n            basePath: userLocation.getPath({ tab: undefined, userId }, undefined)\n          },\n    [tab, userId]\n  );\n  if (!props) {\n    return <NotFoundHOC />;\n  }\n  return (\n    <WithSidebarTemplate>\n      <UserPage {...props} />\n    </WithSidebarTemplate>\n  );\n};\n\nexport const UserPageRoute: RouteProps = {\n  exact: true,\n  path: '/user/:userId/:tab(starred|communities|collections|following)?',\n  component: UserPageRouter\n};\n\ntype Tab = undefined | 'starred' | 'communities' | 'collections' | 'following';\ntype Params = {\n  userId: string;\n  tab: Tab;\n};\n\nexport const userLocation = locationHelper<Params, undefined>(UserPageRoute);\n","import React from 'react';\nimport styled from 'ui/themes/styled';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport Avatar from 'ui/elements/Avatar';\n// import { UserPlus } from 'react-feather';\nimport { FormikHook } from 'ui/@types/types';\nimport { NavLink } from 'react-router-dom';\nimport { darken } from 'polished';\n\nexport interface Props {\n  image: string;\n  name: string;\n  username: string;\n  bio: string;\n  profileUrl: string;\n  toggleFollowFormik: FormikHook;\n  isFollowing: boolean;\n  hideActions?: boolean;\n}\n\nexport const User: React.SFC<Props> = ({\n  image,\n  name,\n  username,\n  bio,\n  profileUrl,\n  toggleFollowFormik /* , isFollowing */,\n  hideActions\n}) => (\n  <WrapperLink to={profileUrl}>\n    <WrapperFlex p={3}>\n      <Avatar variant=\"avatar\" src={image} />\n      <Wrapper ml={2}>\n        <Names>\n          <Title variant=\"subhead\">{name}</Title>\n          <Username ml={1}>{username}</Username>\n        </Names>\n        <Box mr={1}>\n          <Text variant=\"text\">{bio}</Text>\n        </Box>\n      </Wrapper>\n      {/* {hideActions ? null : (\n      <Icon>\n        <UserPlus size={20} onClick={toggleFollowFormik.submitForm} />\n      </Icon>\n    )} */}\n    </WrapperFlex>\n  </WrapperLink>\n);\n\nconst WrapperLink = styled(NavLink)`\n  text-decoration: none !important;\n  * {\n    text-decoration: none !important;\n  }\n`;\nconst WrapperFlex = styled(Flex)`\n  border: ${props => props.theme.colors.border};\n  border-radius: 4px;\n  &:hover {\n    background: ${props => darken('0.05', props.theme.colors.mediumlight)};\n  }\n  * {\n    text-decoration: none;\n  }\n`;\n\nconst Title = styled(Text)`\n  color: ${props => props.theme.colors.dark};\n  text-decoration: none !important;\n`;\n\n// const Icon = styled(Box)`\n//   cursor: pointer;\n//   height: 40px;\n//   width: 40px;\n//   border-radius: 40px;\n//   display: flex;\n//   align-items: center;\n//   &:hover {\n//     background: ${props => props.theme.colors.lighter};\n//     svg {\n//       stroke: ${props => props.theme.colors.primary};\n//     }\n//   }\n//   svg {\n//     stroke: ${props => props.theme.colors.medium};\n//     margin: 0 auto;\n//   }\n// `;\n\nconst Wrapper = styled(Box)`\n  flex: 1;\n`;\nconst Username = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  flex: 1;\n`;\n\nconst Names = styled(Flex)`\n  align-items: center;\n`;\n","import { useUserPreview } from 'fe/user/preview/useUserPreview';\nimport { useFormik } from 'formik';\nimport { User } from 'graphql/types.generated';\nimport React, { FC, useMemo } from 'react';\nimport { Box } from 'rebass';\nimport { userLocation } from 'routes/UserPageRoute';\nimport { Props as UserPreviewProps, User as UserPreviewUI } from 'ui/modules/Previews/User';\nexport interface Props {\n  userId: User['id'];\n  flagged?: boolean;\n}\n\nexport const UserPreviewHOC: FC<Props> = ({ userId, flagged }) => {\n  const { user, toggleFollow } = useUserPreview(userId);\n\n  const toggleFollowFormik = useFormik({\n    initialValues: {},\n    onSubmit: toggleFollow\n  });\n  const userPreviewProps = useMemo<UserPreviewProps | null>(() => {\n    if (!user) {\n      return null;\n    }\n\n    const hideActions = flagged ? true : false;\n\n    const { userName, displayUsername, image, icon, summary, myFollow } = user;\n\n    const props: UserPreviewProps = {\n      image: icon?.url || image?.url || '',\n      name: userName || '',\n      username: displayUsername,\n      bio: summary || '',\n      isFollowing: !!myFollow,\n      toggleFollowFormik,\n      profileUrl: userLocation.getPath({ userId: user.id, tab: undefined }, undefined),\n      hideActions: hideActions\n    };\n    return props;\n  }, [user, toggleFollowFormik, flagged]);\n\n  return (\n    userPreviewProps && (\n      <Box px={2} py={1} pb={0}>\n        <UserPreviewUI {...userPreviewProps} />\n      </Box>\n    )\n  );\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\n\nexport type ShareLinkWebMetaFragment = (\n  { __typename: 'WebMetadata' }\n  & Pick<Types.WebMetadata, 'image' | 'summary' | 'title' | 'url'>\n);\n\nexport const ShareLinkWebMetaFragmentDoc = gql`\n    fragment ShareLinkWebMeta on WebMetadata {\n  image\n  summary\n  title\n  url\n}\n    `;\n","import * as Types from '../../../graphql/types.generated';\n\nimport { ShareLinkWebMetaFragment } from '../../../HOC/modules/ShareLink/shareLink.generated';\nimport gql from 'graphql-tag';\nimport { ShareLinkWebMetaFragmentDoc } from '../../../HOC/modules/ShareLink/shareLink.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type ShareLinkFetchWebMetaMutationVariables = {\n  url: Types.Scalars['String']\n};\n\n\nexport type ShareLinkFetchWebMetaMutation = (\n  { __typename: 'RootMutationType' }\n  & { fetchWebMetadata: Types.Maybe<(\n    { __typename: 'WebMetadata' }\n    & ShareLinkWebMetaFragment\n  )> }\n);\n\n\nexport const ShareLinkFetchWebMetaDocument = gql`\n    mutation shareLinkFetchWebMeta($url: String!) {\n  fetchWebMetadata(url: $url) {\n    ...ShareLinkWebMeta\n  }\n}\n    ${ShareLinkWebMetaFragmentDoc}`;\nexport type ShareLinkFetchWebMetaMutationFn = ApolloReactCommon.MutationFunction<ShareLinkFetchWebMetaMutation, ShareLinkFetchWebMetaMutationVariables>;\n\n/**\n * __useShareLinkFetchWebMetaMutation__\n *\n * To run a mutation, you first call `useShareLinkFetchWebMetaMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useShareLinkFetchWebMetaMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [shareLinkFetchWebMetaMutation, { data, loading, error }] = useShareLinkFetchWebMetaMutation({\n *   variables: {\n *      url: // value for 'url'\n *   },\n * });\n */\nexport function useShareLinkFetchWebMetaMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<ShareLinkFetchWebMetaMutation, ShareLinkFetchWebMetaMutationVariables>) {\n        return ApolloReactHooks.useMutation<ShareLinkFetchWebMetaMutation, ShareLinkFetchWebMetaMutationVariables>(ShareLinkFetchWebMetaDocument, baseOptions);\n      }\nexport type ShareLinkFetchWebMetaMutationHookResult = ReturnType<typeof useShareLinkFetchWebMetaMutation>;\nexport type ShareLinkFetchWebMetaMutationResult = ApolloReactCommon.MutationResult<ShareLinkFetchWebMetaMutation>;\nexport type ShareLinkFetchWebMetaMutationOptions = ApolloReactCommon.BaseMutationOptions<ShareLinkFetchWebMetaMutation, ShareLinkFetchWebMetaMutationVariables>;\n\n\nexport interface ShareLinkFetchWebMetaMutationOperation {\n  operationName: 'shareLinkFetchWebMeta'\n  result: ShareLinkFetchWebMetaMutation\n  variables: ShareLinkFetchWebMetaMutationVariables\n  type: 'mutation'\n}\nexport const ShareLinkFetchWebMetaMutationName:ShareLinkFetchWebMetaMutationOperation['operationName'] = 'shareLinkFetchWebMeta'\n\nexport const ShareLinkFetchWebMetaMutationRefetch = (\n  variables:ShareLinkFetchWebMetaMutationVariables, \n  context?:any\n)=>({\n  query:ShareLinkFetchWebMetaDocument,\n  variables,\n  context\n})\n      \n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input, Textarea } from '@rebass/forms';\nimport { FormikHook } from 'ui/@types/types';\nimport * as React from 'react';\nimport { Flex, Text, Box } from 'rebass/styled-components';\nimport DropzoneArea from 'ui/modules/DropzoneModal';\nimport Alert from 'ui/elements/Alert';\nimport Button from 'ui/elements/Button';\nimport { clearFix } from 'polished';\nimport media from 'styled-media-query';\nimport styled from 'ui/themes/styled';\n\nimport { Actions, AlertWrapper, Container, ContainerForm, CounterChars } from 'ui/modules/Modal';\n\nconst tt = {\n  placeholders: {\n    name: i18nMark('Type the name of the resource'),\n    summary: i18nMark('Please describe what the resource is about...'),\n    icon: i18nMark('Enter the URL of an icon to represent the resource')\n  }\n};\n\nexport interface Props {\n  formik: FormikHook<ShareResource>;\n  cancel(): any;\n}\n\nexport interface ShareResource {\n  name: string;\n  summary: string;\n  icon: string | File | undefined;\n}\n\nexport const Fetched: React.FC<Props> = ({ cancel, formik }) => {\n  const onIconFileSelected = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, icon: file }),\n    [formik]\n  );\n  const initialIconUrl = 'string' === typeof formik.values.icon ? formik.values.icon : '';\n  return (\n    <ContainerFetched>\n      <form onSubmit={formik.handleSubmit}>\n        <Hero>\n          <Box sx={{ width: '120px', height: '120px' }}>\n            <DropzoneArea\n              initialUrl={initialIconUrl}\n              onFileSelect={onIconFileSelected}\n              filePattern=\"image/*\"\n            />\n          </Box>\n          {/* <Background style={{ backgroundImage: `url(\"${c.icon}\")` }} /> */}\n          <HeroInfo>\n            <Title fontSize={5} fontWeight={'bold'}>\n              <CollectionContainerForm>\n                <Input\n                  placeholder={tt.placeholders.name}\n                  disabled={formik.isSubmitting}\n                  name=\"name\"\n                  value={formik.values.name}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{60 - formik.values.name.length}</CounterChars>\n                {formik.errors.name && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.name}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Title>\n\n            <Description fontSize={2} mt={2}>\n              <CollectionContainerForm>\n                <Textarea\n                  placeholder={tt.placeholders.summary}\n                  disabled={formik.isSubmitting}\n                  name=\"summary\"\n                  value={formik.values.summary}\n                  onChange={formik.handleChange}\n                />\n                <CounterChars>{500 - formik.values.summary.length}</CounterChars>\n                {formik.errors.summary && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.summary}</Alert>\n                  </AlertWrapper>\n                )}\n              </CollectionContainerForm>\n            </Description>\n          </HeroInfo>\n        </Hero>\n\n        <Actions>\n          <Button\n            variant=\"primary\"\n            isSubmitting={formik.isSubmitting}\n            isDisabled={formik.isSubmitting}\n            type=\"submit\"\n            style={{ marginLeft: '10px' }}\n            // onClick={formik.submitForm}\n          >\n            <Trans>Share</Trans>\n          </Button>\n          <Button variant=\"outline\" onClick={cancel}>\n            <Trans>Cancel</Trans>\n          </Button>\n        </Actions>\n      </form>\n    </ContainerFetched>\n  );\n};\n\nconst ContainerFetched = styled(Container)`\n  padding: 8px;\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 4px;\n`;\n\nconst CollectionContainerForm = styled(ContainerForm)`\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n`;\n\nconst Title = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst Description = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n`;\n\nconst HeroInfo = styled.div`\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ${clearFix()};\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ${props => props.theme.colors.mediumdark};\n    ${media.lessThan('medium')`\n      margin-top: 8px;\n    `};\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ${props => props.theme.colors.mediumdark};\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n`;\n\nconst Hero = styled(Flex)`\n  width: 100%;\n  position: relative;\n  ${media.lessThan('medium')`\n  text-align: center;\n  display: block;\n`};\n`;\n\n// const Background = styled.div`\n//   height: 120px;\n//   width: 120px;\n//   border-radius: 4px;\n//   background-size: cover;\n//   background-repeat: no-repeat;\n//   background-color: ${props => props.theme.colors.light};\n//   position: relative;\n//   margin: 0 auto;\n// `;\n\nexport default Fetched;\n","// Add a resource to collection - step 1\n\nimport { i18nMark } from '@lingui/react';\nimport * as React from 'react';\nimport { FormikHook } from 'ui/@types/types';\nimport styled from 'ui/themes/styled';\nimport { Search } from 'react-feather';\nimport { Box } from 'rebass/styled-components';\nimport Loader from 'ui/elements/Loader';\nimport { Input } from '@rebass/forms';\nimport { LocaleContext } from '../../../context/global/localizationCtx';\nimport Alert from 'ui/elements/Alert';\nimport { Fetched, ShareResource } from './fetched';\nconst tt = {\n  placeholders: {\n    url: i18nMark('Enter the URL of the resource'),\n    name: i18nMark('A name or title for the resource'),\n    summary: i18nMark('Please type or copy/paste a summary about the resource...'),\n    submit: i18nMark('Fetch the resource'),\n    image: i18nMark('Enter the URL of an image to represent the resource')\n  }\n};\n\nexport interface Props {\n  FetchLinkFormik: FormikHook<{ fetchUrl: string }>;\n  isFetched: boolean;\n  formik: FormikHook<ShareResource>;\n  cancelFetched(): any;\n}\n\nexport const ShareLink = (props: Props) => {\n  const { i18n } = React.useContext(LocaleContext);\n\n  return (\n    <>\n      <FetchedRow>\n        <Form onSubmit={props.FetchLinkFormik.handleSubmit}>\n          <SearchInput\n            placeholder={i18n._(tt.placeholders.url)}\n            onChange={props.FetchLinkFormik.handleChange}\n            name=\"fetchUrl\"\n            value={props.FetchLinkFormik.values.fetchUrl}\n          />\n          <Span\n            disabled={props.FetchLinkFormik.isSubmitting}\n            type=\"submit\"\n            // onClick={props.FetchLinkFormik.submitForm}\n          >\n            <Search width={18} height={18} strokeWidth={2} />\n          </Span>\n        </Form>\n        {props.FetchLinkFormik.errors.fetchUrl && (\n          <Alert variant=\"negative\">{props.FetchLinkFormik.errors.fetchUrl}</Alert>\n        )}\n      </FetchedRow>\n      {props.FetchLinkFormik.isSubmitting ? (\n        <WrapperLoader>\n          <Loader />\n        </WrapperLoader>\n      ) : null}\n      {props.isFetched ? <Fetched formik={props.formik} cancel={props.cancelFetched} /> : null}\n    </>\n  );\n};\n\nconst Form = styled.form`\n  position: relative;\n`;\n\nconst FetchedRow = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  border-top: ${props => props.theme.colors.border};\n  padding: 16px;\n`;\n\nconst WrapperLoader = styled.div`\n  padding: 10px;\n`;\n\nconst SearchInput = styled(Input)`\n  height: 40px;\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 4px;\n  border: 3px solid ${props => props.theme.colors.medium} !important;\n`;\n\nconst Span = styled.button`\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  border: 0;\n  background: transparent;\n  box-shadow: none;\n  width: 40px;\n  height: 37px;\n  cursor: pointer;\n  color: ${props => props.theme.colors.gray};\n  svg {\n    stroke: ${props => props.theme.colors.secondary} !important;\n  }\n  .--rtl & {\n    left: 2px;\n    right: auto;\n  }\n`;\n","import { useAddResource } from 'fe/resource/add/useAddResource';\nimport { useShareLinkFetchWebMetaMutation } from 'fe/resource/shareLink/useShareLink.generated';\nimport { useFormik } from 'formik';\nimport { TestUrlOrFile } from 'HOC/lib/formik-validations';\nimport React, { FC, useRef } from 'react';\nimport { ShareLink } from 'ui/modules/ShareLink';\nimport { ShareResource } from 'ui/modules/ShareLink/fetched';\nimport * as Yup from 'yup';\nimport { i18n } from 'context/global/localizationCtx';\nimport { DOMAIN_REGEX } from 'mn-constants';\n\nexport const validationSchema = Yup.object<ShareResource>({\n  name: Yup.string()\n    .max(90)\n    .required(),\n  summary: Yup.string().max(1000),\n  icon: Yup.mixed<File | string>().test(...TestUrlOrFile)\n});\n\nexport const shareResourceInitialValues: ShareResource = {\n  name: '',\n  summary: '',\n  icon: ''\n};\nexport const fetchLinkInitialValues = {\n  fetchUrl: ''\n};\n\nexport interface ShareLinkHOC {\n  collectionId: string;\n  done(): any;\n}\n\nexport const ShareLinkHOC: FC<ShareLinkHOC> = ({ done, collectionId }: ShareLinkHOC) => {\n  const { create: createResource } = useAddResource();\n  const [fetchWebMeta, webMetaDataResult] = useShareLinkFetchWebMetaMutation();\n\n  const { current: urlValidationSchema } = useRef(\n    Yup.object<{ fetchUrl: string }>({\n      fetchUrl: Yup.string()\n        .matches(DOMAIN_REGEX)\n        .required(i18n._('url is required'))\n    })\n  );\n\n  const FetchLinkFormik = useFormik<{ fetchUrl: string }>({\n    initialValues: fetchLinkInitialValues,\n    enableReinitialize: true,\n    validationSchema: urlValidationSchema,\n    onSubmit: ({ fetchUrl }) => fetchWebMeta({ variables: { url: fetchUrl } })\n  });\n\n  const webMetaData = webMetaDataResult.data?.fetchWebMetadata;\n  const ShareLinkFormik = useFormik<ShareResource>({\n    initialValues: webMetaData\n      ? {\n          icon: webMetaData.image || '',\n          name: webMetaData.title || '',\n          summary: webMetaData.summary || ''\n        }\n      : shareResourceInitialValues,\n    validationSchema,\n    enableReinitialize: true,\n    onSubmit: ({ icon, name, summary }) => {\n      const url = webMetaData?.url || FetchLinkFormik.values.fetchUrl;\n      if (!url) {\n        return;\n      }\n      return createResource({\n        collectionId: collectionId,\n        content: url,\n        icon,\n        resource: {\n          name: name,\n          summary: summary\n        }\n      }).then(done);\n    }\n  });\n\n  return (\n    <ShareLink\n      FetchLinkFormik={FetchLinkFormik}\n      cancelFetched={done}\n      formik={ShareLinkFormik}\n      isFetched={!!webMetaData}\n    />\n  );\n};\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { ReactElement } from 'react';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport { Flex, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\nimport {\n  HomeBox,\n  // List,\n  MainContainer,\n  MenuList,\n  ObjectsList,\n  Wrapper,\n  WrapperCont\n} from 'ui/elements/Layout';\nimport { WrapperPanel } from 'ui/elements/Panel';\n// import { Header } from 'ui/modules/Header';\nimport { LoadMore } from 'ui/modules/Loadmore';\n// import { SidePanel } from 'ui/modules/SidePanel';\nimport styled from 'ui/themes/styled';\nimport { HeaderWrapper } from '../thread';\nimport { Box } from 'rebass';\n\nexport interface Props {\n  Resources: ReactElement[];\n  HeroCollection: ReactElement;\n  Followers: ReactElement[];\n  ShareLink: null | ReactElement;\n  UploadResourcePanel: null | ReactElement;\n  shareLink(): unknown;\n  upload(): unknown;\n  tabPaths: {\n    resources: string;\n    followers: string;\n  };\n  loadMoreResources: FormikHook | null;\n  loadMoreFollowers: FormikHook | null;\n  isCommunityMember: boolean;\n  communityId: string;\n  communityName: string;\n  communityIcon: string;\n}\n\nexport const Collection: React.FC<Props> = ({\n  HeroCollection,\n  ShareLink,\n  UploadResourcePanel,\n  Followers,\n  Resources,\n  tabPaths,\n  loadMoreResources,\n  loadMoreFollowers,\n  isCommunityMember,\n  communityId,\n  communityName,\n  communityIcon,\n  shareLink,\n  upload\n}) => {\n  return (\n    <MainContainer>\n      <HomeBox>\n        <WrapperCont>\n          <Wrapper>\n            {/* <Header name={collectionName} /> */}\n            {HeroCollection}\n            <Menu tabPaths={tabPaths} />\n            <Switch>\n              <Route path={tabPaths.followers}>\n                <>\n                  <ObjectsList>{Followers}</ObjectsList>\n                  {loadMoreFollowers && <LoadMore LoadMoreFormik={loadMoreFollowers} />}\n                </>\n              </Route>\n              <Route exact path={tabPaths.resources}>\n                <>\n                  {isCommunityMember ? (\n                    <WrapButton p={3}>\n                      <Button mr={2} onClick={shareLink} variant=\"outline\">\n                        <Trans>Share link</Trans>\n                      </Button>\n                      <Button onClick={upload} variant=\"outline\">\n                        <Trans>Add new resource</Trans>\n                      </Button>\n                    </WrapButton>\n                  ) : null}\n                  {ShareLink}\n                  {UploadResourcePanel}\n                  <ObjectsList>\n                    {Resources.map(Resource => (\n                      <Box mx={3} my={2} mb={3} key={Resource.key || ''}>\n                        {Resource}\n                      </Box>\n                    ))}\n                  </ObjectsList>\n                  {loadMoreResources && <LoadMore LoadMoreFormik={loadMoreResources} />}\n                </>\n              </Route>\n            </Switch>\n          </Wrapper>\n        </WrapperCont>\n      </HomeBox>\n      <WrapperPanel>\n        <TitleSection mb={2} variant=\"suptitle\">\n          <Trans>Community</Trans>\n        </TitleSection>\n        <HeaderWrapper id={communityId} name={communityName} icon={communityIcon} />\n        {/* <SidePanel /> */}\n      </WrapperPanel>\n    </MainContainer>\n  );\n};\nexport default Collection;\n\nconst TitleSection = styled(Text)`\n  text-transform: capitalize;\n`;\n\n// const White = styled(Box)`\n//   background: ${props => props.theme.colors.appInverse};\n// `;\n\n// const FollowersMenu = ({ basePath }: { basePath: string }) => (\n//   <MenuList m={2} p={2} pt={0}>\n//     <NavLink exact to={`${basePath}`}>\n//       Followers\n//     </NavLink>\n//   </MenuList>\n// );\n\nconst Menu: React.FC<{ tabPaths: Props['tabPaths'] }> = ({ tabPaths }) => (\n  <MenuList p={3} pt={3}>\n    {/* <NavLink exact to={`${basePath}`}>\n      Recent activity\n    </NavLink> */}\n    <NavLink exact to={tabPaths.resources}>\n      <Trans>Resources</Trans>\n    </NavLink>\n    <NavLink exact to={tabPaths.followers}>\n      <Trans>Followers</Trans>\n    </NavLink>\n  </MenuList>\n);\n\nconst WrapButton = styled(Flex)`\n  background: ${props => props.theme.colors.appInverse};\n  button {\n    width: 100%;\n    height: 50px;\n  }\n`;\n","import { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\nimport { useCollection } from 'fe/collection/useCollection';\nimport { useCollectionResources } from 'fe/resource/collection/useCollectionResources';\nimport { useCollectionFollowers } from 'fe/user/followers/collection/useCollectionFollowers';\nimport { Collection } from 'graphql/types.generated';\nimport { useNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { AddResourceHOC } from 'HOC/modules/AddResource/addResourceHOC';\nimport { HeroCollectionHOC } from 'HOC/modules/HeroCollection/HeroCollection';\nimport { ResourcePreviewHOC } from 'HOC/modules/previews/resource/ResourcePreview';\nimport { UserPreviewHOC } from 'HOC/modules/previews/user/UserPreview';\nimport { ShareLinkHOC } from 'HOC/modules/ShareLink/shareLinkHOC';\nimport React, { FC, ReactElement, useCallback, useMemo, useState } from 'react';\nimport CollectionPageUI, { Props as CollectionPageProps } from 'ui/pages/collection';\nimport { collectionLocation } from 'routes/CollectionPageRoute';\n\nexport enum CollectionPageTab {\n  // Activities,\n  Resources,\n  Followers\n}\nexport interface CollectionPage {\n  collectionId: Collection['id'];\n  tab: CollectionPageTab;\n  basePath: string;\n}\nconst collectionPageFollowersTitle = t`Collection {name} - Followers`;\nconst collectionPageResourcesTitle = t`Collection {name} - Resources`;\n\ntype OpenPanel = 'share' | 'upload';\n\nexport const CollectionPage: FC<CollectionPage> = props => {\n  const [openPanel, setOpenPanel] = useState<OpenPanel>();\n  const closePanel = useCallback(() => setOpenPanel(undefined), []);\n  const { collectionId, basePath, tab } = props;\n  const { collection, isCommunityMember } = useCollection(props.collectionId);\n  const collectionPageTitle =\n    tab === CollectionPageTab.Followers\n      ? collectionPageFollowersTitle\n      : CollectionPageTab.Resources\n      ? collectionPageResourcesTitle\n      : collectionPageResourcesTitle; //never;\n\n  usePageTitle(!!collection?.name && collectionPageTitle, collection);\n\n  const { collectionFollowersPage } = useCollectionFollowers(props.collectionId);\n  const [loadMoreFollowers] = collectionFollowersPage.formiks;\n\n  const { resourcesPage } = useCollectionResources(props.collectionId);\n  const [loadMoreResources] = resourcesPage.formiks;\n\n  const notifyNotLogged = useNotifyMustLogin();\n\n  const HeroCollection = <HeroCollectionHOC basePath={basePath} collectionId={collectionId} />;\n\n  const Resources = resourcesPage.edges\n    .map(resource => <ResourcePreviewHOC resourceId={resource.id} key={resource.id} />)\n    .filter((_): _ is ReactElement => !!_);\n\n  const Followers: CollectionPageProps['Followers'] = collectionFollowersPage.edges\n    .map(\n      follow =>\n        follow.creator && (\n          <UserPreviewHOC userId={follow.creator.userId} key={follow.creator.userId} />\n        )\n    )\n    .filter((_): _ is ReactElement => !!_);\n\n  const UploadResourcePanel =\n    openPanel === 'upload' ? (\n      <AddResourceHOC done={closePanel} collectionId={collectionId} />\n    ) : null;\n\n  const ShareLink =\n    openPanel === 'share' ? <ShareLinkHOC collectionId={collectionId} done={closePanel} /> : null;\n\n  const collectionPageProps = useMemo<CollectionPageProps | null>(() => {\n    if (!collection) {\n      return null;\n    }\n    const tabPaths: CollectionPageProps['tabPaths'] = {\n      followers: collectionLocation.getPath({ collectionId, tab: 'followers' }, undefined),\n      resources: collectionLocation.getPath({ collectionId, tab: undefined }, undefined)\n    };\n    const uiProps: CollectionPageProps = {\n      ShareLink,\n      HeroCollection,\n      Resources,\n      UploadResourcePanel,\n      tabPaths,\n      Followers,\n      communityIcon: collection.community?.icon?.url || '',\n      communityId: collection.community ? collection.community.id : '',\n      communityName: collection.community ? collection.community.name : '',\n      loadMoreFollowers,\n      loadMoreResources,\n      isCommunityMember,\n      shareLink: () =>\n        setOpenPanel(openPanel === 'share' || notifyNotLogged() ? undefined : 'share'),\n      upload: () => setOpenPanel(openPanel === 'upload' || notifyNotLogged() ? undefined : 'upload')\n    };\n    return uiProps;\n  }, [\n    collection,\n    collectionId,\n    ShareLink,\n    HeroCollection,\n    Resources,\n    UploadResourcePanel,\n    Followers,\n    loadMoreFollowers,\n    loadMoreResources,\n    isCommunityMember,\n    openPanel,\n    notifyNotLogged\n  ]);\n  return collectionPageProps && <CollectionPageUI {...collectionPageProps} />;\n};\n","import React, { FC, useMemo } from 'react';\nimport { CollectionPageTab, CollectionPage } from 'HOC/pages/collection/CollectionPage';\nimport { NotFoundHOC } from 'HOC/pages/not-found/NotFound';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\nimport { locationHelper } from './lib/helper';\n\ninterface CollectionPageRouter {\n  collectionId: string;\n  tab?: string;\n}\nconst CollectionPageRouter: FC<RouteComponentProps<CollectionPageRouter>> = ({ match }) => {\n  const collectionId = match.params.collectionId;\n  const maybeTabStr = match.params.tab;\n  const tab =\n    maybeTabStr === 'followers'\n      ? CollectionPageTab.Followers\n      : !maybeTabStr\n      ? CollectionPageTab.Resources\n      : null;\n\n  const props = useMemo<CollectionPage | null>(\n    () =>\n      tab === null\n        ? null\n        : {\n            collectionId,\n            tab,\n            basePath: `/collections/${collectionId}`\n          },\n    [collectionId, tab]\n  );\n\n  if (!props) {\n    return <NotFoundHOC />;\n  }\n\n  return (\n    <WithSidebarTemplate>\n      <CollectionPage {...props} />\n    </WithSidebarTemplate>\n  );\n};\n\nexport const CollectionPageRoute: RouteProps = {\n  exact: true,\n  path: '/collections/:collectionId/:tab(followers)?',\n  component: CollectionPageRouter\n};\n\ntype Tab = undefined | 'followers';\ntype Params = {\n  collectionId: string;\n  tab: Tab;\n};\n\nexport const collectionLocation = locationHelper<Params, undefined>(CollectionPageRoute);\n","import { useInstanceFeaturedCollections } from 'fe/instance/featuredCollections/useInstanceFeaturedCollections';\nimport { useMe } from 'fe/session/useMe';\nimport React, { FC, useMemo, useReducer, useState, ReactElement } from 'react';\nimport {\n  FeaturedCollections as FeaturedCollectionsUI,\n  FeaturedCollectionsData\n} from 'ui/modules/FeaturedCollections';\nimport CollectionSmall, { CollectionProps } from 'ui/modules/FeaturedCollections/preview';\nimport Modal from 'ui/modules/Modal';\nimport { FeatureModalHOC } from '../FeatureModal/FeatureModal';\nimport { CollectionFeatureFragment } from './featuredCollection.generated';\nimport { collectionLocation } from 'routes/CollectionPageRoute';\n\nexport interface FeaturedCollections {}\nexport const FeaturedCollections: FC<FeaturedCollections> = () => {\n  const { isAdmin } = useMe();\n  const { featuredCollectionsPage } = useInstanceFeaturedCollections();\n\n  const [isEditing, toggleEdit] = useReducer(prev => !prev, false);\n  const [\n    selectedFeatureToRemove,\n    setSelectedFeatureToRemove\n  ] = useState<CollectionFeatureFragment | null>(null);\n\n  const featuredCollections = useMemo<ReactElement[]>(\n    () =>\n      featuredCollectionsPage.edges\n        .map(feature => {\n          const collectionFragment = feature.context;\n          if (!collectionFragment || collectionFragment.__typename !== 'Collection') {\n            return null;\n          }\n          const collection: CollectionProps['collection'] = {\n            icon: collectionFragment.icon?.url || '',\n            name: collectionFragment.name,\n            link: collectionLocation.getPath(\n              { collectionId: collectionFragment.id, tab: undefined },\n              undefined\n            )\n          };\n\n          const props: CollectionProps = {\n            collection,\n            canEdit: isAdmin,\n            isEditing,\n            remove: () => setSelectedFeatureToRemove(feature)\n          };\n          return <CollectionSmall key={collectionFragment.id} {...props} />;\n        })\n        .filter((_): _ is ReactElement => !!_),\n    [featuredCollectionsPage.edges, isAdmin, isEditing]\n  );\n\n  const RemoveFeaturedModal = useMemo(\n    () =>\n      selectedFeatureToRemove &&\n      selectedFeatureToRemove.context?.__typename === 'Collection' && (\n        <Modal closeModal={() => setSelectedFeatureToRemove(null)}>\n          <FeatureModalHOC\n            ctx={selectedFeatureToRemove.context}\n            done={() => setSelectedFeatureToRemove(null)}\n            featureId={selectedFeatureToRemove.id}\n          />\n        </Modal>\n      ),\n    [selectedFeatureToRemove]\n  );\n\n  const propsUI = useMemo<FeaturedCollectionsData>(() => {\n    const props: FeaturedCollectionsData = {\n      featuredCollections,\n      isEditing,\n      toggleEdit,\n      canEdit: isAdmin\n    };\n    return props;\n  }, [featuredCollections, isEditing, isAdmin]);\n\n  return (\n    <>\n      {RemoveFeaturedModal}\n      <FeaturedCollectionsUI {...propsUI} />\n    </>\n  );\n};\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { NavLink, Switch, Route } from 'react-router-dom';\nimport {\n  Wrapper,\n  WrapperCont,\n  List,\n  MainContainer,\n  HomeBox,\n  ObjectsList,\n  CollectionsWrapper,\n  MenuList\n} from 'ui/elements/Layout';\nimport { Flex, Box, Text } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\nimport { FormikHook } from 'ui/@types/types';\n\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport { SidePanel } from 'ui/modules/SidePanel';\nimport { ReactElement } from 'react';\n\nexport interface Props {\n  tabPaths: {\n    timeline: string;\n    communities: string;\n    collections: string;\n  };\n  FeaturedCommunitiesBox: ReactElement;\n  FeaturedCollectionsBox: ReactElement;\n  ActivitiesBox: ReactElement;\n  CommunitiesBoxes: ReactElement;\n  CollectionsBoxes: ReactElement;\n  LoadMoreFormik: FormikHook | null;\n}\nexport const Discover: React.FC<Props> = ({\n  ActivitiesBox,\n  FeaturedCommunitiesBox,\n  FeaturedCollectionsBox,\n  CollectionsBoxes,\n  CommunitiesBoxes,\n  LoadMoreFormik,\n  tabPaths\n}) => {\n  return (\n    <MainContainer>\n      <HomeBox>\n        <WrapperCont>\n          <WrapperFeatured>{FeaturedCommunitiesBox}</WrapperFeatured>\n          <WrapperFeatured mt={2}>{FeaturedCollectionsBox}</WrapperFeatured>\n          <Wrapper>\n            <Menu tabPaths={tabPaths} />\n            <Switch>\n              <Route exact path={tabPaths.communities}>\n                <ObjectsList>{CommunitiesBoxes}</ObjectsList>\n                {LoadMoreFormik && <LoadMore LoadMoreFormik={LoadMoreFormik} />}\n              </Route>\n              <Route exact path={tabPaths.collections}>\n                <ObjectsList>\n                  <CollectionsWrapper>{CollectionsBoxes}</CollectionsWrapper>\n                </ObjectsList>\n                {LoadMoreFormik && <LoadMore LoadMoreFormik={LoadMoreFormik} />}\n              </Route>\n              <Route exact path={tabPaths.timeline}>\n                <List>{ActivitiesBox}</List>\n                {LoadMoreFormik && <LoadMore LoadMoreFormik={LoadMoreFormik} />}\n              </Route>\n            </Switch>\n          </Wrapper>\n        </WrapperCont>\n      </HomeBox>\n      <SidePanel />\n    </MainContainer>\n  );\n};\n\nconst Menu: React.FC<{ tabPaths: Props['tabPaths'] }> = ({ tabPaths }) => (\n  <>\n    <Title px={2} mt={2}>\n      <Text variant=\"suptitle\">Browse Home instance</Text>\n    </Title>\n    <MenuList>\n      <NavLink exact to={tabPaths.timeline}>\n        <Trans>Timeline</Trans>\n      </NavLink>\n      <NavLink exact to={tabPaths.communities}>\n        <Trans>All communities</Trans>\n      </NavLink>\n      <NavLink exact to={tabPaths.collections}>\n        <Trans>All collections</Trans>\n      </NavLink>\n    </MenuList>\n  </>\n);\nconst Title = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  height: 40px;\n  line-height: 40px;\n`;\n\nconst WrapperFeatured = styled(Flex)`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 8px;\n  max-height: 270px;\n`;\n\nexport default Discover;\n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { useMemo } from 'react';\nimport * as GQL from './useInstanceOutboxActivities.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useInstanceOutboxActivities = () => {\n  const activitiesQ = GQL.useInstanceOutboxActivitiesQuery({\n    variables: { limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const activitiesPage = usePage(\n    activitiesQ.data?.instance?.outbox,\n    ({ cursor, update }) => {\n      return activitiesQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.instance?.outbox && prev.instance?.outbox\n            ? {\n                ...fetchMoreResult,\n                instance: {\n                  ...fetchMoreResult.instance,\n                  outbox: update({\n                    prev: prev.instance.outbox,\n                    fetched: fetchMoreResult.instance.outbox\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(() => {\n    return {\n      activitiesPage\n    };\n  }, [activitiesPage]);\n};\n","import { useMemo } from 'react';\nimport { usePage } from 'fe/lib/helpers/usePage';\nimport { useInstanceFeaturedCommunitiesQuery } from './instanceFeaturedCommunities.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useInstanceFeaturedCommunities = () => {\n  const featuredCommunitiesQ = useInstanceFeaturedCommunitiesQuery();\n  const featuredCommunitiesPage = usePage(\n    featuredCommunitiesQ.data?.instance?.featuredCommunities,\n    ({ cursor, update }) => {\n      return featuredCommunitiesQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.instance?.featuredCommunities &&\n            prev.instance?.featuredCommunities\n            ? {\n                ...fetchMoreResult,\n                instance: {\n                  ...fetchMoreResult.instance,\n                  featuredCommunities: update({\n                    prev: prev.instance.featuredCommunities,\n                    fetched: fetchMoreResult.instance.featuredCommunities\n                  })\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n  return useMemo(() => {\n    return {\n      featuredCommunitiesPage\n    };\n  }, [featuredCommunitiesPage]);\n};\n","import { Trans } from '@lingui/macro';\nimport React, { SFC, useRef, ReactElement } from 'react';\nimport Slider from 'react-slick';\nimport { Box, Flex } from 'rebass';\nimport 'slick-carousel/slick/slick-theme.css';\nimport 'slick-carousel/slick/slick.css';\nimport Button from 'ui/elements/Button';\nimport { ChevronLeft, Right } from 'ui/Icons';\nimport styled from 'ui/themes/styled';\n\nexport const Title = styled(Flex)`\n  font-size: 15px;\n  font-weight: 700;\n  padding: 8px;\n  border-bottom: ${props => props.theme.colors.border};\n  margin: 0;\n  color: ${props => props.theme.colors.mediumdark};\n  & h5 {\n    margin: 0;\n    color: ${props => props.theme.colors.mediumdark};\n    display: inline-block;\n    flex: 1;\n    padding: 0;\n    font-size: 12px;\n    text-transform: uppercase;\n    height: 30px;\n    font-weight: 500;\n    line-height: 30px;\n  }\n`;\n\nexport const RightContext = styled(Flex)`\n  & span {\n    cursor: pointer;\n    display: inline-block;\n    height: 30px;\n    & svg {\n      color: ${props => props.theme.colors.mediumdark} !important;\n      vertical-align: middle;\n      height: 30px;\n    }\n    &:hover {\n      & svg {\n        color: ${props => props.theme.colors.mediumdark} !important;\n      }\n    }\n  }\n  float: right;\n`;\n\nconst ActionContainer = styled(Flex)`\n  justify-content: right;\n  align-items: center;\n`;\n\nconst ActionItem = styled(Flex)`\n  display: inline-flex;\n  color: ${props => props.theme.colors.medium};\n  cursor: pointer;\n  padding-right: 10px;\n  button {\n    height: 30px;\n    line-height: 10px;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ${props => props.theme.colors.primary};\n    }\n  }\n`;\n\nexport interface FeaturedCommunitiesData {\n  canEdit: boolean;\n  featuredCommunities: ReactElement[];\n  toggleEdit(): any;\n  isEditing: boolean;\n}\n\nexport const FeaturedCommunities: SFC<FeaturedCommunitiesData> = props => {\n  const sliderRef = useRef<Slider>();\n\n  return (\n    <>\n      <Title>\n        <h5>\n          <Trans>Featured communities</Trans>{' '}\n        </h5>\n        <RightContext>\n          {props.canEdit ? (\n            <ActionContainer>\n              <ActionItem onClick={props.toggleEdit}>\n                {!props.isEditing ? (\n                  <Button variant={'outline'}>\n                    <Trans>Edit</Trans>\n                  </Button>\n                ) : (\n                  <Button variant={'outline'}>\n                    <Trans>Done</Trans>\n                  </Button>\n                )}\n              </ActionItem>\n            </ActionContainer>\n          ) : null}\n          <span onClick={sliderRef.current && sliderRef.current.slickPrev}>\n            <ChevronLeft width={26} height={26} strokeWidth={1} color={'#333'} />\n          </span>\n          <span onClick={sliderRef.current && sliderRef.current.slickNext}>\n            <Right width={26} height={26} strokeWidth={1} color={'#333'} />\n          </span>\n        </RightContext>\n      </Title>\n      <Box px={2}>\n        <Slider\n          ref={c => (sliderRef.current = c || undefined)}\n          {...sliderSettings(props.featuredCommunities.length)}\n        >\n          {props.featuredCommunities}\n        </Slider>\n      </Box>\n    </>\n  );\n};\n\nexport default FeaturedCommunities;\n\nconst sliderSettings = (slidesToShow: number) => ({\n  dots: false,\n  arrows: false,\n  infinite: true,\n  autoplay: false,\n  speed: 500,\n  slidesToShow: slidesToShow > 3 ? 3 : slidesToShow,\n  slidesToScroll: 1,\n  responsive: [\n    {\n      breakpoint: 1024,\n      settings: {\n        slidesToShow: slidesToShow > 3 ? 3 : slidesToShow,\n        slidesToScroll: 1\n      }\n    },\n    {\n      breakpoint: 600,\n      settings: {\n        slidesToShow: slidesToShow > 2 ? 2 : slidesToShow,\n        slidesToScroll: 1\n      }\n    },\n    {\n      breakpoint: 480,\n      settings: {\n        slidesToShow: 1,\n        slidesToScroll: 1\n      }\n    }\n  ]\n});\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Box, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport styled from 'ui/themes/styled';\nimport { ellipsis } from 'polished';\nimport { X } from 'react-feather';\nconst PlaceholderImg = require('ui/Icons/collectionPlaceholder.png');\n\nexport interface CommunityBase {\n  link: string;\n  name: string;\n  icon: string;\n}\n\nexport interface CommunityProps {\n  community: CommunityBase;\n  canEdit: boolean;\n  isEditing: boolean;\n  remove(): unknown;\n}\nconst CommunitySmall: React.FC<CommunityProps> = ({ community, canEdit, isEditing, remove }) => {\n  return (\n    <Wrapper py={1} mb={2} mr={3}>\n      {canEdit && isEditing ? (\n        <Remove onClick={remove}>\n          <X color=\"#fff\" size={16} />\n        </Remove>\n      ) : null}\n      <Link to={community.link}>\n        <Img\n          style={{\n            backgroundImage: `url(\"${community.icon || PlaceholderImg}\")`\n          }}\n        >\n          <Infos>\n            <Title fontSize={1} my={2} fontWeight={600}>\n              {community.name.length > 80\n                ? community.name.replace(/^(.{76}[^\\s]*).*/, '$1...')\n                : community.name}\n            </Title>\n          </Infos>\n        </Img>\n      </Link>\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled(Box)`\n  cursor: pointer;\n  position: relative;\n  max-width: 200px;\n  max-height: 270px;\n  border-radius: 4px;\n  padding-top: 10px;\n  ${media.lessThan('medium')`\n  display: block;\n`} & a {\n    color: inherit;\n    text-decoration: none;\n    width: 100%;\n  }\n`;\n\nconst Img = styled.div`\n  //   width: 100%;\n  height: auto;\n  padding: 50%;\n  border-radius: 4px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n`;\nconst Infos = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  padding: 0 8px;\n  background: rgba(0, 0, 0, 0.8);\n`;\n\nconst Title = styled(Text)`\n  color: rgba(250, 250, 250);\n  ${ellipsis('170px')};\n  font-size: 14px;\n  margin: 0;\n  line-height: 40px;\n`;\n\nconst Remove = styled(Box)`\n  position: absolute;\n  right: -9px;\n  top: 0px;\n  cursor: pointer;\n  background: ${props => props.theme.colors.medium};\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n`;\nexport default CommunitySmall;\n","import { FeaturedCollections } from 'HOC/modules/FeaturedCollections/featuredCollections';\nimport React, { FC, useMemo } from 'react';\nimport { Discover, Props } from 'ui/pages/discover';\nimport { useInstanceOutboxActivities } from 'fe/activities/outbox/instance/useInstanceOutboxActivities';\nimport { ActivityPreviewHOC } from 'HOC/modules/previews/activity/ActivityPreview';\nimport { FeaturedCommunities } from 'HOC/modules/FeaturedCommunities/featuredCommunities';\nimport { useAllCommunities } from 'fe/community/all/useAllCommunities';\nimport { CommunityPreviewHOC } from 'HOC/modules/previews/community/CommunityPreview';\nimport { CollectionPreviewHOC } from 'HOC/modules/previews/collection/CollectionPreview';\nimport { useAllCollections } from 'fe/collection/all/useAllCollections';\nimport { Box } from 'rebass';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\nimport { discoverLocation } from 'routes/DiscoverPageRoute';\n\nexport enum DiscoverPageTabs {\n  Activities,\n  Communities,\n  Collections\n}\n\nexport interface DiscoverPage {\n  tab: DiscoverPageTabs;\n  basePath: string;\n}\n\nconst discoverActivitiesPageTitle = t`Discover Activities`;\nconst discoverCollectionsPageTitle = t`Discover Collections`;\nconst discoverCommunitiesPageTitle = t`Discover Communities`;\n\nexport const DiscoverPage: FC<DiscoverPage> = ({ basePath, tab }) => {\n  const discovberPageTitle =\n    tab === DiscoverPageTabs.Collections\n      ? discoverCollectionsPageTitle\n      : tab === DiscoverPageTabs.Communities\n      ? discoverCommunitiesPageTitle\n      : tab === DiscoverPageTabs.Activities\n      ? discoverActivitiesPageTitle\n      : discoverActivitiesPageTitle; //never\n  usePageTitle(discovberPageTitle);\n\n  const { activitiesPage } = useInstanceOutboxActivities();\n  const [activitiesPageNext /* , activitiesPagePrevious */] = activitiesPage.formiks;\n\n  const { allCommunitiesPage } = useAllCommunities();\n  const [allCommunitiesPageNext /* , allCommunitiesPagePrevious */] = allCommunitiesPage.formiks;\n\n  const { allCollectionsPage } = useAllCollections();\n  const [allCollectionsPageNext /* , allCollectionsPagePrevious */] = allCollectionsPage.formiks;\n\n  const propsUI = useMemo<Props>(() => {\n    const FeaturedCollectionsBox = <FeaturedCollections />;\n    const FeaturedCommunitiesBox = <FeaturedCommunities />;\n    const ActivitiesBox = (\n      <>\n        {activitiesPage.edges.map(activity => (\n          <ActivityPreviewHOC activityId={activity.id} key={activity.id} />\n        ))}\n      </>\n    );\n\n    const CollectionsBoxes = (\n      <>\n        {allCollectionsPage.edges.map(collection => (\n          <Box m={2} key={collection.id}>\n            <CollectionPreviewHOC collectionId={collection.id} />\n          </Box>\n        ))}\n      </>\n    );\n    const CommunitiesBoxes = (\n      <>\n        {allCommunitiesPage.edges.map(community => (\n          <Box m={2} key={community.id}>\n            <CommunityPreviewHOC communityId={community.id} />\n          </Box>\n        ))}\n      </>\n    );\n    const LoadMoreFormik =\n      tab === DiscoverPageTabs.Activities\n        ? activitiesPageNext\n        : tab === DiscoverPageTabs.Collections\n        ? allCollectionsPageNext\n        : tab === DiscoverPageTabs.Communities\n        ? allCommunitiesPageNext\n        : null;\n\n    const tabPaths: Props['tabPaths'] = {\n      collections: discoverLocation.getPath({ tab: 'collections' }, undefined),\n      communities: discoverLocation.getPath({ tab: 'communities' }, undefined),\n      timeline: discoverLocation.getPath({ tab: undefined }, undefined)\n    };\n\n    const props: Props = {\n      tabPaths,\n      ActivitiesBox,\n      FeaturedCollectionsBox,\n      FeaturedCommunitiesBox,\n      CollectionsBoxes,\n      CommunitiesBoxes,\n      LoadMoreFormik\n    };\n\n    return props;\n  }, [\n    activitiesPage.edges,\n    activitiesPageNext,\n    allCollectionsPage.edges,\n    allCollectionsPageNext,\n    allCommunitiesPage.edges,\n    allCommunitiesPageNext,\n    tab\n  ]);\n\n  return <Discover {...propsUI} />;\n};\n","import { useInstanceFeaturedCommunities } from 'fe/instance/featuredCommunities/useInstanceFeaturedCommunities';\nimport { useMe } from 'fe/session/useMe';\nimport React, { FC, useMemo, useReducer, useState, ReactElement } from 'react';\nimport {\n  FeaturedCommunities as FeaturedCommunitiesUI,\n  FeaturedCommunitiesData\n} from 'ui/modules/FeaturedCommunities';\nimport CommunitySmall, { CommunityProps } from 'ui/modules/FeaturedCommunities/preview';\nimport Modal from 'ui/modules/Modal';\nimport { FeatureModalHOC } from '../FeatureModal/FeatureModal';\nimport { CommunityFeatureFragment } from './featuredCommunity.generated';\nimport { communityLocation } from 'routes/CommunityPageRoute';\n\nexport interface FeaturedCommunities {}\nexport const FeaturedCommunities: FC<FeaturedCommunities> = () => {\n  const { isAdmin } = useMe();\n  const { featuredCommunitiesPage } = useInstanceFeaturedCommunities();\n\n  const [isEditing, toggleEdit] = useReducer(prev => !prev, false);\n  const [\n    selectedFeatureToRemove,\n    setSelectedFeatureToRemove\n  ] = useState<CommunityFeatureFragment | null>(null);\n\n  const featuredCommunities = useMemo<ReactElement[]>(\n    () =>\n      featuredCommunitiesPage.edges\n        .map(feature => {\n          const communityFragment = feature.context;\n          if (!communityFragment || communityFragment.__typename !== 'Community') {\n            return null;\n          }\n          const community: CommunityProps['community'] = {\n            icon: communityFragment.icon?.url || '',\n            name: communityFragment.name,\n            link: communityLocation.getPath(\n              { tab: undefined, communityId: communityFragment.id },\n              undefined\n            )\n          };\n          const props: CommunityProps = {\n            community,\n            canEdit: isAdmin,\n            isEditing,\n            remove: () => setSelectedFeatureToRemove(feature)\n          };\n          return <CommunitySmall key={communityFragment.id} {...props} />;\n        })\n        .filter((_): _ is ReactElement => !!_),\n    [featuredCommunitiesPage.edges, isAdmin, isEditing]\n  );\n\n  const RemoveFeaturedModal = useMemo(\n    () =>\n      selectedFeatureToRemove &&\n      selectedFeatureToRemove.context?.__typename === 'Community' && (\n        <Modal closeModal={() => setSelectedFeatureToRemove(null)}>\n          <FeatureModalHOC\n            ctx={selectedFeatureToRemove.context}\n            done={() => setSelectedFeatureToRemove(null)}\n            featureId={selectedFeatureToRemove.id}\n          />\n        </Modal>\n      ),\n    [selectedFeatureToRemove]\n  );\n\n  const propsUI = useMemo<FeaturedCommunitiesData>(() => {\n    const props: FeaturedCommunitiesData = {\n      isEditing,\n      toggleEdit,\n      featuredCommunities,\n      canEdit: isAdmin\n    };\n    return props;\n  }, [isEditing, featuredCommunities, isAdmin]);\n  return (\n    <>\n      {RemoveFeaturedModal}\n      <FeaturedCommunitiesUI {...propsUI} />\n    </>\n  );\n};\n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\nimport { useAllCommunitiesQuery } from './useAllCommunities.generated';\n\nexport const useAllCommunities = () => {\n  const allCommunitiesQ = useAllCommunitiesQuery({\n    variables: { limit: DEFAULT_PAGE_SIZE }\n  });\n  const allCommunitiesPage = usePage(\n    allCommunitiesQ.data?.communities,\n    ({ cursor, update }) => {\n      return allCommunitiesQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.communities && prev.communities\n            ? {\n                ...fetchMoreResult,\n                communities: update({\n                  prev: prev.communities,\n                  fetched: fetchMoreResult.communities\n                })\n              }\n            : prev;\n        }\n      });\n    }\n  );\n  return useMemo(() => {\n    return {\n      allCommunitiesPage\n    };\n  }, [allCommunitiesPage]);\n};\n","import { DiscoverPage, DiscoverPageTabs } from 'HOC/pages/discover/DiscoverPage';\nimport React, { FC, useMemo } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\nimport { NotFoundHOC } from 'HOC/pages/not-found/NotFound';\nimport { locationHelper } from './lib/helper';\n\ninterface DiscoverPageRouter {\n  tab?: string;\n}\nconst DiscoverPageRouter: FC<RouteComponentProps<DiscoverPageRouter>> = ({ match }) => {\n  const maybeTabStr = match.params.tab;\n  const tab =\n    maybeTabStr === 'collections'\n      ? DiscoverPageTabs.Collections\n      : maybeTabStr === 'communities'\n      ? DiscoverPageTabs.Communities\n      : !maybeTabStr\n      ? DiscoverPageTabs.Activities\n      : null;\n  const props = useMemo<DiscoverPage | null>(() => {\n    return tab === null\n      ? null\n      : {\n          basePath: '/discover',\n          tab\n        };\n  }, [tab]);\n  if (!props) {\n    return <NotFoundHOC />;\n  }\n\n  return (\n    <WithSidebarTemplate>\n      <DiscoverPage {...props} />\n    </WithSidebarTemplate>\n  );\n};\n\nexport const DiscoverPageRoute: RouteProps = {\n  exact: true,\n  path: '/discover/:tab(collections|communities)?',\n  component: DiscoverPageRouter\n};\n\ntype Tab = undefined | 'collections' | 'communities';\ntype Params = {\n  tab: Tab;\n};\n\nexport const discoverLocation = locationHelper<Params, undefined>(DiscoverPageRoute);\n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\nimport { useMemo } from 'react';\nimport * as GQL from './useMyInboxActivities.generated';\n\nexport const useMyInboxActivities = () => {\n  const activitiesQ = GQL.useMyInboxActivitiesQuery({\n    variables: { limit: DEFAULT_PAGE_SIZE }\n  });\n\n  const activitiesPage = usePage(\n    activitiesQ.data?.me?.user.inbox,\n    ({ cursor, update }) => {\n      return activitiesQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.me?.user.inbox && prev.me?.user.inbox\n            ? {\n                ...fetchMoreResult,\n                me: {\n                  ...fetchMoreResult.me,\n                  user: {\n                    ...fetchMoreResult.me.user,\n                    inbox: update({\n                      prev: prev.me.user.inbox,\n                      fetched: fetchMoreResult.me.user.inbox\n                    })\n                  }\n                }\n              }\n            : prev;\n        }\n      });\n    }\n  );\n\n  return useMemo(() => {\n    return {\n      activitiesPage\n    };\n  }, [activitiesPage]);\n};\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { Box, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport {\n  HomeBox,\n  // MenuList\n  List,\n  // ObjectsList,\n  MainContainer,\n  Wrapper,\n  WrapperCont\n} from 'ui/elements/Layout';\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport { SidePanel } from 'ui/modules/SidePanel';\nimport styled from 'ui/themes/styled';\nimport { ReactElement } from 'react';\n\nexport interface Props {\n  // nextCommunitiesFormik?: FormikHook;\n  // nextCollectionsFormik?: FormikHook;\n  nextInboxFormik: FormikHook | null;\n  // FollowedCommunitiesElements: ReactElement;\n  // FollowedCollectionsElements: ReactElement;\n  InboxElements: ReactElement;\n  basePath: string;\n}\n\nexport const Home: React.FC<Props> = ({\n  basePath,\n  InboxElements,\n  nextInboxFormik\n}: // nextCommunitiesFormik,\n// nextCollectionsFormik,\n// FollowedCommunitiesElements,\n// FollowedCollectionsElements\nProps) => {\n  return (\n    <MainContainer>\n      <HomeBox>\n        <WrapperCont>\n          <Wrapper>\n            <Title px={2}>\n              <Text variant=\"suptitle\">\n                <Trans>My timeline</Trans>\n              </Text>\n            </Title>\n            {/* <Menu basePath={basePath} /> */}\n            <Switch>\n              {/* <Route path={`${basePath}/mycommunities`}>\n                <ObjectsList>{FollowedCommunitiesElements}</ObjectsList>\n                {nextCommunitiesFormik && (\n                  <LoadMore LoadMoreFormik={nextCommunitiesFormik} />\n                )}\n              </Route>\n              <Route path={`${basePath}/mycollections`}>\n                <ObjectsList>{FollowedCollectionsElements}</ObjectsList>\n                {nextCollectionsFormik && (\n                  <LoadMore LoadMoreFormik={nextCollectionsFormik} />\n                )}\n              </Route> */}\n              <Route path={`${basePath}`}>\n                <List>{InboxElements}</List>\n                {nextInboxFormik && <LoadMore LoadMoreFormik={nextInboxFormik} />}\n              </Route>\n            </Switch>\n          </Wrapper>\n        </WrapperCont>\n      </HomeBox>\n      <SidePanel />\n    </MainContainer>\n  );\n};\n\nexport default Home;\n\nconst Title = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  height: 40px;\n  line-height: 40px;\n  border-bottom: ${props => props.theme.colors.border};\n`;\n\n// const Menu = ({ basePath }: { basePath: string }) => {\n//   return (\n//     <MenuList>\n//       <NavLink exact to={`${basePath}`}>\n//         <Trans>My Timeline</Trans>\n//       </NavLink>\n//       <>\n//         {/* <NavLink to={`${basePath}/mycommunities`}>\n//           <Trans>Joined communities</Trans>\n//         </NavLink>\n//         <NavLink to={`${basePath}/mycollections`}>\n//           <Trans>Followed collections</Trans>\n//         </NavLink> */}\n//       </>\n//     </MenuList>\n//   );\n// };\n","import { useMyInboxActivities } from 'fe/activities/inbox/my/useMyInboxActivities';\n// import { useMyFollowedCollections } from 'fe/collection/myFollowed/myFollowedCollections';\n// import { useMyFollowedCommunities } from 'fe/community/myFollowed/myFollowedCommunities';\nimport { ActivityPreviewHOC } from 'HOC/modules/previews/activity/ActivityPreview';\n// import { CollectionPreviewHOC } from 'HOC/modules/previews/collection/CollectionPreview';\n// import { CommunityPreviewHOC } from 'HOC/modules/previews/community/CommunityPreview';\nimport React, { FC, useMemo } from 'react';\nimport { Home, Props } from 'ui/pages/home';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n// import { MyFollowedCommunityDataFragment } from 'fe/community/myFollowed/myFollowedCommunities.generated';\n// import { MyFollowedCollectionDataFragment } from 'fe/collection/myFollowed/myFollowedCollections.generated';\n\nexport interface HomePageHOC {\n  basePath: string;\n}\n\nconst homeMyTimelinePageTitle = t`My Activities`;\n\nexport const HomePageHOC: FC<HomePageHOC> = ({ basePath }) => {\n  // const { myCommunityFollowsPage } = useMyFollowedCommunities();\n  // const [nextCommunitiesFormik] = useFormikPage(myCommunityFollowsPage);\n  // const FollowedCommunitiesElements = useMemo<\n  //   Props['FollowedCommunitiesElements']\n  // >(() => {\n  //   return (\n  //     <>\n  //       {myCommunityFollowsPage\n  //         .edges!.map(follow => follow.context)\n  //         .filter(\n  //           (context): context is MyFollowedCommunityDataFragment =>\n  //             context.__typename === 'Community'\n  //         )\n  //         .map(community => (\n  //           <CommunityPreviewHOC\n  //             communityId={community.id}\n  //             key={community.id}\n  //           />\n  //         ))}\n  //     </>\n  //   );\n  // }, [myCommunityFollowsPage]);\n\n  // const {\n  //   myCollectionFollowsPage: myFollowedCollectionsPage\n  // } = useMyFollowedCollections();\n  // const [nextCollectionsFormik] = useFormikPage(myFollowedCollectionsPage);\n  // const FollowedCollectionsElements = useMemo<\n  //   Props['FollowedCollectionsElements']\n  // >(() => {\n  //   return (\n  //     <>\n  //       {myFollowedCollectionsPage\n  //         .edges!.map(follow => follow.context)\n  //         .filter(\n  //           (context): context is MyFollowedCollectionDataFragment =>\n  //             context.__typename === 'Collection'\n  //         )\n  //         .map(collection => (\n  //           <CollectionPreviewHOC\n  //             collectionId={collection.id}\n  //             key={collection.id}\n  //           />\n  //         ))}\n  //     </>\n  //   );\n  // }, [myFollowedCollectionsPage]);\n  usePageTitle(homeMyTimelinePageTitle);\n\n  const { activitiesPage } = useMyInboxActivities();\n  const [nextInboxFormik] = activitiesPage.formiks;\n  const InboxElements = useMemo<Props['InboxElements']>(() => {\n    return (\n      <>\n        {activitiesPage.edges!.map(\n          userActivityEdge =>\n            userActivityEdge && (\n              <ActivityPreviewHOC activityId={userActivityEdge.id} key={userActivityEdge.id} />\n            )\n        )}\n      </>\n    );\n  }, [activitiesPage]);\n\n  const homeProps = useMemo<Props>(() => {\n    const props: Props = {\n      InboxElements,\n      // FollowedCollectionsElements,\n      // FollowedCommunitiesElements,\n      // nextCollectionsFormik,\n      // nextCommunitiesFormik,\n      nextInboxFormik,\n      basePath\n    };\n    return props;\n  }, [\n    InboxElements,\n    // FollowedCollectionsElements,\n    // FollowedCommunitiesElements,\n    // nextCollectionsFormik,\n    // nextCommunitiesFormik,\n    nextInboxFormik,\n    basePath\n  ]);\n  return <Home {...homeProps} />;\n};\n","import React, { FC, useMemo } from 'react';\nimport { HomePageHOC } from 'HOC/pages/home/HomeHoc';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\nimport { NotFoundHOC } from 'HOC/pages/not-found/NotFound';\nimport { RedirectAnonymousToLogin } from './wrappers/RedirectBySession';\nimport { locationHelper } from './lib/helper';\n\ninterface HomePageRouter {\n  tab?: string;\n}\nconst HomePageRouter: FC<RouteComponentProps<HomePageRouter>> = ({ match }) => {\n  const homeProps: HomePageHOC | null = useMemo(\n    () => ({\n      basePath: ''\n    }),\n    []\n  );\n\n  if (!homeProps) {\n    return <NotFoundHOC />;\n  }\n  return (\n    <RedirectAnonymousToLogin>\n      <WithSidebarTemplate>\n        <HomePageHOC {...homeProps} />\n      </WithSidebarTemplate>\n    </RedirectAnonymousToLogin>\n  );\n};\n\nexport const HomePageRoute: RouteProps = {\n  exact: true,\n  path: '/',\n  component: HomePageRouter\n};\n\nexport const homeLocation = locationHelper<undefined, undefined>(HomePageRoute);\n","import { useMyFollowedCommunities } from 'fe/community/myFollowed/myFollowedCommunities';\nimport React, { FC, useMemo, useContext } from 'react';\nimport {\n  CommunityPreview,\n  Props as PropsUI,\n  Sidebar as SidebarUI,\n  Status as StatusUI\n} from 'ui/modules/Sidebar/index';\nimport { MyFollowedCommunityDataFragment } from 'fe/community/myFollowed/myFollowedCommunities.generated';\nimport { SideBarContext } from 'HOC/context/SideBar';\nimport { discoverLocation } from 'routes/DiscoverPageRoute';\nimport { homeLocation } from 'routes/HomePageRoute';\nimport { communityLocation } from 'routes/CommunityPageRoute';\n\nexport interface SidebarHOC {}\nexport const SidebarHOC: FC<SidebarHOC> = () => {\n  const { isOpen: isSidebarOpen } = useContext(SideBarContext);\n  const { myCommunityFollowsPage } = useMyFollowedCommunities();\n  const [LoadMoreFormik] = myCommunityFollowsPage.formiks;\n  const communities = useMemo(\n    () =>\n      myCommunityFollowsPage.edges\n        .map(follow => follow.context)\n        .filter(\n          (context): context is MyFollowedCommunityDataFragment =>\n            context.__typename === 'Community'\n        )\n        .map<CommunityPreview>(community => {\n          return {\n            icon: community.icon?.url || '',\n            link: communityLocation.getPath(\n              { communityId: community.id, tab: undefined },\n              undefined\n            ),\n            name: community.name\n          };\n        }),\n    [myCommunityFollowsPage]\n  );\n\n  const propsUI = useMemo<PropsUI>(() => {\n    const props: PropsUI = {\n      isSidebarOpen,\n      status: StatusUI.Loaded,\n      communities,\n      LoadMoreFormik,\n      discoverPath: discoverLocation.getPath({ tab: undefined }, undefined),\n      homePath: homeLocation.getPath(undefined, undefined)\n    };\n    return props;\n  }, [communities, isSidebarOpen, LoadMoreFormik]);\n  return <SidebarUI {...propsUI} />;\n};\n","import styled from 'ui/themes/styled';\nimport React, { FC, ReactElement } from 'react';\nimport { Box, Flex } from 'rebass/styled-components';\nimport { Settings, LogOut } from 'react-feather';\nimport Avatar from 'ui/elements/Avatar';\nimport { NavLink } from 'react-router-dom';\n// import  Button  from 'ui/elements/Button';\n\nexport const Burger: FC<{ open: boolean; setOpen: (_: boolean) => unknown }> = ({\n  open,\n  setOpen\n}) => {\n  return (\n    <StyledBurger open={open} onClick={() => setOpen(!open)}>\n      <div />\n      <div />\n      <div />\n    </StyledBurger>\n  );\n};\nexport interface MenuProps {\n  open: boolean;\n  Side: ReactElement;\n  setOpen(_: boolean): any;\n  userImage: string;\n  name: string;\n  username: string;\n  signout(): any;\n}\nexport const Menu: FC<MenuProps> = ({\n  open,\n  Side,\n  setOpen,\n  userImage,\n  name,\n  username,\n  signout\n}) => {\n  return (\n    <>\n      {open && <Background onClick={() => setOpen(false)} />}\n      <StyledMenu open={open}>\n        <Profile>\n          <User>\n            <Avatar size=\"s\" src={userImage} />\n            <Title>{name}</Title>\n            <Username>{username}</Username>\n            <Span to={'/settings'}>\n              <Settings size=\"24\" strokeWidth={1} color={'#333'} />\n            </Span>\n          </User>\n          {/* <Button variant=\"primary\">Create a new community</Button> */}\n        </Profile>\n\n        <Communities>{Side}</Communities>\n\n        <Bottom>\n          <List>\n            <Item onClick={signout}>\n              <LogOut size={18} />\n              <Box ml={2}>Sign out</Box>\n            </Item>\n          </List>\n        </Bottom>\n      </StyledMenu>\n    </>\n  );\n};\n\nconst Bottom = styled(Box)``;\n\nconst Profile = styled(Box)`\n  padding: 16px;\n  border-bottom: ${props => props.theme.colors.border};\n`;\nconst User = styled(Box)`\n  position: relative;\n  > div:first-of-type {\n    width: 60px;\n    height: 60px;\n    border-radius: 60px;\n  }\n`;\n\nconst Span = styled(NavLink)`\n  position: absolute;\n  top: 0;\n  right: 0;\n  line-height: initial;\n`;\nconst Title = styled(Box)`\n  line-height: initial;\n  margin-top: 8px;\n  font-size: 22px;\n  font-weight: 700;\n  color: ${props => props.theme.colors.dark};\n`;\nconst Username = styled(Box)`\n  line-height: initial;\n  margin-top: 8px;\n  font-size: 16px;\n  font-weight: 500;\n  color: ${props => props.theme.colors.mediumdark};\n`;\nconst Communities = styled(Box)`\n  overflow: scroll;\n  padding: 16px;\n`;\n\nconst List = styled.div<{ lined?: boolean }>`\n  border-top: 1px solid ${props => props.theme.colors.medium};\n`;\nconst Item = styled(Flex)`\n  line-height: 60px;\n  height: 60px;\n  cursor: pointer;\n  align-items: center;\n  margin: 0 auto;\n  text-align: center;\n  width: 100px;\n  svg {\n    stroke: ${props => props.theme.colors.dark};\n  }\n  div {\n    font-weight: 600;\n    color: ${props => props.theme.colors.dark};\n  }\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n  }\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n  &:hover {\n    color: ${props => props.theme.colors.primary};\n  }\n`;\n\nconst Background = styled(Box)<{ open: boolean }>`\n  z-index: 99998;\n  background: rgba(0,0,0,.9);\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  height: calc(100vh - 75px);\n  cursor: pointer;\n  transition: opacity 0.3s ease-in-out;\n  // transform: ${({ open }) => (open ? '' : 'translateX(-100%)')};\n`;\n\nexport const StyledBurger = styled.button<{ open: boolean }>`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  width: 18px;\n  height: 18px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  z-index: 10;\n  line-height: 75px;\n  margin: 0 auto;\n  margin-top: 26px;\n  &:focus {\n    outline: none;\n  }\n\n  div {\n    width: 18px;\n    height: 2px;\n    background: ${({ theme, open }) => (open ? theme.colors.primary : theme.colors.darker)};\n    border-radius: 10px;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n\n    :first-child {\n      transform: ${({ open }) => (open ? 'rotate(45deg)' : 'rotate(0)')};\n    }\n\n    :nth-child(2) {\n      opacity: ${({ open }) => (open ? '0' : '1')};\n      transform: ${({ open }) => (open ? 'translateX(20px)' : 'translateX(0)')};\n    }\n\n    :nth-child(3) {\n      transform: ${({ open }) => (open ? 'rotate(-45deg)' : 'rotate(0)')};\n    }\n  }\n`;\n\nexport const StyledMenu = styled.nav<{ open: boolean }>`\n  background: ${({ theme }) => theme.colors.appInverse};\n  height: calc(100vh - 75px);\n  text-align: left;\n  position: absolute;\n  z-index: 999999999999;\n  top: 0;\n  left: 0;\n  bottom: 0px;\n  right: 16px;\n  transition: transform 0.3s ease-in-out;\n  transform: ${({ open }) => (open ? 'translateX(0)' : 'translateX(-100%)')};\n  // overflow: scroll;\n  display: grid;\n  grid-template-rows: 160px 1fr 60px;\n  @media (max-width: ${({ theme }) => theme.mobile}) {\n    width: 100%;\n  }\n`;\n","import React, { ReactElement } from 'react';\nimport { Box } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\nimport media from 'styled-media-query';\nimport { ChevronLeft } from 'react-feather';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { Burger, Menu } from 'ui/modules/Burger';\nimport Avatar from 'ui/elements/Avatar';\nimport { Image } from 'rebass';\nimport { logo_small_url } from 'mn-constants';\n\nexport interface SidebarProps {\n  SidebarBox: ReactElement;\n  HeaderBox: ReactElement;\n  SearchBox: ReactElement;\n  userImage: string;\n  userLink: string;\n  username: string;\n  name: string;\n  signout(): any;\n}\n\nexport const WithSidebar: React.FC<SidebarProps> = ({\n  SidebarBox,\n  HeaderBox,\n  SearchBox,\n  children,\n  userImage,\n  userLink,\n  username,\n  name,\n  signout\n}) => {\n  const [open, setOpen] = React.useState(false);\n  const history = useHistory();\n  return (\n    <Page>\n      <SearchBar>\n        <Icon onClick={() => history.goBack()}>\n          <ChevronLeft size=\"20\" />\n        </Icon>\n        {SearchBox}\n      </SearchBar>\n      <Header>{HeaderBox}</Header>\n      <Wrapper>\n        <Panel className=\"panel_sidebar\">\n          <Sidebar>{SidebarBox}</Sidebar>\n        </Panel>\n        <Panel>\n          <Content>{children}</Content>\n        </Panel>\n      </Wrapper>\n      <Footer>\n        <FootWrapper>\n          <Burger open={open} setOpen={setOpen} />\n          <Menu\n            username={username}\n            name={name}\n            userImage={userImage}\n            signout={signout}\n            open={open}\n            setOpen={setOpen}\n            Side={SidebarBox}\n          />\n        </FootWrapper>\n        <FootWrapper>\n          <NavLink to=\"/\">\n            <Logo>\n              <Image src={logo_small_url} />\n            </Logo>\n            {/* <Home size=\"18\" /> */}\n          </NavLink>\n        </FootWrapper>\n        <FootWrapper>\n          <Bavatar>\n            <NavLink to={userLink}>\n              <Avatar src={userImage} size=\"m\" />\n            </NavLink>\n          </Bavatar>\n        </FootWrapper>\n      </Footer>\n    </Page>\n  );\n};\n\nconst Logo = styled(Box)`\n  img {\n    width: 36px;\n    height: 36px;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n`;\n\nconst Bavatar = styled(Box)`\n  div {\n    max-width: 36px;\n    height: 36px;\n    min-width: 36px;\n    margin: 0 auto;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n`;\n\nconst Icon = styled(Box)`\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ${props => props.theme.colors.lighter};\n    svg {\n      stroke: ${props => props.theme.colors.primary};\n    }\n  }\n  svg {\n    stroke: ${props => props.theme.colors.mediumdark};\n    margin: 0 auto;\n  }\n`;\n\nconst SearchBar = styled(Box)`\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ${props => props.theme.colors.appInverse}\nborder-bottom: ${props => props.theme.colors.border};\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  font-size: 13px;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ${props => props.theme.colors.app};\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 24px;\n  flex:1;\n}\n${media.greaterThan('medium')`\n    display: none;\n  `}\n`;\n\nconst FootWrapper = styled(Box)`\n  height: 75px;\n  line-height: 75px;\n  text-align: center;\n`;\n\nconst Footer = styled(Box)`\n  background: ${props => props.theme.colors.appInverse}\n  display: grid;\n  border-top: ${props => props.theme.colors.border};\n  grid-template-columns: 1fr 1fr 1fr;\n  ${media.greaterThan('medium')`\n    display: none;\n  `}\n\n`;\n\nconst Panel = styled(Box)`\n  display: grid;\n  grid-template-rows: auto;\n  height: calc(100vh - 58px);\n  &.panel_sidebar {\n    ${media.lessThan('medium')`\n    display: none;\n  `}\n  }\n  ${media.lessThan('medium')`\n  height: calc(100vh - 75px);\n  `}\n`;\n\nconst Page = styled(Box)`\n  height: 100vh;\n  display: grid;\n  ${media.greaterThan('large')`\n    grid-template-rows: 50px auto;\n    row-gap: 8px;\n  `}\n  ${media.lessThan('medium')`\n    grid-template-rows: 75px 1fr 75px;\n  `}\n`;\n\nconst Wrapper = styled(Box)`\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  \n  ${media.greaterThan('medium')`\n  grid-template-rows: auto;\n  grid-template-columns: 240px 1fr;\n  column-gap: 8px;\n  height: calc(100vh - 66px);\n  `}\n  ${media.lessThan('medium')`\n    height: calc(100vh - 150px);\n    overflow: overlay;\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n  `}\n  ${media.lessThan('small')`\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n  `}\n`;\n\nconst Sidebar = styled(Box)`\n  overflow: auto;\n`;\n\nconst Content = styled(Box)`\n  overflow: auto;\n`;\n\nconst Header = styled(Box)`\n  ${media.lessThan('medium')`\n    display: none;\n  `}\n`;\n","import { useMe } from 'fe/session/useMe';\nimport { MainHeaderHOC } from 'HOC/modules/Header/Header';\nimport { SidebarHOC } from 'HOC/modules/Sidebar/Sidebar';\nimport React, { FC, useMemo } from 'react';\nimport { SidebarProps, WithSidebar } from 'ui/templates/withSidebar';\nimport { GuestTemplate } from '../Guest/Guest';\nimport { ProvideSideBarContext } from 'HOC/context/SideBar';\nimport { SearchBox } from 'HOC/modules/SearchBox/SearchBox';\nimport { userLocation } from 'routes/UserPageRoute';\n\nexport interface WithSidebarTemplate {}\nexport const WithSidebarTemplate: FC<WithSidebarTemplate> = ({ children }) => {\n  const { loading, me, logout } = useMe();\n\n  const withSidebarProps = useMemo<null | SidebarProps>(() => {\n    const user = me?.user;\n    if (!user || loading) {\n      return null;\n    }\n    const userImage = user.icon?.url || '';\n    const userLink = userLocation.getPath({ tab: undefined, userId: user.id }, undefined);\n    const props: SidebarProps = {\n      SidebarBox: <SidebarHOC />,\n      HeaderBox: <MainHeaderHOC />,\n      SearchBox: <SearchBox />,\n      userImage,\n      userLink,\n      signout: logout,\n      username: user.displayUsername || '',\n      name: user.preferredUsername || ''\n    };\n    return props;\n  }, [loading, logout, me]);\n  // console.log('withSidebarProps', withSidebarProps);\n  return withSidebarProps ? (\n    <ProvideSideBarContext>\n      <WithSidebar {...withSidebarProps}>{children}</WithSidebar>\n    </ProvideSideBarContext>\n  ) : (\n    <GuestTemplate>{children}</GuestTemplate>\n  );\n};\n","import { AllCollectionsPage } from 'HOC/pages/all-collections/AllCollection';\nimport React, { FC } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\n\ninterface AllCollectionsPageRouter {}\nconst AllCollectionsPageRouter: FC<RouteComponentProps<\n  AllCollectionsPageRouter\n>> = () => {\n  //const props: AllCollectionsPage = {};\n  return (\n    <WithSidebarTemplate>\n      <AllCollectionsPage />\n    </WithSidebarTemplate>\n  );\n};\n\nexport const AllCollectionsPageRoute: RouteProps = {\n  exact: true,\n  path: '/collections',\n  component: AllCollectionsPageRouter\n};\n","import * as React from 'react';\nimport { Header } from 'ui/modules/Header';\nimport { WrapperPanel } from 'ui/elements/Panel';\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport { FormikHook } from 'ui/@types/types';\nimport { Wrapper, WrapperCont, MainContainer, HomeBox, ObjectsList } from 'ui/elements/Layout';\n\nexport interface Props {\n  CommunitiesBoxes: React.ReactElement;\n  LoadMoreFormik: FormikHook;\n}\n\nexport const AllCommunities: React.FC<Props> = ({ CommunitiesBoxes, LoadMoreFormik }) => {\n  return (\n    <MainContainer>\n      <HomeBox>\n        <WrapperCont>\n          <Wrapper>\n            <Header name=\"All Communities\" />\n            <ObjectsList>{CommunitiesBoxes}</ObjectsList>\n            <LoadMore LoadMoreFormik={LoadMoreFormik} />\n          </Wrapper>\n        </WrapperCont>\n      </HomeBox>\n      <WrapperPanel />\n    </MainContainer>\n  );\n};\n","import { useAllCommunities } from 'fe/community/all/useAllCommunities';\nimport { CommunityPreviewHOC } from 'HOC/modules/previews/community/CommunityPreview';\nimport React, { FC, useMemo } from 'react';\nimport {\n  AllCommunities as AllCommunitiesUI,\n  Props as AllCommunitiesUIProps\n} from 'ui/pages/allCommunities';\nimport { useFormik } from 'formik';\nimport { Box } from 'rebass';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n\nconst allCommunitiesPageTitle = t`All Communities`;\n\nexport interface AllCommunitiesPage {}\nexport const AllCommunitiesPage: FC<AllCommunitiesPage> = () => {\n  usePageTitle(allCommunitiesPageTitle);\n  const { allCommunitiesPage } = useAllCommunities();\n  const LoadMoreFormik = useFormik({\n    initialValues: {},\n    onSubmit: () => (allCommunitiesPage.ready ? allCommunitiesPage.next() : undefined)\n  });\n\n  const allCommunitiesUIProps = useMemo<AllCommunitiesUIProps>(() => {\n    const CommunitiesBoxes = (\n      <Box m={2}>\n        {allCommunitiesPage.edges.map(communityPreview => (\n          <CommunityPreviewHOC communityId={communityPreview.id} />\n        ))}\n      </Box>\n    );\n    const props: AllCommunitiesUIProps = {\n      CommunitiesBoxes,\n      LoadMoreFormik\n    };\n\n    return props;\n  }, [allCommunitiesPage, LoadMoreFormik]);\n\n  return <AllCommunitiesUI {...allCommunitiesUIProps} />;\n};\n","import { AllCommunitiesPage } from 'HOC/pages/all-communities/AllCommunities';\nimport React, { FC } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\n\ninterface AllCommunitiesPageRouter {}\nconst AllCommunitiesPageRouter: FC<RouteComponentProps<\n  AllCommunitiesPageRouter\n>> = () => {\n  //const props: AllCommunitiesPage = {};\n  return (\n    <WithSidebarTemplate>\n      <AllCommunitiesPage />\n    </WithSidebarTemplate>\n  );\n};\n\nexport const AllCommunitiesPageRoute: RouteProps = {\n  exact: true,\n  path: '/communities',\n  component: AllCommunitiesPageRouter\n};\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Box, Text } from 'rebass/styled-components';\nimport Button from 'ui/elements/Button';\nimport LogoContainer from 'ui/elements/Logo';\nimport styled from 'ui/themes/styled';\n\nconst LoginWrapper = styled.div`\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr;\n  grid-template-areas: 'form' 'footer';\n`;\n\nconst Container = styled.div`\n  margin: 0 auto;\n  width: 100%;\n  max-width: 900px;\n  margin-top: 60px;\n  padding: 16px;\n  padding-bottom: 50px;\n \n  }\n`;\n\nconst FormWrapper = styled(Box)`\n  margin-bottom: 100px;\n  width: 432px;\n`;\n\nexport interface Props {\n  result:\n    | null\n    | {\n        error: null;\n        username: string;\n      }\n    | {\n        error: string;\n      };\n}\n\nexport const ConfirmEmail: React.FC<Props> = ({ result }) => {\n  return (\n    <>\n      <Container>\n        <LoginWrapper>\n          <FormWrapper>\n            <LogoContainer />\n            <Wrapper>\n              <Box>\n                {!result ? (\n                  <Text variant=\"text\">Checking ...</Text>\n                ) : result.error === null ? (\n                  <>\n                    <Text variant=\"text\">Email confirmed</Text>\n                    <Text variant=\"text\" sx={{ fontWeight: 'bold', marginTop: '5px' }}>\n                      Welcome {result.username}!\n                    </Text>\n                  </>\n                ) : (\n                  <Text variant=\"text\">Error in email confirmation: {result.error}</Text>\n                )}\n              </Box>\n              <Browse>\n                <Link to={'/'}>\n                  <Button mt={3} variant=\"primary\">\n                    <Trans>Sign in</Trans>\n                  </Button>\n                </Link>\n              </Browse>\n            </Wrapper>\n          </FormWrapper>\n        </LoginWrapper>\n      </Container>\n    </>\n  );\n};\n\nexport default ConfirmEmail;\n\nconst Browse = styled(Box)`\n  text-align: center;\n  margin-top: 10px;\n`;\n\nconst Wrapper = styled.div`\n  background: #fff;\n  border-radius: 4px;\n  height: inherit;\n  padding: 30px 20px;\n  text-align: center;\n  height: fit-content;\n`;\n","import { useAnon } from 'fe/session/useAnon';\nimport React, { FC, useEffect, useMemo } from 'react';\nimport ConfirmEmailUI, { Props } from 'ui/pages/confirmEmail';\nimport { useHistory } from 'react-router-dom';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n\nexport interface ConfirmEmailPage {\n  token: string;\n}\n\nconst confirmEmailPageTitle = t`Confirm your email`;\n\nexport const ConfirmEmailPage: FC<ConfirmEmailPage> = ({ token }) => {\n  usePageTitle(confirmEmailPageTitle);\n  const { push } = useHistory();\n  const { confirmEmail, confirmEmailStatus } = useAnon();\n  const welcomeUsername = confirmEmailStatus.data?.confirmEmail?.me.user.name;\n  useEffect(() => {\n    if (welcomeUsername) {\n      setTimeout(() => push('/'), 2000);\n    }\n  }, [welcomeUsername, push]);\n\n  useEffect(() => {\n    confirmEmail(token);\n  }, [token, confirmEmail]);\n\n  const props = useMemo<Props>(\n    () =>\n      confirmEmailStatus.loading\n        ? { result: null }\n        : confirmEmailStatus.error\n        ? { result: { error: confirmEmailStatus.error.message } }\n        : welcomeUsername\n        ? { result: { error: null, username: welcomeUsername } }\n        : { result: { error: 'No Data Received' } },\n\n    [confirmEmailStatus, welcomeUsername]\n  );\n\n  return <ConfirmEmailUI {...props} />;\n};\n","import { ConfirmEmailPage } from 'HOC/pages/confirmEmail/ConfirmEmailPage';\nimport { GuestTemplate } from 'HOC/templates/Guest/Guest';\nimport React, { FC } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { RedirectAuthenticated } from './wrappers/RedirectBySession';\n\ninterface ConfirmEmailRouter {\n  token: string;\n}\nconst ConfirmEmailRouter: FC<RouteComponentProps<ConfirmEmailRouter>> = ({\n  match\n}) => {\n  return (\n    <RedirectAuthenticated to=\"/#welcome\">\n      <GuestTemplate>\n        <ConfirmEmailPage token={match.params.token} />\n      </GuestTemplate>\n    </RedirectAuthenticated>\n  );\n};\n\nexport const ConfirmEmailRoute: RouteProps = {\n  exact: true,\n  path: '/confirm-email/:token',\n  component: ConfirmEmailRouter\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input } from '@rebass/forms';\nimport * as React from 'react';\nimport { FormikHook } from 'ui/@types/types';\nimport Alert from 'ui/elements/Alert';\nimport Button from 'ui/elements/Button';\nimport LogoContainer from 'ui/elements/Logo';\nimport { AlertWrapper } from 'ui/modules/Modal';\nimport styled from 'ui/themes/styled';\n\nexport interface NewPasswordFormValues {\n  password: string;\n  passwordConfirm: string;\n}\n\nexport interface Props {\n  formik: FormikHook<NewPasswordFormValues>;\n}\n\nlet tt = {\n  placeholders: {\n    password: i18nMark('Enter your new password'),\n    passwordConfirm: i18nMark('Confirm your new password')\n  }\n};\n\nexport const CreateNewPassword: React.FC<Props> = ({ formik }) => {\n  return (\n    <>\n      <Container>\n        <LoginWrapper>\n          <FormWrapper>\n            <LogoContainer />\n            <Input\n              placeholder={tt.placeholders.password}\n              name=\"password\"\n              type=\"password\"\n              value={formik.values.password}\n              onChange={formik.handleChange}\n            />\n            {formik.errors.password && (\n              <AlertWrapper>\n                <Alert variant=\"negative\">{formik.errors.password}</Alert>\n              </AlertWrapper>\n            )}\n            <Spacer />\n            <Input\n              placeholder={tt.placeholders.passwordConfirm}\n              name=\"passwordConfirm\"\n              type=\"password\"\n              value={formik.values.passwordConfirm}\n              onChange={formik.handleChange}\n            />\n            {formik.errors.passwordConfirm && (\n              <AlertWrapper>\n                <Alert variant=\"negative\">{formik.errors.passwordConfirm}</Alert>\n              </AlertWrapper>\n            )}\n            <Button\n              variant=\"primary\"\n              isSubmitting={formik.isSubmitting}\n              isDisabled={formik.isSubmitting}\n              type=\"submit\"\n              onClick={formik.submitForm}\n            >\n              <Trans>Save the new password</Trans>\n            </Button>\n          </FormWrapper>\n        </LoginWrapper>\n      </Container>\n    </>\n  );\n};\n\nexport default CreateNewPassword;\n\nconst LoginWrapper = styled.div`\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr;\n  grid-template-areas: 'form';\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n`;\n\nconst Container = styled.div`\n  margin: 0 auto;\n  width: 432px;\n  margin-top: 60px;\n  padding: 16px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    &:hover {\n      background: #d67218 !important;\n    }\n  }\n`;\n\nconst FormWrapper = styled.div`\n  grid-area: form;\n`;\n\nconst Spacer = styled.div`\n  width: 10px;\n  height: 10px;\n`;\n","import React, { FC, useMemo } from 'react';\nimport CreateNewPassword, { Props, NewPasswordFormValues } from 'ui/pages/createNewPassword';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { useAnon } from 'fe/session/useAnon';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n\nconst validationSchema = Yup.object().shape({\n  password: Yup.string()\n    .min(6)\n    .max(50)\n    .required('Password is required'),\n  passwordConfirm: Yup.string()\n    .oneOf([Yup.ref('password'), null], 'Passwords must match')\n    .required('Password confirm is required')\n});\nconst initialValues = { password: '', passwordConfirm: '' };\n\nexport interface CreateNewPasswordPageHOC {\n  token: string;\n}\n\nconst createNewPasswordPageTitle = t`reate new Password`;\n\nexport const CreateNewPasswordPageHOC: FC<CreateNewPasswordPageHOC> = ({ token }) => {\n  usePageTitle(createNewPasswordPageTitle);\n  const { resetPwd } = useAnon();\n  const formik = useFormik<NewPasswordFormValues>({\n    onSubmit: ({ password }) => resetPwd({ password, token }),\n    initialValues,\n    validationSchema\n  });\n  const props = useMemo<Props>(() => {\n    return {\n      formik\n    };\n  }, [formik]);\n\n  return <CreateNewPassword {...props} />;\n};\n","import { CreateNewPasswordPageHOC } from 'HOC/pages/createNewPassword/CreateNewPassword';\nimport { GuestTemplate } from 'HOC/templates/Guest/Guest';\nimport React, { FC, useMemo } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { RedirectAuthenticatedToHome } from './wrappers/RedirectBySession';\n\ninterface CreateNewPasswordPageRouter {\n  token: string;\n}\nconst CreateNewPasswordPageRouter: FC<RouteComponentProps<\n  CreateNewPasswordPageRouter\n>> = ({\n  match: {\n    params: { token }\n  }\n}) => {\n  const props = useMemo<CreateNewPasswordPageHOC>(() => {\n    return {\n      token\n    };\n  }, [token]);\n\n  return (\n    <RedirectAuthenticatedToHome>\n      <GuestTemplate withoutHeader>\n        <CreateNewPasswordPageHOC {...props} />\n      </GuestTemplate>\n    </RedirectAuthenticatedToHome>\n  );\n};\n\nexport const CreateNewPasswordPageRoute: RouteProps = {\n  exact: true,\n  path: '/reset/:token',\n  component: CreateNewPasswordPageRouter\n};\n","import * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport styled from 'ui/themes/styled';\nimport Button from 'ui/elements/Button';\nimport { Text, Box } from 'rebass/styled-components';\nimport { Input } from '@rebass/forms';\nimport { FormikHook } from 'ui/@types/types';\nimport Alert from 'ui/elements/Alert';\nimport { AlertWrapper } from 'ui/modules/Modal';\nimport { i18nMark } from '@lingui/react';\nimport LogoContainer from 'ui/elements/Logo';\nimport { Link } from 'react-router-dom';\n\nexport interface ResetPasswordFormValues {\n  email: string;\n}\n\nexport interface Props {\n  formik: FormikHook<ResetPasswordFormValues>;\n  isSubmitted: boolean;\n}\n\nlet tt = {\n  placeholders: {\n    email: i18nMark('Enter your email')\n  }\n};\n\nexport const ResetPassword: React.FC<Props> = ({ formik, isSubmitted }) => {\n  return (\n    <>\n      <Container>\n        <LoginWrapper>\n          <LogoContainer />\n          {isSubmitted ? (\n            <Wrapper>\n              <VerifiedBox variant=\"text\">\n                <Trans>\n                  If your email is linked to an account in our database, we have sent you an email\n                  with which you can reset your password. It may take a few minutes to arrive\n                  depending on your mail provider.\n                </Trans>\n              </VerifiedBox>\n              <ButtonLink to=\"/login\">\n                <Trans>Login</Trans>\n              </ButtonLink>\n            </Wrapper>\n          ) : (\n            <FormWrapper>\n              <Input\n                placeholder={tt.placeholders.email}\n                name=\"email\"\n                value={formik.values.email}\n                onChange={formik.handleChange}\n              />\n              {formik.errors.email && (\n                <AlertWrapper>\n                  <Alert variant=\"negative\">{formik.errors.email}</Alert>\n                </AlertWrapper>\n              )}\n              <Button\n                variant=\"primary\"\n                isSubmitting={formik.isSubmitting}\n                isDisabled={formik.isSubmitting}\n                type=\"submit\"\n                onClick={formik.submitForm}\n              >\n                <Trans>Reset the password</Trans>\n              </Button>\n            </FormWrapper>\n          )}\n        </LoginWrapper>\n      </Container>\n    </>\n  );\n};\n\nexport default ResetPassword;\n\nconst ButtonLink = styled(Link)`\n  background: ${props => props.theme.colors.primary};\n  padding: 8px 16px;\n  border-radius: 4px;\n  text-decoration: none;\n  font-weight: 600;\n  color: ${props => props.theme.colors.lighter};\n  margin-top: 16px;\n  margin: 0 auto;\n  display: block;\n  text-align: center;\n  margin-top: 16px;\n`;\n\nconst Wrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 4px;\n  padding: 16px;\n  max-width: 400px;\n`;\n\nconst VerifiedBox = styled(Text)``;\n\nconst LoginWrapper = styled.div`\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n`;\n\nconst Container = styled.div`\n  margin: 0 auto;\n  max-width: 900px;\n  margin-top: 60px;\n  padding: 16px;\n  padding-bottom: 50px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    color: #fff !important;\n    text-transform: uppercase\n      &:hover {\n      background: #d67218 !important;\n    }\n  }\n`;\n\nconst FormWrapper = styled.form`\n  width: 432px;\n`;\n","import { useFormik } from 'formik';\nimport React, { FC } from 'react';\nimport ResetPasswordRequestPage, { ResetPasswordFormValues } from 'ui/pages/resetPassword';\nimport * as Yup from 'yup';\nimport { useAnon } from 'fe/session/useAnon';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n\nexport const validationSchema: Yup.ObjectSchema<ResetPasswordFormValues> = Yup.object<\n  ResetPasswordFormValues\n>({\n  email: Yup.string()\n    .max(50)\n    .required()\n});\nconst initialValues: ResetPasswordFormValues = {\n  email: ''\n};\nexport interface Props {}\n\nconst resetPasswordPageTitle = t`Reset Password`;\n\nexport const ResetPasswordPageHOC: FC<Props> = () => {\n  usePageTitle(resetPasswordPageTitle);\n  const { resetPwdReq } = useAnon();\n  const formik = useFormik<ResetPasswordFormValues>({\n    onSubmit: ({ email }) => resetPwdReq(email),\n    initialValues,\n    validationSchema\n  });\n  return (\n    <ResetPasswordRequestPage\n      formik={formik}\n      isSubmitted={formik.submitCount > 0 ? true : false} // https://github.com/jaredpalmer/formik/issues/213#issuecomment-619593592 // Double-Check if correct\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { GuestTemplate } from 'HOC/templates/Guest/Guest';\nimport { ResetPasswordPageHOC } from 'HOC/pages/resetPasswordRequest/resetPasswordRequestPage';\nimport { RedirectAuthenticatedToHome } from './wrappers/RedirectBySession';\n\ninterface ResetPasswordPageRouter {}\nconst ResetPasswordPageRouter: FC<RouteComponentProps<\n  ResetPasswordPageRouter\n>> = ({ match }) => {\n  return (\n    <RedirectAuthenticatedToHome>\n      <GuestTemplate withoutHeader>\n        <ResetPasswordPageHOC />\n      </GuestTemplate>\n    </RedirectAuthenticatedToHome>\n  );\n};\n\nexport const ResetPasswordPageRoute: RouteProps = {\n  exact: true,\n  path: '/reset',\n  component: ResetPasswordPageRouter\n};\n","import * as Types from '../../graphql/types.generated';\n\nimport gql from 'graphql-tag';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\nexport type SearchHostIndexAndMyFollowsQueryVariables = {};\n\n\nexport type SearchHostIndexAndMyFollowsQuery = (\n  { __typename: 'RootQueryType' }\n  & { instance: Types.Maybe<(\n    { __typename: 'Instance' }\n    & SearchInstanceFragment\n  )>, me: Types.Maybe<(\n    { __typename: 'Me' }\n    & SearchMeFragment\n  )> }\n);\n\nexport type SearchInstanceFragment = (\n  { __typename: 'Instance' }\n  & Pick<Types.Instance, 'hostname'>\n);\n\nexport type SearchMeFragment = (\n  { __typename: 'Me' }\n  & { searchFollows: Array<(\n    { __typename: 'SearchFollow' }\n    & Pick<Types.SearchFollow, 'canonicalUrl' | 'collectionId' | 'communityId' | 'followId' | 'isCreator'>\n  )> }\n);\n\nexport type SearchFollowMutationVariables = {\n  url: Types.Scalars['String']\n};\n\n\nexport type SearchFollowMutation = (\n  { __typename: 'RootMutationType' }\n  & { createFollowByUrl: Types.Maybe<(\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  )> }\n);\n\nexport type SearchUnfollowMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type SearchUnfollowMutation = (\n  { __typename: 'RootMutationType' }\n  & { delete: Types.Maybe<{ __typename: 'Collection' } | { __typename: 'Comment' } | { __typename: 'Community' } | { __typename: 'Feature' } | { __typename: 'Flag' } | { __typename: 'Follow' } | { __typename: 'Like' } | { __typename: 'Resource' } | { __typename: 'Thread' } | { __typename: 'User' }> }\n);\n\nexport const SearchInstanceFragmentDoc = gql`\n    fragment SearchInstance on Instance {\n  hostname\n}\n    `;\nexport const SearchMeFragmentDoc = gql`\n    fragment SearchMe on Me {\n  searchFollows {\n    canonicalUrl\n    collectionId\n    communityId\n    followId\n    isCreator\n  }\n}\n    `;\nexport const SearchHostIndexAndMyFollowsDocument = gql`\n    query SearchHostIndexAndMyFollows {\n  instance {\n    ...SearchInstance\n  }\n  me {\n    ...SearchMe\n  }\n}\n    ${SearchInstanceFragmentDoc}\n${SearchMeFragmentDoc}`;\n\n/**\n * __useSearchHostIndexAndMyFollowsQuery__\n *\n * To run a query within a React component, call `useSearchHostIndexAndMyFollowsQuery` and pass it any options that fit your needs.\n * When your component renders, `useSearchHostIndexAndMyFollowsQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useSearchHostIndexAndMyFollowsQuery({\n *   variables: {\n *   },\n * });\n */\nexport function useSearchHostIndexAndMyFollowsQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<SearchHostIndexAndMyFollowsQuery, SearchHostIndexAndMyFollowsQueryVariables>) {\n        return ApolloReactHooks.useQuery<SearchHostIndexAndMyFollowsQuery, SearchHostIndexAndMyFollowsQueryVariables>(SearchHostIndexAndMyFollowsDocument, baseOptions);\n      }\nexport function useSearchHostIndexAndMyFollowsLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<SearchHostIndexAndMyFollowsQuery, SearchHostIndexAndMyFollowsQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<SearchHostIndexAndMyFollowsQuery, SearchHostIndexAndMyFollowsQueryVariables>(SearchHostIndexAndMyFollowsDocument, baseOptions);\n        }\nexport type SearchHostIndexAndMyFollowsQueryHookResult = ReturnType<typeof useSearchHostIndexAndMyFollowsQuery>;\nexport type SearchHostIndexAndMyFollowsLazyQueryHookResult = ReturnType<typeof useSearchHostIndexAndMyFollowsLazyQuery>;\nexport type SearchHostIndexAndMyFollowsQueryResult = ApolloReactCommon.QueryResult<SearchHostIndexAndMyFollowsQuery, SearchHostIndexAndMyFollowsQueryVariables>;\nexport const SearchFollowDocument = gql`\n    mutation searchFollow($url: String!) {\n  createFollowByUrl(url: $url) {\n    id\n  }\n}\n    `;\nexport type SearchFollowMutationFn = ApolloReactCommon.MutationFunction<SearchFollowMutation, SearchFollowMutationVariables>;\n\n/**\n * __useSearchFollowMutation__\n *\n * To run a mutation, you first call `useSearchFollowMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useSearchFollowMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [searchFollowMutation, { data, loading, error }] = useSearchFollowMutation({\n *   variables: {\n *      url: // value for 'url'\n *   },\n * });\n */\nexport function useSearchFollowMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<SearchFollowMutation, SearchFollowMutationVariables>) {\n        return ApolloReactHooks.useMutation<SearchFollowMutation, SearchFollowMutationVariables>(SearchFollowDocument, baseOptions);\n      }\nexport type SearchFollowMutationHookResult = ReturnType<typeof useSearchFollowMutation>;\nexport type SearchFollowMutationResult = ApolloReactCommon.MutationResult<SearchFollowMutation>;\nexport type SearchFollowMutationOptions = ApolloReactCommon.BaseMutationOptions<SearchFollowMutation, SearchFollowMutationVariables>;\nexport const SearchUnfollowDocument = gql`\n    mutation searchUnfollow($contextId: String!) {\n  delete(contextId: $contextId) {\n    __typename\n  }\n}\n    `;\nexport type SearchUnfollowMutationFn = ApolloReactCommon.MutationFunction<SearchUnfollowMutation, SearchUnfollowMutationVariables>;\n\n/**\n * __useSearchUnfollowMutation__\n *\n * To run a mutation, you first call `useSearchUnfollowMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useSearchUnfollowMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [searchUnfollowMutation, { data, loading, error }] = useSearchUnfollowMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useSearchUnfollowMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<SearchUnfollowMutation, SearchUnfollowMutationVariables>) {\n        return ApolloReactHooks.useMutation<SearchUnfollowMutation, SearchUnfollowMutationVariables>(SearchUnfollowDocument, baseOptions);\n      }\nexport type SearchUnfollowMutationHookResult = ReturnType<typeof useSearchUnfollowMutation>;\nexport type SearchUnfollowMutationResult = ApolloReactCommon.MutationResult<SearchUnfollowMutation>;\nexport type SearchUnfollowMutationOptions = ApolloReactCommon.BaseMutationOptions<SearchUnfollowMutation, SearchUnfollowMutationVariables>;\n\n\nexport interface SearchHostIndexAndMyFollowsQueryOperation {\n  operationName: 'SearchHostIndexAndMyFollows'\n  result: SearchHostIndexAndMyFollowsQuery\n  variables: SearchHostIndexAndMyFollowsQueryVariables\n  type: 'query'\n}\nexport const SearchHostIndexAndMyFollowsQueryName:SearchHostIndexAndMyFollowsQueryOperation['operationName'] = 'SearchHostIndexAndMyFollows'\n\nexport const SearchHostIndexAndMyFollowsQueryRefetch = (\n  variables:SearchHostIndexAndMyFollowsQueryVariables, \n  context?:any\n)=>({\n  query:SearchHostIndexAndMyFollowsDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface SearchFollowMutationOperation {\n  operationName: 'searchFollow'\n  result: SearchFollowMutation\n  variables: SearchFollowMutationVariables\n  type: 'mutation'\n}\nexport const SearchFollowMutationName:SearchFollowMutationOperation['operationName'] = 'searchFollow'\n\nexport const SearchFollowMutationRefetch = (\n  variables:SearchFollowMutationVariables, \n  context?:any\n)=>({\n  query:SearchFollowDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface SearchUnfollowMutationOperation {\n  operationName: 'searchUnfollow'\n  result: SearchUnfollowMutation\n  variables: SearchUnfollowMutationVariables\n  type: 'mutation'\n}\nexport const SearchUnfollowMutationName:SearchUnfollowMutationOperation['operationName'] = 'searchUnfollow'\n\nexport const SearchUnfollowMutationRefetch = (\n  variables:SearchUnfollowMutationVariables, \n  context?:any\n)=>({\n  query:SearchUnfollowDocument,\n  variables,\n  context\n})\n      \n","import { CollectionHit, CommunityHit, ResourceHit } from 'fe/search/Hits';\nimport Maybe from 'graphql/tsutils/Maybe';\nimport { CollectionPreviewFragment } from 'HOC/modules/previews/collection/CollectionPreview.generated';\nimport { CommunityPreviewFragment } from 'HOC/modules/previews/community/CommunityPreview.generated';\nimport { ResourcePreviewFragment } from 'HOC/modules/previews/resource/ResourcePreview.generated';\n\nexport const resourceHit2gql = (args: {\n  resource: Maybe<ResourceHit>;\n  isLocal: boolean;\n  isFile: boolean;\n}): ResourcePreviewFragment | null => {\n  const { resource, isLocal, isFile } = args;\n  const collection = collectionHit2gql(resource?.collection, isLocal);\n  const url = resource?.url;\n  if (!(resource && collection && url)) {\n    return null;\n  }\n  const {\n    name,\n    canonicalUrl,\n    icon,\n    licence,\n    summary,\n    // url,\n    mediaType,\n    // createdAt,\n    // index_instance,\n    index_mothership_object_id,\n    // index_type,\n    // objectID,\n    // updatedAt,\n    // collection,\n    likes\n  } = resource;\n  return {\n    __typename: 'Resource',\n    canonicalUrl: canonicalUrl || '',\n    collection,\n    icon: icon ? { __typename: 'Content', id: '', url: icon } : null,\n    name,\n    summary: summary || '',\n    license: licence,\n    id: index_mothership_object_id,\n    likers: {\n      __typename: 'LikesPage',\n      totalCount: parseInt(likes?.totalCount || '0') || 0\n    },\n    myFlag: null,\n    myLike: null,\n    payload: {\n      __typename: 'Content',\n      id: '',\n      url,\n      mirror: { __typename: 'ContentMirror', url },\n      mediaType: mediaType || '',\n      upload: isFile ? { __typename: 'ContentUpload' } : null\n    }\n  };\n};\n\nexport const collectionHit2gql = (\n  collection: Maybe<CollectionHit>,\n  isLocal: boolean\n): CollectionPreviewFragment | null => {\n  const community = communityHit2gql(collection?.community, isLocal);\n  if (!(collection && community)) {\n    return null;\n  }\n  const {\n    preferredUsername,\n    canonicalUrl,\n    icon,\n    summary,\n    // createdAt,\n    // index_instance,\n    index_mothership_object_id,\n    // index_type,\n    name\n    // objectID,\n    // community,\n    // followers\n  } = collection;\n  return {\n    __typename: 'Collection',\n    community,\n    displayUsername: name,\n    icon: icon ? { __typename: 'Content', id: '', url: icon } : null,\n    id: index_mothership_object_id,\n    isLocal,\n    myFlag: null,\n    myFollow: null,\n    name,\n    canonicalUrl,\n    summary,\n    preferredUsername\n  };\n};\n\nexport const communityHit2gql = (\n  community: Maybe<CommunityHit>,\n  isLocal: boolean\n): CommunityPreviewFragment | null => {\n  if (!community) {\n    return null;\n  }\n  const {\n    name,\n    preferredUsername,\n    summary,\n    canonicalUrl,\n    icon,\n    // createdAt,\n    // index_instance,\n    index_mothership_object_id,\n    // index_type,\n    // objectID,\n    followers\n    // image\n  } = community;\n  return {\n    __typename: 'Community',\n    icon: icon ? { __typename: 'Content', id: '', url: icon } : null,\n    id: index_mothership_object_id,\n    isLocal,\n    name,\n    canonicalUrl,\n    summary,\n    followerCount: followers?.totalCount || 0,\n    threads: { totalCount: 0, __typename: 'ThreadsPage' },\n    displayUsername: name,\n    myFlag: null,\n    myFollow: null,\n    collectionCount: 0,\n    preferredUsername,\n    creator: null // FIXME: get it from BE\n  };\n};\n","import {\n  ResourceLMS,\n  CollectionLMS,\n  CommunityLMS,\n  ResourceHitMin,\n  CollectionHitMin,\n  CommunityHitMin\n} from './types';\nimport Maybe from 'graphql/tsutils/Maybe';\n\nexport const resourceHit2lms = (resource: Maybe<ResourceHitMin>): ResourceLMS | null => {\n  const collection = collectionHit2lms(resource?.collection);\n  if (!(resource && collection)) {\n    return null;\n  }\n  const { name, canonicalUrl, icon, licence, summary, url, mediaType } = resource;\n  return {\n    canonicalUrl: canonicalUrl || '',\n    collection,\n    icon: icon || '',\n    name,\n    summary: summary || '',\n    url: url || '',\n    licence: licence || '',\n    mediaType: mediaType || ''\n  };\n};\n\nexport const collectionHit2lms = (collection: Maybe<CollectionHitMin>): CollectionLMS | null => {\n  const community = communityHit2lms(collection?.community);\n  if (!(collection && community)) {\n    return null;\n  }\n  const { preferredUsername, canonicalUrl, icon, summary, name } = collection;\n  return {\n    canonicalUrl: canonicalUrl || '',\n    icon,\n    name,\n    preferredUsername,\n    summary: summary || '',\n    community\n  };\n};\n\nexport const communityHit2lms = (community: Maybe<CommunityHitMin>): CommunityLMS | null => {\n  if (!community) {\n    return null;\n  }\n  const { name, preferredUsername, icon, summary, canonicalUrl } = community;\n  return {\n    canonicalUrl: canonicalUrl || '',\n    icon: icon || '',\n    name,\n    preferredUsername,\n    summary: summary || ''\n  };\n};\n","import { Trans } from '@lingui/macro';\nimport React, { SFC, ReactElement } from 'react';\nimport { Box } from 'rebass/styled-components';\nimport { HomeBox, MainContainer, Wrapper, WrapperCont } from 'ui/elements/Layout';\nimport { Nav, Panel, PanelTitle, WrapperPanel } from 'ui/elements/Panel';\nimport { Header } from 'ui/modules/Header';\nimport styled from 'ui/themes/styled';\n\nexport interface Props {\n  previews: ReactElement[];\n  Pagination: ReactElement;\n  Filter: ReactElement;\n}\n\nexport const Search: SFC<Props> = ({ previews, Pagination, Filter }) => {\n  return (\n    <>\n      <link\n        rel=\"stylesheet\"\n        href=\"https://cdn.jsdelivr.net/npm/instantsearch.css@7.1.1/themes/reset-min.css\"\n      />\n      <MainContainer>\n        <HomeBox>\n          <SearchWrapper>\n            <WrapperCont>\n              <Wrapper>\n                <Header name=\"Search results\" />\n                <Box>\n                  {previews.map(El => (\n                    <Box m={2} key={El.key}>\n                      {El}\n                    </Box>\n                  ))}\n                </Box>\n              </Wrapper>\n              <Box m={2}>{Pagination}</Box>\n            </WrapperCont>\n          </SearchWrapper>\n        </HomeBox>\n        <WrapperPanel>\n          <Panel>\n            <PanelTitle fontSize={0} fontWeight={'bold'}>\n              <Trans>Filters</Trans>\n            </PanelTitle>\n            <Nav>\n              <NavWrapper>{Filter}</NavWrapper>\n            </Nav>\n          </Panel>\n        </WrapperPanel>\n      </MainContainer>\n    </>\n  );\n};\n\nconst NavWrapper = styled(Box)`\n  li {\n    height: 40px;\n    line-height: 40px;\n    input {\n      margin-right: 8px;\n    }\n  }\n`;\n\nconst SearchWrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  max-width: 600px;\n`;\n","import { useInstanceInfoQuery } from 'fe/instance/info/useInstanceInfo.generated';\nimport { mnCtx } from 'fe/lib/graphql/ctx';\nimport { MoodlePanelHOC } from 'HOC/modules/MoodlePanel/MoodlePanel';\nimport { CollectionHit, CommunityHit, Hit, ResourceHit } from 'fe/search/Hits';\nimport {\n  useSearchFollowMutation,\n  useSearchHostIndexAndMyFollowsQuery,\n  useSearchUnfollowMutation\n} from 'fe/search/SearchData.generated';\nimport { useFormik } from 'formik';\nimport {\n  collectionHit2gql,\n  communityHit2gql,\n  resourceHit2gql\n} from 'fe/lib/moodleLMS/mappings/hit2GQL';\nimport { resourceHit2lms } from 'fe/lib/moodleLMS/mappings/hit2LMS';\nimport { collectionFragment2UIProps } from 'HOC/modules/previews/collection/CollectionPreview';\nimport { communityFragment2UIProps } from 'HOC/modules/previews/community/CommunityPreview';\nimport { resourceFragment2UIProps } from 'HOC/modules/previews/resource/ResourcePreview';\nimport * as React from 'react';\nimport { ReactElement } from 'react';\nimport {\n  Configure,\n  connectInfiniteHits,\n  Pagination,\n  RefinementList\n} from 'react-instantsearch-dom';\nimport Modal from 'ui/modules/Modal';\nimport { Collection } from 'ui/modules/Previews/Collection';\nimport { Community } from 'ui/modules/Previews/Community';\nimport { Props as ResourceProps, Resource } from 'ui/modules/Previews/Resource';\nimport { Props, Search } from 'ui/pages/search';\n\nconst _SearchPageHOC: React.FC<{ hits: Hit[] }> = ({ hits }) => {\n  // console.log(hits);\n  const previews = React.useMemo(\n    () =>\n      hits\n        .map(hit => {\n          if (hit.index_type === 'Collection') {\n            return <CollectionPreviewHit hit={hit} key={hit.objectID} />;\n          } else if (hit.index_type === 'Resource') {\n            return <ResourcePreviewHit hit={hit} key={hit.objectID} />;\n          } else if (hit.index_type === 'Community') {\n            return <CommunityPreviewHit hit={hit} key={hit.objectID} />;\n          } else {\n            console.warn(`Could not preview searchHit:`, hit);\n            return null;\n          }\n        })\n        .filter((_): _ is ReactElement => !!_),\n    [hits]\n  );\n\n  const props: Props = {\n    previews,\n    Pagination: <Pagination showNext />,\n    Filter: <RefinementList attribute=\"index_type\" />\n  };\n\n  return (\n    <>\n      <Configure hitsPerPage={8} />\n      <Search {...props} />\n    </>\n  );\n};\n\nexport const SearchPageHOC = connectInfiniteHits(_SearchPageHOC);\n\nconst CollectionPreviewHit: React.FC<{ hit: CollectionHit }> = ({ hit }) => {\n  const isLocal = useIsLocal(hit);\n  const previewFragment = collectionHit2gql(hit, isLocal);\n  const { toggleFollowFormik } = useFollowHitHelper(hit);\n  const props =\n    previewFragment &&\n    collectionFragment2UIProps({\n      collection: previewFragment,\n      hideActions: false,\n      toggleFollowFormik\n    });\n  !props && console.warn(`Could not preview searchHit:`, hit);\n  // console.log(`Collection:`, props)\n  return props && <Collection isSearch {...props} />;\n};\n\nconst CommunityPreviewHit: React.FC<{ hit: CommunityHit }> = ({ hit }) => {\n  const isLocal = useIsLocal(hit);\n  const previewFragment = communityHit2gql(hit, isLocal);\n  const { toggleFollowFormik: toggleJoinFormik, hitSearchFollow } = useFollowHitHelper(hit);\n  const props =\n    previewFragment &&\n    communityFragment2UIProps({\n      community: previewFragment,\n      hideActions: false,\n      toggleJoinFormik,\n      isCreator: !!hitSearchFollow?.isCreator\n    });\n  !props && console.warn(`Could not preview searchHit:`, hit);\n  // console.log(`Community:`, props)\n  return props && <Community isSearch {...props} />;\n};\n\nconst ResourcePreviewHit: React.FC<{ hit: ResourceHit }> = ({ hit }) => {\n  const isLocal = useIsLocal(hit);\n  const { data } = useInstanceInfoQuery();\n\n  const isFile = !!(data?.instance?.uploadResourceTypes || []).find(\n    uploadResType =>\n      uploadResType.toLowerCase() !== 'text/html' &&\n      uploadResType.toLowerCase() === hit.mediaType?.toLowerCase()\n  );\n  // console.table({ name:hit.name, isLocal, isFile })\n  // console.log(hit, data?.instance?.uploadResourceTypes)\n  const previewFragment = resourceHit2gql({ resource: hit, isLocal, isFile });\n\n  const [isOpenSendToMoodle, toggleSendToMoodleModal] = React.useReducer(is => !is, false);\n  const [isOpenDropdown, toggleDropdown] = React.useReducer(is => !is, false);\n\n  const props: ResourceProps | null = previewFragment && {\n    ...resourceFragment2UIProps({\n      resource: previewFragment,\n      hideActions: false,\n      like: null\n    }),\n    isOpenDropdown,\n    toggleDropdown,\n    toggleFlag: null,\n    sendToMoodle: toggleSendToMoodleModal\n  };\n  !props && console.warn(`Could not preview searchHit:`, hit);\n\n  const resourceLMS = React.useMemo(() => resourceHit2lms(hit), [hit]);\n  const MoodleModal =\n    resourceLMS && isOpenSendToMoodle ? (\n      <Modal closeModal={toggleSendToMoodleModal}>\n        <MoodlePanelHOC done={toggleSendToMoodleModal} resource={resourceLMS} />\n      </Modal>\n    ) : null;\n  // console.log(`Resource:`, props)\n  return (\n    props && (\n      <>\n        {MoodleModal}\n        <Resource isSearch {...props} />\n      </>\n    )\n  );\n};\n\nconst useIsLocal = (hit: Hit) => {\n  const { data } = useSearchHostIndexAndMyFollowsQuery({\n    context: mnCtx({ noShowError: true })\n  });\n  const localHostName = data?.instance?.hostname;\n  const isLocal = hit.index_instance === localHostName;\n  // console.log(`hit.index_instance:`, hit.index_instance)\n  // console.log(`localHostName:`, localHostName)\n  // console.log(`isLocal`,isLocal)\n  // console.log(`---`)\n  return isLocal;\n};\nconst useFollowHitHelper = (hit: Hit) => {\n  const { data } = useSearchHostIndexAndMyFollowsQuery({\n    context: mnCtx({ noShowError: true })\n  });\n  const [follow, followResult] = useSearchFollowMutation();\n  const [unfollow, unfollowResult] = useSearchUnfollowMutation();\n  const hitSearchFollow = React.useMemo(\n    () =>\n      (data?.me?.searchFollows || []).find(\n        searchFollow => searchFollow.canonicalUrl === hit.canonicalUrl\n      ),\n    [data, hit]\n  );\n\n  const canFollow = !hitSearchFollow?.followId;\n  const canUnfollow =\n    hitSearchFollow?.followId && !(hitSearchFollow.communityId && hitSearchFollow.isCreator);\n\n  const toggleFollowFormik = useFormik({\n    initialValues: {},\n    onSubmit: async () => {\n      if (!hit.canonicalUrl || followResult.loading || unfollowResult.loading) {\n        return;\n      }\n      if (hitSearchFollow && canUnfollow) {\n        return unfollow({\n          variables: {\n            contextId: hitSearchFollow.followId\n          }\n        });\n      } else if (canFollow) {\n        return follow({ variables: { url: hit.canonicalUrl } });\n      }\n      return;\n    }\n  });\n  return React.useMemo(\n    () => ({\n      toggleFollowFormik,\n      hitSearchFollow\n    }),\n    [toggleFollowFormik, hitSearchFollow]\n  );\n};\n","import { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\nimport { SearchPageHOC } from 'HOC/pages/search/Search';\nimport React, { FC } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { searchDisabled } from 'mn-constants';\nimport { NotFoundHOC } from 'HOC/pages/not-found/NotFound';\n\ninterface SearchPageRouter {}\nconst SearchPageRouter: FC<RouteComponentProps<SearchPageRouter>> = () => {\n  return searchDisabled ? (\n    <NotFoundHOC />\n  ) : (\n    <WithSidebarTemplate>\n      <SearchPageHOC />\n    </WithSidebarTemplate>\n  );\n};\n\nexport const SearchPageRoute: RouteProps = {\n  exact: false,\n  path: '/search',\n  component: SearchPageRouter\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input, Textarea } from '@rebass/forms';\nimport * as React from 'react';\nimport {\n  Droplet,\n\n  // Zap,\n  Flag,\n  Link,\n  Mail,\n  MapPin,\n  Monitor,\n  Settings as Sett,\n  Sliders\n} from 'react-feather';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\n// import { useHistory } from 'react-router';\nimport { HomeBox, MainContainer, Wrapper, WrapperCont } from 'ui/elements/Layout';\nimport DropzoneArea from 'ui/modules/DropzoneModal';\nimport { Actions, ContainerForm } from 'ui/modules/Modal';\nimport styled from 'ui/themes/styled';\nimport { ReactElement } from 'react';\n\nconst tt = {\n  placeholders: {\n    name: i18nMark('Display Name'),\n    summary: i18nMark('Please tell us a little bit about yourself...'),\n    location: i18nMark('Choose a location'),\n    website: i18nMark('Enter a URL to share more info about you')\n  }\n};\nexport enum Status {\n  Loading,\n  Loaded\n}\n\nexport interface SettingsLoading {\n  status: Status.Loading;\n}\n\nexport interface Props {\n  status?: Status.Loaded;\n  formik: FormikHook<EditProfile>;\n  sectionPaths: {\n    preferences: string;\n    instance: string;\n    invites: string;\n    flags: string;\n    logs: string;\n    general: string;\n  };\n  displayUsername: string;\n  isAdmin: boolean;\n  Preferences: ReactElement;\n  Instance: ReactElement;\n  Invites: ReactElement;\n  Flags: ReactElement;\n  ModerationLog: ReactElement;\n}\n\nexport interface EditProfile {\n  name: string;\n  summary: string;\n  icon: string | File | undefined;\n  image: string | File | undefined;\n  location: string;\n  website: string;\n}\n\nexport interface AddEmail {\n  email: string;\n}\n\nexport interface EditInstance {\n  inviteOnly: boolean;\n}\n\nexport const Settings: React.FC<Props> = ({\n  formik,\n  Preferences,\n  Instance,\n  Invites,\n  Flags,\n  ModerationLog,\n  displayUsername,\n  isAdmin,\n  sectionPaths\n}) => {\n  const onIconFileSelected = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, icon: file }),\n    [formik]\n  );\n  const initialIconUrl = 'string' === typeof formik.values.icon ? formik.values.icon : '';\n  const onImageFileSelected = React.useCallback(\n    (file: File) => formik.setValues({ ...formik.values, image: file }),\n    [formik]\n  );\n  const initialImageUrl = 'string' === typeof formik.values.image ? formik.values.image : '';\n\n  return (\n    <MainContainer>\n      <Sidebar sectionPaths={sectionPaths} isAdmin={isAdmin} />\n      <HomeBox>\n        <WrapperCont>\n          <Wrapper>\n            <SettingsWrapper>\n              <Switch>\n                <Route path={sectionPaths.preferences}>{Preferences}</Route>\n                <Route path={sectionPaths.instance}>{Instance}</Route>\n                <Route path={sectionPaths.invites}>{Invites}</Route>\n                <Route path={sectionPaths.flags}>{Flags}</Route>\n                <Route path={sectionPaths.logs}>{ModerationLog}</Route>\n                <Route path={sectionPaths.general}>\n                  <ProfileBox p={1} pb={2}>\n                    <Hero>\n                      <Flex>\n                        <Bg>\n                          <DropzoneArea\n                            initialUrl={initialImageUrl}\n                            filePattern=\"image/*\"\n                            onFileSelect={onImageFileSelected}\n                          />\n                        </Bg>\n                      </Flex>\n                      <FlexProfile>\n                        <WrapperHero>\n                          <Img>\n                            <DropzoneArea\n                              initialUrl={initialIconUrl}\n                              filePattern=\"image/*\"\n                              onFileSelect={onIconFileSelected}\n                            />\n                          </Img>\n                        </WrapperHero>\n                      </FlexProfile>\n                      <HeroInfo mt={2} ml={3}>\n                        <CollectionContainerForm>\n                          <Input\n                            placeholder={tt.placeholders.name}\n                            disabled={formik.isSubmitting}\n                            name=\"name\"\n                            value={formik.values.name}\n                            onChange={formik.handleChange}\n                          />\n                        </CollectionContainerForm>\n\n                        <Username mt={1} fontSize={2} p={2}>\n                          {displayUsername}\n                        </Username>\n                        <CollectionContainerForm>\n                          <Textarea\n                            placeholder={tt.placeholders.summary}\n                            disabled={formik.isSubmitting}\n                            name=\"summary\"\n                            value={formik.values.summary}\n                            onChange={formik.handleChange}\n                          />\n                        </CollectionContainerForm>\n                        <Location mt={2}>\n                          <span>\n                            <MapPin strokeWidth={1} size={20} />\n                          </span>\n                          <CollectionContainerForm>\n                            <Input\n                              placeholder={tt.placeholders.location}\n                              disabled={formik.isSubmitting}\n                              name=\"location\"\n                              value={formik.values.location}\n                              onChange={formik.handleChange}\n                            />\n                          </CollectionContainerForm>\n                        </Location>\n                        <RelevantLink mt={2}>\n                          <span>\n                            <Link strokeWidth={1} size={20} />\n                          </span>\n                          <CollectionContainerForm>\n                            <Input\n                              placeholder={tt.placeholders.website}\n                              disabled={formik.isSubmitting}\n                              name=\"website\"\n                              value={formik.values.website}\n                              onChange={formik.handleChange}\n                            />\n                          </CollectionContainerForm>\n                        </RelevantLink>\n                      </HeroInfo>\n                    </Hero>\n                    <Actions sx={{ height: 'inherit !important' }}>\n                      <Button\n                        variant=\"primary\"\n                        isSubmitting={formik.isSubmitting}\n                        isDisabled={formik.isSubmitting}\n                        type=\"submit\"\n                        style={{ marginLeft: '10px' }}\n                        onClick={formik.submitForm}\n                      >\n                        <Trans>Save</Trans>\n                      </Button>\n                    </Actions>\n                  </ProfileBox>\n                </Route>\n              </Switch>\n            </SettingsWrapper>\n          </Wrapper>\n        </WrapperCont>\n        {/* <RepoLink variant=\"text\" my={3} mt={2}>\n          <a href=\"https://gitlab.com/moodlenet/meta/-/issues\" target=\"_blank\">\n            <Trans>Want to report a bug?</Trans>\n          </a>\n        </RepoLink> */}\n      </HomeBox>\n    </MainContainer>\n  );\n};\n\nconst SettingsWrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n`;\n\n// const RepoLink = styled(Text)`\n//   text-align: right;\n//   width: 100%;\n//   a {\n//     text-decoration: underline;\n//     font-size: 12px;\n//     color: ${props => props.theme.colors.dark};\n//     &:hover {\n//       color: ${props => props.theme.colors.darkest};\n//     }\n//   }\n// `;\n\nconst Sidebar: React.FC<{ sectionPaths: Props['sectionPaths']; isAdmin: boolean }> = ({\n  sectionPaths,\n  isAdmin\n}) => {\n  return (\n    <WrapperPanel mr={2}>\n      <Panel>\n        <Nav>\n          <NavItem p={3} fontSize={1}>\n            <NavLink exact to={sectionPaths.general}>\n              <Flex alignItems=\"center\" sx={{ textTransform: 'capitalize', fontSize: '14px' }}>\n                <Icon className=\"icon\" mr={1}>\n                  <Sett size={20} />\n                </Icon>\n                <Name>\n                  <Trans>General information</Trans>\n                </Name>\n              </Flex>\n            </NavLink>\n          </NavItem>\n          <NavItem p={3} fontSize={1}>\n            <NavLink to={sectionPaths.preferences}>\n              <Flex alignItems=\"center\" sx={{ textTransform: 'capitalize', fontSize: '14px' }}>\n                <Icon className=\"icon\" mr={1}>\n                  <Sliders size={20} />\n                </Icon>\n                <Name>\n                  <Trans>Preferences</Trans>\n                </Name>\n              </Flex>\n            </NavLink>\n          </NavItem>\n          {isAdmin ? (\n            <>\n              <SectionTitle p={3} fontSize=\"1\">\n                <Flex\n                  alignItems=\"center\"\n                  p={3}\n                  sx={{ textTransform: 'capitalize', fontSize: '14px' }}\n                >\n                  {/* <Icon className=\"icon\" mr={1}>\n                <Key size={20} />\n              </Icon> */}\n                  <Text variant=\"suptitle\">Admin</Text>\n                </Flex>\n              </SectionTitle>\n              <NavItem p={3} fontSize={1}>\n                <NavLink to={sectionPaths.instance}>\n                  <Flex alignItems=\"center\" sx={{ textTransform: 'capitalize', fontSize: '14px' }}>\n                    <Icon className=\"icon\" mr={1}>\n                      <Droplet size={20} />\n                    </Icon>\n                    <Name>\n                      <Trans>Instance</Trans>\n                    </Name>\n                  </Flex>\n                </NavLink>\n              </NavItem>\n              <NavItem p={3} fontSize={1}>\n                <NavLink to={sectionPaths.invites}>\n                  <Flex alignItems=\"center\" sx={{ textTransform: 'capitalize', fontSize: '14px' }}>\n                    <Icon className=\"icon\" mr={1}>\n                      <Mail size={20} />\n                    </Icon>\n                    <Name>\n                      <Trans>Invites</Trans>\n                    </Name>\n                  </Flex>\n                </NavLink>\n              </NavItem>\n              <NavItem p={3} fontSize={1}>\n                {/* <NavLink to={`${basePath}/reports`}> */}\n                <NavLink to={sectionPaths.flags}>\n                  <Flex alignItems=\"center\" sx={{ textTransform: 'capitalize', fontSize: '14px' }}>\n                    <Icon className=\"icon\" mr={1}>\n                      <Flag size={20} />\n                    </Icon>\n                    <Name>\n                      <Trans>Flags</Trans>\n                    </Name>\n                  </Flex>\n                </NavLink>\n              </NavItem>\n              <NavItem p={3} fontSize={1}>\n                <NavLink to={sectionPaths.logs}>\n                  <Flex alignItems=\"center\" sx={{ textTransform: 'capitalize', fontSize: '14px' }}>\n                    <Icon className=\"icon\" mr={1}>\n                      <Monitor size={20} />\n                    </Icon>\n                    <Name>\n                      <Trans>Moderation log</Trans>\n                    </Name>\n                  </Flex>\n                </NavLink>\n              </NavItem>\n            </>\n          ) : null}\n\n          {/* <NavItem p={3} fontSize={1}>\n          <NavLink to={`${basePath}/accounts`}>\n          <Flex alignItems=\"center\" sx={{textTransform: \"capitalize\", fontSize: \"14px\"}}>\n                    <Icon className=\"icon\" mr={1}><User size={20} /></Icon>Account\n                </Flex>\n          </NavLink>\n        </NavItem>\n        <NavItem p={3} fontSize={1}>\n        <NavLink to={`${basePath}/notifications`}>\n        <Flex alignItems=\"center\" sx={{textTransform: \"capitalize\", fontSize: \"14px\"}}>\n                    <Icon className=\"icon\" mr={1}><Bell size={20} /></Icon>Notifications\n                </Flex>\n        </NavLink>\n        </NavItem>\n        <NavItem p={3} fontSize={1}>\n          <NavLink to={`${basePath}/admin`}>\n          <Flex alignItems=\"center\" sx={{textTransform: \"capitalize\", fontSize: \"14px\"}}>\n                    <Icon className=\"icon\" mr={1}><Zap size={20} /></Icon>Admin\n                </Flex>\n          </NavLink>\n        </NavItem> */}\n        </Nav>\n      </Panel>\n    </WrapperPanel>\n  );\n};\n\nconst Name = styled(Text)`\n  ${media.lessThan('medium')`\ndisplay: none;\n`};\n`;\n\nconst SectionTitle = styled(Flex)`\n  border-top: 4px solid ${props => props.theme.colors.lighter};\n  border-bottom: 1px solid ${props => props.theme.colors.lighter};\n`;\n\nconst CollectionContainerForm = styled(ContainerForm)`\n  input {\n    background: #fbfbfb;\n    color: ${props => props.theme.colors.mediumdark};\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n`;\n\nconst Img = styled.div`\n  width: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: ${props => props.theme.colors.light};\n  border: 3px solid ${props => props.theme.colors.light};\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 16px;\n`;\n\nconst Bg = styled(Box)`\n  height: 250px;\n  border-radius: 4px;\n  width: 100%;\n  display: inline-block;\n  .thumb {\n    height: 100%;\n  }\n`;\nconst FlexProfile = styled(Flex)`\n  justify-content: space-between;\n  ${media.lessThan('860px')`\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n`};\n`;\n\nconst ProfileBox = styled(Box)``;\n\nconst Username = styled(Text)`\n  color: ${props => props.theme.colors.mediumdark};\n  font-weight: 500;\n  font-size: 14px;\n`;\n\nconst Location = styled(Flex)`\n  color: ${props => props.theme.colors.medium};\n  font-weight: 500;\n  line-height: 26px;\n  font-size: 14px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ${props => props.theme.colors.medium};\n      vertical-align: text-bottom;\n    }\n  }\n`;\n\nconst RelevantLink = styled(Flex)`\n  color: ${props => props.theme.colors.medium};\n  font-weight: 500;\n  line-height: 26px;\n  font-size: 14px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ${props => props.theme.colors.medium};\n      vertical-align: text-bottom;\n    }\n  }\n`;\n\nconst WrapperHero = styled.div`\n  padding: 24px;\n  padding-top: 0;\n  z-index: 9999;\n  position: relative;\n  margin-top: -60px;\n  padding-bottom: 0;\n`;\n\nconst Hero = styled.div`\n  width: 100%;\n  position: relative;\n  border-radius: 6px;\n  & p {\n    color: ${props => props.theme.colors.mediumdark};\n    padding: 0 24px;\n    margin-left: 120px;\n    margin: 0;\n    margin-left: 136px;\n    margin-top: -40px;\n    line-height: 26px;\n    font-size: 16px;\n    padding-bottom: 16px;\n  }\n`;\n\nconst HeroInfo = styled(Box)`\n  & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n`;\n\nconst Icon = styled(Box)`\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  border-radius: 40px;\n  display: flex;\n  align-items: center;\n  svg {\n    stroke: ${props => props.theme.colors.medium};\n    width: 40px;\n  }\n`;\n\nexport const WrapperPanel = styled(Flex)`\n  width: 350px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  font-family: ${props => props.theme.fontFamily};\n  &.extra {\n    width: 100%;\n  }\n  ${media.lessThan('1095px')`\n  width: 290px;\n`};\n  ${media.lessThan('medium')`\n  width: 80px;\n`};\n`;\n\nexport const Panel = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 4px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-bottom: 8px !important;\n`;\n\nexport const PanelTitle = styled(Text)`\n  text-transform: uppercase;\n  border-bottom: 4px solid ${props => props.theme.colors.lighter};\n  padding: 16px;\n`;\n\nexport const Nav = styled(Box)``;\n\nexport const NavItem = styled(Text)`\ncolor: ${props => props.theme.colors.mediumdark}\nborder-bottom: 1px solid ${props => props.theme.colors.lighter};\na {\n  color: ${props => props.theme.colors.mediumdark}\n  text-decoration: none;\n  font-weight: 700;\n  &.active {\n      color: ${props => props.theme.colors.primary};\n    .icon {\n        background: ${props => props.theme.colors.lighter};\n        svg {\n          stroke: ${props => props.theme.colors.primary};\n        }\n    }\n    \n  }\n}\n&:hover {\n    .icon {\n        background: ${props => props.theme.colors.lighter};\n        svg {\n          stroke: ${props => props.theme.colors.primary};\n        }\n    }\n  }\n  `;\n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { useAllFlagsQuery } from './useAllFlags.generated';\nimport { useMemo } from 'react';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useAllFlags = () => {\n  const allFlagsQ = useAllFlagsQuery();\n  const flagsPage = usePage(allFlagsQ.data?.flags, ({ cursor, update }) => {\n    return allFlagsQ.fetchMore({\n      variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        return fetchMoreResult?.flags && prev.flags\n          ? {\n              ...fetchMoreResult,\n              flags: update({\n                prev: prev.flags,\n                fetched: fetchMoreResult.flags\n              })\n            }\n          : prev;\n      }\n    });\n  });\n  return useMemo(() => {\n    return {\n      flagsPage\n    };\n  }, [flagsPage]);\n};\n","import * as Types from '../../../graphql/types.generated';\n\nimport { FlagPreviewFragment } from '../../../HOC/modules/previews/flag/FlagPreview.generated';\nimport gql from 'graphql-tag';\nimport { FlagPreviewFragmentDoc } from '../../../HOC/modules/previews/flag/FlagPreview.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type FlagPreviewDataQueryVariables = {\n  flagId: Types.Scalars['String']\n};\n\n\nexport type FlagPreviewDataQuery = (\n  { __typename: 'RootQueryType' }\n  & { flag: Types.Maybe<(\n    { __typename: 'Flag' }\n    & FlagPreviewFragment\n  )> }\n);\n\nexport type DeleteFlagMutationVariables = {\n  flagId: Types.Scalars['String']\n};\n\n\nexport type DeleteFlagMutation = (\n  { __typename: 'RootMutationType' }\n  & { delete: Types.Maybe<{ __typename: 'Collection' } | { __typename: 'Comment' } | { __typename: 'Community' } | { __typename: 'Feature' } | (\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  ) | { __typename: 'Follow' } | { __typename: 'Like' } | { __typename: 'Resource' } | { __typename: 'Thread' } | { __typename: 'User' }> }\n);\n\nexport type DeleteFlagContextMutationVariables = {\n  contextId: Types.Scalars['String']\n};\n\n\nexport type DeleteFlagContextMutation = (\n  { __typename: 'RootMutationType' }\n  & { delete: Types.Maybe<(\n    { __typename: 'Collection' }\n    & Pick<Types.Collection, 'id'>\n  ) | (\n    { __typename: 'Comment' }\n    & Pick<Types.Comment, 'id'>\n  ) | (\n    { __typename: 'Community' }\n    & Pick<Types.Community, 'id'>\n  ) | (\n    { __typename: 'Feature' }\n    & Pick<Types.Feature, 'id'>\n  ) | (\n    { __typename: 'Flag' }\n    & Pick<Types.Flag, 'id'>\n  ) | (\n    { __typename: 'Follow' }\n    & Pick<Types.Follow, 'id'>\n  ) | (\n    { __typename: 'Like' }\n    & Pick<Types.Like, 'id'>\n  ) | (\n    { __typename: 'Resource' }\n    & Pick<Types.Resource, 'id'>\n  ) | (\n    { __typename: 'Thread' }\n    & Pick<Types.Thread, 'id'>\n  ) | { __typename: 'User' }> }\n);\n\nexport type DeactivateFlaggedUserMutationVariables = {\n  userId: Types.Scalars['String']\n};\n\n\nexport type DeactivateFlaggedUserMutation = (\n  { __typename: 'RootMutationType' }\n  & { delete: Types.Maybe<{ __typename: 'Collection' } | { __typename: 'Comment' } | { __typename: 'Community' } | { __typename: 'Feature' } | { __typename: 'Flag' } | { __typename: 'Follow' } | { __typename: 'Like' } | { __typename: 'Resource' } | { __typename: 'Thread' } | (\n    { __typename: 'User' }\n    & Pick<Types.User, 'id'>\n  )> }\n);\n\n\nexport const FlagPreviewDataDocument = gql`\n    query flagPreviewData($flagId: String!) {\n  flag(flagId: $flagId) {\n    ...FlagPreview\n  }\n}\n    ${FlagPreviewFragmentDoc}`;\n\n/**\n * __useFlagPreviewDataQuery__\n *\n * To run a query within a React component, call `useFlagPreviewDataQuery` and pass it any options that fit your needs.\n * When your component renders, `useFlagPreviewDataQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useFlagPreviewDataQuery({\n *   variables: {\n *      flagId: // value for 'flagId'\n *   },\n * });\n */\nexport function useFlagPreviewDataQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<FlagPreviewDataQuery, FlagPreviewDataQueryVariables>) {\n        return ApolloReactHooks.useQuery<FlagPreviewDataQuery, FlagPreviewDataQueryVariables>(FlagPreviewDataDocument, baseOptions);\n      }\nexport function useFlagPreviewDataLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<FlagPreviewDataQuery, FlagPreviewDataQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<FlagPreviewDataQuery, FlagPreviewDataQueryVariables>(FlagPreviewDataDocument, baseOptions);\n        }\nexport type FlagPreviewDataQueryHookResult = ReturnType<typeof useFlagPreviewDataQuery>;\nexport type FlagPreviewDataLazyQueryHookResult = ReturnType<typeof useFlagPreviewDataLazyQuery>;\nexport type FlagPreviewDataQueryResult = ApolloReactCommon.QueryResult<FlagPreviewDataQuery, FlagPreviewDataQueryVariables>;\nexport const DeleteFlagDocument = gql`\n    mutation deleteFlag($flagId: String!) {\n  delete(contextId: $flagId) {\n    ... on Flag {\n      id\n    }\n  }\n}\n    `;\nexport type DeleteFlagMutationFn = ApolloReactCommon.MutationFunction<DeleteFlagMutation, DeleteFlagMutationVariables>;\n\n/**\n * __useDeleteFlagMutation__\n *\n * To run a mutation, you first call `useDeleteFlagMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useDeleteFlagMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [deleteFlagMutation, { data, loading, error }] = useDeleteFlagMutation({\n *   variables: {\n *      flagId: // value for 'flagId'\n *   },\n * });\n */\nexport function useDeleteFlagMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<DeleteFlagMutation, DeleteFlagMutationVariables>) {\n        return ApolloReactHooks.useMutation<DeleteFlagMutation, DeleteFlagMutationVariables>(DeleteFlagDocument, baseOptions);\n      }\nexport type DeleteFlagMutationHookResult = ReturnType<typeof useDeleteFlagMutation>;\nexport type DeleteFlagMutationResult = ApolloReactCommon.MutationResult<DeleteFlagMutation>;\nexport type DeleteFlagMutationOptions = ApolloReactCommon.BaseMutationOptions<DeleteFlagMutation, DeleteFlagMutationVariables>;\nexport const DeleteFlagContextDocument = gql`\n    mutation deleteFlagContext($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Collection {\n      id\n    }\n    ... on Comment {\n      id\n    }\n    ... on Community {\n      id\n    }\n    ... on Feature {\n      id\n    }\n    ... on Flag {\n      id\n    }\n    ... on Follow {\n      id\n    }\n    ... on Like {\n      id\n    }\n    ... on Resource {\n      id\n    }\n    ... on Thread {\n      id\n    }\n  }\n}\n    `;\nexport type DeleteFlagContextMutationFn = ApolloReactCommon.MutationFunction<DeleteFlagContextMutation, DeleteFlagContextMutationVariables>;\n\n/**\n * __useDeleteFlagContextMutation__\n *\n * To run a mutation, you first call `useDeleteFlagContextMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useDeleteFlagContextMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [deleteFlagContextMutation, { data, loading, error }] = useDeleteFlagContextMutation({\n *   variables: {\n *      contextId: // value for 'contextId'\n *   },\n * });\n */\nexport function useDeleteFlagContextMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<DeleteFlagContextMutation, DeleteFlagContextMutationVariables>) {\n        return ApolloReactHooks.useMutation<DeleteFlagContextMutation, DeleteFlagContextMutationVariables>(DeleteFlagContextDocument, baseOptions);\n      }\nexport type DeleteFlagContextMutationHookResult = ReturnType<typeof useDeleteFlagContextMutation>;\nexport type DeleteFlagContextMutationResult = ApolloReactCommon.MutationResult<DeleteFlagContextMutation>;\nexport type DeleteFlagContextMutationOptions = ApolloReactCommon.BaseMutationOptions<DeleteFlagContextMutation, DeleteFlagContextMutationVariables>;\nexport const DeactivateFlaggedUserDocument = gql`\n    mutation deactivateFlaggedUser($userId: String!) {\n  delete(contextId: $userId) {\n    ... on User {\n      id\n    }\n  }\n}\n    `;\nexport type DeactivateFlaggedUserMutationFn = ApolloReactCommon.MutationFunction<DeactivateFlaggedUserMutation, DeactivateFlaggedUserMutationVariables>;\n\n/**\n * __useDeactivateFlaggedUserMutation__\n *\n * To run a mutation, you first call `useDeactivateFlaggedUserMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useDeactivateFlaggedUserMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [deactivateFlaggedUserMutation, { data, loading, error }] = useDeactivateFlaggedUserMutation({\n *   variables: {\n *      userId: // value for 'userId'\n *   },\n * });\n */\nexport function useDeactivateFlaggedUserMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<DeactivateFlaggedUserMutation, DeactivateFlaggedUserMutationVariables>) {\n        return ApolloReactHooks.useMutation<DeactivateFlaggedUserMutation, DeactivateFlaggedUserMutationVariables>(DeactivateFlaggedUserDocument, baseOptions);\n      }\nexport type DeactivateFlaggedUserMutationHookResult = ReturnType<typeof useDeactivateFlaggedUserMutation>;\nexport type DeactivateFlaggedUserMutationResult = ApolloReactCommon.MutationResult<DeactivateFlaggedUserMutation>;\nexport type DeactivateFlaggedUserMutationOptions = ApolloReactCommon.BaseMutationOptions<DeactivateFlaggedUserMutation, DeactivateFlaggedUserMutationVariables>;\n\n\nexport interface FlagPreviewDataQueryOperation {\n  operationName: 'flagPreviewData'\n  result: FlagPreviewDataQuery\n  variables: FlagPreviewDataQueryVariables\n  type: 'query'\n}\nexport const FlagPreviewDataQueryName:FlagPreviewDataQueryOperation['operationName'] = 'flagPreviewData'\n\nexport const FlagPreviewDataQueryRefetch = (\n  variables:FlagPreviewDataQueryVariables, \n  context?:any\n)=>({\n  query:FlagPreviewDataDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface DeleteFlagMutationOperation {\n  operationName: 'deleteFlag'\n  result: DeleteFlagMutation\n  variables: DeleteFlagMutationVariables\n  type: 'mutation'\n}\nexport const DeleteFlagMutationName:DeleteFlagMutationOperation['operationName'] = 'deleteFlag'\n\nexport const DeleteFlagMutationRefetch = (\n  variables:DeleteFlagMutationVariables, \n  context?:any\n)=>({\n  query:DeleteFlagDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface DeleteFlagContextMutationOperation {\n  operationName: 'deleteFlagContext'\n  result: DeleteFlagContextMutation\n  variables: DeleteFlagContextMutationVariables\n  type: 'mutation'\n}\nexport const DeleteFlagContextMutationName:DeleteFlagContextMutationOperation['operationName'] = 'deleteFlagContext'\n\nexport const DeleteFlagContextMutationRefetch = (\n  variables:DeleteFlagContextMutationVariables, \n  context?:any\n)=>({\n  query:DeleteFlagContextDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface DeactivateFlaggedUserMutationOperation {\n  operationName: 'deactivateFlaggedUser'\n  result: DeactivateFlaggedUserMutation\n  variables: DeactivateFlaggedUserMutationVariables\n  type: 'mutation'\n}\nexport const DeactivateFlaggedUserMutationName:DeactivateFlaggedUserMutationOperation['operationName'] = 'deactivateFlaggedUser'\n\nexport const DeactivateFlaggedUserMutationRefetch = (\n  variables:DeactivateFlaggedUserMutationVariables, \n  context?:any\n)=>({\n  query:DeactivateFlaggedUserDocument,\n  variables,\n  context\n})\n      \n","import { Flag } from 'graphql/types.generated';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { useMemo } from 'react';\nimport { AllFlagsQueryRefetch } from '../all/useAllFlags.generated';\nimport {\n  useDeactivateFlaggedUserMutation,\n  useDeleteFlagContextMutation,\n  useDeleteFlagMutation,\n  useFlagPreviewDataQuery\n} from './useFlagPreview.generated';\n\nexport const useFlagPreview = (flagId: Flag['id']) => {\n  const flagQ = useFlagPreviewDataQuery({ variables: { flagId } });\n  const [deleteFlagContextMut, deleteFlagContextStatus] = useDeleteFlagContextMutation();\n  const [deleteFlagMut, deleteFlagStatus] = useDeleteFlagMutation();\n  const [\n    deactivateFlaggedUserMut,\n    deactivateFlaggedUserStatus\n  ] = useDeactivateFlaggedUserMutation();\n\n  const flag = flagQ.data?.flag;\n  const deactivateFlaggedUser = useCallOrNotifyMustLogin(async () => {\n    if (!flag || flag.context.__typename !== 'User' || deactivateFlaggedUserStatus.loading) {\n      return;\n    }\n\n    return deactivateFlaggedUserMut({\n      variables: { userId: flag.context.userId }\n    });\n  }, [flag]);\n\n  const deleteFlagContext = useCallOrNotifyMustLogin(async () => {\n    if (\n      !flag ||\n      flag.context.__typename === 'User' ||\n      deleteFlagStatus.loading ||\n      deleteFlagContextStatus.loading\n    ) {\n      return;\n    }\n\n    return Promise.all([\n      deleteFlagMut({\n        variables: { flagId: flag.id },\n        refetchQueries: [AllFlagsQueryRefetch({})]\n      }),\n      deleteFlagContextMut({ variables: { contextId: flag.context.id } })\n    ]);\n  }, [flag]);\n\n  const ignoreFlag = useCallOrNotifyMustLogin(async () => {\n    if (!flag || deleteFlagStatus.loading) {\n      return;\n    }\n\n    return deleteFlagMut({\n      variables: { flagId: flag.id },\n      refetchQueries: [AllFlagsQueryRefetch({})]\n    });\n  }, [flag]);\n\n  return useMemo(() => {\n    return {\n      flag,\n      deactivateFlaggedUser,\n      deleteFlagContext,\n      ignoreFlag,\n      deleteFlagContextStatus,\n      deactivateFlaggedUserStatus,\n      ignoreFlagStatus: deleteFlagStatus\n    };\n  }, [\n    flag,\n    deactivateFlaggedUser,\n    deleteFlagContext,\n    ignoreFlag,\n    deleteFlagContextStatus,\n    deactivateFlaggedUserStatus,\n    deleteFlagStatus\n  ]);\n};\n","import { Trans } from '@lingui/macro';\nimport { typography } from 'mn-constants';\nimport { darken } from 'polished';\nimport React, { ReactElement } from 'react';\nimport { Flag, Slash, XCircle } from 'react-feather';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\n\nexport interface FlaggedProps {\n  FlaggedItemContextElement: ReactElement;\n  type: string;\n  reason: string;\n  blockUser(): unknown;\n  ignoreFlag(): unknown;\n  deleteContent(): unknown;\n}\n\nexport const FlaggedItem: React.SFC<FlaggedProps> = ({\n  FlaggedItemContextElement,\n  type,\n  reason,\n  blockUser,\n  ignoreFlag,\n  deleteContent\n}) => {\n  return (\n    <Wrapper>\n      <Reason>{FlaggedItemContextElement}</Reason>\n      <Text variant=\"text\" pt={2}>\n        {reason}\n      </Text>\n      <Actions>\n        <Box>\n          <Items>\n            {type === 'User' ? (\n              <ActionItem onClick={blockUser}>\n                <ActionIcon>\n                  <Slash strokeWidth=\"1\" size=\"18\" />\n                </ActionIcon>\n                <Text variant={'suptitle'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                  <Trans>Block</Trans>\n                </Text>\n              </ActionItem>\n            ) : (\n              <ActionItem onClick={deleteContent}>\n                <ActionIcon>\n                  <XCircle strokeWidth=\"1\" size=\"18\" />\n                </ActionIcon>\n                <Text variant={'suptitle'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                  <Trans>Delete</Trans>\n                </Text>\n              </ActionItem>\n            )}\n            <ActionItem ml={2} onClick={ignoreFlag}>\n              <ActionIcon className=\"unflag\">\n                <Flag className=\"hover\" strokeWidth=\"1\" size=\"16\" />\n              </ActionIcon>\n              <Text variant={'suptitle'} sx={{ textTransform: 'capitalize' }} ml={1}>\n                <Trans>Ignore</Trans>\n              </Text>\n            </ActionItem>\n          </Items>\n        </Box>\n      </Actions>\n    </Wrapper>\n  );\n};\n\nconst Reason = styled(Box)`\n  color: ${props => props.theme.colors.dark};\n  background: ${props => props.theme.colors.appInverse};\n  border-left: 3px solid ${props => props.theme.colors.light};\n`;\n\nconst Items = styled(Flex)`\n  flex: 1;\n  justify-content: start;\n`;\n\nconst Actions = styled(Box)`\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n  margin-top: 16px;\n`;\n\nconst ActionItem = styled(Flex)<{ liked?: boolean }>`\n  align-items: center;\n  color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  div {\n    color: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  &:hover {\n    background: ${props =>\n      props.liked\n        ? darken('0.1', props.theme.colors.secondary)\n        : darken('0.05', props.theme.colors.mediumlight)};\n  }\n  cursor: pointer;\n  background: ${props =>\n    props.liked ? props.theme.colors.secondary : props.theme.colors.mediumlight};\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ${typography.size.s1};\n  svg {\n    stroke: ${props => (props.liked ? props.theme.colors.lighter : props.theme.colors.mediumdark)};\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ${props => props.theme.colors.mediumdark};\n      // fill: ${props => props.theme.colors.mediumdark};\n    }\n  }\n`;\n\nconst ActionIcon = styled(Box)`\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n`;\n\nconst Wrapper = styled(Box)`\n  background: ${props => props.theme.colors.appInverse};\n`;\n\n// const Bordered = styled(Box)`\n//   border: ${props => props.theme.colors.border};\n//   border-radius: 4px;\n// `;\n","import { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Heading, Text } from 'rebass/styled-components';\nimport Button from 'ui/elements/Button';\nimport styled from 'ui/themes/styled';\n// import { FormikHook } from 'ui/@types/types';\nimport { Actions, Container, ContainerForm, Header, Row } from 'ui/modules/Modal';\n\n// export interface Props {\n//   done(confirmed: boolean): unknown;\n//   modalTitle: string;\n//   modalDescription: string;\n//   modalAction: string;\n//   formik: FormikHook<any>;\n// }\n\n// export const ConfirmationPanel: React.FC<Props> = ({\n//   done,\n//   modalTitle,\n//   modalDescription,\n//   modalAction,\n//   formik\n// }) => {\n//   // const { i18n } = React.useContext(LocaleContext);\n//   return (\n//     <Container>\n//       <Header>\n//         <Heading m={2}>{modalTitle}</Heading>\n//       </Header>\n//       <Row>\n//         <ContainerForm>\n//           <Text>{modalDescription}</Text>\n//         </ContainerForm>\n//       </Row>\n//       <Actions>\n//         <SubmitButton\n//           variant=\"primary\"\n//           isSubmitting={formik.isSubmitting}\n//           isDisabled={formik.isSubmitting}\n//           type=\"submit\"\n//           style={{ marginLeft: '10px' }}\n//           onClick={() => {\n//             formik.submitForm().then(() => done(true));\n//           }}\n//         >\n//           {modalAction}\n//         </SubmitButton>\n//         <Button variant=\"outline\" onClick={() => done(false)}>\n//           <Trans>Cancel</Trans>\n//         </Button>\n//       </Actions>\n//     </Container>\n//   );\n// };\n\nexport interface ConfirmationPanel {\n  confirm(): unknown;\n  cancel(): unknown;\n  title: string;\n  description: string;\n  action: string;\n  waiting: boolean;\n}\n\nexport const ConfirmationPanel: React.FC<ConfirmationPanel> = ({\n  title,\n  description,\n  action,\n  cancel,\n  confirm,\n  waiting\n}) => {\n  // const { i18n } = React.useContext(LocaleContext);\n  return (\n    <Container>\n      <Header>\n        <Heading m={2}>{title}</Heading>\n      </Header>\n      <Row>\n        <ContainerForm>\n          <Text>{description}</Text>\n        </ContainerForm>\n      </Row>\n      <Actions>\n        <SubmitButton\n          variant=\"primary\"\n          isSubmitting={waiting}\n          isDisabled={waiting}\n          type=\"submit\"\n          style={{ marginLeft: '10px' }}\n          onClick={confirm}\n        >\n          {action}\n        </SubmitButton>\n        <Button variant=\"outline\" onClick={cancel}>\n          <Trans>Cancel</Trans>\n        </Button>\n      </Actions>\n    </Container>\n  );\n};\n\nconst SubmitButton = styled(Button)`\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n`;\n","import { useFlagPreview } from 'fe/flags/preview/useFlagPreview';\nimport { getActivityActor } from 'fe/lib/activity/getActivityActor';\nimport { getCommunityInfoStrings } from 'fe/lib/activity/getContextCommunityInfo';\nimport { Flag } from 'graphql/types.generated';\nimport React, { FC, useMemo, useState, useCallback } from 'react';\nimport { ActivityPreview, Status } from 'ui/modules/ActivityPreview';\nimport { FlaggedItem, FlaggedProps } from 'ui/modules/Previews/FlaggedItem';\nimport { PreviewComponent } from '../activity/PreviewComponent';\nimport { CommentPreviewHOC } from '../comment/CommentPreview';\nimport Modal from 'ui/modules/Modal';\nimport { ConfirmationPanel } from 'ui/modules/ConfirmationPanel';\nimport { i18n } from 'context/global/localizationCtx';\nimport { threadLocation } from 'routes/ThreadPageRoute';\n\ninterface FlagPreviewHOC {\n  flagId: Flag['id'];\n}\n\ntype ConfirmType = 'delete' | 'block' | 'ignore';\n\nexport const FlagPreviewHOC: FC<FlagPreviewHOC> = ({ flagId }) => {\n  const {\n    deactivateFlaggedUser,\n    deleteFlagContext,\n    flag,\n    ignoreFlag,\n    deleteFlagContextStatus,\n    deactivateFlaggedUserStatus,\n    ignoreFlagStatus\n  } = useFlagPreview(flagId);\n\n  const [confirmType, setConfirmType] = useState<ConfirmType>();\n  const closeConfirm = useCallback(() => setConfirmType(undefined), []);\n  const ConfirmActionModal = !(flag && confirmType) ? null : (\n    <Modal closeModal={closeConfirm}>\n      {confirmType === 'delete' ? (\n        <ConfirmationPanel\n          cancel={closeConfirm}\n          confirm={() => deleteFlagContext().then(closeConfirm)}\n          waiting={deleteFlagContextStatus.loading || ignoreFlagStatus.loading}\n          action={i18n._(`Delete flagged content`)}\n          description={i18n._(\n            `Are you sure you want to permanently delete this ${flag.context.__typename} content?`\n          )}\n          title={i18n._(`Delete`)}\n        />\n      ) : confirmType === 'block' ? (\n        <ConfirmationPanel\n          cancel={closeConfirm}\n          confirm={() => deactivateFlaggedUser().then(closeConfirm)}\n          waiting={deactivateFlaggedUserStatus.loading}\n          action={i18n._(`Delete user`)}\n          description={i18n._(`Are you sure you want to permanently delete this user?`)}\n          title={i18n._(`Delete`)}\n        />\n      ) : confirmType === 'ignore' ? (\n        <ConfirmationPanel\n          cancel={closeConfirm}\n          confirm={() => ignoreFlag().then(closeConfirm)}\n          waiting={deleteFlagContextStatus.loading}\n          action={i18n._(`Ignore flag`)}\n          description={i18n._(`Are you sure you want to ignore and delete this flag?`)}\n          title={i18n._(`Ignore`)}\n        />\n      ) : null // never\n      }\n    </Modal>\n  );\n\n  const FlaggedItemContextElement: FlaggedProps['FlaggedItemContextElement'] = useMemo(() => {\n    if (!flag) {\n      return <></>;\n    } else if (flag.context.__typename === 'Comment') {\n      const comment = flag.context;\n      const { communityLink, communityName } = getCommunityInfoStrings(comment);\n      const CommentPreview = (\n        <CommentPreviewHOC commentId={comment.id} mainComment={false} hideActions={true} />\n      );\n      const actor = flag.creator && getActivityActor(flag.creator);\n      return (\n        <ActivityPreview\n          actor={actor}\n          commentActor={comment.creator ? getActivityActor(comment.creator) : undefined}\n          createdAt={comment.createdAt}\n          event={'commented'}\n          communityLink={communityLink}\n          communityName={communityName}\n          status={Status.Loaded}\n          threadUrl={\n            comment.thread?.id && threadLocation.getPath({ threadId: comment.thread.id }, undefined)\n          }\n          preview={CommentPreview}\n        />\n      );\n    } else {\n      return flag ? <PreviewComponent context={flag.context} flagged={true} /> : <></>;\n    }\n  }, [flag]);\n\n  const props = useMemo<FlaggedProps | null>(() => {\n    return flag\n      ? {\n          FlaggedItemContextElement,\n          reason: flag.message,\n          type: flag.context.__typename,\n          blockUser: () => setConfirmType('block'),\n          deleteContent: () => setConfirmType('delete'),\n          ignoreFlag: () => setConfirmType('ignore')\n        }\n      : null;\n  }, [FlaggedItemContextElement, flag]);\n  return (\n    props && (\n      <>\n        {ConfirmActionModal}\n        <FlaggedItem {...props} />\n      </>\n    )\n  );\n};\n","import * as React from 'react';\nimport { Box, Text } from 'rebass/styled-components';\nimport { Trans } from '@lingui/macro';\nimport { Row } from 'ui/modules/Modal';\n// import DropzoneArea from 'ui/modules/DropzoneModal';\nimport { FormikHook } from 'ui/@types/types';\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport { ReactElement } from 'react';\nimport { BottomBordered } from 'ui/elements/Layout';\n\nexport interface Props {\n  FlagPreviews: ReactElement[];\n  loadMoreFlags: FormikHook | null;\n}\n\nconst Flags: React.FC<Props> = ({ FlagPreviews, loadMoreFlags }) => {\n  return (\n    <Box>\n      <Text px={3} mt={2} variant=\"heading\">\n        <Trans>Flags</Trans>\n      </Text>\n      <Row>\n        {FlagPreviews ? (\n          <Box mt={2} sx={{ width: '600px' }}>\n            {FlagPreviews.map(FlagPreview => (\n              <BottomBordered key={FlagPreview.key || ''}>{FlagPreview}</BottomBordered>\n            ))}\n            {loadMoreFlags ? <LoadMore LoadMoreFormik={loadMoreFlags} /> : null}{' '}\n          </Box>\n        ) : (\n          <Text pt={3}>\n            <Trans>No flags yet</Trans>\n          </Text>\n        )}\n      </Row>\n    </Box>\n  );\n};\n\nexport default Flags;\n","import { useAllFlags } from 'fe/flags/all/useAllFlags';\nimport { getActivityActor } from 'fe/lib/activity/getActivityActor';\nimport { FlagPreviewHOC } from 'HOC/modules/previews/flag/FlagPreview';\nimport React, { FC, useMemo } from 'react';\nimport { ActivityPreview, Status } from 'ui/modules/ActivityPreview';\nimport Flags, { Props } from 'ui/pages/settings/flags';\n\nexport interface InstanceFlagsSection {}\n\nexport const InstanceFlagsSection: FC<InstanceFlagsSection> = () => {\n  const { flagsPage } = useAllFlags();\n  const [loadMoreFlags] = flagsPage.formiks;\n  const FlagPreviews = useMemo<Props['FlagPreviews']>(\n    () =>\n      flagsPage.edges.map(flag => {\n        const actor = flag.creator && getActivityActor(flag.creator);\n\n        return (\n          <ActivityPreview\n            key={flag.id}\n            actor={actor}\n            communityLink=\"\"\n            communityName=\"\"\n            createdAt={flag.createdAt}\n            event=\"flagged\"\n            preview={<FlagPreviewHOC flagId={flag.id} />}\n            status={Status.Loaded}\n          />\n        );\n      }),\n\n    [flagsPage.edges]\n  );\n  const props = useMemo<Props>(() => {\n    return {\n      FlagPreviews,\n      loadMoreFlags\n    };\n  }, [FlagPreviews, loadMoreFlags]);\n  return <Flags {...props} />;\n};\n","import * as Types from '../../../../../graphql/types.generated';\n\nimport { FullPageInfoFragment } from '../../../../../@fragments/misc.generated';\nimport gql from 'graphql-tag';\nimport { FullPageInfoFragmentDoc } from '../../../../../@fragments/misc.generated';\nimport * as ApolloReactCommon from '@apollo/react-common';\nimport * as ApolloReactHooks from '@apollo/react-hooks';\n\n\nexport type AddEmailDomainToAllowListMutationVariables = {\n  domain: Types.Scalars['String']\n};\n\n\nexport type AddEmailDomainToAllowListMutation = (\n  { __typename: 'RootMutationType' }\n  & { createRegisterEmailDomainAccess: (\n    { __typename: 'RegisterEmailDomainAccess' }\n    & Pick<Types.RegisterEmailDomainAccess, 'domain' | 'id'>\n  ) }\n);\n\nexport type RemoveEmailDomainFromAllowListMutationVariables = {\n  id: Types.Scalars['String']\n};\n\n\nexport type RemoveEmailDomainFromAllowListMutation = (\n  { __typename: 'RootMutationType' }\n  & { deleteRegisterEmailDomainAccess: Types.Maybe<(\n    { __typename: 'RegisterEmailDomainAccess' }\n    & Pick<Types.RegisterEmailDomainAccess, 'id'>\n  )> }\n);\n\nexport type AddEmailToAllowListMutationVariables = {\n  email: Types.Scalars['String']\n};\n\n\nexport type AddEmailToAllowListMutation = (\n  { __typename: 'RootMutationType' }\n  & { createRegisterEmailAccess: (\n    { __typename: 'RegisterEmailAccess' }\n    & Pick<Types.RegisterEmailAccess, 'email' | 'id'>\n  ) }\n);\n\nexport type RemoveEmailFromAllowListMutationVariables = {\n  id: Types.Scalars['String']\n};\n\n\nexport type RemoveEmailFromAllowListMutation = (\n  { __typename: 'RootMutationType' }\n  & { deleteRegisterEmailAccess: Types.Maybe<(\n    { __typename: 'RegisterEmailAccess' }\n    & Pick<Types.RegisterEmailAccess, 'id'>\n  )> }\n);\n\nexport type SendInviteEmailMutationVariables = {\n  email: Types.Scalars['String']\n};\n\n\nexport type SendInviteEmailMutation = (\n  { __typename: 'RootMutationType' }\n  & Pick<Types.RootMutationType, 'sendInvite'>\n);\n\nexport type InstanceRegisterEmailAccessesQueryVariables = {\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type InstanceRegisterEmailAccessesQuery = (\n  { __typename: 'RootQueryType' }\n  & { registerEmailAccesses: (\n    { __typename: 'RegisterEmailAccessesPage' }\n    & Pick<Types.RegisterEmailAccessesPage, 'totalCount'>\n    & { pageInfo: (\n      { __typename: 'PageInfo' }\n      & FullPageInfoFragment\n    ), edges: Array<(\n      { __typename: 'RegisterEmailAccess' }\n      & Pick<Types.RegisterEmailAccess, 'id' | 'email'>\n    )> }\n  ) }\n);\n\nexport type InstanceRegisterEmailDomainAccessesQueryVariables = {\n  limit?: Types.Maybe<Types.Scalars['Int']>,\n  before?: Types.Maybe<Array<Types.Scalars['Cursor']>>,\n  after?: Types.Maybe<Array<Types.Scalars['Cursor']>>\n};\n\n\nexport type InstanceRegisterEmailDomainAccessesQuery = (\n  { __typename: 'RootQueryType' }\n  & { registerEmailDomainAccesses: (\n    { __typename: 'RegisterEmailDomainAccessesPage' }\n    & Pick<Types.RegisterEmailDomainAccessesPage, 'totalCount'>\n    & { pageInfo: (\n      { __typename: 'PageInfo' }\n      & FullPageInfoFragment\n    ), edges: Array<(\n      { __typename: 'RegisterEmailDomainAccess' }\n      & Pick<Types.RegisterEmailDomainAccess, 'id' | 'domain'>\n    )> }\n  ) }\n);\n\n\nexport const AddEmailDomainToAllowListDocument = gql`\n    mutation addEmailDomainToAllowList($domain: String!) {\n  createRegisterEmailDomainAccess(domain: $domain) {\n    domain\n    id\n  }\n}\n    `;\nexport type AddEmailDomainToAllowListMutationFn = ApolloReactCommon.MutationFunction<AddEmailDomainToAllowListMutation, AddEmailDomainToAllowListMutationVariables>;\n\n/**\n * __useAddEmailDomainToAllowListMutation__\n *\n * To run a mutation, you first call `useAddEmailDomainToAllowListMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAddEmailDomainToAllowListMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [addEmailDomainToAllowListMutation, { data, loading, error }] = useAddEmailDomainToAllowListMutation({\n *   variables: {\n *      domain: // value for 'domain'\n *   },\n * });\n */\nexport function useAddEmailDomainToAllowListMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AddEmailDomainToAllowListMutation, AddEmailDomainToAllowListMutationVariables>) {\n        return ApolloReactHooks.useMutation<AddEmailDomainToAllowListMutation, AddEmailDomainToAllowListMutationVariables>(AddEmailDomainToAllowListDocument, baseOptions);\n      }\nexport type AddEmailDomainToAllowListMutationHookResult = ReturnType<typeof useAddEmailDomainToAllowListMutation>;\nexport type AddEmailDomainToAllowListMutationResult = ApolloReactCommon.MutationResult<AddEmailDomainToAllowListMutation>;\nexport type AddEmailDomainToAllowListMutationOptions = ApolloReactCommon.BaseMutationOptions<AddEmailDomainToAllowListMutation, AddEmailDomainToAllowListMutationVariables>;\nexport const RemoveEmailDomainFromAllowListDocument = gql`\n    mutation removeEmailDomainFromAllowList($id: String!) {\n  deleteRegisterEmailDomainAccess(id: $id) {\n    id\n  }\n}\n    `;\nexport type RemoveEmailDomainFromAllowListMutationFn = ApolloReactCommon.MutationFunction<RemoveEmailDomainFromAllowListMutation, RemoveEmailDomainFromAllowListMutationVariables>;\n\n/**\n * __useRemoveEmailDomainFromAllowListMutation__\n *\n * To run a mutation, you first call `useRemoveEmailDomainFromAllowListMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useRemoveEmailDomainFromAllowListMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [removeEmailDomainFromAllowListMutation, { data, loading, error }] = useRemoveEmailDomainFromAllowListMutation({\n *   variables: {\n *      id: // value for 'id'\n *   },\n * });\n */\nexport function useRemoveEmailDomainFromAllowListMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<RemoveEmailDomainFromAllowListMutation, RemoveEmailDomainFromAllowListMutationVariables>) {\n        return ApolloReactHooks.useMutation<RemoveEmailDomainFromAllowListMutation, RemoveEmailDomainFromAllowListMutationVariables>(RemoveEmailDomainFromAllowListDocument, baseOptions);\n      }\nexport type RemoveEmailDomainFromAllowListMutationHookResult = ReturnType<typeof useRemoveEmailDomainFromAllowListMutation>;\nexport type RemoveEmailDomainFromAllowListMutationResult = ApolloReactCommon.MutationResult<RemoveEmailDomainFromAllowListMutation>;\nexport type RemoveEmailDomainFromAllowListMutationOptions = ApolloReactCommon.BaseMutationOptions<RemoveEmailDomainFromAllowListMutation, RemoveEmailDomainFromAllowListMutationVariables>;\nexport const AddEmailToAllowListDocument = gql`\n    mutation addEmailToAllowList($email: String!) {\n  createRegisterEmailAccess(email: $email) {\n    email\n    id\n  }\n}\n    `;\nexport type AddEmailToAllowListMutationFn = ApolloReactCommon.MutationFunction<AddEmailToAllowListMutation, AddEmailToAllowListMutationVariables>;\n\n/**\n * __useAddEmailToAllowListMutation__\n *\n * To run a mutation, you first call `useAddEmailToAllowListMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useAddEmailToAllowListMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [addEmailToAllowListMutation, { data, loading, error }] = useAddEmailToAllowListMutation({\n *   variables: {\n *      email: // value for 'email'\n *   },\n * });\n */\nexport function useAddEmailToAllowListMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<AddEmailToAllowListMutation, AddEmailToAllowListMutationVariables>) {\n        return ApolloReactHooks.useMutation<AddEmailToAllowListMutation, AddEmailToAllowListMutationVariables>(AddEmailToAllowListDocument, baseOptions);\n      }\nexport type AddEmailToAllowListMutationHookResult = ReturnType<typeof useAddEmailToAllowListMutation>;\nexport type AddEmailToAllowListMutationResult = ApolloReactCommon.MutationResult<AddEmailToAllowListMutation>;\nexport type AddEmailToAllowListMutationOptions = ApolloReactCommon.BaseMutationOptions<AddEmailToAllowListMutation, AddEmailToAllowListMutationVariables>;\nexport const RemoveEmailFromAllowListDocument = gql`\n    mutation removeEmailFromAllowList($id: String!) {\n  deleteRegisterEmailAccess(id: $id) {\n    id\n  }\n}\n    `;\nexport type RemoveEmailFromAllowListMutationFn = ApolloReactCommon.MutationFunction<RemoveEmailFromAllowListMutation, RemoveEmailFromAllowListMutationVariables>;\n\n/**\n * __useRemoveEmailFromAllowListMutation__\n *\n * To run a mutation, you first call `useRemoveEmailFromAllowListMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useRemoveEmailFromAllowListMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [removeEmailFromAllowListMutation, { data, loading, error }] = useRemoveEmailFromAllowListMutation({\n *   variables: {\n *      id: // value for 'id'\n *   },\n * });\n */\nexport function useRemoveEmailFromAllowListMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<RemoveEmailFromAllowListMutation, RemoveEmailFromAllowListMutationVariables>) {\n        return ApolloReactHooks.useMutation<RemoveEmailFromAllowListMutation, RemoveEmailFromAllowListMutationVariables>(RemoveEmailFromAllowListDocument, baseOptions);\n      }\nexport type RemoveEmailFromAllowListMutationHookResult = ReturnType<typeof useRemoveEmailFromAllowListMutation>;\nexport type RemoveEmailFromAllowListMutationResult = ApolloReactCommon.MutationResult<RemoveEmailFromAllowListMutation>;\nexport type RemoveEmailFromAllowListMutationOptions = ApolloReactCommon.BaseMutationOptions<RemoveEmailFromAllowListMutation, RemoveEmailFromAllowListMutationVariables>;\nexport const SendInviteEmailDocument = gql`\n    mutation sendInviteEmail($email: String!) {\n  sendInvite(email: $email)\n}\n    `;\nexport type SendInviteEmailMutationFn = ApolloReactCommon.MutationFunction<SendInviteEmailMutation, SendInviteEmailMutationVariables>;\n\n/**\n * __useSendInviteEmailMutation__\n *\n * To run a mutation, you first call `useSendInviteEmailMutation` within a React component and pass it any options that fit your needs.\n * When your component renders, `useSendInviteEmailMutation` returns a tuple that includes:\n * - A mutate function that you can call at any time to execute the mutation\n * - An object with fields that represent the current status of the mutation's execution\n *\n * @param baseOptions options that will be passed into the mutation, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options-2;\n *\n * @example\n * const [sendInviteEmailMutation, { data, loading, error }] = useSendInviteEmailMutation({\n *   variables: {\n *      email: // value for 'email'\n *   },\n * });\n */\nexport function useSendInviteEmailMutation(baseOptions?: ApolloReactHooks.MutationHookOptions<SendInviteEmailMutation, SendInviteEmailMutationVariables>) {\n        return ApolloReactHooks.useMutation<SendInviteEmailMutation, SendInviteEmailMutationVariables>(SendInviteEmailDocument, baseOptions);\n      }\nexport type SendInviteEmailMutationHookResult = ReturnType<typeof useSendInviteEmailMutation>;\nexport type SendInviteEmailMutationResult = ApolloReactCommon.MutationResult<SendInviteEmailMutation>;\nexport type SendInviteEmailMutationOptions = ApolloReactCommon.BaseMutationOptions<SendInviteEmailMutation, SendInviteEmailMutationVariables>;\nexport const InstanceRegisterEmailAccessesDocument = gql`\n    query instanceRegisterEmailAccesses($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  registerEmailAccesses(limit: $limit, before: $before, after: $after) @connection(key: \"instanceRegisterEmailAccesses\") {\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n    edges {\n      id\n      email\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}`;\n\n/**\n * __useInstanceRegisterEmailAccessesQuery__\n *\n * To run a query within a React component, call `useInstanceRegisterEmailAccessesQuery` and pass it any options that fit your needs.\n * When your component renders, `useInstanceRegisterEmailAccessesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useInstanceRegisterEmailAccessesQuery({\n *   variables: {\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useInstanceRegisterEmailAccessesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<InstanceRegisterEmailAccessesQuery, InstanceRegisterEmailAccessesQueryVariables>) {\n        return ApolloReactHooks.useQuery<InstanceRegisterEmailAccessesQuery, InstanceRegisterEmailAccessesQueryVariables>(InstanceRegisterEmailAccessesDocument, baseOptions);\n      }\nexport function useInstanceRegisterEmailAccessesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<InstanceRegisterEmailAccessesQuery, InstanceRegisterEmailAccessesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<InstanceRegisterEmailAccessesQuery, InstanceRegisterEmailAccessesQueryVariables>(InstanceRegisterEmailAccessesDocument, baseOptions);\n        }\nexport type InstanceRegisterEmailAccessesQueryHookResult = ReturnType<typeof useInstanceRegisterEmailAccessesQuery>;\nexport type InstanceRegisterEmailAccessesLazyQueryHookResult = ReturnType<typeof useInstanceRegisterEmailAccessesLazyQuery>;\nexport type InstanceRegisterEmailAccessesQueryResult = ApolloReactCommon.QueryResult<InstanceRegisterEmailAccessesQuery, InstanceRegisterEmailAccessesQueryVariables>;\nexport const InstanceRegisterEmailDomainAccessesDocument = gql`\n    query instanceRegisterEmailDomainAccesses($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  registerEmailDomainAccesses(limit: $limit, before: $before, after: $after) @connection(key: \"instanceRegisterEmailDomainAccesses\") {\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n    edges {\n      id\n      domain\n    }\n  }\n}\n    ${FullPageInfoFragmentDoc}`;\n\n/**\n * __useInstanceRegisterEmailDomainAccessesQuery__\n *\n * To run a query within a React component, call `useInstanceRegisterEmailDomainAccessesQuery` and pass it any options that fit your needs.\n * When your component renders, `useInstanceRegisterEmailDomainAccessesQuery` returns an object from Apollo Client that contains loading, error, and data properties \n * you can use to render your UI.\n *\n * @param baseOptions options that will be passed into the query, supported options are listed on: https://www.apollographql.com/docs/react/api/react-hooks/#options;\n *\n * @example\n * const { data, loading, error } = useInstanceRegisterEmailDomainAccessesQuery({\n *   variables: {\n *      limit: // value for 'limit'\n *      before: // value for 'before'\n *      after: // value for 'after'\n *   },\n * });\n */\nexport function useInstanceRegisterEmailDomainAccessesQuery(baseOptions?: ApolloReactHooks.QueryHookOptions<InstanceRegisterEmailDomainAccessesQuery, InstanceRegisterEmailDomainAccessesQueryVariables>) {\n        return ApolloReactHooks.useQuery<InstanceRegisterEmailDomainAccessesQuery, InstanceRegisterEmailDomainAccessesQueryVariables>(InstanceRegisterEmailDomainAccessesDocument, baseOptions);\n      }\nexport function useInstanceRegisterEmailDomainAccessesLazyQuery(baseOptions?: ApolloReactHooks.LazyQueryHookOptions<InstanceRegisterEmailDomainAccessesQuery, InstanceRegisterEmailDomainAccessesQueryVariables>) {\n          return ApolloReactHooks.useLazyQuery<InstanceRegisterEmailDomainAccessesQuery, InstanceRegisterEmailDomainAccessesQueryVariables>(InstanceRegisterEmailDomainAccessesDocument, baseOptions);\n        }\nexport type InstanceRegisterEmailDomainAccessesQueryHookResult = ReturnType<typeof useInstanceRegisterEmailDomainAccessesQuery>;\nexport type InstanceRegisterEmailDomainAccessesLazyQueryHookResult = ReturnType<typeof useInstanceRegisterEmailDomainAccessesLazyQuery>;\nexport type InstanceRegisterEmailDomainAccessesQueryResult = ApolloReactCommon.QueryResult<InstanceRegisterEmailDomainAccessesQuery, InstanceRegisterEmailDomainAccessesQueryVariables>;\n\n\nexport interface AddEmailDomainToAllowListMutationOperation {\n  operationName: 'addEmailDomainToAllowList'\n  result: AddEmailDomainToAllowListMutation\n  variables: AddEmailDomainToAllowListMutationVariables\n  type: 'mutation'\n}\nexport const AddEmailDomainToAllowListMutationName:AddEmailDomainToAllowListMutationOperation['operationName'] = 'addEmailDomainToAllowList'\n\nexport const AddEmailDomainToAllowListMutationRefetch = (\n  variables:AddEmailDomainToAllowListMutationVariables, \n  context?:any\n)=>({\n  query:AddEmailDomainToAllowListDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface RemoveEmailDomainFromAllowListMutationOperation {\n  operationName: 'removeEmailDomainFromAllowList'\n  result: RemoveEmailDomainFromAllowListMutation\n  variables: RemoveEmailDomainFromAllowListMutationVariables\n  type: 'mutation'\n}\nexport const RemoveEmailDomainFromAllowListMutationName:RemoveEmailDomainFromAllowListMutationOperation['operationName'] = 'removeEmailDomainFromAllowList'\n\nexport const RemoveEmailDomainFromAllowListMutationRefetch = (\n  variables:RemoveEmailDomainFromAllowListMutationVariables, \n  context?:any\n)=>({\n  query:RemoveEmailDomainFromAllowListDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface AddEmailToAllowListMutationOperation {\n  operationName: 'addEmailToAllowList'\n  result: AddEmailToAllowListMutation\n  variables: AddEmailToAllowListMutationVariables\n  type: 'mutation'\n}\nexport const AddEmailToAllowListMutationName:AddEmailToAllowListMutationOperation['operationName'] = 'addEmailToAllowList'\n\nexport const AddEmailToAllowListMutationRefetch = (\n  variables:AddEmailToAllowListMutationVariables, \n  context?:any\n)=>({\n  query:AddEmailToAllowListDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface RemoveEmailFromAllowListMutationOperation {\n  operationName: 'removeEmailFromAllowList'\n  result: RemoveEmailFromAllowListMutation\n  variables: RemoveEmailFromAllowListMutationVariables\n  type: 'mutation'\n}\nexport const RemoveEmailFromAllowListMutationName:RemoveEmailFromAllowListMutationOperation['operationName'] = 'removeEmailFromAllowList'\n\nexport const RemoveEmailFromAllowListMutationRefetch = (\n  variables:RemoveEmailFromAllowListMutationVariables, \n  context?:any\n)=>({\n  query:RemoveEmailFromAllowListDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface SendInviteEmailMutationOperation {\n  operationName: 'sendInviteEmail'\n  result: SendInviteEmailMutation\n  variables: SendInviteEmailMutationVariables\n  type: 'mutation'\n}\nexport const SendInviteEmailMutationName:SendInviteEmailMutationOperation['operationName'] = 'sendInviteEmail'\n\nexport const SendInviteEmailMutationRefetch = (\n  variables:SendInviteEmailMutationVariables, \n  context?:any\n)=>({\n  query:SendInviteEmailDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface InstanceRegisterEmailAccessesQueryOperation {\n  operationName: 'instanceRegisterEmailAccesses'\n  result: InstanceRegisterEmailAccessesQuery\n  variables: InstanceRegisterEmailAccessesQueryVariables\n  type: 'query'\n}\nexport const InstanceRegisterEmailAccessesQueryName:InstanceRegisterEmailAccessesQueryOperation['operationName'] = 'instanceRegisterEmailAccesses'\n\nexport const InstanceRegisterEmailAccessesQueryRefetch = (\n  variables:InstanceRegisterEmailAccessesQueryVariables, \n  context?:any\n)=>({\n  query:InstanceRegisterEmailAccessesDocument,\n  variables,\n  context\n})\n      \n\n\nexport interface InstanceRegisterEmailDomainAccessesQueryOperation {\n  operationName: 'instanceRegisterEmailDomainAccesses'\n  result: InstanceRegisterEmailDomainAccessesQuery\n  variables: InstanceRegisterEmailDomainAccessesQueryVariables\n  type: 'query'\n}\nexport const InstanceRegisterEmailDomainAccessesQueryName:InstanceRegisterEmailDomainAccessesQueryOperation['operationName'] = 'instanceRegisterEmailDomainAccesses'\n\nexport const InstanceRegisterEmailDomainAccessesQueryRefetch = (\n  variables:InstanceRegisterEmailDomainAccessesQueryVariables, \n  context?:any\n)=>({\n  query:InstanceRegisterEmailDomainAccessesDocument,\n  variables,\n  context\n})\n      \n","import { usePage } from 'fe/lib/helpers/usePage';\nimport { useCallOrNotifyMustLogin } from 'HOC/lib/notifyMustLogin';\nimport { useMemo } from 'react';\nimport * as GQL from './instanceRegistrationAllowLists.generated';\nimport { DEFAULT_PAGE_SIZE } from 'mn-constants';\n// import { DEFAULT_PAGE_SIZE } from 'mn-constants';\n\nexport const useInstanceRegistrationAllowLists = () => {\n  const [addEmailDomainMut, addEmailDomainStatus] = GQL.useAddEmailDomainToAllowListMutation();\n  const [\n    removeEmailDomainMut,\n    removeEmailDomainStatus\n  ] = GQL.useRemoveEmailDomainFromAllowListMutation();\n  // const [\n  //   addEmailMut /* ,addEmailStatus */\n  // ] = GQL.useAddEmailToAllowListMutation();\n  const [removeEmailMut, removeEmailStatus] = GQL.useRemoveEmailFromAllowListMutation();\n  const [sendInviteEmailMut, sendInviteEmailStatus] = GQL.useSendInviteEmailMutation();\n\n  const listEmailsQ = GQL.useInstanceRegisterEmailAccessesQuery({\n    variables: {\n      limit: DEFAULT_PAGE_SIZE\n    }\n  });\n  const listEmailsPage = usePage(listEmailsQ.data?.registerEmailAccesses, ({ cursor, update }) => {\n    return listEmailsQ.fetchMore({\n      variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n      updateQuery: (prev, { fetchMoreResult }) => {\n        return fetchMoreResult?.registerEmailAccesses && prev.registerEmailAccesses\n          ? {\n              ...fetchMoreResult,\n              registerEmailAccesses: update({\n                prev: prev.registerEmailAccesses,\n                fetched: fetchMoreResult.registerEmailAccesses\n              })\n            }\n          : prev;\n      }\n    });\n  });\n\n  const listEmailDomainsQ = GQL.useInstanceRegisterEmailDomainAccessesQuery({\n    variables: {\n      limit: DEFAULT_PAGE_SIZE\n    }\n  });\n  const listEmailDomainsPage = usePage(\n    listEmailDomainsQ.data?.registerEmailDomainAccesses,\n    ({ cursor, update }) => {\n      return listEmailDomainsQ.fetchMore({\n        variables: { ...cursor, limit: DEFAULT_PAGE_SIZE },\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return fetchMoreResult?.registerEmailDomainAccesses && prev.registerEmailDomainAccesses\n            ? {\n                ...fetchMoreResult,\n                registerEmailDomainAccesses: update({\n                  prev: prev.registerEmailDomainAccesses,\n                  fetched: fetchMoreResult.registerEmailDomainAccesses\n                })\n              }\n            : prev;\n        }\n      });\n    }\n  );\n  const addEmailDomain = useCallOrNotifyMustLogin(\n    (domain: string) => {\n      return addEmailDomainMut({\n        variables: { domain },\n        refetchQueries: [GQL.InstanceRegisterEmailDomainAccessesQueryRefetch({})]\n      });\n    },\n    [addEmailDomainMut]\n  );\n  const removeEmailDomain = useCallOrNotifyMustLogin(\n    (id: string) => {\n      return removeEmailDomainMut({\n        variables: { id },\n        refetchQueries: [GQL.InstanceRegisterEmailDomainAccessesQueryRefetch({})]\n      });\n    },\n    [removeEmailDomainMut]\n  );\n\n  const sendInviteEmail = useCallOrNotifyMustLogin(\n    (email: string) => {\n      return sendInviteEmailMut({ variables: { email } });\n    },\n    [sendInviteEmailMut]\n  );\n\n  const addEmail = useCallOrNotifyMustLogin(\n    (email: string) => {\n      return sendInviteEmailMut({\n        variables: { email },\n        refetchQueries: [GQL.InstanceRegisterEmailAccessesQueryRefetch({})]\n      });\n    },\n    [sendInviteEmailMut]\n  );\n\n  const removeEmail = useCallOrNotifyMustLogin(\n    (id: string) => {\n      return removeEmailMut({\n        variables: { id },\n        refetchQueries: [GQL.InstanceRegisterEmailAccessesQueryRefetch({})]\n      });\n    },\n    [removeEmailMut]\n  );\n\n  return useMemo(() => {\n    return {\n      listEmailDomainsPage,\n      listEmailsPage,\n      addEmailDomain,\n      removeEmailDomain,\n      addEmail,\n      removeEmail,\n      sendInviteEmail,\n      addEmailDomainStatus,\n      removeEmailDomainStatus,\n      removeEmailStatus,\n      sendInviteEmailStatus\n    };\n  }, [\n    listEmailDomainsPage,\n    listEmailsPage,\n    addEmailDomain,\n    removeEmailDomain,\n    addEmail,\n    removeEmail,\n    sendInviteEmail,\n    addEmailDomainStatus,\n    removeEmailDomainStatus,\n    removeEmailStatus,\n    sendInviteEmailStatus\n  ]);\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { /* Textarea,*/ /* Checkbox, */ Input, Label } from '@rebass/forms';\nimport React from 'react';\nimport { XCircle } from 'react-feather';\nimport { Box, /* Flex, */ Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\nimport { LoadMore } from 'ui/modules/Loadmore';\nimport { Actions, ContainerForm, Row } from 'ui/modules/Modal';\n// import DropzoneArea from 'ui/modules/DropzoneModal';\nimport styled from 'ui/themes/styled';\n\nconst tt = {\n  placeholders: {\n    domain: i18nMark('Enter domain (e.g. moodle.com)')\n  }\n};\n\nexport interface Props {\n  formikAddDomain: FormikHook<WithDomain>;\n  removeDomain(domain: string): unknown;\n  domainsList: string[];\n  loadMoreDomains: FormikHook | null;\n}\n\nexport interface WithDomain {\n  domain: string;\n}\n\n// export const Instance = props => (\nconst Instance: React.FC<Props> = ({\n  formikAddDomain,\n  removeDomain,\n  domainsList,\n  loadMoreDomains\n}) => {\n  return (\n    <Box>\n      <Text px={3} mt={2} variant=\"heading\">\n        <span style={{ marginRight: '8px' }} aria-label=\"icon\" role=\"img\">\n          🎨\n        </span>\n        Customize your instance\n      </Text>\n      {/* <Row>\n      <ContainerForm>\n        <label>\n          <Trans>Name</Trans>\n        </label>\n        <Input />\n      </ContainerForm>\n    </Row>\n    <Row>\n      <ContainerForm>\n        <label>\n          <Trans>Description</Trans>\n        </label>\n        <Textarea />\n      </ContainerForm>\n    </Row>\n    <Row>\n      <ContainerForm>\n        <label>\n          <Trans>Instance background</Trans>\n        </label>\n        <Bg>\n          <DropzoneArea\n            initialUrl={''}\n            // formikForm={}\n          />\n        </Bg>\n      </ContainerForm>\n    </Row> */}\n      {/* <Row>\n        <ContainerForm>\n          <Invite>\n            <Label>\n              <Checkbox id=\"inviteOnly\" name=\"inviteOnly\" />\n              This instance is invite only\n            </Label>\n          </Invite>\n        </ContainerForm>\n      </Row> */}\n      <DomainWrapper>\n        <Label pt={3}>\n          <Trans>Add Domain to allowlist</Trans>\n        </Label>\n        <DomainContainerForm>\n          <DomainInput\n            placeholder={tt.placeholders.domain}\n            disabled={formikAddDomain.isSubmitting}\n            name=\"domain\"\n            value={formikAddDomain.values.domain}\n            onChange={formikAddDomain.handleChange}\n          />\n          <Actions>\n            <Button\n              variant=\"primary\"\n              isSubmitting={formikAddDomain.isSubmitting}\n              isDisabled={formikAddDomain.isSubmitting}\n              type=\"submit\"\n              style={{ marginLeft: '10px' }}\n              onClick={formikAddDomain.submitForm}\n            >\n              <Trans>Add</Trans>\n            </Button>\n          </Actions>\n        </DomainContainerForm>\n      </DomainWrapper>\n      <Box p={3}>\n        <Text p={3} variant=\"suptitle\">\n          <Trans>Allowed Domains</Trans>\n        </Text>\n        {domainsList.map(domain => (\n          <ListRow key={domain}>\n            <DomainText>{domain}</DomainText>\n            <Delete onClick={() => removeDomain(domain)}>\n              <XCircle size={21} />\n            </Delete>\n          </ListRow>\n        ))}\n        {loadMoreDomains ? <LoadMore LoadMoreFormik={loadMoreDomains} /> : null}{' '}\n        {/* FIX ME after add LoadMoreFormik */}\n      </Box>\n\n      <Text variant=\"suptitle\" p={3}>\n        <Trans>More options will be available soon</Trans>\n      </Text>\n    </Box>\n  );\n};\n\n// const Invite = styled(Flex)`\n//   align-items: center;\n//   label {\n//     width: 100%;\n//     line-height: auto;\n//     align-items: center;\n//   }\n// `;\n\nconst DomainText = styled(Text)`\n  flex:1;\n  // color: ${props => props.theme.colors.medium};\n`;\n\nconst DomainContainerForm = styled(ContainerForm)`\n  display: flex;\n  align-items: center;\n`;\n\nconst DomainWrapper = styled.div`\n  padding: 20px;\n  border-bottom: 1px solid ${props => props.theme.colors.lighter};\n`;\n\nconst DomainInput = styled(Input)`\n  && {\n    flex: 1;\n    color: ${props => props.theme.colors.mediumdark};\n  }\n`;\n\nconst ListRow = styled(Row)`\n  align-items: center;\n`;\n\nconst Delete = styled(Box)`\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  border-radius: 30px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  svg{\n    stroke: ${props => props.theme.colors.medium};\n  }\n  &:hover {\n    // background: ${props => props.theme.colors.lighter};\n    svg{\n      stroke: ${props => props.theme.colors.primary};\n    }\n  }\n`;\n\nexport default Instance;\n// const Bg = styled(Box)``;\n","import { i18n } from 'context/global/localizationCtx';\nimport { useInstanceRegistrationAllowLists } from 'fe/settings/instance/registration/allowlist/instanceRegistrationAllowLists';\nimport { useFormik } from 'formik';\nimport { DOMAIN_REGEX } from 'mn-constants';\nimport React, { FC, useCallback, useMemo, useState } from 'react';\nimport { ConfirmationPanel } from 'ui/modules/ConfirmationPanel';\nimport Modal from 'ui/modules/Modal';\nimport Instance, { Props } from 'ui/pages/settings/instance';\nimport * as Yup from 'yup';\n\nexport const withEmailDomainValidation = Yup.object().shape({\n  domain: Yup.string().matches(DOMAIN_REGEX)\n});\n\nexport interface InstanceSettingsSection {}\n\nexport const InstanceSettingsSection: FC<InstanceSettingsSection> = () => {\n  const [domainToRemove, setDomainToRemove] = useState<string>();\n  const unsetDomainToRemove = useCallback(() => setDomainToRemove(undefined), []);\n  const {\n    removeEmailDomain,\n    addEmailDomain,\n    listEmailDomainsPage,\n    removeEmailDomainStatus\n  } = useInstanceRegistrationAllowLists();\n  const [loadMoreDomains] = listEmailDomainsPage.formiks;\n  const formikAddDomain = useFormik<{ domain: string }>({\n    initialValues: { domain: '' },\n    validationSchema: withEmailDomainValidation,\n    onSubmit: ({ domain }, { resetForm }) => {\n      return domain ? addEmailDomain(domain).then(() => resetForm()) : undefined;\n    }\n  });\n\n  const domainsList: Props['domainsList'] = useMemo(\n    () => listEmailDomainsPage.edges.map(_ => _.domain),\n    [listEmailDomainsPage]\n  );\n\n  const removeDomain = useCallback(() => {\n    const domainId = listEmailDomainsPage.edges.find(_ => domainToRemove === _.domain)?.id;\n    if (!domainId) {\n      unsetDomainToRemove();\n      return;\n    }\n    removeEmailDomain(domainId).then(unsetDomainToRemove);\n  }, [domainToRemove, listEmailDomainsPage.edges, removeEmailDomain, unsetDomainToRemove]);\n\n  const RemoveDomainConfirmModal = domainToRemove ? (\n    <Modal closeModal={() => setDomainToRemove(undefined)}>\n      <ConfirmationPanel\n        cancel={unsetDomainToRemove}\n        confirm={removeDomain}\n        action={i18n._(`Delete domain from allowlist`)}\n        description={i18n._(`Are you sure you want to delete ${domainToRemove} from allowlist?`)}\n        title={i18n._(`Delete`)}\n        waiting={removeEmailDomainStatus.loading}\n      />\n    </Modal>\n  ) : null;\n\n  const props = useMemo<Props>(() => {\n    return {\n      formikAddDomain,\n      removeDomain: setDomainToRemove,\n      domainsList,\n      loadMoreDomains\n    };\n  }, [formikAddDomain, domainsList, loadMoreDomains]);\n  return (\n    <>\n      {RemoveDomainConfirmModal}\n      <Instance {...props} />\n    </>\n  );\n};\n","import { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { Input, Label } from '@rebass/forms';\nimport React from 'react';\nimport { Box, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\nimport { LoadMore } from 'ui/modules/Loadmore';\n// import { FormikHook } from 'ui/@types/types';\nimport { Actions, ContainerForm, Row } from 'ui/modules/Modal';\nimport styled from 'ui/themes/styled';\n\nconst tt = {\n  placeholders: {\n    email: i18nMark('Add email addresses (comma-separated) to invite to instance')\n  }\n};\nexport interface Props {\n  sendInvite(email: string): unknown;\n  formikAddEmail: FormikHook<WithEmail>;\n  emailsList: string[];\n  loadMoreEmails: FormikHook | null;\n}\n\nexport interface WithEmail {\n  email: string;\n}\n\nconst Emails: React.FC<Props> = ({ emailsList, formikAddEmail, sendInvite, loadMoreEmails }) => {\n  return (\n    <Box>\n      <Text variant=\"heading\" px={3} mt={2}>\n        Manage your instance registration\n      </Text>\n      <EmailWrapper>\n        <Label pt={3}>\n          <Trans>Email</Trans>\n        </Label>\n        <EmailContainerForm>\n          <EmailInput\n            placeholder={tt.placeholders.email}\n            disabled={formikAddEmail.isSubmitting}\n            name=\"email\"\n            value={formikAddEmail.values.email}\n            onChange={formikAddEmail.handleChange}\n          />\n          <Actions>\n            <Button\n              variant=\"primary\"\n              isSubmitting={formikAddEmail.isSubmitting}\n              isDisabled={formikAddEmail.isSubmitting}\n              type=\"submit\"\n              style={{ marginLeft: '10px' }}\n              onClick={formikAddEmail.submitForm}\n            >\n              <Trans>Add</Trans>\n            </Button>\n          </Actions>\n        </EmailContainerForm>\n      </EmailWrapper>\n      <Box p={3}>\n        <Text p={3} variant=\"suptitle\">\n          <Trans>Sent invitations</Trans>\n        </Text>\n        {emailsList.map((email, i) => (\n          <ListRow key={`${i}-${email}`}>\n            <EmailText>{email}</EmailText>\n            {/* <Resend\n              onClick={() => {\n                formikSendInvite.setValues({ email });\n                formikSendInvite.submitForm();\n              }}\n            >\n              <RotateCw size={16} />\n            </Resend> */}\n            <Button variant=\"outline\" onClick={() => sendInvite(email)}>\n              <Trans>Send again</Trans>\n            </Button>\n          </ListRow>\n        ))}\n        {loadMoreEmails ? <LoadMore LoadMoreFormik={loadMoreEmails} /> : null}{' '}\n      </Box>\n    </Box>\n  );\n};\n\nexport default Emails;\n\nconst EmailText = styled(Text)`\n  flex:1;\n  // color: ${props => props.theme.colors.medium};\n`;\n\nconst EmailInput = styled(Input)`\n  && {\n    flex: 1;\n    color: ${props => props.theme.colors.mediumdark};\n  }\n`;\nconst ListRow = styled(Row)`\n  align-items: center;\n`;\n\n// const Resend = styled(Box)`\n//   cursor: pointer;\n//   width: 30px;\n//   height: 30px;\n//   border-radius: 30px;\n//   display: flex;\n//   justify-content: space-around;\n//   align-items: center;\n//   svg {\n//     stroke: ${props => props.theme.colors.medium};\n//   }\n\n//   &:hover {\n//     // background: ${props => props.theme.colors.lighter};\n//     svg {\n//       stroke: ${props => props.theme.colors.primary};\n//     }\n//   }\n// }\n// `;\n\nconst EmailContainerForm = styled(ContainerForm)`\n  display: flex;\n  align-items: center;\n`;\n\nconst EmailWrapper = styled.div`\n  padding: 20px;\n  border-bottom: 1px solid ${props => props.theme.colors.lighter};\n`;\n","import { useInstanceRegistrationAllowLists } from 'fe/settings/instance/registration/allowlist/instanceRegistrationAllowLists';\nimport { useFormik } from 'formik';\nimport { EMAIL_REGEX } from 'mn-constants';\nimport React, { FC, useMemo } from 'react';\nimport Invites, { Props } from 'ui/pages/settings/invites';\nimport * as Yup from 'yup';\n\nexport interface InstanceInvitesSection {}\n\nexport const withEmailValidation = Yup.object().shape({\n  email: Yup.string().matches(EMAIL_REGEX)\n});\n\nexport const InstanceInvitesSection: FC<InstanceInvitesSection> = () => {\n  const { addEmail, listEmailsPage, sendInviteEmail } = useInstanceRegistrationAllowLists();\n  const [loadMoreEmails] = listEmailsPage.formiks;\n  const formikAddEmail = useFormik<{ email: string }>({\n    initialValues: { email: '' },\n    validationSchema: withEmailValidation,\n    onSubmit: ({ email }, { resetForm }) => {\n      return email ? addEmail(email).then(() => resetForm()) : undefined;\n    }\n  });\n\n  const emailsList: Props['emailsList'] = useMemo(() => listEmailsPage.edges.map(_ => _.email), [\n    listEmailsPage\n  ]);\n\n  const props = useMemo<Props>(() => {\n    return {\n      formikAddEmail,\n      sendInvite: sendInviteEmail,\n      emailsList,\n      loadMoreEmails\n    };\n  }, [formikAddEmail, sendInviteEmail, emailsList, loadMoreEmails]);\n  return <Invites {...props} />;\n};\n","import React from 'react';\nimport { Box, Text } from 'rebass/styled-components';\nimport { Trans } from '@lingui/macro';\n\nexport interface Props {}\nconst ModerationLog: React.FC<Props> = () => {\n  return (\n    <Box>\n      <Text px={3} mt={2} variant=\"heading\">\n        <Trans>Moderation Log</Trans>\n      </Text>\n\n      <Text variant=\"suptitle\" p={3}>\n        <Trans>Logs will be available soon</Trans>\n      </Text>\n    </Box>\n  );\n};\n\nexport default ModerationLog;\n","import React, { FC } from 'react';\nimport ModerationLog from 'ui/pages/settings/logs';\n\nexport const InstanceModerationLogSection: FC = () => {\n  return <ModerationLog />;\n};\n","import { Trans } from '@lingui/macro';\nimport { Input, Label } from '@rebass/forms';\nimport * as React from 'react';\nimport Select from 'react-select';\nimport { Box, Text } from 'rebass/styled-components';\nimport { FormikHook } from 'ui/@types/types';\nimport Button from 'ui/elements/Button';\nimport { Actions, ContainerForm, Row } from 'ui/modules/Modal';\n// import { ArrowLeft, ArrowRight } from 'react-feather';\n// import media from 'styled-media-query';\nimport styled from '../../themes/styled';\n\n// const Header = styled(Flex)`\n//   border-bottom: ${props => props.theme.colors.border};\n//   svg {\n//     cursor: pointer;\n//   }\n//   ${media.greaterThan('1005px')`\n// display: none;\n// `};\n// `;\n\n// const TabHeading = styled(Heading)`\n//   margin-left: 8px;\n//   .--rtl & {\n//     margin-right: 8px;\n//     margin-left: 0px;\n//   }\n// `;\n\nexport interface EditPreferences {\n  moodleWebsite: string;\n}\n\nexport interface Props extends LanguageSelectProps {\n  formik: FormikHook<EditPreferences>;\n}\n\ntype LanguageSelectProps = {\n  current: { value: string; label: string };\n  locales: { value: string; label: string }[];\n  setLocale(code: string): unknown;\n};\n\nexport const LanguageSelect: React.FC<LanguageSelectProps> = props => {\n  return (\n    <Select\n      options={props.locales as any}\n      defaultValue={props.current}\n      onChange={selectedCode => {\n        const selection = Array.isArray(selectedCode) ? selectedCode[0] : selectedCode;\n        if (!selection) {\n          return;\n        }\n        props.setLocale(selection.value);\n      }}\n    />\n  );\n};\nconst Preferences: React.FC<Props> = props => (\n  <Box>\n    <Row>\n      <ContainerForm>\n        <label>\n          <Trans>Select language</Trans>\n        </label>\n        <LanguageSelect {...props} />\n        <Box width={1 / 2} mt={2}>\n          <Label htmlFor=\"moodleWebsite\">Moodle LMS site location</Label>\n          <Input\n            id=\"moodleWebsite\"\n            disabled={props.formik.isSubmitting}\n            value={props.formik.values.moodleWebsite}\n            onChange={props.formik.handleChange}\n            name=\"moodleWebsite\"\n            placeholder={'Type your Moodle LMS instance'}\n          />\n        </Box>\n        <Actions sx={{ height: 'inherit !important' }}>\n          <Button\n            variant=\"primary\"\n            isSubmitting={props.formik.isSubmitting}\n            isDisabled={props.formik.isSubmitting}\n            type=\"submit\"\n            style={{ marginLeft: '10px' }}\n            onClick={props.formik.submitForm}\n          >\n            <Trans>Save</Trans>\n          </Button>\n        </Actions>\n      </ContainerForm>\n    </Row>\n    <TransifexLink variant=\"text\" my={3} mt={2}>\n      <a\n        href=\"https://www.transifex.com/moodlenet/moodlenet/\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <Trans>Want to contibute to MoodleNet translation?</Trans>\n      </a>\n    </TransifexLink>\n  </Box>\n);\n\nexport default Preferences;\n\nconst TransifexLink = styled(Text)`\n  text-align: right;\n  padding: 0px 20px;\n\n  a {\n    font-size: 12px;\n    text-decoration: underline;\n    color: ${props => props.theme.colors.dark};\n    &:hover {\n      color: ${props => props.theme.colors.darkest};\n    }\n  }\n`;\n","import { useMe } from 'fe/session/useMe';\nimport { useFormik } from 'formik';\nimport React, { FC, useMemo } from 'react';\nimport {\n  EditProfile,\n  Props as SettingsUIProps,\n  Settings as SettingsPageUI\n} from 'ui/pages/settings';\nimport { InstanceFlagsSection } from './flags/InstanceFlagsSection';\nimport { InstanceSettingsSection } from './instance/InstanceSettingsSection';\nimport { InstanceInvitesSection } from './invites/InstanceInvitesSection';\nimport { InstanceModerationLogSection } from './moderationLog/InstanceModerationLogSection';\nimport { PreferencesSettingsSection } from './preferences/PreferencesSettingsSection';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\nimport { settingsLocation } from 'routes/SettingsPageRoute';\n\nexport enum SettingsPageTab {\n  Preferences,\n  Invites,\n  Instance,\n  Flags,\n  ModerationLogs,\n  General\n}\nexport interface SettingsPage {\n  tab: SettingsPageTab;\n  basePath: string;\n}\n\nconst settingsPreferencesPageTitle = t`Settings - Preferences`;\nconst settingsInvitesPageTitle = t`Settings - Invites`;\nconst settingsInstancePageTitle = t`Settings - Instance`;\nconst settingsFlagsPageTitle = t`Settings - Flags`;\nconst settingsModerationLogsPageTitle = t`Settings - Moderation`;\nconst settingsGeneralPageTitle = t`Settings - General`;\n\nexport const SettingsPage: FC<SettingsPage> = ({ basePath, tab }) => {\n  const settingsPageTitle =\n    tab === SettingsPageTab.Preferences\n      ? settingsPreferencesPageTitle\n      : tab === SettingsPageTab.Invites\n      ? settingsInvitesPageTitle\n      : tab === SettingsPageTab.Instance\n      ? settingsInstancePageTitle\n      : tab === SettingsPageTab.Flags\n      ? settingsFlagsPageTitle\n      : tab === SettingsPageTab.ModerationLogs\n      ? settingsModerationLogsPageTitle\n      : tab === SettingsPageTab.General\n      ? settingsGeneralPageTitle\n      : settingsGeneralPageTitle; //never\n  usePageTitle(settingsPageTitle);\n\n  const { me, updateProfile } = useMe();\n  const profile = me?.user;\n\n  const initialValues = useMemo<EditProfile>(\n    () => ({\n      icon: profile?.icon?.url || undefined,\n      image: profile?.image?.url || undefined,\n      location: profile?.location || '',\n      name: profile?.name || '',\n      website: profile?.website || '',\n      summary: profile?.summary || ''\n    }),\n    [profile]\n  );\n\n  const updateProfileFormik = useFormik<EditProfile>({\n    initialValues,\n    enableReinitialize: true,\n    onSubmit: ({ icon, image, ...profile }) => updateProfile({ profile, icon, image })\n  });\n  const sectionPaths: SettingsUIProps['sectionPaths'] = useMemo(\n    () => ({\n      preferences: settingsLocation.getPath({ tab: 'preferences' }, undefined),\n      instance: settingsLocation.getPath({ tab: 'instance' }, undefined),\n      invites: settingsLocation.getPath({ tab: 'invites' }, undefined),\n      flags: settingsLocation.getPath({ tab: 'flags' }, undefined),\n      logs: settingsLocation.getPath({ tab: 'logs' }, undefined),\n      general: settingsLocation.getPath({ tab: undefined }, undefined)\n    }),\n    []\n  );\n  const settingsPageProps = useMemo<SettingsUIProps | null>(() => {\n    const props: SettingsUIProps = {\n      sectionPaths,\n      displayUsername: profile?.displayUsername || '',\n      isAdmin: !!me?.isInstanceAdmin,\n      formik: updateProfileFormik,\n      Preferences: <PreferencesSettingsSection />,\n      Instance: <InstanceSettingsSection />,\n      Invites: <InstanceInvitesSection />,\n      Flags: <InstanceFlagsSection />,\n      ModerationLog: <InstanceModerationLogSection />\n    };\n    return props;\n  }, [me, profile, sectionPaths, updateProfileFormik]);\n\n  return settingsPageProps && <SettingsPageUI {...settingsPageProps} />;\n};\n","import React, { FC, useCallback, useMemo } from 'react';\nimport Preferences, { EditPreferences } from 'ui/pages/settings/preferences';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { DOMAIN_REGEX } from 'mn-constants';\nimport { useMe } from 'fe/session/useMe';\nimport { LocaleContext } from 'context/global/localizationCtx';\n\nconst validationSchema = Yup.object<EditPreferences>({\n  moodleWebsite: Yup.string().matches(DOMAIN_REGEX)\n});\n\nexport const PreferencesSettingsSection: FC = () => {\n  const { available, current, set } = React.useContext(LocaleContext);\n\n  const { me, updateProfile } = useMe();\n  const profile = me?.user;\n  const formik = useFormik<EditPreferences>({\n    enableReinitialize: true,\n    initialValues: { moodleWebsite: profile?.extraInfo?.LMS?.site || '' },\n    validationSchema,\n    onSubmit: ({ moodleWebsite }) => {\n      return updateProfile({\n        profile: {\n          extraInfo: {\n            LMS: {\n              site: moodleWebsite\n            }\n          }\n        }\n      });\n    }\n  });\n\n  const localesOptions = useMemo(\n    () =>\n      available.map(locale => ({\n        value: locale.code,\n        label: locale.desc\n      })),\n    [available]\n  );\n\n  const currentOption = useMemo(\n    () => localesOptions.find(option => option.value === current.code) || localesOptions[0],\n    [current.code, localesOptions]\n  );\n\n  const setLocale = useCallback(\n    (code: string) => {\n      const locale = available.find(locale => locale.code === code);\n      locale && set(locale);\n    },\n    [available, set]\n  );\n  return (\n    <Preferences\n      formik={formik}\n      current={currentOption}\n      locales={localesOptions}\n      setLocale={setLocale}\n    />\n  );\n};\n","import React, { ReactElement } from 'react';\nimport { Box } from 'rebass/styled-components';\nimport styled from 'ui/themes/styled';\nimport media from 'styled-media-query';\nimport { Burger, Menu } from 'ui/modules/Burger';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { ChevronLeft } from 'react-feather';\nimport Avatar from 'ui/elements/Avatar';\nimport { Image } from 'rebass';\nimport { logo_small_url } from 'mn-constants';\n\nexport interface Props {\n  SidebarBox: ReactElement;\n  HeaderBox: ReactElement;\n  SearchBox: ReactElement;\n  userImage: string;\n  userLink: string;\n  username: string;\n  name: string;\n  signout(): any;\n}\nexport const WithoutSidebar: React.FC<Props> = ({\n  SidebarBox,\n  HeaderBox,\n  SearchBox,\n  children,\n  userImage,\n  userLink,\n  username,\n  name,\n  signout\n}) => {\n  const [open, setOpen] = React.useState(false);\n  const history = useHistory();\n\n  return (\n    <Page>\n      <SearchBar>\n        <Icon onClick={() => history.goBack()}>\n          <ChevronLeft size=\"20\" />\n        </Icon>\n        {SearchBox}\n      </SearchBar>\n      <Header>{HeaderBox}</Header>\n      <Wrapper>\n        <CenteredWrapper>{children}</CenteredWrapper>\n      </Wrapper>\n      <Footer>\n        <FootWrapper>\n          <Burger open={open} setOpen={setOpen} />\n          <Menu\n            username={username}\n            name={name}\n            userImage={userImage}\n            signout={signout}\n            open={open}\n            setOpen={setOpen}\n            Side={SidebarBox}\n          />\n        </FootWrapper>\n        <FootWrapper>\n          <NavLink to=\"/\">\n            <Logo>\n              <Image src={logo_small_url} />\n            </Logo>\n          </NavLink>\n        </FootWrapper>\n        <FootWrapper>\n          <Bavatar>\n            <NavLink to={userLink}>\n              <Avatar src={userImage} size=\"m\" />\n            </NavLink>\n          </Bavatar>\n        </FootWrapper>\n      </Footer>\n    </Page>\n  );\n};\n\nconst Logo = styled(Box)`\n  img {\n    width: 36px;\n    height: 36px;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n`;\n\nconst Icon = styled(Box)`\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ${props => props.theme.colors.lighter};\n    svg {\n      stroke: ${props => props.theme.colors.primary};\n    }\n  }\n  svg {\n    stroke: ${props => props.theme.colors.mediumdark};\n    margin: 0 auto;\n  }\n`;\n\nconst Bavatar = styled(Box)`\n  div {\n    max-width: 36px;\n    height: 36px;\n    min-width: 36px;\n    margin: 0 auto;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n`;\n\nconst Header = styled(Box)`\n  ${media.lessThan('medium')`\n    display: none;\n  `}\n`;\n\nconst SearchBar = styled(Box)`\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ${props => props.theme.colors.appInverse}\nborder-bottom: ${props => props.theme.colors.border};\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  font-size: 13px;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ${props => props.theme.colors.app};\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 24px;\n  flex:1;\n}\n${media.greaterThan('medium')`\n    display: none;\n  `}\n`;\n\nconst FootWrapper = styled(Box)`\n  height: 75px;\n  line-height: 75px;\n  text-align: center;\n`;\n\nconst Footer = styled(Box)`\n  background: ${props => props.theme.colors.appInverse}\n  display: grid;\n  border-top: ${props => props.theme.colors.border};\n  grid-template-columns: 1fr 1fr 1fr;\n  ${media.greaterThan('medium')`\n    display: none;\n  `}\n\n`;\n\nconst Page = styled(Box)`\n  height: 100vh;\n  display: grid;\n  ${media.greaterThan('large')`\n    grid-template-rows: 50px auto;\n    row-gap: 8px;\n  `}\n  ${media.lessThan('medium')`\n    grid-template-rows: 75px 1fr 75px;\n  `}\n`;\n\nconst Wrapper = styled(Box)`\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  \n  ${media.greaterThan('medium')`\n  grid-template-rows: auto;\n  grid-template-columns:  1fr;\n  height: calc(100vh - 66px);\n  `}\n  ${media.lessThan('medium')`\n  height: calc(100vh - 150px);\n  overflow: overlay;\n  grid-template-rows: auto;\n  grid-template-columns:1fr;\n  column-gap: 0px;\n  margin: 0;\n  margin: 0 8px;\n  `}\n  ${media.lessThan('small')`\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n    margin: 0 8px;\n  `}\n`;\n\nconst CenteredWrapper = styled(Box)`\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  margin-top: 16px;\n`;\n","import { useMe } from 'fe/session/useMe';\nimport { MainHeaderHOC } from 'HOC/modules/Header/Header';\nimport React, { FC, useMemo } from 'react';\nimport { Props, WithoutSidebar } from 'ui/templates/withoutSidebar';\nimport { GuestTemplate } from '../Guest/Guest';\nimport { SidebarHOC } from 'HOC/modules/Sidebar/Sidebar';\nimport { SearchBox } from 'HOC/modules/SearchBox/SearchBox';\n\nexport interface WithoutSidebarTemplate {}\nexport const WithoutSidebarTemplate: FC<WithoutSidebarTemplate> = ({ children }) => {\n  const { me, logout } = useMe();\n  const withoutSidebarProps = useMemo<null | Props>(() => {\n    const user = me?.user;\n    if (!user) {\n      return null;\n    }\n    const userImage = user.icon?.url || '';\n    const userLink = `/user/${user.id}`;\n    const props: Props = {\n      SidebarBox: <SidebarHOC />,\n      HeaderBox: <MainHeaderHOC />,\n      SearchBox: <SearchBox />,\n      userImage,\n      userLink,\n      signout: logout,\n      username: user.displayUsername || '',\n      name: user.preferredUsername || ''\n    };\n    return props;\n  }, [logout, me]);\n\n  return withoutSidebarProps ? (\n    <WithoutSidebar {...withoutSidebarProps}>{children}</WithoutSidebar>\n  ) : (\n    <GuestTemplate>{children}</GuestTemplate>\n  );\n};\n","import { SettingsPage, SettingsPageTab } from 'HOC/pages/settings/SettingsPage';\nimport { NotFoundHOC } from 'HOC/pages/not-found/NotFound';\nimport React, { FC, useMemo } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { WithoutSidebarTemplate } from 'HOC/templates/WithoutSidebar/WithoutSidebar';\nimport { RedirectAnonymousToLogin } from './wrappers/RedirectBySession';\nimport { locationHelper } from './lib/helper';\n\ninterface SettingsPageRouter {\n  tab?: string;\n}\nconst SettingsPageRouter: FC<RouteComponentProps<SettingsPageRouter>> = ({ match }) => {\n  const maybeTabStr = match.params.tab;\n  const tab =\n    maybeTabStr === 'preferences'\n      ? SettingsPageTab.Preferences\n      : maybeTabStr === 'logs'\n      ? SettingsPageTab.ModerationLogs\n      : maybeTabStr === 'invites'\n      ? SettingsPageTab.Invites\n      : maybeTabStr === 'instance'\n      ? SettingsPageTab.Instance\n      : maybeTabStr === 'flags'\n      ? SettingsPageTab.Flags\n      : !maybeTabStr\n      ? SettingsPageTab.General\n      : null;\n\n  const props = useMemo<SettingsPage | null>(\n    () =>\n      tab === null\n        ? null\n        : {\n            tab,\n            basePath: `/settings`\n          },\n    [tab]\n  );\n\n  if (!props) {\n    return <NotFoundHOC />;\n  }\n\n  return (\n    <RedirectAnonymousToLogin>\n      <WithoutSidebarTemplate>\n        <SettingsPage {...props} />\n      </WithoutSidebarTemplate>\n    </RedirectAnonymousToLogin>\n  );\n};\n\nexport const SettingsPageRoute: RouteProps = {\n  exact: true,\n  path: '/settings/:tab(preferences|logs|invites|instance|flags)?',\n  component: SettingsPageRouter\n};\n\ntype Tab = undefined | 'preferences' | 'logs' | 'invites' | 'instance' | 'flags';\ntype Params = {\n  tab: Tab;\n};\nexport const settingsLocation = locationHelper<Params, undefined>(SettingsPageRoute);\n","import * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport { i18nMark } from '@lingui/react';\nimport { FormikHook } from 'ui/@types/types';\nimport Alert from '../../elements/Alert';\nimport { Input, Label, Checkbox } from '@rebass/forms';\nimport Button from 'ui/elements/Button';\nimport { Box, Text, Flex } from 'rebass/styled-components';\nimport styled from '../../themes/styled';\nimport { AlertCircle } from 'react-feather';\nimport { AlertWrapper } from 'ui/modules/Modal';\nimport { INVITE_ONLY_TEXT } from 'mn-constants';\nimport media from 'styled-media-query';\nimport { NavLink, Link } from 'react-router-dom';\nimport LogoContainer from 'ui/elements/Logo';\n\nlet tt = {\n  login: i18nMark('Sign in'),\n  placeholders: {\n    email: i18nMark('eg. mary@moodlers.org'),\n    preferredUsername: i18nMark('eg. moodlerMary'),\n    name: i18nMark('eg. Moodler Mary'),\n    password: i18nMark('Choose your password'),\n    passwordConfirm: i18nMark('Confirm your password')\n  }\n};\n\nexport interface Props {\n  formik: FormikHook<SignUpFormValues>;\n  registeredUsername?: string;\n  registeredEmail?: string;\n}\n\nexport interface SignUpFormValues {\n  name: string;\n  email: string;\n  password: string;\n  username: string;\n  passwordConfirm: string;\n  terms: boolean;\n}\n\nexport const SignUpPage: React.FC<Props> = ({ formik, registeredUsername, registeredEmail }) => {\n  return (\n    <Container>\n      {!formik.isSubmitting && formik.submitCount && registeredUsername && registeredEmail ? (\n        <Box mt={3}>\n          <LogoContainer />\n          <Wrapper>\n            <Box>\n              <Text variant=\"suptitle\">\n                <Trans>Welcome</Trans> <b>{registeredUsername}</b>\n              </Text>\n              <Text mt={2} variant=\"text\">\n                <Trans>Please confirm your email address</Trans>\n                <b>{' ' + registeredEmail + ' '}</b>\n                <Trans>\n                  by clicking on the link we emailed you (check your spam folder if necessary).\n                </Trans>\n              </Text>\n            </Box>\n            <Browse>\n              <Link to={'/'}>\n                <Button mt={3} variant=\"primary\">\n                  <Trans>Sign in</Trans>\n                </Button>\n              </Link>\n            </Browse>\n          </Wrapper>\n          >{/* <Alert variant=\"negative\">{formik.errors.email}</Alert> */}\n        </Box>\n      ) : (\n        <LoginWrapper>\n          <LogoContainer />\n          <Header>\n            <Aware p={3}>\n              <Box mr={2}>\n                <AlertCircle size=\"20\" color=\"white\" />\n              </Box>\n              <Text variant=\"suptitle\">{INVITE_ONLY_TEXT}</Text>\n            </Aware>\n          </Header>\n          <Flex mt={2}>\n            <FormWrapper onSubmit={formik.handleSubmit}>\n              <Box>\n                <label>\n                  <Trans>Email</Trans>\n                </label>\n                <Input\n                  placeholder={tt.placeholders.email}\n                  name=\"email\"\n                  value={formik.values.email}\n                  onChange={formik.handleChange}\n                />\n                {formik.errors.email && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.email}</Alert>\n                  </AlertWrapper>\n                )}\n              </Box>\n              <Box mt={3}>\n                <label>\n                  <Trans>Full name</Trans>\n                </label>\n                <Input\n                  placeholder={tt.placeholders.name}\n                  name=\"name\"\n                  value={formik.values.name}\n                  onChange={formik.handleChange}\n                />\n                {formik.errors.name && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.name}</Alert>\n                  </AlertWrapper>\n                )}\n              </Box>\n              <Box mt={3}>\n                <label>\n                  <Trans>Preferred username</Trans>\n                </label>\n                <Input\n                  placeholder={tt.placeholders.preferredUsername}\n                  name=\"username\"\n                  value={formik.values.username}\n                  onChange={formik.handleChange}\n                />\n                {formik.errors.username && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.username}</Alert>\n                  </AlertWrapper>\n                )}\n              </Box>\n              <Box mt={3}>\n                <label>\n                  <Trans>Password</Trans>\n                </label>\n                <Input\n                  placeholder={tt.placeholders.password}\n                  name=\"password\"\n                  type=\"password\"\n                  value={formik.values.password}\n                  onChange={formik.handleChange}\n                />\n                {formik.errors.password && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.password}</Alert>\n                  </AlertWrapper>\n                )}\n              </Box>\n              <Box mt={3}>\n                <label>\n                  <Trans>Confirm password</Trans>\n                </label>\n                <Input\n                  placeholder={tt.placeholders.passwordConfirm}\n                  name=\"passwordConfirm\"\n                  type=\"password\"\n                  value={formik.values.passwordConfirm}\n                  onChange={formik.handleChange}\n                />\n                {formik.errors.passwordConfirm && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.passwordConfirm}</Alert>\n                  </AlertWrapper>\n                )}\n              </Box>\n              <Box mt={3} mb={3}>\n                <Label alignItems=\"center\">\n                  <Checkbox\n                    name=\"terms\"\n                    id=\"remember\"\n                    value={formik.values.terms}\n                    onChange={formik.handleChange}\n                  />\n                  <Text mr={1}>I have read and agreed the</Text>\n                  <NavLink to=\"/terms\" target=\"_blank\">\n                    Terms and Conditions\n                  </NavLink>\n                </Label>\n                {formik.errors.terms && (\n                  <AlertWrapper>\n                    <Alert variant=\"negative\">{formik.errors.terms}</Alert>\n                  </AlertWrapper>\n                )}\n              </Box>\n              <Box mt={3}>\n                <Button\n                  variant=\"primary\"\n                  isSubmitting={formik.isSubmitting}\n                  isDisabled={formik.isSubmitting}\n                  type=\"submit\"\n                  // onClick={formik.submitForm}\n                >\n                  <Trans>Sign up</Trans>\n                </Button>\n              </Box>\n            </FormWrapper>\n          </Flex>\n        </LoginWrapper>\n      )}\n    </Container>\n  );\n};\nexport default SignUpPage;\n\nconst Browse = styled(Box)`\n  text-align: center;\n  margin-top: 10px;\n`;\n\nconst Wrapper = styled.div`\n  background: #fff;\n  border-radius: 4px;\n  height: inherit;\n  padding: 30px 20px;\n  text-align: center;\n  height: fit-content;\n`;\n\nconst LoginWrapper = styled(Box)`\n  ${media.lessThan('medium')`\n    // display: grid;\n    // grid-template-columns: 1fr;\n    padding: 16px\n  `};\n`;\n\nconst Container = styled.div`\n  margin: 0 auto;\n  max-width: 900px;\n  padding-bottom: 50px;\n`;\n\nconst Header = styled.div`\n  grid-area: header;\n  text-align: center;\n`;\n\nconst FormWrapper = styled.form`\n  margin: 0;\n  flex: 1;\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n  background: ${props => props.theme.colors.appInverse};\n  border-radius: 4px;\n  height: inherit;\n  border: 1px solid #dddfe2;\n  text-align: left;\n  height: fit-content;\n  padding: 16px;\n`;\n\n// const Right = styled(Box)`\n//   .extra {\n//     width: 100%;\n//     margin-right: 0;\n//   }\n// `;\n\n// const Footer = styled(Box)`\n//   border-top: ${props => props.theme.colors.border};\n//   padding-top: 24px;\n//   & ul {\n//     list-style-type: none;\n//     margin: 0;\n//     padding: 0;\n//     text-align: center;\n//     margin: 0 auto;\n//     justify-content: center;\n//     align-items: center;\n//     display: flex;\n//     flex: 1;\n//     ${clearFix()}\n//     & li {\n//       float: left;\n//       margin-right: 16px;\n//       font-size: 13px;\n//       & a {\n//         color: rgba(0, 0, 0, 0.45);\n//         text-decoration: none;\n//         &:hover {\n//           text-decoration: underline;\n//         }\n//       }\n//     }\n//   }\n// `;\n\nconst Aware = styled(Flex)<{ green: boolean }>`\n  background: ${props => (props.green ? '#546d4f' : props.theme.colors.secondary)};\n  border-radius: 4px;\n  align-items: center;\n  div {\n    color: white;\n  }\n`;\n","import { useFormik } from 'formik';\nimport React, { FC, useMemo } from 'react';\nimport SignUpPage, { SignUpFormValues, Props } from 'ui/pages/signUp';\nimport * as Yup from 'yup';\nimport { useAnon } from 'fe/session/useAnon';\nimport { USERNAME_REGEX } from 'mn-constants';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n\nconst initialValues: SignUpFormValues = {\n  name: '',\n  email: '',\n  password: '',\n  username: '',\n  passwordConfirm: '',\n  terms: false\n};\nexport interface SignUpPageHOC {}\nconst signUpPageTitle = t`Sign Up`;\n\nexport const SignUpPageHOC: FC<SignUpPageHOC> = () => {\n  usePageTitle(signUpPageTitle);\n  const { signUp, signUpStatus, usernameAvailable } = useAnon();\n  const validationSchema: Yup.ObjectSchema<SignUpFormValues> = Yup.object<SignUpFormValues>({\n    username: Yup.string()\n      .min(3)\n      .max(16)\n      .matches(USERNAME_REGEX)\n      .required()\n      .test(\n        'checkDuplUsername',\n        'username already exists',\n        username => username && usernameAvailable(username)\n      ),\n    email: Yup.string()\n      .max(50)\n      .required(),\n    name: Yup.string()\n      .max(50)\n      .required(),\n    password: Yup.string()\n      .min(6)\n      .max(50)\n      .required(),\n    passwordConfirm: Yup.string()\n      .oneOf([Yup.ref('password'), null], 'Passwords must match')\n      .required(),\n    terms: Yup.boolean().oneOf([true], 'Must Accept Terms and Conditions')\n  });\n\n  const formik = useFormik<SignUpFormValues>({\n    initialValues,\n    enableReinitialize: true,\n    validateOnChange: false,\n    validateOnBlur: false,\n    validationSchema,\n    onSubmit: regInput =>\n      signUp({\n        email: regInput.email,\n        name: regInput.name,\n        password: regInput.password,\n        preferredUsername: regInput.username,\n        wantsEmailDigest: false,\n        wantsNotifications: false\n      })\n  });\n\n  const props = useMemo<Props>(\n    () =>\n      signUpStatus.called && signUpStatus.data?.createUser?.user.name\n        ? {\n            formik,\n            registeredUsername: signUpStatus.data.createUser.user.name,\n            registeredEmail: signUpStatus.data.createUser.email\n          }\n        : {\n            formik\n          },\n    [signUpStatus, formik]\n  );\n\n  return <SignUpPage {...props} />;\n};\n","import { SignUpPageHOC } from 'HOC/pages/signUp/SignUpPage';\nimport React, { FC } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { GuestTemplate } from 'HOC/templates/Guest/Guest';\n\ninterface SignupPageRouter {}\nconst SignupPageRouter: FC<RouteComponentProps<SignupPageRouter>> = ({\n  match\n}) => {\n  return (\n    <GuestTemplate withoutHeader>\n      <SignUpPageHOC />\n    </GuestTemplate>\n  );\n};\n\nexport const SignupPageRoute: RouteProps = {\n  exact: true,\n  path: '/signup',\n  component: SignupPageRouter\n};\n","import React, { FC } from 'react';\nimport { LMSPrefs } from 'fe/lib/moodleLMS/LMSintegration';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\n\nexport type LMSMoodleSearch =\n  | {\n      params: LMSPrefs;\n      badParams?: false;\n    }\n  | {\n      badParams: true;\n    };\n\nconst moodleLMSEntryPageTitle = t`Moodle LMS`;\n\nexport const LMSMoodleSearch: FC<LMSMoodleSearch> = props => {\n  usePageTitle(moodleLMSEntryPageTitle);\n\n  if (props.badParams) {\n    return (\n      <div>\n        <h2>Bad Params</h2>\n      </div>\n    );\n  } else {\n    const { course, site, section } = props.params;\n    return (\n      <div>\n        <h1>Welcome from Moodle LMS !</h1>\n        <h2>Site: {site}</h2>\n        {course && <h3>course: {course}</h3>}\n        {section && <h3>section: {section}</h3>}\n      </div>\n    );\n  }\n};\n","import { getUrlParamsFromEntryPointForMoodleLMS } from 'fe/lib/moodleLMS/LMSintegration';\nimport { useLMSPrefs } from 'fe/lib/moodleLMS/useSendToMoodle';\nimport { LMSMoodleSearch } from 'HOC/pages/lmsMoodleSearch/lmsMoodleSearch';\nimport { WithSidebarTemplate } from 'HOC/templates/WithSidebar/WithSidebar';\nimport React, { FC, useEffect, useRef, useState } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { RedirectAnonymousToLogin } from './wrappers/RedirectBySession';\n\ninterface LMSMoodleSearchRouter {}\nconst LMSMoodleSearchRouter: FC<RouteComponentProps<LMSMoodleSearchRouter>> = ({ match }) => {\n  const { updateLMSPrefs, loading } = useLMSPrefs();\n  const paramsRef = useRef(getUrlParamsFromEntryPointForMoodleLMS());\n  const done = useRef(false);\n  const [props, setProps] = useState<LMSMoodleSearch>();\n  useEffect(() => {\n    const { current: params } = paramsRef;\n    if (done.current || loading) {\n      return;\n    } else if (!params) {\n      setProps({ badParams: true });\n    } else {\n      updateLMSPrefs(params).then(() => setProps({ params }));\n    }\n    done.current = true;\n  }, [updateLMSPrefs, loading]);\n  return (\n    <RedirectAnonymousToLogin>\n      <WithSidebarTemplate>{props && <LMSMoodleSearch {...props} />}</WithSidebarTemplate>\n    </RedirectAnonymousToLogin>\n  );\n};\n\nexport const LMSMoodleSearchRoute: RouteProps = {\n  exact: true,\n  path: '/lms/moodle/search',\n  component: LMSMoodleSearchRouter\n};\n","import Markdown from 'markdown-to-jsx';\nimport * as React from 'react';\nimport { Eye } from 'react-feather';\nimport { Box, Flex, Text } from 'rebass/styled-components';\nimport media from 'styled-media-query';\nimport { Panel } from 'ui/elements/Panel';\nimport styled from '../../themes/styled';\nimport LogoContainer from 'ui/elements/Logo';\n\nexport interface Props {\n  terms_users_data: string;\n  terms_users_text_data: string;\n  terms_privacy_enabled: boolean;\n  privacy_url_text_data: string;\n  terms_privacy_text_data: string;\n  terms_cookies_data: string;\n  terms_cookies_text_data: string;\n  terms_indexing_data: string;\n  terms_indexing_text_data: string;\n}\n\nconst TermsAndConditionsPage: React.FC<Props> = ({\n  terms_users_text_data,\n  terms_cookies_text_data,\n  terms_indexing_text_data,\n  terms_users_data,\n  terms_privacy_enabled,\n  privacy_url_text_data,\n  terms_privacy_text_data,\n  terms_cookies_data,\n  terms_indexing_data\n}) => {\n  return (\n    <Container>\n      <LoginWrapper>\n        <LogoContainer />\n        <Flex mt={2}>\n          <Right>\n            <Aware green mb={3} mt={3} p={3}>\n              <Box mr={2}>\n                <Eye size=\"20\" color=\"white\" />\n              </Box>\n              <Text variant=\"suptitle\">\n                {' '}\n                Please read the following. By using this instance of MoodleNet you are consenting to\n                these agreements.\n              </Text>\n            </Aware>\n            <Panel className=\"extra\">\n              <Box p={3}>\n                <Markdown>{terms_users_data || terms_users_text_data}</Markdown>\n              </Box>\n              <Box p={3}>\n                {terms_privacy_enabled ? (\n                  <Markdown>{privacy_url_text_data || terms_privacy_text_data}</Markdown>\n                ) : null}\n              </Box>\n              <Box p={3}>\n                <Markdown>{terms_cookies_data || terms_cookies_text_data}</Markdown>\n              </Box>\n              <Box p={3}>\n                <Markdown>{terms_indexing_data || terms_indexing_text_data}</Markdown>\n              </Box>\n            </Panel>\n          </Right>\n        </Flex>\n      </LoginWrapper>\n      {/* )} */}\n    </Container>\n  );\n};\nexport default TermsAndConditionsPage;\n\nconst LoginWrapper = styled(Box)`\n  ${media.lessThan('medium')`\n    // display: grid;\n    // grid-template-columns: 1fr;\n    padding: 16px\n  `};\n`;\n\nconst Container = styled.div`\n  margin: 0 auto;\n  max-width: 1020px;\n`;\n\nconst Right = styled(Box)`\n  .extra {\n    width: 100%;\n    margin-right: 0;\n    margin-left: 0;\n  }\n`;\n\n// const Footer = styled(Box)`\n//   border-top: ${props => props.theme.colors.border};\n//   padding-top: 24px;\n//   & ul {\n//     list-style-type: none;\n//     margin: 0;\n//     padding: 0;\n//     text-align: center;\n//     margin: 0 auto;\n//     justify-content: center;\n//     align-items: center;\n//     display: flex;\n//     flex: 1;\n//     ${clearFix()}\n//     & li {\n//       float: left;\n//       margin-right: 16px;\n//       font-size: 13px;\n//       & a {\n//         color: rgba(0, 0, 0, 0.45);\n//         text-decoration: none;\n//         &:hover {\n//           text-decoration: underline;\n//         }\n//       }\n//     }\n//   }\n// `;\n\nconst Aware = styled(Flex)<{ green: boolean }>`\n  background: ${props => (props.green ? '#546d4f' : props.theme.colors.primary)};\n  border-radius: 4px;\n  align-items: center;\n  div {\n    color: white;\n  }\n`;\n","import React, { FC, useMemo, useEffect } from 'react';\nimport TermsAndConditionsPage, { Props } from 'ui/pages/termsAndConditions';\nimport useAxios from 'axios-hooks';\nimport { terms_markdown_text, terms_markdown_urls, terms_privacy } from 'mn-constants';\nimport { LocaleContext } from 'context/global/localizationCtx';\nimport { t } from '@lingui/macro';\nimport { usePageTitle } from 'context/global/pageCtx';\nconst termsAndConditionsPageTitle = t`Terms and Conditions`;\n\nexport const TermsAndConditionsPageHOC: FC = () => {\n  usePageTitle(termsAndConditionsPageTitle);\n  const { i18n } = React.useContext(LocaleContext);\n  const terms_users_text = { data: i18n._(terms_markdown_text.terms_users) };\n  const terms_privacy_text = { data: i18n._(terms_privacy.text_markdown) };\n  const terms_cookies_text = { data: i18n._(terms_markdown_text.terms_cookies) };\n  const terms_indexing_text = { data: i18n._(terms_markdown_text.terms_indexing) };\n\n  const [terms_users, exec_terms_users] = useAxios(terms_markdown_urls.terms_users, {\n    useCache: true,\n    manual: true\n  });\n\n  const [terms_cookies, exec_terms_cookies] = useAxios(terms_markdown_urls.terms_cookies, {\n    useCache: true,\n    manual: true\n  });\n  const [terms_indexing, exec_terms_indexing] = useAxios(terms_markdown_urls.terms_indexing, {\n    useCache: true,\n    manual: true\n  });\n  const [privacy_url_text, exec_privacy_url_text] = useAxios(terms_privacy.url_markdown, {\n    useCache: true\n  });\n  useEffect(\n    () => {\n      if (terms_markdown_urls.enabled) {\n        exec_terms_users();\n        exec_terms_cookies();\n        exec_terms_indexing();\n      }\n      if (terms_privacy.enabled) {\n        exec_privacy_url_text();\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const props = useMemo<Props>(\n    () => ({\n      terms_privacy_enabled: terms_privacy.enabled,\n      terms_users_data: terms_users.data,\n      terms_users_text_data: terms_users_text.data,\n      privacy_url_text_data: privacy_url_text.data,\n      terms_privacy_text_data: terms_privacy_text.data,\n      terms_cookies_data: terms_cookies.data,\n      terms_cookies_text_data: terms_cookies_text.data,\n      terms_indexing_data: terms_indexing.data,\n      terms_indexing_text_data: terms_indexing_text.data\n    }),\n    [\n      privacy_url_text.data,\n      terms_cookies.data,\n      terms_cookies_text.data,\n      terms_indexing.data,\n      terms_indexing_text.data,\n      terms_privacy_text.data,\n      terms_users.data,\n      terms_users_text.data\n    ]\n  );\n\n  return <TermsAndConditionsPage {...props} />;\n};\n","import React, { FC } from 'react';\nimport { RouteComponentProps, RouteProps } from 'react-router-dom';\nimport { GuestTemplate } from 'HOC/templates/Guest/Guest';\nimport { TermsAndConditionsPageHOC } from 'HOC/pages/termsAndConditions/TermsAndConditionsPage';\n\ninterface TermsAndConditionsPageRouter {}\nconst TermsAndConditionsPageRouter: FC<RouteComponentProps<TermsAndConditionsPageRouter>> = () => {\n  return (\n    <GuestTemplate withoutHeader>\n      <TermsAndConditionsPageHOC />\n    </GuestTemplate>\n  );\n};\n\nexport const TermsAndConditionsPageRoute: RouteProps = {\n  exact: true,\n  path: '/terms',\n  component: TermsAndConditionsPageRouter\n};\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { AllCollectionsPageRoute } from 'routes/AllCollectionsPageRoute';\nimport { AllCommunitiesPageRoute } from 'routes/AllCommunitiesPageRoute';\nimport { CollectionPageRoute } from 'routes/CollectionPageRoute';\nimport { CommunityPageRoute } from 'routes/CommunityPageRoute';\nimport { ConfirmEmailRoute } from 'routes/ConfirmEmailPageRoute';\nimport { CreateNewPasswordPageRoute } from 'routes/CreateNewPasswordPageRoute';\nimport { DiscoverPageRoute } from 'routes/DiscoverPageRoute';\nimport { HomePageRoute } from 'routes/HomePageRoute';\nimport { LoginPageRoute } from 'routes/LoginPageRoute';\nimport { ResetPasswordPageRoute } from 'routes/ResetPasswordPageRoute';\nimport { SearchPageRoute } from 'routes/SearchPageRoute';\nimport { SettingsPageRoute } from 'routes/SettingsPageRoute';\nimport { SignupPageRoute } from 'routes/SignupPageRoute';\nimport { ThreadPageRoute } from 'routes/ThreadPageRoute';\nimport { UserPageRoute } from 'routes/UserPageRoute';\nimport { LMSMoodleSearchRoute } from 'routes/LMSMoodleSearchRoute';\nimport { TermsAndConditionsPageRoute } from 'routes/TermsAndConditionsPage';\nimport { NotFoundHOC } from 'HOC/pages/not-found/NotFound';\nexport const Router: React.FC = () => {\n  return (\n    <Switch>\n      <Route {...UserPageRoute} />\n      <Route {...CommunityPageRoute} />\n      <Route {...CollectionPageRoute} />\n      <Route {...SettingsPageRoute} />\n      <Route {...AllCollectionsPageRoute} />\n      <Route {...AllCommunitiesPageRoute} />\n      <Route {...ThreadPageRoute} />\n      <Route {...DiscoverPageRoute} />\n      <Route {...SearchPageRoute} />\n      <Route {...CreateNewPasswordPageRoute} />\n      <Route {...ResetPasswordPageRoute} />\n      <Route {...LoginPageRoute} />\n      <Route {...SignupPageRoute} />\n      <Route {...ConfirmEmailRoute} />\n      <Route {...TermsAndConditionsPageRoute} />\n      <Route {...LMSMoodleSearchRoute} />\n      <Route {...HomePageRoute} />\n      <Route component={NotFoundHOC} />\n    </Switch>\n  );\n};\n","import * as React from 'react';\nimport Alert from 'ui/elements/Alert/index';\nimport { X } from 'react-feather';\nimport styled from 'ui/themes/styled';\nimport { Box } from 'rebass';\nimport media from 'styled-media-query';\n\nexport const TopMessage: React.FC = () => {\n  const [show, setShow] = React.useState(true);\n  return show ? (\n    <AlertWrap>\n      <Alert variant=\"warning\">\n        <div style={{ textAlign: 'center' }}>\n          This site is currently in active development. We are looking forward to reading your\n          feedback and ideas in our{' '}\n          <a\n            href=\"https://tracker.moodle.org/projects/MDLNET/summary\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Tracker\n          </a>\n          <span\n            style={{\n              cursor: 'pointer',\n              position: 'absolute',\n              top: '2px',\n              right: '2px'\n            }}\n            onClick={() => setShow(false)}\n          >\n            <X size={16} />\n          </span>\n        </div>\n      </Alert>\n    </AlertWrap>\n  ) : null;\n};\n\nconst AlertWrap = styled(Box)`\n  position: absolute;\n  z-index: 9;\n  left: 50%;\n  width: 250px;\n  margin-left: -125px !important;\n  ${media.greaterThan('medium')`\n    top 10px;\n  `}\n  ${media.lessThan('medium')`\n    top 50%;\n  `}\n`;\n","import * as React from 'react';\nimport ThemeProvider from 'ui/styleguide/Wrapper';\nimport { Router } from './Router';\nimport { TopMessage } from './topMessage';\n\nexport const App: React.FC = () => {\n  return (\n    <ThemeProvider>\n      <>\n        <TopMessage />\n        <Router />\n      </>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","import algoliasearch from 'algoliasearch/lite';\nimport qs from 'qs';\nimport React from 'react';\nimport { InstantSearch } from 'react-instantsearch-dom';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { LocationDescriptorObject } from 'history';\nimport { mothershipCreds } from '../../mn-constants';\nconst createURL = (searchState: any) => `?${qs.stringify(searchState)}`;\n\nconst searchStateToUrl = (searchState: any) => `/search/${createURL(searchState)}`;\n\nconst urlToSearchState = (search: string) => qs.parse(search.slice(1));\nconst DEBOUNCE_TIME = 500;\nconst searchClient =\n  mothershipCreds &&\n  mothershipCreds.appId &&\n  mothershipCreds.apiKey &&\n  algoliasearch(mothershipCreds.appId, mothershipCreds.apiKey);\n\nexport const ProvideAlgoliaContext: React.FC = ({ children }) => {\n  const { push } = useHistory();\n  const location = useLocation();\n  const backLoc = React.useRef<LocationDescriptorObject | undefined>();\n  const searching = React.useRef(isSearchLocation(location.pathname));\n  const [searchState, setSearchState] = React.useState(urlToSearchState(location.search));\n  React.useEffect(() => {\n    // console.log(\n    //   '\\nsearchState',\n    //   searchState,\n    //   '\\nlocation:',\n    //   location,\n    //   '\\nbackLoc:',\n    //   backLoc.current,\n    //   '\\nisInSearch:',\n    //   searching.current\n    // );\n    const setUrlTO = setTimeout(() => {\n      if (searching.current && !isSearchLocation(location.pathname)) {\n        backLoc.current = undefined;\n        searching.current = false;\n        setSearchState(EMPTY_QUERY);\n      } else if (searchState.query) {\n        backLoc.current =\n          backLoc.current || (isSearchLocation(location.pathname) ? undefined : location);\n        searching.current = true;\n        push(searchStateToUrl(searchState));\n      } else if (isSearchLocation(location.pathname)) {\n        if (backLoc.current) {\n          push(backLoc.current);\n        } else {\n          push('/');\n        }\n        backLoc.current = undefined;\n      }\n    }, DEBOUNCE_TIME);\n    return () => {\n      clearTimeout(setUrlTO);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchState, location.pathname, location.hash, location.search, push]);\n  const handleSetSearchState = React.useCallback(\n    newSearchState => {\n      // console.table({ newSearchState, searchState });\n      if (\n        'query' in newSearchState &&\n        // eslint-disable-next-line eqeqeq\n        (newSearchState?.query != searchState?.query ||\n          // eslint-disable-next-line eqeqeq\n          newSearchState?.refinementList?.index_type != searchState?.refinementList?.index_type ||\n          // eslint-disable-next-line eqeqeq\n          newSearchState?.page != searchState?.page)\n      ) {\n        setSearchState(newSearchState);\n      }\n    },\n    [searchState]\n  );\n  return searchClient && mothershipCreds ? (\n    <InstantSearch\n      searchState={searchState}\n      onSearchStateChange={handleSetSearchState}\n      searchClient={searchClient}\n      refresh={true}\n      indexName={mothershipCreds.indexName || ''}\n      createURL={createURL}\n    >\n      {children}\n    </InstantSearch>\n  ) : (\n    <>{children}</>\n  );\n};\nconst isSearchLocation = (locationPathname: string) => locationPathname === '/search/';\nconst EMPTY_QUERY = { query: '' };\n","import React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport { ProvideAlgoliaContext } from './algolia';\nimport { ProvideLocalizationCtx } from './localizationCtx';\nimport { ProvidePageCtx } from './pageCtx';\n\ninterface Props {\n  children: React.ReactNode;\n}\nexport const ProvideContexts: React.FC<Props> = ({ children }) => {\n  return (\n    <ProvideLocalizationCtx>\n      <ProvidePageCtx>\n        <BrowserRouter>\n          <ProvideAlgoliaContext>{children}</ProvideAlgoliaContext>\n        </BrowserRouter>\n      </ProvidePageCtx>\n    </ProvideLocalizationCtx>\n  );\n};\n","import { IS_DEV, PUBLIC_URL } from './mn-constants';\n\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (!IS_DEV && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as Sentry from '@sentry/browser';\nimport { MngErrorLink } from 'fe/lib/graphql/ctx';\nimport * as React from 'react';\nimport { ApolloProvider } from 'react-apollo';\nimport ReactDOM from 'react-dom';\nimport { Slide, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { createGlobalStyle } from 'styled-components';\nimport media from 'styled-media-query';\nimport getApolloClient from './apollo/client';\nimport App from './containers/App/App';\nimport { ProvideContexts } from './context/global';\nimport * as K from './mn-constants';\nimport { colors, typography } from './mn-constants';\nimport registerServiceWorker from './registerServiceWorker';\nimport { createLocalSessionKVStorage } from './util/keyvaluestore/localSessionStorage';\n\nK.SENTRY_KEY &&\n  Sentry.init({\n    dsn: K.SENTRY_KEY\n  });\n\nrun();\nasync function run() {\n  const Global = createGlobalStyle`\n      body, html {\n          border: 0;\n          margin: 0;\n          padding: 0;\n          width: 100%;\n          height: 100%;\n          font-family: ${typography.type.primary} !important;\n      }\n      \n      * {\n        box-sizing: border-box;\n      }\n      input, textarea {\n        ::placeholder {\n          font-size: 13px;\n          font-family: ${typography.type.primary} !important;\n        }\n      }\n      body {\n      background: ${colors.app};\n      .ais-SearchBox {\n        border-radius: 4px;\n        border: ${colors.border}\n        height: 34px;\n        width: 380px;\n        background: ${colors.app}\n        input {\n          border: none;\n          margin: 0 !important; \n          border-radius: 4px;\n          text-indent: 30px;\n          padding: 0;\n          height: 32px;\n          background: ${colors.app};\n          font-size: 13px;\n        }\n      }\n      .ais-InstantSearch__root { \n        display: flex;\n      width: 100%; }\n      }\n\n      .Toastify__toast-container--top-right{\n        top:60px !important;\n        ${media.lessThan('480px')` \n          width: 90vw !important;\n          margin: 0 auto; \n        `}; \n    }\n      \n    input, textarea{\n      &:focus::placeholder{\n        color: transparent;\n      }\n    }\n    \n    input:focus::-webkit-input-placeholder, textarea:focus::-webkit-input-placeholder { color:transparent; }\n    input:focus:-moz-placeholder, textarea:focus:-moz-placeholder { color:transparent; } /* FF 4-18 */\n    input:focus::-moz-placeholder, textarea:focus::-moz-placeholder { color:transparent; } /* FF 19+ */\n    input:focus:-ms-input-placeholder, textarea:focus:-ms-input-placeholder { color:transparent; } /* IE 10+ */\n  `;\n  const createLocalKVStore = createLocalSessionKVStorage('local');\n\n  const apolloClient = await getApolloClient({\n    localKVStore: createLocalKVStore('APOLLO#'),\n    appLinks: [MngErrorLink]\n  });\n\n  const ApolloApp = () => (\n    <ApolloProvider client={apolloClient.client}>\n      <ProvideContexts>\n        <Global />\n        <ToastContainer hideProgressBar transition={Slide} autoClose={3000} newestOnTop />\n        <App />\n      </ProvideContexts>\n    </ApolloProvider>\n  );\n\n  ReactDOM.render(<ApolloApp />, document.getElementById('root'));\n\n  registerServiceWorker();\n}\n"],"sourceRoot":""}