(this.webpackJsonpweloop=this.webpackJsonpweloop||[]).push([[1],{222:function(e,n,t){"use strict";var r=t(325);t.d(n,"getOpType",(function(){return r.a})),t.d(n,"getOperationNameAndType",(function(){return r.b}));t(326)},325:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return l}));var r=t(159),a=t(243),i=t(241);t(102).ApolloLink;var o=function(e){var n=e.query.definitions.find((function(n){return"OperationDefinition"===n.kind&&!!n.name&&n.name.value===e.operationName}));return n&&n.operation},l=function(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind})).reduce((function(e,n){if(!e){var t=n.selectionSet.selections.find((function(e){return"Field"===e.kind}))||null,r=n.operation;e=t&&[t.name.value,r]}return e}),null)||[]}},326:function(e,n){},396:function(e,n,t){e.exports=t.p+"static/media/collectionPlaceholder.43589a77.png"},477:function(e,n,t){e.exports=t(878)},570:function(e,n,t){},573:function(e,n,t){var r={"./en_GB/messages.po":[886,0]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=573,e.exports=a},574:function(e,n,t){var r={"./en_GB/messages.js":[887,0]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=574,e.exports=a},718:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAACOCAYAAAD0I+WQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGNFJREFUeNrsne2VHDUThcd+/d/OYJ2B7QgMEawdge0IFiIAIlgcgU0EiyMAIliIYCECIAK/88xBnNmhpZZKpW6p595z6hjsmZ5utVRXVaqPB7v7eLyXr/bydi9Pd4IgCIJwH7/v5ce9fL+XP8JfPjj6wOVePu7licZKEARBmMFf/xgfPxyTyeU/TCMIgiAIJXgLoUAmj/8xW+5ZJC9fvtx98cUXGiZBEAThgF9//XX36dOnKQvlOWTyzV6+DX/7+PHj3c8//7x7/vy5Rk4QBEG4h99//3336tWr3W+//Xb81x8hk7vd0WH77e2tiEQQBEFIEgo88ffff/9rnTw8JpLLy0sRiSAIgpDE06dPD9bJEZ48PP4/EYkgCIKQSyjHeKghEQRBEGohMhEEQRBEJoIgCILIRBAEQRCZCIIgCILIRBAEQRCZCIIgCCITQRAEQWQiCIIgCODROTwklS6pJcOff/311+FPwH+fFCv7FxS8PK4IECoo8yeZn6fZn4IgCCKTDQGCoOoxAmn88ssvputQwOz4u+G/v/vuu3tkA7kEWer5vv/+e81cQRBWBTr2FJ+DfPPNN59HxN3d3efr6+vPz549+3z8PEvL5eXl5w8fPnz+888/mz7vTz/99HlPZqs+q0QikZzImGSCwkZxr00gc8TSkkB7fXaJRCIyGcIKubq6GmZnfnFxcRjXFtYK14S0NIklEonIpIBE3rx5M+xAQ36tSGXkcZFIJCKTxdxZ3NdWBrwVqWCtaTJLJBKRyQRubm42e9CM+4vn8wRnNJrQEolEZHJkjbx8+fIsXgDPiQtPhCKRSEaW7jLgf/zxx0NCoDU/ZDTwnOSr8NweePv27e7q6kpB8IIgLIqukha/+uqr3fv375tc++Li4qC0keMM9lSyYUjKIXs+ZNAjf/zxh+u9kSD5+vXr3Zs3bw4JiU+ePKm6HtcgufGHH37QDBcEYTGs7ubCreWdM8GZBIfSnEt4H3ZzPa7L9fkdz/tmHLzcXgoblkgkZ3Nmcnt766aQA4FwzaWfwTP3het4PEMLkpZIJJLuyASF6aGAOcRumW1eegDuFTzg8UxYOSq9IpFINksmHkSC0qZOVY/gvjxIxYNQcMlpokskks2RSS2R4M7qlUSmFHmtG8+DULaU+CmRSEQm1UQyamXjWmXuQSg6P5GMIugILPsgctX2L4uGBhNWSyguobCl2CvC3cePH+81rBoJ33777e7Vq1eHPJBYQ64U3r17d/iT71tBLgvjZxn/GuyJtGrOlIZjE2I91byM8O6ScOm9EouGjoe+NqXfy0EIRS/NtSL8PTY/CHP3yt2yjksK9Afi3lkjzNGp8PjQq4h5jCw9j4VOQoOJLLLuLihk2LpHyJJh0DWFGWvde/R9WXrH4mXR5o5bbIz4ey8reCnruaTNAjv4Jdyc1nHZOdaq21rNvi3IIhnw7CisFsle+R0sktpEvl7Ac/A8eyVh+j47t9B22AISQ7HyRgO7VcZtTwiHXey5gN067xtra2tgHvJsWO2l65vP8739JuNgkQnrYxEyQYGVunZQGDc3N4fvblVJsBBKFSOEzHchaCtQyqOCTQmujnMilPDOcC9tBZAjRDLljizdZHCdETdIIpNCUNqjtKwHigKFwS58y2AhWBQjxFxzdsLvjrzTDVbKuYG1tBWLxPP9BWv/3DYYvaHpATw7hq+//tpEJKMetFsJpfRg/tOnTwflYrXc+O7ah5jhoDk2LinXBxsNlJIlmGFNhHpvUziuGRcbE1w63rXhlkRY3ymEg/Zjd244mE+NDWvBGgAg+KDJwaGllIdXGZG5jHAONTnMTSUVhtBEyqTw+dYBAJZMdT5fU8drqQNM6+8z/qn5ECu33/MB/C7jED0111JzdoQD+LkQdwJEYusAfTKnH7xr5Uk6yDOxdP5rmYjoUeaEwokt79GSg5NSIC0j7JYgkznCZLy2RiZhnlnWVe9kgqJPISdab27DqY6jG4vmwjwtLSVPdFNNbH4MoT8KeRq1cfa4lr788st/D4FbubxKwDNZ/c+4kXoPcMANF3u+rbpCmWcp1+CoSM213LNV5gPrLxaAsvVz1p7xcOlJMwWaOdUcKMf8rlyTPiHePmYUOKTSQhGjIEvDhrkPa3QX3+394LIFcY+Kmii+tRFT9DwTYb4eG4wWG1IhD+4H8LzkEguAcEfvKJWQ19L6cBbrCysM68czDybkFuRadywuxrBkQZ5aJz0fXG4lxygXsUg75vWoHUgJlogFF1gCQUIDOGHDZFKi0NgRe7WrPXYDLFkyhMUd3F6eSo/FwjVzCZHPQ0KWuH2+1zOZnNNuM3TbrF1bI71Diw7A26DIrQ2TCZO9xKXkndnOTgVTeulwVxQ+i6UmMz02Pi9evMi2Thh/y/kJBHR5eZn01a+5o425QL3HewmQwR9DKhya99qqpfXa1qXcmNuA25kJirzEXYXy8j4s43pr5R3wu95nKCiXkiKJHGBaTX/vM6taYLWyS09ZfCMqITYdMYk9J+8mFPrcomWigo0ik/+YqrmTAkXhncEMka3tT2bn6K3gsDZKag9Zz58g4qVrHPFsRJNOCaQ4Z7luJSM8Z5y2WJtrVOtSaEwmJf5cdvCe7i3OSXrxJ9fWzapVmjUKdqSwSp5z5EzwEuCGrCkO2jN0iC4y+Y9Vkruw2f16K36u14upzDh475hR8rlF/lJhkzlEOAKYb6VlenoBlmtM5nbpvJ+a3jA94lzKJolMMlGivLyJpLTh0VK7Zu8dV8m4WSPkQu2n3i0ScodGBflJMSHYIpRWT1n1IxY0jCVbnlvYt8hkxkzNjQJKdYJbQsmegkXJTu/u7u6ev77WnVBjHcTAAWaudcL7sGZK9+jqCucnuHtGtUhK5g4hr7FgDpTvKBZkDpkAS2l91i6RcVOicvTroDo0uGQX7G2VoGSsu3AmcCzZkMWK26HG4qmp6Jtyc+QGGfBslt+HtJYKQYUg5kiXd+wVoTdSvgrvIOYuHdE1lApMYQNTGjzDGMTep6ydjZNJ6PHsCWsJdXYuc1FXtU17ODvBB+658Bm/3FweK5ksaZlY+pznbjI8UDsHahGbP2vflwWp98ycK7U4U/N01CoBo+Nh7aLNdXG1MM0tVklOPwUvhdSigVOusmdBWZ9h9I5+qYNs8ptqLZmlii1ubYcdW6+QY0lgQWpjqlDjQcmkRJm3IBNLxnZOWHLw0a9Bdp7jaM15Gb18SUqh5I4fhBqzAJZQWKlaVqMiFeWIxZ171sF1UpUChAHJJFdZcfDu7ee1WiU5rh8mq0eoMe4o711sScSVlUxGD9ec88/PBVig1FLzq8Um4XS9pJTiqOVHsJZT986/UUE8Bd5dbEPgtQkUbHjUatGeLuAld5+p+8ixSjzzREJLXk/wHDmH5OdqmYRouti48/c8I585HiMsAf4+9b5qgj7AnDsnlFbx3kix87cEwPAdz4KKbOZia5e1GQqW8m6OPxfeS8pa89oECnaYOi3SpW+X2YGrRSteS9fEm5ubJh0iU8L1vFHSMdAKzw6Ma7QNnuvq17LVsWfH0lMwh3cNum6WPG9tJ0k6KvbQpVTSSafFXMsA11ILt4nVMkkBl5R3WGwL/3qJ5XCuri5cjN6h2bzLNcue8/sj5picgpB7T3dUaIQnq2RdmMkkV0m1cJmg9EsnTk6EUov6Xq3CFHMjrqxnNlsoc5HK1bDM9zXdfxAJv78VhUkVZA9iZH4v0QhPaEgmuUqqhVKyKMi5yBgW61ySIlaWJbu2RShp7rhaf3srYankL2CRWschtJSl3Mkaipz7RulSamVrO2/WG/PYaj1j3fB9EUkfeFQzydeyTCyuozkyyXGJ8Bmeu3Ty8h3vMM9cMqk5hPdy6cTuYal8DULIEcq4Qyyp3iHH98xBNwqrVInzXDURV8zvcI2SuQbxeUd6Tb2j2uc7Bs8HUWNph8CI1Frht3kv51Q1evNkkqvQW8TKW5LxUsqXhTHnjgrVji2usBZKc6QcBJRFLzvhYH3yPmNjWOuaPP6dJREU85Lj6AXGPIx77N2wjkQgGyST3N1aL2SS2onm5p7MXWdJMsm1TKwBAFtLmDsFSkmKSe9G8IPpzCRXmbeq3ukZIYUbY86VgAkeIsF6OZjOJTWrn33rZCIIQgdkkqvMezrEjZ3d5Litem0PO2JfC0EQRCabQ84hHoe2tdZIq/IX6lInCMJZkEnP4aUh5HNu59+rVVKCpaKmBEEQmZzdzjmnjg9ks4V8C5GJIAhDk0nPVsmcxUF4onc5DkEQBJHJhnbEkMScVbKlUtZqYyoIgsikwT3NJVwRCjx6GfZj6KBeEITWeHRuD5zjuvK2Slopc52F+IBACzYP4T3xJ2OLOxQhFF59xQVhHsV9GO7u7rLq2z979qxJTwdLLxN6gOT0AZnrP1LSS2TXuL/FrnFPk13jfiY5fVvo38E7oT/Jzrn/An01+I3c/j0fPnww30fO71h66bAWPXqwxOTy8tJ1Lewc+tx43U/snbTss7NTP5P7yM2OblXN05qdnRMKPPcZSymXEdGD1YO1QOUBgiW4n/3izy69nwKVGW5vbw8WaK47k3MnChFyH9fX100SRktLsi/RJz51T4xdbgvppeYLeWHCOmgezdVC+VoWUE4xx5xQYEsplxYH4Ln3YVW+PbrQUBa8R5S5FSgbxq7G9YirlPvwLhfEPZUo59aNsiDMuYZyvTXrYuOhyhCDkUmukmrRadCCuXLquaHA3hWLeyLpUcB7urm5MRGJ13lY6MPhvTOfU97Wz7aylHojk9BHXhiITHJ32y1KibSItMpVMr1YJrnjaiWyViVgPJXuhw8fsj9/eXnpHljBe6W3hudOOFc5r+3iOvYSeLgeve+7t3sSmTgoqRaWibdyRtHkEpTleVpYJq37ySxh+YQmS1OSqzR4d3NA2c8RCb8JQTG3Hjx4cBDeW2iIlnq3nu2ec11drS0CyCp33vbYl35LeWIjwRR1RJTNLuOEf7+QV41k2jlFxJREse0WiGjLjSrKjVbyiJjbOUftEEk0d/8574QorFSUFr8zN4dT18h5HyXvISeq6/b2Nvt6luik6+vr7OszhrsOorlKr6Norg6iuUp222Sat7BOvMzY/cTJ3r1bXD8trJKSjnPW3+/hrItWu3QOTO38eXepCB52+amdM9YIvzM3h9+9e3dwacXgaZ3M7fR5ptaJqLF7mLJYseZ6jKLCquwp2kxursQizvUVt/C/eywm7r+k/lZKmSxJJrnjyUKyuARRGNamWi1A8ETKbZF6h6lDag5qS5IRUbAx9x//5nV2Mufqan3wjutwat6wiYm9h9b3ZHWHy901AJmA3HOGFi/U4xAeZZKrbFEiczvYVvdpJRPrb/d4+A5hxBQ5yjemyFO7/NKoHwg29R2LQo09U+pasWfyCueOXZ/NVIpMerQCWAM552rCIGRC8qJ33kKtkuaAseTg0BJuiIJrYZnkWkjWMeolnPtUkaeee2qcU+PPtSx9xlMbI8t4x64Xm5sxFxfvzGONpXJLQovr2O+sbZ3E7ku5JwOQScnkaRGWWZM0VkIkTFILmbRYXCjBXBfUliyTORKdetYUkVufEQKKKS1L5BzPNGWdxFxdKUXf0iqBrEJFi9h7WLtlQ8x65b14nmkJDciEl5Sr0Fu4umpCEkvOEvgdyxlCCzLJHceaPIReixqW7rxTz19jfcXuw0reMeU8NX9ic8pynleypo7nXWwOluiDFkh1T4Vo1rw3kYmjQmdH500oNWSCpTGXS8G/8xsW5ZpTisKixHLPbbwVWw8orfWWIpOaPBpvyy025qfzO1Q3nvq+xWU3tQFJuQWP30OMUNe2Tt6/fx/dKOgwvnMyWdvVZQ1JZEGwMGMLmXtlYc31PkmZ3N4ocbVZibb3zPe1iKkl2CDkuLrWskpQzqdkVWJNLY3YczCeV1dX0vq9kkmJacsO31tZ1VgnKJTXr18fSAliCcL/k1dQs9vzzgpG2eSScU0eQs+WiSd6O5DNOYdYi0ymNjGxucjaWTt6inUd23jhBtNhfKdkUroL996xo/xrExg5D4HogtTmWGAteddNYnHk3pd1jKd2oFtFTZRdi5pYc/kbMbdpSUBGCrHckhhZpVxdPZRXgTRiCZZyd3VMJiUJW0xC75fZU5VQxsH7fkqjyayLufdFVnqAmrKCawgh9t2a0Fw2MVPfD5b/mi4uiJcN26nExpd7XXv3D8HGnon7UyHITsnEYp14FhLsyRea0xPFMra5u0+sIuvv9+7iKg31Tc0xq2USOwSvJZPU+KMUW5JJKlgklNqfktSmpQfrhLOoGOGxcWpRzVtk4qTwcncjKEbvuG+ut3boH7sdbzcei6Ek8976+14RQS2RUlBTETxYwZYM8xRS36s9D0y5umJRXB4urhaKv5dKwrESOFh8reubiUyMgOVLFBkhfJ6H8cEXupZ5zaG3984+hCaXkJl1gfTu4uLZYhYBRBJTqrF3Mlcg0qIka99/7ByCe53aRbd2cdVakT3kdbBBUrOswcik1DoJOy5vdxcEtTSh8HssbG+zmUVeYi1Yrb2S/JU1MNePxPpvpWU2cKWmXFwe4ca5BMG6sYatH6Okb8mo1gmFQntsQy0ycbRO2E16x6UvTShYJPye94JE0ZUoeHbZ1kTFnq0SLBIsj9ih91zIdOxgO8zX3LnC+KZ2uF5u29xddGurhHGNnZWcSqqSci/osYHXFmFqjpVqlJPbuCkIzYC8QfMgGlPtGjaDoYEUz9vi3neNGnxNvS+aP7UcpxhoOMUYngrNqpiLOQ2gchoZcc25Blt7spj8LnN5rjFWzvuKNWKaakKW89xTDb0szZ5i85dn9li/qcZj3s2x5hq6zb1HNceqFl8yKenCaHnRpeCZvJUl1yvpRFdKJKX3W/Pellg4rVBCujnzC8WKQg6S280wZ9NSQiZzm6tYZ8NSMoFALSSwK+immiKlpcmE+8zZ/IlMOiKT0sm4q2wxm9NulwVaSyrsUhmjFtaI1arj8zW/19oqaUUmpWPFc5a0us1FzKKpIZO5dxpT0KVkwqbPqz117FogNseWJpNcL4jIZOG2vTl++NJzC85PWvTSwN8eCjvuJ/3hIDU30gSfPZ/fL9SD771FHknwUXPmURqeW+M7L8mq7wkhka5krHhOxtdzfuGH9zgEPwXPlbpPj/MSzvo8c1dS3+mpC6N3FKnQ8Myk1t3VageZslqOXRtBWlkfsV225Xyn5n0tZZV4WyYebstaFyVzJmcXbLVMUjvomIur1DJJ7dAtczHl6oq5I9ewTBCeT5bJQG6uACatZWKmzOYtwXJGknOo7OWe6YFMGCPmZqkLcE6hlJ7TocitZFZKJjHlnDqDKCGTWMCGxcWV4+qaendrkcnchkJkYpMHgVHAfhCbdCTDJWGJwd8vnE2H9OEasDTewn2Iy83qbsOF8uLFi0XDe61o3agLd0+oFh2yosO4Mk64H/mztBLBKXCrTr2vVMLl1HdKPw+YK6cuwdg74Xmt+TKMZSyEe+q+Y/cwdb8530uNzdQaioXzz/2+sIKby8Olkoo4GRnW3Y+HG7B1yLREIpGbqzt3TnBJWPMoegPEWupvz3Ul5ADzXpNeIpEMSybWA/njHXmrXJSlwPPXHB7XPj+EvNShu0QiEZk0RUlmbezgeTQrhfu15N14EoncWxKJZFNk4kEo4V6XDN+1urQ8Qlk9iEQRKhKJZHNk4kUoKOkeScWLRLyIpMa9KJFIJF2TCSAu3kPhBlJZ2/0VCgZ6PZNHro3OSSQSyebJpDbKa0o4m2A3v5S1wu/we57nESR4eVQBsGbWSyQSyXBk0lLpQSyEwnqXZ8GiYqxqQnx3C5S1rz30l0gkklx51EPWJFm7ZK/SWItCbF4gY/k4azm0teX3QiMpMnansnbJgg1NlUIDIO6xZUa2ZwUCMut77p4oCML2sLpl4pmLMaLg1vIsv2+phyaRSCTDu7mm3F7n4qJB8Xue73hEyUkkEskmyOTYSvGsFNuTcEbk3QxMRCKRSEQmC+Rs9OLSalEWRq4tiUQiMskklSV7cIxCImDkcZFIJNuQRfqZeIIIK1oCj9Jylh4TRKm17MuiNqSCICwN9PBx2+pHoz0AYbwQHgqa5lKQirWZTyvQeIe+1xBICEFuiSV+QxAEIbWJfTTqg5ArgrJGgrUCuaxFLBAISh0SQaxdEAVBEEbEoy08RLBWEIgFxgzSsv1mSIKEPGQdCIIgMtkQIJZgsYCQyQ6xhP8u7fEcek6HPuGIyEMQBGHDZDJFLnPK/9T3FyuxIgiCIJwpmeRAVoYgCEIdHmoIBEEQBJGJIAiCIDIRBEEQRCaCIAiCIDIRBEEQRCaCIAiCyEQQBEEQmQiCIAiCyEQQBEEQmQiCIAgiE0EQBGEbuNdp8eLiQgUOBUEQhFmcVl+/RyaCIAiCUG2ZCIIgCIIF/9vL070811AIgiAIRvz6fwEGAIs0HCMzUWd4AAAAAElFTkSuQmCC"},719:function(e,n,t){e.exports=t.p+"static/media/by.04d377d9.png"},720:function(e,n,t){e.exports=t.p+"static/media/by-sa.331e6b36.png"},737:function(e,n,t){},878:function(e,n,t){"use strict";t.r(n);var r=t(22),a=t.n(r),i=t(2),o=t(29),l=(t(936),t(6)),c=t(9),u=t(61),m=t(38),s=t(102),d=t(222),f=function(e,n){var t=n.map((function(e){return e.message})).join("\n");return"Ooops, something went wrong with ".concat(e,": \n").concat(t)},v=function(e){return"".concat(e," success")},p=function(e,n){return Object(m.c)(e,n)},b=function(e){return Object(u.a)({},"MN_CTX_FLD",e)},g=new s.ApolloLink((function(e,n){var t=Object(d.getOperationNameAndType)(e.query),r=Object(c.a)(t,2)[1],a=e.getContext().MN_CTX_FLD,i="query"===r||!(null===a||void 0===a?void 0:a.ctx)&&!(null===a||void 0===a?void 0:a.successMsg);return n(e).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){if(n.errors&&!e.noShowError){var t=e.errorMsg?e.errorMsg(n.errors):f(e.ctx||"this operation",n.errors);p(t,{type:"error"})}else if(!n.errors&&n.data&&!e.noShowSuccess){var r=e.successMsg?e.successMsg(n.data):v(e.ctx||"");p(r,{type:"success"})}return n}}(Object(l.a)({noShowSuccess:i,ctx:e.operationName},e.getContext().MN_CTX_FLD)))})),h=t(0),x=t.n(h),E=t(79),y=t(46),O=t.n(y),j=(t(486),t(50)),k=t(20),w=t(47),C=t(141),I=t(471),T=t(171),F=t(450),S=t(938),P=t(126),M=t(31),_=t(322),L=t(472),N=(t(445),t(8)),U=t.n(N);function R(){var e=Object(i.a)(["\n    fragment SettingsPageMeUser on User {\n  id\n  name\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  location\n  summary\n  displayUsername\n  website\n  extraInfo\n}\n    "]);return R=function(){return e},e}var A=U()(R());function z(){var e=Object(i.a)(["\n    fragment SidebarMeUser on User {\n  id\n  name\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  preferredUsername\n  displayUsername\n}\n    "]);return z=function(){return e},e}function B(){var e=Object(i.a)(["\n    fragment SidebarFollowedCommunity on Community {\n  id\n  isLocal\n  canonicalUrl\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  name\n}\n    "]);return B=function(){return e},e}var D=U()(B()),$=U()(z()),q=t(10);function V(){var e=Object(i.a)(["\n    mutation meUpdateMyProfile($profile: UpdateProfileInput!, $icon: UploadInput, $image: UploadInput) {\n  updateProfile(profile: $profile, icon: $icon, image: $image) {\n    user {\n      ...SettingsPageMeUser\n    }\n  }\n}\n    ",""]);return V=function(){return e},e}function Q(){var e=Object(i.a)(["\n    mutation meLogout {\n  deleteSession\n}\n    "]);return Q=function(){return e},e}function W(){var e=Object(i.a)(["\n    query me {\n  me {\n    ...UseMeData\n  }\n}\n    ",""]);return W=function(){return e},e}function H(){var e=Object(i.a)(["\n    fragment UseMeData on Me {\n  isInstanceAdmin\n  email\n  isConfirmed\n  wantsEmailDigest\n  wantsNotifications\n  user {\n    id\n    ...SettingsPageMeUser\n    ...SidebarMeUser\n  }\n}\n    ","\n",""]);return H=function(){return e},e}var J=U()(H(),A,$),K=U()(W(),J);var Z=U()(Q());var G=U()(V(),A);function Y(){var e=Object(i.a)(["\n    query anonUsernameAvailable($username: String!) {\n  usernameAvailable(username: $username)\n}\n    "]);return Y=function(){return e},e}function X(){var e=Object(i.a)(["\n    mutation anonSignUp($registration: RegistrationInput!) {\n  createUser(user: $registration) {\n    ...UseMeData\n  }\n}\n    ",""]);return X=function(){return e},e}function ee(){var e=Object(i.a)(["\n    mutation anonConfirmEmail($token: String!) {\n  confirmEmail(token: $token) {\n    ...AuthData\n  }\n}\n    ",""]);return ee=function(){return e},e}function ne(){var e=Object(i.a)(["\n    mutation anonLogin($email: String!, $password: String!) {\n  createSession(email: $email, password: $password) {\n    ...AuthData\n  }\n}\n    ",""]);return ne=function(){return e},e}function te(){var e=Object(i.a)(["\n    mutation anonResetPasswordRequest($email: String!) {\n  resetPasswordRequest(email: $email)\n}\n    "]);return te=function(){return e},e}function re(){var e=Object(i.a)(["\n    mutation anonResetPassword($password: String!, $token: String!) {\n  resetPassword(token: $token, password: $password) {\n    ...AuthData\n  }\n}\n    ",""]);return re=function(){return e},e}function ae(){var e=Object(i.a)(["\n    fragment AuthData on AuthPayload {\n  me {\n    ...UseMeData\n  }\n  token\n}\n    ",""]);return ae=function(){return e},e}var ie=U()(ae(),J),oe=U()(re(),ie);var le=U()(te());var ce=U()(ne(),ie);var ue=U()(ee(),ie);var me=U()(X(),J);var se=U()(Y());var de,fe,ve,pe=t(17),be=t(448),ge=t.n(be),he=t(449),xe=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_PHOENIX_SOCKET_ENDPOINT,Ee=parseInt("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_DEFAULT_PAGE_SIZE))||15,ye=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_INVITE_ONLY_TEXT||"Please note, signups on this instance are currently invite-only.",Oe="https://raw.githubusercontent.com/reflow-project/weloop/main/src/static/img/weloop_logo_128x128-01.png",je="This is a test instance. Your data is not secure or private.",ke="This site uses cookies.",we="Information you post on this site may be publicly available and will be copied onto other servers in the federated network.",Ce=!1,Ie="",Te="",Fe="",Se=!0,Pe="https://reflowproject.eu/privacy-policy",Me="This site uses cookies and follows GDPR rules. Contact the instance operators if you want your data exported or deleted.",_e=[{code:"en_GB",desc:"English, British",rtl:!1},{code:"en_US",desc:"English, USA",rtl:!1},{code:"es_MX",desc:"Espa\xf1ol, M\xe9jico",rtl:!1},{code:"es_ES",desc:"Espa\xf1ol, Espa\xf1a",rtl:!1},{code:"fr_FR",desc:"Fran\xe7ais, France",rtl:!1},{code:"eu",desc:"Euskara",rtl:!1},{code:"ar_SA",desc:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629, \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629",rtl:!0}],Le=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_MOTHERSHIP_API_ID,Ne=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_MOTHERSHIP_API_KEY,Ue=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"",REACT_APP_SENTRY_API_KEY:""}).REACT_APP_MOTHERSHIP_ENV,Re=Le&&Ne?{appId:Le,apiKey:Ne,indexName:Ue}:null,Ae=!Le||!Ne,ze=/^[a-zA-Z][a-zA-Z0-9-]{2,}$/,Be=/^.+\..+$/,De=["CC0-1.0","CC-BY-4.0","CC-BY-SA-4.0"],$e="rgb(245, 246, 247)",qe="#fff",Ve="#05244F",Qe="#02e379",We="#D1D3D8",He="#2db783",Je="#ff5a5f",Ke="#ffebb3",Ze="#FFFFFF",Ge="#F8F8F8",Ye="#F3F3F3",Xe="#EEEEEE",en="#D1D3D8",nn="#999999",tn="#666666",rn="#444444",an="#333333",on="1px solid #F3F3F3",ln={primary:'"Barlow", "Open Sans", sans-serif'},cn={s1:"12px",s2:"14px",s3:"16px",m1:"20px",m2:"24px",m3:"28px",l1:"32px",l2:"40px",l3:"48px",code:"90px"},un=t(433).GraphQLError,mn=t(102),sn=mn.ApolloLink,dn=mn.Observable,fn=t(884),vn=fn.selectURI,pn=fn.selectHttpOptionsAndBody,bn=fn.fallbackHttpConfig,gn=fn.serializeFetchParameter,hn=fn.createSignalIfSupported,xn=fn.parseAndCheckHttpResponse,En=t(883).extractFiles,yn=function(e,n,t){var r,a=n.trim().split(".");for(r=0;r<a.length-1;r++)e=e[a[r]];e[a[r]]=t},On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.uri,t=void 0===n?"/graphql":n,r=e.fetch,a=void 0===r?fetch:r,i=e.fetchOptions,o=e.credentials,c=e.headers,u=e.includeExtensions,m={http:{includeExtensions:u},options:i,credentials:o,headers:c};return new sn((function(e){var n=vn(e,t),r=e.getContext(),i=r.clientAwareness,o=(i=void 0===i?{}:i).name,c=i.version,u=r.headers,s={http:r.http,options:r.fetchOptions,credentials:r.credentials,headers:Object(l.a)(Object(l.a)(Object(l.a)({},o&&{"apollographql-client-name":o}),c&&{"apollographql-client-version":c}),u)},d=pn(e,bn,m,s),f=d.options,v=d.body,p=En(v),b=p.clone,g=p.files;if(g.size){delete f.headers["content-type"];var h=new FormData;h.append("operationName",b.operationName),h.append("query",b.query);var x=0;g.forEach((function(e){e.forEach((function(e){return yn(b,e,String(++x))}))})),h.append("variables",JSON.stringify(b.variables)),x=0,g.forEach((function(e,n){h.append(++x,n,n.name)})),f.body=h}else f.body=gn(b,"Payload");return new dn((function(t){var r;if(!f.signal){var i=hn().controller;i&&(r=i,f.signal=r.signal)}return a(n,f).then((function(n){return e.setContext({response:n}),n})).then(xn(e)).then((function(e){t.next(e),t.complete()})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&t.next(e.result),t.next({errors:[new un(String(e))]}))})),function(){r&&r.abort()}}))}))};!function(e){e.Created="CREATED",e.Updated="UPDATED"}(de||(de={})),function(e){e.Organization="Organization",e.Person="Person"}(fe||(fe={})),function(e){e.Day="day",e.Hour="hour",e.Minute="minute",e.Month="month",e.Second="second",e.Week="week",e.Year="year"}(ve||(ve={}));var jn={__schema:{types:[{kind:"UNION",name:"AnyContext",possibleTypes:[{name:"Category"},{name:"Collection"},{name:"Comment"},{name:"Community"},{name:"Flag"},{name:"Follow"},{name:"Intent"},{name:"Like"},{name:"Organisation"},{name:"Resource"},{name:"SpatialThing"},{name:"Taggable"},{name:"User"}]},{kind:"UNION",name:"AccountingScope",possibleTypes:[{name:"Category"},{name:"Collection"},{name:"Community"},{name:"Organisation"},{name:"Organization"},{name:"Person"},{name:"Taggable"},{name:"User"}]},{kind:"INTERFACE",name:"Agent",possibleTypes:[{name:"Organization"},{name:"Person"}]},{kind:"UNION",name:"EventOrCommitment",possibleTypes:[{name:"Commitment"},{name:"EconomicEvent"}]},{kind:"UNION",name:"ProductionFlowItem",possibleTypes:[{name:"EconomicResource"},{name:"Process"}]}]}};function kn(e){return wn.apply(this,arguments)}function wn(){return(wn=Object(o.a)(a.a.mark((function e(n){var t,r,i,o,c,u,m,f,v,p,b,g,h,x,E,y,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.localKVStore,r=n.appLinks,i=t.get("AUTH_TOKEN"),o=new F.b({introspectionQueryResultData:jn}),c=new S.a({fragmentMatcher:o,cacheRedirects:{Query:{activity:function(e,n,t){return(0,t.getCacheKey)({__typename:"Activity",id:n.activityId})},collection:function(e,n,t){return(0,t.getCacheKey)({__typename:"Collection",id:n.collectionId})},community:function(e,n,t){return(0,t.getCacheKey)({__typename:"Community",id:n.communityId})},comment:function(e,n,t){return(0,t.getCacheKey)({__typename:"Comment",id:n.commentId})},user:function(e,n,t){return(0,t.getCacheKey)({__typename:"User",id:n.userId})},thread:function(e,n,t){return(0,t.getCacheKey)({__typename:"Thread",id:n.threadId})},resource:function(e,n,t){return(0,t.getCacheKey)({__typename:"Resource",id:n.resourceId})}}},dataIdFromObject:function(e){switch(e.__typename){case"User":return"userId"in e?e.userId:e.id;default:return Object(S.b)(e)}}}),u=function(e){e?(i=e,t.set("AUTH_TOKEN",e)):m()},m=function(){i=void 0,t.del("AUTH_TOKEN")},f=new s.ApolloLink((function(e,n){var t=e.operationName;return"meLogout"===t&&m(),n(e).map((function(e){var n,r,a,i,o,l;"anonLogin"!==t&&"anonResetPassword"!==t&&"anonConfirmEmail"!==t||u((null===(n=e.data)||void 0===n||null===(r=n.createSession)||void 0===r?void 0:r.token)||(null===(a=e.data)||void 0===a||null===(i=a.confirmEmail)||void 0===i?void 0:i.token)||(null===(o=e.data)||void 0===o||null===(l=o.resetPassword)||void 0===l?void 0:l.token));return e}))})),v=Object(_.a)((function(e,n){var t=n.headers;return{headers:Object(l.a)(Object(l.a)({},t),{},{authorization:i?"Bearer ".concat(i):null})}})),p=Object(L.a)((function(e){var n=e.operation,t=e.response,r=e.graphQLErrors,a=e.networkError;if(console.error("errorLink on operation",e),a){var i="statusCode"in a?ge.a.getStatusText(a.statusCode):a.message;return M.a.of({errors:[new pe.a("network error:".concat(i))]})}if(r){var o=r.find((function(e){return/Failed to fetch/gi.test(e.message)||/JSON.parse/gi.test(e.message)||/ServerParseError/gi.test(e.message)}));return M.a.of({errors:o?[new pe.a("Unexpected error")]:r})}if(null===t||void 0===t?void 0:t.errors)return M.a.of({data:t.data,errors:t.errors});var l=JSON.stringify(t,null,2),c="unknown error:\noperation:".concat(n,"\nresponse:").concat(l);return M.a.of({errors:[new pe.a(c)]})})),b=Object(_.a)((function(e,n){var t=n.headers;return Object(l.a)(Object(l.a)({},n),{},{clientAwareness:void 0,headers:Object(l.a)({},t)})})),g=["anonSignUp","anonLogin","anonConfirmEmail","anonResetPassword","anonResetPasswordRequest"],h=new s.ApolloLink((function(e,n){if(!i&&("mutation"===Object(d.getOpType)(e)&&!g.includes(e.operationName)))return M.a.of({errors:[new pe.a("You should log in for performing this operation!")]});return n(e)})),x=s.ApolloLink.from([null].concat(Object(w.a)(r),[h,p,v,b,f,On({uri:""})]).filter(Boolean)),E=Object(I.a)(C.b(new he.Socket(xe))),y=s.ApolloLink.split((function(e){return Object(T.c)(e.query)}),E,x),O=new P.a({cache:c,link:y,defaultOptions:{watchQuery:{fetchPolicy:"cache-first",errorPolicy:"ignore"},query:{fetchPolicy:"cache-first",errorPolicy:"all"},mutate:{errorPolicy:"all"}}}),e.abrupt("return",{client:O});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cn={breakpoints:["40em","52em","64em"],colors:{app:$e,appInverse:qe,primary:Ve,secondary:Qe,tertiary:We,positive:He,negative:Je,warning:Ke,lightest:Ze,lighter:Ge,light:Ye,mediumlight:Xe,medium:en,mediumdark:nn,dark:tn,darker:rn,darkest:an,border:on},variants:{negative:{bg:Je,color:Ye},positive:{bg:He,color:Ye},warning:{bg:Ke,color:rn},avatar:{borderRadius:"100% !important"}},text:{subhead:{fontFamily:ln.primary,fontSize:cn.s3,color:tn,textTransform:"capitalize",letterSpacing:"0.5px",fontWeight:"600"},suptitle:{fontFamily:ln.primary,fontSize:cn.s1,color:tn,textTransform:"uppercase",letterSpacing:"1px",fontWeight:"700"},link:{fontFamily:ln.primary,fontSize:cn.s2,color:tn,letterSpacing:".5px",fontWeight:"600"},text:{fontFamily:ln.primary,fontSize:cn.s2,color:tn,letterSpacing:".5px",fontWeight:"500"},heading:{fontFamily:ln.primary,fontSize:cn.m3,color:tn,letterSpacing:"1px",fontWeight:"800"}},buttons:{primary:{fontWeight:"600",height:"40px",px:4,backgroundColor:Ve,borderRadius:"4px",fontSize:cn.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},danger:{fontWeight:"600",height:"40px",px:4,backgroundColor:Je,color:Ge,borderRadius:"4px",fontSize:cn.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},outline:{fontWeight:"600",height:"40px",px:4,backgroundColor:"transparent",borderRadius:"4px",fontSize:cn.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px",color:tn,border:"1px solid ".concat(Ve)}},space:["0px","4px","8px","16px","32px","64px","128px","256px"],fontFamily:ln.primary},In=function(e){var n=e.children,t=e.theme,r=void 0===t?Cn:t;return x.a.createElement(j.ThemeProvider,{theme:r},n)},Tn=t(54),Fn=j.default,Sn=(j.css,j.createGlobalStyle,j.keyframes,j.ThemeProvider,j.withTheme,Fn),Pn=t(3);function Mn(){var e=Object(i.a)(["\n  border-bottom: ",";\n  height: 50px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 8px;\n  background: ",";\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  a {\n    display: flex;\n    flex: 1;\n    text-decoration: none;\n  }\n"]);return Mn=function(){return e},e}function _n(){var e=Object(i.a)(["\n  color: ",";\n  text-transform: capitalize;\n"]);return _n=function(){return e},e}function Ln(){var e=Object(i.a)(["\n  flex: auto;\n  align-items: center;\n"]);return Ln=function(){return e},e}var Nn=function(e){var n=e.name;return x.a.createElement(An,null,x.a.createElement(Un,null,x.a.createElement(Rn,{ml:2,variant:"suptitle"},n)))},Un=Sn(Pn.Flex)(Ln()),Rn=Sn(Pn.Text)(_n(),(function(e){return e.theme.colors.darker})),An=Sn(Pn.Flex)(Mn(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}));function zn(){var e=Object(i.a)(["\ncolor: ","\nfont-size: ",";\na {\n  color: ","\n  text-decoration: none;\n}\n  "]);return zn=function(){return e},e}function Bn(){var e=Object(i.a)(["\n  padding: 16px;\n"]);return Bn=function(){return e},e}function Dn(){var e=Object(i.a)(["\n  text-transform: capitalize;\n  border-bottom: ",";\n  padding: 16px;\n  color: ",";\n  font-size: ",";\n  font-weight: 600;\n"]);return Dn=function(){return e},e}function $n(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0;\n  min-height: 0;\n  min-width: 0;\n  padding: 0;\n  position: relative;\n  z-index: 0;\n  margin-bottom: 8px !important;\n"]);return $n=function(){return e},e}function qn(){var e=Object(i.a)(["\n  position: sticky;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0;\n  min-height: 0;\n  min-width: 0;\n  padding: 0;\n  z-index: 0;\n"]);return qn=function(){return e},e}function Vn(){var e=Object(i.a)(["\n   display: none;\n  "]);return Vn=function(){return e},e}function Qn(){var e=Object(i.a)(["\n  width: 290px;\n"]);return Qn=function(){return e},e}function Wn(){var e=Object(i.a)(["\n  width: 240px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0 0 0 8px;\n  min-height: 0;\n  min-width: 0;\n  padding: 0;\n  position: relative;\n  z-index: 0;\n  font-family: ",";\n  &.extra {\n    width: 100%;\n  }\n  ",";\n  ",";\n"]);return Wn=function(){return e},e}var Hn=Sn(Pn.Flex)(Wn(),(function(e){return e.theme.fontFamily}),k.a.lessThan("1095px")(Qn()),k.a.lessThan("1005px")(Vn())),Jn=(Sn(Pn.Flex)(qn()),Sn(Pn.Box)($n(),(function(e){return e.theme.colors.appInverse}))),Kn=Sn(Pn.Text)(Dn(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.darker}),cn.s1),Zn=Sn(Pn.Box)(Bn()),Gn=Sn(Pn.Text)(zn(),(function(e){return e.theme.colors.dark}),cn.s2,(function(e){return e.theme.colors.dark})),Yn=t(4);t(570);function Xn(){var e=Object(i.a)(["\n  background-color: ",";\n"]);return Xn=function(){return e},e}var et=Sn(Pn.Box)(Xn(),(function(e){return"primary"===e.color?"#ffffffeb":e.theme.colors.primary}));var nt=function(e){var n=Object.assign({},e);return h.createElement("div",Object.assign({className:"spinner"},n),h.createElement(et,{color:n.variant,className:"bounce1"}),h.createElement(et,{color:n.variant,className:"bounce2"}),h.createElement(et,{color:n.variant,className:"bounce3"}))},tt=t(28);function rt(){var e=Object(i.a)(["\n    padding:  10px;\n  "]);return rt=function(){return e},e}function at(){var e=Object(i.a)(["\n  ",";\n  width: ",";\n  border-radius: ",";\n  padding: ",";\n  opacity: ",";\n  cursor: ",";\n  background:  ",";\n  ",";\n  &.show-more {\n    width: auto;\n    padding: 3px 8px;\n    background: transparent;\n    color: ",";\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    ","\n    \n    svg {\n      stroke: ",";\n      margin-right: 10px;\n    }\n    \n    &:hover {\n        background: #f3f3f3;\n      }\n  }\n  &:hover && not:['disabled'] {\n    background: ","\n  }\n}}\n"],["\n  ",";\n  width: ",";\n  border-radius: ",";\n  padding: ",";\n  opacity: ",";\n  cursor: ",";\n  background:  ",";\n  ",";\n  &.show-more {\n    width: auto;\n    padding: 3px 8px;\n    background: transparent;\n    color: ",";\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    ","\n    \n    svg {\n      stroke: ",";\n      margin-right: 10px;\n    }\n    \n    &:hover {\n        background: #f3f3f3;\n      }\n  }\n  &:hover && not:['disabled\\'] {\n    background: ","\n  }\n}}\n"]);return at=function(){return e},e}var it=Sn(Pn.Button)(at(),Object(tt.e)("background, 0.2s"),(function(e){return!0===e.isIcon?"40px":"auto"}),(function(e){return!0===e.isIcon?"100%":"4px"}),(function(e){return!0===e.isIcon?"0px":"auto"}),(function(e){return!0===e.disabled?"0.7":"1"}),(function(e){return!0===e.disabled?"default":"pointer"}),(function(e){return"warning"===e.variant&&e.theme.colors.negative}),k.a.lessThan("medium")(rt()),(function(e){return e.theme.colors.primary}),Object(tt.e)("background, 0.2s"),(function(e){return e.theme.colors.primary}),(function(e){switch(e.variant){case"primary":return Object(tt.b)("0.1",e.theme.colors.primary);case"danger":return Object(tt.d)("0.1",e.theme.colors.primary);default:Object(tt.d)("0.3",e.theme.colors.primary)}})),ot=function(e){return x.a.createElement(it,Object.assign({},e,{width:e.fullWidth?"100%":e.width||"",className:"show-more"===e.variant?"show-more":"",isSubmitting:e.isSubmitting,disabled:e.isDisabled,isIcon:e.isIcon,variant:e.variant}),e.isSubmitting?x.a.createElement(nt,{variant:e.variant}):e.children)};function lt(){var e=Object(i.a)(["\n  background: ",";\n  button {\n    width: 100%;\n  }\n"]);return lt=function(){return e},e}var ct=function(e){return x.a.createElement(ut,{p:2},x.a.createElement(ot,{isSubmitting:e.LoadMoreFormik.isSubmitting,isDisabled:e.LoadMoreFormik.isSubmitting,onClick:e.LoadMoreFormik.submitForm,variant:"outline"},x.a.createElement(Yn.Trans,{id:"Load more"})))},ut=Sn(Pn.Box)(lt(),(function(e){return e.theme.colors.appInverse})),mt=t(24);function st(){var e=Object(i.a)(["\n  width: 34px;\n  height: 34px;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  svg {\n    stroke: ",";\n  }\n\n  &:focus {\n    background: ",";\n\n    svg {\n      stroke: ",";\n    }\n  }\n"]);return st=function(){return e},e}function dt(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 16px;\n  row-gap: 16px;\n  margin: 16px;\n  margin-bottom: 24px !important;\n"]);return dt=function(){return e},e}function ft(){var e=Object(i.a)(["\n  border-bottom: ",";\n"]);return ft=function(){return e},e}function vt(){var e=Object(i.a)(["\n  background: ",";\n\n  &.replies > div {\n    margin-bottom: 0;\n    border-bottom: ",";\n  }\n\n  > div {\n    &:last-of-type {\n      margin-bottom: 4px;\n      border-bottom: 0;\n    }\n  }\n"]);return vt=function(){return e},e}function pt(){var e=Object(i.a)(["\n       padding: 0;\n  "]);return pt=function(){return e},e}function bt(){var e=Object(i.a)(["\n      justify-content: space-between;\n      align-item: center;\n      flex-wrap: nowrap;\n  "]);return bt=function(){return e},e}function gt(){var e=Object(i.a)(["\n  border-bottom: ",";\n  border-top: ",";\n  height: 60px;\n  padding: 12px 8px;\n  background: ",";\n\n  ",";\n}\n\na {\n  font-weight: 600;\n  text-decoration: none;\n  margin-right: 8px;\n  color: ",";\n  letterspacing: 1px;\n  padding: 0 8px;\n  line-height: 34px;\n  white-space: nowrap;\n\n  ",";\n\n  &.active,\n  &:hover {\n    color: ",";\n    background: ",";\n    border-radius: 4px;\n  }\n}\n"]);return gt=function(){return e},e}function ht(){var e=Object(i.a)(["\n      display: block;\n  "]);return ht=function(){return e},e}function xt(){var e=Object(i.a)(["\n      display: none;\n  "]);return xt=function(){return e},e}function Et(){var e=Object(i.a)(["\n      display: flex;\n  "]);return Et=function(){return e},e}function yt(){var e=Object(i.a)(["\n      display: none\n  "]);return yt=function(){return e},e}function Ot(){var e=Object(i.a)(["\n      flex-basis: 36%;\n      overflow: hidden;\n      transition: flex-basis 0.3s ease;\n  "]);return Ot=function(){return e},e}function jt(){var e=Object(i.a)(["\n      flex-basis: 44px;\n      overflow: hidden;\n      transition: flex-basis 0.3s ease;\n  "]);return jt=function(){return e},e}function kt(){var e=Object(i.a)(["\n  width: auto;\n  overflow: hidden;\n  text-align: center;\n\n  ",";\n\n  &.active {\n    ",";\n\n  }\n\n  .text-holder {\n    display: block;\n    ",";\n  }\n\n  .icon-holder {\n    display: none;\n\n    ","\n  }\n\n  &.active .icon-holder {\n    ",";\n  }\n\n  &.active .text-holder {\n    ",";\n"]);return kt=function(){return e},e}function wt(){var e=Object(i.a)(["\n       padding-bottom: 75px;\n  "]);return wt=function(){return e},e}function Ct(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  position: relative;\n  ",";\n\n  & ul {\n    display: block;\n\n    & li {\n      display: inline-block;\n\n      & h5 {\n        font-weight: 500;\n      }\n    }\n  }\n\n  & h4 {\n    margin: 0;\n    font-weight: 400 !important;\n    color: #151b26;\n    line-height: 40px;\n  }\n"]);return Ct=function(){return e},e}function It(){var e=Object(i.a)(["\n  width: 100%;\n  height: 100%;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  display: flex;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0;\n  min-height: 0;\n  min-width: 0;\n  padding: 0;\n  position: relative;\n  z-index: 0;\n"]);return It=function(){return e},e}function Tt(){var e=Object(i.a)(["\n  width: 600px;\n  align-items: flex-start;\n  flex-shrink: 1;\n  flex-grow: 1;\n  flex-basis: auto;\n  flex-direction: column;\n  margin: 0;\n  min-height: 0;\n  min-width: 0;\n  padding: 0;\n  position: relative;\n  z-index: 0;\n"]);return Tt=function(){return e},e}function Ft(){var e=Object(i.a)(["\n  align-items: stretch;\n  flex-grow: 1;\n  flex-direction: row;\n  width: 100%;\n"]);return Ft=function(){return e},e}function St(){var e=Object(i.a)(["\n  > div:last-of-type {\n    border-bottom: none;\n  }\n"]);return St=function(){return e},e}var Pt=Sn(Pn.Box)(St()),Mt=Sn(Pn.Flex)(Ft()),_t=Sn(Pn.Flex)(Tt()),Lt=Sn(Pn.Flex)(It()),Nt=Sn(Pn.Flex)(Ct(),k.a.lessThan("medium")(wt())),Ut=Sn(mt.c)(kt(),k.a.lessThan("medium")(jt()),k.a.lessThan("medium")(Ot()),k.a.lessThan("medium")(yt()),k.a.lessThan("medium")(Et()),k.a.lessThan("medium")(xt()),k.a.lessThan("medium")(ht())),Rt=Sn(Pn.Flex)(gt(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),k.a.lessThan("medium")(bt()),(function(e){return e.theme.colors.darker}),k.a.lessThan("medium")(pt()),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),At=Sn(Pn.Box)(vt(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),zt=Sn(Pn.Box)(ft(),(function(e){return e.theme.colors.border})),Bt=Sn(Pn.Box)(dt()),Dt=Sn(Pn.Box)(st(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter})),$t=function(e){var n=e.CollectionsBoxes,t=e.LoadMoreFormik;return h.createElement(h.Fragment,null,h.createElement(Mt,null,h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Nt,null,h.createElement(Nn,{name:"All Collections"}),h.createElement(At,null,h.createElement(Bt,null,n)),t&&h.createElement(ct,{LoadMoreFormik:t})))),h.createElement(Hn,null)))};function qt(){var e=Object(i.a)(["\n    fragment CommunityPreview on Community {\n  ...CommunityInfo\n  id\n  summary\n  myFlag {\n    id\n  }\n  collectionCount\n  followerCount\n  threads {\n    totalCount\n  }\n}\n    ",""]);return qt=function(){return e},e}function Vt(){var e=Object(i.a)(["\n    fragment CommunityInfo on Community {\n  id\n  name\n  creator {\n    id\n  }\n  icon {\n    id\n    url\n  }\n  isLocal\n  myFollow {\n    id\n  }\n  canonicalUrl\n  displayUsername\n  preferredUsername\n}\n    "]);return Vt=function(){return e},e}var Qt=U()(Vt()),Wt=U()(qt(),Qt);function Ht(){var e=Object(i.a)(["\n    fragment CollectionPreview on Collection {\n  id\n  icon {\n    id\n    url\n  }\n  isLocal\n  canonicalUrl\n  name\n  summary\n  resourceCount\n  displayUsername\n  myFlag {\n    id\n  }\n  myFollow {\n    id\n  }\n  preferredUsername\n  community {\n    id\n    ...CommunityInfo\n  }\n}\n    ",""]);return Ht=function(){return e},e}var Jt=U()(Ht(),Qt);function Kt(){var e=Object(i.a)(["\n    fragment FullPageInfo on PageInfo {\n  endCursor\n  hasNextPage\n  hasPreviousPage\n  startCursor\n}\n    "]);return Kt=function(){return e},e}var Zt=U()(Kt());function Gt(){var e=Object(i.a)(['\n    query allCollections($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collections(limit: $limit, before: $before, after: $after) @connection(key: "allCollections") {\n    edges {\n      ...CollectionPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return Gt=function(){return e},e}var Yt=U()(Gt(),Jt,Zt);var Xt=function(e,n){return{query:Yt,variables:e,context:n}},er=t(26),nr=function(e,n){var t=Object(h.useMemo)((function(){return tr(e,n)}),[e,n]),r=function(e){var n=Object(er.a)({initialValues:{},onSubmit:Object(h.useCallback)((function(){return(null===e||void 0===e?void 0:e.ready)?e.next():void 0}),[e])}),t=Object(er.a)({initialValues:{},onSubmit:Object(h.useCallback)((function(){return(null===e||void 0===e?void 0:e.ready)?e.previous():void 0}),[e])});return Object(h.useMemo)((function(){return[e.ready&&e.pageInfo.hasNextPage?n:null,e.ready&&e.pageInfo.hasPreviousPage?t:null]}),[n,t,e])}(t);return Object(h.useMemo)((function(){return Object(l.a)(Object(l.a)({},t),{},{formiks:r})}),[r,t])},tr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(!e)return{ready:!1,edges:[]};var t=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pageInfo.hasNextPage&&n({cursor:{after:e.pageInfo.endCursor,before:void 0},update:rr,isNext:!0}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pageInfo.hasPreviousPage&&n({cursor:{before:e.pageInfo.startCursor,after:void 0},update:ar,isNext:!1}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=Object(l.a)(Object(l.a)({},e),{},{next:t,previous:r,ready:!!e});return i},rr=function(e){var n=e.fetched,t=e.prev;return Object(l.a)(Object(l.a)({},n),{},{edges:t.edges.concat(n.edges),totalCount:n.totalCount,pageInfo:Object(l.a)(Object(l.a)({},t.pageInfo),{},{endCursor:n.pageInfo.endCursor,hasNextPage:n.pageInfo.hasNextPage})})},ar=function(e){var n=e.fetched,t=e.prev;return Object(l.a)(Object(l.a)({},n),{},{edges:n.edges.concat(t.edges),totalCount:n.totalCount,pageInfo:Object(l.a)(Object(l.a)({},t.pageInfo),{},{startCursor:n.pageInfo.startCursor,hasPreviousPage:n.pageInfo.hasPreviousPage})})},ir=function(){var e,n,t=(n={variables:{limit:Ee}},q.d(Yt,n)),r=nr(null===(e=t.data)||void 0===e?void 0:e.collections,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.collections)&&e.collections?Object(l.a)(Object(l.a)({},t),{},{collections:r({prev:e.collections,fetched:t.collections})}):e}})}));return Object(h.useMemo)((function(){return{allCollectionsPage:r}}),[r])};t(903);function or(){var e=Object(i.a)(["\n  text-decoration: none;\n"]);return or=function(){return e},e}var lr=function(e){var n=e.link,t=e.children;return n.external?x.a.createElement("a",{href:n.url,rel:"noopener noreferrer",target:"_blank"},t):x.a.createElement(cr,{to:n.url},t)},cr=Sn(mt.b)(or());function ur(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return ur=function(){return e},e}function mr(){var e=Object(i.a)(["\n  border-radius: 4px;\n  border: ",";\n  background: ",";\n  text-decoration: none;\n  position: relative;\n  &:hover {\n    background: ",";\n  }\n  * {\n    text-decoration: none !important;\n    &:hover {\n      text-decoration: none !important;\n    }\n  }\n"]);return mr=function(){return e},e}function sr(){var e=Object(i.a)(["\n  align-items: center;\n\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 2px 8px;\n  text-align: center;\n  font-size: ",";\n\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    background: ",";\n    border-color: ",";\n    div {\n      color: ",";\n    }\n  }\n"]);return sr=function(){return e},e}function dr(){var e=Object(i.a)(['\n  border-radius: 4px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  min-width: 48px;\n  height: 48px;\n  padding: 15%;\n  background-color: transparent;\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n']);return dr=function(){return e},e}function fr(){var e=Object(i.a)(["\n  color: ",";\n"]);return fr=function(){return e},e}function vr(){var e=Object(i.a)(["\n  color: ",";\n  svg {\n    margin: 0;\n  }\n"]);return vr=function(){return e},e}function pr(){var e=Object(i.a)(["\n  // color: red;\n  // a {\n  //   position: absolute;\n  //   top: 0;\n  //   left: 0;\n  //   right: 0;\n  //   bottom: 0;\n  //   z-index: 1;\n  // }\n"]);return pr=function(){return e},e}function br(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 600;\n"]);return br=function(){return e},e}function gr(){var e=Object(i.a)([""]);return gr=function(){return e},e}function hr(){var e=Object(i.a)(["\n  flex: 1;\n"]);return hr=function(){return e},e}function xr(){var e=Object(i.a)(["\n  margin: 8px;\n"]);return xr=function(){return e},e}function Er(){var e=Object(i.a)(["\n  height: 150px;\n  background: ",';\n  border-radius: 4px;\n  grid-area: big;\n\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n']);return Er=function(){return e},e}function yr(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-rows: 150px;\n  grid-template-areas: 'big big big';\n  column-gap: 4px;\n  row-gap: 4px;\n"]);return yr=function(){return e},e}function Or(){var e=Object(i.a)(["    \n            max-width: unset;\n        "]);return Or=function(){return e},e}function jr(){var e=Object(i.a)(["\n  max-width: 300px;\n  position: relative;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n  padding: 8px;\n  border-radius: 4px;\n  border: 1px solid #ececec;\n\n  ",";\n"]);return jr=function(){return e},e}function kr(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n  word-break: break-all;\n  margin-top: 4px;\n  font-size: ",";\n  ",";\n"]);return kr=function(){return e},e}function wr(){var e=Object(i.a)(["\n  color: ",";\n  align-items: center;\n  position: relative;\n  z-index: 99999999;\n"]);return wr=function(){return e},e}function Cr(){var e=Object(i.a)(["\n  padding: 8px;\n  background-color: ",";\n  font-weight: 700;\n  text-transform: uppercase;\n  color: ",";\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n"]);return Cr=function(){return e},e}var Ir=function(e){var n=e.link,t=e.icon,r=e.name,a=(e.summary,e.displayUsername,e.totalResources),i=e.isFollowing,o=e.toggleFollowFormik,l=e.hideActions,c=e.isSearch;return h.createElement(Pr,null,c&&h.createElement(Tr,{variant:"text"},h.createElement(Yn.Trans,{id:"Collection"})),h.createElement(Ar,{link:n},h.createElement(Mr,null,h.createElement(_r,{src:t})),h.createElement(Lr,null,h.createElement(Sr,null,r),h.createElement(Fr,null,h.createElement(Nr,{variant:"text"},a||0," ",h.createElement(Yn.Trans,{id:"Resources"})),h.createElement(Ur,null,l?null:h.createElement(zr,{bordered:!0,isFollowing:!!i,onClick:function(e){e.preventDefault(),o.submitForm()}},h.createElement(Rr,{ml:1,variant:"suptitle",sx:{textTransform:"capitalize"}},i?h.createElement(Yn.Trans,{id:"Following"}):h.createElement(Yn.Trans,{id:"follow"}))))))))},Tr=Sn(Pn.Text)(Cr(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.dark})),Fr=Sn(Pn.Flex)(wr(),(function(e){return e.theme.colors.mediumdark})),Sr=Sn(Pn.Heading)(kr(),(function(e){return e.theme.colors.darker}),cn.m1,Object(tt.c)("250px")),Pr=Sn(Pn.Box)(jr(),k.a.lessThan("medium")(Or())),Mr=Sn(Pn.Box)(yr()),_r=Sn(Pn.Box)(Er(),(function(e){return e.theme.colors.medium}),(function(e){return e.src})),Lr=Sn(Pn.Box)(xr()),Nr=Sn(Pn.Text)(hr()),Ur=Sn(Pn.Box)(gr()),Rr=Sn(Pn.Text)(br(),(function(e){return e.theme.colors.darker})),Ar=Sn(lr)(pr()),zr=(Sn(Pn.Flex)(vr(),(function(e){return e.theme.colors.dark})),Sn(Pn.Text)(fr(),(function(e){return e.theme.colors.dark})),Sn(Pn.Box)(dr(),(function(e){return e.src})),Sn(Pn.Flex)(sr(),(function(e){return e.isFollowing?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.isFollowing?e.theme.colors.lighter:e.theme.colors.darker}),(function(e){return e.isFollowing?e.theme.colors.primary:"transparent"}),(function(e){return e.isFollowing?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),cn.s1,(function(e){return e.isFollowing?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.isFollowing?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.theme.colors.lightest})));Sn(Pn.Flex)(mr(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),(function(e){return Object(tt.b)("0.05",e.theme.colors.appInverse)})),Sn(Pn.Box)(ur());function Br(){var e=Object(i.a)(['\n    query myCollectionFollows {\n  me @connection(key: "myCollectionFollows") {\n    ...MyCollectionFollowsData\n  }\n}\n    ',""]);return Br=function(){return e},e}function Dr(){var e=Object(i.a)(["\n    fragment MyCollectionFollowsData on Me {\n  user {\n    id\n    collectionFollows {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Collection {\n            ...MyFollowedCollectionData\n          }\n        }\n      }\n    }\n  }\n}\n    ","\n",""]);return Dr=function(){return e},e}function $r(){var e=Object(i.a)(["\n    fragment MyFollowedCollectionData on Collection {\n  ...CollectionPreview\n}\n    ",""]);return $r=function(){return e},e}var qr=U()($r(),Jt),Vr=U()(Dr(),Zt,qr),Qr=U()(Br(),Vr);var Wr=function(e,n){return{query:Qr,variables:e,context:n}};function Hr(){var e=Object(i.a)(['\n    query myCommunityFollows($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  me @connection(key: "myCommunityFollows") {\n    ...MyCommunityFollowsData\n  }\n}\n    ',""]);return Hr=function(){return e},e}function Jr(){var e=Object(i.a)(["\n    fragment MyCommunityFollowsData on Me {\n  user {\n    id\n    communityFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Community {\n            ...MyFollowedCommunityData\n          }\n        }\n      }\n    }\n  }\n}\n    ","\n",""]);return Jr=function(){return e},e}function Kr(){var e=Object(i.a)(["\n    fragment MyFollowedCommunityData on Community {\n  ...SidebarFollowedCommunity\n  ...CommunityPreview\n}\n    ","\n",""]);return Kr=function(){return e},e}var Zr=U()(Kr(),D,Wt),Gr=U()(Jr(),Zt,Zr),Yr=U()(Hr(),Gr);var Xr=function(e,n){return{query:Yr,variables:e,context:n}},ea=function(e){return"#"===e};function na(){var e=Object(i.a)(["\n    mutation unfollow($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Follow {\n      context {\n        ... on Collection {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on Community {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on User {\n          userId: id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n      }\n    }\n  }\n}\n    "]);return na=function(){return e},e}function ta(){var e=Object(i.a)(["\n    mutation follow($contextId: String!) {\n  createFollow(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on Community {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on User {\n        userId: id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n    }\n  }\n}\n    "]);return ta=function(){return e},e}var ra=U()(ta());var aa=U()(na());function ia(){var e=Object(i.a)(["\n    fragment UserPreview on User {\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  userId: id\n  userName: name\n  displayUsername\n  summary\n  canonicalUrl\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n}\n    "]);return ia=function(){return e},e}var oa=U()(ia());function la(){var e=Object(i.a)(['\n    query collectionFollowers($collectionId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collection(collectionId: $collectionId) @connection(key: "collectionFollowers", filter: ["collectionId"]) {\n    id\n    followers(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        creator {\n          ...CollectionFollower\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return la=function(){return e},e}function ca(){var e=Object(i.a)(["\n    fragment CollectionFollower on User {\n  ...UserPreview\n}\n    ",""]);return ca=function(){return e},e}var ua=U()(ca(),oa),ma=U()(la(),Zt,ua);var sa=function(e,n){return{query:ma,variables:e,context:n}};function da(){var e=Object(i.a)(['\n    query communityFollowers($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityFollowers", filter: ["communityId"]) {\n    id\n    followers(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        creator {\n          ...CommunityFollower\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return da=function(){return e},e}function fa(){var e=Object(i.a)(["\n    fragment CommunityFollower on User {\n  ...UserPreview\n}\n    ",""]);return fa=function(){return e},e}var va=U()(fa(),oa),pa=U()(da(),Zt,va);var ba=function(e,n){return{query:pa,variables:e,context:n}},ga=function(e,n){if(!!!e.extraInfo)return Object(l.a)(Object(l.a)({},e),{},{extraInfo:void 0});var t=null===n||void 0===n?void 0:n.extraInfo,r=JSON.stringify(Object(l.a)(Object(l.a)({},t),e.extraInfo));return Object(l.a)(Object(l.a)({},e),{},{extraInfo:r})},ha=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,xa=function(e){return"string"===typeof e&&ha.test(e)},Ea=function(e,n){return!e||xa(e)&&e===n?void 0:e instanceof File||xa(e)?ya(e):void 0},ya=function(e){return xa(e)?{url:e}:{upload:e}},Oa=function(){var e,n,t=(n={context:b({noShowError:!0})},q.d(K,n)),r=function(e){return q.c(Z,e)}(),i=Object(c.a)(r,2),l=i[0],u=i[1],m=function(e){return q.c(G,e)}(),s=Object(c.a)(m,2),d=s[0],f=s[1],v=Object(Tn.h)().push,p=null===(e=t.data)||void 0===e?void 0:e.me,g=t.loading,x=!!(null===p||void 0===p?void 0:p.isInstanceAdmin),E=Object(h.useCallback)(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.loading&&(null===p||void 0===p?void 0:p.user)){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",l({update:function(e){e.writeQuery({data:{__typename:"RootQueryType",me:null},query:K})}}).finally((function(){return v("/login")})));case 3:case"end":return e.stop()}}),e)}))),[u.loading,p,l,v]),y=Object(h.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,r,i,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.icon,o=n.image,l=n.profile,!f.loading&&(null===p||void 0===p?void 0:p.user)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",d({variables:{profile:ga(l,p.user),icon:Ea(i,null===(t=p.user.icon)||void 0===t?void 0:t.url),image:Ea(o,null===(r=p.user.image)||void 0===r?void 0:r.url)},context:b({ctx:"Profile update"})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[d,p,f]);return Object(h.useMemo)((function(){return{me:p,isAdmin:x,logout:E,loading:g,updateProfile:y}}),[p,x,E,g,y])},ja=t(34),ka=t(161),wa=t(455),Ca=function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="local"===e?localStorage:sessionStorage,r=function(e){return"".concat(n).concat(e)},a=function(n){return Ia(t.getItem(r(n)),e,r(n))},i=function(e,n){return t.setItem(r(e),Ta(n))},o=function(e){var n=a(r(e));return t.removeItem(r(e)),n};return{get:a,set:i,del:o}}},Ia=function(e,n,t){if(null===e)return null;try{return JSON.parse(e)}catch(r){return console.warn("KVStore[".concat(n,"]#parse: could not parse ").concat(e," at key [").concat(t,"]")),null}},Ta=function(e){return JSON.stringify(e)},Fa=Ca("local")("LOCALIZATION"),Sa=Fa.get("#locale"),Pa=Sa&&_e.find((function(e){return e.code===Sa}))||_e[0],Ma=Object(wa.setupI18n)({locales:_e.map((function(e){return e.code}))}),_a=Object(h.createContext)({current:Pa,i18n:Ma,available:_e,set:function(){}}),La=function(e){var n=e.children,t=Object(h.useState)(Pa),r=Object(c.a)(t,2),a=r[0],i=r[1],o=Object(h.useState)({}),m=Object(c.a)(o,2),s=m[0],d=m[1];Object(h.useEffect)((function(){Ua(a.rtl),s[a.code]||Na(a.code).then((function(e){return d(Object(l.a)(Object(l.a)({},s),{},Object(u.a)({},a.code,e)))})).catch((function(e){return console.error("Error loading Locale: ".concat(a.code),e)}))}),[s,a]);var f=Object(h.useCallback)((function(e){i(e);var n,t=e.code;ka.Settings.defaultLocale=t.split("_")[0],n=t,Fa.set("#locale",n)}),[i]),v=Object(h.useMemo)((function(){return{current:a,available:_e,i18n:Ma,set:f}}),[a,f]);return x.a.createElement(Yn.I18nProvider,{i18n:Ma,language:a.code,catalogs:s},x.a.createElement(_a.Provider,{value:v},n))},Na=function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=4;break;case 4:return e.abrupt("return",t(574)("./".concat(n,"/messages.js")));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ua=function(e){var n=document.querySelector("html");if(n){var t=e?"rtl":"ltr";n.style.direction=t,n.classList.remove("--rtl","--ltr"),n.classList.add("--".concat(t))}};function Ra(){var e=Object(i.a)(["\n  margin-top: 8px;\n  margin-bottom: 40px;\n  color: #000000a1;\n  font-weight: 500;\n"]);return Ra=function(){return e},e}function Aa(){var e=Object(i.a)(['\n  background: url("','");\n  width: 300px;\n  display: inline-block;\n  height: 100px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n']);return Aa=function(){return e},e}function za(){var e=Object(i.a)(["\n  grid-area: header;\n  text-align: center;\n"]);return za=function(){return e},e}var Ba=function(e){var n=x.a.useContext(_a).i18n;return x.a.createElement(Da,null,e.isHome?x.a.createElement($a,null):x.a.createElement(mt.b,{to:"/"},x.a.createElement($a,null)),x.a.createElement(qa,null,n._("Co-creating circular and regenerative resource flows in cities")),x.a.createElement(qa,null,""))},Da=Sn.div(za()),$a=Sn.div(Aa(),"https://raw.githubusercontent.com/reflow-project/weloop/main/src/static/img/weloop_logo_1200x512.png"),qa=Sn.h5(Ra());function Va(){var e=Object(i.a)(["\n  width: 10px;\n  height: 10px;\n"]);return Va=function(){return e},e}function Qa(){var e=Object(i.a)(["\n  margin: 0;\n  margin-bottom: 16px;\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return Qa=function(){return e},e}function Wa(){var e=Object(i.a)(["\n  text-align: center;\n  text-decoration: underline;\n  cursor: pointer;\n  a {\n    color: inherit;\n  }\n"]);return Wa=function(){return e},e}function Ha(){var e=Object(i.a)(["\n  position: relative;\n  color: rgba(0, 0, 0, 0.5);\n  text-align: center;\n  margin-top: 24px;\n  &:before {\n    position: absolute;\n    content: '';\n    width: calc(50% - 24px);\n    left: 0;\n    top: 8px;\n    height: 1px;\n    display: block;\n    background: rgba(0, 0, 0, 0.45);\n  }\n  &:after {\n    position: absolute;\n    content: '';\n    width: calc(50% - 24px);\n    right: 0;\n    top: 8px;\n    height: 1px;\n    display: block;\n    background: rgba(0, 0, 0, 0.45);\n  }\n"]);return Ha=function(){return e},e}function Ja(){var e=Object(i.a)(["\n  background: ",";\n  a {\n    text-decoration: none;\n    color: ",";\n    button {\n      color: "," !important;\n    }\n  }\n"]);return Ja=function(){return e},e}function Ka(){var e=Object(i.a)(["\n  .extra {\n    width: 100%;\n    margin-left: 0px;\n  }\n  a {\n    text-decoration: none;\n    color: inherit;\n  }\n"]);return Ka=function(){return e},e}function Za(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  height: inherit;\n  border: 1px solid #dddfe2;\n  text-align: left;\n  height: fit-content;\n"]);return Za=function(){return e},e}function Ga(){var e=Object(i.a)(["\n  grid-area: form;\n"]);return Ga=function(){return e},e}function Ya(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  margin-top: 60px;\n  padding-bottom: 50px;\n"]);return Ya=function(){return e},e}function Xa(){var e=Object(i.a)(["\n    grid-template-columns: 1fr;\n    grid-template-areas: 'header' 'image' 'form' 'footer';\n    padding: 16px\n  "]);return Xa=function(){return e},e}function ei(){var e=Object(i.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr 1fr;\n  grid-template-areas: 'header header' 'form image' 'footer footer';\n  ",";\n"]);return ei=function(){return e},e}function ni(){var e=Object(i.a)([""]);return ni=function(){return e},e}function ti(){var e=Object(i.a)([""]);return ti=function(){return e},e}function ri(){var e=Object(i.a)(['\n  background: url("','");\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  padding: 50%;\n  width: 400px;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n']);return ri=function(){return e},e}var ai={login:Object(Yn.i18nMark)("Sign in"),placeholders:{email:Object(Yn.i18nMark)("Enter your email"),password:Object(Yn.i18nMark)("Enter your password")}},ii=function(e){var n=e.formik,t=h.useContext(_a).i18n;return h.createElement(h.Fragment,null,h.createElement(mi,null,h.createElement(ui,null,h.createElement(Ba,{isHome:!0}),h.createElement(si,null,h.createElement(di,null,h.createElement(gi,null,h.createElement(Pn.Box,{p:3},h.createElement("form",{onSubmit:n.handleSubmit},h.createElement(ja.b,{placeholder:ai.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),h.createElement(hi,null),h.createElement(ja.b,{type:"password",placeholder:ai.placeholders.password,name:"password",value:n.values.password,onChange:n.handleChange}),h.createElement(ot,{mt:3,variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{width:"100%"}},h.createElement(Yn.Trans,{id:"Sign in"}))))),h.createElement(bi,{variant:"text",my:3,mt:2},h.createElement(mt.b,{to:"/reset"},h.createElement(Yn.Trans,{id:"Trouble logging in?"})))),h.createElement(pi,null,h.createElement(Yn.Trans,{id:"Or"})),h.createElement(vi,{mt:3,p:3},h.createElement(Pn.Text,{variant:"heading"},h.createElement(Yn.Trans,{id:"Browse this instance"})),h.createElement(Pn.Text,{variant:"text",mt:2},t._("You don't need to sign up to preview what people are sharing and discussing publicly.")),h.createElement(mt.b,{to:"/discover"},h.createElement(ot,{mt:3,variant:"outline"},h.createElement(Yn.Trans,{id:"Browse"}))))),h.createElement(fi,null,h.createElement(mt.b,{to:"signup"},h.createElement(ot,{mb:2,style:{width:"100%",height:"50px"},variant:"outline"},h.createElement(Yn.Trans,{id:"Sign up"}))),h.createElement(Hn,{className:"extra"},h.createElement(Jn,null,h.createElement(oi,null),h.createElement(li,{p:3},h.createElement(ci,null,h.createElement(Pn.Text,{variant:"suptitle"},h.createElement(Yn.Trans,{id:"Instance description"})),h.createElement(Pn.Text,{mt:2,variant:"text"},"Federated economic network for Reflow pilots")))))))))},oi=Sn(Pn.Box)(ri(),"https://reflowproject.eu/wp-content/uploads/2019/08/reflow-cocreation-1.png"),li=Sn(Pn.Box)(ti()),ci=Sn(Pn.Box)(ni()),ui=Sn.div(ei(),k.a.lessThan("medium")(Xa())),mi=Sn.div(Ya()),si=Sn.div(Ga()),di=Sn.div(Za(),(function(e){return e.theme.colors.appInverse})),fi=Sn(Pn.Box)(Ka()),vi=Sn(Pn.Box)(Ja(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),pi=Sn.div(Ha()),bi=Sn(Pn.Text)(Wa()),gi=Sn.div(Qa()),hi=Sn.div(Va()),xi=t(16),Ei=function(){var e,n=Object(q.a)(),t=q.c(ce,e),r=Object(c.a)(t,2),a=r[0],i=r[1],o=function(e){return q.c(oe,e)}(),l=Object(c.a)(o,2),u=l[0],m=l[1],s=function(e){return q.c(ue,e)}(),d=Object(c.a)(s,2),f=d[0],v=d[1],p=function(e){return q.c(me,e)}(),g=Object(c.a)(p,2),x=g[0],E=g[1],y=function(e){return q.c(le,e)}(),O=Object(c.a)(y,2),j=O[0],k=O[1];return Object(h.useMemo)((function(){return{login:function(e,n){if(!i.loading)return a({variables:{email:e,password:n},context:b({ctx:"Login"}),update:function(e,n){var t,r;return yi(e,null===(t=n.data)||void 0===t||null===(r=t.createSession)||void 0===r?void 0:r.me)}})},loginStatus:i,resetPwdReq:function(e){if(!k.loading)return j({variables:{email:e}})},resetPwdReqStatus:k,confirmEmail:function(e){if(!v.loading)return f({variables:{token:e},update:function(e,n){var t,r;return yi(e,null===(t=n.data)||void 0===t||null===(r=t.confirmEmail)||void 0===r?void 0:r.me)}})},confirmEmailStatus:v,signUp:function(e){if(!E.loading)return x({variables:{registration:e},update:function(e,n){var t;return yi(e,null===(t=n.data)||void 0===t?void 0:t.createUser)}})},signUpStatus:E,resetPwd:function(e){var n=e.password,t=e.token;if(!m.loading)return u({variables:{password:n,token:t},update:function(e,n){var t,r;return yi(e,null===(t=n.data)||void 0===t||null===(r=t.resetPassword)||void 0===r?void 0:r.me)}})},resetPwdStatus:m,usernameAvailable:function(e){return n.query({query:se,variables:{username:e}}).then((function(e){return e.data.usernameAvailable}))}}}),[E,x,f,v,a,i,u,m,j,k,n])},yi=function(e,n){e.writeQuery({query:K,data:{__typename:"RootQueryType",me:n?Object(l.a)(Object(l.a)({__typename:"Me"},n),{},{user:Object(l.a)({__typename:"User"},n.user)}):null}})},Oi=t(456),ji=Object(h.createContext)({setTitle:function(e){return e}}),ki=function(e){var n=e.children,t=Object(h.useContext)(_a).i18n,r=Object(h.useState)(),a=Object(c.a)(r,2),i=a[0],o=a[1],u=Object(h.useCallback)((function(e,n){var r=!1===e?void 0:t._(Object(l.a)(Object(l.a)({},e),{},{values:n}));r!==i&&o(r)}),[t,i]),m=Object(h.useMemo)((function(){return{setTitle:u}}),[u]),s=i?"".concat("WeLoop"," - ").concat(i):"WeLoop";return x.a.createElement(ji.Provider,{value:m},x.a.createElement(Oi.a,null,x.a.createElement("title",null,s)),n)},wi=function(e,n){var t=Object(h.useContext)(ji).setTitle;Object(h.useEffect)((function(){t(e,n)}),[t,e,n])},Ci=xi.object({email:xi.string().max(50).required(),password:xi.string().max(50).required()}),Ii={id:"Login"},Ti=function(){wi(Ii);var e=Ei().login,n=Object(er.a)({initialValues:{email:"",password:""},enableReinitialize:!0,onSubmit:function(n){var t=n.email,r=n.password;return e(t,r)},validationSchema:Ci});return x.a.createElement(ii,{formik:n})},Fi=Object(h.createContext)({isOpen:!0,toggleOpen:function(){return!0}}),Si=function(e){var n=e.children,t=Object(h.useReducer)((function(e){return!e}),!0),r=Object(c.a)(t,2),a=r[0],i=r[1],o=Object(h.useMemo)((function(){return{isOpen:a,toggleOpen:i}}),[a,i]);return x.a.createElement(Fi.Provider,{value:o},n)};function Pi(){var e=Object(i.a)(["\n    fragment ResourcePreview on Resource {\n  id\n  icon {\n    id\n    url\n  }\n  name\n  summary\n  canonicalUrl\n  payload: content {\n    id\n    mediaType\n    mirror {\n      url\n    }\n    upload {\n      size\n    }\n    url\n  }\n  myLike {\n    id\n  }\n  myFlag {\n    id\n  }\n  likers {\n    totalCount\n  }\n  collection {\n    id\n    name\n    preferredUsername\n    canonicalUrl\n    icon {\n      id\n      url\n    }\n    summary\n    community {\n      id\n      ...CommunityInfo\n    }\n  }\n  license\n}\n    ",""]);return Pi=function(){return e},e}var Mi=U()(Pi(),Qt);function _i(){var e=Object(i.a)(["\n    fragment CommentPreviewThread on Thread {\n  id\n  isLocal\n  canonicalUrl\n  context {\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on Community {\n      ...CommunityPreview\n    }\n  }\n}\n    ","\n","\n",""]);return _i=function(){return e},e}function Li(){var e=Object(i.a)(["\n    fragment CommentPreview on Comment {\n  ...CommentPreviewBase\n  id\n  inReplyTo {\n    ...CommentPreviewBase\n  }\n  likerCount\n  myLike {\n    id\n  }\n  myFlag {\n    id\n  }\n  thread {\n    id\n    comments(limit: 1) {\n      edges {\n        ...CommentPreviewBase\n      }\n    }\n    context {\n      ... on Flag {\n        id\n      }\n      ... on Community {\n        id\n        ...CommunityInfo\n      }\n      ... on Collection {\n        id\n        community {\n          id\n          ...CommunityInfo\n        }\n      }\n      ... on Resource {\n        id\n        collection {\n          id\n          community {\n            id\n            ...CommunityInfo\n          }\n        }\n      }\n    }\n  }\n}\n    ","\n",""]);return Li=function(){return e},e}function Ni(){var e=Object(i.a)(["\n    fragment CommentPreviewBase on Comment {\n  id\n  isLocal\n  content\n  canonicalUrl\n  createdAt\n  creator {\n    icon {\n      id\n      url\n    }\n    image {\n      id\n      url\n    }\n    userId: id\n    userName: name\n    canonicalUrl\n  }\n}\n    "]);return Ni=function(){return e},e}var Ui=U()(Ni()),Ri=U()(Li(),Ui,Qt);U()(_i(),Jt,Mi,Wt);function Ai(){var e=Object(i.a)(["\n    fragment FlagPreview on Flag {\n  id\n  message\n  isResolved\n  creator {\n    ...UserPreview\n  }\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n",""]);return Ai=function(){return e},e}var zi=U()(Ai(),oa,Wt,Jt,Mi,Ri);function Bi(){var e=Object(i.a)(["\n    fragment LikePreview on Like {\n  id\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n",""]);return Bi=function(){return e},e}var Di=U()(Bi(),Wt,Jt,Mi,oa,Ri);function $i(){var e=Object(i.a)(["\n    fragment FollowPreview on Follow {\n  id\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n  }\n}\n    ","\n","\n",""]);return $i=function(){return e},e}var qi=U()($i(),Wt,Jt,oa);function Vi(){var e=Object(i.a)(["\n    fragment ActivityPreview on Activity {\n  id\n  verb\n  createdAt\n  user {\n    icon {\n      id\n      url\n    }\n    image {\n      id\n      url\n    }\n    userId: id\n    userName: name\n    canonicalUrl\n  }\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n    ... on Flag {\n      ...FlagPreview\n    }\n    ... on Like {\n      ...LikePreview\n    }\n    ... on Follow {\n      ...FollowPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n","\n","\n","\n",""]);return Vi=function(){return e},e}var Qi=U()(Vi(),Wt,Jt,Mi,oa,Ri,zi,Di,qi);function Wi(){var e=Object(i.a)(['\n    query instanceOutboxActivities($after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  instance @connection(key: "instanceOutboxActivities") {\n    outbox(after: $after, before: $before, limit: $limit) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...InstanceOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return Wi=function(){return e},e}function Hi(){var e=Object(i.a)(["\n    fragment InstanceOutboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return Hi=function(){return e},e}var Ji=U()(Hi(),Qi),Ki=U()(Wi(),Zt,Ji);var Zi=function(e,n){return{query:Ki,variables:e,context:n}};function Gi(){var e=Object(i.a)(['\n    query allCommunities($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  communities(limit: $limit, before: $before, after: $after) @connection(key: "allCommunities") {\n    edges {\n      ...CommunityPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return Gi=function(){return e},e}var Yi=U()(Gi(),Wt,Zt);function Xi(){var e=Object(i.a)(["\n    fragment HeroCommunityMeData on Me {\n  user {\n    id\n  }\n}\n    "]);return Xi=function(){return e},e}function eo(){var e=Object(i.a)(["\n    fragment HeroCommunityData on Community {\n  id\n  displayUsername\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  followerCount\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  creator {\n    id\n  }\n}\n    "]);return eo=function(){return e},e}var no=U()(eo());U()(Xi());function to(){var e=Object(i.a)(["\n    fragment ThreadPreview on Thread {\n        id\n        lastActivity\n        createdAt\n        context {\n            ... on Community {\n                ...CommunityPreview\n            }\n            ... on Collection {\n                ...CollectionPreview\n            }\n            ... on Resource {\n                ...ResourcePreview\n            }\n            ... on Flag {\n                ...FlagPreview\n            }\n        }\n        comments(limit: 1) {\n            totalCount\n            edges {\n                ... on Comment {\n                    ...CommentPreview\n                }\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return to=function(){return e},e}var ro=U()(to(),Wt,Jt,Mi,zi,Ri);function ao(){var e=Object(i.a)(["\n    fragment CommunityPageActivityBase on Activity {\n        id\n        ...ActivityPreview\n    }\n    ","\n"]);return ao=function(){return e},e}function io(){var e=Object(i.a)(["\n    fragment CommunityPageCollectionBase on Collection {\n        id\n        ...CollectionPreview\n    }\n    ","\n"]);return io=function(){return e},e}function oo(){var e=Object(i.a)(["\n    fragment CommunityPageThread on Thread {\n        id\n        ...ThreadPreview\n    }\n    ","\n"]);return oo=function(){return e},e}function lo(){var e=Object(i.a)(["\n    fragment CommunityPageData on Community {\n        id\n        myFollow {\n            id\n        }\n        ...HeroCommunityData\n    }\n    ","\n"]);return lo=function(){return e},e}var co=U()(lo(),no),uo=U()(oo(),ro),mo=U()(io(),Jt);U()(ao(),Qi);function so(){var e=Object(i.a)(["\n    mutation createCommunity($community: CommunityInput!, $icon: UploadInput) {\n  createCommunity(community: $community, icon: $icon) {\n    ...CommunityPageData\n  }\n}\n    ",""]);return so=function(){return e},e}var fo=U()(so(),co);var vo=function(){var e,n=q.c(fo,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.community,o=n.icon,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{icon:Ea(o,null),community:{name:t.name,summary:t.summary,preferredUsername:t.preferredUsername}},refetchQueries:[Xr({}),Zi({limit:Ee}),(a={limit:Ee},l=void 0,{query:Yi,variables:a,context:l})]}));case 4:case"end":return e.stop()}var a,l}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(h.useMemo)((function(){return{create:l}}),[l])},po=t(470),bo=t(904),go=t(905);function ho(){var e=Object(i.a)(["\n    display: block;\n    border-radius: 4px;\n    height: inherit;\n    background-size: cover;\n}\n"]);return ho=function(){return e},e}function xo(){var e=Object(i.a)(["\n  width: 100%;\n  box-sizing: border-box;\n  position: relative;\n  height: 140px;\n  &:after {\n    position: absolute;\n    content: '';\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    border-radius: 4px;\n    display: block;\n    background: rgba(0, 0, 0, 0.3);\n  }\n  &:hover {\n    &:after {\n      background: rgba(0, 0, 0, 0.1);\n    }\n  }\n  svg {\n    width: 40px;\n  }\n"]);return xo=function(){return e},e}function Eo(){var e=Object(i.a)(["\n  padding: 20px 10px;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.3);\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n"]);return Eo=function(){return e},e}function yo(){var e=Object(i.a)(["\n  padding: 20px 10px;\n  border-radius: 4px;\n"]);return yo=function(){return e},e}function Oo(){var e=Object(i.a)(["\n  width: 40px;\n  height: 40px;\n  align-items: center;\n  border-radius: 100px;\n  position: absolute;\n  left: 50%;\n  margin-left: -20px;\n  top: 50%;\n  margin-top: -20px;\n  z-index: 9;\n"]);return Oo=function(){return e},e}function jo(){var e=Object(i.a)(["\n  margin-bottom: 0px;\n  margin-top: 5px;\n  font-weight: bold;\n  text-align: center;\n  font-style: italic;\n"]);return jo=function(){return e},e}function ko(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  text-align: center;\n  cursor: pointer;\n  box-sizing: border-box;\n  height: inherit;\n  margin: 0px;\n  &.active {\n    border: 1px dashed ",";\n  }\n  .;\n"]);return ko=function(){return e},e}var wo=function(e){var n=e.initialUrl,t=e.uploadType,r=e.onFileSelect,a=e.filePattern,i=Object(h.useState)(),o=Object(c.a)(i,2),l=o[0],u=o[1],m=Object(h.useState)(),s=Object(c.a)(m,2),d=s[0],f=s[1];Object(h.useEffect)((function(){return function(){l&&URL.revokeObjectURL(l)}}),[l]),Object(h.useEffect)((function(){u(n)}),[n]);var v=Object(po.a)({accept:a,onDrop:function(e){var n=e[0];if(!n)return r(void 0),void f(void 0);r(n),f({file:n,localUrl:URL.createObjectURL(n)})}}),p=v.getRootProps,b=v.getInputProps,g=v.isDragActive;return x.a.createElement(x.a.Fragment,null,x.a.createElement(Pn.Box,Object.assign({sx:{height:"100%"}},p({className:"dropzone"})),x.a.createElement(Co,{className:g?"active":"none"},d||"resource"!==t?null:x.a.createElement(Po,{className:"thumb"},x.a.createElement(To,null,x.a.createElement(bo.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"}))),"resource"!==t?x.a.createElement(Po,{className:"thumb"},x.a.createElement(To,null,x.a.createElement(go.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"})),x.a.createElement(Mo,{style:{backgroundImage:'url("'.concat(d?d.localUrl:l,'")')}})):null,d&&"resource"===t?-1===d.file.type.indexOf("image")?x.a.createElement(So,null,x.a.createElement(bo.a,{size:20}),d&&x.a.createElement(Io,null,d.file.name)):x.a.createElement(Fo,null,x.a.createElement(Po,null,x.a.createElement(To,null,x.a.createElement(go.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"})),x.a.createElement(Mo,{style:{backgroundImage:'url("'.concat(d.localUrl,'")')}})),x.a.createElement(Io,null,d&&d.file.name)):null,x.a.createElement("input",b()))))},Co=Sn.div(ko(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),Io=Sn.p(jo()),To=Sn(Pn.Flex)(Oo()),Fo=Sn.div(yo()),So=Sn.div(Eo()),Po=Sn.div(xo()),Mo=Sn(Pn.Box)(ho());function _o(){var e=Object(i.a)(["\n  border-radius: 4px;\n  line-height: 26px;\n  padding: 8px 16px;\n  min-height: 58px;\n  font-family: ",";\n  font-weight: 600;\n"]);return _o=function(){return e},e}var Lo=Sn(Pn.Box)(_o(),(function(e){return e.theme.fontFamily})),No=function(e){var n=e.variant,t=e.children;return h.createElement(Lo,{variant:n||"info"},t)},Uo=t(159),Ro=t(228),Ao=t(243),zo=t(241),Bo=t(702);function Do(){var e=Object(i.a)(["\n    display: block;\n\n  "]);return Do=function(){return e},e}function $o(){var e=Object(i.a)(["\n    width: 100%;\n  "]);return $o=function(){return e},e}function qo(){var e=Object(i.a)(["\n  ",";\n  border-bottom: 1px solid ",";\n  height: ",";\n  display: flex;\n  padding: 20px;\n  & textarea {\n    height: 120px;\n  }\n  & label {\n    width: 200px;\n    line-height: 40px;\n    ",";\n  }\n\n  ",";\n"]);return qo=function(){return e},e}function Vo(){var e=Object(i.a)(["\n  padding: 0 16px;\n  padding-top: 16px;\n  // border-bottom: 1px solid ",";\n  & h5 {\n    text-align: center !important;\n    margin: 0 !important;\n  }\n"]);return Vo=function(){return e},e}function Qo(){var e=Object(i.a)(["\n  flex: 1;\n  ",";\n  padding-top: 13px;\n  position: relative;\n  input {\n    height: 40px;\n    background: white;\n    border-radius: 2px;\n    border: ",";\n  }\n  textarea {\n    padding-top: 16px;\n    line-height: 20px;\n    background: white;\n    border-radius: 2px;\n    border: ",";\n    font-family: ",";\n  }\n"]);return Qo=function(){return e},e}function Wo(){var e=Object(i.a)(["\n  position: absolute;\n  top: 2px;\n  right: 8px;\n  text-transform: uppercase;\n  text-align: center;\n  background: #d0d9db;\n  padding: 2px 10px;\n  border-radius: 12px;\n  font-weight: 600;\n  color: #fff;\n  letter-spacing: 1px;\n"]);return Wo=function(){return e},e}function Ho(){var e=Object(i.a)(["\n  ",";\n  padding: 20px 0;\n"]);return Ho=function(){return e},e}function Jo(){var e=Object(i.a)(["\n  ",";\n  padding: 0 16px;\n  & button {\n    float: right;\n  }\n"]);return Jo=function(){return e},e}function Ko(){var e=Object(i.a)(["\n  font-family: ",";\n  min-height: 300px;\n  overflow-y: auto;\n  max-height: 96vh;\n  padding-bottom: 20px;\n"]);return Ko=function(){return e},e}function Zo(){var e=Object(i.a)(["\n  ",";\n  font-family: ",";\n"]);return Zo=function(){return e},e}function Go(){var e=Object(i.a)(["\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  cursor: pointer;\n  background: ",";\n  width: 24px;\n  height: 24px;\n  border-radius: 40px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return Go=function(){return e},e}function Yo(){var e=Object(i.a)(["\n  ",";\n  position: relative;\n"]);return Yo=function(){return e},e}function Xo(){var e=Object(i.a)(["\n    width: auto;\n    left: 8px;\n    right: 8px;\n    margin: 0;\n  "]);return Xo=function(){return e},e}function el(){var e=Object(i.a)(["\n  width: 700px;\n  box-shadow: 0 2px 8px 3px rgba(0, 0, 0, 0.3);\n  z-index: 9999999999;\n  background-color: #ffffff;\n  padding: 0;\n  margin: 40px auto;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  margin-left: -350px;\n  border-radius: 3px;\n  outline: none;\n  transform: translateY(-50%);\n\n  ",";\n"]);return el=function(){return e},e}function nl(){var e=Object(i.a)(["\n  margin-top: 4px;\n  z-index: 99999;\n  position: relative;\n"]);return nl=function(){return e},e}function tl(){var e=Object(i.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(51, 60, 69, 0.95);\n  z-index: 9999999999999;\n  height: 100%;\n  justify-content: center;\n  overflow: auto;\n  cursor: pointer;\n"]);return tl=function(){return e},e}var rl=Sn.div(tl()),al=Sn.div(nl()),il=Sn.div(el(),k.a.lessThan("medium")(Xo())),ol=Sn.div(Yo(),Object(tt.a)()),ll=Sn(Pn.Box)(Go(),(function(e){return e.theme.colors.primary})),cl=Sn.div(Zo(),Object(tt.a)(),(function(e){return e.theme.fontFamily})),ul=Sn.div(Ko(),(function(e){return e.theme.fontFamily})),ml=Sn(Pn.Box)(Jo(),Object(tt.a)()),sl=Sn(ml)(Ho(),Object(tt.a)()),dl=Sn.div(Wo()),fl=Sn.div(Qo(),Object(tt.a)(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.fontFamily})),vl=Sn.div(Vo(),(function(e){return e.theme.colors.lighter})),pl=Sn.div(qo(),Object(tt.a)(),(function(e){return e.theme.colors.lighter}),(function(e){return e.big?"180px":"auto"}),k.a.lessThan("medium")($o()),k.a.lessThan("medium")(Do())),bl=function(e){Object(Ao.a)(t,e);var n=Object(zo.a)(t);function t(){return Object(Uo.a)(this,t),n.apply(this,arguments)}return Object(Ro.a)(t,[{key:"componentDidMount",value:function(){t.el.style.display="block"}},{key:"componentWillUnmount",value:function(){t.el.style.display="none"}},{key:"render",value:function(){return O.a.createPortal(this.props.children,t.el)}}]),t}(x.a.Component);bl.el=function(){var e=document.createElement("div");return e.setAttribute("id","modalPortal"),e.style.display="none",document.body.appendChild(e),e}();var gl=function(e){var n=e.closeModal,t=e.children,r=Object(h.useCallback)((function(){return n()}),[n]);return x.a.createElement(bl,null,x.a.createElement(rl,{onClick:r}),x.a.createElement(il,null,x.a.createElement(ol,null,x.a.createElement(ll,{onClick:r},x.a.createElement(Bo.default,{color:"#fff",size:16}))),x.a.createElement(cl,null,t)))};function hl(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return hl=function(){return e},e}function xl(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return xl=function(){return e},e}function El(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return El=function(){return e},e}function yl(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return yl=function(){return e},e}function Ol(){var e=Object(i.a)(["\n  color: ",";\n"]);return Ol=function(){return e},e}function jl(){var e=Object(i.a)(["\n  color: ",";\n"]);return jl=function(){return e},e}function kl(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return kl=function(){return e},e}var wl,Cl={placeholders:{name:Object(Yn.i18nMark)("Choose a name for the community"),summary:Object(Yn.i18nMark)("Please describe who might be interested in this community and what kind of collections it is likely to contain..."),icon:Object(Yn.i18nMark)("Enter the URL of an image to represent the community")}},Il=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(ul,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(vl,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Create a new community"}))),h.createElement(Ml,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(wo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(Pl,null,h.createElement(Fl,{fontWeight:"bold"},h.createElement(Tl,null,h.createElement(ja.b,{placeholder:Cl.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(dl,null,60-t.values.name.length),t.errors.name&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.name)))),h.createElement(Sl,{mt:2},h.createElement(Tl,null,h.createElement(ja.d,{placeholder:Cl.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(dl,null,500-t.values.summary.length),t.errors.summary&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.summary)))))),h.createElement(ml,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Save"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},Tl=Sn(fl)(kl()),Fl=Sn(Pn.Text)(jl(),(function(e){return e.theme.colors.mediumdark})),Sl=Sn(Pn.Text)(Ol(),(function(e){return e.theme.colors.mediumdark})),Pl=Sn.div(yl(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(El()),(function(e){return e.theme.colors.mediumdark})),Ml=Sn(Pn.Flex)(xl(),k.a.lessThan("medium")(hl())),_l=["imageurl","need a file or an url",function(e){return!e||("string"===typeof e?xa(e):e instanceof File)}],Ll=xi.object({name:xi.string().min(2).max(60).required(),summary:xi.string().max(500),icon:(wl=xi.mixed()).test.apply(wl,Object(w.a)(_l))}),Nl=function(e){var n=e.done,t=Object(Tn.h)(),r=vo().create,a=Object(er.a)({enableReinitialize:!0,validationSchema:Ll,initialValues:{name:"",summary:"",icon:""},onSubmit:function(e){return r({community:{preferredUsername:e.name.split(" ").join("_"),name:e.name,summary:e.summary},icon:e.icon}).then((function(e){var r,a;n(),(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(a=r.createCommunity)||void 0===a?void 0:a.id)&&t.push("/communities/".concat(e.data.createCommunity.id))}))}});return x.a.createElement(Il,{cancel:n,formik:a})},Ul=t(944),Rl=function(){return Ae?null:x.a.createElement(Ul.a,null)},Al=t(923),zl=t(917),Bl=t(795);function Dl(){var e=Object(i.a)(["\n  font-family: ",";\n  border-radius: 4px;\n  height: ",";\n  min-width: ",";\n  background-color: ",';\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n  span {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    line-height: normal;\n    font-weight: 700;\n    ',";\n  }\n"]);return Dl=function(){return e},e}var $l={default:"48px",s:"32px",m:"140px",l:"200px"},ql=Sn(Pn.Box)(Dl(),(function(e){return e.theme.fontFamily}),(function(e){return $l[e.size]}),(function(e){return $l[e.size]}),(function(e){return e.bg?"transparent":e.theme.colors.light}),(function(e){return e.bg}),(function(e){return e.theme.colors.mediumdark})),Vl=function(e){var n=e.size,t=void 0===n?"default":n,r=e.src,a=e.initials;e.variant;return h.createElement(ql,{size:t,bg:r},a&&!r?h.createElement("span",null,a.substr(0,2).toUpperCase()):null)},Ql=t(391),Wl=t(210),Hl=t(716),Jl=t(292),Kl=t(907),Zl=t(908),Gl=t(909),Yl=t(910),Xl=t(911),ec=t(912),nc=t(459),tc=t.n(nc);function rc(){var e=Object(i.a)(["\n  align-items: center;\n  cursor: pointer;\n  padding: 16px;\n  min-width: 100%;\n  width: max-content;\n  flex: 1;\n  &:first-of-type {\n    border-top-left-radius: 6px;\n    border-top-right-radius: 6px;\n  }\n  &:hover {\n    div {\n      color: "," !important;\n    }\n    background: "," !important;\n  }\n"]);return rc=function(){return e},e}function ac(){var e=Object(i.a)(["\n  text-align: left;\n  background: ",";\n  min-width: 210px;\n  display: block;\n  border-radius: 6px;\n  box-shadow: rgba(101, 119, 134, 0.2) 0 0 15px, rgba(101, 119, 134, 0.15) 0 0 3px 1px;\n  position: absolute;\n  top: ",";\n  bottom: ",";\n  left: auto;\n  right: ",";\n  z-index: 4050;\n"]);return ac=function(){return e},e}var ic=function(e){var n=e.orientation,t=e.close,r=e.children;return x.a.createElement(tc.a,{onOutsideClick:t},x.a.createElement(oc,{className:"dropdown",orientation:n},r))},oc=Sn(Pn.Box)(ac(),(function(e){return e.theme.colors.appInverse}),(function(e){return"top"===e.orientation?"8px":"auto"}),(function(e){return"bottom"===e.orientation?"4px":"auto"}),(function(e){return"bottom"===e.orientation?"0px":"10px"})),lc=Sn(Pn.Flex)(rc(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.light}));function cc(){var e=Object(i.a)(["\n  border: 1px solid ",";\n  border-radius: 4px;\n  height: 34px;\n  &:hover {\n    background: ",";\n  }\n  div {\n    letter-spacing: 0;\n  }\n"]);return cc=function(){return e},e}function uc(){var e=Object(i.a)(["\n  line-height: 50px;\n  height: 50px;\n  cursor: pointer;\n  align-items: center;\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n    .--rtl & {\n      margin-right: 0px;\n      margin-left: 8px;\n    }\n    & svg {\n      vertical-align: sub;\n    }\n  }\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n  &:hover {\n    color: ",";\n  }\n"]);return uc=function(){return e},e}function mc(){var e=Object(i.a)(["\n  padding: 8px;\n  border-bottom: ",";\n"]);return mc=function(){return e},e}var sc=Sn.div(mc(),(function(e){return e.lined?"1px solid #dadada":null})),dc=Sn(Pn.Flex)(uc(),(function(e){return e.theme.colors.primary})),fc=Sn(dc)(cc(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.light})),vc=function(e){var n=e.logout,t=e.userLink,r=e.toggleDropdown,a=e.isAdmin,i=Object(Tn.h)().push;return h.createElement(ic,{orientation:"top",close:r},h.createElement(sc,{lined:!0},h.createElement(dc,{variant:"link",onClick:function(){return i(t)}},h.createElement("span",null,h.createElement(Ql.default,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"My Profile"}))),h.createElement(dc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"".concat(t,"/communities")},h.createElement("span",null,h.createElement(Wl.default,{size:16,color:"#333"})),h.createElement(Yn.Trans,{id:"My Communities"})))),h.createElement(dc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"".concat(t,"/inventory")},h.createElement("span",null,h.createElement(Hl.default,{size:16,color:"#333"})),h.createElement(Yn.Trans,{id:"My Inventory"})))),h.createElement(dc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"".concat(t)},h.createElement("span",null,h.createElement(Jl.default,{size:16,color:"#333"})),h.createElement(Yn.Trans,{id:"My Activity"})))),h.createElement(dc,null,h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"".concat(t,"/starred")},h.createElement("span",null,h.createElement(Kl.a,{size:16,color:"#333"})),h.createElement(Yn.Trans,{id:"My favorites"}))))),h.createElement(sc,null,h.createElement(dc,{variant:"link",onClick:function(){return i("/settings")}},h.createElement("span",null,h.createElement(Zl.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Settings"}))),a&&h.createElement(fc,{variant:"link",onClick:function(){return i("/settings/instance")}},h.createElement(Pn.Text,{variant:"text",sx:{flex:1,textAlign:"center"}},h.createElement(Yn.Trans,{id:"Admin dashboard"}))),h.createElement(dc,{variant:"link"},h.createElement(Pn.Text,{variant:"text"},h.createElement("a",{href:"/terms",target:"_blank"},h.createElement("span",null,h.createElement(Gl.a,{size:16})),h.createElement(Yn.Trans,{id:"Code of Conduct"})))),h.createElement(dc,{variant:"link",onClick:n},h.createElement("span",null,h.createElement(Yl.a,{size:16,strokeWidth:1,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Sign out"})))))},pc=function(e){var n=e.toggleDropdown,t=e.createCommunity,r=e.createIntent,a=e.createResource;return h.createElement(ic,{orientation:"top",close:n},h.createElement(sc,{lined:!0},h.createElement(dc,{variant:"link",onClick:function(){return t()}},h.createElement("span",null,h.createElement(Wl.default,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"New Community"}))),h.createElement(dc,{variant:"link",onClick:function(){return r()}},h.createElement("span",null,h.createElement(Xl.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Create a new intent"}))),h.createElement(dc,{variant:"link",onClick:function(){return a()}},h.createElement("span",null,h.createElement(ec.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Create a new resource"})))))};function bc(){var e=Object(i.a)(['\n    query communityOutboxActivities($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityOutboxActivities", filter: ["communityId"]) {\n    id\n    outbox(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return bc=function(){return e},e}function gc(){var e=Object(i.a)(["\n    fragment CommunityOutboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return gc=function(){return e},e}var hc=U()(gc(),Qi),xc=U()(bc(),Zt,hc);var Ec=function(e,n){return{query:xc,variables:e,context:n}},yc=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:Ee}},q.d(xc,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.outbox,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{communityId:e,limit:Ee}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.outbox)&&(null===(a=e.community)||void 0===a?void 0:a.outbox)?Object(l.a)(Object(l.a)({},i),{},{community:Object(l.a)(Object(l.a)({},i.community),{},{outbox:r({prev:e.community.outbox,fetched:i.community.outbox})})}):e}})}));return Object(h.useMemo)((function(){return{activitiesPage:i}}),[i])};function Oc(){var e=Object(i.a)(['\n    query communityCollections($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityCollections", filter: ["communityId"]) {\n    id\n    collections(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityCollection\n      }\n    }\n  }\n}\n    ',"\n",""]);return Oc=function(){return e},e}function jc(){var e=Object(i.a)(["\n    fragment CommunityCollection on Collection {\n  ...CollectionPreview\n  ...CommunityPageCollectionBase\n}\n    ","\n",""]);return jc=function(){return e},e}var kc=U()(jc(),Jt,mo),wc=U()(Oc(),Zt,kc);var Cc=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:Ee}},q.d(wc,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.collections,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,communityId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.collections)&&(null===(a=e.community)||void 0===a?void 0:a.collections)?Object(l.a)(Object(l.a)({},i),{},{community:Object(l.a)(Object(l.a)({},i.community),{},{collections:r({prev:e.community.collections,fetched:i.community.collections})})}):e}})}));return Object(h.useMemo)((function(){return{collectionsPage:i}}),[i])};function Ic(){var e=Object(i.a)(["\n    mutation createThread($contextId: String!, $comment: CommentInput!) {\n  createThread(comment: $comment, contextId: $contextId) {\n    thread {\n      id\n    }\n  }\n}\n    "]);return Ic=function(){return e},e}var Tc=U()(Ic());function Fc(){var e=Object(i.a)(['\n    query communityThreads($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityThreads", filter: ["communityId"]) {\n    id\n    threads(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityThread\n      }\n    }\n  }\n}\n    ',"\n",""]);return Fc=function(){return e},e}function Sc(){var e=Object(i.a)(["\n    fragment CommunityThread on Thread {\n  ...CommunityPageThread\n}\n    ",""]);return Sc=function(){return e},e}var Pc=U()(Sc(),uo),Mc=U()(Fc(),Zt,Pc);var _c=function(e,n){var t,r=q.c(Tc,t),i=Object(c.a)(r,2),l=i[0],u=i[1].loading,m=fF(function(){var t=Object(o.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&!u){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",l({variables:{contextId:e,comment:{content:r}},refetchQueries:[Zi({limit:Ee})].concat(Object(w.a)("Community"===n?[(a={communityId:e,limit:Ee},i=void 0,{query:Mc,variables:a,context:i}),Ec({communityId:e,limit:Ee})]:[]))}).then((function(e){var n,t,r;return null===(n=e.data)||void 0===n||null===(t=n.createThread)||void 0===t||null===(r=t.thread)||void 0===r?void 0:r.id})));case 3:case"end":return t.stop()}var a,i}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,n,u]);return Object(h.useMemo)((function(){return{createThread:m}}),[m])};function Lc(){var e=Object(i.a)(["\n    mutation editCommunity($community: CommunityUpdateInput!, $communityId: String!, $icon: UploadInput) {\n  updateCommunity(community: $community, communityId: $communityId, icon: $icon) {\n    ...EditCommunityQueryData\n  }\n}\n    ",""]);return Lc=function(){return e},e}function Nc(){var e=Object(i.a)(["\n    query editCommunityData($communityId: String!) {\n  community(communityId: $communityId) {\n    ...EditCommunityQueryData\n  }\n}\n    ",""]);return Nc=function(){return e},e}function Uc(){var e=Object(i.a)(["\n    fragment EditCommunityQueryData on Community {\n  id\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  updatedAt\n}\n    "]);return Uc=function(){return e},e}var Rc=U()(Uc()),Ac=U()(Nc(),Rc);var zc=U()(Lc(),Rc);var Bc=function(e){var n,t=q.c(zc,n),r=Object(c.a)(t,2),i=r[0],l=r[1],u=function(e){return q.d(Ac,e)}({variables:{communityId:e}}),m=fF(function(){var n=Object(o.a)(a.a.mark((function n(t){var r,o,c,m,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m=t.community,s=t.icon,!l.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",i({variables:{communityId:e,icon:Ea(s,null===(r=u.data)||void 0===r||null===(o=r.community)||void 0===o||null===(c=o.icon)||void 0===c?void 0:c.url),community:{name:m.name,summary:m.summary}}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,l,i,u]);return Object(h.useMemo)((function(){var e,n=null===(e=u.data)||void 0===e?void 0:e.community;return{edit:m,community:n}}),[m,u])};function Dc(){var e=Object(i.a)(["\n    query communityData($communityId: String!) {\n  community(communityId: $communityId) {\n    id\n    ...CommunityPageData\n  }\n}\n    ",""]);return Dc=function(){return e},e}var $c=U()(Dc(),co);var qc=function(e){var n,t,r=Oa().me,a=(t={variables:{communityId:e}},q.d($c,t)),i=_c(e,"Community").createThread,o=null===(n=a.data)||void 0===n?void 0:n.community,l=pF(o).toggleFollow,c=Bc(e).edit,u=!!r&&!!(null===o||void 0===o?void 0:o.creator)&&r.user.id===o.creator.id,m=!!(null===r||void 0===r?void 0:r.isInstanceAdmin)||u;return Object(h.useMemo)((function(){return{community:o,createThread:i,toggleJoin:l,edit:c,canModify:m,isCreator:u}}),[o,l,c,m,i,u])},Vc=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:Ee}},q.d(Mc,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.threads,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{communityId:e,limit:Ee}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.threads)&&(null===(a=e.community)||void 0===a?void 0:a.threads)?Object(l.a)(Object(l.a)({},i),{},{community:Object(l.a)(Object(l.a)({},i.community),{},{threads:r({prev:e.community.threads,fetched:i.community.threads})})}):e}})}));return Object(h.useMemo)((function(){return{threadsPage:i}}),[i])},Qc=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:Ee}},q.d(pa,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.followers,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,communityId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.followers)&&(null===(a=e.community)||void 0===a?void 0:a.followers)?Object(l.a)(Object(l.a)({},i),{},{community:Object(l.a)(Object(l.a)({},i.community),{},{followers:r({prev:e.community.followers,fetched:i.community.followers})})}):e}})}));return Object(h.useMemo)((function(){return{communityFollowersPage:i}}),[i])};function Wc(){var e=Object(i.a)(["\n    fragment HeroCollectionMeData on Me {\n  user {\n    id\n  }\n}\n    "]);return Wc=function(){return e},e}function Hc(){var e=Object(i.a)(["\n    fragment HeroCollectionData on Collection {\n  id\n  name\n  displayUsername\n  summary\n  icon {\n    id\n    url\n  }\n  community {\n    id\n    name\n    icon {\n      id\n      url\n    }\n    myFollow {\n      id\n    }\n  }\n  followerCount\n  followers {\n    totalCount\n  }\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  creator {\n    id\n  }\n}\n    "]);return Hc=function(){return e},e}var Jc=U()(Hc());U()(Wc());function Kc(){var e=Object(i.a)(["\n    fragment CollectionPageActivity on Activity {\n  id\n  ...ActivityPreview\n}\n    ",""]);return Kc=function(){return e},e}function Zc(){var e=Object(i.a)(["\n    fragment CollectionPageResource on Resource {\n  id\n  createdAt\n  ...ResourcePreview\n}\n    ",""]);return Zc=function(){return e},e}function Gc(){var e=Object(i.a)(["\n    fragment CollectionPageData on Collection {\n  name\n  ...HeroCollectionData\n}\n    ",""]);return Gc=function(){return e},e}var Yc=U()(Gc(),Jc),Xc=U()(Zc(),Mi);U()(Kc(),Qi);function eu(){var e=Object(i.a)(["\n    mutation createCollection($collection: CollectionInput!, $contextId: String!, $icon: UploadInput) {\n  createCollection(collection: $collection, contextId: $contextId, icon: $icon) {\n    ...CollectionPageData\n  }\n}\n    ",""]);return eu=function(){return e},e}var nu=U()(eu(),Yc);var tu=function(e){var n,t=q.c(nu,n),r=Object(c.a)(t,2),i=r[0],l=r[1],u=fF(function(){var n=Object(o.a)(a.a.mark((function n(t){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.collection,o=t.icon,!l.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",i({variables:{contextId:e,icon:Ea(o,null),collection:{name:r.name,summary:r.summary,preferredUsername:r.preferredUsername}},refetchQueries:[(a={communityId:e,limit:Ee},c=void 0,{query:wc,variables:a,context:c}),Ec({communityId:e,limit:Ee}),Zi({limit:Ee}),Xt({limit:Ee}),Wr({limit:Ee})]}));case 4:case"end":return n.stop()}var a,c}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,l,i]);return Object(h.useMemo)((function(){return{create:u}}),[u])};function ru(){var e=Object(i.a)(["\n  color: ",";\n"]);return ru=function(){return e},e}function au(){var e=Object(i.a)(["\n  color: ",";\n"]);return au=function(){return e},e}function iu(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return iu=function(){return e},e}function ou(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return ou=function(){return e},e}function lu(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return lu=function(){return e},e}function cu(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return cu=function(){return e},e}function uu(){var e=Object(i.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n\n  & > div {\n    width: calc((100% - 20px) / 2);\n  }\n"]);return uu=function(){return e},e}function mu(){var e=Object(i.a)(["\n      display: block;\n    "]);return mu=function(){return e},e}function su(){var e=Object(i.a)(["\n  display: flex;\n  ",";\n"]);return su=function(){return e},e}function du(){var e=Object(i.a)(["\n      min-Height: unset;\n      height: auto;\n    "]);return du=function(){return e},e}function fu(){var e=Object(i.a)(["\n      flex-direction: column;\n      align-items: unset;\n    "]);return fu=function(){return e},e}function vu(){var e=Object(i.a)(["    \n          flex-basis: 100%;\n          order: 1\n        "]);return vu=function(){return e},e}function pu(){var e=Object(i.a)(["    \n          flex-basis: 100%;\n          order: 2\n        "]);return pu=function(){return e},e}function bu(){var e=Object(i.a)(["    \n            flex-direction: column;\n        "]);return bu=function(){return e},e}function gu(){var e=Object(i.a)(["\n  position: relative;\n  padding-top: 0;\n\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n    width: 100%;\n\n    &:focus {\n      outline: none;\n    }\n  }\n\n  textarea {\n    padding-top: 6px;\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n\n  .d-flex {\n    display: flex;\n    justify-content: space-between;\n    align-items: stretch;\n\n    ",";\n\n    .item_col-6 {\n      flex-basis: calc(50% - 5px);\n    }\n\n    .align-center {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .item_photo {\n      margin-bottom: 10px;\n      flex-basis: 140px;\n      height: 140px;\n\n      .bopsip {\n        height: 140px !important;\n      }\n\n      ",";\n    }\n    .item_info {\n      margin-bottom: 10px;\n      flex-basis: calc(100% - 160px);\n\n      ",";\n    }\n  }\n  .d-flex-image.d-flex {\n    ",";\n  }\n  .dropzone {\n    ",";\n  }\n"]);return gu=function(){return e},e}var hu,xu,Eu=Sn(fl)(gu(),k.a.lessThan("medium")(bu()),k.a.lessThan("medium")(pu()),k.a.lessThan("medium")(vu()),k.a.lessThan("medium")(fu()),k.a.lessThan("medium")(du())),yu=(Sn.div(su(),k.a.lessThan("medium")(mu())),Sn.div(uu())),Ou=Sn.div(cu(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(lu()),(function(e){return e.theme.colors.mediumdark})),ju=Sn(Pn.Flex)(ou(),k.a.lessThan("medium")(iu())),ku=Sn(Pn.Text)(au(),(function(e){return e.theme.colors.mediumdark})),wu=Sn(Pn.Text)(ru(),(function(e){return e.theme.colors.mediumdark})),Cu={placeholders:{name:Object(Yn.i18nMark)("Choose a name for the collection"),summary:Object(Yn.i18nMark)("Please describe what the collection is for and what kind of resources it is likely to contain..."),icon:Object(Yn.i18nMark)("Enter the URL of an image to represent the collection")}},Iu=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(ul,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(vl,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Create a new collection"}))),h.createElement(ju,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(wo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(Ou,null,h.createElement(ku,{fontWeight:"bold"},h.createElement(Eu,null,h.createElement(ja.b,{placeholder:Cu.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(dl,null,60-t.values.name.length),t.errors.name&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.name)))),h.createElement(wu,{mt:2},h.createElement(Eu,null,h.createElement(ja.d,{placeholder:Cu.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(dl,null,500-t.values.summary.length),t.errors.summary&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.summary)))))),h.createElement(ml,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Save"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},Tu=xi.object({name:xi.string().min(2).max(60).required(),summary:xi.string().max(500),icon:(hu=xi.mixed()).test.apply(hu,Object(w.a)(_l))}),Fu=function(e){var n=e.communityId,t=e.done,r=Object(Tn.h)(),a=tu(n).create,i=Object(er.a)({initialValues:{name:"",summary:"",icon:""},enableReinitialize:!0,onSubmit:function(e){return a({collection:{preferredUsername:e.name.split(" ").join("_"),name:e.name,summary:e.summary},icon:e.icon}).then((function(e){var n,t;return(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.createCollection)||void 0===t?void 0:t.id)&&r.push("/collections/".concat(e.data.createCollection.id))})).catch((function(e){return console.log(e)}))},validationSchema:Tu});return x.a.createElement(Iu,{cancel:t,formik:i})},Su=t(139),Pu=t(913),Mu=t(914);function _u(){var e=Object(i.a)(["\n   padding: 8px;\n"]);return _u=function(){return e},e}function Lu(){var e=Object(i.a)(["\n  padding: 16px;\n  "," & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return Lu=function(){return e},e}function Nu(){var e=Object(i.a)(["\n//     display: none;\n// "]);return Nu=function(){return e},e}function Uu(){var e=Object(i.a)(["\n  margin-top: 24px;\n  height: 250px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-color: ",";\n  position: relative;\n  margin: 0 auto;\n  border-radius: 4px;\n  background-position: center center;\n//   ",";\n"]);return Uu=function(){return e},e}function Ru(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  background: ",";\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n"]);return Ru=function(){return e},e}function Au(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  text-transform: lowercase;\n"]);return Au=function(){return e},e}function zu(){var e=Object(i.a)(["\n  align-items: center;\n"]);return zu=function(){return e},e}function Bu(){var e=Object(i.a)(["\n"]);return Bu=function(){return e},e}function Du(){var e=Object(i.a)(["\n  color: ",";\n  ",";\n"]);return Du=function(){return e},e}function $u(){var e=Object(i.a)(["\n  align-items: center;\n  justify-content: space-between;\n"]);return $u=function(){return e},e}function qu(){var e=Object(i.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return qu=function(){return e},e}function Vu(){var e=Object(i.a)(["\n    border-top: 1px solid ",";\n    // svg {\n    //   stroke: ",";\n    // }\n    "]);return Vu=function(){return e},e}function Qu(){var e=Object(i.a)(["\n      right: initial;\n      left: 10px;\n  "]);return Qu=function(){return e},e}function Wu(){var e=Object(i.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n\n    ","\n  }\n"]);return Wu=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(xu||(xu={}));var Hu=Sn(Pn.Box)(Wu(),k.a.lessThan("medium")(Qu())),Ju=Sn(lc)(Vu(),(function(e){return Object(tt.b)("0.1",e.theme.colors.light)}),(function(e){return Object(tt.b)("0.1",e.theme.colors.primary)})),Ku=Sn(Pn.Box)(qu(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),Zu=Sn(Pn.Flex)($u()),Gu=Sn(Pn.Text)(Du(),(function(e){return e.theme.colors.darker}),k.a.lessThan("medium")(Bu())),Yu=Sn(Pn.Flex)(zu()),Xu=Sn(Pn.Text)(Au(),(function(e){return e.theme.colors.mediumdark})),em=Sn(Pn.Box)(Ru(),(function(e){return e.theme.colors.appInverse})),nm=Sn.div(Uu(),(function(e){return e.theme.colors.medium}),k.a.lessThan("medium")(Nu())),tm=Sn.div(Lu(),k.a.lessThan("medium")(_u())),rm=function(e){var n=e.community;return n.status===xu.Loading?x.a.createElement(Pn.Text,null,"Loading..."):x.a.createElement(x.a.Fragment,null,x.a.createElement(em,{p:1},x.a.createElement(nm,{id:"header",style:{backgroundImage:'url("'.concat(n.icon,'")')}}),x.a.createElement(tm,null,x.a.createElement(Gu,{variant:"heading",mt:0},n.name),x.a.createElement(Xu,null,"@",n.fullName),n.summary&&x.a.createElement(Pn.Box,{mt:2},x.a.createElement(Su.a,null,n.summary)),x.a.createElement(Zu,{mt:3},x.a.createElement(Yu,null,x.a.createElement(ot,{mr:2,variant:n.following?"danger":"primary",isSubmitting:n.toggleJoinFormik.isSubmitting,isDisabled:n.toggleJoinFormik.isSubmitting||n.isCreator,onClick:n.toggleJoinFormik.submitForm},n.following?x.a.createElement(Yn.Trans,{id:"Leave"}):x.a.createElement(Yn.Trans,{id:"Join"})),x.a.createElement(Ku,{onClick:n.toggleDropdown},x.a.createElement(Pu.a,{size:20}),n.isOpenDropdown&&x.a.createElement(Hu,null,x.a.createElement(ic,{orientation:"bottom",close:n.toggleDropdown},n.canModify&&x.a.createElement(lc,{onClick:n.edit},x.a.createElement(Zl.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},x.a.createElement(Yn.Trans,{id:"Edit the community"}))),x.a.createElement(lc,{onClick:n.flag},x.a.createElement(Mu.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},n.isFlagged?x.a.createElement(Yn.Trans,{id:"Unflag this community"}):x.a.createElement(Yn.Trans,{id:"Flag this community"}))),n.isAdmin?x.a.createElement(Ju,{onClick:n.addToFeatured},x.a.createElement(Kl.a,{size:20,color:"rgb(211, 103, 5)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},x.a.createElement(Yn.Trans,{id:"Add to featured list"}))):null))))))))};function am(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return am=function(){return e},e}function im(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return im=function(){return e},e}function om(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return om=function(){return e},e}function lm(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return lm=function(){return e},e}function cm(){var e=Object(i.a)(["\n  color: ",";\n"]);return cm=function(){return e},e}function um(){var e=Object(i.a)(["\n  color: ",";\n"]);return um=function(){return e},e}function mm(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return mm=function(){return e},e}var sm,dm={placeholders:{name:Object(Yn.i18nMark)("Choose a name for the community"),summary:Object(Yn.i18nMark)("Please describe who might be interested in this community and what kind of collections it is likely to contain..."),icon:Object(Yn.i18nMark)("Enter the URL of an image to represent the community")}},fm=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(ul,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(hm,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(wo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(gm,null,h.createElement(pm,{fontWeight:"bold"},h.createElement(vm,null,h.createElement(ja.b,{placeholder:dm.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(dl,null,60-t.values.name.length),t.errors.name&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.name)))),h.createElement(bm,{mt:2},h.createElement(vm,null,h.createElement(ja.d,{placeholder:dm.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(dl,null,500-t.values.summary.length),t.errors.summary&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.summary)))))),h.createElement(ml,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Save"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},vm=Sn(fl)(mm()),pm=Sn(Pn.Text)(um(),(function(e){return e.theme.colors.mediumdark})),bm=Sn(Pn.Text)(cm(),(function(e){return e.theme.colors.mediumdark})),gm=Sn.div(lm(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(om()),(function(e){return e.theme.colors.mediumdark})),hm=Sn(Pn.Flex)(im(),k.a.lessThan("medium")(am())),xm=xi.object({name:xi.string().min(2).max(60).required(),summary:xi.string().max(500),icon:(sm=xi.mixed()).test.apply(sm,Object(w.a)(_l))}),Em=function(e){var n=e.done,t=e.communityId,r=Bc(t),a=r.community,i=r.edit,o=Object(h.useMemo)((function(){var e;return{icon:(null===a||void 0===a||null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:(null===a||void 0===a?void 0:a.name)||"",summary:(null===a||void 0===a?void 0:a.summary)||""}}),[a]),l=Object(er.a)({enableReinitialize:!0,onSubmit:function(e){return i({community:{name:e.name,summary:e.summary||void 0},icon:e.icon}).then(n)},validationSchema:xm,initialValues:o});return x.a.createElement(fm,{cancel:n,formik:l})};function ym(){var e=Object(i.a)(["\n    fragment DiscoverPageFeaturedCollectionInfo on Collection {\n  id\n  icon {\n    id\n    url\n  }\n  name\n}\n    "]);return ym=function(){return e},e}function Om(){var e=Object(i.a)(["\n    fragment DiscoverPageFeaturedCommunityInfo on Community {\n  id\n  icon {\n    id\n    url\n  }\n  name\n}\n    "]);return Om=function(){return e},e}var jm=U()(Om()),km=U()(ym());function wm(){var e=Object(i.a)(["\n    fragment CollectionFeature on Feature {\n  id\n  context {\n    ...DiscoverPageFeaturedCollectionInfo\n  }\n}\n    ",""]);return wm=function(){return e},e}var Cm=U()(wm(),km);function Im(){var e=Object(i.a)(['\n    query instanceFeaturedCollections {\n  instance {\n    featuredCollections @connection(key: "instanceFeaturedCollections") {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CollectionFeature\n      }\n    }\n  }\n}\n    ',"\n",""]);return Im=function(){return e},e}var Tm=U()(Im(),Zt,Cm);var Fm=function(e,n){return{query:Tm,variables:e,context:n}};function Sm(){var e=Object(i.a)(["\n    fragment CommunityFeature on Feature {\n  id\n  context {\n    ...DiscoverPageFeaturedCommunityInfo\n  }\n}\n    ",""]);return Sm=function(){return e},e}var Pm=U()(Sm(),jm);function Mm(){var e=Object(i.a)(['\n    query instanceFeaturedCommunities {\n  instance {\n    featuredCommunities @connection(key: "instanceFeaturedCommunities") {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityFeature\n      }\n    }\n  }\n}\n    ',"\n",""]);return Mm=function(){return e},e}var _m=U()(Mm(),Zt,Pm);function Lm(){var e=Object(i.a)(["\n    mutation addFeatured($contextId: String!) {\n  createFeature(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n      }\n      ... on Community {\n        id\n      }\n    }\n  }\n}\n    "]);return Lm=function(){return e},e}var Nm=U()(Lm());var Um=function(e){var n,t=q.c(Nm,n),r=Object(c.a)(t,2),i=r[0],l=r[1].loading,u=fF(Object(o.a)(a.a.mark((function n(){var t,r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isFeatured){n.next=5;break}if(t=e.actor,r=t.id,o=t.__typename,r&&o&&!l){n.next=4;break}return n.abrupt("return");case 4:return n.abrupt("return",i({variables:{contextId:r},refetchQueries:["Community"===o?(a={},c=void 0,{query:_m,variables:a,context:c}):Fm({})]}));case 5:case"end":return n.stop()}var a,c}),n)}))),[e]);return Object(h.useMemo)((function(){return{toggleFeatured:u}}),[u])};function Rm(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return Rm=function(){return e},e}var Am=function(e){var n=e.cancel,t=e.isFeatured,r=e.itemName,a=e.itemType,i=e.formik;return t?h.createElement(ul,null,h.createElement(vl,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Remove from Featured List"}))),h.createElement(pl,null,h.createElement(fl,null,h.createElement(Pn.Text,null,"Are you sure you want to remove ",r," ",a," from the featured list of the Discover Page?"))),h.createElement(ml,null,h.createElement(zm,{variant:"primary",isSubmitting:i.isSubmitting,isDisabled:i.isSubmitting,style:{marginLeft:"10px"},onClick:i.submitForm},h.createElement(Yn.Trans,{id:"Remove"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))):h.createElement(ul,null,h.createElement(vl,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Add To Featured List"}))),h.createElement(pl,null,h.createElement(fl,null,h.createElement(Pn.Text,null,"Are you sure you want to add ",r," ",a," to the featured list of the Discover Page?"))),h.createElement(ml,null,h.createElement(zm,{variant:"primary",isSubmitting:i.isSubmitting,isDisabled:i.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:i.submitForm},h.createElement(Yn.Trans,{id:"Add"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"}))))},zm=Sn(ot)(Rm()),Bm=function(e){var n=e.ctx,t=e.featureId,r=e.done,a=Object(h.useMemo)((function(){return t?{isFeatured:!0,featureId:t,__typename:n.__typename}:{isFeatured:!1,actor:n}}),[n,t]),i=Um(a).toggleFeatured,o=Object(er.a)({initialValues:{},onSubmit:function(){return i().then(r)}}),l=Object(h.useMemo)((function(){return{isFeatured:!!t,itemName:n.name,itemType:n.__typename||"",formik:o,cancel:r}}),[n.__typename,n.name,r,t,o]);return l&&x.a.createElement(Am,l)};function Dm(){var e=Object(i.a)(['\n    query allFlags($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  flags(limit: $limit, before: $before, after: $after) @connection(key: "allFlags") {\n    edges {\n      ...FlagPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return Dm=function(){return e},e}var $m=U()(Dm(),zi,Zt);var qm=function(e,n){return{query:$m,variables:e,context:n}};function Vm(){var e=Object(i.a)(["\n    mutation unflag($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Flag {\n      context {\n        ... on Collection {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Comment {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Community {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Resource {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on User {\n          userId: id\n          myFlag {\n            id\n          }\n        }\n      }\n    }\n  }\n}\n    "]);return Vm=function(){return e},e}function Qm(){var e=Object(i.a)(["\n    mutation flag($contextId: String!, $message: String!) {\n  createFlag(contextId: $contextId, message: $message) {\n    context {\n      ... on Collection {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Comment {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Community {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Resource {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on User {\n        userId: id\n        myFlag {\n          id\n        }\n      }\n    }\n  }\n}\n    "]);return Qm=function(){return e},e}var Wm=U()(Qm());var Hm=U()(Vm());var Jm=function(e){var n,t=q.c(Wm,n),r=Object(c.a)(t,2),i=r[0],l=r[1],u=function(e){return q.c(Hm,e)}(),m=Object(c.a)(u,2),s=m[0],d=m[1],f=l.loading||d.loading,v=fF(function(){var n=Object(o.a)(a.a.mark((function n(t){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&!e.myFlag&&!f){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",i({variables:{contextId:e.id,message:t},optimisticResponse:Km(e.__typename,e.id),refetchQueries:[qm({})]}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,f]),p=fF(Object(o.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&e.myFlag&&!f){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",ea(e.myFlag.id)?void 0:s({variables:{contextId:e.myFlag.id},optimisticResponse:Zm(e.__typename,e.id)}));case 3:case"end":return n.stop()}}),n)}))),[e,f]);return Object(h.useMemo)((function(){return{flag:v,unflag:p}}),[v,p])},Km=function(e,n){return{__typename:"RootMutationType",createFlag:{__typename:"Flag",context:{__typename:e,id:n,myFlag:{__typename:"Flag",id:"#"}}}}},Zm=function(e,n){return{__typename:"RootMutationType",delete:{__typename:"Flag",context:{__typename:e,id:n,myFlag:null}}}};function Gm(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return Gm=function(){return e},e}var Ym={placeholders:{flag:Object(Yn.i18nMark)("Please describe the reason for flagging the item")}},Xm=function(e){var n=e.cancel,t=e.flagFormik,r=e.isFlagged,a=e.unflagFormik,i=h.useContext(_a).i18n;return r?h.createElement(ul,null,h.createElement(vl,null,h.createElement(Pn.Heading,null,h.createElement(Yn.Trans,{id:"Unflag"}))),h.createElement(pl,null,h.createElement(fl,null,h.createElement(Yn.Trans,{id:"Are you sure you want to unflag this item?"}))),h.createElement(ml,null,h.createElement(ot,{variant:"primary",isSubmitting:a.isSubmitting,isDisabled:a.isSubmitting,onClick:a.submitForm,style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Unflag"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))):h.createElement(ul,null,h.createElement(vl,null,h.createElement(Pn.Heading,null,h.createElement(Yn.Trans,{id:"Report as inappropriate"}))),h.createElement(pl,{big:!0},h.createElement(fl,null,h.createElement(ja.d,{placeholder:i._(Ym.placeholders.flag),name:"reason",value:t.values.reason,onChange:t.handleChange}),h.createElement(dl,null,200-t.values.reason.length),t.errors.reason&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.reason)))),h.createElement(ml,null,h.createElement(es,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},h.createElement(Yn.Trans,{id:"Send"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"}))))},es=Sn(ot)(Gm()),ns=xi.object({reason:xi.string().max(200).required()}),ts=function(e){var n=e.done,t=e.ctx,r=Jm(t),a=r.unflag,i=r.flag,o=Object(er.a)({onSubmit:function(){a(),n()},initialValues:{}}),l=Object(er.a)({enableReinitialize:!0,onSubmit:function(e){i(e.reason),n()},validationSchema:ns,initialValues:{reason:""}});return x.a.createElement(Xm,{cancel:n,isFlagged:!!t.myFlag,flagFormik:l,unflagFormik:o})},rs=function(e){var n=e.communityId,t=e.basePath,r=Oa().isAdmin,a=qc(n),i=a.toggleJoin,o=a.community,l=a.canModify,u=a.isCreator,m=Object(er.a)({initialValues:{},onSubmit:i}),s=vF(),d=x.a.useReducer((function(e){return!e}),!1),f=Object(c.a)(d,2),v=f[0],p=f[1],b=Object(h.useReducer)((function(e){return!(!l||s())&&!e}),!1),g=Object(c.a)(b,2),E=g[0],y=g[1],O=o&&E?x.a.createElement(gl,{closeModal:y},x.a.createElement(Em,{communityId:o.id,done:y})):null,j=Object(h.useReducer)((function(e){return!s()&&!e}),!1),k=Object(c.a)(j,2),w=k[0],C=k[1],I=o&&w?x.a.createElement(gl,{closeModal:C},x.a.createElement(ts,{done:C,ctx:o})):null,T=Object(h.useReducer)((function(e){return!(!r||s())&&!e}),!1),F=Object(c.a)(T,2),S=F[0],P=F[1],M=o&&S?x.a.createElement(gl,{closeModal:P},x.a.createElement(Bm,{done:P,ctx:o,featureId:null})):null,_=Object(h.useMemo)((function(){var e;return o?{community:{basePath:t,status:xu.Loaded,canModify:l,isAdmin:r,isCreator:u,following:!!o.myFollow,isFlagged:!!o.myFlag,icon:(null===(e=o.icon)||void 0===e?void 0:e.url)||"",name:o.name,fullName:o.displayUsername,totalMembers:o.followerCount||0,summary:o.summary||"",toggleJoinFormik:m,addToFeatured:P,edit:y,flag:C,isOpenDropdown:v,toggleDropdown:p}}:{community:{status:xu.Loading}}}),[o,t,l,r,u,m,v]);return x.a.createElement(x.a.Fragment,null,O,I,M,x.a.createElement(rm,_))};function as(){var e=Object(i.a)(["\n    query activityPreview($activityId: String!) {\n  activity(activityId: $activityId) {\n    id\n    ...ActivityPreview\n  }\n}\n    ",""]);return as=function(){return e},e}var is=U()(as(),Qi);var os=function e(n){return n&&"Category"!==n.__typename&&"Intent"!==n.__typename&&"Organisation"!==n.__typename&&"SpatialThing"!==n.__typename&&"Taggable"!==n.__typename?"Flag"===n.__typename||"Follow"===n.__typename||"Like"===n.__typename?n.context?"Flag"===n.context.__typename||"Comment"===n.context.__typename||"Follow"===n.context.__typename||"Like"===n.context.__typename||"Resource"===n.context.__typename?null:e(n.context):null:n:null},ls=function(e,n){if(!e)return"";var t=os(e);if(!t)return"";var r=t.__typename;return"Flag"===e.__typename?"Flagged a ".concat(r):"Like"===e.__typename?"Starred a ".concat(r):"Follow"===e.__typename?"Followed a ".concat(r):"Resource"===e.__typename?"Added a ".concat(r):"Comment"===e.__typename?e.inReplyTo?"Replied to a discussion":"Started a discussion":n===de.Created?"Created a ".concat(r):n===de.Updated?"Updated a ".concat(r):"Acted on a ".concat(r)};function cs(){var e=Object(i.a)(["\n  align-self: flex-end;\n"]);return cs=function(){return e},e}function us(){var e=Object(i.a)(["\n  height: 100%;\n  resize: none;\n  background: ",";\n  flex: 1;\n  border: 0 !important;\n  &:focus {\n    outline: none;\n  }\n  font-family: 'Barlow', 'Open Sans', sans-serif !important;\n"]);return us=function(){return e},e}function ms(){var e=Object(i.a)(["\n  position: relative;\n  width: 100%;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  margin-bottom: 8px;\n  background: white;\n  flex: 1;\n"]);return ms=function(){return e},e}function ss(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  height: 200px;\n  flex-direction: column;\n"]);return ss=function(){return e},e}var ds=Sn(Pn.Flex)(ss()),fs=Sn(Pn.Flex)(ms(),(function(e){return e.theme.colors.border})),vs=Sn(ja.d)(us(),(function(e){return e.theme.colors.appInverse})),ps=Sn(Pn.Flex)(cs()),bs=function(e){var n=e.submit,t=e.defaultValue,r=void 0===t?"":t,a=e.keepTextOnSubmit,i=void 0!==a&&a,o=e.placeholder,l=void 0===o?"":o,u=Object(h.useRef)(null),m=Object(h.useState)(r),s=Object(c.a)(m,2),d=s[0],f=s[1],v=Object(h.useCallback)((function(){d&&(n(d),i||f(""))}),[d,i,n]);Object(h.useEffect)((function(){u.current&&(u.current.value=d)}),[d]);var p=Object(h.useCallback)((function(){if(u.current){var e=u.current.value;f(e)}}),[f]);return x.a.createElement(ds,null,x.a.createElement(fs,null,x.a.createElement(vs,{placeholder:l,ref:u,defaultValue:r,onInput:p})),x.a.createElement(ps,null,x.a.createElement(ot,{variant:"primary",sx:{cursor:d?"pointer":"default",textTransform:"capitalize"},onClick:v},x.a.createElement(Yn.Trans,{id:"Publish"}))))};function gs(){var e=Object(i.a)(["\n  border-bottom: ",";\n  height: 50px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 8px;\n  cursor: pointer;\n  background: ",";\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  a {\n    display: flex;\n    flex: 1;\n    text-decoration: none;\n  }\n"]);return gs=function(){return e},e}function hs(){var e=Object(i.a)(["\n  align-items: center;\n  a {\n    display: flex;\n    align-items: center;\n  }\n"]);return hs=function(){return e},e}function xs(){var e=Object(i.a)(["\n  margin-right: 8px;\n  .--rtl & {\n    margin-right: 0px;\n    margin-left: 8px;\n  }\n"]);return xs=function(){return e},e}function Es(){var e=Object(i.a)(["\n  //  border-bottom: ",";\n"]);return Es=function(){return e},e}function ys(){var e=Object(i.a)(["\n  // background: ",";\n"]);return ys=function(){return e},e}function Os(){var e=Object(i.a)(["\n  text-transform: capitalize;\n"]);return Os=function(){return e},e}var js={placeholders:{name:Object(Yn.i18nMark)("Post a reply")}},ks=function(e){var n=e.MainThread,t=e.Comments,r=e.communityId,a=e.communityName,i=e.communityIcon,o=e.Context,l=e.isCommunityContext,c=e.loadMoreComments,u=e.reply,m=h.useContext(_a).i18n;return h.createElement(Mt,null,h.createElement(_t,{mb:3},h.createElement(Lt,null,h.createElement(Nt,null,h.createElement(Pn.Box,{mb:2},!l&&h.createElement(Pn.Box,{p:2},o),h.createElement(Ts,null,n)),h.createElement(At,{className:"replies"},t),c&&h.createElement(ct,{LoadMoreFormik:c}),u&&h.createElement(Is,{my:3},h.createElement(bs,{placeholder:m._(js.placeholders.name),defaultValue:"",submit:function(e){u.replyFormik.setValues({replyMessage:e}),u.replyFormik.submitForm()}}))))),h.createElement(Hn,null,h.createElement(Cs,{mb:2,variant:"suptitle"},h.createElement(Yn.Trans,null,"Community")),h.createElement(ws,{id:r,name:a,icon:i})))},ws=function(e){var n=e.id,t=e.name,r=e.icon;return h.createElement(h.Fragment,null,h.createElement(Ps,null,h.createElement(Ss,null,h.createElement(mt.b,{to:"/communities/".concat(n)},h.createElement(Fs,null,h.createElement(Vl,{size:"s",src:r})),h.createElement(Pn.Text,{variant:"suptitle"},t)))))},Cs=Sn(Pn.Text)(Os()),Is=Sn(Pn.Box)(ys(),(function(e){return e.theme.colors.appInverse})),Ts=Sn(Pn.Box)(Es(),(function(e){return e.theme.colors.border})),Fs=Sn(Pn.Box)(xs()),Ss=Sn(Pn.Flex)(hs()),Ps=Sn(Pn.Flex)(gs(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}));function Ms(){var e=Object(i.a)(["\n    query commentPreview($commentId: String!) {\n  comment(commentId: $commentId) {\n    id\n    ...CommentPreview\n  }\n}\n    ",""]);return Ms=function(){return e},e}var _s=U()(Ms(),Ri);function Ls(){var e=Object(i.a)(["\n    mutation unlike($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Like {\n      context {\n        ... on Collection {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Comment {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Community {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Resource {\n          id\n          myLike {\n            id\n          }\n          likers {\n            totalCount\n          }\n        }\n        ... on User {\n          userId: id\n          myLike {\n            id\n          }\n          likerCount\n        }\n      }\n    }\n  }\n}\n    "]);return Ls=function(){return e},e}function Ns(){var e=Object(i.a)(["\n    mutation like($contextId: String!) {\n  createLike(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Comment {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Community {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Resource {\n        id\n        myLike {\n          id\n        }\n        likers {\n          totalCount\n        }\n      }\n      ... on User {\n        userId: id\n        myLike {\n          id\n        }\n        likerCount\n      }\n    }\n  }\n}\n    "]);return Ns=function(){return e},e}var Us=U()(Ns());var Rs=U()(Ls());var As=function(e,n,t,r){var i,l=q.c(Us,i),u=Object(c.a)(l,2),m=u[0],s=u[1],d=function(e){return q.c(Rs,e)}(),f=Object(c.a)(d,2),v=f[0],p=f[1],b=s.loading||p.loading,g=fF(Object(o.a)(a.a.mark((function i(){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&!b){a.next=2;break}return a.abrupt("return");case 2:if(n){a.next=6;break}return a.abrupt("return",m({variables:{contextId:e},optimisticResponse:zs(r,e,t||0)}));case 6:return a.abrupt("return",ea(n.id)?void 0:v({variables:{contextId:n.id},optimisticResponse:Bs(r,e,t||0)}));case 7:case"end":return a.stop()}}),i)}))),[e,n,b,r,t]);return Object(h.useMemo)((function(){return{toggleLike:g}}),[g])},zs=function(e,n,t){return{__typename:"RootMutationType",createLike:{__typename:"Like",context:Object(l.a)({__typename:e,id:n,myLike:{__typename:"Like",id:"#"}},"Resource"===e?{likes:{__typename:"LikesEdges",totalCount:t+1}}:{likerCount:t+1})}}},Bs=function(e,n,t){return{__typename:"RootMutationType",delete:{__typename:"Like",context:Object(l.a)({__typename:e,id:n,myLike:null},"Resource"===e?{likes:{__typename:"LikesEdges",totalCount:t-1}}:{likerCount:t-1})}}};function Ds(){var e=Object(i.a)(['\n    query myInboxActivities($after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  me @connection(key: "myInboxActivities") {\n    user {\n      id\n      inbox(after: $after, before: $before, limit: $limit) {\n        totalCount\n        pageInfo {\n          ...FullPageInfo\n        }\n        edges {\n          ...MyInboxActivity\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return Ds=function(){return e},e}function $s(){var e=Object(i.a)(["\n    fragment MyInboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return $s=function(){return e},e}var qs=U()($s(),Qi),Vs=U()(Ds(),Zt,qs);function Qs(){var e=Object(i.a)(['\n    query threadComments($threadId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  thread(threadId: $threadId) @connection(key: "threadComments", filter: ["threadId"]) {\n    comments(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommentPreview\n      }\n    }\n  }\n}\n    ',"\n",""]);return Qs=function(){return e},e}var Ws=U()(Qs(),Zt,Ri);function Hs(){var e=Object(i.a)(["\n    mutation reply($comment: CommentInput!, $inReplyToCommentId: String!, $threadId: String!) {\n  createReply(comment: $comment, inReplyToId: $inReplyToCommentId, threadId: $threadId) {\n    ...CommentPreview\n  }\n}\n    ",""]);return Hs=function(){return e},e}var Js=U()(Hs(),Ri);var Ks=function(e,n,t){var r,i=q.c(Js,r),u=Object(c.a)(i,2),m=u[0],s=u[1].loading,d=fF(function(){var r=Object(o.a)(a.a.mark((function r(i){var o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!s&&e&&e.thread){r.next=2;break}return r.abrupt("return");case 2:return o=e.thread.id,r.abrupt("return",m({variables:{threadId:o,inReplyToCommentId:e.id,comment:{content:i}},context:b({successMsg:function(){return"Sent reply ".concat(t?"@".concat(t," "):""," correctly")}}),refetchQueries:[Zi({limit:Ee}),(a={limit:Ee},c=void 0,{query:Vs,variables:a,context:c})].concat(Object(w.a)(n?[Ec({communityId:n,limit:Ee})]:[])),update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReply;if(r)try{var a,i=e.readQuery({query:Ws,variables:{threadId:o,limit:Ee}});if(!(null===i||void 0===i||null===(a=i.thread)||void 0===a?void 0:a.comments)||i.thread.comments.pageInfo.hasNextPage)return;var c=[].concat(Object(w.a)(i.thread.comments.edges),[r]),u=Object(l.a)(Object(l.a)({},i),{},{thread:Object(l.a)(Object(l.a)({},i.thread),{},{comments:Object(l.a)(Object(l.a)({},i.thread.comments),{},{edges:c})})});e.writeQuery({data:u,query:Ws,variables:{threadId:o,limit:Ee}})}catch(m){console.warn(m)}}}));case 4:case"end":return r.stop()}var a,c}),r)})));return function(e){return r.apply(this,arguments)}}(),[s,n,t]);return Object(h.useMemo)((function(){return{reply:d}}),[d])},Zs=function(e){var n,t,r,a,i,o,l,c,u,m,s,d,f,v,p,b=(p={variables:{commentId:e}},q.d(_s,p)),g=As(null===(n=b.data)||void 0===n||null===(t=n.comment)||void 0===t?void 0:t.id,null===(r=b.data)||void 0===r||null===(a=r.comment)||void 0===a?void 0:a.myLike,null===(i=b.data)||void 0===i||null===(o=i.comment)||void 0===o?void 0:o.likerCount,"Comment").toggleLike,x=null===(l=b.data)||void 0===l||null===(c=l.comment)||void 0===c||null===(u=c.thread)||void 0===u?void 0:u.context,E="Resource"===(null===x||void 0===x?void 0:x.__typename)?null===(m=x.collection)||void 0===m?void 0:m.community:"Collection"===(null===x||void 0===x?void 0:x.__typename)?x.community:"Community"===(null===x||void 0===x?void 0:x.__typename)?x:void 0,y=!!(null===E||void 0===E?void 0:E.myFollow),O=Ks(null===(s=b.data)||void 0===s?void 0:s.comment,null===E||void 0===E?void 0:E.id,null===(d=b.data)||void 0===d||null===(f=d.comment)||void 0===f||null===(v=f.creator)||void 0===v?void 0:v.userName).reply;return Object(h.useMemo)((function(){var e;return{comment:null===(e=b.data)||void 0===e?void 0:e.comment,community:E,toggleLike:g,reply:O,canReply:y}}),[b,E,g,O,y])},Gs=t(915),Ys=t(916),Xs=(t(717),t(165)),ed=t.n(Xs);function nd(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n  font-size: "," !important;\n  letter-spacing: 0 !important;\n  font-family: "," !important;\n  &.markdown-body {\n    box-sizing: border-box;\n    min-width: 200px;\n    max-width: 568px;\n  }\n"]);return nd=function(){return e},e}var td=Sn(Pn.Text)(nd(),(function(e){return e.theme.colors.dark}),cn.s2,(function(e){return e.theme.fontFamily})),rd=function(e){var n=e.content;return x.a.createElement(td,{className:"markdown-body",dangerouslySetInnerHTML:{__html:ed.a.sanitize(n)},variant:"text"})};function ad(){var e=Object(i.a)(["\n  background: ",";\n  a {\n    text-decoration: none\n    &:hover {\n      text-decoration: none;\n    }\n  }\n"]);return ad=function(){return e},e}function id(){var e=Object(i.a)(["\n  font-size: ",";\n"]);return id=function(){return e},e}function od(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return od=function(){return e},e}function ld(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return ld=function(){return e},e}function cd(){var e=Object(i.a)(["\n  // border-top: ",";\n  margin-top: 16px;\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n  margin-top: 16px;\n"]);return cd=function(){return e},e}function ud(){var e=Object(i.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return ud=function(){return e},e}var md=function(e){var n=e.content,t=e.like,r=e.url,a=e.isFlagged,i=e.hideActions,o=e.isDropdownOpen,l=e.toggleDropdown,c=e.flag;return x.a.createElement(bd,null,x.a.createElement(rd,{content:n}),i?x.a.createElement(dd,{mt:2},x.a.createElement(Pn.Box,null,x.a.createElement(sd,null,x.a.createElement(fd,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},x.a.createElement(vd,null,x.a.createElement(Kl.a,{strokeWidth:"1",size:"18"})),x.a.createElement(pd,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",x.a.createElement(Yn.Trans,{id:"Star"}))),x.a.createElement(fd,{onClick:l,sx:{position:"relative"}},x.a.createElement(vd,null,x.a.createElement(Gs.a,{className:"hover",size:18})),x.a.createElement(pd,{variant:"text",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"More"})),o&&x.a.createElement(ic,{orientation:"bottom",close:l},x.a.createElement(lc,{onClick:c},x.a.createElement(Mu.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},a?x.a.createElement(Yn.Trans,{id:"Unflag this comment"}):x.a.createElement(Yn.Trans,{id:"Flag this comment"})))))))):x.a.createElement(dd,{mt:2},x.a.createElement(Pn.Box,null,x.a.createElement(sd,null,x.a.createElement(fd,null,x.a.createElement(mt.c,{to:r},x.a.createElement(vd,null,x.a.createElement(Ys.a,{className:"hover",strokeWidth:"1",color:"rgba(0,0,0,.4)",size:"18"})),x.a.createElement(pd,{ml:1,variant:"text",sx:{textTransform:"capitalize"}},x.a.createElement(Yn.Trans,{id:"Reply"})))),x.a.createElement(fd,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},x.a.createElement(vd,null,x.a.createElement(Kl.a,{strokeWidth:"1",size:"18"})),x.a.createElement(pd,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",x.a.createElement(Yn.Trans,{id:"Star"}))),x.a.createElement(fd,{onClick:l,sx:{position:"relative"}},x.a.createElement(vd,null,x.a.createElement(Gs.a,{className:"hover",size:18})),x.a.createElement(pd,{variant:"text",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"More"})),o&&x.a.createElement(ic,{orientation:"bottom",close:l},x.a.createElement(lc,{onClick:c},x.a.createElement(Mu.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},a?x.a.createElement(Yn.Trans,{id:"Unflag this comment"}):x.a.createElement(Yn.Trans,{id:"Flag this comment"})))))))))},sd=Sn(Pn.Flex)(ud()),dd=Sn(Pn.Box)(cd(),(function(e){return e.theme.colors.border})),fd=Sn(Pn.Flex)(ld(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(tt.b)("0.1",e.theme.colors.secondary):Object(tt.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),cn.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),vd=Sn(Pn.Box)(od()),pd=Sn(Pn.Text)(id(),cn.s1),bd=Sn(Pn.Box)(ad(),(function(e){return e.theme.colors.appInverse}));function gd(){var e=Object(i.a)(["\n  background: ",";\n"]);return gd=function(){return e},e}function hd(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return hd=function(){return e},e}function xd(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return xd=function(){return e},e}function Ed(){var e=Object(i.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n"]);return Ed=function(){return e},e}function yd(){var e=Object(i.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return yd=function(){return e},e}function Od(){var e=Object(i.a)(["\n  color: ",";\n  img {\n    width: 100%;\n  }\n"]);return Od=function(){return e},e}function jd(){var e=Object(i.a)(["\n  font-size: ",";\n"]);return jd=function(){return e},e}var kd=function(e){var n=e.isDropdownOpen,t=e.toggleDropdown,r=e.flag,a=e.content,i=e.like,o=e.isFlagged,l=e.hideActions;return x.a.createElement(Pn.Box,null,x.a.createElement(Pd,null,x.a.createElement(Cd,{dangerouslySetInnerHTML:{__html:ed.a.sanitize(a)},sx:{fontSize:"24px"},variant:"text",mb:2}),x.a.createElement(Td,{mt:2},l?null:x.a.createElement(Pn.Box,null,x.a.createElement(Id,null,x.a.createElement(Fd,{liked:!!i.iLikeIt,onClick:i.toggleLikeFormik.submitForm},x.a.createElement(Sd,null,x.a.createElement(Kl.a,{strokeWidth:"1",size:"18"})),x.a.createElement(wd,{variant:"text",sx:{textTransform:"capitalize"},ml:1},i.totalLikes+" "," ",x.a.createElement(Yn.Trans,{id:"Star"}))),x.a.createElement(Fd,{onClick:t,sx:{position:"relative"}},x.a.createElement(Sd,null,x.a.createElement(Gs.a,{className:"hover",size:18})),x.a.createElement(wd,{variant:"text",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"More"})),n&&x.a.createElement(ic,{orientation:"bottom",close:t},x.a.createElement(lc,{onClick:r},x.a.createElement(Mu.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},o?x.a.createElement(Yn.Trans,{id:"Unflag this comment"}):x.a.createElement(Yn.Trans,{id:"Flag this comment"}))))))))))},wd=Sn(Pn.Text)(jd(),cn.s1),Cd=Sn(Pn.Text)(Od(),(function(e){return e.theme.colors.dark})),Id=Sn(Pn.Flex)(yd()),Td=Sn(Pn.Box)(Ed()),Fd=Sn(Pn.Flex)(xd(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(tt.b)("0.1",e.theme.colors.secondary):Object(tt.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),cn.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Sd=Sn(Pn.Box)(hd()),Pd=Sn(Pn.Box)(gd(),(function(e){return e.theme.colors.appInverse})),Md=function(e){var n=e.commentId,t=e.mainComment,r=e.hideActions,a=Zs(n),i=a.comment,o=a.toggleLike,l=Object(er.a)({initialValues:{},onSubmit:o}),u=Object(h.useReducer)((function(e){return!e}),!1),m=Object(c.a)(u,2),s=m[0],d=m[1],f=vF(),v=Object(h.useReducer)((function(e){return!f()&&!e}),!1),p=Object(c.a)(v,2),b=p[0],g=p[1],E=b&&i?x.a.createElement(gl,{closeModal:g},x.a.createElement(ts,{done:g,ctx:i})):null,y=Object(h.useMemo)((function(){return i?{url:i.thread?"/thread/".concat(i.thread.id):"",content:i.content,like:{iLikeIt:!!i.myLike,totalLikes:i.likerCount||0,toggleLikeFormik:l},isFlagged:!!i.myFlag,hideActions:!!r,isDropdownOpen:s,toggleDropdown:d,flag:g}:null}),[i,r,s,l]);return y&&x.a.createElement(x.a.Fragment,null,E,t?x.a.createElement(kd,y):x.a.createElement(md,y))};function _d(){var e=Object(i.a)(["\n    query threadPreview($threadId: String!) {\n  thread(threadId: $threadId) {\n    id\n    ...ThreadPreview\n  }\n}\n    ",""]);return _d=function(){return e},e}var Ld=U()(_d(),ro);var Nd,Ud=function(e){var n,t,r,a,i,o,l,c,u,m,s=null===(n=(m={variables:{threadId:e}},q.d(Ld,m)).data)||void 0===n?void 0:n.thread,d="Resource"===(null===s||void 0===s||null===(t=s.context)||void 0===t?void 0:t.__typename)?null===s||void 0===s||null===(r=s.context.collection)||void 0===r?void 0:r.community:"Collection"===(null===s||void 0===s||null===(a=s.context)||void 0===a?void 0:a.__typename)?null===s||void 0===s?void 0:s.context.community:"Community"===(null===s||void 0===s||null===(i=s.context)||void 0===i?void 0:i.__typename)?null===s||void 0===s?void 0:s.context:void 0,f=!!(null===d||void 0===d?void 0:d.myFollow),v=Ks(null===s||void 0===s||null===(o=s.comments)||void 0===o?void 0:o.edges[0],null===d||void 0===d?void 0:d.id,null===s||void 0===s||null===(l=s.comments)||void 0===l||null===(c=l.edges[0])||void 0===c||null===(u=c.creator)||void 0===u?void 0:u.userName).reply;return Object(h.useMemo)((function(){var e,n,t=null===s||void 0===s||null===(e=s.comments)||void 0===e?void 0:e.edges[0],r=null===s||void 0===s||null===(n=s.comments)||void 0===n?void 0:n.totalCount,a=null===s||void 0===s?void 0:s.context,i=null===s||void 0===s?void 0:s.lastActivity;return{mainComment:t,context:a,reply:v,canReply:f,lastActivity:i,totalReplies:r&&r-1,totalComments:(null===s||void 0===s?void 0:s.comments)?s.comments.totalCount-1:0}}),[f,v,s])},Rd=function(e){var n="",t="",r="",a="";if(e&&"User"!==e.__typename){var i,o=function(e){return e?"Community"===e.__typename?e:"Collection"===e.__typename?e.community:"Resource"===e.__typename?null===(n=e.collection)||void 0===n?void 0:n.community:"Comment"===e.__typename?e.thread&&e.thread.context&&("Flag"===e.thread.context.__typename?null:"Resource"===e.thread.context.__typename?null===(t=e.thread.context.collection)||void 0===t?void 0:t.community:"Collection"===e.thread.context.__typename?e.thread.context.community:"Community"===e.thread.context.__typename?e.thread.context:null):null:null;var n,t}(e);if(o)n=ET.getPath({communityId:o.id,tab:void 0},void 0),t=o.name,r=o.id,a=(null===(i=o.icon)||void 0===i?void 0:i.url)||""}return{communityLink:n,communityName:t,communityId:r,communityIcon:a}};function Ad(){var e=Object(i.a)(["\n  position: relative;\n  padding: 16px;\n  word-wrap: break-word;\n  ",";\n  transition: background 0.5s ease;\n  margin-top: 0\n  z-index: 10;\n  position: relative;\n  border-radius: 4px;\n  background: ",";\n  margin-bottom: 8px;\n  a {\n    text-decoration: none;\n    &:hover {\n      text-decoration: underline\n    }\n  }\n\n"]);return Ad=function(){return e},e}function zd(){var e=Object(i.a)([""]);return zd=function(){return e},e}function Bd(){var e=Object(i.a)(["\n  width: 100%;\n  margin-top: -4px;\n"]);return Bd=function(){return e},e}function Dd(){var e=Object(i.a)(["\n  align-items: stretch;\n"]);return Dd=function(){return e},e}function $d(){var e=Object(i.a)(["\n  font-weight: 600;\n  color: ",";\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  a {\n    font-weight: 800;\n    display: flex;\n    text-decoration: none;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n    color: "," !important;\n  }\n"]);return $d=function(){return e},e}function qd(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  font-size: ",";\n"]);return qd=function(){return e},e}function Vd(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return Vd=function(){return e},e}function Qd(){var e=Object(i.a)([""]);return Qd=function(){return e},e}function Wd(){var e=Object(i.a)(["\n  color: ",";\n  a {\n    font-weight: 600;\n    color: ",";\n  }\n"]);return Wd=function(){return e},e}function Hd(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  font-size: ",";\n"]);return Hd=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(Nd||(Nd={}));var Jd=function(e){if(e.status===Nd.Loading)return x.a.createElement(Yn.Trans,{id:"loading..."});var n=e.event.toLowerCase(),t=n.includes("like")||n.includes("flag"),r=t?Zd:Kd,a=t&&n.includes("commented")||n.includes("discussion")||n.includes("comment")?e.threadUrl:void 0;return x.a.createElement(lf,{mb:2},e.actor&&x.a.createElement(r,{actor:e.actor,createdAt:e.createdAt,threadUrl:a,event:e.event,commentActor:n.includes("commented")?e.commentActor:void 0,communityLink:e.communityLink,communityName:e.communityName}),x.a.createElement(Xd,{mt:2},x.a.createElement(of,null,e.preview)))},Kd=function(e){var n=e.actor,t=e.createdAt,r=e.event,a=e.threadUrl,i=e.communityName,o=e.communityLink;return x.a.createElement(rf,null,n&&x.a.createElement(x.a.Fragment,null,x.a.createElement(Vl,{initials:n.name,src:n.icon,variant:"avatar"}),x.a.createElement(af,{ml:2},x.a.createElement(Pn.Flex,{mt:1,alignItems:"center"},x.a.createElement(Pn.Flex,{flex:1},x.a.createElement(tf,null,x.a.createElement(mt.b,{to:n.link},n.name)),x.a.createElement(Yd,{sx:{textTransform:"lowercase"},variant:"text",ml:1},a?x.a.createElement(mt.b,{to:a},r):r))),x.a.createElement(Pn.Flex,{sx:{marginTop:"2px"},alignItems:"center"},x.a.createElement(nf,null,ka.DateTime.fromSQL(t).toRelative()),x.a.createElement(ef,{mx:1},"\xb7"),x.a.createElement(Gd,{to:o},i)))))},Zd=function(e){var n=e.actor,t=e.commentActor,r=e.event,a=e.threadUrl;return x.a.createElement(rf,{sx:{alignItems:"center !important"}},x.a.createElement(Vl,{size:"s",initials:t?t.name:n.name,src:t?t.icon:n.icon,variant:"avatar"}),x.a.createElement(af,{sx:{marginTop:0},ml:2},x.a.createElement(Pn.Flex,{alignItems:"center"},x.a.createElement(Pn.Flex,{flex:1},x.a.createElement(tf,null,x.a.createElement(mt.b,{to:t?t.link:n.link},t?t.name:n.name)),x.a.createElement(Yd,{sx:{textTransform:"lowercase"},variant:"text",ml:1},a?x.a.createElement(mt.b,{to:a},r):r)))))},Gd=Sn(mt.b)(Hd(),(function(e){return e.theme.colors.mediumdark}),cn.s1),Yd=Sn(Pn.Text)(Wd(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.darker})),Xd=Sn(Pn.Box)(Qd()),ef=Sn(Pn.Text)(Vd(),(function(e){return e.theme.colors.mediumdark})),nf=Sn(Pn.Text)(qd(),(function(e){return e.theme.colors.mediumdark}),cn.s1),tf=Sn(Pn.Text)($d(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),rf=Sn(Pn.Flex)(Dd()),af=Sn(Pn.Box)(Bd()),of=Sn(Pn.Box)(zd()),lf=Sn(Pn.Box)(Ad(),Object(tt.a)(),(function(e){return e.theme.colors.appInverse}));function cf(){var e=Object(i.a)(["\n    fragment HeroUserUserData on User {\n  id\n  image {\n    id\n    url\n  }\n  icon {\n    id\n    url\n  }\n  displayUsername\n  location\n  summary\n  name\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  followerCount\n}\n    "]);return cf=function(){return e},e}var uf=U()(cf());function mf(){var e=Object(i.a)(["\n    fragment UserPageUserData on User {\n  id\n  userId: id\n  collectionFollows {\n    totalCount\n  }\n  communityFollows {\n    totalCount\n  }\n  userFollows {\n    totalCount\n  }\n  outbox {\n    totalCount\n  }\n  website\n  userName: name\n  ...HeroUserUserData\n}\n    ",""]);return mf=function(){return e},e}function sf(){var e=Object(i.a)(["\n    fragment UserPageActivities on Activity {\n  id\n}\n    "]);return sf=function(){return e},e}var df=U()(sf()),ff=U()(mf(),uf);function vf(){var e=Object(i.a)(['\n    query userOutboxActivities($userId: String!, $after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  user(userId: $userId) @connection(key: "userOutboxActivities", filter: ["userId"]) {\n    id\n    outbox(after: $after, before: $before, limit: $limit) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...UserOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return vf=function(){return e},e}function pf(){var e=Object(i.a)(["\n    fragment UserOutboxActivity on Activity {\n  ...UserPageActivities\n  ...ActivityPreview\n}\n    ","\n",""]);return pf=function(){return e},e}var bf=U()(pf(),df,Qi),gf=U()(vf(),Zt,bf);var hf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(gf,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.outbox,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.outbox)&&(null===(a=e.user)||void 0===a?void 0:a.outbox)?Object(l.a)(Object(l.a)({},i),{},{user:Object(l.a)(Object(l.a)({},i.user),{},{outbox:r({prev:e.user.outbox,fetched:i.user.outbox})})}):e}})}));return Object(h.useMemo)((function(){return{activitiesPage:i}}),[i])};function xf(){var e=Object(i.a)(['\n    query userFollowedCollections($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedCollections", filter: ["userId"]) {\n    id\n    collectionFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Collection {\n            ...UserFollowedCollection\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return xf=function(){return e},e}function Ef(){var e=Object(i.a)(["\n    fragment UserFollowedCollection on Collection {\n  ...CollectionPreview\n}\n    ",""]);return Ef=function(){return e},e}var yf=U()(Ef(),Jt),Of=U()(xf(),Zt,yf);var jf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(Of,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.collectionFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.collectionFollows)&&(null===(a=e.user)||void 0===a?void 0:a.collectionFollows)?Object(l.a)(Object(l.a)({},i),{},{user:Object(l.a)(Object(l.a)({},i.user),{},{collectionFollows:r({prev:e.user.collectionFollows,fetched:i.user.collectionFollows})})}):e}})}));return Object(h.useMemo)((function(){return{followedCollectionsPage:i}}),[i])};function kf(){var e=Object(i.a)(['\n    query userFollowedCommunities($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedCommunities", filter: ["userId"]) {\n    id\n    communityFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Community {\n            ...UserFollowedCommunity\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return kf=function(){return e},e}function wf(){var e=Object(i.a)(["\n    fragment UserFollowedCommunity on Community {\n  ...CommunityPreview\n}\n    ",""]);return wf=function(){return e},e}var Cf=U()(wf(),Wt),If=U()(kf(),Zt,Cf);var Tf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(If,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.communityFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.communityFollows)&&(null===(a=e.user)||void 0===a?void 0:a.communityFollows)?Object(l.a)(Object(l.a)({},i),{},{user:Object(l.a)(Object(l.a)({},i.user),{},{communityFollows:r({prev:e.user.communityFollows,fetched:i.user.communityFollows})})}):e}})}));return Object(h.useMemo)((function(){return{followedCommunitiesPage:i}}),[i])};function Ff(){var e=Object(i.a)(['\n    query userLikes($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) {\n    id\n    likes(limit: $limit, before: $before, after: $after) @connection(key: "userLikes") {\n      edges {\n        ...LikePreview\n      }\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n    }\n  }\n}\n    ',"\n",""]);return Ff=function(){return e},e}var Sf=U()(Ff(),Di,Zt);var Pf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(Sf,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.likes,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.likes)&&(null===(a=e.user)||void 0===a?void 0:a.likes)?Object(l.a)(Object(l.a)({},i),{},{user:Object(l.a)(Object(l.a)({},i.user),{},{likes:r({prev:e.user.likes,fetched:i.user.likes})})}):e}})}));return Object(h.useMemo)((function(){return{likesPage:i}}),[i])};function Mf(){var e=Object(i.a)(['\n    query userFollowedUsers($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedUsers", filter: ["userId"]) {\n    id\n    userFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on User {\n            ...UserFollowedUser\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return Mf=function(){return e},e}function _f(){var e=Object(i.a)(["\n    fragment UserFollowedUser on User {\n  ...UserPreview\n}\n    ",""]);return _f=function(){return e},e}var Lf=U()(_f(),oa),Nf=U()(Mf(),Zt,Lf);var Uf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:Ee}},q.d(Nf,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.userFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.userFollows)&&(null===(a=e.user)||void 0===a?void 0:a.userFollows)?Object(l.a)(Object(l.a)({},i),{},{user:Object(l.a)(Object(l.a)({},i.user),{},{userFollows:r({prev:e.user.userFollows,fetched:i.user.userFollows})})}):e}})}));return Object(h.useMemo)((function(){return{followedUsersPage:i}}),[i])};function Rf(){var e=Object(i.a)(["\n    query userData($userId: String!) {\n  user(userId: $userId) {\n    ...UserPageUserData\n  }\n}\n    ",""]);return Rf=function(){return e},e}var Af=U()(Rf(),ff);var zf,Bf=function(e){var n,t,r=(t={variables:{userId:e}},q.d(Af,t)),a=Oa(),i=a.me,o=a.isAdmin,l=null===(n=r.data)||void 0===n?void 0:n.user,c=pF(l).toggleFollow;return Object(h.useMemo)((function(){var e,n,t,a,l,u=null===(e=r.data)||void 0===e?void 0:e.user,m=null===u||void 0===u||null===(n=u.collectionFollows)||void 0===n?void 0:n.totalCount,s=null===u||void 0===u||null===(t=u.communityFollows)||void 0===t?void 0:t.totalCount,d=null===u||void 0===u||null===(a=u.userFollows)||void 0===a?void 0:a.totalCount,f=null===u||void 0===u||null===(l=u.outbox)||void 0===l?void 0:l.totalCount;return{isMe:!(!i||!u||i.user.id!==u.id),isAdmin:o,user:u,toggleFollow:c,totalCollections:m,totalCommunities:s,totalUsers:d,totalActivities:f}}),[i,r,c,o])};function Df(){var e=Object(i.a)(["\n  & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return Df=function(){return e},e}function $f(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  border-radius: 6px;\n"]);return $f=function(){return e},e}function qf(){var e=Object(i.a)(["\n  width: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: ",";\n  border: 3px solid ",";\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 16px;\n"]);return qf=function(){return e},e}function Vf(){var e=Object(i.a)(["\n  padding: 24px;\n  padding-top: 0;\n  z-index: 9999;\n  position: relative;\n  margin-top: -60px;\n  padding-bottom: 0;\n"]);return Vf=function(){return e},e}function Qf(){var e=Object(i.a)(["\n  height: 250px;\n  margin: -4px;\n  background: ",';\n  background-image: url("','");\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  position: relative;\n']);return Qf=function(){return e},e}function Wf(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n    .--rtl & {\n      margin-left: 8px;\n      margin-right: 0px;\n    }\n  }\n"]);return Wf=function(){return e},e}function Hf(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return Hf=function(){return e},e}function Jf(){var e=Object(i.a)(["\n  background: ",";\n  padding-bottom: 16px;\n"]);return Jf=function(){return e},e}function Kf(){var e=Object(i.a)(["\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n"]);return Kf=function(){return e},e}function Zf(){var e=Object(i.a)(["\n  justify-content: space-between;\n  ",";\n"]);return Zf=function(){return e},e}function Gf(){var e=Object(i.a)(["\n  color: ",";\n"]);return Gf=function(){return e},e}function Yf(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Yf=function(){return e},e}function Xf(){var e=Object(i.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return Xf=function(){return e},e}function ev(){var e=Object(i.a)(["\n  padding: 1px 8px;\n  border: 1px solid ",";\n  border-radius: 2px;\n  color: ",";\n  display: inline-block;\n"]);return ev=function(){return e},e}function nv(){var e=Object(i.a)(["\n      right: initial;\n      left: 10px;\n    "]);return nv=function(){return e},e}function tv(){var e=Object(i.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n\n    ",";\n  }\n"]);return tv=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(zf||(zf={}));var rv=function(e){return e.status===zf.Loading?null:x.a.createElement(mv,{p:1},x.a.createElement(bv,null,x.a.createElement(fv,{src:e.image}),x.a.createElement(uv,null,x.a.createElement(vv,null,x.a.createElement(pv,{style:{backgroundImage:'url("'.concat(e.icon,'")')}})),x.a.createElement(lv,{mr:2},e.me?x.a.createElement(x.a.Fragment,null):x.a.createElement(x.a.Fragment,null,x.a.createElement(ot,{mr:2,variant:e.following?"danger":"primary",isSubmitting:e.toggleFollowFormik.isSubmitting,isDisabled:e.toggleFollowFormik.isSubmitting,onClick:e.toggleFollowFormik.submitForm},e.following?x.a.createElement(Yn.Trans,{id:"Unfollow"}):x.a.createElement(Yn.Trans,{id:"Follow"})),x.a.createElement(ov,null,x.a.createElement(Pu.a,{size:20,onClick:e.toggleDropdown}),e.isOpenDropdown&&x.a.createElement(av,null,x.a.createElement(ic,{orientation:"bottom",close:e.toggleDropdown},x.a.createElement(lc,{onClick:e.flag},x.a.createElement(Mu.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},e.isFlagged?x.a.createElement(Yn.Trans,{id:"Unflag this user"}):x.a.createElement(Yn.Trans,{id:"Flag this user"})," ")))))))),x.a.createElement(gv,{ml:3},x.a.createElement(cv,{sx:{fontSize:"18px"},mt:2,variant:"heading",fontWeight:"bold"},e.name),x.a.createElement(sv,{mt:1},"@",e.displayUsername,e.me&&e.isAdmin&&x.a.createElement(iv,{ml:2},"Admin")),x.a.createElement(Pn.Box,{mt:2},x.a.createElement(rd,{content:e.summary})),e.location?x.a.createElement(dv,{mt:2},x.a.createElement("span",null,x.a.createElement(zl.a,{strokeWidth:1,size:20})),e.location):null)))},av=Sn(Pn.Box)(tv(),k.a.lessThan("860px")(nv())),iv=Sn(Pn.Box)(ev(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),ov=Sn(Pn.Box)(Xf(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),lv=Sn(Pn.Flex)(Yf()),cv=Sn(Pn.Text)(Gf(),(function(e){return e.theme.colors.darker})),uv=Sn(Pn.Flex)(Zf(),k.a.lessThan("860px")(Kf())),mv=Sn(Pn.Box)(Jf(),(function(e){return e.theme.colors.appInverse})),sv=Sn(Pn.Text)(Hf(),(function(e){return e.theme.colors.mediumdark})),dv=Sn(Pn.Flex)(Wf(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),fv=Sn.div(Qf(),(function(e){return e.theme.colors.light}),(function(e){return e.src?e.src:e.theme.colors.light})),vv=Sn.div(Vf()),pv=Sn.div(qf(),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.appInverse})),bv=Sn.div($f()),gv=Sn(Pn.Box)(Df()),hv=function(e){var n=e.userId,t=Bf(n),r=t.user,a=t.isAdmin,i=t.isMe,o=t.toggleFollow,u=Object(h.useReducer)((function(e){return!e}),!1),m=Object(c.a)(u,2),s=m[0],d=m[1],f=Object(er.a)({initialValues:{},onSubmit:o}),v=vF(),p=Object(h.useReducer)((function(e){return!v()&&!e}),!1),b=Object(c.a)(p,2),g=b[0],E=b[1],y=r&&g?x.a.createElement(gl,{closeModal:E},x.a.createElement(ts,{done:E,ctx:r})):null,O=Object(h.useMemo)((function(){var e,n;if(!r)return{status:zf.Loading};var t={status:zf.Loaded,displayUsername:r.displayUsername,icon:(null===(e=r.icon)||void 0===e?void 0:e.url)||"",image:(null===(n=r.image)||void 0===n?void 0:n.url)||"",location:r.location||"",name:r.name||"",summary:r.summary||"",isFlagged:!!r.myFlag};return i?Object(l.a)({isAdmin:a,me:i},t):Object(l.a)({flag:E,me:i,following:!!r.myFollow,isOpenDropdown:s,toggleDropdown:d,toggleFollowFormik:f},t)}),[i,r,f,a,s]);return x.a.createElement(x.a.Fragment,null,y,x.a.createElement(rv,O))};function xv(){var e=Object(i.a)(["\n    query communityPreview($communityId: String!) {\n  community(communityId: $communityId) {\n    id\n    ...CommunityPreview\n  }\n}\n    ",""]);return xv=function(){return e},e}var Ev=U()(xv(),Wt);var yv=function(e){var n,t,r,a=(r={variables:{communityId:e}},q.d(Ev,r)),i=Oa().me,o=null===(n=a.data)||void 0===n?void 0:n.community,l=pF(null===(t=a.data)||void 0===t?void 0:t.community).toggleFollow,c=!!i&&!!(null===o||void 0===o?void 0:o.creator)&&i.user.id===o.creator.id;return Object(h.useMemo)((function(){var e;return{community:null===(e=a.data)||void 0===e?void 0:e.community,toggleJoin:l,isCreator:c}}),[a,l,c])},Ov=t(918);function jv(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n  word-break: break-all;\n"]);return jv=function(){return e},e}function kv(){var e=Object(i.a)(["\n  position: relative;\n  div {\n    width: 100%;\n    heigth: 150px;\n    background-repeat: no-repeat;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n  &:hover {\n    & span {\n      display: block;\n    }\n  }\n"]);return kv=function(){return e},e}function wv(){var e=Object(i.a)(["\n  position: relative;\n  max-height: 560px;\n  overflow: hidden;\n  z-index: 9;\n  // padding-bottom: 0;\n  cursor: pointer;\n  background: ",";\n  &:hover {\n    background: ",";\n  }\n    \n    text-decoration: none;\n  }\n  &&& a {\n    color: inherit;\n    text-decoration: none;\n    &&&:hover {\n      text-decoration: none;\n    }\n  }\n"]);return wv=function(){return e},e}function Cv(){var e=Object(i.a)(["\n  border: ",";\n  border-radius: 4px;\n"]);return Cv=function(){return e},e}function Iv(){var e=Object(i.a)(["\n  color: ",";\n  // justify-content: space-evenly;\n"]);return Iv=function(){return e},e}function Tv(){var e=Object(i.a)(["\n  color: ",";\n  flex: 1;\n"]);return Tv=function(){return e},e}function Fv(){var e=Object(i.a)(["\n  text-decoration: none;\n"]);return Fv=function(){return e},e}function Sv(){var e=Object(i.a)(["\n  svg {\n    margin: 0;\n  }\n"]);return Sv=function(){return e},e}function Pv(){var e=Object(i.a)(["\n  button {\n    width: 100%;\n  }\n"]);return Pv=function(){return e},e}function Mv(){var e=Object(i.a)(["\n  color: ",";\n"]);return Mv=function(){return e},e}var _v=function(e){var n=e.name,t=e.icon,r=e.summary,a=e.isCreator,i=e.followersCount,o=e.joined,l=e.toggleJoinFormik,c=e.collectionsCount,u=e.link,m=e.displayUsername,s=e.hideActions,d=e.isSearch;return x.a.createElement(Bv,null,d&&x.a.createElement(Tr,null,x.a.createElement(Yn.Trans,{id:"Community"})),x.a.createElement(Dv,{p:2},x.a.createElement(Rv,{link:u},x.a.createElement($v,null,x.a.createElement(Vl,{size:"l",src:t})),x.a.createElement(Pn.Box,{p:2},x.a.createElement(Pn.Flex,null,x.a.createElement(Pn.Box,{flex:1},x.a.createElement(qv,{variant:"heading"},n.length>60?n.replace(/^(.{56}[^\s]*).*/,"$1..."):n),x.a.createElement(Av,null,m))),r?x.a.createElement(Lv,{variant:"text",mt:2},r.length>90?r.replace(/^([\s\S]{86}[^\s]*)[\s\S]*/,"$1..."):r):null),x.a.createElement(zv,{px:2},x.a.createElement(Uv,{mt:2,alignItems:"center"},x.a.createElement(Wl.default,{size:18}),x.a.createElement(Pn.Text,{ml:2,variant:"suptitle"},i||0," ",x.a.createElement(Yn.Trans,{id:"Users"}))),x.a.createElement(Uv,{mt:2,alignSelf:"center",alignItems:"center"},x.a.createElement(Ov.a,{size:18}),x.a.createElement(Pn.Text,{ml:2,variant:"suptitle"},c||0," ",x.a.createElement(Yn.Trans,{id:"Collections"}))),s?null:x.a.createElement(Nv,{my:3},x.a.createElement(ot,{variant:"outline",isDisabled:!!a,isSubmitting:l.isSubmitting,onClick:function(e){e.preventDefault(),l.submitForm()}},x.a.createElement(Pn.Text,{variant:"suptitle"},o?x.a.createElement(Yn.Trans,{id:"Leave"}):x.a.createElement(Yn.Trans,{id:"Join"}))))))))},Lv=Sn(Pn.Text)(Mv(),(function(e){return e.theme.colors.dark})),Nv=Sn(Pn.Box)(Pv()),Uv=Sn(Pn.Flex)(Sv()),Rv=Sn(lr)(Fv()),Av=Sn(Pn.Text)(Tv(),(function(e){return e.theme.colors.mediumdark})),zv=Sn(Pn.Box)(Iv(),(function(e){return e.theme.colors.mediumdark})),Bv=Sn(Pn.Box)(Cv(),(function(e){return e.theme.colors.border})),Dv=Sn(Pn.Box)(wv(),(function(e){return e.theme.colors.appInverse}),(function(e){return Object(tt.b)("0.05",e.theme.colors.appInverse)})),$v=Sn.div(kv()),qv=Sn(Pn.Heading)(jv(),(function(e){return e.theme.colors.darker})),Vv=function(e){var n=e.communityId,t=e.flagged,r=yv(n),a=r.community,i=r.toggleJoin,o=r.isCreator,l=Object(er.a)({initialValues:{},onSubmit:i}),c=Object(h.useMemo)((function(){return a?Qv({community:a,hideActions:!!t,isCreator:o,toggleJoinFormik:l}):null}),[a,t,o,l]);return c&&x.a.createElement(_v,c)},Qv=function(e){var n=e.community,t=e.hideActions,r=e.toggleJoinFormik,a=e.isCreator,i=n.id,o=n.canonicalUrl,l=n.icon,c=n.name,u=n.summary,m=n.myFollow,s=n.collectionCount,d=n.followerCount,f=n.threads,v=n.displayUsername,p=n.isLocal;return{icon:(null===l||void 0===l?void 0:l.url)||"",name:c,isCreator:a,summary:u||"",collectionsCount:s||0,joined:!!m,followersCount:d||0,threadsCount:(null===f||void 0===f?void 0:f.totalCount)||0,toggleJoinFormik:r,link:{url:p?"/communities/".concat(i):o||"",external:!p},displayUsername:v,hideActions:t}};function Wv(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return Wv=function(){return e},e}var Hv={placeholders:{name:Object(Yn.i18nMark)("Website"),flag:Object(Yn.i18nMark)("Please write the Moodle LMS instance")}},Jv=function(e){var n=e.cancel,t=e.sendToMoodleFormik,r=h.useContext(_a).i18n;return h.createElement(ul,null,h.createElement(vl,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"Send to Moodle"}))),h.createElement(pl,{big:!0},h.createElement(fl,null,h.createElement(ja.b,{placeholder:r._(Hv.placeholders.flag),name:"site",value:t.values.site,onChange:t.handleChange}),h.createElement(dl,null,200-t.values.site.length),t.errors.site&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.site)))),h.createElement(ml,null,h.createElement(Kv,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},h.createElement(Yn.Trans,{id:"Send"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"}))))},Kv=Sn(ot)(Wv());function Zv(){var e=Object(i.a)(["\n    query instanceInfo {\n  instance {\n    description\n    extraInfo\n    hostname\n    uploadIconTypes\n    uploadImageTypes\n    uploadMaxBytes\n    uploadResourceTypes\n  }\n}\n    "]);return Zv=function(){return e},e}var Gv=U()(Zv());function Yv(e){return q.d(Gv,e)}var Xv=Ca("session")("LMS_"),ep=function(e){var n=Yv().data,t=np(),r=t.updateLMSPrefs,a=t.currentLMSPrefs,i=Object(h.useCallback)((function(t){if(!(null===n||void 0===n?void 0:n.instance)||!e)return!1;var r=JSON.stringify(e),a=n.instance.uploadResourceTypes.includes(e.mediaType)?"file":"link";return function(e,n,t,r){var a=r.site,i=r.course,o=r.section,l=document.createElement("form");l.target="_blank",l.method="POST",l.action="".concat(a,"/admin/tool/moodlenet/import.php"),l.style.display="none";var u={resourceurl:e,course:i,section:o,type:t,resource_info:n};Object.entries(u).forEach((function(e){var n=Object(c.a)(e,2),t=n[0],r=n[1],a=document.createElement("input");a.type="hidden",a.name=t,a.value=r||"",l.appendChild(a)})),document.body.appendChild(l),l.submit(),document.body.removeChild(l)}(e.url,r,a,t),!0}),[n,e]);return Object(h.useMemo)((function(){return{updateLMSPrefs:r,sendToLMS:i,currentLMSPrefs:a}}),[r,i,a])},np=function(){var e=Oa(),n=e.loading,t=e.me,r=e.updateProfile,i=null===t||void 0===t?void 0:t.user,l=Object(h.useState)(Xv.get("Prefs")),u=Object(c.a)(l,2),m=u[0],s=u[1];Object(h.useEffect)((function(){var e;(null===i||void 0===i||null===(e=i.extraInfo)||void 0===e?void 0:e.LMS)?s(i.extraInfo.LMS):s(Xv.get("Prefs"))}),[i]);var d=Object(h.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),Xv.set("Prefs",t),n||!i){e.next=5;break}return e.next=5,r({profile:{extraInfo:{LMS:t}}});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,i,n]);return Object(h.useMemo)((function(){return{updateLMSPrefs:d,currentLMSPrefs:m,loading:n}}),[d,m,n])},tp=xi.object({site:xi.string().matches(Be).required()}),rp=function(e){var n=e.done,t=e.resource,r=ep(t),a=r.currentLMSPrefs,i=r.sendToLMS,o=r.updateLMSPrefs,c=Object(er.a)({initialValues:a||{site:""},enableReinitialize:!0,validationSchema:tp,onSubmit:function(e){var t=!a||a.site!==e.site,r=t?Object(l.a)(Object(l.a)({},e),{},{course:void 0,section:void 0}):a;r&&(t&&o(r),n(i(r)))}});return x.a.createElement(Jv,{cancel:n,sendToMoodleFormik:c})};function ap(){var e=Object(i.a)(["\n    query resourcePreview($resourceId: String!) {\n  resource(resourceId: $resourceId) {\n    id\n    ...ResourcePreview\n  }\n}\n    ",""]);return ap=function(){return e},e}var ip=U()(ap(),Mi);var op=function(e){var n,t,r,a,i,o,l,c,u=(c={variables:{resourceId:e}},q.d(ip,c)),m=As(null===(n=u.data)||void 0===n||null===(t=n.resource)||void 0===t?void 0:t.id,null===(r=u.data)||void 0===r||null===(a=r.resource)||void 0===a?void 0:a.myLike,null===(i=u.data)||void 0===i||null===(o=i.resource)||void 0===o||null===(l=o.likers)||void 0===l?void 0:l.totalCount,"Resource").toggleLike;return Object(h.useMemo)((function(){var e;return{resource:null===(e=u.data)||void 0===e?void 0:e.resource,toggleLike:m}}),[u,m])},lp=function(e){var n=cp(null===e||void 0===e?void 0:e.community);if(!e||!n)return null;var t=e.preferredUsername,r=e.canonicalUrl,a=e.icon,i=e.summary;return{canonicalUrl:r||"",icon:a,name:e.name,preferredUsername:t,summary:i||"",community:n}},cp=function(e){if(!e)return null;var n=e.name,t=e.preferredUsername,r=e.icon,a=e.summary;return{canonicalUrl:e.canonicalUrl||"",icon:(null===r||void 0===r?void 0:r.url)||"",name:n,preferredUsername:t,summary:a||""}};function up(){var e=Object(i.a)(["\n    mutation editCollection($collection: CollectionUpdateInput!, $collectionId: String!, $icon: UploadInput) {\n  updateCollection(collection: $collection, collectionId: $collectionId, icon: $icon) {\n    ...EditCollectionQueryData\n  }\n}\n    ",""]);return up=function(){return e},e}function mp(){var e=Object(i.a)(["\n    query editCollectionData($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    ...EditCollectionQueryData\n  }\n}\n    ",""]);return mp=function(){return e},e}function sp(){var e=Object(i.a)(["\n    fragment EditCollectionQueryData on Collection {\n  id\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  updatedAt\n}\n    "]);return sp=function(){return e},e}var dp=U()(sp()),fp=U()(mp(),dp);var vp=U()(up(),dp);var pp=function(e){var n,t=q.c(vp,n),r=Object(c.a)(t,2),i=r[0],l=r[1],u=function(e){return q.d(fp,e)}({variables:{collectionId:e}}),m=fF(function(){var n=Object(o.a)(a.a.mark((function n(t){var r,o,c,m,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m=t.collection,s=t.icon,!l.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",i({variables:{collectionId:e,icon:Ea(s,null===(r=u.data)||void 0===r||null===(o=r.collection)||void 0===o||null===(c=o.icon)||void 0===c?void 0:c.url),collection:{name:m.name,summary:m.summary}}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,i,l,u]);return Object(h.useMemo)((function(){var e,n=null===(e=u.data)||void 0===e?void 0:e.collection;return{edit:m,collection:n}}),[m,u])};function bp(){var e=Object(i.a)(["\n    query collectionData($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    ...CollectionPageData\n  }\n}\n    ",""]);return bp=function(){return e},e}var gp=U()(bp(),Yc);var hp=function(e){var n,t,r,a=Oa().me,i=null===(n=(r={variables:{collectionId:e}},q.d(gp,r)).data)||void 0===n?void 0:n.collection,o=pF(i).toggleFollow,l=pp(e).edit,c=!!(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.myFollow),u=!!a&&!!(null===i||void 0===i?void 0:i.creator)&&a.user.id===i.creator.id,m=!!(null===a||void 0===a?void 0:a.isInstanceAdmin)||u;return Object(h.useMemo)((function(){return{isCommunityMember:c,isCreator:u,collection:i,toggleJoin:o,edit:l,canModify:m}}),[i,u,o,l,m,c])};function xp(){var e=Object(i.a)(['\n    query collectionResources($collectionId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collection(collectionId: $collectionId) @connection(key: "collectionResources", filter: ["collectionId"]) {\n    id\n    resources(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CollectionResource\n      }\n    }\n  }\n}\n    ',"\n",""]);return xp=function(){return e},e}function Ep(){var e=Object(i.a)(["\n    fragment CollectionResource on Resource {\n  ...CollectionPageResource\n}\n    ",""]);return Ep=function(){return e},e}var yp=U()(Ep(),Xc),Op=U()(xp(),Zt,yp);var jp=function(e){var n,t,r,a=(r={variables:{collectionId:e,limit:Ee}},q.d(Op,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.collection)||void 0===t?void 0:t.resources,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,collectionId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.collection)||void 0===t?void 0:t.resources)&&(null===(a=e.collection)||void 0===a?void 0:a.resources)?Object(l.a)(Object(l.a)({},i),{},{collection:Object(l.a)(Object(l.a)({},i.collection),{},{resources:r({prev:e.collection.resources,fetched:i.collection.resources})})}):e}})}));return Object(h.useMemo)((function(){return{resourcesPage:i}}),[i])},kp=function(e){var n,t,r,a=(r={variables:{collectionId:e,limit:Ee}},q.d(ma,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.collection)||void 0===t?void 0:t.followers,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,collectionId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.collection)||void 0===t?void 0:t.followers)&&(null===(a=e.collection)||void 0===a?void 0:a.followers)?Object(l.a)(Object(l.a)({},i),{},{collection:Object(l.a)(Object(l.a)({},i.collection),{},{followers:r({prev:e.collection.followers,fetched:i.collection.followers})})}):e}})}));return Object(h.useMemo)((function(){return{collectionFollowersPage:i}}),[i])};function wp(){var e=Object(i.a)(["\n    fragment AddResourceCreateResourceMutationResult on Resource {\n  id\n  ...ResourcePreview\n}\n    ",""]);return wp=function(){return e},e}var Cp=U()(wp(),Mi);function Ip(){var e=Object(i.a)(["\n    mutation addResourceCreateResource($contextId: String!, $resource: ResourceInput!, $icon: UploadInput, $content: UploadInput!) {\n  createResource(contextId: $contextId, resource: $resource, content: $content, icon: $icon) {\n    id\n    ...AddResourceCreateResourceMutationResult\n  }\n}\n    ",""]);return Ip=function(){return e},e}var Tp=U()(Ip(),Cp);var Fp=function(){var e,n=q.c(Tp,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.collectionId,o=n.content,l=n.icon,c=n.resource,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{contextId:t,resource:c,content:ya(o),icon:Ea(l,null)},refetchQueries:[(a={collectionId:t,limit:Ee},u=void 0,{query:Op,variables:a,context:u})]}));case 4:case"end":return e.stop()}var a,u}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(h.useMemo)((function(){return{create:l}}),[l])};function Sp(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return Sp=function(){return e},e}function Pp(){var e=Object(i.a)(["\n  height: 40px;\n  background: white;\n  border-radius: 2px;\n  border: ",";\n"]);return Pp=function(){return e},e}function Mp(){var e=Object(i.a)(["\n  position: absolute;\n  left: -9999px;\n  &:hover {\n    + ",",\n    + ",",\n    + "," {\n      border: 4px solid #97a395;\n    }\n  }\n  &:checked{\n    + ",",\n    + ",",\n    + "," {\n      border: 4px solid #67d654;\n    }\n"]);return Mp=function(){return e},e}function _p(){var e=Object(i.a)(['\n  background-image: url("','");\n']);return _p=function(){return e},e}function Lp(){var e=Object(i.a)(['\n  background-image: url("','");\n']);return Lp=function(){return e},e}function Np(){var e=Object(i.a)(['\n  background-image: url("','");\n']);return Np=function(){return e},e}function Up(){var e=Object(i.a)(["\n  background-repeat: no-repeat;\n  background-position: center center;\n  width: 110px !important;\n  line-height: 38px !important;\n  display: inline-block;\n  background-size: contain;\n  margin-right: 4px;\n  border: 4px solid transparent;\n  text-indent: -9999px;\n  cursor: pointer;\n  border-radius: 5px;\n"]);return Up=function(){return e},e}function Rp(){var e=Object(i.a)(["\n  display: block;\n"]);return Rp=function(){return e},e}function Ap(){var e=Object(i.a)(["\n  width: 200px;\n"]);return Ap=function(){return e},e}function zp(){var e=Object(i.a)(["\n  background: ",";\n"]);return zp=function(){return e},e}function Bp(){var e=Object(i.a)([""]);return Bp=function(){return e},e}var Dp,$p=t(718),qp=t(719),Vp=t(720),Qp={placeholders:{name:Object(Yn.i18nMark)("A title for the resource"),summary:Object(Yn.i18nMark)("Please type or copy/paste a summary about the resource..."),submit:Object(Yn.i18nMark)("Uploading the resource")}},Wp=function(e){var n=e.cancel,t=e.formik,r=e.acceptedLicenses,a=e.hideIconField,i=Object(c.a)(r,3),o=i[0],u=i[1],m=i[2],s=h.useContext(_a).i18n,d=h.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{resource:e}))}),[t]),f="string"===typeof t.values.resource?t.values.resource:"",v=h.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{icon:e}))}),[t]),p="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(Jp,null,h.createElement(pl,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Resource"})),h.createElement(fl,null,h.createElement(wo,{initialUrl:f,onFileSelect:d,uploadType:"resource"}),h.createElement(Hp,null,h.createElement(Yn.Trans,{id:"Max filesize: 20MB"})))),h.createElement(pl,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Title"})),h.createElement(fl,null,h.createElement(h.Fragment,null,h.createElement(tb,{placeholder:s._(Qp.placeholders.name),name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(dl,null,90-t.values.name.length)),t.errors.name&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.name)))),h.createElement(pl,{big:!0},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Description"})),h.createElement(fl,null,h.createElement(h.Fragment,null,h.createElement(ja.d,{placeholder:s._(Qp.placeholders.summary),name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(dl,null,1e3-t.values.summary.length)))),a?null:h.createElement(pl,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Image"})),h.createElement(fl,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(wo,{initialUrl:p,onFileSelect:v,filePattern:"image/*"})))),h.createElement(pl,null,h.createElement(Kp,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"CC License"})),h.createElement(Zp,{href:"https://blog.moodle.net/2019/free-cultural-works/",target:"blank"},h.createElement(Yn.Trans,{id:"Confused? Read this!"}))),h.createElement(fl,null,h.createElement(nb,{type:"radio",name:"license",id:o,value:o,checked:t.values.license===o,onChange:t.handleChange}),h.createElement(Yp,{htmlFor:o},o),h.createElement(nb,{type:"radio",name:"license",id:u,value:u,checked:t.values.license===u,onChange:t.handleChange}),h.createElement(Xp,{htmlFor:u},u),h.createElement(nb,{type:"radio",name:"license",id:m,value:m,checked:t.values.license===m,onChange:t.handleChange}),h.createElement(eb,{htmlFor:m},m))),h.createElement(ml,null,h.createElement(rb,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},h.createElement(Yn.Trans,{id:"Publish"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"}))))},Hp=Sn(Pn.Text)(Bp()),Jp=Sn(Pn.Box)(zp(),(function(e){return e.theme.colors.appInverse})),Kp=Sn.div(Ap()),Zp=Sn.a(Rp()),Gp=Sn.label(Up()),Yp=Sn(Gp)(Np(),$p),Xp=Sn(Gp)(Lp(),qp),eb=Sn(Gp)(_p(),Vp),nb=Sn.input(Mp(),Yp,Xp,eb,Yp,Xp,eb),tb=Sn(ja.b)(Pp(),(function(e){return e.theme.colors.border})),rb=Sn(ot)(Sp()),ab=xi.object({name:xi.string().max(90).required("title is required"),summary:xi.string().max(1e3),icon:(Dp=xi.mixed()).test.apply(Dp,Object(w.a)(_l)),resource:xi.mixed().required(),license:xi.string()}),ib={name:"",summary:"",icon:"",license:De[1],resource:null},ob=function(e){var n=e.done,t=e.collectionId,r=Fp().create,a=Object(er.a)({validationSchema:ab,initialValues:ib,enableReinitialize:!0,validateOnBlur:!1,validateOnChange:!1,onSubmit:function(e){var a=e.resource,i=e.icon,o=e.name,l=e.license,c=e.summary;if(a)return r({collectionId:t,resource:{name:o,summary:c,license:l},content:a,icon:i}).then(n)}}),i=!a.values.resource||-1!==a.values.resource.type.indexOf("image");return Object(h.useEffect)((function(){i&&a.values.icon&&a.setValues(Object(l.a)(Object(l.a)({},a.values),{},{icon:null}))}),[a,i]),x.a.createElement(Wp,{hideIconField:i,cancel:n,formik:a,acceptedLicenses:De})};function lb(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return lb=function(){return e},e}function cb(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return cb=function(){return e},e}function ub(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return ub=function(){return e},e}function mb(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return mb=function(){return e},e}function sb(){var e=Object(i.a)(["\n  color: ",";\n"]);return sb=function(){return e},e}function db(){var e=Object(i.a)(["\n  color: ",";\n"]);return db=function(){return e},e}function fb(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return fb=function(){return e},e}var vb,pb,bb={placeholders:{name:Object(Yn.i18nMark)("Edit the name of the collection"),summary:Object(Yn.i18nMark)("Please describe what the collection is for and what kind of resources it is likely to contain..."),icon:Object(Yn.i18nMark)("Enter the URL of an icon to represent the collection")}},gb=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(ul,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(Ob,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(wo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(yb,null,h.createElement(xb,{fontWeight:"bold"},h.createElement(hb,null,h.createElement(ja.b,{placeholder:bb.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(dl,null,60-t.values.name.length),t.errors.name&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.name)))),h.createElement(Eb,{mt:2},h.createElement(hb,null,h.createElement(ja.d,{placeholder:bb.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(dl,null,500-t.values.summary.length),t.errors.summary&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.summary)))))),h.createElement(ml,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Save"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},hb=Sn(fl)(fb()),xb=Sn(Pn.Text)(db(),(function(e){return e.theme.colors.mediumdark})),Eb=Sn(Pn.Text)(sb(),(function(e){return e.theme.colors.mediumdark})),yb=Sn.div(mb(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(ub()),(function(e){return e.theme.colors.mediumdark})),Ob=Sn(Pn.Flex)(cb(),k.a.lessThan("medium")(lb())),jb=xi.object({name:xi.string().min(2).max(60).required(),summary:xi.string().max(500),icon:(vb=xi.mixed()).test.apply(vb,Object(w.a)(_l))}),kb=function(e){var n=e.done,t=e.collectionId,r=pp(t),a=r.collection,i=r.edit,o=Object(h.useMemo)((function(){var e;return{icon:(null===a||void 0===a||null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:(null===a||void 0===a?void 0:a.name)||"",summary:(null===a||void 0===a?void 0:a.summary)||""}}),[a]),l=Object(er.a)({enableReinitialize:!0,onSubmit:function(e){return i({collection:{name:e.name,summary:e.summary||void 0},icon:e.icon}).then(n)},validationSchema:jb,initialValues:o});return x.a.createElement(gb,{cancel:n,formik:l})};function wb(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n"]);return wb=function(){return e},e}function Cb(){var e=Object(i.a)(["\n  margin-bottom: 16px;\n  border-radius: 6px;\n  box-sizing: border-box;\n  background: ",";\n"]);return Cb=function(){return e},e}function Ib(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return Ib=function(){return e},e}function Tb(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return Tb=function(){return e},e}function Fb(){var e=Object(i.a)([""]);return Fb=function(){return e},e}function Sb(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  text-transform: lowercase;\n"]);return Sb=function(){return e},e}function Pb(){var e=Object(i.a)(["\n  color: ",";\n"]);return Pb=function(){return e},e}function Mb(){var e=Object(i.a)(["\n  border-top: 1px solid ",";\n"]);return Mb=function(){return e},e}function _b(){var e=Object(i.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return _b=function(){return e},e}function Lb(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Lb=function(){return e},e}function Nb(){var e=Object(i.a)(["\n      right: initial;\n      left: 10px;\n    "]);return Nb=function(){return e},e}function Ub(){var e=Object(i.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n\n    ",";\n  }\n"]);return Ub=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(pb||(pb={}));var Rb=function(e){var n=e.collection;return n.status===pb.Loading?x.a.createElement(Pn.Text,null,"Loading..."):x.a.createElement(Wb,null,x.a.createElement(Hb,null,x.a.createElement(Qb,null,x.a.createElement($b,{fontWeight:"bold"},n.name),x.a.createElement(qb,{mt:1},"+",n.fullName),x.a.createElement(Pn.Box,{mt:2},x.a.createElement(rd,{content:n.summary})),x.a.createElement(zb,{mt:2},x.a.createElement(Vb,{mt:3,alignItems:"center"},x.a.createElement(ot,{variant:n.following?"danger":"primary",disabled:n.toggleJoinFormik.isSubmitting,onClick:n.toggleJoinFormik.submitForm,isSubmitting:n.toggleJoinFormik.isSubmitting},n.following?"Unfollow":"Follow"),x.a.createElement(Bb,{ml:2,onClick:n.toggleDropdown},x.a.createElement(Pu.a,{size:20}),n.isOpenDropdown&&x.a.createElement(Ab,null,x.a.createElement(ic,{orientation:"bottom",close:n.toggleDropdown},n.canModify&&x.a.createElement(lc,{onClick:n.edit},x.a.createElement(Zl.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},x.a.createElement(Yn.Trans,{id:"Edit the collection"}))),x.a.createElement(lc,{onClick:n.flag},x.a.createElement(Mu.a,{size:20,color:"rgb(101, 119, 134)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},n.isFlagged?x.a.createElement(Yn.Trans,{id:"Unflag this collection"}):x.a.createElement(Yn.Trans,{id:"Flag this collection"}))),n.isAdmin?x.a.createElement(Db,{onClick:n.addToFeatured},x.a.createElement(Kl.a,{size:20,color:"rgb(211, 103, 5)"}),x.a.createElement(Pn.Text,{sx:{flex:1},ml:2},x.a.createElement(Yn.Trans,{id:"Add to featured list"}))):null))))))))},Ab=Sn(Pn.Box)(Ub(),k.a.lessThan("860px")(Nb())),zb=Sn(Pn.Flex)(Lb()),Bb=Sn(Pn.Box)(_b(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),Db=Sn(lc)(Mb(),(function(e){return Object(tt.b)("0.1",e.theme.colors.light)})),$b=Sn(Pn.Text)(Pb(),(function(e){return e.theme.colors.darker})),qb=Sn(Pn.Text)(Sb(),(function(e){return e.theme.colors.mediumdark})),Vb=Sn(Pn.Flex)(Fb()),Qb=Sn.div(Tb(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(Ib()),(function(e){return e.theme.colors.mediumdark})),Wb=Sn(Pn.Box)(Cb(),(function(e){return e.theme.colors.appInverse})),Hb=Sn(Pn.Flex)(wb()),Jb=function(e){var n=e.collectionId,t=e.basePath,r=hp(n),a=r.collection,i=r.canModify,o=r.toggleJoin,l=Oa().isAdmin,u=Object(er.a)({initialValues:{},onSubmit:o}),m=vF(),s=x.a.useReducer((function(e){return!e}),!1),d=Object(c.a)(s,2),f=d[0],v=d[1],p=Object(h.useReducer)((function(e){return!(!i||m())&&!e}),!1),b=Object(c.a)(p,2),g=b[0],E=b[1],y=a&&g?x.a.createElement(gl,{closeModal:E},x.a.createElement(kb,{collectionId:a.id,done:E})):null,O=Object(h.useReducer)((function(e){return!m()&&!e}),!1),j=Object(c.a)(O,2),k=j[0],w=j[1],C=a&&k?x.a.createElement(gl,{closeModal:w},x.a.createElement(ts,{done:w,ctx:a})):null,I=Object(h.useReducer)((function(e){return!(!l||m())&&!e}),!1),T=Object(c.a)(I,2),F=T[0],S=T[1],P=a&&F?x.a.createElement(gl,{closeModal:S},x.a.createElement(Bm,{done:S,ctx:a,featureId:null})):null,M=Object(h.useMemo)((function(){var e,n,r,o,c;return a?{collection:{isOpenDropdown:f,toggleDropdown:v,basePath:t,isAdmin:l,status:pb.Loaded,canModify:i,following:!!a.myFollow,isFlagged:!!a.myFlag,followerCount:a.followerCount||0,icon:(null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:a.name,fullName:a.displayUsername,summary:a.summary||"",communityName:(null===(n=a.community)||void 0===n?void 0:n.name)||"",communityId:(null===(r=a.community)||void 0===r?void 0:r.id)||"",communityIcon:(null===(o=a.community)||void 0===o||null===(c=o.icon)||void 0===c?void 0:c.url)||"",toggleJoinFormik:u,edit:E,addToFeatured:S,flag:w}}:{collection:{status:pb.Loading}}}),[a,f,t,l,i,u]);return x.a.createElement(x.a.Fragment,null,y,P,C,x.a.createElement(Rb,M))};function Kb(){var e=Object(i.a)(["\n    query userPreview($userId: String!) {\n  user(userId: $userId) {\n    id\n    ...UserPreview\n  }\n}\n    ",""]);return Kb=function(){return e},e}var Zb=U()(Kb(),oa);var Gb=function(e){var n,t,r=(t={variables:{userId:e}},q.d(Zb,t)),a=pF(null===(n=r.data)||void 0===n?void 0:n.user).toggleFollow;return Object(h.useMemo)((function(){var e;return{user:null===(e=r.data)||void 0===e?void 0:e.user,toggleFollow:a}}),[r,a])},Yb=t(45);function Xb(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Xb=function(){return e},e}function eg(){var e=Object(i.a)(["\n  max-width: 50%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  color: ",";\n  flex: 1;\n"]);return eg=function(){return e},e}function ng(){var e=Object(i.a)(["\n  flex: 1;\n"]);return ng=function(){return e},e}function tg(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none !important;\n"]);return tg=function(){return e},e}function rg(){var e=Object(i.a)(["\n  border: ",";\n  border-radius: 4px;\n  &:hover {\n    background: ",";\n  }\n  * {\n    text-decoration: none;\n  }\n"]);return rg=function(){return e},e}function ag(){var e=Object(i.a)(["\n  text-decoration: none !important;\n  * {\n    text-decoration: none !important;\n  }\n"]);return ag=function(){return e},e}var ig=function(e){var n=e.image,t=e.name,r=e.username,a=e.bio,i=e.profileUrl;e.toggleFollowFormik,e.hideActions;return x.a.createElement(og,{to:i},x.a.createElement(lg,{p:3},x.a.createElement(Vl,{variant:"avatar",src:n}),x.a.createElement(ug,{ml:2},x.a.createElement(sg,null,x.a.createElement(cg,{variant:"subhead"},t),x.a.createElement(mg,{ml:1},r)),x.a.createElement(Pn.Box,{mr:1},x.a.createElement(Pn.Text,{variant:"text"},a)))))},og=Sn(mt.c)(ag()),lg=Sn(Pn.Flex)(rg(),(function(e){return e.theme.colors.border}),(function(e){return Object(tt.b)("0.05",e.theme.colors.mediumlight)})),cg=Sn(Pn.Text)(tg(),(function(e){return e.theme.colors.dark})),ug=Sn(Pn.Box)(ng()),mg=Sn(Pn.Text)(eg(),(function(e){return e.theme.colors.mediumdark})),sg=Sn(Pn.Flex)(Xb()),dg=function(e){var n=e.userId,t=e.flagged,r=Gb(n),a=r.user,i=r.toggleFollow,o=Object(er.a)({initialValues:{},onSubmit:i}),l=Object(h.useMemo)((function(){if(!a)return null;var e=!!t,n=a.userName,r=a.displayUsername,i=a.image,l=a.icon,c=a.summary,u=a.myFollow;return{image:(null===l||void 0===l?void 0:l.url)||(null===i||void 0===i?void 0:i.url)||"",name:n||"",username:r,bio:c||"",isFollowing:!!u,toggleFollowFormik:o,profileUrl:RC.getPath({userId:a.id,tab:void 0},void 0),hideActions:e}}),[a,o,t]);return l&&x.a.createElement(Yb.a,{px:2,py:1,pb:0},x.a.createElement(ig,l))};function fg(){var e=Object(i.a)(["\n    fragment ShareLinkWebMeta on WebMetadata {\n  image\n  summary\n  title\n  url\n}\n    "]);return fg=function(){return e},e}var vg=U()(fg());function pg(){var e=Object(i.a)(["\n    mutation shareLinkFetchWebMeta($url: String!) {\n  fetchWebMetadata(url: $url) {\n    ...ShareLinkWebMeta\n  }\n}\n    ",""]);return pg=function(){return e},e}var bg=U()(pg(),vg);var gg=t(919);function hg(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return hg=function(){return e},e}function xg(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  ",";\n"]);return xg=function(){return e},e}function Eg(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return Eg=function(){return e},e}function yg(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return yg=function(){return e},e}function Og(){var e=Object(i.a)(["\n  color: ",";\n"]);return Og=function(){return e},e}function jg(){var e=Object(i.a)(["\n  color: ",";\n"]);return jg=function(){return e},e}function kg(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return kg=function(){return e},e}function wg(){var e=Object(i.a)(["\n  padding: 8px;\n  background: ",";\n  border-radius: 4px;\n"]);return wg=function(){return e},e}var Cg={placeholders:{name:Object(Yn.i18nMark)("Type the name of the resource"),summary:Object(Yn.i18nMark)("Please describe what the resource is about..."),icon:Object(Yn.i18nMark)("Enter the URL of an icon to represent the resource")}},Ig=function(e){var n=e.cancel,t=e.formik,r=h.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return h.createElement(Tg,null,h.createElement("form",{onSubmit:t.handleSubmit},h.createElement(_g,null,h.createElement(Pn.Box,{sx:{width:"120px",height:"120px"}},h.createElement(wo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),h.createElement(Mg,null,h.createElement(Sg,{fontWeight:"bold"},h.createElement(Fg,null,h.createElement(ja.b,{placeholder:Cg.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),h.createElement(dl,null,60-t.values.name.length),t.errors.name&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.name)))),h.createElement(Pg,{mt:2},h.createElement(Fg,null,h.createElement(ja.d,{placeholder:Cg.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),h.createElement(dl,null,500-t.values.summary.length),t.errors.summary&&h.createElement(al,null,h.createElement(No,{variant:"negative"},t.errors.summary)))))),h.createElement(ml,null,h.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},h.createElement(Yn.Trans,{id:"Share"})),h.createElement(ot,{variant:"outline",onClick:n},h.createElement(Yn.Trans,{id:"Cancel"})))))},Tg=Sn(ul)(wg(),(function(e){return e.theme.colors.appInverse})),Fg=Sn(fl)(kg()),Sg=Sn(Pn.Text)(jg(),(function(e){return e.theme.colors.mediumdark})),Pg=Sn(Pn.Text)(Og(),(function(e){return e.theme.colors.mediumdark})),Mg=Sn.div(yg(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(Eg()),(function(e){return e.theme.colors.mediumdark})),_g=Sn(Pn.Flex)(xg(),k.a.lessThan("medium")(hg()));function Lg(){var e=Object(i.a)(["\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  border: 0;\n  background: transparent;\n  box-shadow: none;\n  width: 40px;\n  height: 37px;\n  cursor: pointer;\n  color: ",";\n  svg {\n    stroke: "," !important;\n  }\n  .--rtl & {\n    left: 2px;\n    right: auto;\n  }\n"]);return Lg=function(){return e},e}function Ng(){var e=Object(i.a)(["\n  height: 40px;\n  background: ",";\n  border-radius: 4px;\n  border: 3px solid "," !important;\n"]);return Ng=function(){return e},e}function Ug(){var e=Object(i.a)(["\n  padding: 10px;\n"]);return Ug=function(){return e},e}function Rg(){var e=Object(i.a)(["\n  background: ",";\n  border-top: ",";\n  padding: 16px;\n"]);return Rg=function(){return e},e}function Ag(){var e=Object(i.a)(["\n  position: relative;\n"]);return Ag=function(){return e},e}var zg,Bg={placeholders:{url:Object(Yn.i18nMark)("Enter the URL of the resource"),name:Object(Yn.i18nMark)("A name or title for the resource"),summary:Object(Yn.i18nMark)("Please type or copy/paste a summary about the resource..."),submit:Object(Yn.i18nMark)("Fetch the resource"),image:Object(Yn.i18nMark)("Enter the URL of an image to represent the resource")}},Dg=function(e){var n=h.useContext(_a).i18n;return h.createElement(h.Fragment,null,h.createElement(qg,null,h.createElement($g,{onSubmit:e.FetchLinkFormik.handleSubmit},h.createElement(Qg,{placeholder:n._(Bg.placeholders.url),onChange:e.FetchLinkFormik.handleChange,name:"fetchUrl",value:e.FetchLinkFormik.values.fetchUrl}),h.createElement(Wg,{disabled:e.FetchLinkFormik.isSubmitting,type:"submit"},h.createElement(gg.a,{width:18,height:18,strokeWidth:2}))),e.FetchLinkFormik.errors.fetchUrl&&h.createElement(No,{variant:"negative"},e.FetchLinkFormik.errors.fetchUrl)),e.FetchLinkFormik.isSubmitting?h.createElement(Vg,null,h.createElement(nt,null)):null,e.isFetched?h.createElement(Ig,{formik:e.formik,cancel:e.cancelFetched}):null)},$g=Sn.form(Ag()),qg=Sn(Pn.Box)(Rg(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),Vg=Sn.div(Ug()),Qg=Sn(ja.b)(Ng(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.medium})),Wg=Sn.button(Lg(),(function(e){return e.theme.colors.gray}),(function(e){return e.theme.colors.secondary})),Hg=xi.object({name:xi.string().max(90).required(),summary:xi.string().max(1e3),icon:(zg=xi.mixed()).test.apply(zg,Object(w.a)(_l))}),Jg={name:"",summary:"",icon:""},Kg={fetchUrl:""},Zg=function(e){var n,t,r=e.done,a=e.collectionId,i=Fp().create,o=q.c(bg,t),l=Object(c.a)(o,2),u=l[0],m=l[1],s=Object(h.useRef)(xi.object({fetchUrl:xi.string().matches(Be).required(Ma._("url is required"))})).current,d=Object(er.a)({initialValues:Kg,enableReinitialize:!0,validationSchema:s,onSubmit:function(e){var n=e.fetchUrl;return u({variables:{url:n}})}}),f=null===(n=m.data)||void 0===n?void 0:n.fetchWebMetadata,v=Object(er.a)({initialValues:f?{icon:f.image||"",name:f.title||"",summary:f.summary||""}:Jg,validationSchema:Hg,enableReinitialize:!0,onSubmit:function(e){var n=e.icon,t=e.name,o=e.summary,l=(null===f||void 0===f?void 0:f.url)||d.values.fetchUrl;if(l)return i({collectionId:a,content:l,icon:n,resource:{name:t,summary:o}}).then(r)}});return x.a.createElement(Dg,{FetchLinkFormik:d,cancelFetched:r,formik:v,isFetched:!!f})};function Gg(){var e=Object(i.a)(["\n  background: ",";\n  button {\n    width: 100%;\n    height: 50px;\n  }\n"]);return Gg=function(){return e},e}function Yg(){var e=Object(i.a)(["\n  text-transform: capitalize;\n"]);return Yg=function(){return e},e}var Xg,eh=function(e){var n=e.HeroCollection,t=e.ShareLink,r=e.UploadResourcePanel,a=e.Followers,i=e.Resources,o=e.tabPaths,l=e.loadMoreResources,c=e.loadMoreFollowers,u=e.isCommunityMember,m=e.communityId,s=e.communityName,d=e.communityIcon,f=e.shareLink,v=e.upload;return h.createElement(Mt,null,h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Nt,null,n,h.createElement(ah,{tabPaths:o}),h.createElement(Tn.d,null,h.createElement(Tn.b,{path:o.followers},h.createElement(h.Fragment,null,h.createElement(At,null,a),c&&h.createElement(ct,{LoadMoreFormik:c}))),h.createElement(Tn.b,{exact:!0,path:o.resources},h.createElement(h.Fragment,null,u?h.createElement(ih,{p:3},h.createElement(ot,{mr:2,onClick:f,variant:"outline"},h.createElement(Yn.Trans,{id:"Share link"})),h.createElement(ot,{onClick:v,variant:"outline"},h.createElement(Yn.Trans,{id:"Add new publication"}))):null,t,r,h.createElement(At,null,i.map((function(e){return h.createElement(Yb.a,{mx:3,my:2,mb:3,key:e.key||""},e)}))),l&&h.createElement(ct,{LoadMoreFormik:l}))))))),h.createElement(Hn,null,h.createElement(nh,{mb:2,variant:"suptitle"},h.createElement(Yn.Trans,{id:"Community"})),h.createElement(ws,{id:m,name:s,icon:d})))},nh=Sn(Pn.Text)(Yg()),th=t(210).default,rh=t(392).default,ah=function(e){var n=e.tabPaths;return h.createElement(Rt,{p:3,pt:3},h.createElement(Ut,{exact:!0,to:n.resources},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Publications"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(rh,{size:"24"}))),h.createElement(Ut,{exact:!0,to:n.followers},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Followers"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(th,{size:"24"}))))},ih=Sn(Pn.Flex)(Gg(),(function(e){return e.theme.colors.appInverse}));!function(e){e[e.Publications=0]="Publications",e[e.Followers=1]="Followers"}(Xg||(Xg={}));var oh={id:"Collection {name} - Followers"},lh={id:"Collection {name} - Publications"},ch=function(e){var n=Object(h.useState)(),t=Object(c.a)(n,2),r=t[0],a=t[1],i=Object(h.useCallback)((function(){return a(void 0)}),[]),o=e.collectionId,l=e.basePath,u=e.tab,m=hp(e.collectionId),s=m.collection,d=m.isCommunityMember,f=u===Xg.Followers?oh:(Xg.Publications,lh);wi(!!(null===s||void 0===s?void 0:s.name)&&f,s);var v=kp(e.collectionId).collectionFollowersPage,p=Object(c.a)(v.formiks,1)[0],b=jp(e.collectionId).resourcesPage,g=Object(c.a)(b.formiks,1)[0],E=vF(),y=x.a.createElement(Jb,{basePath:l,collectionId:o}),O=b.edges.map((function(e){return x.a.createElement(dk,{resourceId:e.id,key:e.id})})).filter((function(e){return!!e})),j=v.edges.map((function(e){return e.creator&&x.a.createElement(dg,{userId:e.creator.userId,key:e.creator.userId})})).filter((function(e){return!!e})),k="upload"===r?x.a.createElement(ob,{done:i,collectionId:o}):null,w="share"===r?x.a.createElement(Zg,{collectionId:o,done:i}):null,C=Object(h.useMemo)((function(){var e,n;if(!s)return null;var t={followers:kj.getPath({collectionId:o,tab:"followers"},void 0),resources:kj.getPath({collectionId:o,tab:void 0},void 0)};return{ShareLink:w,HeroCollection:y,Resources:O,UploadResourcePanel:k,tabPaths:t,Followers:j,communityIcon:(null===(e=s.community)||void 0===e||null===(n=e.icon)||void 0===n?void 0:n.url)||"",communityId:s.community?s.community.id:"",communityName:s.community?s.community.name:"",loadMoreFollowers:p,loadMoreResources:g,isCommunityMember:d,shareLink:function(){return a("share"===r||E()?void 0:"share")},upload:function(){return a("upload"===r||E()?void 0:"upload")}}}),[s,o,w,y,O,k,j,p,g,d,r,E]);return C&&x.a.createElement(eh,C)};function uh(){var e=Object(i.a)(["\n  margin: 0 auto;\n  width: 432px;\n  margin-top: 60px;\n  padding: 16px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    color: #fff !important;\n    text-transform: uppercase\n      &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return uh=function(){return e},e}var mh,sh=Sn.div(uh()),dh=function(){return h.createElement(h.Fragment,null,h.createElement(sh,null,h.createElement(Pn.Box,{sx:{textAlign:"center"}},h.createElement(Ba,null),h.createElement(Pn.Heading,null,h.createElement("span",{"aria-label":"icon",role:"img"},"\ud83e\udd14"),h.createElement(Yn.Trans,{id:"Page not found"})))))},fh={id:"Page Not Found"},vh=function(){return wi(fh,{}),x.a.createElement(dh,null)},ph=function(){var e,n,t,r=(t={variables:{limit:10}},q.d(Yr,t)),a=nr(null===(e=r.data)||void 0===e||null===(n=e.me)||void 0===n?void 0:n.user.communityFollows,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:10}),updateQuery:function(e,n){var r,a,i,o,c,u,m=n.fetchMoreResult;return(null===m||void 0===m||null===(r=m.me)||void 0===r||null===(a=r.user)||void 0===a?void 0:a.communityFollows)&&(null===(i=e.me)||void 0===i||null===(o=i.user)||void 0===o?void 0:o.communityFollows)?Object(l.a)(Object(l.a)({},m),{},{me:Object(l.a)(Object(l.a)({},m.me),{},{user:Object(l.a)(Object(l.a)({},m.me.user),{},{communityFollows:t({prev:null===(c=e.me)||void 0===c?void 0:c.user.communityFollows,fetched:null===(u=m.me)||void 0===u?void 0:u.user.communityFollows})})})}):e}})}));return Object(h.useMemo)((function(){return{myCommunityFollowsPage:a}}),[a])},bh=t(920);function gh(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return gh=function(){return e},e}function hh(){var e=Object(i.a)(["\n  height: 50px;\n  line-height: 50px;\n  font-weight: 600;\n  color: ",";\n  a:focus,\n  a:active {\n    color: inherit;\n  }\n  ",";\n"]);return hh=function(){return e},e}function xh(){var e=Object(i.a)(["\nimg {\n    margin-right: 0;\n}\n"]);return xh=function(){return e},e}function Eh(){var e=Object(i.a)(["\n  border-radius: 4px;\n  padding: 0px 4px;\n  &:hover {\n    background: ",";\n  }\n  ",";\n"]);return Eh=function(){return e},e}function yh(){var e=Object(i.a)(["\n  position: relative;\n  color: inherit;\n  img {\n    width: 36px;\n    height: 36px;\n  }\n  &.active {\n    div {\n      color: ",";\n      position: relative;\n    }\n  }\n  div {\n    color: ",";\n  }\n"]);return yh=function(){return e},e}function Oh(){var e=Object(i.a)(["\n  margin-bottom: 0px;\n  img {\n    width: 36px;\n    height: 36px;\n  }\n  &.active {\n    > div {\n      background: ",";\n    }\n    div {\n      color: "," !important;\n    }\n    position: relative;\n  }\n"]);return Oh=function(){return e},e}function jh(){var e=Object(i.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return jh=function(){return e},e}function kh(){var e=Object(i.a)(["\n  overflow-y: auto;\n  flex: 1;\n"]);return kh=function(){return e},e}function wh(){var e=Object(i.a)(["\n    position: relative;\nwidth: 100%\n"]);return wh=function(){return e},e}function Ch(){var e=Object(i.a)(["\nwidth: auto;\n"]);return Ch=function(){return e},e}function Ih(){var e=Object(i.a)(["\n  justify-content: space-between;\n  height: 100%;\n  display: flex;\n  "," ",";\n"]);return Ih=function(){return e},e}function Th(){var e=Object(i.a)(["\n  transition: 'all 250ms ease';\n  flex: 1;\n"]);return Th=function(){return e},e}function Fh(){var e=Object(i.a)(["\n  //   width: 50px;\n  // "]);return Fh=function(){return e},e}function Sh(){var e=Object(i.a)(["\n  width: 240px;\n  // ","\n"]);return Sh=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(mh||(mh={}));var Ph=Sn(Pn.Flex)(Sh(),k.a.lessThan("medium")(Fh())),Mh=Sn(Pn.Box)(Th()),_h=Sn(Pn.Box)(Ih(),k.a.lessThan("1280px")(Ch()),k.a.lessThan("860px")(wh())),Lh=Sn(Pn.Box)(kh()),Nh=Sn(Pn.Box)(jh()),Uh=Sn(mt.c)(Oh(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.appInverse})),Rh=Sn(mt.c)(yh(),(function(e){return e.theme.colors.primary}),(function(e){return e.isActive?e.theme.colors.primary:e.theme.colors.darker})),Ah=Sn(Pn.Flex)(Eh(),(function(e){return e.theme.colors.medium}),k.a.lessThan("1280px")(xh())),zh=Sn(Pn.Text)(hh(),(function(e){return e.theme.colors.darker}),Object(tt.c)("220px")),Bh=Sn(zh)(gh()),Dh=function(e){var n=h.useContext(_a).i18n;return h.createElement(h.Fragment,null,e.isSidebarOpen?h.createElement(Ph,{className:"sidebar"},h.createElement(Mh,null,h.createElement(_h,null,e.status===mh.Loading?h.createElement(Pn.Text,null,"Loading"):h.createElement(Lh,null,h.createElement(h.Fragment,null,h.createElement(Nh,null,h.createElement(Rh,{exact:!0,to:e.discoverPath},h.createElement(Ah,{alignItems:"center"},h.createElement(Pn.Box,{height:"50px"},h.createElement(bh.a,{size:36,strokeWidth:"1"})),h.createElement(Bh,{variant:"link"},h.createElement(Yn.Trans,{id:"Discover"})))),h.createElement(Rh,{exact:!0,to:e.homePath},h.createElement(Ah,{alignItems:"center"},h.createElement(Vl,{size:"s",src:Oe}),h.createElement(Bh,{variant:"link"},n._("My Timeline"))))),h.createElement(Nh,null,e.communities.map((function(e,n){return h.createElement(Uh,{key:e.link,to:e.link},h.createElement(Ah,{alignItems:"center",mb:2},h.createElement(Vl,{size:"s",initials:e.name.substr(0,2),src:e.icon}),h.createElement(Bh,{variant:"link"},e.name)))})),e.LoadMoreFormik&&h.createElement(ct,{LoadMoreFormik:e.LoadMoreFormik}))))))):null)},$h=function(){var e,n,t,r=q.d(Tm,t),a=nr(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.featuredCollections,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(r=i.instance)||void 0===r?void 0:r.featuredCollections)&&(null===(a=e.instance)||void 0===a?void 0:a.featuredCollections)?Object(l.a)(Object(l.a)({},i),{},{instance:Object(l.a)(Object(l.a)({},i.instance),{},{feturedCollections:t({prev:e.instance.featuredCollections,fetched:i.instance.featuredCollections})})}):e}})}));return Object(h.useMemo)((function(){return{featuredCollectionsPage:a}}),[a])},qh=t(230),Vh=t.n(qh),Qh=(t(394),t(395),function(e){var n=e.width,t=void 0===n?24:n,r=e.height,a=void 0===r?24:r,i=e.strokeWidth,o=void 0===i?2:i,l=e.color,c=void 0===l?"#333":l;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",color:c,width:t,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-clipboard"},h.createElement("polyline",{points:"15 18 9 12 15 6"}))}),Wh=function(e){var n=e.width,t=void 0===n?24:n,r=e.height,a=void 0===r?24:r,i=e.strokeWidth,o=void 0===i?2:i,l=e.color,c=void 0===l?"#333":l;return h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",color:c,width:t,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-users"},h.createElement("polyline",{points:"9 18 15 12 9 6"}))};function Hh(){var e=Object(i.a)(["\n  display: inline-flex;\n  color: ",";\n  cursor: pointer;\n  padding-right: 10px;\n  button {\n    height: 30px;\n    line-height: 10px;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n    }\n  }\n"]);return Hh=function(){return e},e}function Jh(){var e=Object(i.a)(["\n  justify-content: right;\n  align-items: center;\n"]);return Jh=function(){return e},e}function Kh(){var e=Object(i.a)(["\n  & span {\n    cursor: pointer;\n    display: inline-block;\n    height: 30px;\n    & svg {\n      color: "," !important;\n      vertical-align: middle;\n      height: 30px;\n    }\n    &:hover {\n      & svg {\n        color: "," !important;\n      }\n    }\n  }\n  float: right;\n"]);return Kh=function(){return e},e}function Zh(){var e=Object(i.a)(["\n  font-weight: 700;\n  padding: 8px;\n  border-bottom: ",";\n  margin: 0;\n  color: ",";\n  & h5 {\n    margin: 0;\n    color: ",";\n    display: inline-block;\n    flex: 1;\n    padding: 0;\n    text-transform: uppercase;\n    height: 30px;\n    font-weight: 500;\n    line-height: 30px;\n  }\n"]);return Zh=function(){return e},e}var Gh=Sn(Yb.b)(Zh(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Yh=Sn(Yb.b)(Kh(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Xh=Sn(Yb.b)(Jh()),ex=Sn(Yb.b)(Hh(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.primary})),nx=function(e){var n=Object(h.useRef)();return x.a.createElement(x.a.Fragment,null,x.a.createElement(Gh,null,x.a.createElement("h5",null,x.a.createElement(Yn.Trans,{id:"Featured collections"})," "),x.a.createElement(Yh,null,e.canEdit?x.a.createElement(Xh,null,x.a.createElement(ex,{onClick:e.toggleEdit},e.isEditing?x.a.createElement(ot,{variant:"outline"},x.a.createElement(Yn.Trans,{id:"Done"})):x.a.createElement(ot,{variant:"outline"},x.a.createElement(Yn.Trans,{id:"Edit"})))):null,x.a.createElement("span",{onClick:n.current&&n.current.slickPrev},x.a.createElement(Qh,{width:26,height:26,strokeWidth:1,color:"#333"})),x.a.createElement("span",{onClick:n.current&&n.current.slickNext},x.a.createElement(Wh,{width:26,height:26,strokeWidth:1,color:"#333"})))),x.a.createElement(Yb.a,{px:2},x.a.createElement(Vh.a,Object.assign({ref:function(e){return n.current=e||void 0}},tx(e.featuredCollections.length)),e.featuredCollections)))},tx=function(e){return{dots:!1,arrows:!1,infinite:!0,autoplay:!1,speed:500,slidesToShow:e>3?3:e,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:e>3?3:e,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:e>2?2:e,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}};function rx(){var e=Object(i.a)(["\n  position: absolute;\n  right: -9px;\n  top: 0px;\n  cursor: pointer;\n  background: ",";\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return rx=function(){return e},e}function ax(){var e=Object(i.a)(["\n  color: rgba(250, 250, 250);\n  ",";\n  margin: 0;\n  line-height: 40px;\n"]);return ax=function(){return e},e}function ix(){var e=Object(i.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  padding: 0 8px;\n  background: rgba(0, 0, 0, 0.8);\n"]);return ix=function(){return e},e}function ox(){var e=Object(i.a)(["\n  //   width: 100%;\n  height: auto;\n  padding: 50%;\n  border-radius: 4px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n"]);return ox=function(){return e},e}function lx(){var e=Object(i.a)(["\n  display: block;\n"]);return lx=function(){return e},e}function cx(){var e=Object(i.a)(["\n  cursor: pointer;\n  position: relative;\n  max-width: 200px;\n  max-height: 270px;\n  border-radius: 4px;\n  padding-top: 10px;\n  "," & a {\n    color: inherit;\n    text-decoration: none;\n    width: 100%;\n  }\n"]);return cx=function(){return e},e}var ux=t(396),mx=Sn(Pn.Box)(cx(),k.a.lessThan("medium")(lx())),sx=Sn.div(ox()),dx=Sn.div(ix()),fx=Sn(Pn.Text)(ax(),Object(tt.c)("170px")),vx=Sn(Pn.Box)(rx(),(function(e){return e.theme.colors.medium})),px=function(e){var n=e.collection,t=e.canEdit,r=e.isEditing,a=e.remove;return h.createElement(mx,{py:1,mb:2,mr:3},t&&r?h.createElement(vx,{onClick:a},h.createElement(Bo.default,{color:"#fff",size:16})):null,h.createElement(mt.b,{to:n.link},h.createElement(sx,{style:{backgroundImage:'url("'.concat(n.icon||ux,'")')}},h.createElement(dx,null,h.createElement(fx,{my:2,fontWeight:600},n.name.length>80?n.name.replace(/^(.{76}[^\s]*).*/,"$1..."):n.name)))))},bx=function(){var e=Oa().isAdmin,n=$h().featuredCollectionsPage,t=Object(h.useReducer)((function(e){return!e}),!1),r=Object(c.a)(t,2),a=r[0],i=r[1],o=Object(h.useState)(null),l=Object(c.a)(o,2),u=l[0],m=l[1],s=Object(h.useMemo)((function(){return n.edges.map((function(n){var t,r=n.context;if(!r||"Collection"!==r.__typename)return null;var i={collection:{icon:(null===(t=r.icon)||void 0===t?void 0:t.url)||"",name:r.name,link:kj.getPath({collectionId:r.id,tab:void 0},void 0)},canEdit:e,isEditing:a,remove:function(){return m(n)}};return x.a.createElement(px,Object.assign({key:r.id},i))})).filter((function(e){return!!e}))}),[n.edges,e,a]),d=Object(h.useMemo)((function(){var e;return u&&"Collection"===(null===(e=u.context)||void 0===e?void 0:e.__typename)&&x.a.createElement(gl,{closeModal:function(){return m(null)}},x.a.createElement(Bm,{ctx:u.context,done:function(){return m(null)},featureId:u.id}))}),[u]),f=Object(h.useMemo)((function(){return{featuredCollections:s,isEditing:a,toggleEdit:i,canEdit:e}}),[s,a,e]);return x.a.createElement(x.a.Fragment,null,d,x.a.createElement(nx,f))};function gx(){var e=Object(i.a)(["\n  background: aliceblue;\n  text-align: center;\n  padding: 4px;\n  border-radius: 4px;\n"]);return gx=function(){return e},e}var hx=function(e){var n;return h.createElement(h.Fragment,null,h.createElement(Hn,null,h.createElement(Jn,null,h.createElement(Kn,{fontWeight:"bold"},"Popular communities"),h.createElement(Zn,null,null===(n=e.communities)||void 0===n?void 0:n.map((function(e,n){var t=e.isLocal?"/communities/".concat(e.id):e.canonicalUrl;return h.createElement(Gn,{key:n,mb:3},h.createElement("a",{href:null!==t&&void 0!==t?t:"/"},e.name))})))),h.createElement(Jn,null,h.createElement(Kn,{fontWeight:"bold"},"Popular hashtags"),h.createElement(Zn,null,h.createElement(Gn,{mb:3},"#pedagogy"),h.createElement(Gn,{mb:3},"#transition"),h.createElement(Gn,{mb:3},"#english"),h.createElement(Gn,{mb:3},"#template"),h.createElement(Gn,{mb:3},"#assessment"),h.createElement(Gn,null,h.createElement(xx,{variant:"text"},h.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"),h.createElement(Yn.Trans,{id:"This feature is coming soon!"}),h.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"))))),h.createElement(Jn,null,h.createElement(Kn,{fontWeight:"bold"},"Popular categories"),h.createElement(Zn,null,h.createElement(Gn,{mb:3},"Humanities"),h.createElement(Gn,{mb:3},"Behavioural science"),h.createElement(Gn,{mb:3},"English"),h.createElement(Gn,{mb:3},"Romana"),h.createElement(Gn,{mb:3},"Postgraduate"),h.createElement(xx,{variant:"text"},h.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"),h.createElement(Yn.Trans,{id:"This feature is coming soon!"})," ",h.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"))))))},xx=Sn(Pn.Text)(gx());function Ex(){var e=Object(i.a)(["\n  query popularCommunites {\n    communities(limit: 5) {\n      totalCount\n      edges {\n        id\n        name\n        isLocal\n        canonicalUrl\n      }\n    }\n  }\n"]);return Ex=function(){return e},e}var yx=U()(Ex()),Ox=function(){var e=Object(q.a)(),n=Object(h.useState)([]),t=Object(c.a)(n,2),r=t[0],a=t[1];return Object(h.useEffect)((function(){e.query({query:yx}).then((function(e){var n;e.data&&e.data.communities&&a(null!==(n=e.data.communities.edges)&&void 0!==n?n:[])}))}),[e]),x.a.createElement(hx,{communities:r})};function jx(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: ",";\n  border-radius: 8px;\n  max-height: 270px;\n"]);return jx=function(){return e},e}function kx(){var e=Object(i.a)(["\n  background: ",";\n  height: 40px;\n  line-height: 40px;\n"]);return kx=function(){return e},e}var wx=function(e){var n=e.ActivitiesBox,t=e.FeaturedCommunitiesBox,r=(e.FeaturedCollectionsBox,e.CollectionsBoxes),a=e.CommunitiesBoxes,i=e.LoadMoreFormik,o=e.tabPaths;return h.createElement(Mt,null,h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Sx,null,t),h.createElement(Nt,null,h.createElement(Tx,{tabPaths:o}),h.createElement(Tn.d,null,h.createElement(Tn.b,{exact:!0,path:o.communities},h.createElement(At,null,a),i&&h.createElement(ct,{LoadMoreFormik:i})),h.createElement(Tn.b,{exact:!0,path:o.collections},h.createElement(At,null,h.createElement(Bt,null,r)),i&&h.createElement(ct,{LoadMoreFormik:i})),h.createElement(Tn.b,{exact:!0,path:o.timeline},h.createElement(Pt,null,n),i&&h.createElement(ct,{LoadMoreFormik:i})))))),h.createElement(Ox,null))},Cx=t(210).default,Ix=t(292).default,Tx=function(e){var n=e.tabPaths;return h.createElement(h.Fragment,null,h.createElement(Fx,{px:2,mt:2},h.createElement(Pn.Text,{variant:"suptitle"},"Browse Home instance")),h.createElement(Rt,null,h.createElement(Ut,{exact:!0,to:n.timeline},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Timeline"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(Cx,{size:"24"}))),h.createElement(Ut,{exact:!0,to:n.communities},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"All communities"})),h.createElement(Ix,{className:"icon-holder"},h.createElement(Cx,{size:"24"})))))},Fx=Sn(Pn.Box)(kx(),(function(e){return e.theme.colors.appInverse})),Sx=Sn(Pn.Flex)(jx(),(function(e){return e.theme.colors.appInverse})),Px=function(){var e,n,t,r=(t={variables:{limit:Ee}},q.d(Ki,t)),a=nr(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.outbox,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(r=i.instance)||void 0===r?void 0:r.outbox)&&(null===(a=e.instance)||void 0===a?void 0:a.outbox)?Object(l.a)(Object(l.a)({},i),{},{instance:Object(l.a)(Object(l.a)({},i.instance),{},{outbox:t({prev:e.instance.outbox,fetched:i.instance.outbox})})}):e}})}));return Object(h.useMemo)((function(){return{activitiesPage:a}}),[a])},Mx=function(){var e,n,t,r=q.d(_m,t),a=nr(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.featuredCommunities,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(r=i.instance)||void 0===r?void 0:r.featuredCommunities)&&(null===(a=e.instance)||void 0===a?void 0:a.featuredCommunities)?Object(l.a)(Object(l.a)({},i),{},{instance:Object(l.a)(Object(l.a)({},i.instance),{},{featuredCommunities:t({prev:e.instance.featuredCommunities,fetched:i.instance.featuredCommunities})})}):e}})}));return Object(h.useMemo)((function(){return{featuredCommunitiesPage:a}}),[a])};function _x(){var e=Object(i.a)(["\n  display: inline-flex;\n  color: ",";\n  cursor: pointer;\n  padding-right: 10px;\n  button {\n    height: 30px;\n    line-height: 10px;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n    }\n  }\n"]);return _x=function(){return e},e}function Lx(){var e=Object(i.a)(["\n  justify-content: right;\n  align-items: center;\n"]);return Lx=function(){return e},e}function Nx(){var e=Object(i.a)(["\n  & span {\n    cursor: pointer;\n    display: inline-block;\n    height: 30px;\n    & svg {\n      color: "," !important;\n      vertical-align: middle;\n      height: 30px;\n    }\n    &:hover {\n      & svg {\n        color: "," !important;\n      }\n    }\n  }\n  float: right;\n"]);return Nx=function(){return e},e}function Ux(){var e=Object(i.a)(["\n  font-weight: 700;\n  padding: 8px;\n  border-bottom: ",";\n  margin: 0;\n  color: ",";\n  & h5 {\n    margin: 0;\n    color: ",";\n    display: inline-block;\n    flex: 1;\n    padding: 0;\n    text-transform: uppercase;\n    height: 30px;\n    font-weight: 500;\n    line-height: 30px;\n  }\n"]);return Ux=function(){return e},e}var Rx=Sn(Yb.b)(Ux(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Ax=Sn(Yb.b)(Nx(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),zx=Sn(Yb.b)(Lx()),Bx=Sn(Yb.b)(_x(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.primary})),Dx=function(e){var n=Object(h.useRef)();return x.a.createElement(x.a.Fragment,null,x.a.createElement(Rx,null,x.a.createElement("h5",null,x.a.createElement(Yn.Trans,{id:"Featured communities"})," "),x.a.createElement(Ax,null,e.canEdit?x.a.createElement(zx,null,x.a.createElement(Bx,{onClick:e.toggleEdit},e.isEditing?x.a.createElement(ot,{variant:"outline"},x.a.createElement(Yn.Trans,{id:"Done"})):x.a.createElement(ot,{variant:"outline"},x.a.createElement(Yn.Trans,{id:"Edit"})))):null,x.a.createElement("span",{onClick:n.current&&n.current.slickPrev},x.a.createElement(Qh,{width:26,height:26,strokeWidth:1,color:"#333"})),x.a.createElement("span",{onClick:n.current&&n.current.slickNext},x.a.createElement(Wh,{width:26,height:26,strokeWidth:1,color:"#333"})))),x.a.createElement(Yb.a,{px:2},x.a.createElement(Vh.a,Object.assign({ref:function(e){return n.current=e||void 0}},$x(e.featuredCommunities.length)),e.featuredCommunities)))},$x=function(e){return{dots:!1,arrows:!1,infinite:!0,autoplay:!1,speed:500,slidesToShow:e>3?3:e,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:e>3?3:e,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:e>2?2:e,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}};function qx(){var e=Object(i.a)(["\n  position: absolute;\n  right: -9px;\n  top: 0px;\n  cursor: pointer;\n  background: ",";\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return qx=function(){return e},e}function Vx(){var e=Object(i.a)(["\n  color: rgba(250, 250, 250);\n  ",";\n  margin: 0;\n  line-height: 40px;\n"]);return Vx=function(){return e},e}function Qx(){var e=Object(i.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  padding: 0 8px;\n  background: rgba(0, 0, 0, 0.8);\n"]);return Qx=function(){return e},e}function Wx(){var e=Object(i.a)(["\n  //   width: 100%;\n  height: auto;\n  padding: 50%;\n  border-radius: 4px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n"]);return Wx=function(){return e},e}function Hx(){var e=Object(i.a)(["\n  display: block;\n"]);return Hx=function(){return e},e}function Jx(){var e=Object(i.a)(["\n  cursor: pointer;\n  position: relative;\n  max-width: 200px;\n  max-height: 270px;\n  border-radius: 4px;\n  padding-top: 10px;\n  "," & a {\n    color: inherit;\n    text-decoration: none;\n    width: 100%;\n  }\n"]);return Jx=function(){return e},e}var Kx,Zx=t(396),Gx=Sn(Pn.Box)(Jx(),k.a.lessThan("medium")(Hx())),Yx=Sn.div(Wx()),Xx=Sn.div(Qx()),eE=Sn(Pn.Text)(Vx(),Object(tt.c)("170px")),nE=Sn(Pn.Box)(qx(),(function(e){return e.theme.colors.medium})),tE=function(e){var n=e.community,t=e.canEdit,r=e.isEditing,a=e.remove;return h.createElement(Gx,{py:1,mb:2,mr:3},t&&r?h.createElement(nE,{onClick:a},h.createElement(Bo.default,{color:"#fff",size:16})):null,h.createElement(mt.b,{to:n.link},h.createElement(Yx,{style:{backgroundImage:'url("'.concat(n.icon||Zx,'")')}},h.createElement(Xx,null,h.createElement(eE,{my:2,fontWeight:600},n.name.length>80?n.name.replace(/^(.{76}[^\s]*).*/,"$1..."):n.name)))))},rE=function(){var e=Oa().isAdmin,n=Mx().featuredCommunitiesPage,t=Object(h.useReducer)((function(e){return!e}),!1),r=Object(c.a)(t,2),a=r[0],i=r[1],o=Object(h.useState)(null),l=Object(c.a)(o,2),u=l[0],m=l[1],s=Object(h.useMemo)((function(){return n.edges.map((function(n){var t,r=n.context;if(!r||"Community"!==r.__typename)return null;var i={community:{icon:(null===(t=r.icon)||void 0===t?void 0:t.url)||"",name:r.name,link:ET.getPath({tab:void 0,communityId:r.id},void 0)},canEdit:e,isEditing:a,remove:function(){return m(n)}};return x.a.createElement(tE,Object.assign({key:r.id},i))})).filter((function(e){return!!e}))}),[n.edges,e,a]),d=Object(h.useMemo)((function(){var e;return u&&"Community"===(null===(e=u.context)||void 0===e?void 0:e.__typename)&&x.a.createElement(gl,{closeModal:function(){return m(null)}},x.a.createElement(Bm,{ctx:u.context,done:function(){return m(null)},featureId:u.id}))}),[u]),f=Object(h.useMemo)((function(){return{isEditing:a,toggleEdit:i,featuredCommunities:s,canEdit:e}}),[a,s,e]);return x.a.createElement(x.a.Fragment,null,d,x.a.createElement(Dx,f))},aE=function(){var e,n,t=(n={variables:{limit:Ee}},q.d(Yi,n)),r=nr(null===(e=t.data)||void 0===e?void 0:e.communities,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.communities)&&e.communities?Object(l.a)(Object(l.a)({},t),{},{communities:r({prev:e.communities,fetched:t.communities})}):e}})}));return Object(h.useMemo)((function(){return{allCommunitiesPage:r}}),[r])};!function(e){e[e.Activities=0]="Activities",e[e.Communities=1]="Communities",e[e.Collections=2]="Collections"}(Kx||(Kx={}));var iE={id:"Discover Activities"},oE={id:"Discover Collections"},lE={id:"Discover Communities"},cE=function(e){e.basePath;var n=e.tab,t=n===Kx.Collections?oE:n===Kx.Communities?lE:(Kx.Activities,iE);wi(t);var r=Px().activitiesPage,a=Object(c.a)(r.formiks,1)[0],i=aE().allCommunitiesPage,o=Object(c.a)(i.formiks,1)[0],l=ir().allCollectionsPage,u=Object(c.a)(l.formiks,1)[0],m=Object(h.useMemo)((function(){var e=x.a.createElement(bx,null),t=x.a.createElement(rE,null),c=x.a.createElement(x.a.Fragment,null,r.edges.map((function(e){return x.a.createElement(lI,{activityId:e.id,key:e.id})}))),m=x.a.createElement(x.a.Fragment,null,l.edges.map((function(e){return x.a.createElement(Yb.a,{m:2,key:e.id},x.a.createElement(yF,{collectionId:e.id}))}))),s=x.a.createElement(x.a.Fragment,null,i.edges.map((function(e){return x.a.createElement(Yb.a,{m:2,key:e.id},x.a.createElement(Vv,{communityId:e.id}))}))),d=n===Kx.Activities?a:n===Kx.Collections?u:n===Kx.Communities?o:null;return{tabPaths:{collections:sE.getPath({tab:"collections"},void 0),communities:sE.getPath({tab:"communities"},void 0),timeline:sE.getPath({tab:void 0},void 0)},ActivitiesBox:c,FeaturedCollectionsBox:e,FeaturedCommunitiesBox:t,CollectionsBoxes:m,CommunitiesBoxes:s,LoadMoreFormik:d}}),[r.edges,a,l.edges,u,i.edges,o,n]);return x.a.createElement(wx,m)},uE=function(e){var n,t="string"===typeof e.path?[e.path]:(null===(n=e.path)||void 0===n?void 0:n.length)?e.path:[],r=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t[r],i=new URLSearchParams(n||{}).toString(),o=Object(Tn.f)(a,e);return i?"".concat(o,"?").concat(i):o};return{is:function(n){return!!Object(Tn.g)(n,e)},getSimpleLink:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!t||t.isLocal,o=r(e,n,a),l=i?o:(null===t||void 0===t?void 0:t.canonicalUrl)||"#?#",c={external:!i,url:l};return c},getPath:r}},mE={exact:!0,path:"/discover/:tab(collections|communities)?",component:function(e){var n=e.match.params.tab,t="collections"===n?Kx.Collections:"communities"===n?Kx.Communities:n?null:Kx.Activities,r=Object(h.useMemo)((function(){return null===t?null:{basePath:"/discover",tab:t}}),[t]);return r?x.a.createElement(Oj,null,x.a.createElement(cE,r)):x.a.createElement(vh,null)}},sE=uE(mE),dE=function(){var e,n,t,r=(t={variables:{limit:Ee}},q.d(Vs,t)),a=nr(null===(e=r.data)||void 0===e||null===(n=e.me)||void 0===n?void 0:n.user.inbox,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(r=i.me)||void 0===r?void 0:r.user.inbox)&&(null===(a=e.me)||void 0===a?void 0:a.user.inbox)?Object(l.a)(Object(l.a)({},i),{},{me:Object(l.a)(Object(l.a)({},i.me),{},{user:Object(l.a)(Object(l.a)({},i.me.user),{},{inbox:t({prev:e.me.user.inbox,fetched:i.me.user.inbox})})})}):e}})}));return Object(h.useMemo)((function(){return{activitiesPage:a}}),[a])};function fE(){var e=Object(i.a)(["\n  background: ",";\n  height: 40px;\n  line-height: 40px;\n  border-bottom: ",";\n"]);return fE=function(){return e},e}var vE=function(e){var n=e.basePath,t=e.InboxElements,r=e.nextInboxFormik;return h.createElement(Mt,null,h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Nt,null,h.createElement(pE,{px:2},h.createElement(Pn.Text,{variant:"suptitle"},h.createElement(Yn.Trans,{id:"My timeline"}))),h.createElement(Tn.d,null,h.createElement(Tn.b,{path:"".concat(n)},h.createElement(Pt,null,t),r&&h.createElement(ct,{LoadMoreFormik:r})))))),h.createElement(Ox,null))},pE=Sn(Pn.Box)(fE(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),bE={id:"My Activities"},gE=function(e){var n=e.basePath;wi(bE);var t=dE().activitiesPage,r=Object(c.a)(t.formiks,1)[0],a=Object(h.useMemo)((function(){return x.a.createElement(x.a.Fragment,null,t.edges.map((function(e){return e&&x.a.createElement(lI,{activityId:e.id,key:e.id})})))}),[t]),i=Object(h.useMemo)((function(){return{InboxElements:a,nextInboxFormik:r,basePath:n}}),[a,r,n]);return x.a.createElement(vE,i)},hE=function(e){var n=e.children,t=e.to,r=Oa(),a=r.me;return r.loading?null:a?x.a.createElement(Tn.a,{to:t}):x.a.createElement(x.a.Fragment,null,n)},xE=function(e){var n=e.children;return x.a.createElement(hE,{to:"/"},n)},EE=function(e){var n=e.children,t=e.to,r=Oa(),a=r.me;return r.loading?null:a?x.a.createElement(x.a.Fragment,null,n):x.a.createElement(Tn.a,{to:t})},yE=function(e){var n=e.children;return x.a.createElement(EE,{to:"/login"},n)},OE={exact:!0,path:"/",component:function(e){e.match;var n=Object(h.useMemo)((function(){return{basePath:""}}),[]);return n?x.a.createElement(yE,null,x.a.createElement(Oj,null,x.a.createElement(gE,n))):x.a.createElement(vh,null)}},jE=uE(OE),kE=function(){var e=Object(h.useContext)(Fi).isOpen,n=ph().myCommunityFollowsPage,t=Object(c.a)(n.formiks,1)[0],r=Object(h.useMemo)((function(){return n.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){var n;return{icon:(null===(n=e.icon)||void 0===n?void 0:n.url)||"",link:ET.getPath({communityId:e.id,tab:void 0},void 0),name:e.name}}))}),[n]),a=Object(h.useMemo)((function(){return{isSidebarOpen:e,status:mh.Loaded,communities:r,LoadMoreFormik:t,discoverPath:sE.getPath({tab:void 0},void 0),homePath:jE.getPath(void 0,void 0)}}),[r,e,t]);return x.a.createElement(Dh,a)},wE=t(922);function CE(){var e=Object(i.a)(["\n  width: 18px;\n  height: 18px;\n  position: relative;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  z-index: 10;\n  margin: 0;\n  &:focus {\n    outline: none;\n  }\n"]);return CE=function(){return e},e}function IE(){var e=Object(i.a)(["\n  line-height: 50px;\n  height: 50px;\n  cursor: pointer;\n  align-items: center;\n\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n\n    .--rtl & {\n      margin-right: 0px;\n      margin-left: 8px;\n    }\n\n    & svg {\n      vertical-align: sub;\n    }\n  }\n\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n\n  &:hover {\n    color: ",";\n  }\n"]);return IE=function(){return e},e}function TE(){var e=Object(i.a)(["\n  justify-content: flex-end;\n  padding: 12px 20px;\n"]);return TE=function(){return e},e}function FE(){var e=Object(i.a)(["\n  padding: 8px;\n"]);return FE=function(){return e},e}var SE=function(e){var n=e.toggleDropdown,t=e.createCommunity,r=e.createIntent,a=e.createResource;return h.createElement(ic,{orientation:"top",close:n},h.createElement(ME,null,h.createElement(LE,{onClick:n},h.createElement(Bo.default,{color:"#05244F"}))),h.createElement(PE,{lined:!0},h.createElement(_E,{variant:"link",onClick:function(){return t()}},h.createElement("span",null,h.createElement(Wl.default,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"New Community"}))),h.createElement(_E,{variant:"link",onClick:function(){return r()}},h.createElement("span",null,h.createElement(Xl.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Create a new intent"}))),h.createElement(_E,{variant:"link",onClick:function(){return a()}},h.createElement("span",null,h.createElement(ec.a,{size:16,color:"#333"})),h.createElement(Pn.Text,{variant:"text"},h.createElement(Yn.Trans,{id:"Create a new resource"})))))},PE=Sn.div(FE()),ME=Sn(Pn.Flex)(TE()),_E=Sn(Pn.Flex)(IE(),(function(e){return e.theme.colors.primary})),LE=Sn.button(CE());function NE(){var e=Object(i.a)(["\n    mutation createOffer($action: String!, $name: String!, $communityId: ID!, $note: String, $hasUnit: ID!, $hasNumericalValue: Float!, $atLocation: ID) {\n  createOffer(intent: {action: $action, name: $name, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}, atLocation: $atLocation, inScopeOf: [$communityId], note: $note}) {\n    intent {\n      id\n      inScopeOf {\n        __typename\n      }\n      name\n      note\n      atLocation {\n        lat\n        long\n        alt\n      }\n      resourceQuantity {\n        hasUnit {\n          label\n          id\n        }\n        hasNumericalValue\n      }\n    }\n  }\n}\n    "]);return NE=function(){return e},e}function UE(){var e=Object(i.a)(["\n    mutation createIntent($name: String!, $action: String!, $communityId: ID!, $note: String) {\n  createIntent(intent: {action: $action, name: $name, inScopeOf: [$communityId], note: $note}) {\n    intent {\n      id\n      inScopeOf {\n        __typename\n      }\n      name\n      note\n    }\n  }\n}\n    "]);return UE=function(){return e},e}U()(UE());var RE=U()(NE());var AE=function(){var e,n=q.c(RE,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c,u,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,o=n.note,l=n.communityId,c=n.atLocation,u=n.hasNumericalValue,m=n.hasUnit,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{name:t,note:o,communityId:l,action:"produced",atLocation:c,hasUnit:m,hasNumericalValue:u}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(h.useMemo)((function(){return{create:l}}),[l])};function zE(){var e=Object(i.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n\n  > button {\n    width: 100%;\n  }\n\n  .event_btn {\n    height: 40px;\n    text-transform: uppercase;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    letter-spacing: 1px;\n  }\n"]);return zE=function(){return e},e}function BE(){var e=Object(i.a)(["\n  .d-flex {\n    margin-top: 10px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    & > div {\n      width: calc(50% - 5px);\n    }\n\n    button {\n      width: 100%;\n      background: #cdcdcd;\n    }\n  }\n"]);return BE=function(){return e},e}function DE(){var e=Object(i.a)(["\n  display: block;\n  font-size: 10px;\n  color: #aaa;\n  font-family: 'Arial', sans-serif;\n  text-transform: uppercase;\n  margin-bottom: 2px;\n"]);return DE=function(){return e},e}function $E(){var e=Object(i.a)(["\n  display: block;\n  position: relative;\n"]);return $E=function(){return e},e}function qE(){var e=Object(i.a)(["\n  margin: 0 10px 12px 0;\n"]);return qE=function(){return e},e}var VE=Sn("div")(qE()),QE=Sn("div")($E()),WE=Sn("label")(DE()),HE=Sn("form")(BE()),JE=Sn.div(zE());function KE(){var e=Object(i.a)(["\n  background-color: transparent !important;\n  color: #ff5a5f !important;\n  text-align: right !important;\n  line-height: 1 !important;\n"]);return KE=function(){return e},e}function ZE(){var e=Object(i.a)(["\n  textarea,\n  input {\n    opacity: ",";\n    cursor: ",";\n    border: 1px solid #05244f;\n    border-radius: 4px;\n    height: 40px;\n    display: block;\n    width: 100%;\n    box-sizing: border-box;\n    padding: 0 10px;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    color: #666666;\n    letter-spacing: 1px;\n    margin-bottom: 10px;\n  }\n  textarea {\n    padding: 10px;\n    height: 120px;\n\n    &#eventNote {\n      height: 60px;\n    }\n  }\n"]);return ZE=function(){return e},e}var GE=function(e){var n=e.id,t=e.name,r=e.type,a=void 0===r?"text":r,i=e.readOnly,o=void 0!==i&&i,l=e.onChange,c=e.placeholder,u=void 0===c?"":c,m=e.label,s=e.value,d=void 0===s?"":s,f=e.hint,v=void 0===f?{class:"error",value:""}:f,p=e.disabled,b=void 0!==p&&p;return x.a.createElement(YE,{disabled:b},x.a.createElement("label",{htmlFor:n},m),"textarea"!==a&&x.a.createElement("input",{id:n,type:a,name:t,readOnly:o,placeholder:u,value:d,onChange:l,disabled:b}),"textarea"===a&&x.a.createElement("textarea",{id:n,name:t,placeholder:u,value:d,onChange:l,disabled:b}),x.a.createElement("span",{className:"hint ".concat(v.class)},v.value))},YE=Sn("div")(ZE(),(function(e){return!0===e.disabled?"0.7":"1"}),(function(e){return!0===e.disabled?"default":"text"})),XE=Sn(No)(KE()),ey=t(239);function ny(){var e=Object(i.a)(["\n  margin-bottom: 10px;\n  small {\n    display: block;\n    padding-top: 6px;\n    font-size: 10px;\n    color: #aaa;\n  }\n  b,\n  .select__value-container,\n  .select__single-value {\n    display: block;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    color: #666666;\n    letter-spacing: 1px;\n  }\n  .select__control > div {\n    height: 36px;\n  }\n  .select__value-container > div:not(.select__single-value) {\n    height: 36px;\n    padding: 0;\n    margin: 0;\n    line-height: 36px;\n  }\n  .select__value-container {\n    height: 36px;\n    padding: 0 10px;\n  }\n  .select__control--menu-is-open,\n  .select__control--is-focused {\n    border-color: #05244f !important;\n    box-shadow: none;\n\n    small {\n      display: none;\n    }\n  }\n  .select__control {\n    border: 1px solid #05244f;\n    border-radius: 4px;\n    height: 40px;\n  }\n  ",";\n  margin: '0 10px 0 0 ';\n\n  cursor: 'pointer';\n  .select__option--is-disabled {\n    opacity: 0.5;\n  }\n  &:hover && not:['disabled'] {\n    background: ",";\n  }\n"]);return ny=function(){return e},e}var ty=Sn(ey.a)(ny(),Object(tt.e)("background, 0.2s"),(function(e){return"primary"===e.variant||"danger"===e.variant?Object(tt.b)("0.1",e.theme.colors.primary):Object(tt.d)("0.3",e.theme.colors.primary)})),ry=function(e){var n=e.onSelect,t=e.disabled,r=void 0!==t&&t,a=e.variant,i=e.placeholder,o=void 0===i?"":i,l=e.name,c=e.options,u=e.id,m=e.value,s=c?c.map((function(e){return e.isDisabled?{id:e.id,value:e.label,isDisabled:e.isDisabled,label:x.a.createElement("span",null,x.a.createElement("b",null,e.label),e.note&&x.a.createElement("small",null,e.note))}:{id:e.id,value:e.label,label:x.a.createElement("span",null,x.a.createElement("b",null,e.label),e.note&&x.a.createElement("small",null,e.note))}})):[];return x.a.createElement(ty,{onChange:function(e){return n(l,{id:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.value})},variant:a,placeholder:o,disabled:r,isOptionDisabled:function(e){return e.isDisabled},className:"basic-single",classNamePrefix:"select",value:s.find((function(e){return e.id===(null===m||void 0===m?void 0:m.id)}))||null,isDisabled:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:l,id:u,options:s})},ay=function(e){var n=e.formik,t=e.cancel,r=e.communities,a=e.unitPages,i=e.spatialThings,o=x.a.useState([]),s=Object(c.a)(o,2),d=s[0],f=s[1];return x.a.useEffect((function(){if(null===a||void 0===a?void 0:a.length){var e=a.map((function(e){return{id:e.id,label:"".concat(e.label," / ").concat(e.symbol)}}));f(e)}}),[a]),x.a.createElement(ul,null,x.a.createElement("form",{onSubmit:n.handleSubmit},x.a.createElement(vl,null,x.a.createElement(Pn.Heading,{m:2},x.a.createElement(Yn.Trans,{id:"Create an intent"}))),x.a.createElement(ju,null,x.a.createElement(Ou,null,x.a.createElement(Eu,null,x.a.createElement(QE,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("Resource")),x.a.createElement(GE,{type:"text",id:"name",name:"name",disabled:n.isSubmitting,onChange:n.handleChange,hint:{class:"error",value:""},placeholder:Object(Yn.i18nMark)("Name of your resource"),value:n.values.name})),x.a.createElement(dl,null,60-n.values.name.length),n.errors.name&&x.a.createElement(al,null,x.a.createElement(XE,{variant:"negative"},n.errors.name))),x.a.createElement(Eu,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("community name")),x.a.createElement(ry,{onSelect:function(e,t){n.setValues(Object(l.a)(Object(l.a)({},n.values),{},Object(u.a)({},e,t.id)))},value:{id:n.values.communityId,label:""},variant:"primary",id:"communityId",name:"communityId",options:r}),n.errors.communityId&&x.a.createElement(al,null,x.a.createElement(XE,{variant:"negative"},n.errors.communityId))),x.a.createElement(yu,null,x.a.createElement(QE,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("unit")),x.a.createElement(ry,{onSelect:function(e,t){n.setValues(Object(l.a)(Object(l.a)({},n.values),{},Object(u.a)({},e,t.id)))},options:d,placeholder:Object(Yn.i18nMark)("unit"),value:{id:n.values.hasUnit,label:""},variant:"primary",id:"hasUnit",name:"hasUnit"}),n.errors.hasUnit&&x.a.createElement(al,null,x.a.createElement(XE,{variant:"negative"},n.errors.hasUnit))),x.a.createElement(QE,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("Numerical Value")),x.a.createElement(GE,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:n.handleChange,hint:{class:"error",value:""},placeholder:Object(Yn.i18nMark)("Numerical Value"),value:n.values.hasNumericalValue.toString()}),n.errors.hasNumericalValue&&x.a.createElement(al,null,x.a.createElement(XE,{variant:"negative"},n.errors.hasNumericalValue)))),x.a.createElement(Eu,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("location")),x.a.createElement(ry,{onSelect:function(e,t){n.setValues(Object(l.a)(Object(l.a)({},n.values),{},Object(u.a)({},e,t.id)))},options:null===i||void 0===i?void 0:i.map((function(e){return{id:e.id,value:e.id,label:e.name}})),placeholder:Object(Yn.i18nMark)("CustomSelect location"),value:{id:n.values.atLocation||"",label:""},variant:"primary",id:"atLocation",name:"atLocation"})),x.a.createElement(Eu,null,x.a.createElement(wu,{mt:2},x.a.createElement(QE,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("description")),x.a.createElement(GE,{type:"textarea",id:"note",name:"note",onChange:n.handleChange,disabled:n.isSubmitting,hint:{class:"error",value:""},placeholder:Object(Yn.i18nMark)("A description of your intent"),value:n.values.note})),x.a.createElement(dl,null,n.values.note?500-n.values.note.length:500),n.errors.note&&x.a.createElement(al,null,x.a.createElement(XE,{variant:"negative"},n.errors.note)))))),x.a.createElement(ml,null,x.a.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.a.createElement(Yn.Trans,{id:"Save"})),x.a.createElement(ot,{variant:"outline",onClick:t},x.a.createElement(Yn.Trans,{id:"Cancel"})))),x.a.createElement(m.b,null))};function iy(){var e=Object(i.a)(["\n    query users {\n  users {\n    edges {\n      id\n      name\n    }\n  }\n}\n    "]);return iy=function(){return e},e}function oy(){var e=Object(i.a)(["\n    query unitsPages {\n  unitsPages(limit: 30) {\n    edges {\n      id\n      symbol\n      label\n    }\n  }\n}\n    "]);return oy=function(){return e},e}function ly(){var e=Object(i.a)(["\n    query economicEventsFiltered($action: ID!) {\n  economicEventsFiltered(action: $action) {\n    id\n    provider {\n      id\n      name\n    }\n    receiver {\n      id\n      name\n    }\n  }\n}\n    "]);return ly=function(){return e},e}function cy(){var e=Object(i.a)(["\n    query spatialThingsPages {\n  spatialThingsPages(limit: 15) {\n    edges {\n      id\n      name\n      lat\n      long\n    }\n  }\n}\n    "]);return cy=function(){return e},e}var uy=U()(cy());function my(e){return q.d(uy,e)}var sy=U()(ly());var dy=U()(oy());function fy(e){return q.d(dy,e)}U()(iy());var vy=function(e){var n,t,r=e.done,a=e.communityId,i=Object(Tn.h)(),o=AE().create,l=ph().myCommunityFollowsPage,c=Object(h.useMemo)((function(){return l.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){return{id:e.id,label:e.name}}))}),[l]),u=null===(n=fy().data)||void 0===n?void 0:n.unitsPages,s=null===(t=my().data)||void 0===t?void 0:t.spatialThingsPages,d=xi.object().shape({name:xi.string().max(60,"Too Long!").required("Required"),note:xi.string().max(500,"Too Long!"),communityId:xi.string().required("Required"),hasUnit:xi.string().required("Required"),hasNumericalValue:xi.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),f={communities:c,formik:Object(er.a)({initialValues:{name:"",communityId:a||"",note:"",atLocation:"",hasUnit:"",hasNumericalValue:0},validateOnChange:!1,validateOnBlur:!1,validationSchema:d,enableReinitialize:!0,onSubmit:function(e){return o({name:e.name,communityId:e.communityId,note:e.note,atLocation:e.atLocation,hasUnit:e.hasUnit,hasNumericalValue:e.hasNumericalValue}).then((function(n){var t="/communities/".concat(e.communityId);!n.errors&&i.replace(t),!n.errors&&r(),!n.errors&&m.c.success("Intent was created",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})})).catch((function(e){return console.log(e)}))}}),unitPages:null===u||void 0===u?void 0:u.edges,spatialThings:(null===s||void 0===s?void 0:s.edges)||null,cancel:r};return h.createElement(ay,f)};function py(){var e=Object(i.a)(["\n    mutation createSpatialThing($lat: Float, $long: Float, $name: String!, $note: String) {\n  createSpatialThing(spatialThing: {lat: $lat, long: $long, name: $name, note: $note}) {\n    spatialThing {\n      id\n      lat\n      long\n      name\n      note\n    }\n  }\n}\n    "]);return py=function(){return e},e}var by=U()(py());var gy=function(){var e,n=q.c(by,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,o=n.lat,l=n.long,c=n.note,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{lat:o,long:l,name:t,note:c},refetchQueries:[(a={},u=void 0,{query:uy,variables:a,context:u})]}));case 4:case"end":return e.stop()}var a,u}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,i]);return Object(h.useMemo)((function(){return{createLocation:l}}),[l])},hy=t(316);function xy(){var e=Object(i.a)(["\n  margin-bottom: 10px;\n  position: relative;\n  z-index: 100;\n  small {\n    display: block;\n    padding-top: 6px;\n    font-size: 10px;\n    color: #aaa;\n  }\n [class*=\"css-2b097c-container\"] > div > div,\n [class*=\"css-2b097c-container\"] > div {\n    display: flex;\n    height: 36px;\n    margin: 0;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    color: #666666;\n    letter-spacing: 1px;\n    text-transform: uppercase;\n  }\n \n  .css-2b097c-container > div {\n    border-color: #05244f !important;\n    box-shadow: none;\n\n    small {\n      display: none;\n    }\n  }\n  \n  .zenpub__menu > div {\n    display: block !important;\n    background: #fff;\n    min-height: 120px;\n    min-width: 100%;\n    padding: 20px;\n    z-index: 200;\n    box-shadow: 0px 2px 4px 0px #0000001f;\n  }\n  .zenpub__menuList > * ,\n  .zenpub__menuList > * > * {\n     display: block;\n  }\n  .zenpub__input {\n    width: 100%;\n    height: 36px;\n    margin: 0;\n  }\n  .select__control {\n    border: 1px solid #05244f;\n    border-radius: 4px;\n    height: 40px;\n  }\n  cursor: 'pointer';\n  }\n"]);return xy=function(){return e},e}var Ey=function(e){var n=e.formik,t=e.onSelect;return h.createElement(yy,null,h.createElement(hy.a,{selectProps:{placeholder:"Please add your city and country location",onChange:function(e){Object(hy.b)(e.label).then((function(e){e[0]&&(t(!0),n.handleChange({target:{name:"name",value:e[0].formatted_address}}),n.handleChange({target:{name:"lat",value:e[0].geometry.location.lat()}}),n.handleChange({target:{name:"long",value:e[0].geometry.location.lng()}}))}))},classNamePrefix:"zenpub"},onLoadFailed:function(e){return console.error("Could not inject Google script",e)},apiKey:"AIzaSyBlbsdiikbCINjPLwD7NNwtsA8-vTcrr0g"}))},yy=Sn("div")(xy()),Oy=t(943),jy=t(946),ky=t(921),wy=t(947),Cy=(t(737),t(68)),Iy=t(461);function Ty(){var e=Object(i.a)(["\n    height: 200px;\n  "]);return Ty=function(){return e},e}function Fy(){var e=Object(i.a)(["\n  width: 100%;\n  height: 400px;\n  position: relative;\n  z-index: 0;\n\n  ",";\n"]);return Fy=function(){return e},e}var Sy=t.n(Iy).a.renderToString(x.a.createElement(zl.a,{size:"30",color:Cn.colors.primary,fill:Cn.colors.secondary})),Py=Object(Cy.divIcon)({className:"maker--pin",html:Sy,iconSize:[30,30]}),My=function(e){var n=e.center,t=e.zoom,r=void 0===t?20:t,a=e.markers,i=void 0===a?[]:a,o=e.tileAttribution,l=void 0===o?'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors':o,c=function(e,n){return n||(1===e.length?e[0].position:e.length>1?new Cy.LatLngBounds(e.map((function(e){var n=e.position;return[n.lat,n.lng]}))).getCenter():void 0)}(i,n);return x.a.createElement(_y,null,c&&x.a.createElement(Oy.a,{center:c,zoom:r,style:{height:"100%",width:"100%"}},x.a.createElement(jy.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:l}),i.map((function(e,n){var t=e.position,r=e.popup;return x.a.createElement(ky.a,{icon:Py,key:n,position:t},r&&x.a.createElement(wy.a,null,r))}))))},_y=j.default.div(Fy(),k.a.lessThan("medium")(Ty()));function Ly(){var e=Object(i.a)(["\n         flex-basis: unset;\n      "]);return Ly=function(){return e},e}function Ny(){var e=Object(i.a)(["\n        display: block;\n      "]);return Ny=function(){return e},e}function Uy(){var e=Object(i.a)(["\n  margin-bottom: 10px;\n  \n  .d-flex {\n    display: flex;\n    justify-content: space-between;\n    align-items: stretch;\n    ",";\n\n    .item_col-6 {\n      flex-basis: calc(50% - 5px);\n      ",";\n    }\n    \n    .coordinate-container {\n      display: flex;\n      justify-content: space-between;\n      align-items: stretch;\n    }\n    .coordinate {\n      flex-basis: calc(50% - 5px);\n    }\n  }\n  small {\n    display: block;\n    padding-top: 6px;\n    font-size: 10px;\n    color: #aaa;\n  }\n [class*=\"css-2b097c-container\"] > div > div,\n [class*=\"css-2b097c-container\"] > div {\n    display: flex;\n    height: 36px;\n    margin: 0;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    color: #666666;\n    letter-spacing: 1px;\n    text-transform: uppercase;\n  }\n \n  .css-2b097c-container > div {\n    border-color: #05244f !important;\n    box-shadow: none;\n\n    small {\n      display: none;\n    }\n  }\n  \n  .zenpub__menu {\n    background: #fff;\n    max-height: 200px;\n    padding: 20;\n    box-shadow: 0px 2px 4px 0px #0000001f;\n  }\n  \n  .zenpub__input {\n    width: 100%;\n    height: 36px;\n    margin: 0;\n  }\n  .select__control {\n    border: 1px solid #05244f;\n    border-radius: 4px;\n    height: 40px;\n  }\n  cursor: 'pointer';\n  }\n"]);return Uy=function(){return e},e}var Ry,Ay=function(e){var n=e.formik,t=Object(h.useState)(!1),r=Object(c.a)(t,2),a=r[0],i=r[1];return h.createElement(ul,null,h.createElement("form",{onSubmit:function(e){e.preventDefault(),n.handleSubmit()}},h.createElement(vl,null,h.createElement(Pn.Heading,{m:2},h.createElement(Yn.Trans,{id:"{0}",values:{0:Object(Yn.i18nMark)("Create Location")}}))),h.createElement(ju,null,h.createElement(Ou,null,h.createElement(zy,null,h.createElement(Eu,null,h.createElement(Ey,{formik:n,onSelect:i})),a&&h.createElement("div",{className:"d-flex"},h.createElement("div",{className:"item_col-6"},h.createElement(My,{center:{lat:n.values.lat,lng:n.values.long},zoom:12})),h.createElement("div",{className:"item_col-6"},h.createElement(QE,null,h.createElement(WE,null,Object(Yn.i18nMark)("Name")),h.createElement(GE,{type:"text",id:"name",name:"name",disabled:n.isSubmitting,onChange:n.handleChange,placeholder:Object(Yn.i18nMark)("Location name"),value:n.values.name}),h.createElement(dl,null,60-n.values.name.length)),n.errors.name&&h.createElement(Pn.CustomAlert,{variant:"negative"},n.errors.name),h.createElement("div",{className:"coordinate-container"},h.createElement("div",{className:"coordinate"},h.createElement(QE,null,h.createElement(WE,null,Object(Yn.i18nMark)("Lat")),h.createElement(GE,{type:"text",id:"lat",name:"lat",readOnly:!0,disabled:n.isSubmitting,onChange:n.handleChange,placeholder:Object(Yn.i18nMark)("Name"),value:n.values.lat}))),h.createElement("div",{className:"coordinate"},h.createElement(QE,null,h.createElement(WE,null,Object(Yn.i18nMark)("Long")),h.createElement(GE,{type:"text",id:"long",name:"long",readOnly:!0,disabled:n.isSubmitting,onChange:n.handleChange,value:n.values.long})))),h.createElement(QE,null,h.createElement(WE,null,"note"),h.createElement(GE,{id:"note",type:"textarea",name:"note",onChange:n.handleChange,placeholder:Object(Yn.i18nMark)("Note"),value:n.values.note})),n.errors.note&&h.createElement(Pn.CustomAlert,{variant:"negative"},n.errors.note),h.createElement(ot,{variant:"primary",type:"submit",onClick:n.handleSubmit,style:{width:"100%"}},h.createElement(Yn.Trans,{id:"Create Location"})))))))))},zy=Sn("div")(Uy(),k.a.lessThan("medium")(Ny()),k.a.lessThan("medium")(Ly())),By=(xi.object({name:xi.string().min(2).max(60).required(),summary:xi.string().max(500),icon:(Ry=xi.mixed()).test.apply(Ry,Object(w.a)(_l))}),function(e){var n=e.done,t=gy().createLocation,r=xi.object().shape({name:xi.string().max(60,"Too Long!").required("Required"),note:xi.string().max(500,"Too Long!")}),a={formik:Object(er.a)({initialValues:{name:"",lat:"",long:"",note:""},validateOnChange:!1,validateOnBlur:!1,validationSchema:r,enableReinitialize:!0,onSubmit:function(e){return t({name:e.name,lat:e.lat,long:e.long,note:e.note}).then((function(e){e.errors||(n(!1),m.c.success("Location was created",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}))})).catch((function(e){return console.log(e)}))}})};return x.a.createElement(Ay,a)}),Dy=t(125);function $y(){var e=Object(i.a)(["\n    mutation createEconomicEventAndExistResource($id: ID!, $action: ID!, $provider: ID!, $receiver: ID!, $hasUnit: ID!, $hasNumericalValue: Float!, $eventNote: String, $hasPointInTime: DateTime) {\n  createEconomicEvent(event: {resourceInventoriedAs: $id, note: $eventNote, action: $action, provider: $provider, receiver: $receiver, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}, hasPointInTime: $hasPointInTime}) {\n    economicEvent {\n      id\n      hasPointInTime\n    }\n    economicResource {\n      id\n    }\n  }\n}\n    "]);return $y=function(){return e},e}function qy(){var e=Object(i.a)(["\n    mutation createEconomicEventAndNewResource($note: String, $atLocation: ID, $action: ID!, $provider: ID!, $receiver: ID!, $hasUnit: ID!, $hasNumericalValue: Float!, $name: String, $image: URI, $eventNote: String, $hasPointInTime: DateTime) {\n  createEconomicEvent(event: {action: $action, atLocation: $atLocation, provider: $provider, receiver: $receiver, note: $eventNote, hasPointInTime: $hasPointInTime, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}}, newInventoriedResource: {note: $note, name: $name, image: $image, currentLocation: $atLocation}) {\n    economicEvent {\n      id\n      hasPointInTime\n      track {\n        __typename\n      }\n    }\n    economicResource {\n      id\n    }\n  }\n}\n    "]);return qy=function(){return e},e}var Vy=U()(qy());var Qy=U()($y());var Wy=function(){var e,n=q.c(Vy,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c,u,m,s,d,f,v,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,o=n.note,l=n.eventNote,c=n.hasPointInTime,u=n.action,m=n.atLocation,s=n.provider,d=n.receiver,f=n.hasUnit,v=n.hasNumericalValue,p=n.image,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{name:t,note:o,eventNote:l,hasPointInTime:c,atLocation:m,action:u,provider:s,receiver:d,hasUnit:f,hasNumericalValue:v,image:p}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(h.useMemo)((function(){return{create:l}}),[l])},Hy=function(e,n){if("string"===typeof n)return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return{id:e.id,label:e[n]}})):[];var t=function(e){var t="".concat(n.template);return n.variables.forEach((function(n){t=t.replace(n,"".concat(e[n]))})),t};return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return{id:e.id,label:t(e)}})):[]},Jy=t(234),Ky=t.n(Jy);t(397);function Zy(){var e=Object(i.a)(["\n  text-align: right;\n  margin: 10px 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n\n  & > * {\n    padding: 5px 0;\n  }\n"]);return Zy=function(){return e},e}var Gy=function(e){var n=e.title,t=e.formik,r=e.done,a=e.unitPages,i=e.actionList,o=e.spatialThings,s=e.providerList,d=e.receiverList,f=e.toggleCreateLocation,v=e.setAction,p=void 0===v?function(){}:v,b=x.a.useState([]),g=Object(c.a)(b,2),h=g[0],E=g[1],y=x.a.useState([]),O=Object(c.a)(y,2),j=O[0],k=O[1],w=x.a.useState([]),C=Object(c.a)(w,2),I=C[0],T=C[1],F=x.a.useState(new Date),S=Object(c.a)(F,2),P=S[0],M=S[1],_=x.a.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{image:e}))}),[t]),L=Oa().me;x.a.useEffect((function(){if(null===a||void 0===a?void 0:a.length){var e=a.map((function(e){return{id:e.id,label:"".concat(e.label," / ").concat(e.symbol)}}));T(e)}}),[a]),x.a.useEffect((function(){var e,n,r,a;E(Hy(s,"name")),k(Hy(d,"name")),t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{hasPointInTime:(new Date).toISOString(),provider:{id:(null===s||void 0===s||null===(e=s.find((function(e){var n;return e.id===(null===L||void 0===L||null===(n=L.user)||void 0===n?void 0:n.id)})))||void 0===e?void 0:e.id)||"",label:(null===s||void 0===s||null===(n=s.find((function(e){var n;return e.id===(null===L||void 0===L||null===(n=L.user)||void 0===n?void 0:n.id)})))||void 0===n?void 0:n.name)||""},receiver:{id:(null===d||void 0===d||null===(r=d.find((function(e){var n;return e.id===(null===L||void 0===L||null===(n=L.user)||void 0===n?void 0:n.id)})))||void 0===r?void 0:r.id)||"",label:(null===d||void 0===d||null===(a=d.find((function(e){var n;return e.id===(null===L||void 0===L||null===(n=L.user)||void 0===n?void 0:n.id)})))||void 0===a?void 0:a.name)||""}}))}),[s,d,L]),x.a.useEffect((function(){T(Hy(null===a||void 0===a?void 0:a.edges,{variables:["label","symbol"],template:"label / symbol"}))}),[a]);var N="string"===typeof t.values.image?t.values.image:"";return x.a.createElement(ul,null,x.a.createElement("form",{onSubmit:t.handleSubmit},x.a.createElement(vl,null,x.a.createElement(Pn.Heading,{m:2},x.a.createElement(Yn.Trans,{id:"{title}",values:{title:n}}))),x.a.createElement(ju,null,x.a.createElement(Ou,null,x.a.createElement(Eu,null,x.a.createElement("div",{className:"d-flex"},x.a.createElement(Pn.Box,{sx:{width:"140",height:"140"},className:"item_photo"},x.a.createElement(wo,{initialUrl:N,onFileSelect:_,filePattern:"image/*"})),x.a.createElement("div",{className:"item_info"},x.a.createElement(Pn.Box,null,x.a.createElement(QE,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("Resource")),x.a.createElement(GE,{type:"text",id:"name",name:"name",disabled:t.isSubmitting,onChange:t.handleChange,placeholder:Object(Yn.i18nMark)("Name of your resource"),value:t.values.name}),x.a.createElement(dl,null,60-t.values.name.length)),t.errors.name&&x.a.createElement(XE,{variant:"negative"},t.errors.name)),x.a.createElement(Pn.Box,null,x.a.createElement(QE,null,x.a.createElement(WE,null,"Event note"),x.a.createElement(GE,{id:"eventNote",type:"textarea",name:"eventNote",onChange:t.handleChange,placeholder:Object(Yn.i18nMark)("Event Note"),value:t.values.eventNote})),x.a.createElement(dl,null,t.values.eventNote?500-t.values.eventNote.length:500),t.errors.eventNote&&x.a.createElement(XE,{variant:"negative"},t.errors.eventNote))))),x.a.createElement(Eu,null,x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"Provider"),x.a.createElement(ry,{onSelect:function(e,n){t.setValues(Object(l.a)(Object(l.a)({},t.values),{},Object(u.a)({},e,n)))},placeholder:Object(Yn.i18nMark)("Provider"),options:h,variant:"primary",value:t.values.provider,id:"provider",name:"provider"})),t.errors.provider&&x.a.createElement(XE,{variant:"negative"},t.errors.provider&&"Required")),x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"Receiver"),x.a.createElement(ry,{onSelect:function(e,n){t.setValues(Object(l.a)(Object(l.a)({},t.values),{},Object(u.a)({},e,n)))},placeholder:Object(Yn.i18nMark)("Receiver"),options:j,variant:"primary",value:t.values.receiver,id:"receiver",name:"receiver"})),t.errors.receiver&&x.a.createElement(XE,{variant:"negative"},t.errors.receiver&&"Required")))),x.a.createElement(Eu,null,x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6"},x.a.createElement(Pn.Box,null,x.a.createElement(QE,null,x.a.createElement(WE,null,"Actions"),x.a.createElement(ry,{onSelect:function(e,n){p(n.id),t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{action:n}))},options:i,variant:"primary",id:"actions",name:"actions",placeholder:Object(Yn.i18nMark)("Select action"),value:t.values.action})),t.errors.action&&x.a.createElement(XE,{variant:"negative"},t.errors.action&&"Required")),x.a.createElement(Pn.Box,null,x.a.createElement(WE,null,"Event date"),x.a.createElement("div",{style:{width:"100%",border:"1px solid #05244f",padding:"0 10px"}},x.a.createElement(Ky.a,{selected:P,onChange:function(e){M(e),t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{hasPointInTime:e.toISOString()}))},dateFormat:"dd/MM/yyyy"})))),x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"Location"),x.a.createElement(ry,{onSelect:function(e,n){t.setValues(Object(l.a)(Object(l.a)({},t.values),{},Object(u.a)({},e,n)))},options:null===o||void 0===o?void 0:o.map((function(e){return{id:e.id,value:e.id,label:e.name}})),placeholder:Object(Yn.i18nMark)("CustomSelect location"),value:t.values.atLocation,variant:"primary",id:"atLocation",name:"atLocation"}),x.a.createElement(Yy,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("If you did not find your locations in the list, you can create it")),x.a.createElement(ot,{variant:"show-more",onClick:function(){return f(!0)}},x.a.createElement(Yn.Trans,{id:"Create Location"}))))))),x.a.createElement(Eu,null,x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"unit"),x.a.createElement(ry,{onSelect:function(e,n){t.setValues(Object(l.a)(Object(l.a)({},t.values),{},Object(u.a)({},e,n)))},options:I,variant:"primary",id:"hasUnit",name:"hasUnit",placeholder:Object(Yn.i18nMark)("Unit"),value:t.values.hasUnit})),t.errors.hasUnit&&x.a.createElement(XE,{variant:"negative"},t.errors.hasUnit&&"Required")),x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"numerical value"),x.a.createElement(GE,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:t.handleChange,placeholder:Object(Yn.i18nMark)("Numerical Value"),value:t.values.hasNumericalValue})),t.errors.hasNumericalValue&&x.a.createElement(XE,{variant:"negative"},t.errors.hasNumericalValue)))),x.a.createElement(Eu,null,x.a.createElement(QE,null,x.a.createElement(WE,null,"Resource note"),x.a.createElement(GE,{id:"note",type:"textarea",name:"note",onChange:t.handleChange,placeholder:Object(Yn.i18nMark)("Resource note"),value:t.values.note})),x.a.createElement(dl,null,t.values.note?500-t.values.note.length:500),t.errors.note&&x.a.createElement(XE,{variant:"negative"},t.errors.note)))),x.a.createElement(ml,null,x.a.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.a.createElement(Yn.Trans,{id:"Save"})),x.a.createElement(ot,{variant:"outline",onClick:r},x.a.createElement(Yn.Trans,{id:"Cancel"})))),x.a.createElement(m.b,null))},Yy=Sn("div")(Zy());function Xy(){var e=Object(i.a)(["\n    query agents {\n  agents {\n    id\n    name\n  }\n}\n    "]);return Xy=function(){return e},e}function eO(){var e=Object(i.a)(["\n    mutation createDefaultEconomicEvent($name: String, $note: String, $action: ID!) {\n  createEconomicEvent(event: {action: $action, note: $note}, newInventoriedResource: {name: $name, note: $note}) {\n    economicEvent {\n      id\n      note\n    }\n  }\n}\n    "]);return eO=function(){return e},e}var nO=U()(eO());var tO=U()(Xy());var rO=function(){var e,n,t=q.c(nO,n),r=Object(c.a)(t,2),i=r[0],l=r[1],u=Oa().me,s=function(e){return q.d(sy,e)}({variables:{action:"transfer"}}).data,d=null===s||void 0===s||null===(e=s.economicEventsFiltered)||void 0===e?void 0:e.map((function(e){return e.provider})),f=Object(h.useState)(!0),v=Object(c.a)(f,2),p=v[0],b=v[1];Object(h.useEffect)((function(){void 0!==d&&void 0!==u&&b(!!(null===d||void 0===d?void 0:d.some((function(e){return e.id===(null===u||void 0===u?void 0:u.user.id)}))))}),[d,u]);var g=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.note,r=n.name,o=n.action,!l.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",i({variables:{note:t,name:r,action:o},refetchQueries:[(a={action:"transfer"},c=void 0,{query:sy,variables:a,context:c})]}).then((function(){b(!0),m.c.success("You name added in providers list",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})})).catch((function(e){m.c.error("You name does not add in providers list: ".concat(e),{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})})));case 4:case"end":return e.stop()}var a,c}),e)})));return function(n){return e.apply(this,arguments)}}(),[l,i]),x=p?null:g;return Object(h.useMemo)((function(){return{createDefaultResource:x,isAgent:p}}),[x,p])};function aO(){var e=Object(i.a)(["\n    query actions {\n  actions {\n    label\n    id\n    note\n  }\n}\n    "]);return aO=function(){return e},e}var iO=U()(aO());var oO,lO=function(e){var n,t,r,a=e.children,i=h.useState([]),o=Object(c.a)(i,2),u=o[0],m=o[1],s=h.useState([]),d=Object(c.a)(s,2),f=d[0],v=d[1],p=q.d(iO,r),b=function(e){return q.d(tO,e)}().data,g=rO(),x=g.createDefaultResource,E=g.isAgent;h.useEffect((function(){E||x&&x({name:"My first inventory",note:"Created automatically",action:"transfer"})}),[E]),h.useEffect((function(){var e=null===b||void 0===b?void 0:b.agents,n=null===b||void 0===b?void 0:b.agents,t=[];(null===e||void 0===e?void 0:e.length)&&e.forEach((function(e){!t.some((function(n){return n.id===e.id}))&&t.push(e)}));var r=[];(null===n||void 0===n?void 0:n.length)&&n.forEach((function(e){!r.some((function(n){return n.id===e.id}))&&r.push(e)})),m(t),v(r)}),[b]);var y=fy(),O=null===(n=p.data)||void 0===n?void 0:n.actions,j=null===(t=y.data)||void 0===t?void 0:t.unitsPages,k={actionList:null===O||void 0===O?void 0:O.map((function(e){return["transfer","consume","produce"].includes(e.id)?Object(l.a)(Object(l.a)({},e),{},{isDisabled:!1}):Object(l.a)(Object(l.a)({},e),{},{isDisabled:!0})})),providerList:u,receiverList:f,unitPages:j,setAction:function(){}},w=h.Children.map(a,(function(e){return h.isValidElement(e)?h.cloneElement(e,Object(l.a)({},k)):e}));return h.createElement("div",null,w)},cO=(xi.object({name:xi.string().min(2).max(60).required(),summary:xi.string().max(500),icon:(oO=xi.mixed()).test.apply(oO,Object(w.a)(_l))}),function(e){var n,t,r=e.done,a=e.resource,i=e.toggleCreateLocation,o=Object(Dy.a)(e,["done","resource","toggleCreateLocation"]),c=Object(Tn.h)(),u=Wy().create,s=null===(n=my().data)||void 0===n?void 0:n.spatialThingsPages,d=xi.object().shape({name:xi.string().max(60,"Too Long!").required("Required"),note:xi.string().max(500,"Too Long!"),action:xi.object().shape({id:xi.string().required("Required")}),provider:xi.object().shape({id:xi.string().required("Required")}),receiver:xi.object().shape({id:xi.string().required("Required")}),hasUnit:xi.object().shape({id:xi.string().required("Required")}),hasNumericalValue:xi.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),f=Object(er.a)({initialValues:{name:(null===a||void 0===a?void 0:a.name)||"",note:(null===a||void 0===a?void 0:a.note)||"",eventNote:(null===a||void 0===a?void 0:a.eventNote)||"",hasPointInTime:(null===a||void 0===a?void 0:a.hasPointInTime)||"",image:(null===a||void 0===a?void 0:a.image)||"",atLocation:{id:(null===a||void 0===a||null===(t=a.currentLocation)||void 0===t?void 0:t.id)||"",label:""},action:{id:"",label:""},provider:{id:"",label:"",note:""},receiver:{id:"",label:"",note:""},hasUnit:{id:"",label:"",note:""},hasNumericalValue:0},validateOnChange:!1,validateOnBlur:!1,validationSchema:d,enableReinitialize:!0,onSubmit:function(e){var n;return u({name:e.name,action:e.action.id,note:e.note,eventNote:e.eventNote,hasPointInTime:e.hasPointInTime,atLocation:(null===(n=e.atLocation)||void 0===n?void 0:n.id)||"",provider:e.provider.id,receiver:e.receiver.id,hasUnit:e.hasUnit.id,hasNumericalValue:e.hasNumericalValue,image:e.image}).then((function(e){if(!e.errors){var n,t,a,i=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.createEconomicEvent)||void 0===t||null===(a=t.economicResource)||void 0===a?void 0:a.id,o="/resource/".concat(i," ");r(),c.replace(o),m.c.success("Resource was created",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}})).catch((function(e){return console.log(e)}))}}),v=Object(l.a)(Object(l.a)({},o),{},{title:"Create a new Resource",formik:f,spatialThings:(null===s||void 0===s?void 0:s.edges)||null,toggleCreateLocation:i,done:r});return x.a.createElement(lO,null,x.a.createElement(Gy,v))}),uO=function(e){var n=e.open,t=e.openHandler,r=vF(),a=x.a.useState(!1),i=Object(c.a)(a,2),o=i[0],l=i[1],u=Object(h.useReducer)((function(e){return!r()&&!e}),!1),m=Object(c.a)(u,2),s=m[0],d=m[1],f=Object(h.useReducer)((function(e){return!r()&&!e}),!1),v=Object(c.a)(f,2),p=v[0],b=v[1],g=Object(h.useReducer)((function(e){return!r()&&!e}),!1),E=Object(c.a)(g,2),y=E[0],O=E[1],j=s?x.a.createElement(gl,{closeModal:d},x.a.createElement(Nl,{done:d})):null,k=p?x.a.createElement(gl,{closeModal:b},x.a.createElement(vy,{done:b})):null,w=y?x.a.createElement(gl,{closeModal:O},o?x.a.createElement(By,{done:l}):x.a.createElement(cO,{done:O,toggleCreateLocation:l})):null;return x.a.createElement(x.a.Fragment,null,j,k,w,n&&x.a.createElement(SE,{createCommunity:d,createResource:b,createIntent:O,toggleDropdown:function(){t(!n)}}))};function mO(){var e=Object(i.a)(["\n    width: 100%;\n    right: 0;\n  "]);return mO=function(){return e},e}function sO(){var e=Object(i.a)(["\n  background: ",";\n  height: calc(100vh - 65px);\n  min-width: 230px;\n  text-align: left;\n  position: fixed;\n  z-index: 4020;\n  top: 0;\n  left: 0;\n  right: 80px;\n  transition: transform 0.3s ease-in-out;\n  transform: ",";\n  overflow: hidden;\n  display: grid;\n  grid-template-rows: 160px 1fr 60px;\n  ","\n"]);return sO=function(){return e},e}function dO(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  width: 18px;\n  height: 18px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  z-index: 10;\n  line-height: 75px;\n  margin: 0 auto;\n  margin-top: 26px;\n  &:focus {\n    outline: none;\n  }\n\n  div {\n    width: 18px;\n    height: 2px;\n    background: ",";\n    border-radius: 10px;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n\n    :first-child {\n      transform: ",";\n    }\n\n    :nth-child(2) {\n      opacity: ",";\n      transform: ",";\n    }\n\n    :nth-child(3) {\n      transform: ",";\n    }\n  }\n"]);return dO=function(){return e},e}function fO(){var e=Object(i.a)(["\n  z-index: 4000;\n  background: rgba(0, 0, 0, 0.9);\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  height: calc(100vh - 65px);\n  cursor: pointer;\n  transition: opacity 0.3s ease-in-out;\n"]);return fO=function(){return e},e}function vO(){var e=Object(i.a)(["\n  line-height: 60px;\n  height: 60px;\n  cursor: pointer;\n  align-items: center;\n  margin: 0 auto;\n  text-align: center;\n  width: 100px;\n  svg {\n    stroke: ",";\n  }\n  div {\n    font-weight: 600;\n    color: ",";\n  }\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n  }\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n  &:hover {\n    color: ",";\n  }\n"]);return vO=function(){return e},e}function pO(){var e=Object(i.a)(["\n  border-top: 1px solid ",";\n"]);return pO=function(){return e},e}function bO(){var e=Object(i.a)(["\n  overflow: scroll;\n  padding: 16px;\n"]);return bO=function(){return e},e}function gO(){var e=Object(i.a)(["\n  line-height: initial;\n  margin-top: 8px;\n  font-weight: 500;\n  color: ",";\n"]);return gO=function(){return e},e}function hO(){var e=Object(i.a)(["\n  line-height: initial;\n  margin-top: 8px;\n  font-weight: 700;\n  color: ",";\n"]);return hO=function(){return e},e}function xO(){var e=Object(i.a)(["\n  display: inline-block;\n  margin-right: 12px;\n"]);return xO=function(){return e},e}function EO(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #333;\n  padding: 4px;\n  border-radius: 4px;\n  border: 1px solid #333;\n\n  svg {\n    margin-right: 10px;\n  }\n"]);return EO=function(){return e},e}function yO(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 120px;\n  "]);return yO=function(){return e},e}function OO(){var e=Object(i.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  line-height: initial;\n  ","\n"]);return OO=function(){return e},e}function jO(){var e=Object(i.a)(["\n  position: relative;\n  > div:first-of-type {\n    width: 60px;\n    height: 60px;\n    border-radius: 60px;\n  }\n"]);return jO=function(){return e},e}function kO(){var e=Object(i.a)(["\n  padding: 16px;\n  border-bottom: ",";\n"]);return kO=function(){return e},e}function wO(){var e=Object(i.a)([""]);return wO=function(){return e},e}var CO=function(e){var n=e.open,t=e.setOpen;return x.a.createElement(BO,{open:n,onClick:function(){return t(!n)}},x.a.createElement("div",null),x.a.createElement("div",null),x.a.createElement("div",null))},IO=function(e){var n=e.open,t=e.Side,r=e.setOpen,a=e.userImage,i=e.name,o=e.username,l=e.signout,u=Object(h.useState)(!1),m=Object(c.a)(u,2),s=m[0],d=m[1];return x.a.createElement("div",null,n&&x.a.createElement(zO,{onClick:function(){return r(!1)}}),x.a.createElement(DO,{open:n},x.a.createElement(FO,null,x.a.createElement(SO,null,x.a.createElement(Vl,{size:"s",src:a}),x.a.createElement(LO,null,i),x.a.createElement(NO,null,o),x.a.createElement(PO,null,x.a.createElement(uO,{open:s,openHandler:d}),x.a.createElement(_O,{to:"/settings"},x.a.createElement(Zl.a,{size:"24",strokeWidth:1,color:"#333"})),x.a.createElement(MO,{role:"button",onClick:function(){return d(!s)}},x.a.createElement(Xl.a,{size:16,color:"#333"}),x.a.createElement("span",null,"Create"))))),x.a.createElement(UO,null,t),x.a.createElement(TO,null,x.a.createElement(RO,null,x.a.createElement(AO,{onClick:l},x.a.createElement(wE.a,{size:18}),x.a.createElement(Pn.Box,{ml:2},"Sign out"))))))},TO=Sn(Pn.Box)(wO()),FO=Sn(Pn.Box)(kO(),(function(e){return e.theme.colors.border})),SO=Sn(Pn.Box)(jO()),PO=Sn("div")(OO(),k.a.lessThan("small")(yO())),MO=Sn.span(EO()),_O=Sn(mt.c)(xO()),LO=Sn(Pn.Box)(hO(),(function(e){return e.theme.colors.dark})),NO=Sn(Pn.Box)(gO(),(function(e){return e.theme.colors.mediumdark})),UO=Sn(Pn.Box)(bO()),RO=Sn.div(pO(),(function(e){return e.theme.colors.medium})),AO=Sn(Pn.Flex)(vO(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.primary})),zO=Sn(Pn.Box)(fO()),BO=Sn.button(dO(),(function(e){var n=e.theme;return e.open?n.colors.primary:n.colors.darker}),(function(e){return e.open?"rotate(45deg)":"rotate(0)"}),(function(e){return e.open?"0":"1"}),(function(e){return e.open?"translateX(20px)":"translateX(0)"}),(function(e){return e.open?"rotate(-45deg)":"rotate(0)"})),DO=Sn.nav(sO(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.open?"translateX(0)":"translateX(-100%)"}),k.a.lessThan("small")(mO()));function $O(){var e=Object(i.a)(["\n    display: none;\n  "]);return $O=function(){return e},e}function qO(){var e=Object(i.a)(["\n  ","\n"]);return qO=function(){return e},e}function VO(){var e=Object(i.a)(["\n  // Enable to put the right side scrollbar next to the content\n  //overflow: auto;\n"]);return VO=function(){return e},e}function QO(){var e=Object(i.a)(["\n  overflow: auto;\n"]);return QO=function(){return e},e}function WO(){var e=Object(i.a)(["\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n  "]);return WO=function(){return e},e}function HO(){var e=Object(i.a)(["\n    overflow: overlay;\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n  "]);return HO=function(){return e},e}function JO(){var e=Object(i.a)(["\n  grid-template-rows: auto;\n  grid-template-columns: 240px 1fr;\n  column-gap: 8px;\n  "]);return JO=function(){return e},e}function KO(){var e=Object(i.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  \n  ","\n  ","\n  ","\n"]);return KO=function(){return e},e}function ZO(){var e=Object(i.a)(["\n    display: block;\n  "]);return ZO=function(){return e},e}function GO(){var e=Object(i.a)(["\n  //   grid-template-rows: 50px auto;\n  //   row-gap: 8px;\n  // "]);return GO=function(){return e},e}function YO(){var e=Object(i.a)(["\n  display: grid;\n  // ","\n  ","\n"]);return YO=function(){return e},e}function XO(){var e=Object(i.a)(["\n    display: none;\n  "]);return XO=function(){return e},e}function ej(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-rows: auto;\n  &.panel_sidebar {\n    ","\n  }\n"]);return ej=function(){return e},e}function nj(){var e=Object(i.a)(["\n    display: none;\n  "]);return nj=function(){return e},e}function tj(){var e=Object(i.a)(["\n  position: fixed;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 500;\n  background: ","\n  display: grid;\n  border-top: ",";\n  grid-template-columns: 1fr 1fr 1fr;\n  ","\n"]);return tj=function(){return e},e}function rj(){var e=Object(i.a)(["\n  height: 75px;\n  line-height: 75px;\n  text-align: center;\n"]);return rj=function(){return e},e}function aj(){var e=Object(i.a)(["\n    display: none;\n  "]);return aj=function(){return e},e}function ij(){var e=Object(i.a)(["\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 24px;\n  flex:1;\n}\n","\n"]);return ij=function(){return e},e}function oj(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return oj=function(){return e},e}function lj(){var e=Object(i.a)(["\n  div {\n    max-width: 36px;\n    height: 36px;\n    min-width: 36px;\n    margin: 15px auto 0;\n    border-radius: 36px;\n  }\n"]);return lj=function(){return e},e}function cj(){var e=Object(i.a)(["\n  img {\n    width: 36px;\n    height: 36px;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return cj=function(){return e},e}var uj=function(e){var n=e.SidebarBox,t=e.HeaderBox,r=e.SearchBox,a=e.children,i=e.userImage,o=e.userLink,l=e.username,u=e.name,m=e.signout,s=x.a.useState(!1),d=Object(c.a)(s,2),f=d[0],v=d[1],p=Object(Tn.h)();return x.a.createElement(gj,null,x.a.createElement(IO,{username:l,name:u,userImage:i,signout:m,open:f,setOpen:v,Side:n}),x.a.createElement(fj,null,x.a.createElement(dj,{onClick:function(){return p.goBack()}},x.a.createElement(Al.a,{size:"20"})),r),x.a.createElement(yj,null,t),x.a.createElement(hj,null,x.a.createElement(bj,{className:"panel_sidebar"},x.a.createElement(xj,null,n)),x.a.createElement(bj,null,x.a.createElement(Ej,null,a))),x.a.createElement(pj,null,x.a.createElement(vj,null,x.a.createElement(CO,{open:f,setOpen:v})),x.a.createElement(vj,null,x.a.createElement(mt.c,{to:"/"},x.a.createElement(mj,null,x.a.createElement(Yb.c,{src:Oe})))),x.a.createElement(vj,null,x.a.createElement(sj,null,x.a.createElement(mt.c,{to:o},x.a.createElement(Vl,{src:i,size:"m"}))))))},mj=Sn(Pn.Box)(cj()),sj=Sn(Pn.Box)(lj()),dj=Sn(Pn.Box)(oj(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),fj=Sn(Pn.Box)(ij(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),k.a.greaterThan("medium")(aj())),vj=Sn(Pn.Box)(rj()),pj=Sn(Pn.Box)(tj(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),k.a.greaterThan("medium")(nj())),bj=Sn(Pn.Box)(ej(),k.a.lessThan("medium")(XO())),gj=Sn(Pn.Box)(YO(),k.a.greaterThan("large")(GO()),k.a.lessThan("medium")(ZO())),hj=Sn(Pn.Box)(KO(),k.a.greaterThan("medium")(JO()),k.a.lessThan("medium")(HO()),k.a.lessThan("small")(WO())),xj=Sn(Pn.Box)(QO()),Ej=Sn(Pn.Box)(VO()),yj=Sn(Pn.Box)(qO(),k.a.lessThan("medium")($O())),Oj=function(e){var n=e.children,t=Oa(),r=t.loading,a=t.me,i=t.logout,o=Object(h.useMemo)((function(){var e,n=null===a||void 0===a?void 0:a.user;if(!n||r)return null;var t=(null===(e=n.icon)||void 0===e?void 0:e.url)||"",o=RC.getPath({tab:void 0,userId:n.id},void 0);return{SidebarBox:x.a.createElement(kE,null),HeaderBox:x.a.createElement(KT,null),SearchBox:x.a.createElement(Rl,null),userImage:t,userLink:o,signout:i,username:n.displayUsername||"",name:n.preferredUsername||""}}),[r,i,a]);return o?x.a.createElement(Si,null,x.a.createElement(uj,o,n)):x.a.createElement(uF,null,n)},jj={exact:!0,path:"/collections/:collectionId/:tab(followers)?",component:function(e){var n=e.match,t=n.params.collectionId,r=n.params.tab,a="followers"===r?Xg.Followers:r?null:Xg.Publications,i=Object(h.useMemo)((function(){return null===a?null:{collectionId:t,tab:a,basePath:"/collections/".concat(t)}}),[t,a]);return i?x.a.createElement(Oj,null,x.a.createElement(ch,i)):x.a.createElement(vh,null)}},kj=uE(jj),wj=t(924),Cj=t(925);function Ij(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n"]);return Ij=function(){return e},e}function Tj(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return Tj=function(){return e},e}function Fj(){var e=Object(i.a)(["\n  position: relative;\n  text-decoration: none;\n  background: ",";\n  margin-top: 0;\n  border-radius: 6px;\n"]);return Fj=function(){return e},e}function Sj(){var e=Object(i.a)(["\n  text-decoration: none;\n  color: ",";\n\n  svg {\n    margin: 0px;\n    margin-right: 5px;\n    display: inline-flex;\n    position: relative;\n    top: 2px;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return Sj=function(){return e},e}function Pj(){var e=Object(i.a)(["\n  border: ",";\n  background: ",";\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n"]);return Pj=function(){return e},e}function Mj(){var e=Object(i.a)(["\n  ",";\n  color: ",";\n"]);return Mj=function(){return e},e}function _j(){var e=Object(i.a)(["\n  margin: auto;\n  & svg {\n    stroke: ",";\n  }\n"]);return _j=function(){return e},e}function Lj(){var e=Object(i.a)(["\n  border-radius: 4px;\n  min-width: 140px;\n  height: 140px;\n  display: flex;\n  align-items: center;\n\n  vertical-align: text-center;\n  background-color: ",";\n"]);return Lj=function(){return e},e}function Nj(){var e=Object(i.a)(["\n  border-radius: 5px;\n  color: ",";\n  text-transform: uppercase;\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-weight: 600;\n  cursor: default;\n  margin-right: 4px;\n  display: inline-flex;\n  border: 1px solid ",";\n"]);return Nj=function(){return e},e}function Uj(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: none;\n    fill: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg {\n      fill: ",";\n    }\n    div {\n      color: ",";\n    }\n    color: ",";\n    background: ",";\n    border-color: ",";\n  }\n"]);return Uj=function(){return e},e}function Rj(){var e=Object(i.a)(["\n  align-items: center;\n  cursor: pointer;\n  margin-right: 8px;\n  margin-left: 8px;\n"]);return Rj=function(){return e},e}function Aj(){var e=Object(i.a)(["\n  justify-content: start;\n  padding: 8px;\n  padding-top: 0;\n"]);return Aj=function(){return e},e}function zj(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n  text-decoration: none;\n  margin-top: 4px;\n\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n    text-decoration: none;\n  }\n"]);return zj=function(){return e},e}function Bj(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return Bj=function(){return e},e}function Dj(){var e=Object(i.a)(["\n  font-size: ",";\n  color: ",";\n"]);return Dj=function(){return e},e}function $j(){var e=Object(i.a)(["\n  color: ",";\n  word-break: break-word;\n"]);return $j=function(){return e},e}function qj(){var e=Object(i.a)(["\n  flex: 1;\n  a {\n    text-decoration: underline;\n    font-weight: 600;\n    color: ",";\n  }\n"]);return qj=function(){return e},e}function Vj(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Vj=function(){return e},e}function Qj(){var e=Object(i.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return Qj=function(){return e},e}var Wj=function(e){var n=e.icon,t=e.name,r=e.summary,a=e.link,i=e.collectionLink,o=e.collectionName,l=e.like,c=e.isFile,u=e.license,m=e.isFlagged,s=e.isSearch,d=e.hideActions,f=e.isOpenDropdown,v=e.toggleDropdown,p=e.toggleFlag,b=(e.sendToMoodle,c?wj.a:Cj.a);return h.createElement(lk,null,s&&h.createElement(Tr,null,h.createElement(Yn.Trans,{id:"Resource"})),h.createElement(uk,{p:2},""!==n?h.createElement(Vl,{size:"m",src:n}):h.createElement(ak,null,h.createElement(ik,null,h.createElement(b,{strokeWidth:"2",size:64}))),h.createElement(mk,{flex:1,ml:3},h.createElement(ck,{href:a,target:"_blank"},h.createElement(sk,{flex:"1"},h.createElement(b,{strokeWidth:"1",size:18}),t)),c?h.createElement(rk,{mt:1},u):h.createElement(Xj,null,h.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},h.createElement(ok,{flex:1},a))),h.createElement(Zj,{variant:"text",mt:2},r))),h.createElement(Jj,null,h.createElement(Kj,{ml:2},"Added in: ",h.createElement(mt.c,{to:i}," ",o)),d?null:h.createElement(ek,null,l&&h.createElement(tk,{bordered:!0,liked:!!l.iLikeIt,onClick:l.toggleLikeFormik.submitForm},h.createElement(Yj,null,h.createElement(Kl.a,{strokeWidth:"1",size:"18"})),h.createElement(Gj,{variant:"text",sx:{textTransform:"capitalize"},ml:1},l.totalLikes)),h.createElement(nk,{onClick:v,sx:{position:"relative"}},h.createElement(Yj,null,h.createElement(Gs.a,{className:"hover",size:18})),f&&h.createElement(Hj,null,h.createElement(ic,{orientation:"bottom",close:v},p&&h.createElement(lc,{onClick:p},h.createElement(Mu.a,{size:18}),h.createElement(Pn.Text,{sx:{flex:1},ml:2},m?h.createElement(Yn.Trans,{id:"Unflag this resource"}):h.createElement(Yn.Trans,{id:"Flag this resource"})))))))))},Hj=Sn(Pn.Box)(Qj()),Jj=Sn(Pn.Flex)(Vj()),Kj=Sn(Pn.Flex)(qj(),(function(e){return e.theme.colors.dark})),Zj=Sn(Pn.Text)($j(),(function(e){return e.theme.colors.dark})),Gj=Sn(Pn.Text)(Dj(),cn.s1,(function(e){return e.theme.colors.darker})),Yj=Sn(Pn.Box)(Bj()),Xj=Sn(Pn.Box)(zj(),(function(e){return e.theme.colors.mediumdark}),cn.s2),ek=Sn(Pn.Flex)(Aj()),nk=Sn(Pn.Flex)(Rj()),tk=Sn(Pn.Flex)(Uj(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),cn.s1,(function(e){return e.liked?e.theme.colors.lightest:e.theme.colors.primary}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary})),rk=Sn(Pn.Text)(Nj(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.secondary})),ak=Sn(Pn.Box)(Lj(),(function(e){return e.theme.colors.light})),ik=Sn.div(_j(),(function(e){return e.theme.colors.medium})),ok=Sn(Pn.Text)(Mj(),Object(tt.c)("380px"),(function(e){return e.theme.colors.mediumdark})),lk=Sn(Pn.Box)(Pj(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),ck=Sn.a(Sj(),(function(e){return e.theme.colors.darker})),uk=Sn(Pn.Flex)(Fj(),(function(e){return e.theme.colors.appInverse})),mk=Sn(Pn.Box)(Tj()),sk=Sn(Pn.Heading)(Ij(),(function(e){return e.theme.colors.darker})),dk=function(e){var n=e.resourceId,t=e.flagged,r=op(n),a=r.resource,i=r.toggleLike,o=Object(er.a)({initialValues:{},onSubmit:i}),u=vF(),m=Object(h.useReducer)((function(e){return!e}),!1),s=Object(c.a)(m,2),d=s[0],f=s[1],v=Object(h.useReducer)((function(e){return!e}),!1),p=Object(c.a)(v,2),b=p[0],g=p[1],E=Object(h.useReducer)((function(e){return!u()&&!e}),!1),y=Object(c.a)(E,2),O=y[0],j=y[1],k=Object(h.useMemo)((function(){var e;if(!a)return null;var n=!!t;return Object(l.a)(Object(l.a)({},fk({resource:a,like:{iLikeIt:!!a.myLike,toggleLikeFormik:o,totalLikes:(null===(e=a.likers)||void 0===e?void 0:e.totalCount)||0},hideActions:n})),{},{isOpenDropdown:d,toggleDropdown:f,sendToMoodle:g,toggleFlag:j})}),[a,t,o,d]),w=O&&a?x.a.createElement(gl,{closeModal:j},x.a.createElement(ts,{done:j,ctx:a})):null,C=Object(h.useMemo)((function(){return function(e){var n=lp(null===e||void 0===e?void 0:e.collection);if(!e||!n)return null;var t=e.name,r=e.canonicalUrl,a=e.icon,i=e.license,o=e.summary,l=e.content,c=e.payload;return{canonicalUrl:r||"",collection:n,icon:(null===a||void 0===a?void 0:a.url)||"",name:t,summary:o||"",url:(null===l||void 0===l?void 0:l.url)||(null===c||void 0===c?void 0:c.url)||"",licence:i||"",mediaType:(null===l||void 0===l?void 0:l.mediaType)||""}}(a)}),[a]),I=C&&b?x.a.createElement(gl,{closeModal:g},x.a.createElement(rp,{done:g,resource:C})):null;return k&&x.a.createElement(x.a.Fragment,null,w,I,x.a.createElement(Wj,k))},fk=function(e){var n,t,r,a,i,o=e.hideActions,l=e.like,c=e.resource;return{icon:(null===(n=c.icon)||void 0===n?void 0:n.url)||"",link:(null===(t=c.payload)||void 0===t?void 0:t.url)||"",name:c.name||"",summary:c.summary||"",like:l,isFile:!!(null===(r=c.payload)||void 0===r?void 0:r.upload),license:c.license||null,isFlagged:!!c.myFlag,hideActions:o,collectionName:(null===(a=c.collection)||void 0===a?void 0:a.name)||"",collectionLink:kj.getPath({collectionId:(null===(i=c.collection)||void 0===i?void 0:i.id)||"",tab:void 0},void 0)}};function vk(){var e=Object(i.a)(["\n  background: ",";\n  border-left: 3px solid ",";\n"]);return vk=function(){return e},e}function pk(){var e=Object(i.a)(["\n  font-size: ",";\n"]);return pk=function(){return e},e}function bk(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return bk=function(){return e},e}function gk(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return gk=function(){return e},e}function hk(){var e=Object(i.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n"]);return hk=function(){return e},e}function xk(){var e=Object(i.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return xk=function(){return e},e}function Ek(){var e=Object(i.a)(["\n  color: ",";\n"]);return Ek=function(){return e},e}var yk=function(e){var n=e.content,t=e.like,r=e.actor,a=e.createdAt,i=e.communityName,o=e.communityLink,l=e.hideActions,c=e.url;return x.a.createElement(Tk,{pl:2},x.a.createElement(Kd,{actor:r,createdAt:a,event:"",communityName:i,communityLink:o}),x.a.createElement(Ok,{dangerouslySetInnerHTML:{__html:ed.a.sanitize(n)},sx:{textDecoration:"none"},variant:"text",mb:2}),x.a.createElement(kk,{mt:2},l?null:x.a.createElement(Pn.Box,null,x.a.createElement(jk,null,x.a.createElement(wk,null,x.a.createElement(mt.c,{to:c},x.a.createElement(Ck,null,x.a.createElement(Ys.a,{className:"hover",strokeWidth:"1",color:"rgba(0,0,0,.4)",size:"18"})),x.a.createElement(Ik,{ml:1,variant:"text",sx:{textTransform:"capitalize",textDecoration:"none"}},x.a.createElement(Yn.Trans,{id:"Reply"})))),x.a.createElement(wk,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},x.a.createElement(Ck,null,x.a.createElement(Kl.a,{strokeWidth:"1",size:"18"})),x.a.createElement(Ik,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",x.a.createElement(Yn.Trans,{id:"Star"})))))))},Ok=Sn(Pn.Text)(Ek(),(function(e){return e.theme.colors.dark})),jk=Sn(Pn.Flex)(xk()),kk=Sn(Pn.Box)(hk()),wk=Sn(Pn.Flex)(gk(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),cn.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Ck=Sn(Pn.Box)(bk()),Ik=Sn(Pn.Text)(pk(),cn.s1),Tk=Sn(Pn.Box)(vk(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.light})),Fk=function(e){var n=e.commentId,t=Zs(n),r=t.comment,a=t.toggleLike,i=Object(er.a)({initialValues:{},onSubmit:a}),o=Object(h.useMemo)((function(){if(!r)return null;var e=Rd(r),n=e.communityLink,t=e.communityName;return{url:r.thread?iI.getPath({threadId:r.thread.id},void 0):"",communityLink:n,communityName:t,actor:r.creator?AC(r.creator):{icon:"",link:"",name:""},createdAt:r.createdAt,content:r.content,like:{iLikeIt:!!r.myLike,totalLikes:r.likerCount||0,toggleLikeFormik:i}}}),[r,i]);return o&&x.a.createElement(yk,o)},Sk=function e(n){var t,r=n.context,a=n.flagged;if("Collection"===r.__typename)return a?x.a.createElement(yF,{collectionId:r.id,flagged:a}):x.a.createElement(yF,{collectionId:r.id});if("Comment"===r.__typename)return x.a.createElement(Md,{commentId:r.id,mainComment:!1});if("Community"===r.__typename)return a?x.a.createElement(Vv,{communityId:r.id,flagged:a}):x.a.createElement(Vv,{communityId:r.id});if("Resource"===r.__typename)return a?x.a.createElement(dk,{resourceId:r.id,flagged:a}):x.a.createElement(dk,{resourceId:r.id});if("User"===r.__typename)return a?x.a.createElement(dg,{userId:r.userId,flagged:a}):x.a.createElement(dg,{userId:r.userId});if("Like"===r.__typename&&"Comment"===(null===(t=r.context)||void 0===t?void 0:t.__typename))return x.a.createElement(Fk,{commentId:r.context.id});var i=void 0!==r&&os(r);return i?x.a.createElement(e,{context:i}):null},Pk=t(926);function Mk(){var e=Object(i.a)(["\n  ",";\n  color: ",";\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return Mk=function(){return e},e}var _k=t(210).default,Lk=t(392).default,Nk=t(292).default,Uk=t(716).default,Rk=function(e){var n=e.HeroUserBox,t=e.LikesBoxes,r=e.ActivityBoxes,a=e.CommunityBoxes,i=e.CollectionsBoxes,o=e.InventoryBoxes,l=e.basePath,c=e.totalCommunities,u=e.userLink,m=e.totalCollections,s=e.totalUsers,d=e.loadMoreActivities,f=e.loadMoreLikes,v=e.loadMoreCommunities,p=e.loadMoreCollections;return h.createElement(Mt,null,h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Pn.Box,{mb:2},n,h.createElement(Ak,{basePath:l,totalCommunities:c,totalCollections:m,totalUsers:s})),h.createElement(Tn.d,null,h.createElement(Tn.b,{path:"".concat(l,"/inventory")},o),h.createElement(Tn.b,{exact:!0,path:"".concat(l,"/")},h.createElement(Pt,null,r),d&&h.createElement(ct,{LoadMoreFormik:d})),h.createElement(Tn.b,{exact:!0,path:"".concat(l,"/starred")},h.createElement(Pt,null,t),f&&h.createElement(ct,{LoadMoreFormik:f})),h.createElement(Tn.b,{path:"".concat(l,"/communities")},h.createElement(At,null,a),v&&h.createElement(ct,{LoadMoreFormik:v})),h.createElement(Tn.b,{path:"".concat(l,"/collections")},h.createElement(At,null,h.createElement(Bt,null,i)),p&&h.createElement(ct,{LoadMoreFormik:p}))))),h.createElement(Hn,null,u.length>0?h.createElement(Jn,null,h.createElement(Kn,{fontWeight:"bold"},"Relevant links"),h.createElement(Zn,null,h.createElement(Gn,null,h.createElement(Pn.Flex,null,h.createElement(Pk.a,{size:20})," ",h.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},h.createElement(zk,{ml:2,flex:1},u)))))):null))},Ak=function(e){var n=e.basePath,t=e.totalCommunities;return h.createElement(Rt,{p:3,pt:3},h.createElement(Ut,{exact:!0,to:"".concat(n)},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Recent activity"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(Nk,{size:"24"}))),h.createElement(Ut,{exact:!0,to:"".concat(n,"/starred")},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Starred"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(Lk,{size:"24"}))),h.createElement(Ut,{exact:!0,to:"".concat(n,"/communities")},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"{totalCommunities} communities",values:{totalCommunities:t}})),h.createElement(Dt,{className:"icon-holder"},h.createElement(_k,{size:"24"}))),h.createElement(Ut,{exact:!0,to:"".concat(n,"/inventory")},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Inventory"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(Uk,{size:"24"}))))},zk=Sn(Pn.Text)(Mk(),Object(tt.c)("250px"),(function(e){return e.theme.colors.dark})),Bk=t(462),Dk=t.n(Bk);function $k(){var e=Object(i.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n  border-radius: 4px;\n  border: 1px solid #eee;\n  padding: 10px;\n  width: 100%;\n\n  .d-flex {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .wrapper_info {\n    margin-left: 20px;\n  }\n\n  .intent {\n    padding: 10px 0;\n    &:not(:last-child) {\n      border-bottom: 1px solid #eee;\n    }\n  }\n"]);return $k=function(){return e},e}var qk=Sn("div")($k()),Vk=t(937);function Qk(){var e=Object(i.a)(["\n  flex-basis: 100px;\n  width: 100px;\n  height: 100px;\n\n  img {\n    height: 100px;\n  }\n"]);return Qk=function(){return e},e}function Wk(){var e=Object(i.a)(["\n        margin-top: 0;\n        margin-left: 20px;\n      "]);return Wk=function(){return e},e}function Hk(){var e=Object(i.a)(["\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  ",";\n"]);return Hk=function(){return e},e}function Jk(){var e=Object(i.a)(["\n  flex-basis: 140px;\n  width: 140px;\n  height: 140px;\n  border-radius: 4px;\n  background-color: #f3f3f3;\n\n  img {\n    width: 100%;\n    height: 140px;\n    object-fit: cover;\n    border-radius: 4px;\n  }\n"]);return Jk=function(){return e},e}function Kk(){var e=Object(i.a)(["\n  flex-basis: calc(100% - 160px);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: flex-start;\n"]);return Kk=function(){return e},e}function Zk(){var e=Object(i.a)(["\n        padding: 10px 15px 0;\n      "]);return Zk=function(){return e},e}function Gk(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 15px 0 0;\n\n  &:not(:last-child) {\n    margin-bottom: 10px;\n  }\n\n  button {\n    margin-right: 0;\n  }\n\n  ",";\n"]);return Gk=function(){return e},e}function Yk(){var e=Object(i.a)(["\n  padding: 10px 10px 10px 20px;\n  border-bottom: 1px solid #ccc;\n"]);return Yk=function(){return e},e}function Xk(){var e=Object(i.a)(["\n        display: flex;\n        margin-bottom: 20px;\n      "]);return Xk=function(){return e},e}function ew(){var e=Object(i.a)(["\n  ",";\n"]);return ew=function(){return e},e}function nw(){var e=Object(i.a)(["\n        display: block;\n      "]);return nw=function(){return e},e}function tw(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-grow: 0;\n  background: #fff;\n  height: auto;\n  padding: 1em;\n  margin-bottom: 10px;\n\n  ",";\n"]);return tw=function(){return e},e}function rw(){var e=Object(i.a)(["\n  width: 30px;\n  display: inline-block;\n  svg {\n    stroke: ",";\n  }\n"]);return rw=function(){return e},e}function aw(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none !important;\n"]);return aw=function(){return e},e}function iw(){var e=Object(i.a)(["\n  background: ",";\n  color: ",";\n  text-transform: uppercase;\n  font-weight: bold;\n  font-size: 10px;\n  border-radius: 4px;\n  padding: 3px 5px;\n  width: auto;\n  display: inline-block;\n  margin-bottom: 10px;\n"]);return iw=function(){return e},e}var ow=t(795).default,lw=t(796).default,cw=t(797).default,uw=t(405).default,mw=t(406).default,sw=t(798).default,dw=t(391).default,fw=t(799).default,vw=t(800).default,pw=t(801).default,bw=t(802).default,gw=t(803),hw=function(e){var n,t,r,a,i,o=e.resource,u=e.openEditModal,m=e.openUpdateResourceModal,s=e.openDeleteResourceModal,d=window.location.href,f=h.useState({first:!1,second:!1}),v=Object(c.a)(f,2),p=v[0],b=v[1];return h.createElement(Mt,null,h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Nt,null,h.createElement(ww,null,h.createElement(ot,{mr:2,onClick:u,variant:"button"},h.createElement(Yn.Trans,{id:"Perform event"})),h.createElement(ot,{ml:2,onClick:m,variant:"error"},h.createElement(sw,{size:"16",className:"ml-2"})," ",h.createElement(Yn.Trans,{id:"Edit"})),h.createElement(ot,{ml:2,onClick:s,variant:"error"},h.createElement(vw,{size:"16",className:"ml-2"})," ",h.createElement(Yn.Trans,{id:"Delete"}))),h.createElement(Ow,null,h.createElement(jw,null,h.createElement(Iw,null,(null===o||void 0===o?void 0:o.image)&&h.createElement("img",{src:o.image,alt:o.name})),h.createElement(Tw,null,(null===o||void 0===o?void 0:o.id)&&h.createElement(gw,{value:d}))),h.createElement(Cw,null,h.createElement(Pn.Box,{mb:2},h.createElement(Ew,{variant:"heading"}," ",h.createElement(Yn.Trans,{id:"{0}",values:{0:o&&o.name}}))),h.createElement(Pn.Box,null,h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(mw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Note:"})," ")," ",h.createElement(Yn.Trans,{id:"{0}",values:{0:(null===o||void 0===o?void 0:o.note)?o.note:"Not provided"}}))),h.createElement(Pn.Box,null,h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(cw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Location:"}))," ",(null===o||void 0===o||null===(n=o.currentLocation)||void 0===n?void 0:n.name)?o.currentLocation.name:"Not provided")),h.createElement(Pn.Box,null,h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(uw,{size:"16"})),h.createElement("b",null,"Quantity in stock:")," ",h.createElement("span",{style:{color:(null===o||void 0===o?void 0:o.onhandQuantity)&&o.onhandQuantity.hasNumericalValue<0?"red":"inherit"}},(null===o||void 0===o?void 0:o.onhandQuantity)?"".concat(null===o||void 0===o||null===(t=o.onhandQuantity)||void 0===t?void 0:t.hasNumericalValue," ").concat(null===o||void 0===o||null===(r=o.onhandQuantity)||void 0===r?void 0:r.hasUnit.label):"Not provided"))),h.createElement(Pn.Box,null,h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(dw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Owner:"}))," ",(null===o||void 0===o?void 0:o.primaryAccountable)?null===o||void 0===o?void 0:o.primaryAccountable.name:"Not provided")),h.createElement(Pn.Box,{p:3},h.createElement(Pn.Text,{variant:"subhead"},h.createElement(yw,null,h.createElement(fw,{size:"16"})),"History:"," ",(null===o||void 0===o?void 0:o.track.length)>0||(null===o||void 0===o?void 0:o.trace.length)>0?"":"Not available")),null===o||void 0===o?void 0:o.track.map((function(e){var n,t;return h.createElement(kw,{key:e.id},h.createElement(xw,null,e.action?h.createElement(Yn.Trans,{id:"{0}",values:{0:e.action.label}}):h.createElement(Yn.Trans,{id:"Not provided"})),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(pw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Result:"}))," ",e.toResourceInventoriedAs?h.createElement(mt.b,{to:"/resource/".concat(e.toResourceInventoriedAs.id),key:e.toResourceInventoriedAs.id},e.toResourceInventoriedAs.name):"Not available")),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(mw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Track note:"}))," ",e.note?e.note:"Not provided")),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(bw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Event Date:"}))," ",e.hasPointInTime?Object(Vk.a)(new Date(e.hasPointInTime),"dd.MM.yyyy"):"Not provided")),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(uw,{size:"16"})),h.createElement("b",null,"Quantity: ")," ","".concat(null===(n=e.resourceQuantity)||void 0===n?void 0:n.hasNumericalValue," ").concat(null===(t=e.resourceQuantity)||void 0===t?void 0:t.hasUnit.label))),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(dw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Provider:"}))," ",e.provider?h.createElement(mt.b,{to:"/user/".concat(e.provider.id),key:e.provider.id},e.provider.name):"Not available")),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(dw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Receiver:"}))," ",e.receiver?h.createElement(mt.b,{to:"/user/".concat(e.receiver.id),key:e.receiver.id},e.receiver.name):"Not available")))})),null===o||void 0===o?void 0:o.trace.map((function(e){var n,t;return h.createElement(kw,{key:e.id},h.createElement(xw,null,e.action?h.createElement(Yn.Trans,{id:"{0}",values:{0:e.action.label}}):h.createElement(Yn.Trans,{id:"Not provided"})),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(pw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Source:"}))," ",e.resourceInventoriedAs?h.createElement(mt.b,{to:"/resource/".concat(e.resourceInventoriedAs.id),key:e.resourceInventoriedAs.id},e.resourceInventoriedAs.name):"Not available")),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(mw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"trace note:"}))," ",e.note?e.note:"Not provided")),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(uw,{size:"16"})),h.createElement("b",null,"Quantity:")," ","".concat(null===(n=e.resourceQuantity)||void 0===n?void 0:n.hasNumericalValue," ").concat(null===(t=e.resourceQuantity)||void 0===t?void 0:t.hasUnit.label))),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(dw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Provider:"}))," ",e.provider?h.createElement(mt.b,{to:"/user/".concat(e.provider.id),key:e.provider.id},e.provider.name):"Not available")),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(dw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Receiver:"}))," ",e.receiver?h.createElement(mt.b,{to:"/user/".concat(e.receiver.id),key:e.receiver.id},e.receiver.name):"Not available")))})),h.createElement(Pn.Box,{p:3},h.createElement(Pn.Text,{variant:"subhead"},h.createElement(yw,null,h.createElement(cw,{size:"16"})),"Location:")),h.createElement(My,{zoom:13,markers:[{position:{lng:(null===o||void 0===o||null===(a=o.currentLocation)||void 0===a?void 0:a.long)||2.2,lat:(null===o||void 0===o||null===(i=o.currentLocation)||void 0===i?void 0:i.lat)||41.4}}]}),h.createElement(qk,null,h.createElement("div",{className:"d-flex"},h.createElement(Pn.Text,{variant:"heading"},h.createElement(Yn.Trans,{id:"More info"})),h.createElement(ot,{mr:2,onClick:function(){return b(Object(l.a)(Object(l.a)({},p),{},{first:!p.first}))},variant:"show-more"},p.first?h.createElement(h.Fragment,null,h.createElement(lw,{size:"16"}),h.createElement(Yn.Trans,{id:"Hide data"})):h.createElement(h.Fragment,null,h.createElement(ow,{size:"16"}),h.createElement(Yn.Trans,{id:"Show data"})))),p.first?h.createElement("div",null,h.createElement("div",{className:"intent"},h.createElement(Pn.Text,{variant:"text"},h.createElement("b",null,h.createElement(Yn.Trans,{id:"contained In:"}))," ",(null===o||void 0===o?void 0:o.containedIn)+"")),h.createElement("div",{className:"intent"},h.createElement(Pn.Text,{variant:"text"},h.createElement("b",null,h.createElement(Yn.Trans,{id:"contains:"}))," ",(null===o||void 0===o?void 0:o.contains)+"")),h.createElement("div",{className:"intent"},h.createElement(Pn.Text,{variant:"text"},h.createElement("b",null,h.createElement(Yn.Trans,{id:"lot:"}))," ",(null===o||void 0===o?void 0:o.lot)+"")),h.createElement("div",{className:"intent"},h.createElement(Pn.Text,{variant:"text"},h.createElement("b",null,h.createElement(Yn.Trans,{id:"stage:"}))," ",(null===o||void 0===o?void 0:o.stage)+"")),h.createElement("div",{className:"intent"},h.createElement(Pn.Text,{variant:"text"},h.createElement("b",null,h.createElement(Yn.Trans,{id:"trace length:"}))," ",null===o||void 0===o?void 0:o.trace.length)),h.createElement("div",{className:"intent"},h.createElement(Pn.Text,{variant:"text"},h.createElement("b",null,h.createElement(Yn.Trans,{id:"tracking Identifier:"}))," ",(null===o||void 0===o?void 0:o.trackingIdentifier)+"")),h.createElement("div",{className:"intent"},h.createElement(Pn.Text,{variant:"text"},h.createElement("b",null,h.createElement(Yn.Trans,{id:"unit Of Effort:"}))," ",(null===o||void 0===o?void 0:o.unitOfEffort)+""))):null)))))),h.createElement(Ox,null))},xw=Sn(Pn.Text)(iw(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.light})),Ew=Sn(Pn.Text)(aw(),(function(e){return e.theme.colors.dark})),yw=Sn(Pn.Box)(rw(),(function(e){return e.theme.colors.mediumdark})),Ow=Sn("div")(tw(),k.a.lessThan("medium")(nw())),jw=Sn("div")(ew(),k.a.lessThan("medium")(Xk())),kw=Sn("div")(Yk()),ww=Sn("div")(Gk(),k.a.lessThan("medium")(Zk())),Cw=Sn("div")(Kk()),Iw=Sn("div")(Jk()),Tw=Sn(Iw)(Hk(),k.a.lessThan("medium")(Wk()));Sn(Iw)(Qk());function Fw(){var e=Object(i.a)(["\n  background: ",";\n"]);return Fw=function(){return e},e}function Sw(){var e=Object(i.a)(["\n  background: ",";\n  height: 50px;\n  line-height: 50px;\n  align-items: center;\n  border-bottom: ",";\n  button {\n    width: 190px;\n    text-transform: inherit;\n    letter-spacing: 0;\n    padding: 0;\n    height: 32px;\n    line-height: 32px;\n    background: #ffe5cd;\n    color: #ca6a11;\n    border: none;\n  }\n"]);return Sw=function(){return e},e}function Pw(){var e=Object(i.a)(["\n      margin: 0 10px;\n  "]);return Pw=function(){return e},e}function Mw(){var e=Object(i.a)(["\n  margin: 0 10px;\n  height: 34px;\n  text-transform: capitalize;\n  line-height: 34px;\n  padding: 0 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  &:not(:last-child) {\n    margin-right: 20px;\n  }\n\n  & > svg {\n    display: inline-block;\n    margin-right: 8px;\n  }\n  & > div {\n    color: #fff;\n    display: inline-block;\n  }\n\n  ",";\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n"]);return Mw=function(){return e},e}function _w(){var e=Object(i.a)(["\n      justify-content: space-between;\n  "]);return _w=function(){return e},e}function Lw(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: flex-end;\n  height: 34px;\n  margin: 10px 0;\n  position: relative;\n\n  ",";\n"]);return Lw=function(){return e},e}var Nw=Sn.div(Lw(),k.a.lessThan("medium")(_w())),Uw=Sn(Pn.Button)(Mw(),k.a.lessThan("medium")(Pw()),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.appInverse})),Rw=t(210).default,Aw=t(809).default,zw=t(292).default,Bw=t(810).default,Dw=function(e){var n=e.tabPaths;return h.createElement(Rt,{p:3,pt:0},h.createElement(Ut,{exact:!0,to:n.intents},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Intents"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(Aw,{size:"24"}))),h.createElement(Ut,{exact:!0,to:n.timeline},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Recent activity"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(zw,{size:"24"}))),h.createElement(Ut,{exact:!0,to:n.discussions},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Discussions"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(Bw,{size:"24"}))),h.createElement(Ut,{exact:!0,to:"".concat(n.members)},h.createElement("div",{className:"text-holder"},h.createElement(Yn.Trans,{id:"Members"})),h.createElement(Dt,{className:"icon-holder"},h.createElement(Rw,{size:"24"}))))},$w=Sn(Pn.Flex)(Sw(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),qw=Sn(Pn.Box)(Fw(),(function(e){return e.theme.colors.appInverse})),Vw=function(e){var n=e.Activities,t=e.HeroCommunity,r=e.Members,a=e.Intents,i=e.tabPaths,o=e.newThreadFormik,l=e.isJoined,u=e.Threads,s=e.loadMoreActivities,d=e.communityId,f=e.loadMoreThreads,v=function(e){return!l&&(Object(m.c)(e,{type:"warning"}),!0)},p=vF(),b=Object(h.useReducer)((function(e){return!v(Ma._("You should join this community to create new resource"))&&!p()&&!e}),!1),g=Object(c.a)(b,2),x=g[0],E=g[1],y=h.useState(!1),O=Object(c.a)(y,2),j=O[0],k=O[1],w=Object(h.useReducer)((function(e){return!v(Ma._("You should join this community to create new intent"))&&!p()&&!e}),!1),C=Object(c.a)(w,2),I=C[0],T=C[1],F=x?h.createElement(gl,{closeModal:E},j?h.createElement(By,{done:k}):h.createElement(cO,{done:E,toggleCreateLocation:k})):null,S=I?h.createElement(gl,{closeModal:function(){T()}},h.createElement(vy,{done:T,communityId:d})):null;return h.createElement(Mt,null,F,S,h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Nt,null,t,h.createElement(Dw,{tabPaths:i}),h.createElement(Tn.d,null,h.createElement(Tn.b,{exact:!0,path:i.intents},h.createElement(Nw,null,h.createElement(Uw,{variant:"primary",onClick:T},h.createElement(ec.a,{size:16,color:"#fff"}),h.createElement(Pn.Text,{variant:"button"},h.createElement(Yn.Trans,{id:"Create a new intent"})))),h.createElement(At,null,a)),h.createElement(Tn.b,{exact:!0,path:i.timeline},h.createElement(h.Fragment,null,h.createElement(Pt,{mt:2},n),s&&h.createElement(ct,{LoadMoreFormik:s}))),h.createElement(Tn.b,{exact:!0,path:i.discussions},h.createElement(h.Fragment,null,h.createElement(qw,{p:3,mb:2},o&&h.createElement(bs,{placeholder:"Start a new thread...",submit:function(e){o.setValues({text:e}),o.submitForm()}})),h.createElement($w,{px:3,mt:2},h.createElement(Pn.Text,{variant:"suptitle"},"All discussions")),h.createElement(At,null,u),f&&h.createElement(ct,{LoadMoreFormik:f}))),h.createElement(Tn.b,{path:i.members},h.createElement(At,null,r)))))),h.createElement(Ox,null))};function Qw(){var e=Object(i.a)(["\n  font-size: ",";\n  color: ",";\n  text-decoration: none !important;\n  margin-bottom: 10px;\n\n  &:hover {\n    text-decoration: underline !important;\n  }\n"]);return Qw=function(){return e},e}function Ww(){var e=Object(i.a)(["\n  text-decoration: none !important;\n\n  * {\n    text-decoration: none !important;\n  }\n"]);return Ww=function(){return e},e}function Hw(){var e=Object(i.a)(["\n  text-align: center;\n\n  ul {\n    padding: 10px 0 20px;\n    margin: 0;\n  }\n\n  .page-link {\n    line-height: 30px;\n    border: 1px solid #999;\n    color: #999;\n    background-color: #fff;\n    border-radius: 4px;\n    margin: 2px;\n  }\n\n  .page-item.active .page-link {\n    border: 1px solid #02e379;\n    color: #02e379;\n  }\n"]);return Hw=function(){return e},e}var Jw=t(405).default,Kw=t(406).default,Zw=t(391).default,Gw=function(e){var n,t=e.inventory,r=e.done,a=e.children,i=e.owner,o=Oa().me,l=null===o||void 0===o||null===(n=o.user)||void 0===n?void 0:n.id,u=Object(h.useState)([]),m=Object(c.a)(u,2),s=m[0],d=m[1],f=Object(h.useState)(1),v=Object(c.a)(f,2),p=v[0],b=v[1];return Object(h.useEffect)((function(){if(t.length){var e=t.slice(5*(p-1),5*(p-1)+5);d(e)}else d([])}),[t,p]),Object(h.useEffect)((function(){b(1)}),[t.length]),h.createElement(h.Fragment,null,h.createElement(Nw,null,(null===o||void 0===o?void 0:o.user.id)===i&&h.createElement(Uw,{variant:"primary",onClick:r},h.createElement(ec.a,{size:16,color:"#fff"}),h.createElement(Pn.Text,{variant:"button"},h.createElement(Yn.Trans,{id:"Create a new resource"})))),h.createElement(Nt,null,a),h.createElement(Nt,null,!!s.length&&s.map((function(e){var n=e.id,t=e.name,r=e.note,a=e.image,i=e.onhandQuantity,o=e.primaryAccountable;return h.createElement(Xw,{to:"/resource/".concat(n),key:n},h.createElement(Ow,{key:n},h.createElement(Iw,null,a&&h.createElement("img",{src:a,alt:t})),h.createElement(Cw,null,h.createElement(eC,{variant:"subhead"},t),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(Kw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Note:"})," ")," ",h.createElement(Yn.Trans,{id:"{0}",values:{0:r||"Not provided"}}))),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(Jw,{size:"16"})),h.createElement("b",null,"Quantity in stock:")," ",h.createElement("span",{style:{color:i&&i.hasNumericalValue<0?"red":"inherit"}},i?"".concat(i.hasNumericalValue," ").concat(i.hasUnit.label):"Not provided"))),h.createElement(Pn.Box,{mr:1},h.createElement(Pn.Text,{variant:"text"},h.createElement(yw,null,h.createElement(Zw,{size:"16"})),h.createElement("b",null,h.createElement(Yn.Trans,{id:"Owner:"}))," ",(null===o||void 0===o?void 0:o.id)===l?"Me":null===o||void 0===o?void 0:o.name)))))})),!!s.length&&h.createElement(Yw,null,h.createElement(Dk.a,{size:"sm",totalItems:t.length,pageSize:5,onSelect:function(e){b(e)},maxPaginationNumbers:4,defaultActivePage:1,previousPageText:"Prev"})),!s.length&&h.createElement("p",{style:{textAlign:"center",fontWeight:600,color:"#444444",paddingBottom:40}},"No results")))},Yw=Sn("div")(Hw()),Xw=Sn(mt.c)(Ww()),eC=Sn(Pn.Text)(Qw(),cn.m1,(function(e){return e.theme.colors.dark})),nC=t(402),tC=t(403);function rC(){var e=Object(i.a)(["\n     margin: 0 15px 0 0;\n  "]);return rC=function(){return e},e}function aC(){var e=Object(i.a)(["\n  background-color: #fff;\n  border: 1px solid #05244f;\n  border-radius: 4px;\n  color: #05244f;\n  padding: 0;\n  margin: 0;\n  height: 34px;\n  width: 34px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  left: 0;\n  top: -44px;\n\n  ",";\n"]);return aC=function(){return e},e}function iC(){var e=Object(i.a)(["\n  flex-basis: calc(100% - 30px);\n  font-family: Arial, sans-serif;\n  font-size: 14px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  span {\n    display: inline-block;\n    margin-left: 20px;\n  }\n"]);return iC=function(){return e},e}function oC(){var e=Object(i.a)(["\n  text-transform: uppercase;\n  color: #999;\n  font-weight: 600;\n  letter-spacing: 1px;\n  padding: 0;\n\n  & > div {\n    display: flex;\n    padding: 10px 0;\n\n    input {\n      flex-basis: 20px;\n      height: 20px;\n    }\n  }\n"]);return oC=function(){return e},e}function lC(){var e=Object(i.a)(["\n  background-color: transparent;\n  border: none;\n  color: #999;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &.active {\n    color: #05244f;\n  }\n"]);return lC=function(){return e},e}function cC(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 40px;\n  line-height: 40px;\n  margin: 0 20px;\n"]);return cC=function(){return e},e}function uC(){var e=Object(i.a)(["\n  padding: 10px;\n  background-color: #fff;\n  border: 1px solid #05244f;\n  border-radius: 4px;\n  margin-bottom: 10px;\n"]);return uC=function(){return e},e}function mC(){var e=Object(i.a)(["\n  margin-left: auto;\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 20px;\n\n  svg {\n    margin-right: 10px;\n  }\n"]);return mC=function(){return e},e}var sC=t(811).default,dC=t(812).default,fC=t(813).default,vC=t(702).default,pC=function(e){var n=e.isOpen,t=e.filterSet,r=e.triggerOpen,i=e.onChange,l=e.onClear,c=function(){var e=Object(o.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.currentTarget.name,i({sort:r,order:"DES"===t.order?"ASC":"DES"});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return x.a.createElement("div",null,x.a.createElement(OC,{onClick:function(){return r(!n)},type:"button"},n?x.a.createElement(vC,{size:"16"}):x.a.createElement(fC,{size:"16"})),n?x.a.createElement(x.a.Fragment,null,x.a.createElement(gC,null,x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6 align-center"},x.a.createElement(xC,{onClick:c,name:"name",className:"name"===t.sort&&"active"},"Sort by Name:","name"===t.sort&&"ASC"===t.order?x.a.createElement(hC,null," ",x.a.createElement(sC,{size:16})," ","ASC"):x.a.createElement(hC,null," ",x.a.createElement(dC,{size:16})," ","DES")))),x.a.createElement(QE,null,x.a.createElement(WE,null,"Name"),x.a.createElement(GE,{type:"text",id:"name",name:"search",onChange:function(e){var n=e.currentTarget;return i({search:n.value})},placeholder:Object(Yn.i18nMark)("Search query"),value:t.search})),x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6"},x.a.createElement(EC,null,x.a.createElement(yC,null,x.a.createElement(nC.a,{style:{width:"auto"},name:"trace",id:"trace",type:"checkbox",checked:t.trace||!1,onChange:function(){return i({trace:!t.trace})}}),x.a.createElement("span",null,"Resulted from a previous resource")))),x.a.createElement("div",{className:"item_col-6"},x.a.createElement(EC,null,x.a.createElement(yC,null,x.a.createElement(nC.a,{style:{width:"auto"},name:"track",id:"track",type:"checkbox",checked:t.track||!1,onChange:function(){return i({track:!t.track})}}),x.a.createElement("span",null,"Created further resources"))))),x.a.createElement("div",{className:"d-flex"},x.a.createElement(bC,{onClick:function(){l(),r(!1)},type:"button"},x.a.createElement(vC,{size:16}),"Clear")))):null)},bC=Sn(Pn.Button)(mC()),gC=Sn(Eu)(uC()),hC=Sn.span(cC()),xC=Sn(Pn.Button)(lC()),EC=Sn.span(oC()),yC=Sn(tC.a)(iC()),OC=Sn(Pn.Button)(aC(),k.a.lessThan("medium")(rC()));function jC(){var e=Object(i.a)(["\n    query economicResourcesFiltered($agent: [ID]) {\n  economicResourcesFiltered(agent: $agent) {\n    id\n    name\n    note\n    image\n    currentLocation {\n      name\n    }\n    trace {\n      id\n      note\n      hasPointInTime\n    }\n    track {\n      id\n      note\n      hasPointInTime\n    }\n    onhandQuantity {\n      hasUnit {\n        id\n        label\n      }\n      hasNumericalValue\n    }\n    primaryAccountable {\n      id\n      name\n    }\n  }\n}\n    "]);return jC=function(){return e},e}var kC=U()(jC());var wC,CC=t(814),IC={sort:"",order:"",search:"",trace:!1,track:!1},TC=function(){var e=Object(Tn.i)(),n=Object(Tn.h)(),t=e.pathname.split("/")[2],r=x.a.useState(!1),a=Object(c.a)(r,2),i=a[0],o=a[1],u=Object(h.useState)(!1),m=Object(c.a)(u,2),s=m[0],d=m[1],f=Object(h.useState)([]),v=Object(c.a)(f,2),p=v[0],b=v[1],g=Object(h.useState)(IC),E=Object(c.a)(g,2),y=E[0],O=E[1];Object(h.useEffect)((function(){var n=e.search,t=CC.parse(n);(null===n||void 0===n?void 0:n.length)&&d(!0),O(t)}),[]);var j,k=vF(),C=Object(h.useReducer)((function(e){return!k()&&!e}),!1),I=Object(c.a)(C,2),T=I[0],F=I[1],S=T?x.a.createElement(gl,{closeModal:F},i?x.a.createElement(By,{done:o}):x.a.createElement(cO,{done:F,toggleCreateLocation:o})):null,P=(j={variables:{agent:t?[t]:[]}},q.d(kC,j)).data,M=(null===P||void 0===P?void 0:P.economicResourcesFiltered)||[];Object(h.useEffect)((function(){M.length&&_(!0)}),[M]);Object(h.useEffect)((function(){_(y.trace)}),[y.trace]),Object(h.useEffect)((function(){_(y.track)}),[y.track]),Object(h.useEffect)((function(){y.search&&_(y.search)}),[y.search]),Object(h.useEffect)((function(){var e=Object(w.a)(p);e=e.sort((function(e,n){return e[y.sort]>n[y.sort]?1:e[y.sort]<n[y.sort]?-1:0})),"ASC"!==y.order?b(e):b(e.reverse())}),[y.order]),Object(h.useEffect)((function(){var e=CC.stringify(function(e){var n={};return Object.keys(e).forEach((function(t){("boolean"===typeof e[t]&&!0===e[t]||"number"===typeof e[t]||"string"===typeof e[t]&&""!==e[t])&&(n[t]=e[t])})),n}(y));n.push({search:e}),_(!0)}),[y]);var _=function(n){if(e.search.length||n){var t=Object(w.a)(M);y.trace&&(t=t.filter((function(e){return e.trace.length}))),y.track&&(t=t.filter((function(e){return e.track.length}))),y.search&&(t=t.filter((function(e){var n;return null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(y.search.toLowerCase())}))),y.order&&(t=t.sort((function(e,n){return e[y.sort]>n[y.sort]?1:e[y.sort]<n[y.sort]?-1:0}))),y.order&&"ASC"!==y.order?b(t):b(t.reverse()),b(t)}else b(M)};return x.a.createElement(x.a.Fragment,null,S,x.a.createElement(Gw,{inventory:p,done:F,owner:t},x.a.createElement(pC,{isOpen:s,triggerOpen:function(e){d(e)},onChange:function(e,n){O(n?IC:function(n){return Object(l.a)(Object(l.a)({},n),e)})},onClear:function(){O(IC),b(M)},filterSet:y})))};!function(e){e[e.Starred=0]="Starred",e[e.Communities=1]="Communities",e[e.Collections=2]="Collections",e[e.Following=3]="Following",e[e.Activities=4]="Activities",e[e.Inventory=5]="Inventory"}(wC||(wC={}));var FC={id:"User {name} - Starred"},SC={id:"User {name} - Communities"},PC={id:"User {name} - Collections"},MC={id:"User {name} - Following"},_C={id:"User {name} - Activities"},LC={id:"User {name} - Inventory"},NC=function(e){var n,t=e.userId,r=e.basePath,a=e.tab,i=Bf(t),o=a===wC.Starred?FC:a===wC.Communities?SC:a===wC.Collections?PC:a===wC.Following?MC:a===wC.Activities?_C:(wC.Inventory,LC);wi(!!(null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.name)&&o,i.user);var l=Pf(t).likesPage,u=Object(c.a)(l.formiks,1)[0],m=hf(t).activitiesPage,s=Object(c.a)(m.formiks,1)[0],d=jf(t).followedCollectionsPage,f=Object(c.a)(d.formiks,1)[0],v=Tf(t).followedCommunitiesPage,p=Object(c.a)(v.formiks,1)[0],b=Uf(t).followedUsersPage,g=Object(c.a)(b.formiks,1)[0],E=Object(h.useMemo)((function(){var e,n,a=i.totalActivities,o=i.totalCollections,c=i.totalCommunities,h=i.totalUsers,E=x.a.createElement(x.a.Fragment,null,l.edges.map((function(e){var n="Category"!==e.context.__typename&&"Flag"!==e.context.__typename&&"Follow"!==e.context.__typename&&"Like"!==e.context.__typename&&"SpatialThing"!==e.context.__typename&&"Organisation"!==e.context.__typename&&"Taggable"!==e.context.__typename&&"Intent"!==e.context.__typename?e.context:null,t=Rd(n),r=t.communityLink,a=t.communityName,o=i.user?AC(i.user):null,l=e,c=ls(l,de.Created),u="Comment"===e.context.__typename?x.a.createElement(Fk,{key:e.id,commentId:e.context.id}):x.a.createElement(Sk,{context:l}),m={actor:o,communityLink:r,communityName:a,createdAt:e.createdAt,event:c,status:Nd.Loaded,preview:u};return x.a.createElement(Jd,Object.assign({},m,{key:l.id}))}))),y=x.a.createElement(x.a.Fragment,null,m.edges.map((function(e){return x.a.createElement(lI,{activityId:e.id,key:e.id})}))),O=x.a.createElement(x.a.Fragment,null,d.edges.map((function(e){return e.context})).filter((function(e){return"Collection"===e.__typename})).map((function(e){return x.a.createElement(Yb.a,{m:2,mb:0,key:e.id},x.a.createElement(yF,{collectionId:e.id,key:e.id}))}))),j=x.a.createElement(x.a.Fragment,null,v.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){return x.a.createElement(Vv,{communityId:e.id,key:e.id})}))),k=x.a.createElement(TC,null),w=x.a.createElement(x.a.Fragment,null,b.edges.map((function(e){return e.context})).filter((function(e){return"User"===e.__typename})).map((function(e){return x.a.createElement(dg,{userId:e.userId,key:e.userId})})));return{basePath:r,ActivityBoxes:y,LikesBoxes:E,HeroUserBox:x.a.createElement(hv,{userId:t}),CollectionsBoxes:O,CommunityBoxes:j,InventoryBoxes:k,UserBoxes:w,userName:(null===(e=i.user)||void 0===e?void 0:e.name)||"",totalActivities:"".concat(a||"0"),totalCollections:"".concat(o||"0"),totalCommunities:"".concat(c||"0"),totalUsers:"".concat(h||"0"),userLink:(null===(n=i.user)||void 0===n?void 0:n.website)||"",loadMoreActivities:s,loadMoreCollections:f,loadMoreCommunities:p,loadMoreFollowing:g,loadMoreLikes:u}}),[i,l,m.edges,d.edges,v.edges,b.edges,t,r,s,f,p,g,u]);return x.a.createElement(Rk,E)},UC={exact:!0,path:"/user/:userId/:tab(starred|communities|collections|inventory|following)?",component:function(e){var n=e.match,t=n.params.userId,r=n.params.tab,a="starred"===r?wC.Starred:"communities"===r?wC.Communities:"collections"===r?wC.Collections:"following"===r?wC.Following:"inventory"===r?wC.Inventory:r?null:wC.Activities,i=Object(h.useMemo)((function(){return null===a?null:{tab:a,userId:t,basePath:RC.getPath({tab:void 0,userId:t},void 0)}}),[a,t]);return i?x.a.createElement(Oj,null,x.a.createElement(NC,i)):x.a.createElement(vh,null)}},RC=uE(UC),AC=function(e){var n,t;return{icon:(null===(n=e.icon)||void 0===n?void 0:n.url)||(null===(t=e.image)||void 0===t?void 0:t.url)||"",name:e.userName||"",link:RC.getPath({tab:void 0,userId:e.userId},void 0)}},zC=function(e){var n,t,r,a=(r={variables:{threadId:e,limit:Ee}},q.d(Ws,r)),i=nr(null===(n=a.data)||void 0===n||null===(t=n.thread)||void 0===t?void 0:t.comments,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(l.a)(Object(l.a)({},t),{},{limit:Ee,threadId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.thread)||void 0===t?void 0:t.comments)&&(null===(a=e.thread)||void 0===a?void 0:a.comments)?Object(l.a)(Object(l.a)({},i),{},{thread:Object(l.a)(Object(l.a)({},i.thread),{},{comments:r({prev:e.thread.comments,fetched:i.thread.comments})})}):e}})}));return Object(h.useMemo)((function(){return{commentPage:i}}),[i])},BC=t(927);function DC(){var e=Object(i.a)(["\n  border-bottom: ",";\n  background: ",";\n  cursor: pointer;\n  &:hover {\n    background: ",";\n  }\n  a {\n    text-decoration: none;\n    * {\n      text-decoration: none;\n    }\n  }\n"]);return DC=function(){return e},e}function $C(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  flex: 1;\n"]);return $C=function(){return e},e}function qC(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return qC=function(){return e},e}function VC(){var e=Object(i.a)(['\n  max-width: 28px !important;\n  max-height: 28px !important;\n  border-radius: 28px !important;\n  background: url("','");\n  background-repeat: no-repeat;\n  background-position: cover;\n  width: 28px;\n  height: 28px;\n  background-size: cover;\n']);return VC=function(){return e},e}function QC(){var e=Object(i.a)(["\n  color: ",";\n"]);return QC=function(){return e},e}function WC(){var e=Object(i.a)(["\n  svg {\n    vertical-align: middle;\n  }\n"]);return WC=function(){return e},e}var HC=function(e){var n=e.content,t=e.lastActivity,r=e.totalReplies,a=e.totalLikes,i=e.members,o=e.link;return x.a.createElement(XC,{p:3},x.a.createElement(mt.c,{to:o},x.a.createElement(KC,{variant:"text"},n),x.a.createElement(Pn.Flex,{mt:2,alignItems:"center"},x.a.createElement(Pn.Flex,{flex:1},x.a.createElement(YC,null,x.a.createElement(Yn.Trans,{id:"Last activity"})," ",ka.DateTime.fromSQL(t).toRelative()),x.a.createElement(GC,null,x.a.createElement(Pn.Flex,{alignItems:"center"},x.a.createElement(JC,{mr:1},x.a.createElement(BC.a,{size:16}))," ",r||0),x.a.createElement(Pn.Flex,{ml:3,alignItems:"center"},x.a.createElement(JC,{mr:1},x.a.createElement(Kl.a,{size:16})),a||0))),x.a.createElement(Pn.Flex,null,i.map((function(e,n){return x.a.createElement(ZC,{ml:1,src:e})}))))))},JC=Sn(Pn.Box)(WC()),KC=Sn(Pn.Text)(QC(),(function(e){return e.theme.colors.dark})),ZC=Sn(Pn.Box)(VC(),(function(e){return e.src})),GC=Sn(Pn.Flex)(qC(),(function(e){return e.theme.colors.mediumdark})),YC=Sn(Pn.Text)($C(),(function(e){return e.theme.colors.mediumdark})),XC=Sn(Pn.Box)(DC(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.lighter})),eI=function(e){var n=e.threadId,t=Ud(n),r=t.mainComment,a=t.totalReplies,i=Object(h.useMemo)((function(){return r?{content:r.content,lastActivity:r.createdAt,members:[],totalLikes:"".concat(r.likerCount||0),totalReplies:a?"".concat(a):"",link:"/thread/".concat(n)}:null}),[r,a,n]);return i&&x.a.createElement(HC,i)},nI=function(e){var n=e.ctx;if(!n)return null;switch(n.__typename){case"Activity":return x.a.createElement(lI,{activityId:n.id});case"Collection":return x.a.createElement(yF,{collectionId:n.id});case"Comment":return x.a.createElement(Md,{commentId:n.id,mainComment:!1});case"Community":return x.a.createElement(Vv,{communityId:n.id});case"Resource":return x.a.createElement(dk,{resourceId:n.id});case"Thread":return x.a.createElement(eI,{threadId:n.id});case"User":return x.a.createElement(dg,{userId:n.id});default:return null}},tI={id:"Discussion: {excerpt}"},rI=function(e){var n=e.threadId,t=zC(n).commentPage,r=Object(c.a)(t.formiks,1)[0],a=Ud(n),i=a.mainComment&&{excerpt:"".concat(a.mainComment.content.substring(0,30)," ...")};wi(!!i&&tI,i);var o=Object(er.a)({initialValues:{replyMessage:""},onSubmit:function(e){var n=e.replyMessage;return a.reply(n)}}),u=Object(h.useMemo)((function(){var e,n=a.context,i=a.mainComment;if(n&&("User"===n.__typename||"Like"===n.__typename||"Follow"===n.__typename||"Comment"===n.__typename))return null;var c=os(n);if(!i||!c)return null;var u=Rd(c),m=u.communityName,s=u.communityId,d=u.communityIcon,f={communityLink:"/communities/".concat(s),communityName:m,event:"started a discussion",status:Nd.Loaded},v=x.a.createElement(Jd,Object(l.a)(Object(l.a)({},f),{},{actor:i.creator?AC(i.creator):null,preview:x.a.createElement(Md,{commentId:i.id,mainComment:!0}),createdAt:i.createdAt}));return{Comments:x.a.createElement(x.a.Fragment,null,t.edges.filter((function(e){var n;return e.id!==(null===(n=a.mainComment)||void 0===n?void 0:n.id)})).map((function(e){return x.a.createElement(Yb.a,{mb:1,key:e.id},x.a.createElement(Jd,Object(l.a)(Object(l.a)({},f),{},{event:"replied",actor:e.creator?AC(e.creator):{icon:"",link:"",name:""},preview:x.a.createElement(Md,{commentId:e.id,mainComment:!1,hideActions:!0}),createdAt:e.createdAt})))}))),Context:x.a.createElement(nI,{ctx:"User"===c.__typename?Object(l.a)(Object(l.a)({},c),{},{id:c.userId}):c}),MainThread:v,communityIcon:d,communityId:s,communityName:m,reply:a.canReply?{replyFormik:o}:null,isCommunityContext:"Community"===(null===(e=a.context)||void 0===e?void 0:e.__typename),loadMoreComments:r}}),[a,t,r,o]);return u&&x.a.createElement(ks,u)},aI={exact:!0,path:"/thread/:threadId",component:function(e){var n=e.match.params.threadId,t=Object(h.useMemo)((function(){return{threadId:n}}),[n]);return x.a.createElement(Oj,null,x.a.createElement(rI,t))}},iI=uE(aI),oI=function(e){var n,t,r,a=null===(n=(t={variables:{activityId:e}},q.d(is,t)).data)||void 0===n?void 0:n.activity,i=os(null===a||void 0===a?void 0:a.context),o=function(e){return e?ls(e.context,e.verb):""}(a)||"",l=(r=i)?"Comment"===r.__typename?r.thread?iI.getPath({threadId:r.thread.id},void 0):"":"Resource"===r.__typename?r.payload?r.payload.url:"":"User"===r.__typename?RC.getPath({userId:r.userId,tab:void 0},void 0):"Collection"===r.__typename?kj.getPath({collectionId:r.id,tab:void 0},void 0):"Community"===r.__typename?ET.getPath({communityId:r.id,tab:void 0},void 0):null:"",c=Rd(i);return Object(h.useMemo)((function(){return{activity:a,mainContext:i,eventString:o,link:l,communityInfoStrings:c}}),[a,i,o,l,c])},lI=function(e){var n=e.activityId,t=oI(n),r=Object(h.useMemo)((function(){var e=t.activity,n=t.communityInfoStrings,r=t.eventString;if(e){var a,i,o;if(!e.context)return console.error("ActivityPreviewHOC: user or context :null",e),null;var c="Comment"===e.context.__typename?null===(a=e.context.thread)||void 0===a?void 0:a.id:"Like"===e.context.__typename&&"Comment"===(null===(i=e.context.context)||void 0===i?void 0:i.__typename)?null===(o=e.context.context.thread)||void 0===o?void 0:o.id:void 0,u=x.a.createElement(x.a.Fragment,null);return"Category"!==e.context.__typename&&"Intent"!==e.context.__typename&&"Organisation"!==e.context.__typename&&"SpatialThing"!==e.context.__typename&&"Taggable"!==e.context.__typename&&(u=x.a.createElement(Sk,{context:e.context})),Object(l.a)(Object(l.a)({status:Nd.Loaded,createdAt:e.createdAt,actor:e.user&&AC(e.user),threadUrl:c&&iI.getPath({threadId:c},void 0),event:r},n),{},{preview:u})}return{status:Nd.Loading}}),[t]);return r&&x.a.createElement(Jd,r)};function cI(){var e=Object(i.a)(["\n    query communityIntents($communityId: ID) {\n  intentsFiltered(inScopeOf: [$communityId]) {\n    ...IntentPreview\n  }\n}\n    ",""]);return cI=function(){return e},e}function uI(){var e=Object(i.a)(["\n    fragment IntentPreview on Intent {\n  id\n  name\n  note\n  tags {\n    __typename\n  }\n}\n    "]);return uI=function(){return e},e}var mI=U()(uI()),sI=U()(cI(),mI);var dI=function(e){var n,t,r,a=null!==(n=null===(t=(r={variables:{communityId:e}},q.d(sI,r)).data)||void 0===t?void 0:t.intentsFiltered)&&void 0!==n?n:[];return Object(h.useMemo)((function(){return{communityIntents:a}}),[a])};function fI(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n"]);return fI=function(){return e},e}function vI(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return vI=function(){return e},e}function pI(){var e=Object(i.a)(["\n  position: relative;\n  text-decoration: none;\n  background: ",";\n  margin-top: 0;\n  border-radius: 6px;\n"]);return pI=function(){return e},e}function bI(){var e=Object(i.a)(["\n  text-decoration: none;\n  color: ",";\n  background: 0;\n  border: 0;\n\n  svg {\n    margin: 0px;\n    margin-right: 5px;\n    display: inline-flex;\n    position: relative;\n    top: 2px;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return bI=function(){return e},e}function gI(){var e=Object(i.a)(["\n  border: ",";\n  background: ",";\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n  margin: 10px;\n"]);return gI=function(){return e},e}function hI(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: none;\n    fill: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg {\n      fill: ",";\n    }\n    div {\n      color: ",";\n    }\n    color: ",";\n    background: ",";\n    border-color: ",";\n  }\n"]);return hI=function(){return e},e}function xI(){var e=Object(i.a)(["\n  justify-content: start;\n  padding: 8px;\n  padding-top: 0;\n"]);return xI=function(){return e},e}function EI(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return EI=function(){return e},e}function yI(){var e=Object(i.a)(["\n  font-size: ",";\n  color: ",";\n"]);return yI=function(){return e},e}function OI(){var e=Object(i.a)(["\n  color: ",";\n  word-break: break-word;\n"]);return OI=function(){return e},e}function jI(){var e=Object(i.a)(["\n  flex: 1;\n  a {\n    text-decoration: underline;\n    font-weight: 600;\n    color: ",";\n  }\n"]);return jI=function(){return e},e}function kI(){var e=Object(i.a)(["\n  align-items: center;\n"]);return kI=function(){return e},e}var wI=function(e){var n=e.icon,t=e.name,r=e.summary,a=e.link,i=e.collectionLink,o=e.collectionName,l=e.like,c=e.isSearch,u=e.hideActions,m=e.onOpen;return h.createElement(_I,null,c&&h.createElement(Tr,null,h.createElement(Yn.Trans,{id:"Intent"})),h.createElement(NI,{p:2},""!==n&&h.createElement(Vl,{size:"m",src:n}),h.createElement(UI,{flex:1,ml:3},h.createElement(LI,{onClick:function(){m&&m(a)}},h.createElement(RI,{flex:"1"},t)),r&&h.createElement(TI,{variant:"text",mt:2},r))),h.createElement(CI,null,h.createElement(II,{ml:2,mb:2},"Added in ",h.createElement(mt.c,{to:i}," +",o)),u?null:h.createElement(PI,null,l&&h.createElement(MI,{bordered:!0,liked:!!l.iLikeIt,onClick:l.toggleLikeFormik.submitForm},h.createElement(SI,null,h.createElement(Kl.a,{strokeWidth:"1",size:"18"})),h.createElement(FI,{variant:"text",sx:{textTransform:"capitalize"},ml:1},l.totalLikes)))))},CI=Sn(Pn.Flex)(kI()),II=Sn(Pn.Flex)(jI(),(function(e){return e.theme.colors.dark})),TI=Sn(Pn.Text)(OI(),(function(e){return e.theme.colors.dark})),FI=Sn(Pn.Text)(yI(),cn.s1,(function(e){return e.theme.colors.darker})),SI=Sn(Pn.Box)(EI()),PI=Sn(Pn.Flex)(xI()),MI=Sn(Pn.Flex)(hI(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),cn.s1,(function(e){return e.liked?e.theme.colors.lightest:e.theme.colors.primary}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary})),_I=Sn(Pn.Box)(gI(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),LI=Sn.button(bI(),(function(e){return e.theme.colors.darker})),NI=Sn(Pn.Flex)(pI(),(function(e){return e.theme.colors.appInverse})),UI=Sn(Pn.Box)(vI()),RI=Sn(Pn.Heading)(fI(),(function(e){return e.theme.colors.darker})),AI=function(e){var n=e.intentId,t={name:e.name,summary:e.note,link:n,like:null,hideActions:!0,collectionLink:e.communityLink,collectionName:e.communityName,onOpen:e.onOpen};return t&&x.a.createElement(wI,t)};function zI(){var e=Object(i.a)(["\n    query intentPanel($intentId: ID) {\n  intent(id: $intentId) {\n    resourceInventoriedAs {\n      id\n      trace {\n        hasPointInTime\n        action {\n          label\n        }\n      }\n    }\n  }\n}\n    "]);return zI=function(){return e},e}function BI(){var e=Object(i.a)(["\n    mutation createEconomicEvent($note: String, $action: ID!, $provider: ID!, $receiver: ID!, $hasUnit: ID!, $hasNumericalValue: Float!) {\n  createEconomicEvent(event: {note: $note, action: $action, provider: $provider, receiver: $receiver, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}}) {\n    economicEvent {\n      id\n    }\n    economicResource {\n      id\n    }\n  }\n}\n    "]);return BI=function(){return e},e}var DI=U()(BI());U()(zI());var $I=function(){var e,n=q.c(DI,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c,u,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.note,o=n.action,l=n.provider,c=n.receiver,u=n.hasUnit,m=n.hasNumericalValue,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{note:t,action:o,provider:l,receiver:c,hasUnit:u,hasNumericalValue:m}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return Object(h.useMemo)((function(){return{create:l}}),[l])},qI=xi.object().shape({note:xi.string().max(500,"Too Long!"),action:xi.object().shape({id:xi.string().required("Required")}),provider:xi.object().shape({id:xi.string().required("Required")}),receiver:xi.object().shape({id:xi.string().required("Required")}),hasUnit:xi.object().shape({id:xi.string().required("Required")}),hasNumericalValue:xi.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),VI=function(e){var n=e.actionList,t=e.setAction,r=e.providerList,a=e.receiverList,i=e.unitPages,o=h.useState([]),s=Object(c.a)(o,2),d=s[0],f=s[1],v=h.useState([]),p=Object(c.a)(v,2),b=p[0],g=p[1],x=h.useState([]),E=Object(c.a)(x,2),y=E[0],O=E[1];h.useEffect((function(){f(Hy(r,"name")),g(Hy(a,"name"))}),[r,a]),h.useEffect((function(){O(Hy(null===i||void 0===i?void 0:i.edges,{variables:["label","symbol"],template:"label / symbol"}))}),[i]);var j=$I().create,k=Object(er.a)({initialValues:{name:"",note:"",image:void 0,action:{id:"",label:""},provider:{id:"",label:"",note:""},receiver:{id:"",label:"",note:""},hasUnit:{id:"",label:"",note:""},hasNumericalValue:0},validateOnChange:!1,validateOnBlur:!1,validationSchema:qI,enableReinitialize:!0,onSubmit:function(e){return j({action:e.action.id,note:e.note,provider:e.provider.id,receiver:e.receiver.id,hasUnit:e.hasUnit.id,hasNumericalValue:e.hasNumericalValue}).then((function(e){e.errors||m.c.success("Event was created",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})})).catch((function(e){return console.log(e)}))}});return h.createElement(VE,null,h.createElement(HE,{onSubmit:k.handleSubmit},h.createElement(Pn.Box,null,h.createElement(QE,null,h.createElement(ry,{onSelect:function(e,n){t(n.id),k.setValues(Object(l.a)(Object(l.a)({},k.values),{},{action:n}))},options:n,variant:"primary",id:"actions",name:"actions",placeholder:Object(Yn.i18nMark)("Select action"),value:k.values.action})),k.errors.action&&h.createElement(XE,{variant:"negative"},k.errors.action&&"Required")),k.values.action.id?h.createElement("div",null,h.createElement(Eu,null,h.createElement("div",{className:"d-flex"},h.createElement("div",{className:"item_col-6"},h.createElement(QE,null,h.createElement(WE,null,"Receiver"),h.createElement(ry,{onSelect:function(e,n){k.setValues(Object(l.a)(Object(l.a)({},k.values),{},Object(u.a)({},e,n)))},placeholder:Object(Yn.i18nMark)("Provider"),options:d,variant:"primary",value:k.values.provider,id:"provider",name:"provider"})),k.errors.provider&&h.createElement(XE,{variant:"negative"},k.errors.provider&&"Required")),h.createElement("div",{className:"item_col-6"},h.createElement(QE,null,h.createElement(WE,null,"Receiver"),h.createElement(ry,{onSelect:function(e,n){k.setValues(Object(l.a)(Object(l.a)({},k.values),{},Object(u.a)({},e,n)))},placeholder:Object(Yn.i18nMark)("Receiver"),options:b,variant:"primary",value:k.values.receiver,id:"receiver",name:"receiver"})),k.errors.receiver&&h.createElement(XE,{variant:"negative"},k.errors.receiver&&"Required")))),h.createElement(Eu,null,h.createElement("div",{className:"d-flex"},h.createElement("div",{className:"item_col-6"},h.createElement(QE,null,h.createElement(WE,null,"unit"),h.createElement(ry,{onSelect:function(e,n){k.setValues(Object(l.a)(Object(l.a)({},k.values),{},Object(u.a)({},e,n)))},options:y,variant:"primary",id:"hasUnit",name:"hasUnit",placeholder:Object(Yn.i18nMark)("Unit"),value:k.values.hasUnit})),k.errors.hasUnit&&h.createElement(XE,{variant:"negative"},k.errors.hasUnit&&"Required")),h.createElement("div",{className:"item_col-6"},h.createElement(QE,null,h.createElement(WE,null,"numerical value"),h.createElement(GE,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:k.handleChange,placeholder:Object(Yn.i18nMark)("Numerical Value"),value:k.values.hasNumericalValue})),k.errors.hasNumericalValue&&h.createElement(XE,{variant:"negative"},k.errors.hasNumericalValue)))),h.createElement(Eu,null,h.createElement(QE,null,h.createElement(WE,null,"note"),h.createElement(GE,{id:"note",type:"textarea",name:"note",onChange:k.handleChange,placeholder:Object(Yn.i18nMark)("Note"),value:k.values.note})),h.createElement(dl,null,k.values.note?500-k.values.note.length:500),k.errors.note&&h.createElement(XE,{variant:"negative"},k.errors.note)),h.createElement(JE,null,h.createElement(ot,{variant:"info",type:"submit",className:"event_btn"},h.createElement(Yn.Trans,{id:"Create Event"})))):null),h.createElement(m.b,null))},QI=t(799);function WI(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return WI=function(){return e},e}function HI(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return HI=function(){return e},e}function JI(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return JI=function(){return e},e}function KI(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return KI=function(){return e},e}function ZI(){var e=Object(i.a)(["\n  color: ",";\n"]);return ZI=function(){return e},e}function GI(){var e=Object(i.a)(["\n  margin-bottom: 16px;\n  > img {\n    max-width: 100%;\n  }\n"]);return GI=function(){return e},e}function YI(){var e=Object(i.a)(["\n    display: block;\n  "]);return YI=function(){return e},e}function XI(){var e=Object(i.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr 1fr;\n  padding: 16px;\n  ",";\n"]);return XI=function(){return e},e}function eT(){var e=Object(i.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n  > button {\n    width: 100%;\n  }\n"]);return eT=function(){return e},e}function nT(){var e=Object(i.a)(["\n  list-style: none;\n  > li {\n    display: flex;\n    padding: 10px;\n    margin-bottom: 10px;\n    background: ",";\n    border-radius: 3px;\n    color: ",";\n    > span:last-child {\n      margin-left: auto;\n    }\n  }\n"]);return nT=function(){return e},e}var tT=Sn.ul(nT(),(function(e){return e.theme.colors.darkest}),(function(e){return e.theme.colors.light})),rT=Sn.div(eT()),aT=Sn.div(XI(),k.a.lessThan("medium")(YI())),iT=Sn.div(GI()),oT=Sn(Pn.Text)(ZI(),(function(e){return e.theme.colors.mediumdark})),lT=Sn.div(KI(),Object(tt.a)(),(function(e){return e.theme.colors.mediumdark}),k.a.lessThan("medium")(JI()),(function(e){return e.theme.colors.mediumdark})),cT=Sn(Pn.Flex)(HI(),k.a.lessThan("medium")(WI())),uT=function(e){var n=e.actor,t=e.createdAt,r=e.link,a=e.name,i=e.collectionName,o=e.icon,l=e.resourceQuantity,u=e.history,m=h.useState(!1),s=Object(c.a)(m,2),d=s[0],f=s[1];return h.createElement(ul,null,h.createElement(vl,null,h.createElement(Pn.Heading,{m:2},a),h.createElement(Kd,{actor:null!==n&&void 0!==n?n:void 0,createdAt:null!==t&&void 0!==t?t:"",event:"Created a resource",communityLink:r,communityName:i})),h.createElement(cT,null,h.createElement(lT,null,h.createElement(oT,{fontWeight:"bold"}))),h.createElement(aT,null,h.createElement(Pn.Box,null,o&&""!==o&&h.createElement(iT,null,h.createElement("img",{src:o,alt:a})),h.createElement(rT,null,h.createElement(ot,{variant:"outline"},h.createElement(Yn.Trans,{id:"Follow"}))),h.createElement(rT,null,h.createElement(ot,{variant:"outline"},h.createElement(Yn.Trans,{id:"Comment"}))),h.createElement(rT,null,h.createElement(ot,{variant:"outline"},h.createElement(Yn.Trans,{id:"Remaining"})," ",l)),h.createElement(rT,null,h.createElement(ot,{style:{background:d?Cn.colors.darkest:"transparent",color:d?Cn.colors.light:Cn.colors.dark},variant:"outline",onClick:function(){f(!d)}},h.createElement("span",{style:{height:"24px",display:"inline-block",marginTop:"-12px",marginRight:6,verticalAlign:"middle"}},h.createElement(Yn.Trans,{id:"History"}),h.createElement("span",{style:{marginLeft:6}}),u&&u.length),h.createElement(QI.default,{style:{display:"inline-block"}}))),h.createElement(rT,null,d&&h.createElement(tT,null,u&&u.map((function(e,n){return h.createElement("li",{key:n},h.createElement("span",null,e.action),e.date&&h.createElement("span",null,Object(Vk.a)(new Date(e.date),"dd MMM yyyy")))}))))),h.createElement(Pn.Box,null,h.createElement(lO,null,h.createElement(VI,null)))))};function mT(){var e=Object(i.a)(["\n    query intentItem($intentId: ID) {\n  intent(id: $intentId) {\n    hasBeginning\n    hasPointInTime\n    name\n    note\n    image\n    tags {\n      ... on Taggable {\n        name\n      }\n    }\n    resourceQuantity {\n      hasUnit {\n        label\n      }\n      hasNumericalValue\n    }\n    resourceInventoriedAs {\n      id\n      trace {\n        hasPointInTime\n        action {\n          label\n        }\n      }\n    }\n    provider {\n      name\n      image\n      id\n    }\n  }\n}\n    "]);return mT=function(){return e},e}var sT=U()(mT());var dT,fT=function(e){var n,t,r,a,i,o,l,c,u,m,s,d,f=e.intentId,v=e.communityName,p=null===(n=(d={variables:{intentId:f}},q.d(sT,d)).data)||void 0===n?void 0:n.intent;if(!p)return null;var b=p.provider,g={icon:b&&"image"in b&&b.image||"",name:null!==(t=null===b||void 0===b?void 0:b.name)&&void 0!==t?t:"",link:null!==(r=null===b||void 0===b?void 0:b.id)&&void 0!==r?r:""},x=null!==(a=null===p||void 0===p?void 0:p.tags)&&void 0!==a?a:[],E=null!==(i=null===(o=p.resourceQuantity)||void 0===o?void 0:o.hasNumericalValue)&&void 0!==i?i:0,y=null!==(l=null===(c=p.resourceInventoriedAs)||void 0===c||null===(u=c.trace)||void 0===u?void 0:u.map((function(e){var n;return{action:e.action.label,date:null!==(n=e.hasPointInTime)&&void 0!==n?n:null}})))&&void 0!==l?l:[],O={actor:g,collectionName:v,link:f,createdAt:null!==(m=null===p||void 0===p?void 0:p.hasPointInTime)&&void 0!==m?m:null,name:null!==(s=null===p||void 0===p?void 0:p.name)&&void 0!==s?s:"",tags:x.map((function(e){var n;return null!==(n=e.name)&&void 0!==n?n:""})),icon:null===p||void 0===p?void 0:p.image,resourceQuantity:E,history:y,like:null,isFlagged:!1,isOpenDropdown:!1,toggleDropdown:function(){},toggleFlag:null,collectionLink:v};return h.createElement(uT,O)};!function(e){e[e.Activities=0]="Activities",e[e.Intents=1]="Intents",e[e.Discussions=2]="Discussions",e[e.Members=3]="Members"}(dT||(dT={}));var vT={id:"Community {name} - Intents"},pT={id:"Community {name} - Activities"},bT={id:"Community {name} - Discussions"},gT={id:"Community {name} - Members"},hT=function(e){var n,t=e.communityId,r=e.basePath,a=e.tab,i=qc(t),o=i.community,l=i.createThread,u=Object(h.useState)(null),s=Object(c.a)(u,2),d=s[0],f=s[1],v=a===dT.Members?gT:a===dT.Activities?pT:a===dT.Discussions?bT:(dT.Intents,vT);wi(!!(null===o||void 0===o?void 0:o.name)&&v,o);var p=Qc(t).communityFollowersPage,b=Vc(t).threadsPage,g=Object(c.a)(b.formiks,1)[0],E=Cc(t).collectionsPage,y=Object(c.a)(E.formiks,1)[0],O=yc(t).activitiesPage,j=Object(c.a)(O.formiks,1)[0],k=dI(t).communityIntents,w=!!(null===o||void 0===o?void 0:o.myFollow),C=function(e){return!w&&(Object(m.c)(e,{type:"warning"}),!0)},I=Object(Tn.h)(),T=Object(er.a)({initialValues:{text:""},onSubmit:function(e){var n=e.text;return C(Ma._("You should join this community to create a new trhead"))?void 0:l(n).then((function(e){I.push("/thread/".concat(e))}))}}),F=O.edges.map((function(e){return x.a.createElement(lI,{activityId:e.id,key:e.id})})),S=b.edges.map((function(e){var n;return(null===(n=e.comments)||void 0===n?void 0:n.edges[0])?x.a.createElement(Pn.Box,{key:e.id},x.a.createElement(eI,{threadId:e.id})):(console.warn("Found a thread [id:".concat(e.id,"] with an empty comments edges .. skipping"),e),null)})).filter((function(e){return!!e})),P=p.edges.map((function(e){var n;return e.creator&&x.a.createElement(dg,{key:e.id,userId:null===(n=e.creator)||void 0===n?void 0:n.userId})})).filter((function(e){return!!e})),M=x.a.createElement(rs,{communityId:t,basePath:r}),_=k.map((function(e,n){var r,a,i;return e&&x.a.createElement(AI,{key:n,name:null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"",intentId:e.id,note:null!==(a=null===e||void 0===e?void 0:e.note)&&void 0!==a?a:"",communityName:null!==(i=null===o||void 0===o?void 0:o.name)&&void 0!==i?i:"",communityLink:"/communities/".concat(t),onOpen:f})})).filter((function(e){return!!e})),L=vF(),N=Object(h.useReducer)((function(e){return!C(Ma._("You should join this community to create new collections"))&&!L()&&!e}),!1),U=Object(c.a)(N,2),R=U[0],A=U[1],z=R?x.a.createElement(gl,{closeModal:A},x.a.createElement(Fu,{done:A,communityId:t})):null,B=d?x.a.createElement(gl,{closeModal:function(){f(null)}},x.a.createElement(fT,{communityName:null!==(n=null===o||void 0===o?void 0:o.name)&&void 0!==n?n:"",intentId:d})):null,D=Object(h.useMemo)((function(){if(!o)return null;var e={discussions:ET.getPath({communityId:t,tab:"discussions"},void 0),members:ET.getPath({communityId:t,tab:"members"},void 0),timeline:ET.getPath({communityId:t,tab:"timeline"},void 0),intents:ET.getPath({communityId:t,tab:void 0},void 0)};return{Members:P,Intents:_,Activities:F,HeroCommunity:M,Threads:S,tabPaths:e,isJoined:w,communityId:t,newThreadFormik:w?T:null,loadMoreActivities:j,loadMoreCollections:y,loadMoreThreads:g,createCollection:A}}),[o,t,P,_,F,M,S,w,T,j,y,g]);return D&&x.a.createElement(x.a.Fragment,null,z,B,x.a.createElement(Vw,D))},xT={exact:!0,path:"/communities/:communityId/:tab(timeline|members|discussions|intents)?",component:function(e){var n=e.match,t=n.params.communityId,r=n.params.tab,a="timeline"===r?dT.Activities:"members"===r?dT.Members:"discussions"===r?dT.Discussions:r?null:dT.Intents,i=Object(h.useMemo)((function(){return null===a?null:{communityId:t,tab:a,basePath:"/communities/".concat(t)}}),[a,t]);return null===i?x.a.createElement(vh,null):x.a.createElement(Oj,null,x.a.createElement(hT,i))}},ET=uE(xT);function yT(){var e=Object(i.a)(["\n  margin-top: 9px;\n  cursor: pointer;\n"]);return yT=function(){return e},e}function OT(){var e=Object(i.a)(["\n  border-bottom: ",";\n  height: 50px;\n  background: ",";\n"]);return OT=function(){return e},e}function jT(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: auto auto 1fr auto;\n  column-gap: 8px;\n"]);return jT=function(){return e},e}function kT(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return kT=function(){return e},e}function wT(){var e=Object(i.a)(["\n  height: 30px;\n  line-height: 30px;\n  text-decoration: none;\n  padding: 0 8px;\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n  margin-top: 10px;\n  &:hover {\n    background: ",";\n  }\n  a {\n    text-decoration: none;\n  }\n  div {\n    text-decoration: none;\n    color: ",";\n  }\n"]);return wT=function(){return e},e}function CT(){var e=Object(i.a)(["\n  cursor: pointer;\n  display: flex;\n  flex: 0 0 120px;\n  order: 2;\n  justify-content: center;\n  align-items: center;\n  img {\n    min-width: 36px;\n    height: 36px;\n    border-radius: 36px;\n  }\n"]);return CT=function(){return e},e}function IT(){var e=Object(i.a)(["\n  cursor: pointer;\n  display: flex;\n  flex: 0 0 200px;\n  order: 2;\n  justify-content: flex-end;\n  align-items: center;\n  img {\n    min-width: 36px;\n    height: 36px;\n    border-radius: 36px;\n  }\n"]);return IT=function(){return e},e}function TT(){var e=Object(i.a)(["\n    img {\n        margin-right: 0;\n    }\n  "]);return TT=function(){return e},e}function FT(){var e=Object(i.a)(["\n  border-radius: 0px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  &:hover {\n    background: ",";\n  }\n  ",";\n"]);return FT=function(){return e},e}function ST(){var e=Object(i.a)(["\n  ",";\n  color: ",";\n"]);return ST=function(){return e},e}function PT(){var e=Object(i.a)(["\n  color: ",";\n"]);return PT=function(){return e},e}function MT(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]);return MT=function(){return e},e}function _T(){var e=Object(i.a)(["\n  display: flex;\n  margin-top: 7px;\n  input {\n    width: 100%;\n    border-radius: 4px;\n    max-width: 500px;\n    height: 36px;\n    margin: 0;\n    border: 0;\n    background: ",";\n  }\n"]);return _T=function(){return e},e}function LT(){var e=Object(i.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  grid-template-columns: 1fr 120px 200px;\n"]);return LT=function(){return e},e}var NT=function(e){var n=Object(Tn.h)(),t=x.a.useContext(_a).i18n,r=Object(Tn.i)(),a=Object(Tn.j)(),i=ET.is(r.pathname),o=Object(h.useState)(!1),l=Object(c.a)(o,2),u=l[0],m=l[1];return x.a.createElement(HT,null,x.a.createElement(UT,null,x.a.createElement(WT,null,x.a.createElement(QT,{onClick:function(){return n.goBack()}},x.a.createElement(Al.a,{size:"20"})),x.a.createElement(JT,{to:e.user?"/":"/discover"},x.a.createElement(Vl,{size:"s",src:Oe})),x.a.createElement(RT,null,e.Search),i&&x.a.createElement(AT,{to:"/communities/".concat(a.communityId,"/map/"),title:"Map"},x.a.createElement(zl.a,{size:"20"}))),x.a.createElement(qT,null,e.user&&x.a.createElement(DT,{sx:{position:"relative"},alignItems:"center",onClick:m},x.a.createElement(BT,{ml:2,variant:"link"},"Create"),x.a.createElement(zT,null,x.a.createElement(Bl.default,{size:"20"})),u&&x.a.createElement(pc,{createCommunity:e.createCommunity,createResource:e.createResource,createIntent:e.createIntent,toggleDropdown:function(){m(!u)}}))),x.a.createElement($T,{alignItems:"center"},e.user?x.a.createElement(DT,{sx:{position:"relative"},alignItems:"center",onClick:e.toggleDropdown},x.a.createElement(Vl,{size:"s",initials:e.user.name.substring(0,2),src:e.user.icon,variant:"avatar"}),x.a.createElement(BT,{ml:2,variant:"link"},e.user.name),x.a.createElement(zT,{ml:2},x.a.createElement(Bl.default,{size:"20"})),e.isOpenDropdown&&x.a.createElement(vc,{isAdmin:e.user.isAdmin,logout:e.user.logout,userLink:e.user.link,toggleDropdown:e.toggleDropdown})):x.a.createElement(Pn.Box,null,x.a.createElement(VT,null,x.a.createElement(mt.b,{to:"/"},x.a.createElement(Pn.Text,{variant:"link"},t._("Sign in"))))))))},UT=Sn(Pn.Box)(LT()),RT=Sn(Pn.Box)(_T(),(function(e){return e.theme.colors.app})),AT=Sn(mt.b)(MT()),zT=Sn(Pn.Box)(PT(),(function(e){return e.theme.colors.medium})),BT=Sn(Pn.Text)(ST(),Object(tt.c)("180px"),(function(e){return e.theme.colors.darker})),DT=Sn(Pn.Flex)(FT(),(function(e){return e.theme.colors.lighter}),k.a.lessThan("1280px")(TT())),$T=Sn(Pn.Box)(IT()),qT=Sn(Pn.Box)(CT()),VT=Sn(DT)(wT(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return Object(tt.b)("0.1",e.theme.colors.primary)}),(function(e){return e.theme.colors.lighter})),QT=Sn(Pn.Box)(kT(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),WT=Sn(Pn.Box)(jT()),HT=Sn(Pn.Box)(OT(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),JT=Sn(mt.b)(yT()),KT=function(){var e,n=Oa(),t=null===(e=n.me)||void 0===e?void 0:e.user,r=vF(),a=x.a.useState(!1),i=Object(c.a)(a,2),o=i[0],l=i[1],u=Object(h.useReducer)((function(e){return!r()&&!e}),!1),m=Object(c.a)(u,2),s=m[0],d=m[1],f=Object(h.useReducer)((function(e){return!r()&&!e}),!1),v=Object(c.a)(f,2),p=v[0],b=v[1],g=Object(h.useReducer)((function(e){return!r()&&!e}),!1),E=Object(c.a)(g,2),y=E[0],O=E[1],j=s?x.a.createElement(gl,{closeModal:d},x.a.createElement(Nl,{done:d})):null,k=p?x.a.createElement(gl,{closeModal:b},x.a.createElement(vy,{done:b})):null,w=y?x.a.createElement(gl,{closeModal:O},o?x.a.createElement(By,{done:l}):x.a.createElement(cO,{done:O,toggleCreateLocation:l})):null,C=Object(h.useContext)(Fi).toggleOpen,I=Object(h.useReducer)((function(e){return!e}),!1),T=Object(c.a)(I,2),F=T[0],S=T[1],P=Object(h.useMemo)((function(){var e;return{Search:x.a.createElement(Rl,{key:"search"}),user:t?{isAdmin:n.isAdmin,logout:n.logout,icon:(null===(e=t.icon)||void 0===e?void 0:e.url)||"",link:"/user/".concat(t.id),name:t.name||""}:null,toggleSideBar:C,createCommunity:d,createIntent:b,createResource:O,isOpenDropdown:F,toggleDropdown:S}}),[t,n.isAdmin,n.logout,C,F]);return x.a.createElement(x.a.Fragment,null,j,k,w,x.a.createElement(NT,P))};function ZT(){var e=Object(i.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  height: calc(100vh - 66px);\n  display: grid;\n  grid-template-rows: auto;\n  grid-template-columns: 1fr;\n  column-gap: 8px;\n"]);return ZT=function(){return e},e}function GT(){var e=Object(i.a)(["\n  height: 100vh;\n  grid-template-rows: 50px auto;\n  row-gap: 8px;\n  display: grid;\n"]);return GT=function(){return e},e}function YT(){var e=Object(i.a)(["\n    display: none;\n  "]);return YT=function(){return e},e}function XT(){var e=Object(i.a)(["\na {\n  height: 40px;\n  line-height: 40px;\n  padding: 0 8px;\n  border-radius: 4px;\n  text-decoration: none;\n  background: ",";\n  color: ",";\n  margin-right: 8px;\n}\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 8px;\n  margin-left: 8px;\n  flex:1;\n}\n","\n"]);return XT=function(){return e},e}function eF(){var e=Object(i.a)(["\n    display: none;\n  "]);return eF=function(){return e},e}function nF(){var e=Object(i.a)(["\n  ","\n"]);return nF=function(){return e},e}function tF(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return tF=function(){return e},e}var rF=function(e){var n=e.children,t=e.HeaderBox,r=e.SearchBox,a=Object(Tn.h)();return x.a.createElement(lF,null,x.a.createElement(oF,null,x.a.createElement(aF,{onClick:function(){return a.goBack()}},x.a.createElement(Al.a,{size:"20"})),r,x.a.createElement(mt.b,{to:"/login"},"Log in")),x.a.createElement(iF,null,t),x.a.createElement(cF,null,n))},aF=Sn(Pn.Box)(tF(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),iF=Sn(Pn.Box)(nF(),k.a.lessThan("medium")(eF())),oF=Sn(Pn.Box)(XT(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),k.a.greaterThan("medium")(YT())),lF=Sn(Pn.Box)(GT()),cF=Sn(Pn.Box)(ZT()),uF=function(e){var n=e.children,t=e.withoutHeader,r={HeaderBox:void 0!==t&&t?void 0:x.a.createElement(KT,null),SearchBox:x.a.createElement(Rl,null)};return x.a.createElement(Si,null,x.a.createElement(rF,r,n))},mF={exact:!0,path:"/login",component:function(e){e.match;return x.a.createElement(xE,null,x.a.createElement(uF,{withoutHeader:!0},x.a.createElement(Ti,null)))}},sF=uE(mF),dF={content:function(){return x.a.createElement(Yn.Trans,{id:"You need to <0>login</0> for that",components:[x.a.createElement(mt.b,{to:sF.getPath(void 0,void 0)})]})},opts:{type:"warning"}};function fF(e,n,t){var r=Object(h.useCallback)(e,n),i=vF(t);return Object(h.useCallback)(Object(o.a)(a.a.mark((function e(){var n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i()?null:r.apply(void 0,n));case 1:case"end":return e.stop()}}),e)}))),[r,i])}var vF=function(e){var n,t=Oa().me,r=!!(null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id);return Object(h.useCallback)((function(){var n=Object(l.a)(Object(l.a)({},dF),e),t=n.content,a=n.opts;return!r&&Object(m.c)(t,a),!r}),[r,e])},pF=function(e){var n,t=q.c(ra,n),r=Object(c.a)(t,2),i=r[0],l=r[1],u=function(e){return q.c(aa,e)}(),m=Object(c.a)(u,2),s=m[0],d=m[1],f=l.loading||d.loading,v=fF(Object(o.a)(a.a.mark((function n(){var t,r,o,l,c,u,m,d;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=(t=e||{}).id,o=t.followerCount,l=t.myFollow,c=t.__typename,u=t.name,r&&!f){n.next=3;break}return n.abrupt("return");case 3:if(l){n.next=8;break}return m=b({ctx:"Collection"===c?"Following Collection ".concat(u):"User"===c?"Following User ".concat(u):"Community"===c?"Joined Community ".concat(u):void 0}),n.abrupt("return",i({variables:{contextId:r},context:m,optimisticResponse:bF(c,r,o||0),refetchQueries:"Community"===c?[Xr({limit:10}),ba({communityId:r})]:"Collection"===c?[Wr({limit:10}),sa({collectionId:r})]:[]}));case 8:return d=b({ctx:"Collection"===c?"Unfollowing Collection ".concat(u):"User"===c?"Unfollowing User ".concat(u):"Community"===c?"Leaving Community ".concat(u):void 0}),n.abrupt("return",ea(l.id)?void 0:s({variables:{contextId:l.id},context:d,optimisticResponse:gF(c,r,o||1),refetchQueries:"Community"===c?[Xr({}),ba({communityId:r})]:"Collection"===c?[Wr({}),sa({collectionId:r})]:[]}));case 10:case"end":return n.stop()}}),n)}))),[e,f]);return Object(h.useMemo)((function(){return{toggleFollow:v}}),[v])},bF=function(e,n,t){return{__typename:"RootMutationType",createFollow:{__typename:"Follow",context:{__typename:e,id:n,myFollow:{__typename:"Follow",id:"#"},followerCount:t+1}}}},gF=function(e,n,t){return{__typename:"RootMutationType",delete:{__typename:"Follow",context:{__typename:e,id:n,myFollow:null,followerCount:t-1}}}};function hF(){var e=Object(i.a)(["\n    query collectionPreview($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    id\n    ...CollectionPreview\n  }\n}\n    ",""]);return hF=function(){return e},e}var xF=U()(hF(),Jt);var EF=function(e){var n,t,r=(t={variables:{collectionId:e}},q.d(xF,t)),a=pF(null===(n=r.data)||void 0===n?void 0:n.collection).toggleFollow;return Object(h.useMemo)((function(){var e;return{collection:null===(e=r.data)||void 0===e?void 0:e.collection,toggleFollow:a}}),[r,a])},yF=function(e){var n=e.collectionId,t=e.flagged,r=EF(n),a=r.collection,i=r.toggleFollow,o=Object(er.a)({initialValues:{},onSubmit:i}),l=Object(h.useMemo)((function(){return a?OF({collection:a,toggleFollowFormik:o,hideActions:!!t}):null}),[a,o,t]);return l&&x.a.createElement(Ir,l)},OF=function(e){var n=e.collection,t=e.hideActions,r=e.toggleFollowFormik,a=n.id,i=n.icon,o=n.isLocal,l=n.canonicalUrl,c=n.name,u=n.summary,m=n.resourceCount,s=n.displayUsername,d=n.myFollow;return{displayUsername:s,icon:(null===i||void 0===i?void 0:i.url)||"",isFollowing:!!d,link:{url:o?"/collections/".concat(a):l||"",external:!o},name:c,summary:u||"",totalResources:m||null,toggleFollowFormik:r,hideActions:t}},jF={id:"All Collections"},kF=function(){wi(jF);var e=ir().allCollectionsPage,n=Object(er.a)({initialValues:{},onSubmit:function(){return e.ready?e.next():void 0}}),t=Object(h.useMemo)((function(){return{CollectionsBoxes:x.a.createElement(x.a.Fragment,null,e.edges.map((function(e){return x.a.createElement(yF,{collectionId:e.id})}))),LoadMoreFormik:n}}),[e,n]);return x.a.createElement($t,t)},wF={exact:!0,path:"/collections",component:function(){return x.a.createElement(Oj,null,x.a.createElement(kF,null))}},CF=function(e){var n=e.CommunitiesBoxes,t=e.LoadMoreFormik,r=vF(),a=Object(h.useReducer)((function(e){return!r()&&!e}),!1),i=Object(c.a)(a,2),o=i[0],l=i[1],u=h.useState(!1),m=Object(c.a)(u,2),s=m[0],d=m[1],f=Object(h.useReducer)((function(e){return!r()&&!e}),!1),v=Object(c.a)(f,2),p=v[0],b=v[1],g=Object(h.useState)(window.innerWidth),x=Object(c.a)(g,2),E=x[0],y=x[1];Object(h.useLayoutEffect)((function(){y(window.innerWidth)}),[]);var O=o?h.createElement(gl,{closeModal:l},s?h.createElement(By,{done:d}):h.createElement(cO,{done:l,toggleCreateLocation:d})):null,j=p?h.createElement(gl,{closeModal:function(){b()}},h.createElement(vy,{done:b})):null;return h.createElement(Mt,null,O,j,h.createElement(_t,null,h.createElement(ul,null,h.createElement(Nt,null,h.createElement(Nn,{name:"All Communities"}),h.createElement(Nw,null,h.createElement(Uw,{variant:"primary",onClick:b},h.createElement(ec.a,{size:16,color:"#fff"}),h.createElement(Pn.Text,{variant:"button"},h.createElement(Yn.Trans,{id:"{0}",values:{0:E<998?"Add intent":"Create a new intent"}}))),h.createElement(Uw,{variant:"primary",onClick:function(){return l()}},h.createElement(ec.a,{size:16,color:"#fff"}),h.createElement(Pn.Text,{variant:"button"},h.createElement(Yn.Trans,{id:"{0}",values:{0:E<998?"Add resource":"Create a new resource"}})))),h.createElement(At,null,n),h.createElement(ct,{LoadMoreFormik:t})))),h.createElement(Ox,null))},IF={id:"All Communities"},TF=function(){wi(IF);var e=aE().allCommunitiesPage,n=Object(er.a)({initialValues:{},onSubmit:function(){return e.ready?e.next():void 0}}),t=Object(h.useMemo)((function(){return{CommunitiesBoxes:x.a.createElement(Yb.a,{m:2},e.edges.map((function(e){return x.a.createElement(Vv,{communityId:e.id})}))),LoadMoreFormik:n}}),[e,n]);return x.a.createElement(CF,t)},FF={exact:!0,path:"/communities",component:function(){return x.a.createElement(Oj,null,x.a.createElement(TF,null))}};function SF(){var e=Object(i.a)(["\n  background: #fff;\n  border-radius: 4px;\n  height: inherit;\n  padding: 30px 20px;\n  text-align: center;\n  height: fit-content;\n"]);return SF=function(){return e},e}function PF(){var e=Object(i.a)(["\n  text-align: center;\n  margin-top: 10px;\n"]);return PF=function(){return e},e}function MF(){var e=Object(i.a)(["\n  margin-bottom: 100px;\n  width: 432px;\n"]);return MF=function(){return e},e}function _F(){var e=Object(i.a)(["\n  margin: 0 auto;\n  width: 100%;\n  max-width: 900px;\n  margin-top: 60px;\n  padding: 16px;\n  padding-bottom: 50px;\n \n  }\n"]);return _F=function(){return e},e}function LF(){var e=Object(i.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr;\n  grid-template-areas: 'form' 'footer';\n"]);return LF=function(){return e},e}var NF=Sn.div(LF()),UF=Sn.div(_F()),RF=Sn(Pn.Box)(MF()),AF=function(e){var n=e.result;return h.createElement(h.Fragment,null,h.createElement(UF,null,h.createElement(NF,null,h.createElement(RF,null,h.createElement(Ba,null),h.createElement(BF,null,h.createElement(Pn.Box,null,n?null===n.error?h.createElement(h.Fragment,null,h.createElement(Pn.Text,{variant:"text"},"Email confirmed"),h.createElement(Pn.Text,{variant:"text",sx:{fontWeight:"bold",marginTop:"5px"}},"Welcome ",n.username,"!")):h.createElement(Pn.Text,{variant:"text"},"Error in email confirmation: ",n.error):h.createElement(Pn.Text,{variant:"text"},"Checking ...")),h.createElement(zF,null,h.createElement(mt.b,{to:"/"},h.createElement(ot,{mt:3,variant:"primary"},h.createElement(Yn.Trans,{id:"Sign in"})))))))))},zF=Sn(Pn.Box)(PF()),BF=Sn.div(SF()),DF={id:"Confirm your email"},$F=function(e){var n,t,r=e.token;wi(DF);var a=Object(Tn.h)().push,i=Ei(),o=i.confirmEmail,l=i.confirmEmailStatus,c=null===(n=l.data)||void 0===n||null===(t=n.confirmEmail)||void 0===t?void 0:t.me.user.name;Object(h.useEffect)((function(){c&&setTimeout((function(){return a("/")}),2e3)}),[c,a]),Object(h.useEffect)((function(){o(r)}),[r,o]);var u=Object(h.useMemo)((function(){return l.loading?{result:null}:l.error?{result:{error:l.error.message}}:c?{result:{error:null,username:c}}:{result:{error:"No Data Received"}}}),[l,c]);return x.a.createElement(AF,u)},qF={exact:!0,path:"/confirm-email/:token",component:function(e){var n=e.match;return x.a.createElement(hE,{to:"/#welcome"},x.a.createElement(uF,null,x.a.createElement($F,{token:n.params.token})))}};function VF(){var e=Object(i.a)(["\n  width: 10px;\n  height: 10px;\n"]);return VF=function(){return e},e}function QF(){var e=Object(i.a)(["\n  grid-area: form;\n"]);return QF=function(){return e},e}function WF(){var e=Object(i.a)(["\n  margin: 0 auto;\n  width: 432px;\n  margin-top: 60px;\n  padding: 16px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return WF=function(){return e},e}function HF(){var e=Object(i.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr;\n  grid-template-areas: 'form';\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return HF=function(){return e},e}var JF={placeholders:{password:Object(Yn.i18nMark)("Enter your new password"),passwordConfirm:Object(Yn.i18nMark)("Confirm your new password")}},KF=function(e){var n=e.formik;return h.createElement(h.Fragment,null,h.createElement(GF,null,h.createElement(ZF,null,h.createElement(YF,null,h.createElement(Ba,null),h.createElement(ja.b,{placeholder:JF.placeholders.password,name:"password",type:"password",value:n.values.password,onChange:n.handleChange}),n.errors.password&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.password)),h.createElement(XF,null),h.createElement(ja.b,{placeholder:JF.placeholders.passwordConfirm,name:"passwordConfirm",type:"password",value:n.values.passwordConfirm,onChange:n.handleChange}),n.errors.passwordConfirm&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.passwordConfirm)),h.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",onClick:n.submitForm},h.createElement(Yn.Trans,{id:"Save the new password"}))))))},ZF=Sn.div(HF()),GF=Sn.div(WF()),YF=Sn.div(QF()),XF=Sn.div(VF()),eS=xi.object().shape({password:xi.string().min(6).max(50).required("Password is required"),passwordConfirm:xi.string().oneOf([xi.ref("password"),null],"Passwords must match").required("Password confirm is required")}),nS={password:"",passwordConfirm:""},tS={id:"reate new Password"},rS=function(e){var n=e.token;wi(tS);var t=Ei().resetPwd,r=Object(er.a)({onSubmit:function(e){var r=e.password;return t({password:r,token:n})},initialValues:nS,validationSchema:eS}),a=Object(h.useMemo)((function(){return{formik:r}}),[r]);return x.a.createElement(KF,a)},aS={exact:!0,path:"/reset/:token",component:function(e){var n=e.match.params.token,t=Object(h.useMemo)((function(){return{token:n}}),[n]);return x.a.createElement(xE,null,x.a.createElement(uF,{withoutHeader:!0},x.a.createElement(rS,t)))}},iS=function(e){var n,t=e.title,r=e.formik,a=e.done,i=e.actionList,o=e.providerList,s=e.receiverList,d=e.setAction,f=void 0===d?function(){}:d,v=x.a.useState([]),p=Object(c.a)(v,2),b=p[0],g=p[1],h=x.a.useState([]),E=Object(c.a)(h,2),y=E[0],O=E[1],j=x.a.useState(new Date),k=Object(c.a)(j,2),w=k[0],C=k[1];return x.a.useEffect((function(){g(Hy(o,"name")),O(Hy(s,"name")),r.setValues(Object(l.a)(Object(l.a)({},r.values),{},{hasPointInTime:(new Date).toISOString()}))}),[o,s]),x.a.createElement(ul,null,x.a.createElement("form",{onSubmit:r.handleSubmit},x.a.createElement(vl,null,x.a.createElement(Pn.Heading,{m:2},x.a.createElement(Yn.Trans,{id:"{title}",values:{title:t}}))),x.a.createElement(ju,null,x.a.createElement(Ou,null,x.a.createElement(Eu,null,x.a.createElement("div",{className:"d-flex d-flex-image"},x.a.createElement(Pn.Box,{sx:{width:"140",height:"140"},className:"item_photo"},x.a.createElement(Iw,null,x.a.createElement("img",{src:"object"!==typeof r.values.image?r.values.image:r.values.image.path,alt:"img"}))),x.a.createElement("div",{className:"item_info"},x.a.createElement(Pn.Box,{mr:1,mb:2},x.a.createElement(Ew,{variant:"heading"}," ",x.a.createElement(Yn.Trans,{id:"{0}",values:{0:r.values.name}}))),x.a.createElement(Pn.Box,{mr:1,mb:2},x.a.createElement(Pn.Text,{variant:"text"},x.a.createElement("b",null,x.a.createElement(Yn.Trans,{id:"Location:"})," ")," ",x.a.createElement(Yn.Trans,{id:"{0}",values:{0:null===(n=r.values.atLocation)||void 0===n?void 0:n.label}}))),x.a.createElement(Pn.Box,{mr:1},x.a.createElement(Pn.Text,{variant:"text"},x.a.createElement("b",null,x.a.createElement(Yn.Trans,{id:"Note:"})," ")," ",x.a.createElement(Yn.Trans,{id:"{0}",values:{0:r.values.note}})))))),x.a.createElement(Eu,null,x.a.createElement(Pn.Box,null,x.a.createElement(QE,null,x.a.createElement(WE,null,"Actions"),x.a.createElement(ry,{onSelect:function(e,n){f(n.id),r.setValues(Object(l.a)(Object(l.a)({},r.values),{},{action:n}))},options:i,variant:"primary",id:"actions",name:"actions",placeholder:Object(Yn.i18nMark)("Select action"),value:r.values.action})),r.errors.action&&x.a.createElement(XE,{variant:"negative"},r.errors.action&&"Required")),x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"Provider"),x.a.createElement(ry,{onSelect:function(e,n){r.setValues(Object(l.a)(Object(l.a)({},r.values),{},Object(u.a)({},e,n)))},placeholder:Object(Yn.i18nMark)("Provider"),options:b,variant:"primary",value:r.values.provider,id:"provider",name:"provider"})),r.errors.provider&&x.a.createElement(XE,{variant:"negative"},r.errors.provider&&"Required")),x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"Receiver"),x.a.createElement(ry,{onSelect:function(e,n){r.setValues(Object(l.a)(Object(l.a)({},r.values),{},Object(u.a)({},e,n)))},placeholder:Object(Yn.i18nMark)("Receiver"),options:y,variant:"primary",value:r.values.receiver,id:"receiver",name:"receiver"})),r.errors.receiver&&x.a.createElement(XE,{variant:"negative"},r.errors.receiver&&"Required")))),x.a.createElement(Eu,null,x.a.createElement("div",{className:"d-flex"},x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"unit"),x.a.createElement(GE,{type:"text",id:"hasUnit",name:"hasUnit",disabled:!0,onChange:r.handleChange,value:r.values.hasUnit.label})),r.errors.hasUnit&&x.a.createElement(XE,{variant:"negative"},r.errors.hasUnit&&"Required")),x.a.createElement("div",{className:"item_col-6"},x.a.createElement(QE,null,x.a.createElement(WE,null,"numerical value"),x.a.createElement(GE,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:r.handleChange,placeholder:Object(Yn.i18nMark)("Numerical Value"),value:r.values.hasNumericalValue})),r.errors.hasNumericalValue&&x.a.createElement(XE,{variant:"negative"},r.errors.hasNumericalValue)))),x.a.createElement(Eu,null,x.a.createElement(WE,null,"Event date"),x.a.createElement("div",{style:{width:"100%",border:"1px solid #05244f",padding:"0 10px",marginBottom:10}},x.a.createElement(Ky.a,{selected:w,onChange:function(e){C(e),r.setValues(Object(l.a)(Object(l.a)({},r.values),{},{hasPointInTime:e.toISOString()}))},dateFormat:"dd/MM/yyyy"}))),x.a.createElement(Eu,null,x.a.createElement(QE,null,x.a.createElement(WE,null,"Event Note"),x.a.createElement(GE,{id:"eventNote",type:"textarea",name:"eventNote",onChange:r.handleChange,placeholder:Object(Yn.i18nMark)("Event Note"),value:r.values.eventNote})),x.a.createElement(dl,null,r.values.eventNote?500-r.values.eventNote.length:500),r.errors.eventNote&&x.a.createElement(XE,{variant:"negative"},r.errors.eventNote)))),x.a.createElement(ml,null,x.a.createElement(ot,{variant:"primary",isSubmitting:r.isSubmitting,isDisabled:r.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.a.createElement(Yn.Trans,{id:"Save"})),x.a.createElement(ot,{variant:"outline",onClick:a},x.a.createElement(Yn.Trans,{id:"Cancel"})))),x.a.createElement(m.b,null))};function oS(){var e=Object(i.a)(["\n    query economicResource($id: ID!) {\n  economicResource(id: $id) {\n    id\n    trackingIdentifier\n    primaryAccountable {\n      id\n      name\n      image\n      relationshipsAsObject {\n        id\n        relationship {\n          id\n          inverseRoleLabel\n        }\n      }\n    }\n    name\n    note\n    image\n    stage {\n      id\n      name\n      note\n    }\n    contains {\n      image\n      track {\n        id\n        action {\n          id\n        }\n        fulfills {\n          effortQuantity {\n            id\n            hasUnit {\n              id\n              label\n              symbol\n            }\n          }\n        }\n      }\n    }\n    stage {\n      id\n      name\n      note\n    }\n    containedIn {\n      id\n      name\n      trace {\n        id\n        note\n      }\n      track {\n        id\n        note\n      }\n    }\n    currentLocation {\n      id\n      name\n      lat\n      long\n    }\n    lot {\n      id\n      expiryDate\n      batchNumber\n    }\n    trace {\n      id\n      note\n      action {\n        id\n        label\n      }\n      resourceQuantity {\n        id\n        hasUnit {\n          id\n          label\n        }\n        hasNumericalValue\n      }\n      resourceInventoriedAs {\n        id\n        name\n      }\n      toResourceInventoriedAs {\n        id\n        name\n      }\n      provider {\n        id\n        name\n      }\n      receiver {\n        id\n        name\n      }\n    }\n    trace {\n      id\n      note\n      resourceQuantity {\n        id\n        hasUnit {\n          id\n          label\n        }\n        hasNumericalValue\n      }\n      resourceInventoriedAs {\n        id\n        name\n      }\n      toResourceInventoriedAs {\n        id\n        name\n      }\n      action {\n        id\n        label\n      }\n      provider {\n        id\n        name\n      }\n      receiver {\n        id\n        name\n      }\n    }\n    track {\n      id\n      note\n      hasPointInTime\n      resourceQuantity {\n        id\n        hasUnit {\n          id\n          label\n        }\n        hasNumericalValue\n      }\n      resourceInventoriedAs {\n        id\n        name\n      }\n      toResourceInventoriedAs {\n        id\n        name\n      }\n      action {\n        id\n        label\n      }\n      provider {\n        id\n        name\n      }\n      receiver {\n        id\n        name\n      }\n    }\n    unitOfEffort {\n      id\n      label\n    }\n    onhandQuantity {\n      id\n      hasNumericalValue\n      hasUnit {\n        id\n        label\n      }\n    }\n  }\n}\n    "]);return oS=function(){return e},e}var lS=U()(oS());var cS,uS=function(e,n){return{query:lS,variables:e,context:n}},mS=function(){var e,n=q.c(Qy,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c,u,m,s,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id,o=n.action,l=n.provider,c=n.receiver,u=n.hasUnit,m=n.hasNumericalValue,s=n.eventNote,d=n.hasPointInTime,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{id:t,action:o,provider:l,receiver:c,hasUnit:u,hasNumericalValue:m,eventNote:s,hasPointInTime:d},refetchQueries:[uS({id:t})]}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(h.useMemo)((function(){return{create:l}}),[l])};function sS(){var e=Object(i.a)(["\n  width: 100%;\n  justify-content: stretch;\n  align-items: stretch;\n  flex-grow: 1;\n  flex-direction: row;\n  border-bottom: 1px solid #05244f;\n"]);return sS=function(){return e},e}function dS(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  padding: 16px;\n  font-size: 16px;\n  font-weight: bold;\n  color: #666666;\n  cursor: pointer;\n\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: relative;\n    cursor: pointer;\n    width: 60px;\n    height: 30px;\n    margin-right: 16px;\n    background-color: #ccc;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    box-shadow: 0 3px 22px -6px #c5bcbc;\n    border-radius: 34px;\n  }\n\n  .slider:before {\n    position: absolute;\n    border-radius: 50%;\n    content: '';\n    height: 30px;\n    width: 30px;\n    left: 30px;\n    bottom: 0;\n    background-color: white;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n  }\n\n  input:checked + .slider {\n    background-color: #05244f;\n  }\n\n  input:focus + .slider {\n    box-shadow: 0 0 1px #2196f3;\n  }\n\n  input:checked + .slider:before {\n    transform: translateX(-30px);\n  }\n"]);return dS=function(){return e},e}xi.object({name:xi.string().min(2).max(60).required(),summary:xi.string().max(500),image:(cS=xi.mixed()).test.apply(cS,Object(w.a)(_l))});var fS=function(e){var n=e.done,t=e.resource,r=Object(Dy.a)(e,["done","resource"]),a=mS().create,i=xi.object().shape({name:xi.string().max(60,"Too Long!").required("Required"),note:xi.string().max(500,"Too Long!"),eventNote:xi.string().max(500,"Too Long!"),action:xi.object().shape({id:xi.string().required("Required")}),provider:xi.object().shape({id:xi.string().required("Required")}),receiver:xi.object().shape({id:xi.string().required("Required")}),hasUnit:xi.object().shape({id:xi.string().required("Required")}),hasNumericalValue:xi.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),o=Object(er.a)({initialValues:x.a.useMemo((function(){var e,n,r,a,i,o,l,c,u,m,s,d,f={name:"",note:"",image:void 0,atLocation:{id:"",label:"",value:""},action:{id:"",label:""},provider:{id:"",label:""},receiver:{id:"",label:""},hasUnit:{id:"",label:""},hasNumericalValue:0,eventNote:"",hasPointInTime:""};t&&(f={name:t.name||"",note:t.note||"",hasPointInTime:(null===t||void 0===t?void 0:t.hasPointInTime)||"",image:t.image||void 0,action:{id:"",label:""},provider:{id:(null===(e=t.track[0])||void 0===e||null===(n=e.provider)||void 0===n?void 0:n.id)||"",label:(null===(r=t.track[0])||void 0===r||null===(a=r.provider)||void 0===a?void 0:a.name)||""},receiver:{id:(null===(i=t.track[0])||void 0===i||null===(o=i.receiver)||void 0===o?void 0:o.id)||"",label:(null===(l=t.track[0])||void 0===l||null===(c=l.receiver)||void 0===c?void 0:c.name)||""},hasUnit:{id:(null===(u=t.onhandQuantity)||void 0===u?void 0:u.hasUnit.id)||"",label:(null===(m=t.onhandQuantity)||void 0===m?void 0:m.hasUnit.label)||""},hasNumericalValue:(null===(s=t.onhandQuantity)||void 0===s?void 0:s.hasNumericalValue)||0,eventNote:(null===(d=t.track[0])||void 0===d?void 0:d.note)||"",atLocation:t.currentLocation?{id:t.currentLocation.id,value:t.currentLocation.id,label:t.currentLocation.name}:{id:"",label:"",value:""}});return f}),[t]),validateOnChange:!1,validateOnBlur:!1,validationSchema:i,enableReinitialize:!0,onSubmit:function(e){return a({id:t.id,name:e.name,atLocation:e.atLocation.id,eventNote:e.eventNote||"",action:e.action.id,note:e.note,provider:e.provider.id,receiver:e.receiver.id,hasUnit:e.hasUnit.id,hasNumericalValue:e.hasNumericalValue,image:e.image,hasPointInTime:e.hasPointInTime}).then((function(e){e.errors?console.log(e.errors[0].message):(m.c.success("Event on resource ".concat(t.name," created"),{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n())})).catch((function(e){return console.log(e)}))}}),u=Object(l.a)(Object(l.a)({},r),{},{title:"Create a new event on resource ".concat(t.name),formik:o,done:n}),s=Object(h.useState)(!1),d=Object(c.a)(s,2),f=d[0],v=d[1],p=x.a.createElement(x.a.Fragment,null,f?x.a.createElement(By,{done:v}):x.a.createElement(cO,{done:function(){O(0),n()},toggleCreateLocation:v,resource:o.values})),b=x.a.createElement(iS,u),g=Object(h.useState)(0),E=Object(c.a)(g,2),y=E[0],O=E[1],j=Object(h.useState)(!0),k=Object(c.a)(j,2),w=k[0],C=k[1];return x.a.createElement(lO,null,x.a.createElement(pS,null,x.a.createElement(vS,null,x.a.createElement("input",{type:"checkbox",name:"toggleSwitch",id:"toggleSwitch",checked:w,onChange:function(){C(!w),O(0===y?1:0)}}),x.a.createElement("span",{className:"slider round"}),x.a.createElement(Yn.Trans,{id:"{0}",values:{0:w?"Create a new event on exist resource":"Create an event that results in a new resource"}}))),y?p:b)},vS=Sn("label")(dS()),pS=Sn(Pn.Flex)(sS()),bS=function(e){var n=e.title,t=e.formik,r=e.done,a=(e.spatialThings,x.a.useCallback((function(e){return t.setValues(Object(l.a)(Object(l.a)({},t.values),{},{image:e}))}),[t])),i="string"===typeof t.values.image?t.values.image:"";return x.a.createElement(ul,null,x.a.createElement("form",{onSubmit:t.handleSubmit},x.a.createElement(vl,null,x.a.createElement(Pn.Heading,{m:2},x.a.createElement(Yn.Trans,{id:"{title}",values:{title:n}}))),x.a.createElement(ju,null,x.a.createElement(Ou,null,x.a.createElement(Eu,null,x.a.createElement("div",{className:"d-flex d-flex-image"},x.a.createElement(Pn.Box,{sx:{width:"140",height:"140"},className:"item_photo"},x.a.createElement(wo,{initialUrl:i,onFileSelect:a,filePattern:"image/*"}),x.a.createElement("p",null),x.a.createElement(WE,null,"Image URL"),x.a.createElement(GE,{type:"text",id:"image",name:"image",onChange:t.handleChange,placeholder:Object(Yn.i18nMark)("Image"),value:"object"!==typeof t.values.image?t.values.image:t.values.image.path})),x.a.createElement("div",{className:"item_info"},x.a.createElement(Eu,null,x.a.createElement(QE,null,x.a.createElement(WE,null,Object(Yn.i18nMark)("Note")),x.a.createElement(GE,{type:"textarea",id:"note",name:"note",onChange:t.handleChange,placeholder:Object(Yn.i18nMark)("Note"),value:t.values.note}),x.a.createElement(dl,null,t.values.note?500-t.values.note.length:500)),t.errors.note&&x.a.createElement(XE,{variant:"negative"},t.errors.note))))))),x.a.createElement(ml,null,x.a.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.a.createElement(Yn.Trans,{id:"Update"})),x.a.createElement(ot,{variant:"outline",onClick:r},x.a.createElement(Yn.Trans,{id:"Cancel"})))),x.a.createElement(m.b,null))};function gS(){var e=Object(i.a)(["\n    mutation updateEconomicResource($id: ID!, $note: String, $image: URI) {\n  updateEconomicResource(resource: {id: $id, note: $note, image: $image}) {\n    economicResource {\n      id\n    }\n  }\n}\n    "]);return gS=function(){return e},e}var hS=U()(gS());var xS,ES=function(){var e,n=q.c(hS,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id,o=n.note,l=n.image,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{id:t,note:o,image:l},refetchQueries:[uS({id:t})]}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(h.useMemo)((function(){return{update:l}}),[l])},yS=(xi.object({name:xi.string().min(2).max(60).required(),note:xi.string().max(500),image:(xS=xi.mixed()).test.apply(xS,Object(w.a)(_l))}),function(e){var n,t=e.done,r=e.resource,a=Object(Dy.a)(e,["done","resource"]),i=ES().update,o=xi.object().shape({note:xi.string().max(500,"Too Long!")}),c=null===(n=my().data)||void 0===n?void 0:n.spatialThingsPages,u=Object(er.a)({initialValues:x.a.useMemo((function(){var e={note:"",image:void 0};return r&&(e={note:r.note||"",image:r.image||void 0}),e}),[r]),validateOnChange:!1,validateOnBlur:!1,validationSchema:o,enableReinitialize:!0,onSubmit:function(e){return i({id:r.id,note:e.note,image:e.image}).then((function(e){e.errors?console.log(e.errors[0].message):(m.c.success("Resource was updated",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),t())})).catch((function(e){return console.log(e)}))}}),s=Object(l.a)(Object(l.a)({},a),{},{spatialThings:null===c||void 0===c?void 0:c.edges,title:"Update resource ".concat(r.name),formik:u,done:t});return x.a.createElement(bS,s)});function OS(){var e=Object(i.a)(["\n    mutation deleteEconomicResource($id: ID!) {\n  deleteEconomicResource(id: $id)\n}\n    "]);return OS=function(){return e},e}var jS=U()(OS());var kS=function(){var e,n=q.c(jS,e),t=Object(c.a)(n,2),r=t[0],i=t[1],l=fF(function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",r({variables:{id:n},refetchQueries:[uS({id:n})]}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(h.useMemo)((function(){return{deleteResource:l,deleteItemStatus:i}}),[l,i])};function wS(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return wS=function(){return e},e}var CS=function(e){var n=e.title,t=e.description,r=e.action,a=e.cancel,i=e.confirm,o=e.waiting;return h.createElement(ul,null,h.createElement(vl,null,h.createElement(Pn.Heading,null,n)),h.createElement(pl,null,h.createElement(fl,null,t&&h.createElement(Pn.Text,null,t))),h.createElement(ml,null,h.createElement(IS,{variant:"primary",isSubmitting:o,isDisabled:o,type:"submit",style:{marginLeft:"10px"},onClick:i},h.createElement(Yn.Trans,{id:"{action}",values:{action:r}})),h.createElement(ot,{variant:"outline",onClick:a},h.createElement(Yn.Trans,{id:"Cancel"}))))},IS=Sn(ot)(wS()),TS=function(e){var n=e.done,t=e.resource,r=kS(),i=r.deleteResource,l=r.deleteItemStatus,c=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(t.id).then((function(e){!e.errors&&e.deleteEconomicResource?(m.c.success("Resource was deleted",{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n()):(m.c.error("Resource not deleted! ".concat(e.errors),{position:"top-right",transition:m.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n())})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u={title:"Do you want to remove economic resource: ".concat(t.name," "),confirm:c,cancel:n,action:"Confirm deleted",waiting:l.loading};return x.a.createElement(CS,u)},FS=function(e){var n,t=e.resourceId,r=(n={variables:{id:t.trim()}},q.d(lS,n)),a=r.data,i=r.loading,o=r.error,l=null===a||void 0===a?void 0:a.economicResource,u=vF(),m=Object(h.useReducer)((function(e){return!u()&&!e}),!1),s=Object(c.a)(m,2),d=s[0],f=s[1],v=Object(h.useReducer)((function(e){return!u()&&!e}),!1),p=Object(c.a)(v,2),b=p[0],g=p[1],E=Object(h.useReducer)((function(e){return!u()&&!e}),!1),y=Object(c.a)(E,2),O=y[0],j=y[1],k=d?x.a.createElement(gl,{closeModal:f},x.a.createElement(fS,{done:f,resource:l})):null,w=b?x.a.createElement(gl,{closeModal:g},x.a.createElement(yS,{done:g,resource:l})):null,C=O?x.a.createElement(gl,{closeModal:j},x.a.createElement(TS,{done:j,resource:l})):null,I={openEditModal:f,openUpdateResourceModal:g,openDeleteResourceModal:j,resource:l,loading:i,error:o};return x.a.createElement(x.a.Fragment,null,C,w,k,x.a.createElement(hw,I))},SS={exact:!1,path:"/resource/:resourceId",component:function(e){var n={resourceId:e.match.params.resourceId};return x.a.createElement(Oj,null,x.a.createElement(FS,n))}},PS=function(e){var n=e.userId;return h.createElement(Mt,null,h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Nt,null,"hi ",n))),h.createElement(Ox,null))};function MS(){var e=Object(i.a)(["\n    query userActivity($userId: String!) {\n  user(userId: $userId) {\n    lastActivity\n    outbox {\n      pageInfo {\n        hasNextPage\n        startCursor\n        endCursor\n        hasPreviousPage\n      }\n      totalCount\n      edges {\n        context {\n          ... on Community {\n            id\n            displayUsername\n          }\n        }\n      }\n    }\n  }\n}\n    "]);return MS=function(){return e},e}function _S(){var e=Object(i.a)(["\n    query user($userId: String!) {\n  user(userId: $userId) {\n    outbox(limit: 15) {\n      edges {\n        user {\n          icon {\n            id\n          }\n          name\n          image {\n            id\n          }\n        }\n        verb\n        context {\n          ... on Community {\n            ...CommunityPreview\n          }\n          ... on Collection {\n            ...CollectionPreview\n          }\n          ... on Resource {\n            ...ResourcePreview\n          }\n          ... on User {\n            ...UserPreview\n          }\n          ... on Comment {\n            ...CommentPreview\n          }\n          ... on Flag {\n            ...FlagPreview\n          }\n          ... on Like {\n            ...LikePreview\n          }\n          ... on Follow {\n            ...FollowPreview\n          }\n        }\n      }\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n      }\n    }\n  }\n}\n    ","\n","\n","\n","\n","\n","\n","\n",""]);return _S=function(){return e},e}U()(_S(),Wt,Jt,Mi,oa,Ri,zi,Di,qi);var LS=U()(MS());var NS=function(){var e,n=Oa().me,t=null===n||void 0===n?void 0:n.user.id,r=(e={variables:{userId:t||""}},q.d(LS,e)),a=r.error,i=r.data;console.log({data:i}),console.log("Error:",a);var o={userId:t||""};return x.a.createElement(PS,o)},US={exact:!1,path:"/activity",component:function(e){var n={userId:e.match.params.userId,basePath:"/activity"};return x.a.createElement(Oj,null,x.a.createElement(NS,n))}},RS=function(e){var n=e.center,t=e.zoom,r=void 0===t?13:t,a=e.markers,i=void 0===a?[]:a;return x.a.createElement(Mt,null,x.a.createElement(_t,null,x.a.createElement(Lt,null,x.a.createElement(Nt,null,x.a.createElement(My,{center:n,zoom:r,markers:i})))))};function AS(){var e=Object(i.a)(["\n  query communityMapPoints($communityId: [ID]!) {\n    proposalsFiltered(inScopeOf: $communityId) {\n      __typename\n      id\n      name\n      note\n      eligibleLocation {\n        lat\n        long\n        geom\n      }\n    }\n  }\n"]);return AS=function(){return e},e}var zS=U()(AS()),BS=function(e){if(!e)return!1;var n=e.eligibleLocation;return n&&(n.geom||(null===n||void 0===n?void 0:n.lat)&&n.long)},DS=function(e){var n=e.communityId,t=Object(q.a)(),r=Object(h.useState)([]),a=Object(c.a)(r,2),i=a[0],o=a[1];return Object(h.useEffect)((function(){t.query({query:zS,variables:{communityId:n}}).then((function(e){e.data&&e.data.proposalsFiltered&&o(e.data.proposalsFiltered.filter(BS).map((function(e){return e})).map((function(e){var n=e.eligibleLocation,t=n.lat,r=n.long,a=n.geom;return{position:t&&r?{lat:t,lng:r}:{lat:a.coordinates[0],lng:a.coordinates[1]},popup:e.name}})))}))}),[n,t]),wi({id:"Map"}),x.a.createElement(RS,{markers:i,zoom:13,center:{lat:41.396,lng:2.192}})},$S={exact:!0,path:"/communities/:communityId/map/",component:function(e){var n=e.match;return null===n?x.a.createElement(vh,null):x.a.createElement(Oj,null,x.a.createElement(DS,{communityId:n.params.communityId}))}};uE($S);function qS(){var e=Object(i.a)(["\n  width: 432px;\n"]);return qS=function(){return e},e}function VS(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  margin-top: 60px;\n  padding: 16px;\n  padding-bottom: 50px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    color: #fff !important;\n    text-transform: uppercase\n      &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return VS=function(){return e},e}function QS(){var e=Object(i.a)(["\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return QS=function(){return e},e}function WS(){var e=Object(i.a)([""]);return WS=function(){return e},e}function HS(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  padding: 16px;\n  max-width: 400px;\n"]);return HS=function(){return e},e}function JS(){var e=Object(i.a)(["\n  background: ",";\n  padding: 8px 16px;\n  border-radius: 4px;\n  text-decoration: none;\n  font-weight: 600;\n  color: ",";\n  margin-top: 16px;\n  margin: 0 auto;\n  display: block;\n  text-align: center;\n  margin-top: 16px;\n"]);return JS=function(){return e},e}var KS={placeholders:{email:Object(Yn.i18nMark)("Enter your email")}},ZS=function(e){var n=e.formik,t=e.isSubmitted;return h.createElement(h.Fragment,null,h.createElement(nP,null,h.createElement(eP,null,h.createElement(Ba,null),t?h.createElement(YS,null,h.createElement(XS,{variant:"text"},h.createElement(Yn.Trans,{id:"If your email is linked to an account in our database, we have sent you an email with which you can reset your password. It may take a few minutes to arrive depending on your mail provider."})),h.createElement(GS,{to:"/login"},h.createElement(Yn.Trans,{id:"Login"}))):h.createElement(tP,null,h.createElement(ja.b,{placeholder:KS.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),n.errors.email&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.email)),h.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",onClick:n.submitForm},h.createElement(Yn.Trans,{id:"Reset the password"}))))))},GS=Sn(mt.b)(JS(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter})),YS=Sn(Pn.Box)(HS(),(function(e){return e.theme.colors.appInverse})),XS=Sn(Pn.Text)(WS()),eP=Sn.div(QS()),nP=Sn.div(VS()),tP=Sn.form(qS()),rP=xi.object({email:xi.string().max(50).required()}),aP={email:""},iP={id:"Reset Password"},oP=function(){wi(iP);var e=Ei().resetPwdReq,n=Object(er.a)({onSubmit:function(n){var t=n.email;return e(t)},initialValues:aP,validationSchema:rP});return x.a.createElement(ZS,{formik:n,isSubmitted:n.submitCount>0})},lP={exact:!0,path:"/reset",component:function(e){e.match;return x.a.createElement(xE,null,x.a.createElement(uF,{withoutHeader:!0},x.a.createElement(oP,null)))}};function cP(){var e=Object(i.a)(["\n    mutation searchUnfollow($contextId: String!) {\n  delete(contextId: $contextId) {\n    __typename\n  }\n}\n    "]);return cP=function(){return e},e}function uP(){var e=Object(i.a)(["\n    mutation searchFollow($url: String!) {\n  createFollowByUrl(url: $url) {\n    id\n  }\n}\n    "]);return uP=function(){return e},e}function mP(){var e=Object(i.a)(["\n    query SearchHostIndexAndMyFollows {\n  instance {\n    ...SearchInstance\n  }\n}\n    ",""]);return mP=function(){return e},e}function sP(){var e=Object(i.a)(["\n    fragment SearchInstance on Instance {\n  hostname\n}\n    "]);return sP=function(){return e},e}var dP=U()(sP()),fP=U()(mP(),dP);var vP=U()(uP());var pP=U()(cP());var bP=function(e,n){var t=gP(null===e||void 0===e?void 0:e.community,n);if(!e||!t)return null;var r=e.preferredUsername,a=e.canonicalUrl,i=e.icon,o=e.summary,l=e.index_mothership_object_id,c=e.name;return{__typename:"Collection",community:t,displayUsername:c,icon:i?{__typename:"Content",id:"",url:i}:null,id:l,isLocal:n,myFlag:null,myFollow:null,name:c,canonicalUrl:a,summary:o,preferredUsername:r}},gP=function(e,n){if(!e)return null;var t=e.name,r=e.preferredUsername,a=e.summary,i=e.canonicalUrl,o=e.icon,l=e.index_mothership_object_id,c=e.followers;return{__typename:"Community",icon:o?{__typename:"Content",id:"",url:o}:null,id:l,isLocal:n,name:t,canonicalUrl:i,summary:a,followerCount:(null===c||void 0===c?void 0:c.totalCount)||0,threads:{totalCount:0,__typename:"ThreadsPage"},displayUsername:t,myFlag:null,myFollow:null,collectionCount:0,preferredUsername:r,creator:null}},hP=function(e){var n=xP(null===e||void 0===e?void 0:e.community);if(!e||!n)return null;var t=e.preferredUsername,r=e.canonicalUrl,a=e.icon,i=e.summary;return{canonicalUrl:r||"",icon:a,name:e.name,preferredUsername:t,summary:i||"",community:n}},xP=function(e){if(!e)return null;var n=e.name,t=e.preferredUsername,r=e.icon,a=e.summary;return{canonicalUrl:e.canonicalUrl||"",icon:r||"",name:n,preferredUsername:t,summary:a||""}},EP=t(940),yP=t(939),OP=t(945),jP=t(941);function kP(){var e=Object(i.a)(["\n  background: ",";\n  max-width: 600px;\n"]);return kP=function(){return e},e}function wP(){var e=Object(i.a)(["\n  li {\n    height: 40px;\n    line-height: 40px;\n    input {\n      margin-right: 8px;\n    }\n  }\n"]);return wP=function(){return e},e}var CP=function(e){var n=e.previews,t=e.Pagination,r=e.Filter;return x.a.createElement(x.a.Fragment,null,x.a.createElement("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/instantsearch.css@7.1.1/themes/reset-min.css"}),x.a.createElement(Mt,null,x.a.createElement(_t,null,x.a.createElement(TP,null,x.a.createElement(Lt,null,x.a.createElement(Nt,null,x.a.createElement(Nn,{name:"Search results"}),x.a.createElement(Pn.Box,null,n.map((function(e){return x.a.createElement(Pn.Box,{m:2,key:e.key},e)})))),x.a.createElement(Pn.Box,{m:2},t)))),x.a.createElement(Hn,null,x.a.createElement(Jn,null,x.a.createElement(Kn,{fontWeight:"bold"},x.a.createElement(Yn.Trans,{id:"Filters"})),x.a.createElement(Zn,null,x.a.createElement(IP,null,r))))))},IP=Sn(Pn.Box)(wP()),TP=Sn(Pn.Box)(kP(),(function(e){return e.theme.colors.appInverse})),FP=Object(jP.a)((function(e){var n=e.hits,t={previews:h.useMemo((function(){return n.map((function(e){return"Collection"===e.index_type?h.createElement(SP,{hit:e,key:e.objectID}):"Resource"===e.index_type?h.createElement(MP,{hit:e,key:e.objectID}):"Community"===e.index_type?h.createElement(PP,{hit:e,key:e.objectID}):(console.warn("Could not preview searchHit:",e),null)})).filter((function(e){return!!e}))}),[n]),Pagination:h.createElement(EP.a,{showNext:!0}),Filter:h.createElement(yP.a,{attribute:"index_type"})};return h.createElement(h.Fragment,null,h.createElement(OP.a,{hitsPerPage:8}),h.createElement(CP,t))})),SP=function(e){var n=e.hit,t=_P(n),r=bP(n,t),a=LP(n).toggleFollowFormik,i=r&&OF({collection:r,hideActions:!1,toggleFollowFormik:a});return!i&&console.warn("Could not preview searchHit:",n),i&&h.createElement(Ir,Object.assign({isSearch:!0},i))},PP=function(e){var n=e.hit,t=_P(n),r=gP(n,t),a=LP(n).toggleFollowFormik,i=r&&Qv({community:r,hideActions:!1,toggleJoinFormik:a,isCreator:!1});return!i&&console.warn("Could not preview searchHit:",n),i&&h.createElement(_v,Object.assign({isSearch:!0},i))},MP=function(e){var n,t=e.hit,r=_P(t),a=Yv().data,i=!!((null===a||void 0===a||null===(n=a.instance)||void 0===n?void 0:n.uploadResourceTypes)||[]).find((function(e){var n;return"text/html"!==e.toLowerCase()&&e.toLowerCase()===(null===(n=t.mediaType)||void 0===n?void 0:n.toLowerCase())})),o=function(e){var n=e.resource,t=e.isLocal,r=e.isFile,a=bP(null===n||void 0===n?void 0:n.collection,t),i=null===n||void 0===n?void 0:n.url;if(!(n&&a&&i))return null;var o=n.name,l=n.canonicalUrl,c=n.icon,u=n.licence,m=n.summary,s=n.mediaType,d=n.index_mothership_object_id,f=n.likes;return{__typename:"Resource",canonicalUrl:l||"",collection:a,icon:c?{__typename:"Content",id:"",url:c}:null,name:o,summary:m||"",license:u,id:d,likers:{__typename:"LikesPage",totalCount:parseInt((null===f||void 0===f?void 0:f.totalCount)||"0")||0},myFlag:null,myLike:null,payload:{__typename:"Content",id:"",url:i,mirror:{__typename:"ContentMirror",url:i},mediaType:s||"",upload:r?{__typename:"ContentUpload"}:null}}}({resource:t,isLocal:r,isFile:i}),u=h.useReducer((function(e){return!e}),!1),m=Object(c.a)(u,2),s=m[0],d=m[1],f=h.useReducer((function(e){return!e}),!1),v=Object(c.a)(f,2),p=v[0],b=v[1],g=o&&Object(l.a)(Object(l.a)({},fk({resource:o,hideActions:!1,like:null})),{},{isOpenDropdown:p,toggleDropdown:b,toggleFlag:null,sendToMoodle:d});!g&&console.warn("Could not preview searchHit:",t);var x=h.useMemo((function(){return function(e){var n=hP(null===e||void 0===e?void 0:e.collection);if(!e||!n)return null;var t=e.name,r=e.canonicalUrl,a=e.icon,i=e.licence;return{canonicalUrl:r||"",collection:n,icon:a||"",name:t,summary:e.summary||"",url:e.url||"",licence:i||"",mediaType:e.mediaType||""}}(t)}),[t]),E=x&&s?h.createElement(gl,{closeModal:d},h.createElement(rp,{done:d,resource:x})):null;return g&&h.createElement(h.Fragment,null,E,h.createElement(Wj,Object.assign({isSearch:!0},g)))},_P=function(e){var n,t,r=(t={context:b({noShowError:!0})},q.d(fP,t)).data,a=null===r||void 0===r||null===(n=r.instance)||void 0===n?void 0:n.hostname;return e.index_instance===a},LP=function(e){var n,t=q.c(vP,n),r=Object(c.a)(t,2),i=(r[0],r[1]),l=function(e){return q.c(pP,e)}(),u=Object(c.a)(l,2),m=(u[0],u[1]),s={},d=Object(er.a)({initialValues:{},onSubmit:function(){var n=Object(o.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.canonicalUrl&&!i.loading&&!m.loading){n.next=2;break}return n.abrupt("return");case 2:n.next=6;break;case 6:n.next=8;break;case 8:return n.abrupt("return");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()});return h.useMemo((function(){return{toggleFollowFormik:d,hitSearchFollow:s}}),[d,s])},NP={exact:!1,path:"/search",component:function(){return Ae?x.a.createElement(vh,null):x.a.createElement(Oj,null,x.a.createElement(FP,null))}},UP=t(928),RP=t(929),AP=t(930),zP=t(931);function BP(){var e=Object(i.a)(["\ncolor: ","\nborder-bottom: 1px solid ",";\na {\n  color: ","\n  text-decoration: none;\n  font-weight: 700;\n  &.active {\n      color: ",";\n    .icon {\n        background: ",";\n        svg {\n          stroke: ",";\n        }\n    }\n    \n  }\n}\n&:hover {\n    .icon {\n        background: ",";\n        svg {\n          stroke: ",";\n        }\n    }\n  }\n  "]);return BP=function(){return e},e}function DP(){var e=Object(i.a)([""]);return DP=function(){return e},e}function $P(){var e=Object(i.a)(["\n  text-transform: uppercase;\n  border-bottom: 4px solid ",";\n  padding: 16px;\n"]);return $P=function(){return e},e}function qP(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-bottom: 8px !important;\n"]);return qP=function(){return e},e}function VP(){var e=Object(i.a)(["\n  width: 80px;\n"]);return VP=function(){return e},e}function QP(){var e=Object(i.a)(["\n  width: 290px;\n"]);return QP=function(){return e},e}function WP(){var e=Object(i.a)(["\n  width: 350px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  font-family: ",";\n  &.extra {\n    width: 100%;\n  }\n  ",";\n  ",";\n"]);return WP=function(){return e},e}function HP(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  border-radius: 40px;\n  display: flex;\n  align-items: center;\n  svg {\n    stroke: ",";\n    width: 40px;\n  }\n"]);return HP=function(){return e},e}function JP(){var e=Object(i.a)(["\n  & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return JP=function(){return e},e}function KP(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  border-radius: 6px;\n  & p {\n    color: ",";\n    padding: 0 24px;\n    margin-left: 120px;\n    margin: 0;\n    margin-left: 136px;\n    margin-top: -40px;\n    line-height: 26px;\n    padding-bottom: 16px;\n  }\n"]);return KP=function(){return e},e}function ZP(){var e=Object(i.a)(["\n  padding: 24px;\n  padding-top: 0;\n  z-index: 9999;\n  position: relative;\n  margin-top: -60px;\n  padding-bottom: 0;\n"]);return ZP=function(){return e},e}function GP(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n  }\n"]);return GP=function(){return e},e}function YP(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n  }\n"]);return YP=function(){return e},e}function XP(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return XP=function(){return e},e}function eM(){var e=Object(i.a)([""]);return eM=function(){return e},e}function nM(){var e=Object(i.a)(["\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n"]);return nM=function(){return e},e}function tM(){var e=Object(i.a)(["\n  justify-content: space-between;\n  ",";\n"]);return tM=function(){return e},e}function rM(){var e=Object(i.a)(["\n  height: 250px;\n  border-radius: 4px;\n  width: 100%;\n  display: inline-block;\n  .thumb {\n    height: 100%;\n  }\n"]);return rM=function(){return e},e}function aM(){var e=Object(i.a)(["\n  width: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: ",";\n  border: 3px solid ",";\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 16px;\n"]);return aM=function(){return e},e}function iM(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    color: ",";\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return iM=function(){return e},e}function oM(){var e=Object(i.a)(["\n  border-top: 4px solid ",";\n  border-bottom: 1px solid ",";\n"]);return oM=function(){return e},e}function lM(){var e=Object(i.a)(["\ndisplay: none;\n"]);return lM=function(){return e},e}function cM(){var e=Object(i.a)(["\n  ",";\n"]);return cM=function(){return e},e}function uM(){var e=Object(i.a)(["\n  background: ",";\n"]);return uM=function(){return e},e}var mM,sM={placeholders:{name:Object(Yn.i18nMark)("Display Name"),summary:Object(Yn.i18nMark)("Please tell us a little bit about yourself..."),location:Object(Yn.i18nMark)("Choose a location"),website:Object(Yn.i18nMark)("Enter a URL to share more info about you")}};!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(mM||(mM={}));var dM=function(e){var n=e.formik,t=e.Preferences,r=e.Instance,a=e.Invites,i=e.Flags,o=e.ModerationLog,c=e.displayUsername,u=e.isAdmin,m=e.sectionPaths,s=h.useCallback((function(e){return n.setValues(Object(l.a)(Object(l.a)({},n.values),{},{icon:e}))}),[n]),d="string"===typeof n.values.icon?n.values.icon:"",f=h.useCallback((function(e){return n.setValues(Object(l.a)(Object(l.a)({},n.values),{},{image:e}))}),[n]),v="string"===typeof n.values.image?n.values.image:"";return h.createElement(Mt,null,h.createElement(vM,{sectionPaths:m,isAdmin:u}),h.createElement(_t,null,h.createElement(Lt,null,h.createElement(Nt,null,h.createElement(fM,null,h.createElement(Tn.d,null,h.createElement(Tn.b,{path:m.preferences},t),h.createElement(Tn.b,{path:m.instance},r),h.createElement(Tn.b,{path:m.invites},a),h.createElement(Tn.b,{path:m.flags},i),h.createElement(Tn.b,{path:m.logs},o),h.createElement(Tn.b,{path:m.general},h.createElement(yM,{p:1,pb:2},h.createElement(CM,null,h.createElement(Pn.Flex,null,h.createElement(xM,null,h.createElement(wo,{initialUrl:v,filePattern:"image/*",onFileSelect:f}))),h.createElement(EM,null,h.createElement(wM,null,h.createElement(hM,null,h.createElement(wo,{initialUrl:d,filePattern:"image/*",onFileSelect:s})))),h.createElement(IM,{mt:2,ml:3},h.createElement(gM,null,h.createElement(ja.b,{placeholder:sM.placeholders.name,disabled:n.isSubmitting,name:"name",value:n.values.name,onChange:n.handleChange})),h.createElement(OM,{mt:1,p:2},c),h.createElement(gM,null,h.createElement(ja.d,{placeholder:sM.placeholders.summary,disabled:n.isSubmitting,name:"summary",value:n.values.summary,onChange:n.handleChange})),h.createElement(jM,{mt:2},h.createElement("span",null,h.createElement(zl.a,{strokeWidth:1,size:20})),h.createElement(gM,null,h.createElement(ja.b,{placeholder:sM.placeholders.location,disabled:n.isSubmitting,name:"location",value:n.values.location,onChange:n.handleChange}))),h.createElement(kM,{mt:2},h.createElement("span",null,h.createElement(Pk.a,{strokeWidth:1,size:20})),h.createElement(gM,null,h.createElement(ja.b,{placeholder:sM.placeholders.website,disabled:n.isSubmitting,name:"website",value:n.values.website,onChange:n.handleChange}))))),h.createElement(ml,{sx:{height:"inherit !important"}},h.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:n.submitForm},h.createElement(Yn.Trans,{id:"Save"})))))))))))},fM=Sn(Pn.Box)(uM(),(function(e){return e.theme.colors.appInverse})),vM=function(e){var n=e.sectionPaths,t=e.isAdmin;return h.createElement(FM,{mr:2},h.createElement(SM,null,h.createElement(PM,null,h.createElement(MM,{p:3},h.createElement(mt.c,{exact:!0,to:n.general},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(TM,{className:"icon",mr:1},h.createElement(Zl.a,{size:20})),h.createElement(pM,null,h.createElement(Yn.Trans,{id:"General information"}))))),h.createElement(MM,{p:3},h.createElement(mt.c,{to:n.preferences},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(TM,{className:"icon",mr:1},h.createElement(UP.a,{size:20})),h.createElement(pM,null,h.createElement(Yn.Trans,{id:"Preferences"}))))),t?h.createElement(h.Fragment,null,h.createElement(bM,{p:3},h.createElement(Pn.Flex,{alignItems:"center",p:3,sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(Pn.Text,{variant:"suptitle"},"Admin"))),h.createElement(MM,{p:3},h.createElement(mt.c,{to:n.instance},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(TM,{className:"icon",mr:1},h.createElement(RP.a,{size:20})),h.createElement(pM,null,h.createElement(Yn.Trans,{id:"Instance"}))))),h.createElement(MM,{p:3},h.createElement(mt.c,{to:n.invites},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(TM,{className:"icon",mr:1},h.createElement(AP.a,{size:20})),h.createElement(pM,null,h.createElement(Yn.Trans,{id:"Invites"}))))),h.createElement(MM,{p:3},h.createElement(mt.c,{to:n.flags},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(TM,{className:"icon",mr:1},h.createElement(Mu.a,{size:20})),h.createElement(pM,null,h.createElement(Yn.Trans,{id:"Flags"}))))),h.createElement(MM,{p:3},h.createElement(mt.c,{to:n.logs},h.createElement(Pn.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},h.createElement(TM,{className:"icon",mr:1},h.createElement(zP.a,{size:20})),h.createElement(pM,null,h.createElement(Yn.Trans,{id:"Moderation log"})))))):null)))},pM=Sn(Pn.Text)(cM(),k.a.lessThan("medium")(lM())),bM=Sn(Pn.Flex)(oM(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.lighter})),gM=Sn(fl)(iM(),(function(e){return e.theme.colors.mediumdark})),hM=Sn.div(aM(),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.light})),xM=Sn(Pn.Box)(rM()),EM=Sn(Pn.Flex)(tM(),k.a.lessThan("860px")(nM())),yM=Sn(Pn.Box)(eM()),OM=Sn(Pn.Text)(XP(),(function(e){return e.theme.colors.mediumdark})),jM=Sn(Pn.Flex)(YP(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.medium})),kM=Sn(Pn.Flex)(GP(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.medium})),wM=Sn.div(ZP()),CM=Sn.div(KP(),(function(e){return e.theme.colors.mediumdark})),IM=Sn(Pn.Box)(JP()),TM=Sn(Pn.Box)(HP(),(function(e){return e.theme.colors.medium})),FM=Sn(Pn.Flex)(WP(),(function(e){return e.theme.fontFamily}),k.a.lessThan("1095px")(QP()),k.a.lessThan("medium")(VP())),SM=Sn(Pn.Box)(qP(),(function(e){return e.theme.colors.appInverse})),PM=(Sn(Pn.Text)($P(),(function(e){return e.theme.colors.lighter})),Sn(Pn.Box)(DP())),MM=Sn(Pn.Text)(BP(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),_M=function(){var e,n,t=q.d($m,n),r=nr(null===(e=t.data)||void 0===e?void 0:e.flags,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.flags)&&e.flags?Object(l.a)(Object(l.a)({},t),{},{flags:r({prev:e.flags,fetched:t.flags})}):e}})}));return Object(h.useMemo)((function(){return{flagsPage:r}}),[r])};function LM(){var e=Object(i.a)(["\n    mutation deactivateFlaggedUser($userId: String!) {\n  delete(contextId: $userId) {\n    ... on User {\n      id\n    }\n  }\n}\n    "]);return LM=function(){return e},e}function NM(){var e=Object(i.a)(["\n    mutation deleteFlagContext($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Collection {\n      id\n    }\n    ... on Comment {\n      id\n    }\n    ... on Community {\n      id\n    }\n    ... on Flag {\n      id\n    }\n    ... on Follow {\n      id\n    }\n    ... on Like {\n      id\n    }\n    ... on Resource {\n      id\n    }\n  }\n}\n    "]);return NM=function(){return e},e}function UM(){var e=Object(i.a)(["\n    mutation deleteFlag($flagId: String!) {\n  delete(contextId: $flagId) {\n    ... on Flag {\n      id\n    }\n  }\n}\n    "]);return UM=function(){return e},e}function RM(){var e=Object(i.a)(["\n    query flagPreviewData($flagId: String!) {\n  flag(flagId: $flagId) {\n    ...FlagPreview\n  }\n}\n    ",""]);return RM=function(){return e},e}var AM=U()(RM(),zi);var zM=U()(UM());var BM=U()(NM());var DM=U()(LM());var $M=function(e){var n,t,r=(t={variables:{flagId:e}},q.d(AM,t)),i=function(e){return q.c(BM,e)}(),l=Object(c.a)(i,2),u=l[0],m=l[1],s=function(e){return q.c(zM,e)}(),d=Object(c.a)(s,2),f=d[0],v=d[1],p=function(e){return q.c(DM,e)}(),b=Object(c.a)(p,2),g=b[0],x=b[1],E=null===(n=r.data)||void 0===n?void 0:n.flag,y=fF(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&"User"===E.context.__typename&&!x.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",g({variables:{userId:E.context.userId}}));case 3:case"end":return e.stop()}}),e)}))),[E]),O=fF(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&"User"!==E.context.__typename&&!v.loading&&!m.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",Promise.all([f({variables:{flagId:E.id},refetchQueries:[qm({})]}),u({variables:{contextId:E.id}})]));case 3:case"end":return e.stop()}}),e)}))),[E]),j=fF(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&!v.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",f({variables:{flagId:E.id},refetchQueries:[qm({})]}));case 3:case"end":return e.stop()}}),e)}))),[E]);return Object(h.useMemo)((function(){return{flag:E,deactivateFlaggedUser:y,deleteFlagContext:O,ignoreFlag:j,deleteFlagContextStatus:m,deactivateFlaggedUserStatus:x,ignoreFlagStatus:v}}),[E,y,O,j,m,x,v])},qM=t(932),VM=t(933);function QM(){var e=Object(i.a)(["\n  background: ",";\n"]);return QM=function(){return e},e}function WM(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return WM=function(){return e},e}function HM(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return HM=function(){return e},e}function JM(){var e=Object(i.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n  margin-top: 16px;\n"]);return JM=function(){return e},e}function KM(){var e=Object(i.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return KM=function(){return e},e}function ZM(){var e=Object(i.a)(["\n  color: ",";\n  background: ",";\n  border-left: 3px solid ",";\n"]);return ZM=function(){return e},e}var GM=function(e){var n=e.FlaggedItemContextElement,t=e.type,r=e.reason,a=e.blockUser,i=e.ignoreFlag,o=e.deleteContent;return x.a.createElement(r_,null,x.a.createElement(YM,null,n),x.a.createElement(Pn.Text,{variant:"text",pt:2},r),x.a.createElement(e_,null,x.a.createElement(Pn.Box,null,x.a.createElement(XM,null,"User"===t?x.a.createElement(n_,{onClick:a},x.a.createElement(t_,null,x.a.createElement(qM.a,{strokeWidth:"1",size:"18"})),x.a.createElement(Pn.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"Block"}))):x.a.createElement(n_,{onClick:o},x.a.createElement(t_,null,x.a.createElement(VM.a,{strokeWidth:"1",size:"18"})),x.a.createElement(Pn.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"Delete"}))),x.a.createElement(n_,{ml:2,onClick:i},x.a.createElement(t_,{className:"unflag"},x.a.createElement(Mu.a,{className:"hover",strokeWidth:"1",size:"16"})),x.a.createElement(Pn.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},x.a.createElement(Yn.Trans,{id:"Ignore"})))))))},YM=Sn(Pn.Box)(ZM(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.light})),XM=Sn(Pn.Flex)(KM()),e_=Sn(Pn.Box)(JM()),n_=Sn(Pn.Flex)(HM(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(tt.b)("0.1",e.theme.colors.secondary):Object(tt.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),cn.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),t_=Sn(Pn.Box)(WM()),r_=Sn(Pn.Box)(QM(),(function(e){return e.theme.colors.appInverse})),a_=function(e){var n=e.flagId,t=$M(n),r=t.deactivateFlaggedUser,a=t.deleteFlagContext,i=t.flag,o=t.ignoreFlag,l=t.deleteFlagContextStatus,u=t.deactivateFlaggedUserStatus,m=t.ignoreFlagStatus,s=Object(h.useState)(),d=Object(c.a)(s,2),f=d[0],v=d[1],p=Object(h.useCallback)((function(){return v(void 0)}),[]),b=i&&f?x.a.createElement(gl,{closeModal:p},"delete"===f?x.a.createElement(CS,{cancel:p,confirm:function(){return a().then(p)},waiting:l.loading||m.loading,action:Ma._("Delete flagged content"),description:Ma._("Are you sure you want to permanently delete this ".concat(i.context.__typename," content?")),title:Ma._("Delete")}):"block"===f?x.a.createElement(CS,{cancel:p,confirm:function(){return r().then(p)},waiting:u.loading,action:Ma._("Delete user"),description:Ma._("Are you sure you want to permanently delete this user?"),title:Ma._("Delete")}):"ignore"===f?x.a.createElement(CS,{cancel:p,confirm:function(){return o().then(p)},waiting:l.loading,action:Ma._("Ignore flag"),description:Ma._("Are you sure you want to ignore and delete this flag?"),title:Ma._("Ignore")}):null):null,g=Object(h.useMemo)((function(){if(i){if("Comment"===i.context.__typename){var e,n=i.context,t=Rd(n),r=t.communityLink,a=t.communityName,o=x.a.createElement(Md,{commentId:n.id,mainComment:!1,hideActions:!0}),l=i.creator&&AC(i.creator);return x.a.createElement(Jd,{actor:l,commentActor:n.creator?AC(n.creator):void 0,createdAt:n.createdAt,event:"commented",communityLink:r,communityName:a,status:Nd.Loaded,threadUrl:(null===(e=n.thread)||void 0===e?void 0:e.id)&&iI.getPath({threadId:n.thread.id},void 0),preview:o})}return i?x.a.createElement(Sk,{context:i.context}):x.a.createElement(x.a.Fragment,null)}return x.a.createElement(x.a.Fragment,null)}),[i]),E=Object(h.useMemo)((function(){return i?{FlaggedItemContextElement:g,reason:i.message,type:i.context.__typename,blockUser:function(){return v("block")},deleteContent:function(){return v("delete")},ignoreFlag:function(){return v("ignore")}}:null}),[g,i]);return E&&x.a.createElement(x.a.Fragment,null,b,x.a.createElement(GM,E))},i_=function(e){var n=e.FlagPreviews,t=e.loadMoreFlags;return h.createElement(Pn.Box,null,h.createElement(Pn.Text,{px:3,mt:2,variant:"heading"},h.createElement(Yn.Trans,{id:"Flags"})),h.createElement(pl,null,n?h.createElement(Pn.Box,{mt:2,sx:{width:"600px"}},n.map((function(e){return h.createElement(zt,{key:e.key||""},e)})),t?h.createElement(ct,{LoadMoreFormik:t}):null," "):h.createElement(Pn.Text,{pt:3},h.createElement(Yn.Trans,{id:"No flags yet"}))))},o_=function(){var e=_M().flagsPage,n=Object(c.a)(e.formiks,1)[0],t=Object(h.useMemo)((function(){return e.edges.map((function(e){var n=e.creator&&AC(e.creator);return x.a.createElement(Jd,{key:e.id,actor:n,communityLink:"",communityName:"",createdAt:e.createdAt,event:"flagged",preview:x.a.createElement(a_,{flagId:e.id}),status:Nd.Loaded})}))}),[e.edges]),r=Object(h.useMemo)((function(){return{FlagPreviews:t,loadMoreFlags:n}}),[t,n]);return x.a.createElement(i_,r)};function l_(){var e=Object(i.a)(['\n    query instanceRegisterEmailDomainAccesses($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  registerEmailDomainAccesses(limit: $limit, before: $before, after: $after) @connection(key: "instanceRegisterEmailDomainAccesses") {\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n    edges {\n      id\n      domain\n    }\n  }\n}\n    ',""]);return l_=function(){return e},e}function c_(){var e=Object(i.a)(['\n    query instanceRegisterEmailAccesses($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  registerEmailAccesses(limit: $limit, before: $before, after: $after) @connection(key: "instanceRegisterEmailAccesses") {\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n    edges {\n      id\n      email\n    }\n  }\n}\n    ',""]);return c_=function(){return e},e}function u_(){var e=Object(i.a)(["\n    mutation sendInviteEmail($email: String!) {\n  sendInvite(email: $email)\n}\n    "]);return u_=function(){return e},e}function m_(){var e=Object(i.a)(["\n    mutation removeEmailFromAllowList($id: String!) {\n  deleteRegisterEmailAccess(id: $id) {\n    id\n  }\n}\n    "]);return m_=function(){return e},e}function s_(){var e=Object(i.a)(["\n    mutation addEmailToAllowList($email: String!) {\n  createRegisterEmailAccess(email: $email) {\n    email\n    id\n  }\n}\n    "]);return s_=function(){return e},e}function d_(){var e=Object(i.a)(["\n    mutation removeEmailDomainFromAllowList($id: String!) {\n  deleteRegisterEmailDomainAccess(id: $id) {\n    id\n  }\n}\n    "]);return d_=function(){return e},e}function f_(){var e=Object(i.a)(["\n    mutation addEmailDomainToAllowList($domain: String!) {\n  createRegisterEmailDomainAccess(domain: $domain) {\n    domain\n    id\n  }\n}\n    "]);return f_=function(){return e},e}var v_=U()(f_());var p_=U()(d_());U()(s_());var b_=U()(m_());var g_=U()(u_());var h_=U()(c_(),Zt);var x_=U()(l_(),Zt);var E_=function(e,n){return{query:h_,variables:e,context:n}},y_=function(e,n){return{query:x_,variables:e,context:n}},O_=function(){var e,n,t,r=q.c(v_,t),a=Object(c.a)(r,2),i=a[0],o=a[1],u=function(e){return q.c(p_,e)}(),m=Object(c.a)(u,2),s=m[0],d=m[1],f=function(e){return q.c(b_,e)}(),v=Object(c.a)(f,2),p=v[0],b=v[1],g=function(e){return q.c(g_,e)}(),x=Object(c.a)(g,2),E=x[0],y=x[1],O=function(e){return q.d(h_,e)}({variables:{limit:Ee}}),j=nr(null===(e=O.data)||void 0===e?void 0:e.registerEmailAccesses,(function(e){var n=e.cursor,t=e.update;return O.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r=n.fetchMoreResult;return(null===r||void 0===r?void 0:r.registerEmailAccesses)&&e.registerEmailAccesses?Object(l.a)(Object(l.a)({},r),{},{registerEmailAccesses:t({prev:e.registerEmailAccesses,fetched:r.registerEmailAccesses})}):e}})})),k=function(e){return q.d(x_,e)}({variables:{limit:Ee}}),w=nr(null===(n=k.data)||void 0===n?void 0:n.registerEmailDomainAccesses,(function(e){var n=e.cursor,t=e.update;return k.fetchMore({variables:Object(l.a)(Object(l.a)({},n),{},{limit:Ee}),updateQuery:function(e,n){var r=n.fetchMoreResult;return(null===r||void 0===r?void 0:r.registerEmailDomainAccesses)&&e.registerEmailDomainAccesses?Object(l.a)(Object(l.a)({},r),{},{registerEmailDomainAccesses:t({prev:e.registerEmailDomainAccesses,fetched:r.registerEmailDomainAccesses})}):e}})})),C=fF((function(e){return i({variables:{domain:e},refetchQueries:[y_({})]})}),[i]),I=fF((function(e){return s({variables:{id:e},refetchQueries:[y_({})]})}),[s]),T=fF((function(e){return E({variables:{email:e}})}),[E]),F=fF((function(e){return E({variables:{email:e},refetchQueries:[E_({})]})}),[E]),S=fF((function(e){return p({variables:{id:e},refetchQueries:[E_({})]})}),[p]);return Object(h.useMemo)((function(){return{listEmailDomainsPage:w,listEmailsPage:j,addEmailDomain:C,removeEmailDomain:I,addEmail:F,removeEmail:S,sendInviteEmail:T,addEmailDomainStatus:o,removeEmailDomainStatus:d,removeEmailStatus:b,sendInviteEmailStatus:y}}),[w,j,C,I,F,S,T,o,d,b,y])};function j_(){var e=Object(i.a)(["\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  border-radius: 30px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  svg{\n    stroke: ",";\n  }\n  &:hover {\n    // background: ",";\n    svg{\n      stroke: ",";\n    }\n  }\n"]);return j_=function(){return e},e}function k_(){var e=Object(i.a)(["\n  align-items: center;\n"]);return k_=function(){return e},e}function w_(){var e=Object(i.a)(["\n  && {\n    flex: 1;\n    color: ",";\n  }\n"]);return w_=function(){return e},e}function C_(){var e=Object(i.a)(["\n  padding: 20px;\n  border-bottom: 1px solid ",";\n"]);return C_=function(){return e},e}function I_(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]);return I_=function(){return e},e}function T_(){var e=Object(i.a)(["\n  flex:1;\n  // color: ",";\n"]);return T_=function(){return e},e}var F_={placeholders:{domain:Object(Yn.i18nMark)("Enter domain (e.g. moodle.com)")}},S_=Sn(Pn.Text)(T_(),(function(e){return e.theme.colors.medium})),P_=Sn(fl)(I_()),M_=Sn.div(C_(),(function(e){return e.theme.colors.lighter})),__=Sn(ja.b)(w_(),(function(e){return e.theme.colors.mediumdark})),L_=Sn(pl)(k_()),N_=Sn(Pn.Box)(j_(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),U_=function(e){var n=e.formikAddDomain,t=e.removeDomain,r=e.domainsList,a=e.loadMoreDomains;return x.a.createElement(Pn.Box,null,x.a.createElement(Pn.Text,{px:3,mt:2,variant:"heading"},x.a.createElement("span",{style:{marginRight:"8px"},"aria-label":"icon",role:"img"},"\ud83c\udfa8"),"Customize your instance"),x.a.createElement(M_,null,x.a.createElement(ja.c,{pt:3},x.a.createElement(Yn.Trans,{id:"Add Domain to allowlist"})),x.a.createElement(P_,null,x.a.createElement(__,{placeholder:F_.placeholders.domain,disabled:n.isSubmitting,name:"domain",value:n.values.domain,onChange:n.handleChange}),x.a.createElement(ml,null,x.a.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:n.submitForm},x.a.createElement(Yn.Trans,{id:"Add"}))))),x.a.createElement(Pn.Box,{p:3},x.a.createElement(Pn.Text,{p:3,variant:"suptitle"},x.a.createElement(Yn.Trans,{id:"Allowed Domains"})),r.map((function(e){return x.a.createElement(L_,{key:e},x.a.createElement(S_,null,e),x.a.createElement(N_,{onClick:function(){return t(e)}},x.a.createElement(VM.a,{size:21})))})),a?x.a.createElement(ct,{LoadMoreFormik:a}):null," "),x.a.createElement(Pn.Text,{variant:"suptitle",p:3},x.a.createElement(Yn.Trans,{id:"More options will be available soon"})))},R_=xi.object().shape({domain:xi.string().matches(Be)}),A_=function(){var e=Object(h.useState)(),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(h.useCallback)((function(){return r(void 0)}),[]),i=O_(),o=i.removeEmailDomain,l=i.addEmailDomain,u=i.listEmailDomainsPage,m=i.removeEmailDomainStatus,s=Object(c.a)(u.formiks,1)[0],d=Object(er.a)({initialValues:{domain:""},validationSchema:R_,onSubmit:function(e,n){var t=e.domain,r=n.resetForm;return t?l(t).then((function(){return r()})):void 0}}),f=Object(h.useMemo)((function(){return u.edges.map((function(e){return e.domain}))}),[u]),v=Object(h.useCallback)((function(){var e,n=null===(e=u.edges.find((function(e){return t===e.domain})))||void 0===e?void 0:e.id;n?o(n).then(a):a()}),[t,u.edges,o,a]),p=t?x.a.createElement(gl,{closeModal:function(){return r(void 0)}},x.a.createElement(CS,{cancel:a,confirm:v,action:Ma._("Delete domain from allowlist"),description:Ma._("Are you sure you want to delete ".concat(t," from allowlist?")),title:Ma._("Delete"),waiting:m.loading})):null,b=Object(h.useMemo)((function(){return{formikAddDomain:d,removeDomain:r,domainsList:f,loadMoreDomains:s}}),[d,f,s]);return x.a.createElement(x.a.Fragment,null,p,x.a.createElement(U_,b))};function z_(){var e=Object(i.a)(["\n  padding: 20px;\n  border-bottom: 1px solid ",";\n"]);return z_=function(){return e},e}function B_(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]);return B_=function(){return e},e}function D_(){var e=Object(i.a)(["\n  align-items: center;\n"]);return D_=function(){return e},e}function $_(){var e=Object(i.a)(["\n  && {\n    flex: 1;\n    color: ",";\n  }\n"]);return $_=function(){return e},e}function q_(){var e=Object(i.a)(["\n  flex:1;\n  // color: ",";\n"]);return q_=function(){return e},e}var V_,Q_={placeholders:{email:Object(Yn.i18nMark)("Add email addresses (comma-separated) to invite to instance")}},W_=function(e){var n=e.emailsList,t=e.formikAddEmail,r=e.sendInvite,a=e.loadMoreEmails;return x.a.createElement(Pn.Box,null,x.a.createElement(Pn.Text,{variant:"heading",px:3,mt:2},"Manage your instance registration"),x.a.createElement(G_,null,x.a.createElement(ja.c,{pt:3},x.a.createElement(Yn.Trans,{id:"Email"})),x.a.createElement(Z_,null,x.a.createElement(J_,{placeholder:Q_.placeholders.email,disabled:t.isSubmitting,name:"email",value:t.values.email,onChange:t.handleChange}),x.a.createElement(ml,null,x.a.createElement(ot,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},x.a.createElement(Yn.Trans,{id:"Add"}))))),x.a.createElement(Pn.Box,{p:3},x.a.createElement(Pn.Text,{p:3,variant:"suptitle"},x.a.createElement(Yn.Trans,{id:"Sent invitations"})),n.map((function(e,n){return x.a.createElement(K_,{key:"".concat(n,"-").concat(e)},x.a.createElement(H_,null,e),x.a.createElement(ot,{variant:"outline",onClick:function(){return r(e)}},x.a.createElement(Yn.Trans,{id:"Send again"})))})),a?x.a.createElement(ct,{LoadMoreFormik:a}):null," "))},H_=Sn(Pn.Text)(q_(),(function(e){return e.theme.colors.medium})),J_=Sn(ja.b)($_(),(function(e){return e.theme.colors.mediumdark})),K_=Sn(pl)(D_()),Z_=Sn(fl)(B_()),G_=Sn.div(z_(),(function(e){return e.theme.colors.lighter})),Y_=xi.object().shape({email:xi.string().matches(/^.+@.+\..+$/)}),X_=function(){var e=O_(),n=e.addEmail,t=e.listEmailsPage,r=e.sendInviteEmail,a=Object(c.a)(t.formiks,1)[0],i=Object(er.a)({initialValues:{email:""},validationSchema:Y_,onSubmit:function(e,t){var r=e.email,a=t.resetForm;return r?n(r).then((function(){return a()})):void 0}}),o=Object(h.useMemo)((function(){return t.edges.map((function(e){return e.email}))}),[t]),l=Object(h.useMemo)((function(){return{formikAddEmail:i,sendInvite:r,emailsList:o,loadMoreEmails:a}}),[i,r,o,a]);return x.a.createElement(W_,l)},eL=function(){return x.a.createElement(Pn.Box,null,x.a.createElement(Pn.Text,{px:3,mt:2,variant:"heading"},x.a.createElement(Yn.Trans,{id:"Moderation Log"})),x.a.createElement(Pn.Text,{variant:"suptitle",p:3},x.a.createElement(Yn.Trans,{id:"Logs will be available soon"})))},nL=function(){return x.a.createElement(eL,null)},tL=function(e){return h.createElement(ey.a,{options:e.locales,defaultValue:e.current,onChange:function(n){var t=Array.isArray(n)?n[0]:n;t&&e.setLocale(t.value)}})},rL=function(e){return h.createElement(Pn.Box,null,h.createElement(pl,null,h.createElement(fl,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Select language"})),h.createElement(tL,e),h.createElement(sl,{sx:{height:"inherit !important"}},h.createElement(ot,{variant:"primary",isSubmitting:e.formik.isSubmitting,isDisabled:e.formik.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:e.formik.submitForm},h.createElement(Yn.Trans,{id:"Save"}))))))},aL=xi.object({moodleWebsite:xi.string().matches(Be)}),iL=function(){var e,n,t=x.a.useContext(_a),r=t.available,a=t.current,i=t.set,o=Oa(),l=o.me,c=o.updateProfile,u=null===l||void 0===l?void 0:l.user,m=Object(er.a)({enableReinitialize:!0,initialValues:{moodleWebsite:(null===u||void 0===u||null===(e=u.extraInfo)||void 0===e||null===(n=e.LMS)||void 0===n?void 0:n.site)||""},validationSchema:aL,onSubmit:function(e){var n=e.moodleWebsite;return c({profile:{extraInfo:{LMS:{site:n}}}})}}),s=Object(h.useMemo)((function(){return r.map((function(e){return{value:e.code,label:e.desc}}))}),[r]),d=Object(h.useMemo)((function(){return s.find((function(e){return e.value===a.code}))||s[0]}),[a.code,s]),f=Object(h.useCallback)((function(e){var n=r.find((function(n){return n.code===e}));n&&i(n)}),[r,i]);return x.a.createElement(rL,{formik:m,current:d,locales:s,setLocale:f})};!function(e){e[e.Preferences=0]="Preferences",e[e.Invites=1]="Invites",e[e.Instance=2]="Instance",e[e.Flags=3]="Flags",e[e.ModerationLogs=4]="ModerationLogs",e[e.General=5]="General"}(V_||(V_={}));var oL={id:"Settings - Preferences"},lL={id:"Settings - Invites"},cL={id:"Settings - Instance"},uL={id:"Settings - Flags"},mL={id:"Settings - Moderation"},sL={id:"Settings - General"},dL=function(e){e.basePath;var n=e.tab,t=n===V_.Preferences?oL:n===V_.Invites?lL:n===V_.Instance?cL:n===V_.Flags?uL:n===V_.ModerationLogs?mL:(V_.General,sL);wi(t);var r=Oa(),a=r.me,i=r.updateProfile,o=null===a||void 0===a?void 0:a.user,l=Object(h.useMemo)((function(){var e,n;return{icon:(null===o||void 0===o||null===(e=o.icon)||void 0===e?void 0:e.url)||void 0,image:(null===o||void 0===o||null===(n=o.image)||void 0===n?void 0:n.url)||void 0,location:(null===o||void 0===o?void 0:o.location)||"",name:(null===o||void 0===o?void 0:o.name)||"",website:(null===o||void 0===o?void 0:o.website)||"",summary:(null===o||void 0===o?void 0:o.summary)||""}}),[o]),c=Object(er.a)({initialValues:l,enableReinitialize:!0,onSubmit:function(e){var n=e.icon,t=e.image,r=Object(Dy.a)(e,["icon","image"]);return i({profile:r,icon:n,image:t})}}),u=Object(h.useMemo)((function(){return{preferences:QL.getPath({tab:"preferences"},void 0),instance:QL.getPath({tab:"instance"},void 0),invites:QL.getPath({tab:"invites"},void 0),flags:QL.getPath({tab:"flags"},void 0),logs:QL.getPath({tab:"logs"},void 0),general:QL.getPath({tab:void 0},void 0)}}),[]),m=Object(h.useMemo)((function(){return{sectionPaths:u,displayUsername:(null===o||void 0===o?void 0:o.displayUsername)||"",isAdmin:!!(null===a||void 0===a?void 0:a.isInstanceAdmin),formik:c,Preferences:x.a.createElement(iL,null),Instance:x.a.createElement(A_,null),Invites:x.a.createElement(X_,null),Flags:x.a.createElement(o_,null),ModerationLog:x.a.createElement(nL,null)}}),[a,o,u,c]);return m&&x.a.createElement(dM,m)};function fL(){var e=Object(i.a)(["\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  margin-top: 16px;\n"]);return fL=function(){return e},e}function vL(){var e=Object(i.a)(["\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n    margin: 0 8px;\n  "]);return vL=function(){return e},e}function pL(){var e=Object(i.a)(["\n  // height: calc(100vh - 150px);\n  overflow: overlay;\n  grid-template-rows: auto;\n  grid-template-columns:1fr;\n  column-gap: 0px;\n  margin: 0;\n  margin: 0 8px;\n  "]);return pL=function(){return e},e}function bL(){var e=Object(i.a)(["\n  grid-template-rows: auto;\n  grid-template-columns:  1fr;\n  "]);return bL=function(){return e},e}function gL(){var e=Object(i.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  \n  ","\n  ","\n  ","\n"]);return gL=function(){return e},e}function hL(){var e=Object(i.a)(["\n    display: block;\n  "]);return hL=function(){return e},e}function xL(){var e=Object(i.a)(["\n    grid-template-rows: 50px auto;\n    row-gap: 8px;\n  "]);return xL=function(){return e},e}function EL(){var e=Object(i.a)(["\n  height: 100vh;\n  display: grid;\n  ","\n  ","\n"]);return EL=function(){return e},e}function yL(){var e=Object(i.a)(["\n    display: none;\n  "]);return yL=function(){return e},e}function OL(){var e=Object(i.a)(["\n  position: fixed;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 500;\n  background: ","\n  display: grid;\n  border-top: ",";\n  grid-template-columns: 1fr 1fr 1fr;\n  ","\n\n"]);return OL=function(){return e},e}function jL(){var e=Object(i.a)(["\n    background: #fff;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  "]);return jL=function(){return e},e}function kL(){var e=Object(i.a)(["\n  height: 75px;\n  line-height: 75px;\n  text-align: center;\n  ","\n"]);return kL=function(){return e},e}function wL(){var e=Object(i.a)(["\n    display: none;\n  "]);return wL=function(){return e},e}function CL(){var e=Object(i.a)(["\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 24px;\n  flex:1;\n}\n","\n"]);return CL=function(){return e},e}function IL(){var e=Object(i.a)(["\n    display: none;\n  "]);return IL=function(){return e},e}function TL(){var e=Object(i.a)(["\n  ","\n"]);return TL=function(){return e},e}function FL(){var e=Object(i.a)(["\n  div {\n    max-width: 36px;\n    height: 36px;\n    min-width: 36px;\n    margin: 0 auto;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return FL=function(){return e},e}function SL(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return SL=function(){return e},e}function PL(){var e=Object(i.a)(["\n  img {\n    width: 36px;\n    height: 36px;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return PL=function(){return e},e}var ML=function(e){var n=e.SidebarBox,t=e.HeaderBox,r=e.SearchBox,a=e.children,i=e.userImage,o=e.userLink,l=e.username,u=e.name,m=e.signout,s=x.a.useState(!1),d=Object(c.a)(s,2),f=d[0],v=d[1],p=Object(Tn.h)();return x.a.createElement(BL,null,x.a.createElement(RL,null,x.a.createElement(LL,{onClick:function(){return p.goBack()}},x.a.createElement(Al.a,{size:"20"})),r),x.a.createElement(UL,null,t),x.a.createElement(DL,null,x.a.createElement($L,null,a)),x.a.createElement(zL,null,x.a.createElement(AL,null,x.a.createElement(CO,{open:f,setOpen:v}),x.a.createElement(IO,{username:l,name:u,userImage:i,signout:m,open:f,setOpen:v,Side:n})),x.a.createElement(AL,null,x.a.createElement(mt.c,{to:"/"},x.a.createElement(_L,null,x.a.createElement(Yb.c,{src:Oe})))),x.a.createElement(AL,null,x.a.createElement(NL,null,x.a.createElement(mt.c,{to:o},x.a.createElement(Vl,{src:i,size:"m"}))))))},_L=Sn(Pn.Box)(PL()),LL=Sn(Pn.Box)(SL(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),NL=Sn(Pn.Box)(FL()),UL=Sn(Pn.Box)(TL(),k.a.lessThan("medium")(IL())),RL=Sn(Pn.Box)(CL(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),k.a.greaterThan("medium")(wL())),AL=Sn(Pn.Box)(kL(),k.a.lessThan("medium")(jL())),zL=Sn(Pn.Box)(OL(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),k.a.greaterThan("medium")(yL())),BL=Sn(Pn.Box)(EL(),k.a.greaterThan("large")(xL()),k.a.lessThan("medium")(hL())),DL=Sn(Pn.Box)(gL(),k.a.greaterThan("medium")(bL()),k.a.lessThan("medium")(pL()),k.a.lessThan("small")(vL())),$L=Sn(Pn.Box)(fL()),qL=function(e){var n=e.children,t=Oa(),r=t.me,a=t.logout,i=Object(h.useMemo)((function(){var e,n=null===r||void 0===r?void 0:r.user;if(!n)return null;var t=(null===(e=n.icon)||void 0===e?void 0:e.url)||"",i="/user/".concat(n.id);return{SidebarBox:x.a.createElement(kE,null),HeaderBox:x.a.createElement(KT,null),SearchBox:x.a.createElement(Rl,null),userImage:t,userLink:i,signout:a,username:n.displayUsername||"",name:n.preferredUsername||""}}),[a,r]);return i?x.a.createElement(ML,i,n):x.a.createElement(uF,null,n)},VL={exact:!0,path:"/settings/:tab(preferences|logs|invites|instance|flags)?",component:function(e){var n=e.match.params.tab,t="preferences"===n?V_.Preferences:"logs"===n?V_.ModerationLogs:"invites"===n?V_.Invites:"instance"===n?V_.Instance:"flags"===n?V_.Flags:n?null:V_.General,r=Object(h.useMemo)((function(){return null===t?null:{tab:t,basePath:"/settings"}}),[t]);return r?x.a.createElement(yE,null,x.a.createElement(qL,null,x.a.createElement(dL,r))):x.a.createElement(vh,null)}},QL=uE(VL),WL=t(934);function HL(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: center;\n  div {\n    color: white;\n  }\n"]);return HL=function(){return e},e}function JL(){var e=Object(i.a)(["\n  margin: 0;\n  flex: 1;\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n  background: ",";\n  border-radius: 4px;\n  height: inherit;\n  border: 1px solid #dddfe2;\n  text-align: left;\n  height: fit-content;\n  padding: 16px;\n"]);return JL=function(){return e},e}function KL(){var e=Object(i.a)(["\n  grid-area: header;\n  text-align: center;\n"]);return KL=function(){return e},e}function ZL(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  padding-bottom: 50px;\n"]);return ZL=function(){return e},e}function GL(){var e=Object(i.a)(["\n    // display: grid;\n    // grid-template-columns: 1fr;\n    padding: 16px\n  "]);return GL=function(){return e},e}function YL(){var e=Object(i.a)(["\n  ",";\n"]);return YL=function(){return e},e}function XL(){var e=Object(i.a)(["\n  background: #fff;\n  border-radius: 4px;\n  height: inherit;\n  padding: 30px 20px;\n  text-align: center;\n  height: fit-content;\n"]);return XL=function(){return e},e}function eN(){var e=Object(i.a)(["\n  text-align: center;\n  margin-top: 10px;\n"]);return eN=function(){return e},e}var nN={login:Object(Yn.i18nMark)("Sign in"),placeholders:{email:Object(Yn.i18nMark)("eg. mary@moodlers.org"),preferredUsername:Object(Yn.i18nMark)("eg. moodlerMary"),name:Object(Yn.i18nMark)("eg. Moodler Mary"),password:Object(Yn.i18nMark)("Choose your password"),passwordConfirm:Object(Yn.i18nMark)("Confirm your password")}},tN=function(e){var n=e.formik,t=e.registeredUsername,r=e.registeredEmail;return h.createElement(oN,null,!n.isSubmitting&&n.submitCount&&t&&r?h.createElement(Pn.Box,{mt:3},h.createElement(Ba,null),h.createElement(aN,null,h.createElement(Pn.Box,null,h.createElement(Pn.Text,{variant:"suptitle"},h.createElement(Yn.Trans,{id:"Welcome"})," ",h.createElement("b",null,t)),h.createElement(Pn.Text,{mt:2,variant:"text"},h.createElement(Yn.Trans,{id:"Please confirm your email address"}),h.createElement("b",null," "+r+" "),h.createElement(Yn.Trans,{id:"by clicking on the link we emailed you (check your spam folder if necessary)."}))),h.createElement(rN,null,h.createElement(mt.b,{to:"/"},h.createElement(ot,{mt:3,variant:"primary"},h.createElement(Yn.Trans,{id:"Sign in"})))))):h.createElement(iN,null,h.createElement(Ba,null),h.createElement(lN,null,h.createElement(uN,{p:3},h.createElement(Pn.Box,{mr:2},h.createElement(WL.a,{size:"20",color:"white"})),h.createElement(Pn.Text,{variant:"suptitle"},ye))),h.createElement(Pn.Flex,{mt:2},h.createElement(cN,{onSubmit:n.handleSubmit},h.createElement(Pn.Box,null,h.createElement("label",null,h.createElement(Yn.Trans,{id:"Email"})),h.createElement(ja.b,{placeholder:nN.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),n.errors.email&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.email))),h.createElement(Pn.Box,{mt:3},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Full name"})),h.createElement(ja.b,{placeholder:nN.placeholders.name,name:"name",value:n.values.name,onChange:n.handleChange}),n.errors.name&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.name))),h.createElement(Pn.Box,{mt:3},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Preferred username"})),h.createElement(ja.b,{placeholder:nN.placeholders.preferredUsername,name:"username",value:n.values.username,onChange:n.handleChange}),n.errors.username&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.username))),h.createElement(Pn.Box,{mt:3},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Password"})),h.createElement(ja.b,{placeholder:nN.placeholders.password,name:"password",type:"password",value:n.values.password,onChange:n.handleChange}),n.errors.password&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.password))),h.createElement(Pn.Box,{mt:3},h.createElement("label",null,h.createElement(Yn.Trans,{id:"Confirm password"})),h.createElement(ja.b,{placeholder:nN.placeholders.passwordConfirm,name:"passwordConfirm",type:"password",value:n.values.passwordConfirm,onChange:n.handleChange}),n.errors.passwordConfirm&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.passwordConfirm))),h.createElement(Pn.Box,{mt:3,mb:3},h.createElement(ja.c,{alignItems:"center"},h.createElement(ja.a,{name:"terms",id:"remember",value:n.values.terms,onChange:n.handleChange}),h.createElement(Pn.Text,{mr:1},"I have read and agreed the"),h.createElement(mt.c,{to:"/terms",target:"_blank"},"Terms and Conditions")),n.errors.terms&&h.createElement(al,null,h.createElement(No,{variant:"negative"},n.errors.terms))),h.createElement(Pn.Box,{mt:3},h.createElement(ot,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit"},h.createElement(Yn.Trans,{id:"Sign up"})))))))},rN=Sn(Pn.Box)(eN()),aN=Sn.div(XL()),iN=Sn(Pn.Box)(YL(),k.a.lessThan("medium")(GL())),oN=Sn.div(ZL()),lN=Sn.div(KL()),cN=Sn.form(JL(),(function(e){return e.theme.colors.appInverse})),uN=Sn(Pn.Flex)(HL(),(function(e){return e.green?"#546d4f":e.theme.colors.secondary})),mN={name:"",email:"",password:"",username:"",passwordConfirm:"",terms:!1},sN={id:"Sign Up"},dN=function(){wi(sN);var e=Ei(),n=e.signUp,t=e.signUpStatus,r=e.usernameAvailable,a=xi.object({username:xi.string().min(3).max(16).matches(ze).required().test("checkDuplUsername","username already exists",(function(e){return e&&r(e)})),email:xi.string().max(50).required(),name:xi.string().max(50).required(),password:xi.string().min(6).max(50).required(),passwordConfirm:xi.string().oneOf([xi.ref("password"),null],"Passwords must match").required(),terms:xi.boolean().oneOf([!0],"Must Accept Terms and Conditions")}),i=Object(er.a)({initialValues:mN,enableReinitialize:!0,validateOnChange:!1,validateOnBlur:!1,validationSchema:a,onSubmit:function(e){return n({email:e.email,name:e.name,password:e.password,preferredUsername:e.username,wantsEmailDigest:!1,wantsNotifications:!1})}}),o=Object(h.useMemo)((function(){var e,n;return t.called&&(null===(e=t.data)||void 0===e||null===(n=e.createUser)||void 0===n?void 0:n.user.name)?{formik:i,registeredUsername:t.data.createUser.user.name,registeredEmail:t.data.createUser.email}:{formik:i}}),[t,i]);return x.a.createElement(tN,o)},fN={exact:!0,path:"/signup",component:function(e){e.match;return x.a.createElement(uF,{withoutHeader:!0},x.a.createElement(dN,null))}},vN={id:"Moodle LMS"},pN=function(e){if(wi(vN),e.badParams)return x.a.createElement("div",null,x.a.createElement("h2",null,"Bad Params"));var n=e.params,t=n.course,r=n.site,a=n.section;return x.a.createElement("div",null,x.a.createElement("h1",null,"Welcome from Moodle LMS !"),x.a.createElement("h2",null,"Site: ",r),t&&x.a.createElement("h3",null,"course: ",t),a&&x.a.createElement("h3",null,"section: ",a))},bN={exact:!0,path:"/lms/moodle/search",component:function(e){e.match;var n=np(),t=n.updateLMSPrefs,r=n.loading,a=Object(h.useRef)(function(){var e=new URLSearchParams(window.location.search),n=e.get("site");return n?{site:n,course:e.get("course")||void 0,section:e.get("section")||void 0}:null}()),i=Object(h.useRef)(!1),o=Object(h.useState)(),l=Object(c.a)(o,2),u=l[0],m=l[1];return Object(h.useEffect)((function(){var e=a.current;i.current||r||(e?t(e).then((function(){return m({params:e})})):m({badParams:!0}),i.current=!0)}),[t,r]),x.a.createElement(yE,null,x.a.createElement(Oj,null,u&&x.a.createElement(pN,u)))}},gN=t(801);function hN(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: center;\n  div {\n    color: white;\n  }\n"]);return hN=function(){return e},e}function xN(){var e=Object(i.a)(["\n  .extra {\n    width: 100%;\n    margin-right: 0;\n    margin-left: 0;\n  }\n"]);return xN=function(){return e},e}function EN(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 1020px;\n"]);return EN=function(){return e},e}function yN(){var e=Object(i.a)(["\n    // display: grid;\n    // grid-template-columns: 1fr;\n    padding: 16px\n  "]);return yN=function(){return e},e}function ON(){var e=Object(i.a)(["\n  ",";\n"]);return ON=function(){return e},e}var jN=function(e){var n=e.terms_users_text_data,t=e.terms_cookies_text_data,r=e.terms_indexing_text_data,a=e.terms_users_data,i=e.terms_privacy_enabled,o=e.privacy_url_text_data,l=e.terms_privacy_text_data,c=e.terms_cookies_data,u=e.terms_indexing_data;return h.createElement(wN,null,h.createElement(kN,null,h.createElement(Ba,null),h.createElement(Pn.Flex,{mt:2},h.createElement(CN,null,h.createElement(IN,{green:!0,mb:3,mt:3,p:3},h.createElement(Pn.Box,{mr:2},h.createElement(gN.default,{size:"20",color:"white"})),h.createElement(Pn.Text,{variant:"suptitle"}," ","Please read the following. By using this instance of WeLoop you are consenting to these agreements.")),h.createElement(Jn,{className:"extra"},h.createElement(Pn.Box,{p:3},h.createElement(Su.a,null,a||n)),h.createElement(Pn.Box,{p:3},i?h.createElement(Su.a,null,o||l):null),h.createElement(Pn.Box,{p:3},h.createElement(Su.a,null,c||t)),h.createElement(Pn.Box,{p:3},h.createElement(Su.a,null,u||r)))))))},kN=Sn(Pn.Box)(ON(),k.a.lessThan("medium")(yN())),wN=Sn.div(EN()),CN=Sn(Pn.Box)(xN()),IN=Sn(Pn.Flex)(hN(),(function(e){return e.green?"#546d4f":e.theme.colors.primary})),TN=t(195),FN={id:"Terms and Conditions"},SN=function(){wi(FN);var e=x.a.useContext(_a).i18n,n={data:e._(je)},t={data:e._(Me)},r={data:e._(ke)},a={data:e._(we)},i=Object(TN.a)(Ie,{useCache:!0,manual:!0}),o=Object(c.a)(i,2),l=o[0],u=o[1],m=Object(TN.a)(Te,{useCache:!0,manual:!0}),s=Object(c.a)(m,2),d=s[0],f=s[1],v=Object(TN.a)(Fe,{useCache:!0,manual:!0}),p=Object(c.a)(v,2),b=p[0],g=p[1],E=Object(TN.a)(Pe,{useCache:!0}),y=Object(c.a)(E,2),O=y[0],j=y[1];Object(h.useEffect)((function(){Ce&&(u(),f(),g()),Se&&j()}),[]);var k=Object(h.useMemo)((function(){return{terms_privacy_enabled:Se,terms_users_data:l.data,terms_users_text_data:n.data,privacy_url_text_data:O.data,terms_privacy_text_data:t.data,terms_cookies_data:d.data,terms_cookies_text_data:r.data,terms_indexing_data:b.data,terms_indexing_text_data:a.data}}),[O.data,d.data,r.data,b.data,a.data,t.data,l.data,n.data]);return x.a.createElement(jN,k)},PN={exact:!0,path:"/terms",component:function(){return x.a.createElement(uF,{withoutHeader:!0},x.a.createElement(SN,null))}},MN=function(){return x.a.createElement(Tn.d,null,x.a.createElement(Tn.b,UC),x.a.createElement(Tn.b,xT),x.a.createElement(Tn.b,jj),x.a.createElement(Tn.b,VL),x.a.createElement(Tn.b,wF),x.a.createElement(Tn.b,FF),x.a.createElement(Tn.b,aI),x.a.createElement(Tn.b,SS),x.a.createElement(Tn.b,US),x.a.createElement(Tn.b,mE),x.a.createElement(Tn.b,NP),x.a.createElement(Tn.b,aS),x.a.createElement(Tn.b,lP),x.a.createElement(Tn.b,mF),x.a.createElement(Tn.b,fN),x.a.createElement(Tn.b,qF),x.a.createElement(Tn.b,PN),x.a.createElement(Tn.b,bN),x.a.createElement(Tn.b,OE),x.a.createElement(Tn.b,$S),x.a.createElement(Tn.b,{component:vh}))};function _N(){var e=Object(i.a)(["\n  position: relative;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 4010;\n"]);return _N=function(){return e},e}var LN=function(){var e=h.useState(!0),n=Object(c.a)(e,2),t=n[0],r=n[1];return t?h.createElement(NN,null,h.createElement(No,{variant:"warning"},h.createElement("div",{style:{textAlign:"center"}},"This site is currently in active development. We are looking forward to reading your feedback and ideas in our"," ",h.createElement("a",{href:"https://github.com/reflow-project/weloop/issues",target:"_blank",rel:"noopener noreferrer"},"Issues Tracker"),h.createElement("span",{style:{cursor:"pointer",position:"absolute",top:"10px",right:"10px"},onClick:function(){return r(!1)}},h.createElement(Bo.default,{size:16}))))):null},NN=Sn(Yb.a)(_N()),UN=function(){return h.createElement(In,null,h.createElement(h.Fragment,null,h.createElement(LN,null),h.createElement(MN,null)))},RN=t(467),AN=t.n(RN),zN=t(319),BN=t.n(zN),DN=t(942),$N=function(e){return"?".concat(BN.a.stringify(e))},qN=Re&&Re.appId&&Re.apiKey&&AN()(Re.appId,Re.apiKey),VN=function(e){var n,t=e.children,r=Object(Tn.h)().push,a=Object(Tn.i)(),i=x.a.useRef(),o=x.a.useRef(QN(a.pathname)),l=x.a.useState((n=a.search,BN.a.parse(n.slice(1)))),u=Object(c.a)(l,2),m=u[0],s=u[1];x.a.useEffect((function(){var e=setTimeout((function(){o.current&&!QN(a.pathname)?(i.current=void 0,o.current=!1,s(WN)):m.query?(i.current=i.current||(QN(a.pathname)?void 0:a),o.current=!0,r(function(e){return"/search/".concat($N(e))}(m))):QN(a.pathname)&&(i.current?r(i.current):r("/"),i.current=void 0)}),500);return function(){clearTimeout(e)}}),[m,a.pathname,a.hash,a.search,r]);var d=x.a.useCallback((function(e){var n,t;!("query"in e)||(null===e||void 0===e?void 0:e.query)==(null===m||void 0===m?void 0:m.query)&&(null===e||void 0===e||null===(n=e.refinementList)||void 0===n?void 0:n.index_type)==(null===m||void 0===m||null===(t=m.refinementList)||void 0===t?void 0:t.index_type)&&(null===e||void 0===e?void 0:e.page)==(null===m||void 0===m?void 0:m.page)||s(e)}),[m]);return qN&&Re?x.a.createElement(DN.a,{searchState:m,onSearchStateChange:d,searchClient:qN,refresh:!0,indexName:Re.indexName||"",createURL:$N},t):x.a.createElement(x.a.Fragment,null,t)},QN=function(e){return"/search/"===e},WN={query:""},HN=function(e){var n=e.children;return x.a.createElement(La,null,x.a.createElement(ki,null,x.a.createElement(mt.a,null,x.a.createElement(VN,null,n))))},JN=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function KN(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");JN?(!function(e){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ZN(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ZN(e)}))}}function ZN(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function GN(){var e=Object(i.a)([" \n          width: 90vw !important;\n          margin: 0 auto; \n        "]);return GN=function(){return e},e}function YN(){var e=Object(i.a)(["\n      body, html {\n          border: 0;\n          margin: 0;\n          padding: 0;\n          width: 100%;\n          height: 100%;\n          font-family: "," !important;\n      }\n\n      * {\n        box-sizing: border-box;\n      }\n      input, textarea {\n        ::placeholder {\n          font-family: "," !important;\n        }\n      }\n      h1 {\n        font-size: 50px;\n      }\n      h2 {\n        font-size: 30px;\n      }\n      h3 {\n        font-size: 18px;\n      }\n      p {\n        font-size: 18px;\n      }\n\n      body {\n        background: ",";\n        .ais-SearchBox {\n          border-radius: 4px;\n          border: ","\n          height: 34px;\n          width: 380px;\n          background: ","\n          input {\n            border: none;\n            margin: 0 !important; \n            border-radius: 4px;\n            text-indent: 30px;\n            padding: 0;\n            height: 32px;\n            background: ",";\n          }\n        }\n        .ais-InstantSearch__root { \n          display: flex;\n        width: 100%;\n        }\n      }\n\n      .Toastify__toast--success{\n        background-color: ",";\n      }\n\n      .Toastify__toast-container--top-right{\n        top:60px !important;\n        ","; \n    }\n\n    input, textarea{\n      &:focus::placeholder{\n        color: transparent;\n      }\n    }\n\n    input:focus::-webkit-input-placeholder, textarea:focus::-webkit-input-placeholder { color:transparent; }\n    input:focus:-moz-placeholder, textarea:focus:-moz-placeholder { color:transparent; } /* FF 4-18 */\n    input:focus::-moz-placeholder, textarea:focus::-moz-placeholder { color:transparent; } /* FF 19+ */\n    input:focus:-ms-input-placeholder, textarea:focus:-ms-input-placeholder { color:transparent; } /* IE 10+ */\n  "]);return YN=function(){return e},e}function XN(){return(XN=Object(o.a)(a.a.mark((function e(){var n,t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(j.createGlobalStyle)(YN(),ln.primary,ln.primary,$e,on,$e,$e,Qe,k.a.lessThan("480px")(GN())),t=Ca("local"),e.next=4,kn({localKVStore:t("APOLLO#"),appLinks:[g]});case 4:r=e.sent,i=function(){return h.createElement(E.a,{client:r.client},h.createElement(HN,null,h.createElement(n,null),h.createElement(m.b,{hideProgressBar:!0,transition:m.a,autoClose:3e3,newestOnTop:!0}),h.createElement(UN,null)))},O.a.render(h.createElement(i,null),document.getElementById("root")),KN();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){XN.apply(this,arguments)}()}},[[477,2,3]]]);
//# sourceMappingURL=main.e89ff313.chunk.js.map