(this.webpackJsonpzenpub=this.webpackJsonpzenpub||[]).push([[1],{192:function(e,n,t){"use strict";var r=t(271);t.d(n,"getOpType",(function(){return r.a})),t.d(n,"getOperationNameAndType",(function(){return r.b}));t(272)},271:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return l}));var r=t(193),a=t(207),i=t(205);t(89).ApolloLink;var o=function(e){var n=e.query.definitions.find((function(n){return"OperationDefinition"===n.kind&&!!n.name&&n.name.value===e.operationName}));return n&&n.operation},l=function(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind})).reduce((function(e,n){if(!e){var t=n.selectionSet.selections.find((function(e){return"Field"===e.kind}))||null,r=n.operation;e=t&&[t.name.value,r]}return e}),null)||[]}},272:function(e,n){},340:function(e,n,t){e.exports=t.p+"static/media/collectionPlaceholder.43589a77.png"},409:function(e,n,t){e.exports=t(732)},503:function(e,n,t){},506:function(e,n,t){var r={"./en_GB/messages.po":[736,0]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=506,e.exports=a},507:function(e,n,t){var r={"./en_GB/messages.js":[737,0]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],a=n[0];return t.e(n[1]).then((function(){return t.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=507,e.exports=a},652:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAACOCAYAAAD0I+WQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGNFJREFUeNrsne2VHDUThcd+/d/OYJ2B7QgMEawdge0IFiIAIlgcgU0EiyMAIliIYCECIAK/88xBnNmhpZZKpW6p595z6hjsmZ5utVRXVaqPB7v7eLyXr/bydi9Pd4IgCIJwH7/v5ce9fL+XP8JfPjj6wOVePu7licZKEARBmMFf/xgfPxyTyeU/TCMIgiAIJXgLoUAmj/8xW+5ZJC9fvtx98cUXGiZBEAThgF9//XX36dOnKQvlOWTyzV6+DX/7+PHj3c8//7x7/vy5Rk4QBEG4h99//3336tWr3W+//Xb81x8hk7vd0WH77e2tiEQQBEFIEgo88ffff/9rnTw8JpLLy0sRiSAIgpDE06dPD9bJEZ48PP4/EYkgCIKQSyjHeKghEQRBEGohMhEEQRBEJoIgCILIRBAEQRCZCIIgCILIRBAEQRCZCIIgCCITQRAEQWQiCIIgCODROTwklS6pJcOff/311+FPwH+fFCv7FxS8PK4IECoo8yeZn6fZn4IgCCKTDQGCoOoxAmn88ssvputQwOz4u+G/v/vuu3tkA7kEWer5vv/+e81cQRBWBTr2FJ+DfPPNN59HxN3d3efr6+vPz549+3z8PEvL5eXl5w8fPnz+888/mz7vTz/99HlPZqs+q0QikZzImGSCwkZxr00gc8TSkkB7fXaJRCIyGcIKubq6GmZnfnFxcRjXFtYK14S0NIklEonIpIBE3rx5M+xAQ36tSGXkcZFIJCKTxdxZ3NdWBrwVqWCtaTJLJBKRyQRubm42e9CM+4vn8wRnNJrQEolEZHJkjbx8+fIsXgDPiQtPhCKRSEaW7jLgf/zxx0NCoDU/ZDTwnOSr8NweePv27e7q6kpB8IIgLIqukha/+uqr3fv375tc++Li4qC0keMM9lSyYUjKIXs+ZNAjf/zxh+u9kSD5+vXr3Zs3bw4JiU+ePKm6HtcgufGHH37QDBcEYTGs7ubCreWdM8GZBIfSnEt4H3ZzPa7L9fkdz/tmHLzcXgoblkgkZ3Nmcnt766aQA4FwzaWfwTP3het4PEMLkpZIJJLuyASF6aGAOcRumW1eegDuFTzg8UxYOSq9IpFINksmHkSC0qZOVY/gvjxIxYNQcMlpokskks2RSS2R4M7qlUSmFHmtG8+DULaU+CmRSEQm1UQyamXjWmXuQSg6P5GMIugILPsgctX2L4uGBhNWSyguobCl2CvC3cePH+81rBoJ33777e7Vq1eHPJBYQ64U3r17d/iT71tBLgvjZxn/GuyJtGrOlIZjE2I91byM8O6ScOm9EouGjoe+NqXfy0EIRS/NtSL8PTY/CHP3yt2yjksK9Afi3lkjzNGp8PjQq4h5jCw9j4VOQoOJLLLuLihk2LpHyJJh0DWFGWvde/R9WXrH4mXR5o5bbIz4ey8reCnruaTNAjv4Jdyc1nHZOdaq21rNvi3IIhnw7CisFsle+R0sktpEvl7Ac/A8eyVh+j47t9B22AISQ7HyRgO7VcZtTwiHXey5gN067xtra2tgHvJsWO2l65vP8739JuNgkQnrYxEyQYGVunZQGDc3N4fvblVJsBBKFSOEzHchaCtQyqOCTQmujnMilPDOcC9tBZAjRDLljizdZHCdETdIIpNCUNqjtKwHigKFwS58y2AhWBQjxFxzdsLvjrzTDVbKuYG1tBWLxPP9BWv/3DYYvaHpATw7hq+//tpEJKMetFsJpfRg/tOnTwflYrXc+O7ah5jhoDk2LinXBxsNlJIlmGFNhHpvUziuGRcbE1w63rXhlkRY3ymEg/Zjd244mE+NDWvBGgAg+KDJwaGllIdXGZG5jHAONTnMTSUVhtBEyqTw+dYBAJZMdT5fU8drqQNM6+8z/qn5ECu33/MB/C7jED0111JzdoQD+LkQdwJEYusAfTKnH7xr5Uk6yDOxdP5rmYjoUeaEwokt79GSg5NSIC0j7JYgkznCZLy2RiZhnlnWVe9kgqJPISdab27DqY6jG4vmwjwtLSVPdFNNbH4MoT8KeRq1cfa4lr788st/D4FbubxKwDNZ/c+4kXoPcMANF3u+rbpCmWcp1+CoSM213LNV5gPrLxaAsvVz1p7xcOlJMwWaOdUcKMf8rlyTPiHePmYUOKTSQhGjIEvDhrkPa3QX3+394LIFcY+Kmii+tRFT9DwTYb4eG4wWG1IhD+4H8LzkEguAcEfvKJWQ19L6cBbrCysM68czDybkFuRadywuxrBkQZ5aJz0fXG4lxygXsUg75vWoHUgJlogFF1gCQUIDOGHDZFKi0NgRe7WrPXYDLFkyhMUd3F6eSo/FwjVzCZHPQ0KWuH2+1zOZnNNuM3TbrF1bI71Diw7A26DIrQ2TCZO9xKXkndnOTgVTeulwVxQ+i6UmMz02Pi9evMi2Thh/y/kJBHR5eZn01a+5o425QL3HewmQwR9DKhya99qqpfXa1qXcmNuA25kJirzEXYXy8j4s43pr5R3wu95nKCiXkiKJHGBaTX/vM6taYLWyS09ZfCMqITYdMYk9J+8mFPrcomWigo0ik/+YqrmTAkXhncEMka3tT2bn6K3gsDZKag9Zz58g4qVrHPFsRJNOCaQ4Z7luJSM8Z5y2WJtrVOtSaEwmJf5cdvCe7i3OSXrxJ9fWzapVmjUKdqSwSp5z5EzwEuCGrCkO2jN0iC4y+Y9Vkruw2f16K36u14upzDh475hR8rlF/lJhkzlEOAKYb6VlenoBlmtM5nbpvJ+a3jA94lzKJolMMlGivLyJpLTh0VK7Zu8dV8m4WSPkQu2n3i0ScodGBflJMSHYIpRWT1n1IxY0jCVbnlvYt8hkxkzNjQJKdYJbQsmegkXJTu/u7u6ev77WnVBjHcTAAWaudcL7sGZK9+jqCucnuHtGtUhK5g4hr7FgDpTvKBZkDpkAS2l91i6RcVOicvTroDo0uGQX7G2VoGSsu3AmcCzZkMWK26HG4qmp6Jtyc+QGGfBslt+HtJYKQYUg5kiXd+wVoTdSvgrvIOYuHdE1lApMYQNTGjzDGMTep6ydjZNJ6PHsCWsJdXYuc1FXtU17ODvBB+658Bm/3FweK5ksaZlY+pznbjI8UDsHahGbP2vflwWp98ycK7U4U/N01CoBo+Nh7aLNdXG1MM0tVklOPwUvhdSigVOusmdBWZ9h9I5+qYNs8ptqLZmlii1ubYcdW6+QY0lgQWpjqlDjQcmkRJm3IBNLxnZOWHLw0a9Bdp7jaM15Gb18SUqh5I4fhBqzAJZQWKlaVqMiFeWIxZ171sF1UpUChAHJJFdZcfDu7ee1WiU5rh8mq0eoMe4o711sScSVlUxGD9ec88/PBVig1FLzq8Um4XS9pJTiqOVHsJZT986/UUE8Bd5dbEPgtQkUbHjUatGeLuAld5+p+8ixSjzzREJLXk/wHDmH5OdqmYRouti48/c8I585HiMsAf4+9b5qgj7AnDsnlFbx3kix87cEwPAdz4KKbOZia5e1GQqW8m6OPxfeS8pa89oECnaYOi3SpW+X2YGrRSteS9fEm5ubJh0iU8L1vFHSMdAKzw6Ma7QNnuvq17LVsWfH0lMwh3cNum6WPG9tJ0k6KvbQpVTSSafFXMsA11ILt4nVMkkBl5R3WGwL/3qJ5XCuri5cjN6h2bzLNcue8/sj5picgpB7T3dUaIQnq2RdmMkkV0m1cJmg9EsnTk6EUov6Xq3CFHMjrqxnNlsoc5HK1bDM9zXdfxAJv78VhUkVZA9iZH4v0QhPaEgmuUqqhVKyKMi5yBgW61ySIlaWJbu2RShp7rhaf3srYankL2CRWschtJSl3Mkaipz7RulSamVrO2/WG/PYaj1j3fB9EUkfeFQzydeyTCyuozkyyXGJ8Bmeu3Ty8h3vMM9cMqk5hPdy6cTuYal8DULIEcq4Qyyp3iHH98xBNwqrVInzXDURV8zvcI2SuQbxeUd6Tb2j2uc7Bs8HUWNph8CI1Frht3kv51Q1evNkkqvQW8TKW5LxUsqXhTHnjgrVji2usBZKc6QcBJRFLzvhYH3yPmNjWOuaPP6dJREU85Lj6AXGPIx77N2wjkQgGyST3N1aL2SS2onm5p7MXWdJMsm1TKwBAFtLmDsFSkmKSe9G8IPpzCRXmbeq3ukZIYUbY86VgAkeIsF6OZjOJTWrn33rZCIIQgdkkqvMezrEjZ3d5Litem0PO2JfC0EQRCabQ84hHoe2tdZIq/IX6lInCMJZkEnP4aUh5HNu59+rVVKCpaKmBEEQmZzdzjmnjg9ks4V8C5GJIAhDk0nPVsmcxUF4onc5DkEQBJHJhnbEkMScVbKlUtZqYyoIgsikwT3NJVwRCjx6GfZj6KBeEITWeHRuD5zjuvK2Slopc52F+IBACzYP4T3xJ2OLOxQhFF59xQVhHsV9GO7u7rLq2z979qxJTwdLLxN6gOT0AZnrP1LSS2TXuL/FrnFPk13jfiY5fVvo38E7oT/Jzrn/An01+I3c/j0fPnww30fO71h66bAWPXqwxOTy8tJ1Lewc+tx43U/snbTss7NTP5P7yM2OblXN05qdnRMKPPcZSymXEdGD1YO1QOUBgiW4n/3izy69nwKVGW5vbw8WaK47k3MnChFyH9fX100SRktLsi/RJz51T4xdbgvppeYLeWHCOmgezdVC+VoWUE4xx5xQYEsplxYH4Ln3YVW+PbrQUBa8R5S5FSgbxq7G9YirlPvwLhfEPZUo59aNsiDMuYZyvTXrYuOhyhCDkUmukmrRadCCuXLquaHA3hWLeyLpUcB7urm5MRGJ13lY6MPhvTOfU97Wz7aylHojk9BHXhiITHJ32y1KibSItMpVMr1YJrnjaiWyViVgPJXuhw8fsj9/eXnpHljBe6W3hudOOFc5r+3iOvYSeLgeve+7t3sSmTgoqRaWibdyRtHkEpTleVpYJq37ySxh+YQmS1OSqzR4d3NA2c8RCb8JQTG3Hjx4cBDeW2iIlnq3nu2ec11drS0CyCp33vbYl35LeWIjwRR1RJTNLuOEf7+QV41k2jlFxJREse0WiGjLjSrKjVbyiJjbOUftEEk0d/8574QorFSUFr8zN4dT18h5HyXvISeq6/b2Nvt6luik6+vr7OszhrsOorlKr6Norg6iuUp222Sat7BOvMzY/cTJ3r1bXD8trJKSjnPW3+/hrItWu3QOTO38eXepCB52+amdM9YIvzM3h9+9e3dwacXgaZ3M7fR5ptaJqLF7mLJYseZ6jKLCquwp2kxursQizvUVt/C/eywm7r+k/lZKmSxJJrnjyUKyuARRGNamWi1A8ETKbZF6h6lDag5qS5IRUbAx9x//5nV2Mufqan3wjutwat6wiYm9h9b3ZHWHy901AJmA3HOGFi/U4xAeZZKrbFEiczvYVvdpJRPrb/d4+A5hxBQ5yjemyFO7/NKoHwg29R2LQo09U+pasWfyCueOXZ/NVIpMerQCWAM552rCIGRC8qJ33kKtkuaAseTg0BJuiIJrYZnkWkjWMeolnPtUkaeee2qcU+PPtSx9xlMbI8t4x64Xm5sxFxfvzGONpXJLQovr2O+sbZ3E7ku5JwOQScnkaRGWWZM0VkIkTFILmbRYXCjBXBfUliyTORKdetYUkVufEQKKKS1L5BzPNGWdxFxdKUXf0iqBrEJFi9h7WLtlQ8x65b14nmkJDciEl5Sr0Fu4umpCEkvOEvgdyxlCCzLJHceaPIReixqW7rxTz19jfcXuw0reMeU8NX9ic8pynleypo7nXWwOluiDFkh1T4Vo1rw3kYmjQmdH500oNWSCpTGXS8G/8xsW5ZpTisKixHLPbbwVWw8orfWWIpOaPBpvyy025qfzO1Q3nvq+xWU3tQFJuQWP30OMUNe2Tt6/fx/dKOgwvnMyWdvVZQ1JZEGwMGMLmXtlYc31PkmZ3N4ocbVZibb3zPe1iKkl2CDkuLrWskpQzqdkVWJNLY3YczCeV1dX0vq9kkmJacsO31tZ1VgnKJTXr18fSAliCcL/k1dQs9vzzgpG2eSScU0eQs+WiSd6O5DNOYdYi0ymNjGxucjaWTt6inUd23jhBtNhfKdkUroL996xo/xrExg5D4HogtTmWGAteddNYnHk3pd1jKd2oFtFTZRdi5pYc/kbMbdpSUBGCrHckhhZpVxdPZRXgTRiCZZyd3VMJiUJW0xC75fZU5VQxsH7fkqjyayLufdFVnqAmrKCawgh9t2a0Fw2MVPfD5b/mi4uiJcN26nExpd7XXv3D8HGnon7UyHITsnEYp14FhLsyRea0xPFMra5u0+sIuvv9+7iKg31Tc0xq2USOwSvJZPU+KMUW5JJKlgklNqfktSmpQfrhLOoGOGxcWpRzVtk4qTwcncjKEbvuG+ut3boH7sdbzcei6Ek8976+14RQS2RUlBTETxYwZYM8xRS36s9D0y5umJRXB4urhaKv5dKwrESOFh8reubiUyMgOVLFBkhfJ6H8cEXupZ5zaG3984+hCaXkJl1gfTu4uLZYhYBRBJTqrF3Mlcg0qIka99/7ByCe53aRbd2cdVakT3kdbBBUrOswcik1DoJOy5vdxcEtTSh8HssbG+zmUVeYi1Yrb2S/JU1MNePxPpvpWU2cKWmXFwe4ca5BMG6sYatH6Okb8mo1gmFQntsQy0ycbRO2E16x6UvTShYJPye94JE0ZUoeHbZ1kTFnq0SLBIsj9ih91zIdOxgO8zX3LnC+KZ2uF5u29xddGurhHGNnZWcSqqSci/osYHXFmFqjpVqlJPbuCkIzYC8QfMgGlPtGjaDoYEUz9vi3neNGnxNvS+aP7UcpxhoOMUYngrNqpiLOQ2gchoZcc25Blt7spj8LnN5rjFWzvuKNWKaakKW89xTDb0szZ5i85dn9li/qcZj3s2x5hq6zb1HNceqFl8yKenCaHnRpeCZvJUl1yvpRFdKJKX3W/Pellg4rVBCujnzC8WKQg6S280wZ9NSQiZzm6tYZ8NSMoFALSSwK+immiKlpcmE+8zZ/IlMOiKT0sm4q2wxm9NulwVaSyrsUhmjFtaI1arj8zW/19oqaUUmpWPFc5a0us1FzKKpIZO5dxpT0KVkwqbPqz117FogNseWJpNcL4jIZOG2vTl++NJzC85PWvTSwN8eCjvuJ/3hIDU30gSfPZ/fL9SD771FHknwUXPmURqeW+M7L8mq7wkhka5krHhOxtdzfuGH9zgEPwXPlbpPj/MSzvo8c1dS3+mpC6N3FKnQ8Myk1t3VageZslqOXRtBWlkfsV225Xyn5n0tZZV4WyYebstaFyVzJmcXbLVMUjvomIur1DJJ7dAtczHl6oq5I9ewTBCeT5bJQG6uACatZWKmzOYtwXJGknOo7OWe6YFMGCPmZqkLcE6hlJ7TocitZFZKJjHlnDqDKCGTWMCGxcWV4+qaendrkcnchkJkYpMHgVHAfhCbdCTDJWGJwd8vnE2H9OEasDTewn2Iy83qbsOF8uLFi0XDe61o3agLd0+oFh2yosO4Mk64H/mztBLBKXCrTr2vVMLl1HdKPw+YK6cuwdg74Xmt+TKMZSyEe+q+Y/cwdb8530uNzdQaioXzz/2+sIKby8Olkoo4GRnW3Y+HG7B1yLREIpGbqzt3TnBJWPMoegPEWupvz3Ul5ADzXpNeIpEMSybWA/njHXmrXJSlwPPXHB7XPj+EvNShu0QiEZk0RUlmbezgeTQrhfu15N14EoncWxKJZFNk4kEo4V6XDN+1urQ8Qlk9iEQRKhKJZHNk4kUoKOkeScWLRLyIpMa9KJFIJF2TCSAu3kPhBlJZ2/0VCgZ6PZNHro3OSSQSyebJpDbKa0o4m2A3v5S1wu/we57nESR4eVQBsGbWSyQSyXBk0lLpQSyEwnqXZ8GiYqxqQnx3C5S1rz30l0gkklx51EPWJFm7ZK/SWItCbF4gY/k4azm0teX3QiMpMnansnbJgg1NlUIDIO6xZUa2ZwUCMut77p4oCML2sLpl4pmLMaLg1vIsv2+phyaRSCTDu7mm3F7n4qJB8Xue73hEyUkkEskmyOTYSvGsFNuTcEbk3QxMRCKRSEQmC+Rs9OLSalEWRq4tiUQiMskklSV7cIxCImDkcZFIJNuQRfqZeIIIK1oCj9Jylh4TRKm17MuiNqSCICwN9PBx2+pHoz0AYbwQHgqa5lKQirWZTyvQeIe+1xBICEFuiSV+QxAEIbWJfTTqg5ArgrJGgrUCuaxFLBAISh0SQaxdEAVBEEbEoy08RLBWEIgFxgzSsv1mSIKEPGQdCIIgMtkQIJZgsYCQyQ6xhP8u7fEcek6HPuGIyEMQBGHDZDJFLnPK/9T3FyuxIgiCIJwpmeRAVoYgCEIdHmoIBEEQBJGJIAiCIDIRBEEQRCaCIAiCIDIRBEEQRCaCIAiCyEQQBEEQmQiCIAiCyEQQBEEQmQiCIAgiE0EQBGEbuNdp8eLiQgUOBUEQhFmcVl+/RyaCIAiCUG2ZCIIgCIIF/9vL070811AIgiAIRvz6fwEGAIs0HCMzUWd4AAAAAElFTkSuQmCC"},653:function(e,n,t){e.exports=t.p+"static/media/by.04d377d9.png"},654:function(e,n,t){e.exports=t.p+"static/media/by-sa.331e6b36.png"},681:function(e,n,t){},732:function(e,n,t){"use strict";t.r(n);var r=t(17),a=t.n(r),i=t(1),o=t(23),l=t(791),c=t(5),u=t(9),m=t(50),s=t(33),d=t(89),f=t(192),v=function(e,n){var t=n.map((function(e){return e.message})).join("\n");return"Ooops, something went wrong with ".concat(e,": \n").concat(t)},p=function(e){return"".concat(e," success")},b=function(e,n){return Object(s.c)(e,n)},g=function(e){return Object(m.a)({},"MN_CTX_FLD",e)},h=new d.ApolloLink((function(e,n){var t=Object(f.getOperationNameAndType)(e.query),r=Object(u.a)(t,2)[1],a=e.getContext().MN_CTX_FLD,i="query"===r||!(null===a||void 0===a?void 0:a.ctx)&&!(null===a||void 0===a?void 0:a.successMsg);return n(e).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){if(n.errors&&!e.noShowError){var t=e.errorMsg?e.errorMsg(n.errors):v(e.ctx||"this operation",n.errors);b(t,{type:"error"})}else if(!n.errors&&n.data&&!e.noShowSuccess){var r=e.successMsg?e.successMsg(n.data):p(e.ctx||"");b(r,{type:"success"})}return n}}(Object(c.a)({noShowSuccess:i,ctx:e.operationName},e.getContext().MN_CTX_FLD)))})),x=t(0),E=t.n(x),y=t(67),O=t(55),j=t.n(O),k=(t(419),t(39)),w=t(18),C=t(38),I=t(122),T=t(406),F=t(147),S=t(386),P=t(793),M=t(110),_=t(22),L=t(268),U=t(407),A=(t(381),t(7)),R=t.n(A);function B(){var e=Object(i.a)(["\n    fragment SettingsPageMeUser on User {\n  id\n  name\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  location\n  summary\n  displayUsername\n  website\n  extraInfo\n}\n    "]);return B=function(){return e},e}var N=R()(B());function z(){var e=Object(i.a)(["\n    fragment SidebarMeUser on User {\n  id\n  name\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  preferredUsername\n  displayUsername\n}\n    "]);return z=function(){return e},e}function D(){var e=Object(i.a)(["\n    fragment SidebarFollowedCommunity on Community {\n  id\n  isLocal\n  canonicalUrl\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  name\n}\n    "]);return D=function(){return e},e}var $=R()(D()),q=R()(z()),V=t(8);function Q(){var e=Object(i.a)(["\n    mutation meUpdateMyProfile($profile: UpdateProfileInput!, $icon: UploadInput, $image: UploadInput) {\n  updateProfile(profile: $profile, icon: $icon, image: $image) {\n    user {\n      ...SettingsPageMeUser\n    }\n  }\n}\n    ",""]);return Q=function(){return e},e}function W(){var e=Object(i.a)(["\n    mutation meLogout {\n  deleteSession\n}\n    "]);return W=function(){return e},e}function H(){var e=Object(i.a)(["\n    query me {\n  me {\n    ...UseMeData\n  }\n}\n    ",""]);return H=function(){return e},e}function J(){var e=Object(i.a)(["\n    fragment UseMeData on Me {\n  isInstanceAdmin\n  email\n  isConfirmed\n  wantsEmailDigest\n  wantsNotifications\n  user {\n    id\n    ...SettingsPageMeUser\n    ...SidebarMeUser\n  }\n}\n    ","\n",""]);return J=function(){return e},e}var K=R()(J(),N,q),Z=R()(H(),K);var G=R()(W());var Y=R()(Q(),N);function X(){var e=Object(i.a)(["\n    query anonUsernameAvailable($username: String!) {\n  usernameAvailable(username: $username)\n}\n    "]);return X=function(){return e},e}function ee(){var e=Object(i.a)(["\n    mutation anonSignUp($registration: RegistrationInput!) {\n  createUser(user: $registration) {\n    ...UseMeData\n  }\n}\n    ",""]);return ee=function(){return e},e}function ne(){var e=Object(i.a)(["\n    mutation anonConfirmEmail($token: String!) {\n  confirmEmail(token: $token) {\n    ...AuthData\n  }\n}\n    ",""]);return ne=function(){return e},e}function te(){var e=Object(i.a)(["\n    mutation anonLogin($email: String!, $password: String!) {\n  createSession(email: $email, password: $password) {\n    ...AuthData\n  }\n}\n    ",""]);return te=function(){return e},e}function re(){var e=Object(i.a)(["\n    mutation anonResetPasswordRequest($email: String!) {\n  resetPasswordRequest(email: $email)\n}\n    "]);return re=function(){return e},e}function ae(){var e=Object(i.a)(["\n    mutation anonResetPassword($password: String!, $token: String!) {\n  resetPassword(token: $token, password: $password) {\n    ...AuthData\n  }\n}\n    ",""]);return ae=function(){return e},e}function ie(){var e=Object(i.a)(["\n    fragment AuthData on AuthPayload {\n  me {\n    ...UseMeData\n  }\n  token\n}\n    ",""]);return ie=function(){return e},e}var oe=R()(ie(),K),le=R()(ae(),oe);var ce=R()(re());var ue=R()(te(),oe);var me=R()(ne(),oe);var se=R()(ee(),K);var de=R()(X());var fe,ve,pe,be=t(11),ge=t(384),he=t.n(ge),xe=t(385),Ee=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"https://api.reflowproject.eu/api/explore",REACT_APP_SENTRY_API_KEY:"https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849"}).REACT_APP_PHOENIX_SOCKET_ENDPOINT,ye="https://api.reflowproject.eu/api/explore",Oe="https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849",je=parseInt("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"https://api.reflowproject.eu/api/explore",REACT_APP_SENTRY_API_KEY:"https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849"}).REACT_APP_DEFAULT_PAGE_SIZE))||15,ke=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"https://api.reflowproject.eu/api/explore",REACT_APP_SENTRY_API_KEY:"https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849"}).REACT_APP_INVITE_ONLY_TEXT||"Please note, signups on this instance are currently invite-only.",we="https://raw.githubusercontent.com/reflow-project/zenpub-client/main/src/static/img/weloop_logo_128x128-01.png",Ce="This is a test instance. Your data is not secure or private.",Ie="This site uses cookies.",Te="Information you post on this site may be publicly available and will be copied onto other servers in the federated network.",Fe=!1,Se="https://moodle.net/terms/users.md",Pe="https://moodle.net/terms/cookies.md",Me="https://moodle.net/terms/indexing.md",_e=!0,Le="https://moodle.net/terms/privacy.md",Ue="This site uses cookies and follows GDPR rules. Contact the instance operators if you want your data exported or deleted.",Ae=[{code:"en_GB",desc:"English, British",rtl:!1},{code:"en_US",desc:"English, USA",rtl:!1},{code:"es_MX",desc:"Espa\xf1ol, M\xe9jico",rtl:!1},{code:"es_ES",desc:"Espa\xf1ol, Espa\xf1a",rtl:!1},{code:"fr_FR",desc:"Fran\xe7ais, France",rtl:!1},{code:"eu",desc:"Euskara",rtl:!1},{code:"ar_SA",desc:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629, \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629",rtl:!0}],Re=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"https://api.reflowproject.eu/api/explore",REACT_APP_SENTRY_API_KEY:"https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849"}).REACT_APP_MOTHERSHIP_API_ID,Be=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"https://api.reflowproject.eu/api/explore",REACT_APP_SENTRY_API_KEY:"https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849"}).REACT_APP_MOTHERSHIP_API_KEY,Ne=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"https://api.reflowproject.eu/api/explore",REACT_APP_SENTRY_API_KEY:"https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849"}).REACT_APP_MOTHERSHIP_ENV,ze=Re&&Be?{appId:Re,apiKey:Be,indexName:Ne}:null,De=!Re||!Be,$e=/^[a-zA-Z][a-zA-Z0-9-]{2,}$/,qe=/^.+\..+$/,Ve=["CC0-1.0","CC-BY-4.0","CC-BY-SA-4.0"],Qe="rgb(245, 246, 247)",We="#fff",He="#05244F",Je="#02e379",Ke="#D1D3D8",Ze="#2db783",Ge="#ff5a5f",Ye="#ffebb3",Xe="#FFFFFF",en="#F8F8F8",nn="#F3F3F3",tn="#EEEEEE",rn="#D1D3D8",an="#999999",on="#666666",ln="#444444",cn="#333333",un="1px solid #F3F3F3",mn={primary:'"Barlow", "Open Sans", sans-serif'},sn={s1:"12px",s2:"14px",s3:"16px",m1:"20px",m2:"24px",m3:"28px",l1:"32px",l2:"40px",l3:"48px",code:"90px"},dn=t(368).GraphQLError,fn=t(89),vn=fn.ApolloLink,pn=fn.Observable,bn=t(734),gn=bn.selectURI,hn=bn.selectHttpOptionsAndBody,xn=bn.fallbackHttpConfig,En=bn.serializeFetchParameter,yn=bn.createSignalIfSupported,On=bn.parseAndCheckHttpResponse,jn=t(733).extractFiles,kn=function(e,n,t){var r,a=n.trim().split(".");for(r=0;r<a.length-1;r++)e=e[a[r]];e[a[r]]=t},wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.uri,t=void 0===n?"/graphql":n,r=e.fetch,a=void 0===r?fetch:r,i=e.fetchOptions,o=e.credentials,l=e.headers,u=e.includeExtensions,m={http:{includeExtensions:u},options:i,credentials:o,headers:l};return new vn((function(e){var n=gn(e,t),r=e.getContext(),i=r.clientAwareness,o=(i=void 0===i?{}:i).name,l=i.version,u=r.headers,s={http:r.http,options:r.fetchOptions,credentials:r.credentials,headers:Object(c.a)(Object(c.a)(Object(c.a)({},o&&{"apollographql-client-name":o}),l&&{"apollographql-client-version":l}),u)},d=hn(e,xn,m,s),f=d.options,v=d.body,p=jn(v),b=p.clone,g=p.files;if(g.size){delete f.headers["content-type"];var h=new FormData;h.append("operationName",b.operationName),h.append("query",b.query);var x=0;g.forEach((function(e){e.forEach((function(e){return kn(b,e,String(++x))}))})),h.append("variables",JSON.stringify(b.variables)),x=0,g.forEach((function(e,n){h.append(++x,n,n.name)})),f.body=h}else f.body=En(b,"Payload");return new pn((function(t){var r;if(!f.signal){var i=yn().controller;i&&(r=i,f.signal=r.signal)}return a(n,f).then((function(n){return e.setContext({response:n}),n})).then(On(e)).then((function(e){t.next(e),t.complete()})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&t.next(e.result),t.next({errors:[new dn(String(e))]}))})),function(){r&&r.abort()}}))}))};!function(e){e.Created="CREATED",e.Updated="UPDATED"}(fe||(fe={})),function(e){e.Organization="Organization",e.Person="Person"}(ve||(ve={})),function(e){e.Day="day",e.Hour="hour",e.Minute="minute",e.Month="month",e.Second="second",e.Week="week",e.Year="year"}(pe||(pe={}));var Cn={__schema:{types:[{kind:"UNION",name:"AnyContext",possibleTypes:[{name:"Category"},{name:"Collection"},{name:"Comment"},{name:"Community"},{name:"Flag"},{name:"Follow"},{name:"Intent"},{name:"Like"},{name:"Organisation"},{name:"Resource"},{name:"SpatialThing"},{name:"Taggable"},{name:"User"}]},{kind:"UNION",name:"AccountingScope",possibleTypes:[{name:"Category"},{name:"Collection"},{name:"Community"},{name:"Organisation"},{name:"Organization"},{name:"Person"},{name:"Taggable"},{name:"User"}]},{kind:"INTERFACE",name:"Agent",possibleTypes:[{name:"Organization"},{name:"Person"}]},{kind:"UNION",name:"EventOrCommitment",possibleTypes:[{name:"Commitment"},{name:"EconomicEvent"}]},{kind:"UNION",name:"ProductionFlowItem",possibleTypes:[{name:"EconomicResource"},{name:"Process"}]}]}};function In(e){return Tn.apply(this,arguments)}function Tn(){return(Tn=Object(o.a)(a.a.mark((function e(n){var t,r,i,o,l,u,m,s,v,p,b,g,h,x,E,y,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.localKVStore,r=n.appLinks,i=t.get("AUTH_TOKEN"),o=new S.b({introspectionQueryResultData:Cn}),l=new P.a({fragmentMatcher:o,cacheRedirects:{Query:{activity:function(e,n,t){return(0,t.getCacheKey)({__typename:"Activity",id:n.activityId})},collection:function(e,n,t){return(0,t.getCacheKey)({__typename:"Collection",id:n.collectionId})},community:function(e,n,t){return(0,t.getCacheKey)({__typename:"Community",id:n.communityId})},comment:function(e,n,t){return(0,t.getCacheKey)({__typename:"Comment",id:n.commentId})},user:function(e,n,t){return(0,t.getCacheKey)({__typename:"User",id:n.userId})},thread:function(e,n,t){return(0,t.getCacheKey)({__typename:"Thread",id:n.threadId})},resource:function(e,n,t){return(0,t.getCacheKey)({__typename:"Resource",id:n.resourceId})}}},dataIdFromObject:function(e){switch(e.__typename){case"User":return"userId"in e?e.userId:e.id;default:return Object(P.b)(e)}}}),u=function(e){e?(i=e,t.set("AUTH_TOKEN",e)):m()},m=function(){i=void 0,t.del("AUTH_TOKEN")},s=new d.ApolloLink((function(e,n){var t=e.operationName;return"meLogout"===t&&m(),n(e).map((function(e){var n,r,a,i,o,l;"anonLogin"!==t&&"anonResetPassword"!==t&&"anonConfirmEmail"!==t||u((null===(n=e.data)||void 0===n||null===(r=n.createSession)||void 0===r?void 0:r.token)||(null===(a=e.data)||void 0===a||null===(i=a.confirmEmail)||void 0===i?void 0:i.token)||(null===(o=e.data)||void 0===o||null===(l=o.resetPassword)||void 0===l?void 0:l.token));return e}))})),v=Object(L.a)((function(e,n){var t=n.headers;return{headers:Object(c.a)(Object(c.a)({},t),{},{authorization:i?"Bearer ".concat(i):null})}})),p=Object(U.a)((function(e){var n=e.operation,t=e.response,r=e.graphQLErrors,a=e.networkError;if(console.error("errorLink on operation",e),a){var i="statusCode"in a?he.a.getStatusText(a.statusCode):a.message;return _.a.of({errors:[new be.a("network error:".concat(i))]})}if(r){var o=r.find((function(e){return/Failed to fetch/gi.test(e.message)||/JSON.parse/gi.test(e.message)||/ServerParseError/gi.test(e.message)}));return _.a.of({errors:o?[new be.a("Unexpected error")]:r})}if(null===t||void 0===t?void 0:t.errors)return _.a.of({data:t.data,errors:t.errors});var l=JSON.stringify(t,null,2),c="unknown error:\noperation:".concat(n,"\nresponse:").concat(l);return _.a.of({errors:[new be.a(c)]})})),b=Object(L.a)((function(e,n){var t=n.headers;return Object(c.a)(Object(c.a)({},n),{},{clientAwareness:void 0,headers:Object(c.a)({},t)})})),g=["anonSignUp","anonLogin","anonConfirmEmail","anonResetPassword","anonResetPasswordRequest"],h=new d.ApolloLink((function(e,n){if(!i&&("mutation"===Object(f.getOpType)(e)&&!g.includes(e.operationName)))return _.a.of({errors:[new be.a("You should log in for performing this operation!")]});return n(e)})),x=d.ApolloLink.from([null].concat(Object(C.a)(r),[h,p,v,b,s,wn({uri:ye})]).filter(Boolean)),E=Object(T.a)(I.b(new xe.Socket(Ee))),y=d.ApolloLink.split((function(e){return Object(F.c)(e.query)}),E,x),O=new M.a({cache:l,link:y,defaultOptions:{watchQuery:{fetchPolicy:"cache-first",errorPolicy:"ignore"},query:{fetchPolicy:"cache-first",errorPolicy:"all"},mutate:{errorPolicy:"all"}}}),e.abrupt("return",{client:O});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fn={breakpoints:["40em","52em","64em"],colors:{app:Qe,appInverse:We,primary:He,secondary:Je,tertiary:Ke,positive:Ze,negative:Ge,warning:Ye,lightest:Xe,lighter:en,light:nn,mediumlight:tn,medium:rn,mediumdark:an,dark:on,darker:ln,darkest:cn,border:un},variants:{negative:{bg:Ge,color:nn},positive:{bg:Ze,color:nn},warning:{bg:Ye,color:ln},avatar:{borderRadius:"100% !important"}},text:{subhead:{fontFamily:mn.primary,fontSize:sn.s3,color:on,textTransform:"capitalize",letterSpacing:"0.5px",fontWeight:"600"},suptitle:{fontFamily:mn.primary,fontSize:sn.s1,color:on,textTransform:"uppercase",letterSpacing:"1px",fontWeight:"700"},link:{fontFamily:mn.primary,fontSize:sn.s2,color:on,letterSpacing:".5px",fontWeight:"600"},text:{fontFamily:mn.primary,fontSize:sn.s2,color:on,letterSpacing:".5px",fontWeight:"500"},heading:{fontFamily:mn.primary,fontSize:sn.m3,color:on,letterSpacing:"1px",fontWeight:"800"}},buttons:{primary:{fontWeight:"600",height:"40px",px:4,backgroundColor:He,borderRadius:"4px",fontSize:sn.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},danger:{fontWeight:"600",height:"40px",px:4,backgroundColor:Ge,color:en,borderRadius:"4px",fontSize:sn.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px"},outline:{fontWeight:"600",height:"40px",px:4,backgroundColor:"transparent",borderRadius:"4px",fontSize:sn.s2,cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px",color:on,border:"1px solid ".concat(He)}},space:["0px","4px","8px","16px","32px","64px","128px","256px"],fontFamily:mn.primary},Sn=function(e){var n=e.children,t=e.theme,r=void 0===t?Fn:t;return E.a.createElement(k.ThemeProvider,{theme:r},n)},Pn=t(41),Mn=k.default,_n=(k.css,k.createGlobalStyle,k.keyframes,k.ThemeProvider,k.withTheme,Mn),Ln=t(2);function Un(){var e=Object(i.a)(["\n  border-bottom: ",";\n  height: 50px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 8px;\n  background: ",";\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  a {\n    display: flex;\n    flex: 1;\n    text-decoration: none;\n  }\n"]);return Un=function(){return e},e}function An(){var e=Object(i.a)(["\n  color: ",";\n  text-transform: capitalize;\n"]);return An=function(){return e},e}function Rn(){var e=Object(i.a)(["\n  flex: auto;\n  align-items: center;\n"]);return Rn=function(){return e},e}var Bn=function(e){var n=e.name;return E.a.createElement(Dn,null,E.a.createElement(Nn,null,E.a.createElement(zn,{ml:2,variant:"suptitle"},n)))},Nn=_n(Ln.Flex)(Rn()),zn=_n(Ln.Text)(An(),(function(e){return e.theme.colors.darker})),Dn=_n(Ln.Flex)(Un(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}));function $n(){var e=Object(i.a)(["\ncolor: ","\nfont-size: ",";\na {\n  color: ","\n  text-decoration: none;\n}\n  "]);return $n=function(){return e},e}function qn(){var e=Object(i.a)(["\n  padding: 16px;\n"]);return qn=function(){return e},e}function Vn(){var e=Object(i.a)(["\n  text-transform: capitalize;\n  border-bottom: ",";\n  padding: 16px;\n  color: ",";\n  font-size: ",";\n  font-weight: 600;\n"]);return Vn=function(){return e},e}function Qn(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-bottom: 8px !important;\n"]);return Qn=function(){return e},e}function Wn(){var e=Object(i.a)(["\n  position: sticky;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n"]);return Wn=function(){return e},e}function Hn(){var e=Object(i.a)(["\n   display: none;\n  "]);return Hn=function(){return e},e}function Jn(){var e=Object(i.a)(["\n  width: 290px;\n"]);return Jn=function(){return e},e}function Kn(){var e=Object(i.a)(["\n  width: 240px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-left: 8px;\n  font-family: ",";\n  &.extra {\n    width: 100%;\n  }\n  ",";\n  ",";\n"]);return Kn=function(){return e},e}var Zn=_n(Ln.Flex)(Kn(),(function(e){return e.theme.fontFamily}),w.a.lessThan("1095px")(Jn()),w.a.lessThan("1005px")(Hn())),Gn=(_n(Ln.Flex)(Wn()),_n(Ln.Box)(Qn(),(function(e){return e.theme.colors.appInverse}))),Yn=_n(Ln.Text)(Vn(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.darker}),sn.s1),Xn=_n(Ln.Box)(qn()),et=_n(Ln.Text)($n(),(function(e){return e.theme.colors.dark}),sn.s2,(function(e){return e.theme.colors.dark})),nt=t(4);t(503);function tt(){var e=Object(i.a)(["\n  background-color: ",";\n"]);return tt=function(){return e},e}var rt=_n(Ln.Box)(tt(),(function(e){return"primary"===e.color?"#ffffffeb":e.theme.colors.primary}));var at=function(e){var n=Object.assign({},e);return x.createElement("div",Object.assign({className:"spinner"},n),x.createElement(rt,{color:n.variant,className:"bounce1"}),x.createElement(rt,{color:n.variant,className:"bounce2"}),x.createElement(rt,{color:n.variant,className:"bounce3"}))},it=t(21);function ot(){var e=Object(i.a)(["\n  ",";\n  width: ",";\n  border-radius: ",";\n  padding: ",";\n  opacity: ",";\n  cursor: ",";\n  &.show-more {\n    padding: 3px 8px;\n    background: ",";\n    color: ",";\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    \n    svg {\n      stroke: ",";\n      margin-right: 10px;\n    }\n  }\n  &:hover && not:['disabled'] {\n    background: ","\n"]);return ot=function(){return e},e}var lt=_n(Ln.Button)(ot(),Object(it.e)("background, 0.2s"),(function(e){return!0===e.isIcon?"40px":"auto"}),(function(e){return!0===e.isIcon?"100%":"4px"}),(function(e){return!0===e.isIcon?"0px":"auto"}),(function(e){return!0===e.disabled?"0.7":"1"}),(function(e){return!0===e.disabled?"default":"pointer"}),(function(e){return e.theme.colors.tertiary}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary}),(function(e){switch(e.variant){case"primary":case"danger":return Object(it.b)("0.1",e.theme.colors.primary);default:Object(it.d)("0.3",e.theme.colors.primary)}})),ct=function(e){return E.a.createElement(lt,Object.assign({},e,{className:"show-more"===e.variant?"show-more":"",isSubmitting:e.isSubmitting,disabled:e.isDisabled,isIcon:e.isIcon,variant:e.variant}),e.isSubmitting?E.a.createElement(at,{variant:e.variant}):e.children)};function ut(){var e=Object(i.a)(["\n  background: ",";\n  button {\n    width: 100%;\n  }\n"]);return ut=function(){return e},e}var mt=function(e){return E.a.createElement(st,{p:2},E.a.createElement(ct,{isSubmitting:e.LoadMoreFormik.isSubmitting,isDisabled:e.LoadMoreFormik.isSubmitting,onClick:e.LoadMoreFormik.submitForm,variant:"outline"},E.a.createElement(nt.Trans,{id:"Load more"})))},st=_n(Ln.Box)(ut(),(function(e){return e.theme.colors.appInverse}));function dt(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  column-gap: 16px;\n  row-gap: 16px;\n  margin: 16px;\n  margin-bottom: 24px !important;\n"]);return dt=function(){return e},e}function ft(){var e=Object(i.a)(["\n  border-bottom: ",";\n"]);return ft=function(){return e},e}function vt(){var e=Object(i.a)(["\n  background: ",";\n\n  &.replies > div {\n    margin-bottom: 0;\n    border-bottom: ",";\n  }\n  > div {\n    &:last-of-type {\n      margin-bottom: 4px;\n      border-bottom: 0;\n    }\n  }\n"]);return vt=function(){return e},e}function pt(){var e=Object(i.a)(["\n  border-bottom: ",";\n  border-top: ",";\n  height: 60px;\n  // margin-top: 16px;\n  padding: 12px 8px;\n  background: ",";\n  a {\n    font-weight: 600;\n    text-decoration: none;\n    margin-right: 8px;\n    color: ",";\n    letterspacing: 1px;\n    padding: 0px 8px;\n    line-height: 34px;\n    white-space: nowrap;\n    &.active,\n    &:hover {\n      color: ",";\n      background: ",";\n      border-radius: 4px;\n    }\n  }\n"]);return pt=function(){return e},e}function bt(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  & ul {\n    display: block;\n\n    & li {\n      display: inline-block;\n\n      & h5 {\n        font-weight: 500;\n      }\n    }\n  }\n  & h4 {\n    margin: 0;\n    font-weight: 400 !important;\n    color: #151b26;\n    line-height: 40px;\n  }\n"]);return bt=function(){return e},e}function gt(){var e=Object(i.a)(["\n  width: 100%;\n  margin: 0 auto;\n  height: 100%;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  display: flex;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  // background: ",";\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n"]);return gt=function(){return e},e}function ht(){var e=Object(i.a)(["\n  //   width: 100%;\n  // "]);return ht=function(){return e},e}function xt(){var e=Object(i.a)(["\n  width: 600px;\n  align-items: flex-start;\n  flex-shrink: 1;\n  flex-grow: 1;\n  flex-basis: auto;\n  flex-direction: column;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  // ",";\n"]);return xt=function(){return e},e}function Et(){var e=Object(i.a)(["\n  align-items: stretch;\n  flex-grow: 1;\n  flex-direction: row;\n  width: 100%;\n"]);return Et=function(){return e},e}function yt(){var e=Object(i.a)(["\n  > div:last-of-type {\n    border-bottom: none;\n  }\n"]);return yt=function(){return e},e}var Ot=_n(Ln.Box)(yt()),jt=_n(Ln.Flex)(Et()),kt=_n(Ln.Flex)(xt(),w.a.lessThan("large")(ht())),wt=_n(Ln.Flex)(gt(),(function(e){return e.theme.colors.appInverse})),Ct=_n(Ln.Flex)(bt()),It=_n(Ln.Flex)(pt(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.darker}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),Tt=_n(Ln.Box)(vt(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),Ft=_n(Ln.Box)(ft(),(function(e){return e.theme.colors.border})),St=_n(Ln.Box)(dt()),Pt=function(e){var n=e.CollectionsBoxes,t=e.LoadMoreFormik;return x.createElement(x.Fragment,null,x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,x.createElement(Bn,{name:"All Collections"}),x.createElement(Tt,null,x.createElement(St,null,n)),t&&x.createElement(mt,{LoadMoreFormik:t})))),x.createElement(Zn,null)))};function Mt(){var e=Object(i.a)(["\n    fragment CommunityPreview on Community {\n  ...CommunityInfo\n  id\n  summary\n  myFlag {\n    id\n  }\n  collectionCount\n  followerCount\n  threads {\n    totalCount\n  }\n}\n    ",""]);return Mt=function(){return e},e}function _t(){var e=Object(i.a)(["\n    fragment CommunityInfo on Community {\n  id\n  name\n  creator {\n    id\n  }\n  icon {\n    id\n    url\n  }\n  isLocal\n  myFollow {\n    id\n  }\n  canonicalUrl\n  displayUsername\n  preferredUsername\n}\n    "]);return _t=function(){return e},e}var Lt=R()(_t()),Ut=R()(Mt(),Lt);function At(){var e=Object(i.a)(["\n    fragment CollectionPreview on Collection {\n  id\n  icon {\n    id\n    url\n  }\n  isLocal\n  canonicalUrl\n  name\n  summary\n  resourceCount\n  displayUsername\n  myFlag {\n    id\n  }\n  myFollow {\n    id\n  }\n  preferredUsername\n  community {\n    id\n    ...CommunityInfo\n  }\n}\n    ",""]);return At=function(){return e},e}var Rt=R()(At(),Lt);function Bt(){var e=Object(i.a)(["\n    fragment FullPageInfo on PageInfo {\n  endCursor\n  hasNextPage\n  hasPreviousPage\n  startCursor\n}\n    "]);return Bt=function(){return e},e}var Nt=R()(Bt());function zt(){var e=Object(i.a)(['\n    query allCollections($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collections(limit: $limit, before: $before, after: $after) @connection(key: "allCollections") {\n    edges {\n      ...CollectionPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return zt=function(){return e},e}var Dt=R()(zt(),Rt,Nt);var $t=function(e,n){return{query:Dt,variables:e,context:n}},qt=t(19),Vt=function(e,n){var t=Object(x.useMemo)((function(){return Qt(e,n)}),[e,n]),r=function(e){var n=Object(qt.a)({initialValues:{},onSubmit:Object(x.useCallback)((function(){return(null===e||void 0===e?void 0:e.ready)?e.next():void 0}),[e])}),t=Object(qt.a)({initialValues:{},onSubmit:Object(x.useCallback)((function(){return(null===e||void 0===e?void 0:e.ready)?e.previous():void 0}),[e])});return Object(x.useMemo)((function(){return[e.ready&&e.pageInfo.hasNextPage?n:null,e.ready&&e.pageInfo.hasPreviousPage?t:null]}),[n,t,e])}(t);return Object(x.useMemo)((function(){return Object(c.a)(Object(c.a)({},t),{},{formiks:r})}),[r,t])},Qt=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(!e)return{ready:!1,edges:[]};var t=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pageInfo.hasNextPage&&n({cursor:{after:e.pageInfo.endCursor,before:void 0},update:Wt,isNext:!0}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.pageInfo.hasPreviousPage&&n({cursor:{before:e.pageInfo.startCursor,after:void 0},update:Ht,isNext:!1}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=Object(c.a)(Object(c.a)({},e),{},{next:t,previous:r,ready:!!e});return i},Wt=function(e){var n=e.fetched,t=e.prev;return Object(c.a)(Object(c.a)({},n),{},{edges:t.edges.concat(n.edges),totalCount:n.totalCount,pageInfo:Object(c.a)(Object(c.a)({},t.pageInfo),{},{endCursor:n.pageInfo.endCursor,hasNextPage:n.pageInfo.hasNextPage})})},Ht=function(e){var n=e.fetched,t=e.prev;return Object(c.a)(Object(c.a)({},n),{},{edges:n.edges.concat(t.edges),totalCount:n.totalCount,pageInfo:Object(c.a)(Object(c.a)({},t.pageInfo),{},{startCursor:n.pageInfo.startCursor,hasPreviousPage:n.pageInfo.hasPreviousPage})})},Jt=function(){var e,n,t=(n={variables:{limit:je}},V.d(Dt,n)),r=Vt(null===(e=t.data)||void 0===e?void 0:e.collections,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.collections)&&e.collections?Object(c.a)(Object(c.a)({},t),{},{collections:r({prev:e.collections,fetched:t.collections})}):e}})}));return Object(x.useMemo)((function(){return{allCollectionsPage:r}}),[r])},Kt=(t(751),t(16));function Zt(){var e=Object(i.a)(["\n  text-decoration: none;\n"]);return Zt=function(){return e},e}var Gt=function(e){var n=e.link,t=e.children;return n.external?E.a.createElement("a",{href:n.url,rel:"noopener noreferrer",target:"_blank"},t):E.a.createElement(Yt,{to:n.url},t)},Yt=_n(Kt.b)(Zt());function Xt(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return Xt=function(){return e},e}function er(){var e=Object(i.a)(["\n  border-radius: 4px;\n  border: ",";\n  background: ",";\n  text-decoration: none;\n  position: relative;\n  &:hover {\n    background: ",";\n  }\n  * {\n    text-decoration: none !important;\n    &:hover {\n      text-decoration: none !important;\n    }\n  }\n"]);return er=function(){return e},e}function nr(){var e=Object(i.a)(["\n  align-items: center;\n\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 2px 8px;\n  text-align: center;\n  font-size: ",";\n\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    background: ",";\n    border-color: ",";\n    div {\n      color: ",";\n    }\n  }\n"]);return nr=function(){return e},e}function tr(){var e=Object(i.a)(['\n  border-radius: 4px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  min-width: 48px;\n  height: 48px;\n  padding: 15%;\n  background-color: transparent;\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n']);return tr=function(){return e},e}function rr(){var e=Object(i.a)(["\n  color: ",";\n"]);return rr=function(){return e},e}function ar(){var e=Object(i.a)(["\n  color: ",";\n  svg {\n    margin: 0;\n  }\n"]);return ar=function(){return e},e}function ir(){var e=Object(i.a)(["\n  // color: red;\n  // a {\n  //   position: absolute;\n  //   top: 0;\n  //   left: 0;\n  //   right: 0;\n  //   bottom: 0;\n  //   z-index: 1;\n  // }\n"]);return ir=function(){return e},e}function or(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 600;\n"]);return or=function(){return e},e}function lr(){var e=Object(i.a)([""]);return lr=function(){return e},e}function cr(){var e=Object(i.a)(["\n  flex: 1;\n"]);return cr=function(){return e},e}function ur(){var e=Object(i.a)(["\n  margin: 8px;\n"]);return ur=function(){return e},e}function mr(){var e=Object(i.a)(["\n  height: 150px;\n  background: ",';\n  border-radius: 4px;\n  grid-area: big;\n\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n']);return mr=function(){return e},e}function sr(){var e=Object(i.a)(['\n  display: grid;\n  // grid-template-rows: 150px 90px;\n  grid-template-rows: 150px;\n  grid-template-areas: \'big big big\';\n  // grid-template-areas: "big big big"\n  //                       "small small small ";\n  column-gap: 4px;\n  row-gap: 4px;\n']);return sr=function(){return e},e}function dr(){var e=Object(i.a)(["\n  max-width: 300px;\n  position: relative;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n  padding: 8px;\n  border-radius: 4px;\n  border: 1px solid #ececec;\n"]);return dr=function(){return e},e}function fr(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n  word-break: break-all;\n  margin-top: 4px;\n  font-size: ",";\n  ",";\n"]);return fr=function(){return e},e}function vr(){var e=Object(i.a)(["\n  color: ",";\n  align-items: center;\n  position: relative;\n  z-index: 99999999;\n"]);return vr=function(){return e},e}function pr(){var e=Object(i.a)(["\n  padding: 8px;\n  background-color: ",";\n  font-weight: 700;\n  text-transform: uppercase;\n  color: ",";\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n"]);return pr=function(){return e},e}var br=function(e){var n=e.link,t=e.icon,r=e.name,a=(e.summary,e.displayUsername,e.totalResources),i=e.isFollowing,o=e.toggleFollowFormik,l=e.hideActions,c=e.isSearch;return x.createElement(Er,null,c&&x.createElement(gr,{variant:"text"},x.createElement(nt.Trans,{id:"Collection"})),x.createElement(Ir,{link:n},x.createElement(yr,null,x.createElement(Or,{src:t})),x.createElement(jr,null,x.createElement(xr,null,r),x.createElement(hr,null,x.createElement(kr,{variant:"text"},a||0," ",x.createElement(nt.Trans,{id:"Resources"})),x.createElement(wr,null,l?null:x.createElement(Tr,{bordered:!0,isFollowing:!!i,onClick:function(e){e.preventDefault(),o.submitForm()}},x.createElement(Cr,{ml:1,variant:"suptitle",sx:{textTransform:"capitalize"}},i?x.createElement(nt.Trans,{id:"Following"}):x.createElement(nt.Trans,{id:"follow"}))))))))},gr=_n(Ln.Text)(pr(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.dark})),hr=_n(Ln.Flex)(vr(),(function(e){return e.theme.colors.mediumdark})),xr=_n(Ln.Heading)(fr(),(function(e){return e.theme.colors.darker}),sn.m1,Object(it.c)("250px")),Er=_n(Ln.Box)(dr()),yr=_n(Ln.Box)(sr()),Or=_n(Ln.Box)(mr(),(function(e){return e.theme.colors.medium}),(function(e){return e.src})),jr=_n(Ln.Box)(ur()),kr=_n(Ln.Text)(cr()),wr=_n(Ln.Box)(lr()),Cr=_n(Ln.Text)(or(),(function(e){return e.theme.colors.darker})),Ir=_n(Gt)(ir()),Tr=(_n(Ln.Flex)(ar(),(function(e){return e.theme.colors.dark})),_n(Ln.Text)(rr(),(function(e){return e.theme.colors.dark})),_n(Ln.Box)(tr(),(function(e){return e.src})),_n(Ln.Flex)(nr(),(function(e){return e.isFollowing?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.isFollowing?e.theme.colors.lighter:e.theme.colors.darker}),(function(e){return e.isFollowing?e.theme.colors.primary:"transparent"}),(function(e){return e.isFollowing?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),sn.s1,(function(e){return e.isFollowing?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.isFollowing?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.theme.colors.lightest})));_n(Ln.Flex)(er(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),(function(e){return Object(it.b)("0.05",e.theme.colors.appInverse)})),_n(Ln.Box)(Xt());function Fr(){var e=Object(i.a)(['\n    query myCollectionFollows {\n  me @connection(key: "myCollectionFollows") {\n    ...MyCollectionFollowsData\n  }\n}\n    ',""]);return Fr=function(){return e},e}function Sr(){var e=Object(i.a)(["\n    fragment MyCollectionFollowsData on Me {\n  user {\n    id\n    collectionFollows {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Collection {\n            ...MyFollowedCollectionData\n          }\n        }\n      }\n    }\n  }\n}\n    ","\n",""]);return Sr=function(){return e},e}function Pr(){var e=Object(i.a)(["\n    fragment MyFollowedCollectionData on Collection {\n  ...CollectionPreview\n}\n    ",""]);return Pr=function(){return e},e}var Mr=R()(Pr(),Rt),_r=R()(Sr(),Nt,Mr),Lr=R()(Fr(),_r);var Ur=function(e,n){return{query:Lr,variables:e,context:n}};function Ar(){var e=Object(i.a)(['\n    query myCommunityFollows($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  me @connection(key: "myCommunityFollows") {\n    ...MyCommunityFollowsData\n  }\n}\n    ',""]);return Ar=function(){return e},e}function Rr(){var e=Object(i.a)(["\n    fragment MyCommunityFollowsData on Me {\n  user {\n    id\n    communityFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Community {\n            ...MyFollowedCommunityData\n          }\n        }\n      }\n    }\n  }\n}\n    ","\n",""]);return Rr=function(){return e},e}function Br(){var e=Object(i.a)(["\n    fragment MyFollowedCommunityData on Community {\n  ...SidebarFollowedCommunity\n  ...CommunityPreview\n}\n    ","\n",""]);return Br=function(){return e},e}var Nr=R()(Br(),$,Ut),zr=R()(Rr(),Nt,Nr),Dr=R()(Ar(),zr);var $r=function(e,n){return{query:Dr,variables:e,context:n}},qr=function(e){return"#"===e};function Vr(){var e=Object(i.a)(["\n    mutation unfollow($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Follow {\n      context {\n        ... on Collection {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on Community {\n          id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n        ... on User {\n          userId: id\n          myFollow {\n            id\n          }\n          followerCount\n        }\n      }\n    }\n  }\n}\n    "]);return Vr=function(){return e},e}function Qr(){var e=Object(i.a)(["\n    mutation follow($contextId: String!) {\n  createFollow(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on Community {\n        id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n      ... on User {\n        userId: id\n        myFollow {\n          id\n        }\n        followerCount\n      }\n    }\n  }\n}\n    "]);return Qr=function(){return e},e}var Wr=R()(Qr());var Hr=R()(Vr());function Jr(){var e=Object(i.a)(["\n    fragment UserPreview on User {\n  icon {\n    id\n    url\n  }\n  image {\n    id\n    url\n  }\n  userId: id\n  userName: name\n  displayUsername\n  summary\n  canonicalUrl\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n}\n    "]);return Jr=function(){return e},e}var Kr=R()(Jr());function Zr(){var e=Object(i.a)(['\n    query collectionFollowers($collectionId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collection(collectionId: $collectionId) @connection(key: "collectionFollowers", filter: ["collectionId"]) {\n    id\n    followers(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        creator {\n          ...CollectionFollower\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return Zr=function(){return e},e}function Gr(){var e=Object(i.a)(["\n    fragment CollectionFollower on User {\n  ...UserPreview\n}\n    ",""]);return Gr=function(){return e},e}var Yr=R()(Gr(),Kr),Xr=R()(Zr(),Nt,Yr);var ea=function(e,n){return{query:Xr,variables:e,context:n}};function na(){var e=Object(i.a)(['\n    query communityFollowers($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityFollowers", filter: ["communityId"]) {\n    id\n    followers(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        creator {\n          ...CommunityFollower\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return na=function(){return e},e}function ta(){var e=Object(i.a)(["\n    fragment CommunityFollower on User {\n  ...UserPreview\n}\n    ",""]);return ta=function(){return e},e}var ra=R()(ta(),Kr),aa=R()(na(),Nt,ra);var ia=function(e,n){return{query:aa,variables:e,context:n}},oa=function(e,n){if(!!!e.extraInfo)return Object(c.a)(Object(c.a)({},e),{},{extraInfo:void 0});var t=null===n||void 0===n?void 0:n.extraInfo,r=JSON.stringify(Object(c.a)(Object(c.a)({},t),e.extraInfo));return Object(c.a)(Object(c.a)({},e),{},{extraInfo:r})},la=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,ca=function(e){return"string"===typeof e&&la.test(e)},ua=function(e,n){return!e||ca(e)&&e===n?void 0:e instanceof File||ca(e)?ma(e):void 0},ma=function(e){return ca(e)?{url:e}:{upload:e}},sa=function(){var e,n,t=(n={context:g({noShowError:!0})},V.d(Z,n)),r=function(e){return V.c(G,e)}(),i=Object(u.a)(r,2),l=i[0],c=i[1],m=function(e){return V.c(Y,e)}(),s=Object(u.a)(m,2),d=s[0],f=s[1],v=Object(Pn.h)().push,p=null===(e=t.data)||void 0===e?void 0:e.me,b=t.loading,h=!!(null===p||void 0===p?void 0:p.isInstanceAdmin),E=Object(x.useCallback)(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.loading&&(null===p||void 0===p?void 0:p.user)){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",l({update:function(e){e.writeQuery({data:{__typename:"RootQueryType",me:null},query:Z})}}).finally((function(){return v("/login")})));case 3:case"end":return e.stop()}}),e)}))),[c.loading,p,l,v]),y=Object(x.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,r,i,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.icon,o=n.image,l=n.profile,!f.loading&&(null===p||void 0===p?void 0:p.user)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",d({variables:{profile:oa(l,p.user),icon:ua(i,null===(t=p.user.icon)||void 0===t?void 0:t.url),image:ua(o,null===(r=p.user.image)||void 0===r?void 0:r.url)},context:g({ctx:"Profile update"})}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[d,p,f]);return Object(x.useMemo)((function(){return{me:p,isAdmin:h,logout:E,loading:b,updateProfile:y}}),[p,h,E,b,y])},da=t(24),fa=t(141),va=t(392),pa=function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="local"===e?localStorage:sessionStorage,r=function(e){return"".concat(n).concat(e)},a=function(n){return ba(t.getItem(r(n)),e,r(n))},i=function(e,n){return t.setItem(r(e),ga(n))},o=function(e){var n=a(r(e));return t.removeItem(r(e)),n};return{get:a,set:i,del:o}}},ba=function(e,n,t){if(null===e)return null;try{return JSON.parse(e)}catch(r){return console.warn("KVStore[".concat(n,"]#parse: could not parse ").concat(e," at key [").concat(t,"]")),null}},ga=function(e){return JSON.stringify(e)},ha=pa("local")("LOCALIZATION"),xa=ha.get("#locale"),Ea=xa&&Ae.find((function(e){return e.code===xa}))||Ae[0],ya=Object(va.setupI18n)({locales:Ae.map((function(e){return e.code}))}),Oa=Object(x.createContext)({current:Ea,i18n:ya,available:Ae,set:function(){}}),ja=function(e){var n=e.children,t=Object(x.useState)(Ea),r=Object(u.a)(t,2),a=r[0],i=r[1],o=Object(x.useState)({}),l=Object(u.a)(o,2),s=l[0],d=l[1];Object(x.useEffect)((function(){wa(a.rtl),s[a.code]||ka(a.code).then((function(e){return d(Object(c.a)(Object(c.a)({},s),{},Object(m.a)({},a.code,e)))})).catch((function(e){return console.error("Error loading Locale: ".concat(a.code),e)}))}),[s,a]);var f=Object(x.useCallback)((function(e){i(e);var n,t=e.code;fa.Settings.defaultLocale=t.split("_")[0],n=t,ha.set("#locale",n)}),[i]),v=Object(x.useMemo)((function(){return{current:a,available:Ae,i18n:ya,set:f}}),[a,f]);return E.a.createElement(nt.I18nProvider,{i18n:ya,language:a.code,catalogs:s},E.a.createElement(Oa.Provider,{value:v},n))},ka=function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=4;break;case 4:return e.abrupt("return",t(507)("./".concat(n,"/messages.js")));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),wa=function(e){var n=document.querySelector("html");if(n){var t=e?"rtl":"ltr";n.style.direction=t,n.classList.remove("--rtl","--ltr"),n.classList.add("--".concat(t))}};function Ca(){var e=Object(i.a)(["\n  margin-top: 8px;\n  margin-bottom: 40px;\n  color: #000000a1;\n  font-weight: 500;\n"]);return Ca=function(){return e},e}function Ia(){var e=Object(i.a)(['\n  background: url("','");\n  width: 300px;\n  display: inline-block;\n  height: 100px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n']);return Ia=function(){return e},e}function Ta(){var e=Object(i.a)(["\n  grid-area: header;\n  text-align: center;\n"]);return Ta=function(){return e},e}var Fa=function(e){var n=E.a.useContext(Oa).i18n;return E.a.createElement(Sa,null,e.isHome?E.a.createElement(Pa,null):E.a.createElement(Kt.b,{to:"/"},E.a.createElement(Pa,null)),E.a.createElement(Ma,null,n._("Co-creating circular and regenerative resource flows in cities")),E.a.createElement(Ma,null,ye))},Sa=_n.div(Ta()),Pa=_n.div(Ia(),"https://raw.githubusercontent.com/reflow-project/zenpub-client/main/src/static/img/weloop_logo_1200x512.png"),Ma=_n.h5(Ca());function _a(){var e=Object(i.a)(["\n  width: 10px;\n  height: 10px;\n"]);return _a=function(){return e},e}function La(){var e=Object(i.a)(["\n  margin: 0;\n  margin-bottom: 16px;\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return La=function(){return e},e}function Ua(){var e=Object(i.a)(["\n  text-align: center;\n  text-decoration: underline;\n  cursor: pointer;\n  a {\n    color: inherit;\n  }\n"]);return Ua=function(){return e},e}function Aa(){var e=Object(i.a)(["\n  position: relative;\n  color: rgba(0, 0, 0, 0.5);\n  text-align: center;\n  margin-top: 24px;\n  &:before {\n    position: absolute;\n    content: '';\n    width: calc(50% - 24px);\n    left: 0;\n    top: 8px;\n    height: 1px;\n    display: block;\n    background: rgba(0, 0, 0, 0.45);\n  }\n  &:after {\n    position: absolute;\n    content: '';\n    width: calc(50% - 24px);\n    right: 0;\n    top: 8px;\n    height: 1px;\n    display: block;\n    background: rgba(0, 0, 0, 0.45);\n  }\n"]);return Aa=function(){return e},e}function Ra(){var e=Object(i.a)(["\n  background: ",";\n  a {\n    text-decoration: none;\n    color: ",";\n    button {\n      color: "," !important;\n    }\n  }\n"]);return Ra=function(){return e},e}function Ba(){var e=Object(i.a)(["\n  .extra {\n    width: 100%;\n    margin-left: 0px;\n  }\n  a {\n    text-decoration: none;\n    color: inherit;\n  }\n"]);return Ba=function(){return e},e}function Na(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  height: inherit;\n  border: 1px solid #dddfe2;\n  text-align: left;\n  height: fit-content;\n"]);return Na=function(){return e},e}function za(){var e=Object(i.a)(["\n  grid-area: form;\n"]);return za=function(){return e},e}function Da(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  margin-top: 60px;\n  padding-bottom: 50px;\n"]);return Da=function(){return e},e}function $a(){var e=Object(i.a)(["\n    grid-template-columns: 1fr;\n    grid-template-areas: 'header' 'image' 'form' 'footer';\n    padding: 16px\n  "]);return $a=function(){return e},e}function qa(){var e=Object(i.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr 1fr;\n  grid-template-areas: 'header header' 'form image' 'footer footer';\n  ",";\n"]);return qa=function(){return e},e}function Va(){var e=Object(i.a)([""]);return Va=function(){return e},e}function Qa(){var e=Object(i.a)([""]);return Qa=function(){return e},e}function Wa(){var e=Object(i.a)(['\n  background: url("','");\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  padding: 50%;\n  width: 400px;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n']);return Wa=function(){return e},e}var Ha={login:Object(nt.i18nMark)("Sign in"),placeholders:{email:Object(nt.i18nMark)("Enter your email"),password:Object(nt.i18nMark)("Enter your password")}},Ja=function(e){var n=e.formik,t=x.useContext(Oa).i18n;return x.createElement(x.Fragment,null,x.createElement(Xa,null,x.createElement(Ya,null,x.createElement(Fa,{isHome:!0}),x.createElement(ei,null,x.createElement(ni,null,x.createElement(oi,null,x.createElement(Ln.Box,{p:3},x.createElement("form",{onSubmit:n.handleSubmit},x.createElement(da.b,{placeholder:Ha.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),x.createElement(li,null),x.createElement(da.b,{type:"password",placeholder:Ha.placeholders.password,name:"password",value:n.values.password,onChange:n.handleChange}),x.createElement(ct,{mt:3,variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{width:"100%"}},x.createElement(nt.Trans,{id:"Sign in"}))))),x.createElement(ii,{variant:"text",my:3,mt:2},x.createElement(Kt.b,{to:"/reset"},x.createElement(nt.Trans,{id:"Trouble logging in?"})))),x.createElement(ai,null,x.createElement(nt.Trans,{id:"Or"})),x.createElement(ri,{mt:3,p:3},x.createElement(Ln.Text,{variant:"heading"},x.createElement(nt.Trans,{id:"Browse this instance"})),x.createElement(Ln.Text,{variant:"text",mt:2},t._("You don't need to sign up to preview what people are sharing and discussing publicly.")),x.createElement(Kt.b,{to:"/discover"},x.createElement(ct,{mt:3,variant:"outline"},x.createElement(nt.Trans,{id:"Browse"}))))),x.createElement(ti,null,x.createElement(Kt.b,{to:"signup"},x.createElement(ct,{mb:2,style:{width:"100%",height:"50px"},variant:"outline"},x.createElement(nt.Trans,{id:"Sign up"}))),x.createElement(Zn,{className:"extra"},x.createElement(Gn,null,x.createElement(Ka,null),x.createElement(Za,{p:3},x.createElement(Ga,null,x.createElement(Ln.Text,{variant:"suptitle"},x.createElement(nt.Trans,{id:"Instance description"})),x.createElement(Ln.Text,{mt:2,variant:"text"},"Federated economic network for Reflow pilots")))))))))},Ka=_n(Ln.Box)(Wa(),"https://reflowproject.eu/wp-content/uploads/2019/08/reflow-cocreation-1.png"),Za=_n(Ln.Box)(Qa()),Ga=_n(Ln.Box)(Va()),Ya=_n.div(qa(),w.a.lessThan("medium")($a())),Xa=_n.div(Da()),ei=_n.div(za()),ni=_n.div(Na(),(function(e){return e.theme.colors.appInverse})),ti=_n(Ln.Box)(Ba()),ri=_n(Ln.Box)(Ra(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),ai=_n.div(Aa()),ii=_n(Ln.Text)(Ua()),oi=_n.div(La()),li=_n.div(_a()),ci=t(14),ui=function(){var e,n=Object(V.a)(),t=V.c(ue,e),r=Object(u.a)(t,2),a=r[0],i=r[1],o=function(e){return V.c(le,e)}(),l=Object(u.a)(o,2),c=l[0],m=l[1],s=function(e){return V.c(me,e)}(),d=Object(u.a)(s,2),f=d[0],v=d[1],p=function(e){return V.c(se,e)}(),b=Object(u.a)(p,2),h=b[0],E=b[1],y=function(e){return V.c(ce,e)}(),O=Object(u.a)(y,2),j=O[0],k=O[1];return Object(x.useMemo)((function(){return{login:function(e,n){if(!i.loading)return a({variables:{email:e,password:n},context:g({ctx:"Login"}),update:function(e,n){var t,r;return mi(e,null===(t=n.data)||void 0===t||null===(r=t.createSession)||void 0===r?void 0:r.me)}})},loginStatus:i,resetPwdReq:function(e){if(!k.loading)return j({variables:{email:e}})},resetPwdReqStatus:k,confirmEmail:function(e){if(!v.loading)return f({variables:{token:e},update:function(e,n){var t,r;return mi(e,null===(t=n.data)||void 0===t||null===(r=t.confirmEmail)||void 0===r?void 0:r.me)}})},confirmEmailStatus:v,signUp:function(e){if(!E.loading)return h({variables:{registration:e},update:function(e,n){var t;return mi(e,null===(t=n.data)||void 0===t?void 0:t.createUser)}})},signUpStatus:E,resetPwd:function(e){var n=e.password,t=e.token;if(!m.loading)return c({variables:{password:n,token:t},update:function(e,n){var t,r;return mi(e,null===(t=n.data)||void 0===t||null===(r=t.resetPassword)||void 0===r?void 0:r.me)}})},resetPwdStatus:m,usernameAvailable:function(e){return n.query({query:de,variables:{username:e}}).then((function(e){return e.data.usernameAvailable}))}}}),[E,h,f,v,a,i,c,m,j,k,n])},mi=function(e,n){e.writeQuery({query:Z,data:{__typename:"RootQueryType",me:n?Object(c.a)(Object(c.a)({__typename:"Me"},n),{},{user:Object(c.a)({__typename:"User"},n.user)}):null}})},si=t(393),di=Object(x.createContext)({setTitle:function(e){return e}}),fi=function(e){var n=e.children,t=Object(x.useContext)(Oa).i18n,r=Object(x.useState)(),a=Object(u.a)(r,2),i=a[0],o=a[1],l=Object(x.useCallback)((function(e,n){var r=!1===e?void 0:t._(Object(c.a)(Object(c.a)({},e),{},{values:n}));r!==i&&o(r)}),[t,i]),m=Object(x.useMemo)((function(){return{setTitle:l}}),[l]),s=i?"".concat("Reflow"," - ").concat(i):"Reflow";return E.a.createElement(di.Provider,{value:m},E.a.createElement(si.a,null,E.a.createElement("title",null,s)),n)},vi=function(e,n){var t=Object(x.useContext)(di).setTitle;Object(x.useEffect)((function(){t(e,n)}),[t,e,n])},pi=ci.object({email:ci.string().max(50).required(),password:ci.string().max(50).required()}),bi={id:"Login"},gi=function(){vi(bi);var e=ui().login,n=Object(qt.a)({initialValues:{email:"",password:""},enableReinitialize:!0,onSubmit:function(n){var t=n.email,r=n.password;return e(t,r)},validationSchema:pi});return E.a.createElement(Ja,{formik:n})},hi=Object(x.createContext)({isOpen:!0,toggleOpen:function(){return!0}}),xi=function(e){var n=e.children,t=Object(x.useReducer)((function(e){return!e}),!0),r=Object(u.a)(t,2),a=r[0],i=r[1],o=Object(x.useMemo)((function(){return{isOpen:a,toggleOpen:i}}),[a,i]);return E.a.createElement(hi.Provider,{value:o},n)};function Ei(){var e=Object(i.a)(["\n    fragment ResourcePreview on Resource {\n  id\n  icon {\n    id\n    url\n  }\n  name\n  summary\n  canonicalUrl\n  payload: content {\n    id\n    mediaType\n    mirror {\n      url\n    }\n    upload {\n      size\n    }\n    url\n  }\n  myLike {\n    id\n  }\n  myFlag {\n    id\n  }\n  likers {\n    totalCount\n  }\n  collection {\n    id\n    name\n    preferredUsername\n    canonicalUrl\n    icon {\n      id\n      url\n    }\n    summary\n    community {\n      id\n      ...CommunityInfo\n    }\n  }\n  license\n}\n    ",""]);return Ei=function(){return e},e}var yi=R()(Ei(),Lt);function Oi(){var e=Object(i.a)(["\n    fragment CommentPreviewThread on Thread {\n  id\n  isLocal\n  canonicalUrl\n  context {\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on Community {\n      ...CommunityPreview\n    }\n  }\n}\n    ","\n","\n",""]);return Oi=function(){return e},e}function ji(){var e=Object(i.a)(["\n    fragment CommentPreview on Comment {\n  ...CommentPreviewBase\n  id\n  inReplyTo {\n    ...CommentPreviewBase\n  }\n  likerCount\n  myLike {\n    id\n  }\n  myFlag {\n    id\n  }\n  thread {\n    id\n    comments(limit: 1) {\n      edges {\n        ...CommentPreviewBase\n      }\n    }\n    context {\n      ... on Flag {\n        id\n      }\n      ... on Community {\n        id\n        ...CommunityInfo\n      }\n      ... on Collection {\n        id\n        community {\n          id\n          ...CommunityInfo\n        }\n      }\n      ... on Resource {\n        id\n        collection {\n          id\n          community {\n            id\n            ...CommunityInfo\n          }\n        }\n      }\n    }\n  }\n}\n    ","\n",""]);return ji=function(){return e},e}function ki(){var e=Object(i.a)(["\n    fragment CommentPreviewBase on Comment {\n  id\n  isLocal\n  content\n  canonicalUrl\n  createdAt\n  creator {\n    icon {\n      id\n      url\n    }\n    image {\n      id\n      url\n    }\n    userId: id\n    userName: name\n    canonicalUrl\n  }\n}\n    "]);return ki=function(){return e},e}var wi=R()(ki()),Ci=R()(ji(),wi,Lt);R()(Oi(),Rt,yi,Ut);function Ii(){var e=Object(i.a)(["\n    fragment FlagPreview on Flag {\n  id\n  message\n  isResolved\n  creator {\n    ...UserPreview\n  }\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n",""]);return Ii=function(){return e},e}var Ti=R()(Ii(),Kr,Ut,Rt,yi,Ci);function Fi(){var e=Object(i.a)(["\n    fragment LikePreview on Like {\n  id\n  createdAt\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n",""]);return Fi=function(){return e},e}var Si=R()(Fi(),Ut,Rt,yi,Kr,Ci);function Pi(){var e=Object(i.a)(["\n    fragment FollowPreview on Follow {\n  id\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n  }\n}\n    ","\n","\n",""]);return Pi=function(){return e},e}var Mi=R()(Pi(),Ut,Rt,Kr);function _i(){var e=Object(i.a)(["\n    fragment ActivityPreview on Activity {\n  id\n  verb\n  createdAt\n  user {\n    icon {\n      id\n      url\n    }\n    image {\n      id\n      url\n    }\n    userId: id\n    userName: name\n    canonicalUrl\n  }\n  context {\n    ... on Community {\n      ...CommunityPreview\n    }\n    ... on Collection {\n      ...CollectionPreview\n    }\n    ... on Resource {\n      ...ResourcePreview\n    }\n    ... on User {\n      ...UserPreview\n    }\n    ... on Comment {\n      ...CommentPreview\n    }\n    ... on Flag {\n      ...FlagPreview\n    }\n    ... on Like {\n      ...LikePreview\n    }\n    ... on Follow {\n      ...FollowPreview\n    }\n  }\n}\n    ","\n","\n","\n","\n","\n","\n","\n",""]);return _i=function(){return e},e}var Li=R()(_i(),Ut,Rt,yi,Kr,Ci,Ti,Si,Mi);function Ui(){var e=Object(i.a)(['\n    query instanceOutboxActivities($after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  instance @connection(key: "instanceOutboxActivities") {\n    outbox(after: $after, before: $before, limit: $limit) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...InstanceOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return Ui=function(){return e},e}function Ai(){var e=Object(i.a)(["\n    fragment InstanceOutboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return Ai=function(){return e},e}var Ri=R()(Ai(),Li),Bi=R()(Ui(),Nt,Ri);var Ni=function(e,n){return{query:Bi,variables:e,context:n}};function zi(){var e=Object(i.a)(['\n    query allCommunities($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  communities(limit: $limit, before: $before, after: $after) @connection(key: "allCommunities") {\n    edges {\n      ...CommunityPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return zi=function(){return e},e}var Di=R()(zi(),Ut,Nt);function $i(){var e=Object(i.a)(["\n    fragment HeroCommunityMeData on Me {\n  user {\n    id\n  }\n}\n    "]);return $i=function(){return e},e}function qi(){var e=Object(i.a)(["\n    fragment HeroCommunityData on Community {\n  id\n  displayUsername\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  followerCount\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  creator {\n    id\n  }\n}\n    "]);return qi=function(){return e},e}var Vi=R()(qi());R()($i());function Qi(){var e=Object(i.a)(["\n  fragment ThreadPreview on Thread {\n    id\n    lastActivity\n    createdAt\n    context {\n      ... on Community {\n        ...CommunityPreview\n      }\n      ... on Collection {\n        ...CollectionPreview\n      }\n      ... on Resource {\n        ...ResourcePreview\n      }\n      ... on Flag {\n        ...FlagPreview\n      }\n    }\n    comments(limit: 1) {\n      totalCount\n      edges {\n        ... on Comment {\n          ...CommentPreview\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Qi=function(){return e},e}var Wi=R()(Qi(),Ut,Rt,yi,Ti,Ci);function Hi(){var e=Object(i.a)(["\n  fragment CommunityPageActivityBase on Activity {\n    id\n    ...ActivityPreview\n  }\n  ","\n"]);return Hi=function(){return e},e}function Ji(){var e=Object(i.a)(["\n  fragment CommunityPageCollectionBase on Collection {\n    id\n    ...CollectionPreview\n  }\n  ","\n"]);return Ji=function(){return e},e}function Ki(){var e=Object(i.a)(["\n  fragment CommunityPageThread on Thread {\n    id\n    ...ThreadPreview\n  }\n  ","\n"]);return Ki=function(){return e},e}function Zi(){var e=Object(i.a)(["\n  fragment CommunityPageData on Community {\n    id\n    myFollow {\n      id\n    }\n    ...HeroCommunityData\n  }\n  ","\n"]);return Zi=function(){return e},e}var Gi=R()(Zi(),Vi),Yi=R()(Ki(),Wi),Xi=R()(Ji(),Rt);R()(Hi(),Li);function eo(){var e=Object(i.a)(["\n    mutation createCommunity($community: CommunityInput!, $icon: UploadInput) {\n  createCommunity(community: $community, icon: $icon) {\n    ...CommunityPageData\n  }\n}\n    ",""]);return eo=function(){return e},e}var no=R()(eo(),Gi);var to=function(){var e,n=V.c(no,e),t=Object(u.a)(n,2),r=t[0],i=t[1],l=iC(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.community,o=n.icon,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{icon:ua(o,null),community:{name:t.name,summary:t.summary,preferredUsername:t.preferredUsername}},refetchQueries:[$r({}),Ni({limit:je}),(a={limit:je},l=void 0,{query:Di,variables:a,context:l})]}));case 4:case"end":return e.stop()}var a,l}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(x.useMemo)((function(){return{create:l}}),[l])},ro=t(405),ao=t(752),io=t(753);function oo(){var e=Object(i.a)(["\n    display: block;\n    border-radius: 4px;\n    height: inherit;\n    background-size: cover;\n}\n"]);return oo=function(){return e},e}function lo(){var e=Object(i.a)(["\n  width: 100%;\n  box-sizing: border-box;\n  position: relative;\n  height: 120px;\n  &:after {\n    position: absolute;\n    content: '';\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    border-radius: 4px;\n    display: block;\n    background: rgba(0, 0, 0, 0.3);\n  }\n  &:hover {\n    &:after {\n      background: rgba(0, 0, 0, 0.1);\n    }\n  }\n  svg {\n    width: 40px;\n  }\n"]);return lo=function(){return e},e}function co(){var e=Object(i.a)(["\n  padding: 20px 10px;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.3);\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n"]);return co=function(){return e},e}function uo(){var e=Object(i.a)(["\n  padding: 20px 10px;\n  border-radius: 4px;\n"]);return uo=function(){return e},e}function mo(){var e=Object(i.a)(["\n  width: 40px;\n  height: 40px;\n  align-items: center;\n  border-radius: 100px;\n  position: absolute;\n  left: 50%;\n  margin-left: -20px;\n  top: 50%;\n  margin-top: -20px;\n  z-index: 9;\n"]);return mo=function(){return e},e}function so(){var e=Object(i.a)(["\n  margin-bottom: 0px;\n  margin-top: 5px;\n  font-weight: bold;\n  text-align: center;\n  font-style: italic;\n"]);return so=function(){return e},e}function fo(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  text-align: center;\n  cursor: pointer;\n  box-sizing: border-box;\n  height: inherit;\n  margin: 0px;\n  &.active {\n    border: 1px dashed ",";\n  }\n  .;\n"]);return fo=function(){return e},e}var vo=function(e){var n=e.initialUrl,t=e.uploadType,r=e.onFileSelect,a=e.filePattern,i=Object(x.useState)(),o=Object(u.a)(i,2),l=o[0],c=o[1],m=Object(x.useState)(),s=Object(u.a)(m,2),d=s[0],f=s[1];Object(x.useEffect)((function(){return function(){l&&URL.revokeObjectURL(l)}}),[l]),Object(x.useEffect)((function(){c(n)}),[n]);var v=Object(ro.a)({accept:a,onDrop:function(e){var n=e[0];if(!n)return r(void 0),void f(void 0);r(n),f({file:n,localUrl:URL.createObjectURL(n)})}}),p=v.getRootProps,b=v.getInputProps,g=v.isDragActive;return E.a.createElement(E.a.Fragment,null,E.a.createElement(Ln.Box,Object.assign({sx:{height:"100%"}},p({className:"dropzone"})),E.a.createElement(po,{className:g?"active":"none"},d||"resource"!==t?null:E.a.createElement(Eo,{className:"thumb"},E.a.createElement(go,null,E.a.createElement(ao.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"}))),"resource"!==t?E.a.createElement(Eo,{className:"thumb"},E.a.createElement(go,null,E.a.createElement(io.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"})),E.a.createElement(yo,{style:{backgroundImage:'url("'.concat(d?d.localUrl:l,'")')}})):null,d&&"resource"===t?-1===d.file.type.indexOf("image")?E.a.createElement(xo,null,E.a.createElement(ao.a,{size:20}),d&&E.a.createElement(bo,null,d.file.name)):E.a.createElement(ho,null,E.a.createElement(Eo,null,E.a.createElement(go,null,E.a.createElement(io.a,{size:30,strokeWidth:1,color:"rgba(250,250,250, .5)"})),E.a.createElement(yo,{style:{backgroundImage:'url("'.concat(d.localUrl,'")')}})),E.a.createElement(bo,null,d&&d.file.name)):null,E.a.createElement("input",b()))))},po=_n.div(fo(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),bo=_n.p(so()),go=_n(Ln.Flex)(mo()),ho=_n.div(uo()),xo=_n.div(co()),Eo=_n.div(lo()),yo=_n(Ln.Box)(oo());function Oo(){var e=Object(i.a)(["\n  border-radius: 4px;\n  line-height: 26px;\n  padding: 8px 16px;\n  font-family: ",";\n  font-weight: 600;\n"]);return Oo=function(){return e},e}var jo=_n(Ln.Box)(Oo(),(function(e){return e.theme.fontFamily})),ko=function(e){var n=e.variant,t=e.children;return x.createElement(jo,{variant:n||"info"},t)},wo=t(193),Co=t(396),Io=t(207),To=t(205),Fo=t(754);function So(){var e=Object(i.a)(["\n    display: block;\n\n  "]);return So=function(){return e},e}function Po(){var e=Object(i.a)(["\n    width: 100%;\n  "]);return Po=function(){return e},e}function Mo(){var e=Object(i.a)(["\n  ",";\n  border-bottom: 1px solid ",";\n  height: ",";\n  display: flex;\n  padding: 20px;\n  & textarea {\n    height: 120px;\n  }\n  & label {\n    width: 200px;\n    line-height: 40px;\n    ",";\n  }\n\n  ",";\n"]);return Mo=function(){return e},e}function _o(){var e=Object(i.a)(["\n  padding: 0 16px;\n  padding-top: 16px;\n  // border-bottom: 1px solid ",";\n  & h5 {\n    text-align: center !important;\n    margin: 0 !important;\n  }\n"]);return _o=function(){return e},e}function Lo(){var e=Object(i.a)(["\n  flex: 1;\n  ",";\n  input {\n    height: 40px;\n    background: white;\n    border-radius: 2px;\n    border: ",";\n  }\n  textarea {\n    line-height: 20px;\n    background: white;\n    border-radius: 2px;\n    border: ",";\n    font-family: ",";\n  }\n"]);return Lo=function(){return e},e}function Uo(){var e=Object(i.a)(["\n  position: absolute;\n  top: 2px;\n  right: 8px;\n  text-transform: uppercase;\n  text-align: center;\n  background: #d0d9db;\n  padding: 2px 10px;\n  border-radius: 12px;\n  font-weight: 600;\n  color: #fff;\n  letter-spacing: 1px;\n"]);return Uo=function(){return e},e}function Ao(){var e=Object(i.a)(["\n  ",";\n  padding-top: 10px;\n  padding-right: 10px;\n  & button {\n    float: right;\n  }\n"]);return Ao=function(){return e},e}function Ro(){var e=Object(i.a)(["\n  font-family: ",";\n"]);return Ro=function(){return e},e}function Bo(){var e=Object(i.a)(["\n  ",";\n  font-family: ",";\n"]);return Bo=function(){return e},e}function No(){var e=Object(i.a)(["\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  cursor: pointer;\n  background: ",";\n  width: 24px;\n  height: 24px;\n  border-radius: 40px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return No=function(){return e},e}function zo(){var e=Object(i.a)(["\n  ",";\n  position: relative;\n"]);return zo=function(){return e},e}function Do(){var e=Object(i.a)(["\n    width: auto;\n    margin: 0;\n    left: 8px;\n    right: 8px;\n  "]);return Do=function(){return e},e}function $o(){var e=Object(i.a)(["\n  width: 700px;\n  box-shadow: 0 2px 8px 3px rgba(0, 0, 0, 0.3);\n  z-index: 9999999999;\n  background-color: #ffffff;\n  padding: 0;\n  margin: 40px auto;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  margin-left: -350px;\n  border-radius: 3px;\n  outline: none;\n  transform: translateY(-50%);\n\n  ",";\n"]);return $o=function(){return e},e}function qo(){var e=Object(i.a)(["\n  margin-top: 4px;\n  z-index: 99999;\n  position: relative;\n"]);return qo=function(){return e},e}function Vo(){var e=Object(i.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(51, 60, 69, 0.95);\n  z-index: 9999999999999;\n  height: 100%;\n  justify-content: center;\n  overflow: auto;\n  cursor: pointer;\n"]);return Vo=function(){return e},e}var Qo=_n.div(Vo()),Wo=_n.div(qo()),Ho=_n.div($o(),w.a.lessThan("medium")(Do())),Jo=_n.div(zo(),Object(it.a)()),Ko=_n(Ln.Box)(No(),(function(e){return e.theme.colors.primary})),Zo=_n.div(Bo(),Object(it.a)(),(function(e){return e.theme.fontFamily})),Go=_n.div(Ro(),(function(e){return e.theme.fontFamily})),Yo=_n(Ln.Box)(Ao(),Object(it.a)()),Xo=_n.div(Uo()),el=_n.div(Lo(),Object(it.a)(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.fontFamily})),nl=_n.div(_o(),(function(e){return e.theme.colors.lighter})),tl=_n.div(Mo(),Object(it.a)(),(function(e){return e.theme.colors.lighter}),(function(e){return e.big?"180px":"auto"}),w.a.lessThan("medium")(Po()),w.a.lessThan("medium")(So())),rl=function(e){Object(Io.a)(t,e);var n=Object(To.a)(t);function t(){return Object(wo.a)(this,t),n.apply(this,arguments)}return Object(Co.a)(t,[{key:"componentDidMount",value:function(){t.el.style.display="block"}},{key:"componentWillUnmount",value:function(){t.el.style.display="none"}},{key:"render",value:function(){return j.a.createPortal(this.props.children,t.el)}}]),t}(E.a.Component);rl.el=function(){var e=document.createElement("div");return e.setAttribute("id","modalPortal"),e.style.display="none",document.body.appendChild(e),e}();var al=function(e){var n=e.closeModal,t=e.children,r=Object(x.useCallback)((function(){return n()}),[n]);return E.a.createElement(rl,null,E.a.createElement(Qo,{onClick:r}),E.a.createElement(Ho,null,E.a.createElement(Jo,null,E.a.createElement(Ko,{onClick:r},E.a.createElement(Fo.a,{color:"#fff",size:16}))),E.a.createElement(Zo,null,t)))};function il(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return il=function(){return e},e}function ol(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return ol=function(){return e},e}function ll(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return ll=function(){return e},e}function cl(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return cl=function(){return e},e}function ul(){var e=Object(i.a)(["\n  color: ",";\n"]);return ul=function(){return e},e}function ml(){var e=Object(i.a)(["\n  color: ",";\n"]);return ml=function(){return e},e}function sl(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return sl=function(){return e},e}var dl,fl={placeholders:{name:Object(nt.i18nMark)("Choose a name for the community"),summary:Object(nt.i18nMark)("Please describe who might be interested in this community and what kind of collections it is likely to contain..."),icon:Object(nt.i18nMark)("Enter the URL of an image to represent the community")}},vl=function(e){var n=e.cancel,t=e.formik,r=x.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return x.createElement(Go,null,x.createElement("form",{onSubmit:t.handleSubmit},x.createElement(nl,null,x.createElement(Ln.Heading,{m:2},x.createElement(nt.Trans,{id:"Create a new community"}))),x.createElement(xl,null,x.createElement(Ln.Box,{sx:{width:"120px",height:"120px"}},x.createElement(vo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),x.createElement(hl,null,x.createElement(bl,{fontWeight:"bold"},x.createElement(pl,null,x.createElement(da.b,{placeholder:fl.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),x.createElement(Xo,null,60-t.values.name.length),t.errors.name&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.name)))),x.createElement(gl,{mt:2},x.createElement(pl,null,x.createElement(da.d,{placeholder:fl.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),x.createElement(Xo,null,500-t.values.summary.length),t.errors.summary&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.summary)))))),x.createElement(Yo,null,x.createElement(ct,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.createElement(nt.Trans,{id:"Save"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"})))))},pl=_n(el)(sl()),bl=_n(Ln.Text)(ml(),(function(e){return e.theme.colors.mediumdark})),gl=_n(Ln.Text)(ul(),(function(e){return e.theme.colors.mediumdark})),hl=_n.div(cl(),Object(it.a)(),(function(e){return e.theme.colors.mediumdark}),w.a.lessThan("medium")(ll()),(function(e){return e.theme.colors.mediumdark})),xl=_n(Ln.Flex)(ol(),w.a.lessThan("medium")(il())),El=["imageurl","need a file or an url",function(e){return!e||("string"===typeof e?ca(e):e instanceof File)}],yl=ci.object({name:ci.string().min(2).max(60).required(),summary:ci.string().max(500),icon:(dl=ci.mixed()).test.apply(dl,Object(C.a)(El))}),Ol=function(e){var n=e.done,t=Object(Pn.h)(),r=to().create,a=Object(qt.a)({enableReinitialize:!0,validationSchema:yl,initialValues:{name:"",summary:"",icon:""},onSubmit:function(e){return r({community:{preferredUsername:e.name.split(" ").join("_"),name:e.name,summary:e.summary},icon:e.icon}).then((function(e){var r,a;n(),(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(a=r.createCommunity)||void 0===a?void 0:a.id)&&t.push("/communities/".concat(e.data.createCommunity.id))}))}});return E.a.createElement(vl,{cancel:n,formik:a})},jl=t(799),kl=function(){return De?null:E.a.createElement(jl.a,null)},wl=t(775),Cl=t(770),Il=t(341);function Tl(){var e=Object(i.a)(["\n  font-family: ",";\n  border-radius: 4px;\n  height: ",";\n  min-width: ",";\n  background-color: ",';\n  background-image: url("','");\n  background-size: cover;\n  background-position: center center;\n  span {\n    height: 100%;\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    line-height: normal;\n    font-weight: 700;\n    ',";\n  }\n"]);return Tl=function(){return e},e}var Fl={default:"48px",s:"32px",m:"140px",l:"200px"},Sl=_n(Ln.Box)(Tl(),(function(e){return e.theme.fontFamily}),(function(e){return Fl[e.size]}),(function(e){return Fl[e.size]}),(function(e){return e.bg?"transparent":e.theme.colors.light}),(function(e){return e.bg}),(function(e){return e.theme.colors.mediumdark})),Pl=function(e){var n=e.size,t=void 0===n?"default":n,r=e.src,a=e.initials;e.variant;return x.createElement(Sl,{size:t,bg:r},a&&!r?x.createElement("span",null,a.substr(0,2).toUpperCase()):null)},Ml=t(650),_l=t(756),Ll=t(757),Ul=t(758),Al=t(759),Rl=t(760),Bl=t(761),Nl=t(762),zl=t(763),Dl=t(764),$l=t(765),ql=t(397),Vl=t.n(ql);function Ql(){var e=Object(i.a)(["\n  align-items: center;\n  cursor: pointer;\n  padding: 16px;\n  min-width: 100%;\n  width: max-content;\n  flex: 1;\n  &:first-of-type {\n    border-top-left-radius: 6px;\n    border-top-right-radius: 6px;\n  }\n  &:hover {\n    div {\n      color: "," !important;\n    }\n    background: "," !important;\n  }\n"]);return Ql=function(){return e},e}function Wl(){var e=Object(i.a)(["\n  text-align: left;\n  background: ",";\n  min-width: 210px;\n  display: block;\n  border-radius: 6px;\n  box-shadow: rgba(101, 119, 134, 0.2) 0px 0px 15px, rgba(101, 119, 134, 0.15) 0px 0px 3px 1px;\n  position: absolute;\n  top: ",";\n  bottom: ",";\n  left: ",";\n  right: ",";\n  z-index: 9999999999999999999999999999;\n"]);return Wl=function(){return e},e}var Hl=function(e){var n=e.orientation,t=e.close,r=e.children;return E.a.createElement(Vl.a,{onOutsideClick:t},E.a.createElement(Jl,{className:"dropdown",orientation:n},r))},Jl=_n(Ln.Box)(Wl(),(function(e){return e.theme.colors.appInverse}),(function(e){return"top"===e.orientation?"8px":"auto"}),(function(e){return"bottom"===e.orientation?"4px":"auto"}),(function(e){return e.orientation,"0px"}),(function(e){return"bottom"===e.orientation?"0px":"auto"})),Kl=_n(Ln.Flex)(Ql(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.light}));function Zl(){var e=Object(i.a)(["\n  border: 1px solid ",";\n  border-radius: 4px;\n  height: 34px;\n  &:hover {\n    background: ",";\n  }\n  div {\n    letter-spacing: 0;\n  }\n"]);return Zl=function(){return e},e}function Gl(){var e=Object(i.a)(["\n  line-height: 50px;\n  height: 50px;\n  cursor: pointer;\n  align-items: center;\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n    .--rtl & {\n      margin-right: 0px;\n      margin-left: 8px;\n    }\n    & svg {\n      vertical-align: sub;\n    }\n  }\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n  &:hover {\n    color: ",";\n  }\n"]);return Gl=function(){return e},e}function Yl(){var e=Object(i.a)(["\n  padding: 8px;\n  border-bottom: ",";\n"]);return Yl=function(){return e},e}var Xl=_n.div(Yl(),(function(e){return e.lined?"1px solid #dadada":null})),ec=_n(Ln.Flex)(Gl(),(function(e){return e.theme.colors.primary})),nc=_n(ec)(Zl(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.light})),tc=function(e){var n=e.logout,t=e.userLink,r=e.toggleDropdown,a=e.isAdmin,i=Object(Pn.h)().push;return x.createElement(Hl,{orientation:"top",close:r},x.createElement(Xl,{lined:!0},x.createElement(ec,{variant:"link",onClick:function(){return i(t)}},x.createElement("span",null,x.createElement(Ml.default,{size:16,color:"#333"})),x.createElement(Ln.Text,{variant:"text"},x.createElement(nt.Trans,{id:"My Profile"}))),x.createElement(ec,null,x.createElement(Ln.Text,{variant:"text"},x.createElement("a",{href:"/communities/user"},x.createElement("span",null,x.createElement(_l.a,{size:16,color:"red"})),x.createElement(nt.Trans,{id:"My Communities"})))),x.createElement(ec,null,x.createElement(Ln.Text,{variant:"text"},x.createElement("a",{href:"/inventory".concat(t)},x.createElement("span",null,x.createElement(Ll.a,{size:16,color:"#333"})),x.createElement(nt.Trans,{id:"My Inventory"})))),x.createElement(ec,null,x.createElement(Ln.Text,{variant:"text"},x.createElement("a",{href:"/activity"},x.createElement("span",null,x.createElement(Ul.a,{size:16,color:"red"})),x.createElement(nt.Trans,{id:"My Activity"})))),x.createElement(ec,null,x.createElement(Ln.Text,{variant:"text"},x.createElement("a",{href:"/comments"},x.createElement("span",null,x.createElement(Al.a,{size:16,color:"red"})),x.createElement(nt.Trans,{id:"My comments"})))),x.createElement(ec,null,x.createElement(Ln.Text,{variant:"text"},x.createElement("a",{href:"/favorites"},x.createElement("span",null,x.createElement(Rl.a,{size:16,color:"red"})),x.createElement(nt.Trans,{id:"My favorites"}))))),x.createElement(Xl,null,x.createElement(ec,{variant:"link",onClick:function(){return i("/settings")}},x.createElement("span",null,x.createElement(Bl.a,{size:16,color:"#333"})),x.createElement(Ln.Text,{variant:"text"},x.createElement(nt.Trans,{id:"Settings"}))),a&&x.createElement(nc,{variant:"link",onClick:function(){return i("/settings/instance")}},x.createElement(Ln.Text,{variant:"text",sx:{flex:1,textAlign:"center"}},x.createElement(nt.Trans,{id:"Admin dashboard"}))),x.createElement(ec,{variant:"link"},x.createElement(Ln.Text,{variant:"text"},x.createElement("a",{href:"/terms",target:"_blank"},x.createElement("span",null,x.createElement(Nl.a,{size:16})),x.createElement(nt.Trans,{id:"Code of Conduct"})))),x.createElement(ec,{variant:"link",onClick:n},x.createElement("span",null,x.createElement(zl.a,{size:16,strokeWidth:1,color:"#333"})),x.createElement(Ln.Text,{variant:"text"},x.createElement(nt.Trans,{id:"Sign out"})))))},rc=function(e){var n=e.toggleDropdown,t=e.createCommunity,r=e.createIntent,a=e.createResource;return x.createElement(Hl,{orientation:"top",close:n},x.createElement(Xl,{lined:!0},x.createElement(ec,{variant:"link",onClick:function(){return t()}},x.createElement("span",null,x.createElement(_l.a,{size:16,color:"#333"})),x.createElement(Ln.Text,{variant:"text"},x.createElement(nt.Trans,{id:"New Community"}))),x.createElement(ec,{variant:"link",onClick:function(){return r()}},x.createElement("span",null,x.createElement(Dl.a,{size:16,color:"#333"})),x.createElement(Ln.Text,{variant:"text"},x.createElement(nt.Trans,{id:"Create a new intent"}))),x.createElement(ec,{variant:"link",onClick:function(){return a()}},x.createElement("span",null,x.createElement($l.a,{size:16,color:"#333"})),x.createElement(Ln.Text,{variant:"text"},x.createElement(nt.Trans,{id:"Create a new resource"})))))};function ac(){var e=Object(i.a)(['\n    query communityOutboxActivities($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityOutboxActivities", filter: ["communityId"]) {\n    id\n    outbox(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return ac=function(){return e},e}function ic(){var e=Object(i.a)(["\n    fragment CommunityOutboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return ic=function(){return e},e}var oc=R()(ic(),Li),lc=R()(ac(),Nt,oc);var cc=function(e,n){return{query:lc,variables:e,context:n}},uc=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:je}},V.d(lc,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.outbox,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{communityId:e,limit:je}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.outbox)&&(null===(a=e.community)||void 0===a?void 0:a.outbox)?Object(c.a)(Object(c.a)({},i),{},{community:Object(c.a)(Object(c.a)({},i.community),{},{outbox:r({prev:e.community.outbox,fetched:i.community.outbox})})}):e}})}));return Object(x.useMemo)((function(){return{activitiesPage:i}}),[i])};function mc(){var e=Object(i.a)(['\n    query communityCollections($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityCollections", filter: ["communityId"]) {\n    id\n    collections(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityCollection\n      }\n    }\n  }\n}\n    ',"\n",""]);return mc=function(){return e},e}function sc(){var e=Object(i.a)(["\n    fragment CommunityCollection on Collection {\n  ...CollectionPreview\n  ...CommunityPageCollectionBase\n}\n    ","\n",""]);return sc=function(){return e},e}var dc=R()(sc(),Rt,Xi),fc=R()(mc(),Nt,dc);var vc=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:je}},V.d(fc,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.collections,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,communityId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.collections)&&(null===(a=e.community)||void 0===a?void 0:a.collections)?Object(c.a)(Object(c.a)({},i),{},{community:Object(c.a)(Object(c.a)({},i.community),{},{collections:r({prev:e.community.collections,fetched:i.community.collections})})}):e}})}));return Object(x.useMemo)((function(){return{collectionsPage:i}}),[i])};function pc(){var e=Object(i.a)(["\n    mutation createThread($contextId: String!, $comment: CommentInput!) {\n  createThread(comment: $comment, contextId: $contextId) {\n    thread {\n      id\n    }\n  }\n}\n    "]);return pc=function(){return e},e}var bc=R()(pc());function gc(){var e=Object(i.a)(['\n    query communityThreads($communityId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  community(communityId: $communityId) @connection(key: "communityThreads", filter: ["communityId"]) {\n    id\n    threads(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityThread\n      }\n    }\n  }\n}\n    ',"\n",""]);return gc=function(){return e},e}function hc(){var e=Object(i.a)(["\n    fragment CommunityThread on Thread {\n  ...CommunityPageThread\n}\n    ",""]);return hc=function(){return e},e}var xc=R()(hc(),Yi),Ec=R()(gc(),Nt,xc);var yc=function(e,n){var t,r=V.c(bc,t),i=Object(u.a)(r,2),l=i[0],c=i[1].loading,m=iC(function(){var t=Object(o.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&!c){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",l({variables:{contextId:e,comment:{content:r}},refetchQueries:[Ni({limit:je})].concat(Object(C.a)("Community"===n?[(a={communityId:e,limit:je},i=void 0,{query:Ec,variables:a,context:i}),cc({communityId:e,limit:je})]:[]))}).then((function(e){var n,t,r;return null===(n=e.data)||void 0===n||null===(t=n.createThread)||void 0===t||null===(r=t.thread)||void 0===r?void 0:r.id})));case 3:case"end":return t.stop()}var a,i}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,n,c]);return Object(x.useMemo)((function(){return{createThread:m}}),[m])};function Oc(){var e=Object(i.a)(["\n    mutation editCommunity($community: CommunityUpdateInput!, $communityId: String!, $icon: UploadInput) {\n  updateCommunity(community: $community, communityId: $communityId, icon: $icon) {\n    ...EditCommunityQueryData\n  }\n}\n    ",""]);return Oc=function(){return e},e}function jc(){var e=Object(i.a)(["\n    query editCommunityData($communityId: String!) {\n  community(communityId: $communityId) {\n    ...EditCommunityQueryData\n  }\n}\n    ",""]);return jc=function(){return e},e}function kc(){var e=Object(i.a)(["\n    fragment EditCommunityQueryData on Community {\n  id\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  updatedAt\n}\n    "]);return kc=function(){return e},e}var wc=R()(kc()),Cc=R()(jc(),wc);var Ic=R()(Oc(),wc);var Tc=function(e){var n,t=V.c(Ic,n),r=Object(u.a)(t,2),i=r[0],l=r[1],c=function(e){return V.d(Cc,e)}({variables:{communityId:e}}),m=iC(function(){var n=Object(o.a)(a.a.mark((function n(t){var r,o,u,m,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m=t.community,s=t.icon,!l.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",i({variables:{communityId:e,icon:ua(s,null===(r=c.data)||void 0===r||null===(o=r.community)||void 0===o||null===(u=o.icon)||void 0===u?void 0:u.url),community:{name:m.name,summary:m.summary}}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,l,i,c]);return Object(x.useMemo)((function(){var e,n=null===(e=c.data)||void 0===e?void 0:e.community;return{edit:m,community:n}}),[m,c])};function Fc(){var e=Object(i.a)(["\n    query communityData($communityId: String!) {\n  community(communityId: $communityId) {\n    id\n    ...CommunityPageData\n  }\n}\n    ",""]);return Fc=function(){return e},e}var Sc=R()(Fc(),Gi);var Pc=function(e){var n,t,r=sa().me,a=(t={variables:{communityId:e}},V.d(Sc,t)),i=yc(e,"Community").createThread,o=null===(n=a.data)||void 0===n?void 0:n.community,l=lC(o).toggleFollow,c=Tc(e).edit,u=!!r&&!!(null===o||void 0===o?void 0:o.creator)&&r.user.id===o.creator.id,m=!!(null===r||void 0===r?void 0:r.isInstanceAdmin)||u;return Object(x.useMemo)((function(){return{community:o,createThread:i,toggleJoin:l,edit:c,canModify:m,isCreator:u}}),[o,l,c,m,i,u])},Mc=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:je}},V.d(Ec,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.threads,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{communityId:e,limit:je}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.threads)&&(null===(a=e.community)||void 0===a?void 0:a.threads)?Object(c.a)(Object(c.a)({},i),{},{community:Object(c.a)(Object(c.a)({},i.community),{},{threads:r({prev:e.community.threads,fetched:i.community.threads})})}):e}})}));return Object(x.useMemo)((function(){return{threadsPage:i}}),[i])},_c=function(e){var n,t,r,a=(r={variables:{communityId:e,limit:je}},V.d(aa,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.community)||void 0===t?void 0:t.followers,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,communityId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.followers)&&(null===(a=e.community)||void 0===a?void 0:a.followers)?Object(c.a)(Object(c.a)({},i),{},{community:Object(c.a)(Object(c.a)({},i.community),{},{followers:r({prev:e.community.followers,fetched:i.community.followers})})}):e}})}));return Object(x.useMemo)((function(){return{communityFollowersPage:i}}),[i])};function Lc(){var e=Object(i.a)(["\n    fragment HeroCollectionMeData on Me {\n  user {\n    id\n  }\n}\n    "]);return Lc=function(){return e},e}function Uc(){var e=Object(i.a)(["\n    fragment HeroCollectionData on Collection {\n  id\n  name\n  displayUsername\n  summary\n  icon {\n    id\n    url\n  }\n  community {\n    id\n    name\n    icon {\n      id\n      url\n    }\n    myFollow {\n      id\n    }\n  }\n  followerCount\n  followers {\n    totalCount\n  }\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  creator {\n    id\n  }\n}\n    "]);return Uc=function(){return e},e}var Ac=R()(Uc());R()(Lc());function Rc(){var e=Object(i.a)(["\n    fragment CollectionPageActivity on Activity {\n  id\n  ...ActivityPreview\n}\n    ",""]);return Rc=function(){return e},e}function Bc(){var e=Object(i.a)(["\n    fragment CollectionPageResource on Resource {\n  id\n  createdAt\n  ...ResourcePreview\n}\n    ",""]);return Bc=function(){return e},e}function Nc(){var e=Object(i.a)(["\n    fragment CollectionPageData on Collection {\n  name\n  ...HeroCollectionData\n}\n    ",""]);return Nc=function(){return e},e}var zc=R()(Nc(),Ac),Dc=R()(Bc(),yi);R()(Rc(),Li);function $c(){var e=Object(i.a)(["\n    mutation createCollection($collection: CollectionInput!, $contextId: String!, $icon: UploadInput) {\n  createCollection(collection: $collection, contextId: $contextId, icon: $icon) {\n    ...CollectionPageData\n  }\n}\n    ",""]);return $c=function(){return e},e}var qc=R()($c(),zc);var Vc=function(e){var n,t=V.c(qc,n),r=Object(u.a)(t,2),i=r[0],l=r[1],c=iC(function(){var n=Object(o.a)(a.a.mark((function n(t){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.collection,o=t.icon,!l.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",i({variables:{contextId:e,icon:ua(o,null),collection:{name:r.name,summary:r.summary,preferredUsername:r.preferredUsername}},refetchQueries:[(a={communityId:e,limit:je},c=void 0,{query:fc,variables:a,context:c}),cc({communityId:e,limit:je}),Ni({limit:je}),$t({limit:je}),Ur({limit:je})]}));case 4:case"end":return n.stop()}var a,c}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,l,i]);return Object(x.useMemo)((function(){return{create:c}}),[c])};function Qc(){var e=Object(i.a)(["\n  color: ",";\n"]);return Qc=function(){return e},e}function Wc(){var e=Object(i.a)(["\n  color: ",";\n"]);return Wc=function(){return e},e}function Hc(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return Hc=function(){return e},e}function Jc(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return Jc=function(){return e},e}function Kc(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return Kc=function(){return e},e}function Zc(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return Zc=function(){return e},e}function Gc(){var e=Object(i.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n\n  & > div {\n    width: calc((100% - 20px) / 2);\n  }\n"]);return Gc=function(){return e},e}function Yc(){var e=Object(i.a)(["\n  position: relative;\n\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n\n  .d-flex {\n    display: flex;\n    justify-content: space-between;\n    align-items: stretch;\n\n    .item_col-6 {\n      flex-basis: calc(50% - 5px);\n    }\n\n    .item_photo {\n      margin-bottom: 10px;\n      flex-basis: 140px;\n      height: 140px;\n\n      .bopsip {\n        height: 140px !important;\n      }\n    }\n    .item_info {\n      margin-bottom: 10px;\n      flex-basis: calc(100% - 160px);\n    }\n  }\n"]);return Yc=function(){return e},e}var Xc,eu,nu=_n(el)(Yc()),tu=_n.div(Gc()),ru=_n.div(Zc(),Object(it.a)(),(function(e){return e.theme.colors.mediumdark}),w.a.lessThan("medium")(Kc()),(function(e){return e.theme.colors.mediumdark})),au=_n(Ln.Flex)(Jc(),w.a.lessThan("medium")(Hc())),iu=_n(Ln.Text)(Wc(),(function(e){return e.theme.colors.mediumdark})),ou=_n(Ln.Text)(Qc(),(function(e){return e.theme.colors.mediumdark})),lu={placeholders:{name:Object(nt.i18nMark)("Choose a name for the collection"),summary:Object(nt.i18nMark)("Please describe what the collection is for and what kind of resources it is likely to contain..."),icon:Object(nt.i18nMark)("Enter the URL of an image to represent the collection")}},cu=function(e){var n=e.cancel,t=e.formik,r=x.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return x.createElement(Go,null,x.createElement("form",{onSubmit:t.handleSubmit},x.createElement(nl,null,x.createElement(Ln.Heading,{m:2},x.createElement(nt.Trans,{id:"Create a new collection"}))),x.createElement(au,null,x.createElement(Ln.Box,{sx:{width:"120px",height:"120px"}},x.createElement(vo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),x.createElement(ru,null,x.createElement(iu,{fontWeight:"bold"},x.createElement(nu,null,x.createElement(da.b,{placeholder:lu.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),x.createElement(Xo,null,60-t.values.name.length),t.errors.name&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.name)))),x.createElement(ou,{mt:2},x.createElement(nu,null,x.createElement(da.d,{placeholder:lu.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),x.createElement(Xo,null,500-t.values.summary.length),t.errors.summary&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.summary)))))),x.createElement(Yo,null,x.createElement(ct,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.createElement(nt.Trans,{id:"Save"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"})))))},uu=ci.object({name:ci.string().min(2).max(60).required(),summary:ci.string().max(500),icon:(Xc=ci.mixed()).test.apply(Xc,Object(C.a)(El))}),mu=function(e){var n=e.communityId,t=e.done,r=Object(Pn.h)(),a=Vc(n).create,i=Object(qt.a)({initialValues:{name:"",summary:"",icon:""},enableReinitialize:!0,onSubmit:function(e){return a({collection:{preferredUsername:e.name.split(" ").join("_"),name:e.name,summary:e.summary},icon:e.icon}).then((function(e){var n,t;return(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.createCollection)||void 0===t?void 0:t.id)&&r.push("/collections/".concat(e.data.createCollection.id))})).catch((function(e){return console.log(e)}))},validationSchema:uu});return E.a.createElement(cu,{cancel:t,formik:i})},su=t(121),du=t(766),fu=t(767);function vu(){var e=Object(i.a)(["\n   padding: 8px;\n"]);return vu=function(){return e},e}function pu(){var e=Object(i.a)(["\n  padding: 16px;\n  "," & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return pu=function(){return e},e}function bu(){var e=Object(i.a)(["\n//     display: none;\n// "]);return bu=function(){return e},e}function gu(){var e=Object(i.a)(["\n  margin-top: 24px;\n  height: 250px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-color: ",";\n  position: relative;\n  margin: 0 auto;\n  border-radius: 4px;\n  background-position: center center;\n//   ",";\n"]);return gu=function(){return e},e}function hu(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  background: ",";\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n"]);return hu=function(){return e},e}function xu(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  text-transform: lowercase;\n"]);return xu=function(){return e},e}function Eu(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Eu=function(){return e},e}function yu(){var e=Object(i.a)(["\n"]);return yu=function(){return e},e}function Ou(){var e=Object(i.a)(["\n  color: ",";\n  ",";\n"]);return Ou=function(){return e},e}function ju(){var e=Object(i.a)(["\n  align-items: center;\n  justify-content: space-between;\n"]);return ju=function(){return e},e}function ku(){var e=Object(i.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return ku=function(){return e},e}function wu(){var e=Object(i.a)(["\n    border-top: 1px solid ",";\n    // svg {\n    //   stroke: ",";\n    // }\n    "]);return wu=function(){return e},e}function Cu(){var e=Object(i.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return Cu=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(eu||(eu={}));var Iu=_n(Ln.Box)(Cu()),Tu=_n(Kl)(wu(),(function(e){return Object(it.b)("0.1",e.theme.colors.light)}),(function(e){return Object(it.b)("0.1",e.theme.colors.primary)})),Fu=_n(Ln.Box)(ku(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),Su=_n(Ln.Flex)(ju()),Pu=_n(Ln.Text)(Ou(),(function(e){return e.theme.colors.darker}),w.a.lessThan("medium")(yu())),Mu=_n(Ln.Flex)(Eu()),_u=_n(Ln.Text)(xu(),(function(e){return e.theme.colors.mediumdark})),Lu=_n(Ln.Box)(hu(),(function(e){return e.theme.colors.appInverse})),Uu=_n.div(gu(),(function(e){return e.theme.colors.medium}),w.a.lessThan("medium")(bu())),Au=_n.div(pu(),w.a.lessThan("medium")(vu())),Ru=function(e){var n=e.community;return n.status===eu.Loading?E.a.createElement(Ln.Text,null,"Loading..."):E.a.createElement(E.a.Fragment,null,E.a.createElement(Lu,{p:1},E.a.createElement(Uu,{id:"header",style:{backgroundImage:'url("'.concat(n.icon,'")')}}),E.a.createElement(Au,null,E.a.createElement(Pu,{variant:"heading",mt:0},n.name),E.a.createElement(_u,null,"@",n.fullName),n.summary&&E.a.createElement(Ln.Box,{mt:2},E.a.createElement(su.a,null,n.summary)),E.a.createElement(Su,{mt:3},E.a.createElement(Mu,null,E.a.createElement(ct,{mr:2,variant:n.following?"danger":"primary",isSubmitting:n.toggleJoinFormik.isSubmitting,isDisabled:n.toggleJoinFormik.isSubmitting||n.isCreator,onClick:n.toggleJoinFormik.submitForm},n.following?E.a.createElement(nt.Trans,{id:"Leave"}):E.a.createElement(nt.Trans,{id:"Join"})),E.a.createElement(Fu,{onClick:n.toggleDropdown},E.a.createElement(du.a,{size:20}),n.isOpenDropdown&&E.a.createElement(Iu,null,E.a.createElement(Hl,{orientation:"bottom",close:n.toggleDropdown},n.canModify&&E.a.createElement(Kl,{onClick:n.edit},E.a.createElement(Bl.a,{size:20,color:"rgb(101, 119, 134)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},E.a.createElement(nt.Trans,{id:"Edit the community"}))),E.a.createElement(Kl,{onClick:n.flag},E.a.createElement(fu.a,{size:20,color:"rgb(101, 119, 134)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},n.isFlagged?E.a.createElement(nt.Trans,{id:"Unflag this community"}):E.a.createElement(nt.Trans,{id:"Flag this community"}))),n.isAdmin?E.a.createElement(Tu,{onClick:n.addToFeatured},E.a.createElement(Rl.a,{size:20,color:"rgb(211, 103, 5)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},E.a.createElement(nt.Trans,{id:"Add to featured list"}))):null))))))))};function Bu(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return Bu=function(){return e},e}function Nu(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return Nu=function(){return e},e}function zu(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return zu=function(){return e},e}function Du(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return Du=function(){return e},e}function $u(){var e=Object(i.a)(["\n  color: ",";\n"]);return $u=function(){return e},e}function qu(){var e=Object(i.a)(["\n  color: ",";\n"]);return qu=function(){return e},e}function Vu(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return Vu=function(){return e},e}var Qu,Wu={placeholders:{name:Object(nt.i18nMark)("Choose a name for the community"),summary:Object(nt.i18nMark)("Please describe who might be interested in this community and what kind of collections it is likely to contain..."),icon:Object(nt.i18nMark)("Enter the URL of an image to represent the community")}},Hu=function(e){var n=e.cancel,t=e.formik,r=x.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return x.createElement(Go,null,x.createElement("form",{onSubmit:t.handleSubmit},x.createElement(Yu,null,x.createElement(Ln.Box,{sx:{width:"120px",height:"120px"}},x.createElement(vo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),x.createElement(Gu,null,x.createElement(Ku,{fontWeight:"bold"},x.createElement(Ju,null,x.createElement(da.b,{placeholder:Wu.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),x.createElement(Xo,null,60-t.values.name.length),t.errors.name&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.name)))),x.createElement(Zu,{mt:2},x.createElement(Ju,null,x.createElement(da.d,{placeholder:Wu.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),x.createElement(Xo,null,500-t.values.summary.length),t.errors.summary&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.summary)))))),x.createElement(Yo,null,x.createElement(ct,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.createElement(nt.Trans,{id:"Save"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"})))))},Ju=_n(el)(Vu()),Ku=_n(Ln.Text)(qu(),(function(e){return e.theme.colors.mediumdark})),Zu=_n(Ln.Text)($u(),(function(e){return e.theme.colors.mediumdark})),Gu=_n.div(Du(),Object(it.a)(),(function(e){return e.theme.colors.mediumdark}),w.a.lessThan("medium")(zu()),(function(e){return e.theme.colors.mediumdark})),Yu=_n(Ln.Flex)(Nu(),w.a.lessThan("medium")(Bu())),Xu=ci.object({name:ci.string().min(2).max(60).required(),summary:ci.string().max(500),icon:(Qu=ci.mixed()).test.apply(Qu,Object(C.a)(El))}),em=function(e){var n=e.done,t=e.communityId,r=Tc(t),a=r.community,i=r.edit,o=Object(x.useMemo)((function(){var e;return{icon:(null===a||void 0===a||null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:(null===a||void 0===a?void 0:a.name)||"",summary:(null===a||void 0===a?void 0:a.summary)||""}}),[a]),l=Object(qt.a)({enableReinitialize:!0,onSubmit:function(e){return i({community:{name:e.name,summary:e.summary||void 0},icon:e.icon}).then(n)},validationSchema:Xu,initialValues:o});return E.a.createElement(Hu,{cancel:n,formik:l})};function nm(){var e=Object(i.a)(["\n    fragment DiscoverPageFeaturedCollectionInfo on Collection {\n  id\n  icon {\n    id\n    url\n  }\n  name\n}\n    "]);return nm=function(){return e},e}function tm(){var e=Object(i.a)(["\n    fragment DiscoverPageFeaturedCommunityInfo on Community {\n  id\n  icon {\n    id\n    url\n  }\n  name\n}\n    "]);return tm=function(){return e},e}var rm=R()(tm()),am=R()(nm());function im(){var e=Object(i.a)(["\n    fragment CollectionFeature on Feature {\n  id\n  context {\n    ...DiscoverPageFeaturedCollectionInfo\n  }\n}\n    ",""]);return im=function(){return e},e}var om=R()(im(),am);function lm(){var e=Object(i.a)(['\n    query instanceFeaturedCollections {\n  instance {\n    featuredCollections @connection(key: "instanceFeaturedCollections") {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CollectionFeature\n      }\n    }\n  }\n}\n    ',"\n",""]);return lm=function(){return e},e}var cm=R()(lm(),Nt,om);var um=function(e,n){return{query:cm,variables:e,context:n}};function mm(){var e=Object(i.a)(["\n    fragment CommunityFeature on Feature {\n  id\n  context {\n    ...DiscoverPageFeaturedCommunityInfo\n  }\n}\n    ",""]);return mm=function(){return e},e}var sm=R()(mm(),rm);function dm(){var e=Object(i.a)(['\n    query instanceFeaturedCommunities {\n  instance {\n    featuredCommunities @connection(key: "instanceFeaturedCommunities") {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommunityFeature\n      }\n    }\n  }\n}\n    ',"\n",""]);return dm=function(){return e},e}var fm=R()(dm(),Nt,sm);function vm(){var e=Object(i.a)(["\n    mutation addFeatured($contextId: String!) {\n  createFeature(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n      }\n      ... on Community {\n        id\n      }\n    }\n  }\n}\n    "]);return vm=function(){return e},e}var pm=R()(vm());var bm=function(e){var n,t=V.c(pm,n),r=Object(u.a)(t,2),i=r[0],l=r[1].loading,c=iC(Object(o.a)(a.a.mark((function n(){var t,r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isFeatured){n.next=5;break}if(t=e.actor,r=t.id,o=t.__typename,r&&o&&!l){n.next=4;break}return n.abrupt("return");case 4:return n.abrupt("return",i({variables:{contextId:r},refetchQueries:["Community"===o?(a={},c=void 0,{query:fm,variables:a,context:c}):um({})]}));case 5:case"end":return n.stop()}var a,c}),n)}))),[e]);return Object(x.useMemo)((function(){return{toggleFeatured:c}}),[c])};function gm(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return gm=function(){return e},e}var hm=function(e){var n=e.cancel,t=e.isFeatured,r=e.itemName,a=e.itemType,i=e.formik;return t?x.createElement(Go,null,x.createElement(nl,null,x.createElement(Ln.Heading,{m:2},x.createElement(nt.Trans,{id:"Remove from Featured List"}))),x.createElement(tl,null,x.createElement(el,null,x.createElement(Ln.Text,null,"Are you sure you want to remove ",r," ",a," from the featured list of the Discover Page?"))),x.createElement(Yo,null,x.createElement(xm,{variant:"primary",isSubmitting:i.isSubmitting,isDisabled:i.isSubmitting,style:{marginLeft:"10px"},onClick:i.submitForm},x.createElement(nt.Trans,{id:"Remove"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"})))):x.createElement(Go,null,x.createElement(nl,null,x.createElement(Ln.Heading,{m:2},x.createElement(nt.Trans,{id:"Add To Featured List"}))),x.createElement(tl,null,x.createElement(el,null,x.createElement(Ln.Text,null,"Are you sure you want to add ",r," ",a," to the featured list of the Discover Page?"))),x.createElement(Yo,null,x.createElement(xm,{variant:"primary",isSubmitting:i.isSubmitting,isDisabled:i.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:i.submitForm},x.createElement(nt.Trans,{id:"Add"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"}))))},xm=_n(ct)(gm()),Em=function(e){var n=e.ctx,t=e.featureId,r=e.done,a=Object(x.useMemo)((function(){return t?{isFeatured:!0,featureId:t,__typename:n.__typename}:{isFeatured:!1,actor:n}}),[n,t]),i=bm(a).toggleFeatured,o=Object(qt.a)({initialValues:{},onSubmit:function(){return i().then(r)}}),l=Object(x.useMemo)((function(){return{isFeatured:!!t,itemName:n.name,itemType:n.__typename||"",formik:o,cancel:r}}),[n.__typename,n.name,r,t,o]);return l&&E.a.createElement(hm,l)};function ym(){var e=Object(i.a)(['\n    query allFlags($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  flags(limit: $limit, before: $before, after: $after) @connection(key: "allFlags") {\n    edges {\n      ...FlagPreview\n    }\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n  }\n}\n    ',"\n",""]);return ym=function(){return e},e}var Om=R()(ym(),Ti,Nt);var jm=function(e,n){return{query:Om,variables:e,context:n}};function km(){var e=Object(i.a)(["\n    mutation unflag($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Flag {\n      context {\n        ... on Collection {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Comment {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Community {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on Resource {\n          id\n          myFlag {\n            id\n          }\n        }\n        ... on User {\n          userId: id\n          myFlag {\n            id\n          }\n        }\n      }\n    }\n  }\n}\n    "]);return km=function(){return e},e}function wm(){var e=Object(i.a)(["\n    mutation flag($contextId: String!, $message: String!) {\n  createFlag(contextId: $contextId, message: $message) {\n    context {\n      ... on Collection {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Comment {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Community {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on Resource {\n        id\n        myFlag {\n          id\n        }\n      }\n      ... on User {\n        userId: id\n        myFlag {\n          id\n        }\n      }\n    }\n  }\n}\n    "]);return wm=function(){return e},e}var Cm=R()(wm());var Im=R()(km());var Tm=function(e){var n,t=V.c(Cm,n),r=Object(u.a)(t,2),i=r[0],l=r[1],c=function(e){return V.c(Im,e)}(),m=Object(u.a)(c,2),s=m[0],d=m[1],f=l.loading||d.loading,v=iC(function(){var n=Object(o.a)(a.a.mark((function n(t){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&!e.myFlag&&!f){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",i({variables:{contextId:e.id,message:t},optimisticResponse:Fm(e.__typename,e.id),refetchQueries:[jm({})]}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,f]),p=iC(Object(o.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&e.myFlag&&!f){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",qr(e.myFlag.id)?void 0:s({variables:{contextId:e.myFlag.id},optimisticResponse:Sm(e.__typename,e.id)}));case 3:case"end":return n.stop()}}),n)}))),[e,f]);return Object(x.useMemo)((function(){return{flag:v,unflag:p}}),[v,p])},Fm=function(e,n){return{__typename:"RootMutationType",createFlag:{__typename:"Flag",context:{__typename:e,id:n,myFlag:{__typename:"Flag",id:"#"}}}}},Sm=function(e,n){return{__typename:"RootMutationType",delete:{__typename:"Flag",context:{__typename:e,id:n,myFlag:null}}}};function Pm(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return Pm=function(){return e},e}var Mm={placeholders:{flag:Object(nt.i18nMark)("Please describe the reason for flagging the item")}},_m=function(e){var n=e.cancel,t=e.flagFormik,r=e.isFlagged,a=e.unflagFormik,i=x.useContext(Oa).i18n;return r?x.createElement(Go,null,x.createElement(nl,null,x.createElement(Ln.Heading,null,x.createElement(nt.Trans,{id:"Unflag"}))),x.createElement(tl,null,x.createElement(el,null,x.createElement(nt.Trans,{id:"Are you sure you want to unflag this item?"}))),x.createElement(Yo,null,x.createElement(ct,{variant:"primary",isSubmitting:a.isSubmitting,isDisabled:a.isSubmitting,onClick:a.submitForm,style:{marginLeft:"10px"}},x.createElement(nt.Trans,{id:"Unflag"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"})))):x.createElement(Go,null,x.createElement(nl,null,x.createElement(Ln.Heading,null,x.createElement(nt.Trans,{id:"Report as inappropriate"}))),x.createElement(tl,{big:!0},x.createElement(el,null,x.createElement(da.d,{placeholder:i._(Mm.placeholders.flag),name:"reason",value:t.values.reason,onChange:t.handleChange}),x.createElement(Xo,null,200-t.values.reason.length),t.errors.reason&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.reason)))),x.createElement(Yo,null,x.createElement(Lm,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},x.createElement(nt.Trans,{id:"Send"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"}))))},Lm=_n(ct)(Pm()),Um=ci.object({reason:ci.string().max(200).required()}),Am=function(e){var n=e.done,t=e.ctx,r=Tm(t),a=r.unflag,i=r.flag,o=Object(qt.a)({onSubmit:function(){a(),n()},initialValues:{}}),l=Object(qt.a)({enableReinitialize:!0,onSubmit:function(e){i(e.reason),n()},validationSchema:Um,initialValues:{reason:""}});return E.a.createElement(_m,{cancel:n,isFlagged:!!t.myFlag,flagFormik:l,unflagFormik:o})},Rm=function(e){var n=e.communityId,t=e.basePath,r=sa().isAdmin,a=Pc(n),i=a.toggleJoin,o=a.community,l=a.canModify,c=a.isCreator,m=Object(qt.a)({initialValues:{},onSubmit:i}),s=oC(),d=E.a.useReducer((function(e){return!e}),!1),f=Object(u.a)(d,2),v=f[0],p=f[1],b=Object(x.useReducer)((function(e){return!(!l||s())&&!e}),!1),g=Object(u.a)(b,2),h=g[0],y=g[1],O=o&&h?E.a.createElement(al,{closeModal:y},E.a.createElement(em,{communityId:o.id,done:y})):null,j=Object(x.useReducer)((function(e){return!s()&&!e}),!1),k=Object(u.a)(j,2),w=k[0],C=k[1],I=o&&w?E.a.createElement(al,{closeModal:C},E.a.createElement(Am,{done:C,ctx:o})):null,T=Object(x.useReducer)((function(e){return!(!r||s())&&!e}),!1),F=Object(u.a)(T,2),S=F[0],P=F[1],M=o&&S?E.a.createElement(al,{closeModal:P},E.a.createElement(Em,{done:P,ctx:o,featureId:null})):null,_=Object(x.useMemo)((function(){var e;return o?{community:{basePath:t,status:eu.Loaded,canModify:l,isAdmin:r,isCreator:c,following:!!o.myFollow,isFlagged:!!o.myFlag,icon:(null===(e=o.icon)||void 0===e?void 0:e.url)||"",name:o.name,fullName:o.displayUsername,totalMembers:o.followerCount||0,summary:o.summary||"",toggleJoinFormik:m,addToFeatured:P,edit:y,flag:C,isOpenDropdown:v,toggleDropdown:p}}:{community:{status:eu.Loading}}}),[o,t,l,r,c,m,v]);return E.a.createElement(E.a.Fragment,null,O,I,M,E.a.createElement(Ru,_))};function Bm(){var e=Object(i.a)(["\n    query activityPreview($activityId: String!) {\n  activity(activityId: $activityId) {\n    id\n    ...ActivityPreview\n  }\n}\n    ",""]);return Bm=function(){return e},e}var Nm=R()(Bm(),Li);var zm=function e(n){return n&&"Category"!==n.__typename&&"Intent"!==n.__typename&&"Organisation"!==n.__typename&&"SpatialThing"!==n.__typename&&"Taggable"!==n.__typename?"Flag"===n.__typename||"Follow"===n.__typename||"Like"===n.__typename?n.context?"Flag"===n.context.__typename||"Comment"===n.context.__typename||"Follow"===n.context.__typename||"Like"===n.context.__typename||"Resource"===n.context.__typename?null:e(n.context):null:n:null},Dm=function(e,n){if(!e)return"";var t=zm(e);if(!t)return"";var r=t.__typename;return"Flag"===e.__typename?"Flagged a ".concat(r):"Like"===e.__typename?"Starred a ".concat(r):"Follow"===e.__typename?"Followed a ".concat(r):"Resource"===e.__typename?"Added a ".concat(r):"Comment"===e.__typename?e.inReplyTo?"Replied to a discussion":"Started a discussion":n===fe.Created?"Created a ".concat(r):n===fe.Updated?"Updated a ".concat(r):"Acted on a ".concat(r)};function $m(){var e=Object(i.a)(["\n  align-self: flex-end;\n"]);return $m=function(){return e},e}function qm(){var e=Object(i.a)(["\n  height: 100%;\n  resize: none;\n  background: ",";\n  flex: 1;\n  border: 0 !important;\n  &:focus {\n    outline: none;\n  }\n  font-family: 'Barlow', 'Open Sans', sans-serif !important;\n"]);return qm=function(){return e},e}function Vm(){var e=Object(i.a)(["\n  position: relative;\n  width: 100%;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  margin-bottom: 8px;\n  background: white;\n  flex: 1;\n"]);return Vm=function(){return e},e}function Qm(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  height: 200px;\n  flex-direction: column;\n"]);return Qm=function(){return e},e}var Wm=_n(Ln.Flex)(Qm()),Hm=_n(Ln.Flex)(Vm(),(function(e){return e.theme.colors.border})),Jm=_n(da.d)(qm(),(function(e){return e.theme.colors.appInverse})),Km=_n(Ln.Flex)($m()),Zm=function(e){var n=e.submit,t=e.defaultValue,r=void 0===t?"":t,a=e.keepTextOnSubmit,i=void 0!==a&&a,o=e.placeholder,l=void 0===o?"":o,c=Object(x.useRef)(null),m=Object(x.useState)(r),s=Object(u.a)(m,2),d=s[0],f=s[1],v=Object(x.useCallback)((function(){d&&(n(d),i||f(""))}),[d,i,n]);Object(x.useEffect)((function(){c.current&&(c.current.value=d)}),[d]);var p=Object(x.useCallback)((function(){if(c.current){var e=c.current.value;f(e)}}),[f]);return E.a.createElement(Wm,null,E.a.createElement(Hm,null,E.a.createElement(Jm,{placeholder:l,ref:c,defaultValue:r,onInput:p})),E.a.createElement(Km,null,E.a.createElement(ct,{variant:"primary",sx:{cursor:d?"pointer":"default",textTransform:"capitalize"},onClick:v},E.a.createElement(nt.Trans,{id:"Publish"}))))};function Gm(){var e=Object(i.a)(["\n  border-bottom: ",";\n  height: 50px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 8px;\n  cursor: pointer;\n  background: ",";\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  a {\n    display: flex;\n    flex: 1;\n    text-decoration: none;\n  }\n"]);return Gm=function(){return e},e}function Ym(){var e=Object(i.a)(["\n  align-items: center;\n  a {\n    display: flex;\n    align-items: center;\n  }\n"]);return Ym=function(){return e},e}function Xm(){var e=Object(i.a)(["\n  margin-right: 8px;\n  .--rtl & {\n    margin-right: 0px;\n    margin-left: 8px;\n  }\n"]);return Xm=function(){return e},e}function es(){var e=Object(i.a)(["\n  //  border-bottom: ",";\n"]);return es=function(){return e},e}function ns(){var e=Object(i.a)(["\n  // background: ",";\n"]);return ns=function(){return e},e}function ts(){var e=Object(i.a)(["\n  text-transform: capitalize;\n"]);return ts=function(){return e},e}var rs={placeholders:{name:Object(nt.i18nMark)("Post a reply")}},as=function(e){var n=e.MainThread,t=e.Comments,r=e.communityId,a=e.communityName,i=e.communityIcon,o=e.Context,l=e.isCommunityContext,c=e.loadMoreComments,u=e.reply,m=x.useContext(Oa).i18n;return x.createElement(jt,null,x.createElement(kt,{mb:3},x.createElement(wt,null,x.createElement(Ct,null,x.createElement(Ln.Box,{mb:2},!l&&x.createElement(Ln.Box,{p:2},o),x.createElement(cs,null,n)),x.createElement(Tt,{className:"replies"},t),c&&x.createElement(mt,{LoadMoreFormik:c}),u&&x.createElement(ls,{my:3},x.createElement(Zm,{placeholder:m._(rs.placeholders.name),defaultValue:"",submit:function(e){u.replyFormik.setValues({replyMessage:e}),u.replyFormik.submitForm()}}))))),x.createElement(Zn,null,x.createElement(os,{mb:2,variant:"suptitle"},x.createElement(nt.Trans,null,"Community")),x.createElement(is,{id:r,name:a,icon:i})))},is=function(e){var n=e.id,t=e.name,r=e.icon;return x.createElement(x.Fragment,null,x.createElement(ss,null,x.createElement(ms,null,x.createElement(Kt.b,{to:"/communities/".concat(n)},x.createElement(us,null,x.createElement(Pl,{size:"s",src:r})),x.createElement(Ln.Text,{variant:"suptitle"},t)))))},os=_n(Ln.Text)(ts()),ls=_n(Ln.Box)(ns(),(function(e){return e.theme.colors.appInverse})),cs=_n(Ln.Box)(es(),(function(e){return e.theme.colors.border})),us=_n(Ln.Box)(Xm()),ms=_n(Ln.Flex)(Ym()),ss=_n(Ln.Flex)(Gm(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}));function ds(){var e=Object(i.a)(["\n    query commentPreview($commentId: String!) {\n  comment(commentId: $commentId) {\n    id\n    ...CommentPreview\n  }\n}\n    ",""]);return ds=function(){return e},e}var fs=R()(ds(),Ci);function vs(){var e=Object(i.a)(["\n    mutation unlike($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Like {\n      context {\n        ... on Collection {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Comment {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Community {\n          id\n          myLike {\n            id\n          }\n          likerCount\n        }\n        ... on Resource {\n          id\n          myLike {\n            id\n          }\n          likers {\n            totalCount\n          }\n        }\n        ... on User {\n          userId: id\n          myLike {\n            id\n          }\n          likerCount\n        }\n      }\n    }\n  }\n}\n    "]);return vs=function(){return e},e}function ps(){var e=Object(i.a)(["\n    mutation like($contextId: String!) {\n  createLike(contextId: $contextId) {\n    context {\n      ... on Collection {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Comment {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Community {\n        id\n        myLike {\n          id\n        }\n        likerCount\n      }\n      ... on Resource {\n        id\n        myLike {\n          id\n        }\n        likers {\n          totalCount\n        }\n      }\n      ... on User {\n        userId: id\n        myLike {\n          id\n        }\n        likerCount\n      }\n    }\n  }\n}\n    "]);return ps=function(){return e},e}var bs=R()(ps());var gs=R()(vs());var hs=function(e,n,t,r){var i,l=V.c(bs,i),c=Object(u.a)(l,2),m=c[0],s=c[1],d=function(e){return V.c(gs,e)}(),f=Object(u.a)(d,2),v=f[0],p=f[1],b=s.loading||p.loading,g=iC(Object(o.a)(a.a.mark((function i(){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&!b){a.next=2;break}return a.abrupt("return");case 2:if(n){a.next=6;break}return a.abrupt("return",m({variables:{contextId:e},optimisticResponse:xs(r,e,t||0)}));case 6:return a.abrupt("return",qr(n.id)?void 0:v({variables:{contextId:n.id},optimisticResponse:Es(r,e,t||0)}));case 7:case"end":return a.stop()}}),i)}))),[e,n,b,r,t]);return Object(x.useMemo)((function(){return{toggleLike:g}}),[g])},xs=function(e,n,t){return{__typename:"RootMutationType",createLike:{__typename:"Like",context:Object(c.a)({__typename:e,id:n,myLike:{__typename:"Like",id:"#"}},"Resource"===e?{likes:{__typename:"LikesEdges",totalCount:t+1}}:{likerCount:t+1})}}},Es=function(e,n,t){return{__typename:"RootMutationType",delete:{__typename:"Like",context:Object(c.a)({__typename:e,id:n,myLike:null},"Resource"===e?{likes:{__typename:"LikesEdges",totalCount:t-1}}:{likerCount:t-1})}}};function ys(){var e=Object(i.a)(['\n    query myInboxActivities($after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  me @connection(key: "myInboxActivities") {\n    user {\n      id\n      inbox(after: $after, before: $before, limit: $limit) {\n        totalCount\n        pageInfo {\n          ...FullPageInfo\n        }\n        edges {\n          ...MyInboxActivity\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return ys=function(){return e},e}function Os(){var e=Object(i.a)(["\n    fragment MyInboxActivity on Activity {\n  ...ActivityPreview\n}\n    ",""]);return Os=function(){return e},e}var js=R()(Os(),Li),ks=R()(ys(),Nt,js);function ws(){var e=Object(i.a)(['\n    query threadComments($threadId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  thread(threadId: $threadId) @connection(key: "threadComments", filter: ["threadId"]) {\n    comments(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CommentPreview\n      }\n    }\n  }\n}\n    ',"\n",""]);return ws=function(){return e},e}var Cs=R()(ws(),Nt,Ci);function Is(){var e=Object(i.a)(["\n    mutation reply($comment: CommentInput!, $inReplyToCommentId: String!, $threadId: String!) {\n  createReply(comment: $comment, inReplyToId: $inReplyToCommentId, threadId: $threadId) {\n    ...CommentPreview\n  }\n}\n    ",""]);return Is=function(){return e},e}var Ts=R()(Is(),Ci);var Fs=function(e,n,t){var r,i=V.c(Ts,r),l=Object(u.a)(i,2),m=l[0],s=l[1].loading,d=iC(function(){var r=Object(o.a)(a.a.mark((function r(i){var o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!s&&e&&e.thread){r.next=2;break}return r.abrupt("return");case 2:return o=e.thread.id,r.abrupt("return",m({variables:{threadId:o,inReplyToCommentId:e.id,comment:{content:i}},context:g({successMsg:function(){return"Sent reply ".concat(t?"@".concat(t," "):""," correctly")}}),refetchQueries:[Ni({limit:je}),(a={limit:je},l=void 0,{query:ks,variables:a,context:l})].concat(Object(C.a)(n?[cc({communityId:n,limit:je})]:[])),update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReply;if(r)try{var a,i=e.readQuery({query:Cs,variables:{threadId:o,limit:je}});if(!(null===i||void 0===i||null===(a=i.thread)||void 0===a?void 0:a.comments)||i.thread.comments.pageInfo.hasNextPage)return;var l=[].concat(Object(C.a)(i.thread.comments.edges),[r]),u=Object(c.a)(Object(c.a)({},i),{},{thread:Object(c.a)(Object(c.a)({},i.thread),{},{comments:Object(c.a)(Object(c.a)({},i.thread.comments),{},{edges:l})})});e.writeQuery({data:u,query:Cs,variables:{threadId:o,limit:je}})}catch(m){console.warn(m)}}}));case 4:case"end":return r.stop()}var a,l}),r)})));return function(e){return r.apply(this,arguments)}}(),[s,n,t]);return Object(x.useMemo)((function(){return{reply:d}}),[d])},Ss=function(e){var n,t,r,a,i,o,l,c,u,m,s,d,f,v,p,b=(p={variables:{commentId:e}},V.d(fs,p)),g=hs(null===(n=b.data)||void 0===n||null===(t=n.comment)||void 0===t?void 0:t.id,null===(r=b.data)||void 0===r||null===(a=r.comment)||void 0===a?void 0:a.myLike,null===(i=b.data)||void 0===i||null===(o=i.comment)||void 0===o?void 0:o.likerCount,"Comment").toggleLike,h=null===(l=b.data)||void 0===l||null===(c=l.comment)||void 0===c||null===(u=c.thread)||void 0===u?void 0:u.context,E="Resource"===(null===h||void 0===h?void 0:h.__typename)?null===(m=h.collection)||void 0===m?void 0:m.community:"Collection"===(null===h||void 0===h?void 0:h.__typename)?h.community:"Community"===(null===h||void 0===h?void 0:h.__typename)?h:void 0,y=!!(null===E||void 0===E?void 0:E.myFollow),O=Fs(null===(s=b.data)||void 0===s?void 0:s.comment,null===E||void 0===E?void 0:E.id,null===(d=b.data)||void 0===d||null===(f=d.comment)||void 0===f||null===(v=f.creator)||void 0===v?void 0:v.userName).reply;return Object(x.useMemo)((function(){var e;return{comment:null===(e=b.data)||void 0===e?void 0:e.comment,community:E,toggleLike:g,reply:O,canReply:y}}),[b,E,g,O,y])},Ps=t(768),Ms=t(769),_s=(t(651),t(145)),Ls=t.n(_s);function Us(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n  font-size: "," !important;\n  letter-spacing: 0 !important;\n  font-family: "," !important;\n  &.markdown-body {\n    box-sizing: border-box;\n    min-width: 200px;\n    max-width: 568px;\n  }\n"]);return Us=function(){return e},e}var As=_n(Ln.Text)(Us(),(function(e){return e.theme.colors.dark}),sn.s2,(function(e){return e.theme.fontFamily})),Rs=function(e){var n=e.content;return E.a.createElement(As,{className:"markdown-body",dangerouslySetInnerHTML:{__html:Ls.a.sanitize(n)},variant:"text"})};function Bs(){var e=Object(i.a)(["\n  background: ",";\n  a {\n    text-decoration: none\n    &:hover {\n      text-decoration: none;\n    }\n  }\n"]);return Bs=function(){return e},e}function Ns(){var e=Object(i.a)(["\n  font-size: ",";\n"]);return Ns=function(){return e},e}function zs(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return zs=function(){return e},e}function Ds(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return Ds=function(){return e},e}function $s(){var e=Object(i.a)(["\n  // border-top: ",";\n  margin-top: 16px;\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n  margin-top: 16px;\n"]);return $s=function(){return e},e}function qs(){var e=Object(i.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return qs=function(){return e},e}var Vs=function(e){var n=e.content,t=e.like,r=e.url,a=e.isFlagged,i=e.hideActions,o=e.isDropdownOpen,l=e.toggleDropdown,c=e.flag;return E.a.createElement(Zs,null,E.a.createElement(Rs,{content:n}),i?E.a.createElement(Ws,{mt:2},E.a.createElement(Ln.Box,null,E.a.createElement(Qs,null,E.a.createElement(Hs,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},E.a.createElement(Js,null,E.a.createElement(Rl.a,{strokeWidth:"1",size:"18"})),E.a.createElement(Ks,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",E.a.createElement(nt.Trans,{id:"Star"}))),E.a.createElement(Hs,{onClick:l,sx:{position:"relative"}},E.a.createElement(Js,null,E.a.createElement(Ps.a,{className:"hover",size:18})),E.a.createElement(Ks,{variant:"text",sx:{textTransform:"capitalize"},ml:1},E.a.createElement(nt.Trans,{id:"More"})),o&&E.a.createElement(Hl,{orientation:"bottom",close:l},E.a.createElement(Kl,{onClick:c},E.a.createElement(fu.a,{size:20,color:"rgb(101, 119, 134)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},a?E.a.createElement(nt.Trans,{id:"Unflag this comment"}):E.a.createElement(nt.Trans,{id:"Flag this comment"})))))))):E.a.createElement(Ws,{mt:2},E.a.createElement(Ln.Box,null,E.a.createElement(Qs,null,E.a.createElement(Hs,null,E.a.createElement(Kt.c,{to:r},E.a.createElement(Js,null,E.a.createElement(Ms.a,{className:"hover",strokeWidth:"1",color:"rgba(0,0,0,.4)",size:"18"})),E.a.createElement(Ks,{ml:1,variant:"text",sx:{textTransform:"capitalize"}},E.a.createElement(nt.Trans,{id:"Reply"})))),E.a.createElement(Hs,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},E.a.createElement(Js,null,E.a.createElement(Rl.a,{strokeWidth:"1",size:"18"})),E.a.createElement(Ks,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",E.a.createElement(nt.Trans,{id:"Star"}))),E.a.createElement(Hs,{onClick:l,sx:{position:"relative"}},E.a.createElement(Js,null,E.a.createElement(Ps.a,{className:"hover",size:18})),E.a.createElement(Ks,{variant:"text",sx:{textTransform:"capitalize"},ml:1},E.a.createElement(nt.Trans,{id:"More"})),o&&E.a.createElement(Hl,{orientation:"bottom",close:l},E.a.createElement(Kl,{onClick:c},E.a.createElement(fu.a,{size:20,color:"rgb(101, 119, 134)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},a?E.a.createElement(nt.Trans,{id:"Unflag this comment"}):E.a.createElement(nt.Trans,{id:"Flag this comment"})))))))))},Qs=_n(Ln.Flex)(qs()),Ws=_n(Ln.Box)($s(),(function(e){return e.theme.colors.border})),Hs=_n(Ln.Flex)(Ds(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(it.b)("0.1",e.theme.colors.secondary):Object(it.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),sn.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Js=_n(Ln.Box)(zs()),Ks=_n(Ln.Text)(Ns(),sn.s1),Zs=_n(Ln.Box)(Bs(),(function(e){return e.theme.colors.appInverse}));function Gs(){var e=Object(i.a)(["\n  background: ",";\n"]);return Gs=function(){return e},e}function Ys(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return Ys=function(){return e},e}function Xs(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return Xs=function(){return e},e}function ed(){var e=Object(i.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n"]);return ed=function(){return e},e}function nd(){var e=Object(i.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return nd=function(){return e},e}function td(){var e=Object(i.a)(["\n  color: ",";\n  img {\n    width: 100%;\n  }\n"]);return td=function(){return e},e}function rd(){var e=Object(i.a)(["\n  font-size: ",";\n"]);return rd=function(){return e},e}var ad=function(e){var n=e.isDropdownOpen,t=e.toggleDropdown,r=e.flag,a=e.content,i=e.like,o=e.isFlagged,l=e.hideActions;return E.a.createElement(Ln.Box,null,E.a.createElement(sd,null,E.a.createElement(od,{dangerouslySetInnerHTML:{__html:Ls.a.sanitize(a)},sx:{fontSize:"24px"},variant:"text",mb:2}),E.a.createElement(cd,{mt:2},l?null:E.a.createElement(Ln.Box,null,E.a.createElement(ld,null,E.a.createElement(ud,{liked:!!i.iLikeIt,onClick:i.toggleLikeFormik.submitForm},E.a.createElement(md,null,E.a.createElement(Rl.a,{strokeWidth:"1",size:"18"})),E.a.createElement(id,{variant:"text",sx:{textTransform:"capitalize"},ml:1},i.totalLikes+" "," ",E.a.createElement(nt.Trans,{id:"Star"}))),E.a.createElement(ud,{onClick:t,sx:{position:"relative"}},E.a.createElement(md,null,E.a.createElement(Ps.a,{className:"hover",size:18})),E.a.createElement(id,{variant:"text",sx:{textTransform:"capitalize"},ml:1},E.a.createElement(nt.Trans,{id:"More"})),n&&E.a.createElement(Hl,{orientation:"bottom",close:t},E.a.createElement(Kl,{onClick:r},E.a.createElement(fu.a,{size:20,color:"rgb(101, 119, 134)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},o?E.a.createElement(nt.Trans,{id:"Unflag this comment"}):E.a.createElement(nt.Trans,{id:"Flag this comment"}))))))))))},id=_n(Ln.Text)(rd(),sn.s1),od=_n(Ln.Text)(td(),(function(e){return e.theme.colors.dark})),ld=_n(Ln.Flex)(nd()),cd=_n(Ln.Box)(ed()),ud=_n(Ln.Flex)(Xs(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(it.b)("0.1",e.theme.colors.secondary):Object(it.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),sn.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),md=_n(Ln.Box)(Ys()),sd=_n(Ln.Box)(Gs(),(function(e){return e.theme.colors.appInverse})),dd=function(e){var n=e.commentId,t=e.mainComment,r=e.hideActions,a=Ss(n),i=a.comment,o=a.toggleLike,l=Object(qt.a)({initialValues:{},onSubmit:o}),c=Object(x.useReducer)((function(e){return!e}),!1),m=Object(u.a)(c,2),s=m[0],d=m[1],f=oC(),v=Object(x.useReducer)((function(e){return!f()&&!e}),!1),p=Object(u.a)(v,2),b=p[0],g=p[1],h=b&&i?E.a.createElement(al,{closeModal:g},E.a.createElement(Am,{done:g,ctx:i})):null,y=Object(x.useMemo)((function(){return i?{url:i.thread?"/thread/".concat(i.thread.id):"",content:i.content,like:{iLikeIt:!!i.myLike,totalLikes:i.likerCount||0,toggleLikeFormik:l},isFlagged:!!i.myFlag,hideActions:!!r,isDropdownOpen:s,toggleDropdown:d,flag:g}:null}),[i,r,s,l]);return y&&E.a.createElement(E.a.Fragment,null,h,t?E.a.createElement(ad,y):E.a.createElement(Vs,y))};function fd(){var e=Object(i.a)(["\n    query threadPreview($threadId: String!) {\n  thread(threadId: $threadId) {\n    id\n    ...ThreadPreview\n  }\n}\n    ",""]);return fd=function(){return e},e}var vd=R()(fd(),Wi);var pd,bd=function(e){var n,t,r,a,i,o,l,c,u,m,s=null===(n=(m={variables:{threadId:e}},V.d(vd,m)).data)||void 0===n?void 0:n.thread,d="Resource"===(null===s||void 0===s||null===(t=s.context)||void 0===t?void 0:t.__typename)?null===s||void 0===s||null===(r=s.context.collection)||void 0===r?void 0:r.community:"Collection"===(null===s||void 0===s||null===(a=s.context)||void 0===a?void 0:a.__typename)?null===s||void 0===s?void 0:s.context.community:"Community"===(null===s||void 0===s||null===(i=s.context)||void 0===i?void 0:i.__typename)?null===s||void 0===s?void 0:s.context:void 0,f=!!(null===d||void 0===d?void 0:d.myFollow),v=Fs(null===s||void 0===s||null===(o=s.comments)||void 0===o?void 0:o.edges[0],null===d||void 0===d?void 0:d.id,null===s||void 0===s||null===(l=s.comments)||void 0===l||null===(c=l.edges[0])||void 0===c||null===(u=c.creator)||void 0===u?void 0:u.userName).reply;return Object(x.useMemo)((function(){var e,n,t=null===s||void 0===s||null===(e=s.comments)||void 0===e?void 0:e.edges[0],r=null===s||void 0===s||null===(n=s.comments)||void 0===n?void 0:n.totalCount,a=null===s||void 0===s?void 0:s.context,i=null===s||void 0===s?void 0:s.lastActivity;return{mainComment:t,context:a,reply:v,canReply:f,lastActivity:i,totalReplies:r&&r-1,totalComments:(null===s||void 0===s?void 0:s.comments)?s.comments.totalCount-1:0}}),[f,v,s])},gd=function(e){var n="",t="",r="",a="";if(e&&"User"!==e.__typename){var i,o=function(e){return e?"Community"===e.__typename?e:"Collection"===e.__typename?e.community:"Resource"===e.__typename?null===(n=e.collection)||void 0===n?void 0:n.community:"Comment"===e.__typename?e.thread&&e.thread.context&&("Flag"===e.thread.context.__typename?null:"Resource"===e.thread.context.__typename?null===(t=e.thread.context.collection)||void 0===t?void 0:t.community:"Collection"===e.thread.context.__typename?e.thread.context.community:"Community"===e.thread.context.__typename?e.thread.context:null):null:null;var n,t}(e);if(o)n=Gk.getPath({communityId:o.id,tab:void 0},void 0),t=o.name,r=o.id,a=(null===(i=o.icon)||void 0===i?void 0:i.url)||""}return{communityLink:n,communityName:t,communityId:r,communityIcon:a}};function hd(){var e=Object(i.a)(["\n  position: relative;\n  padding: 16px;\n  word-wrap: break-word;\n  ",";\n  transition: background 0.5s ease;\n  margin-top: 0\n  z-index: 10;\n  position: relative;\n  border-radius: 4px;\n  background: ",";\n  margin-bottom: 8px;\n  a {\n    text-decoration: none;\n    &:hover {\n      text-decoration: underline\n    }\n  }\n\n"]);return hd=function(){return e},e}function xd(){var e=Object(i.a)([""]);return xd=function(){return e},e}function Ed(){var e=Object(i.a)(["\n  width: 100%;\n  margin-top: -4px;\n"]);return Ed=function(){return e},e}function yd(){var e=Object(i.a)(["\n  align-items: stretch;\n"]);return yd=function(){return e},e}function Od(){var e=Object(i.a)(["\n  font-weight: 600;\n  color: ",";\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  a {\n    font-weight: 800;\n    display: flex;\n    text-decoration: none;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n    color: "," !important;\n  }\n"]);return Od=function(){return e},e}function jd(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  font-size: ",";\n"]);return jd=function(){return e},e}function kd(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return kd=function(){return e},e}function wd(){var e=Object(i.a)([""]);return wd=function(){return e},e}function Cd(){var e=Object(i.a)(["\n  color: ",";\n  a {\n    font-weight: 600;\n    color: ",";\n  }\n"]);return Cd=function(){return e},e}function Id(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  font-size: ",";\n"]);return Id=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(pd||(pd={}));var Td=function(e){if(e.status===pd.Loading)return E.a.createElement(nt.Trans,{id:"loading..."});var n=e.event.toLowerCase(),t=n.includes("like")||n.includes("flag"),r=t?Sd:Fd,a=t&&n.includes("commented")||n.includes("discussion")||n.includes("comment")?e.threadUrl:void 0;return E.a.createElement(zd,{mb:2},e.actor&&E.a.createElement(r,{actor:e.actor,createdAt:e.createdAt,threadUrl:a,event:e.event,commentActor:n.includes("commented")?e.commentActor:void 0,communityLink:e.communityLink,communityName:e.communityName}),E.a.createElement(_d,{mt:2},E.a.createElement(Nd,null,e.preview)))},Fd=function(e){var n=e.actor,t=e.createdAt,r=e.event,a=e.threadUrl,i=e.communityName,o=e.communityLink;return E.a.createElement(Rd,null,n&&E.a.createElement(E.a.Fragment,null,E.a.createElement(Pl,{initials:n.name,src:n.icon,variant:"avatar"}),E.a.createElement(Bd,{ml:2},E.a.createElement(Ln.Flex,{mt:1,alignItems:"center"},E.a.createElement(Ln.Flex,{flex:1},E.a.createElement(Ad,null,E.a.createElement(Kt.b,{to:n.link},n.name)),E.a.createElement(Md,{sx:{textTransform:"lowercase"},variant:"text",ml:1},a?E.a.createElement(Kt.b,{to:a},r):r))),E.a.createElement(Ln.Flex,{sx:{marginTop:"2px"},alignItems:"center"},E.a.createElement(Ud,null,fa.DateTime.fromSQL(t).toRelative()),E.a.createElement(Ld,{mx:1},"\xb7"),E.a.createElement(Pd,{to:o},i)))))},Sd=function(e){var n=e.actor,t=e.commentActor,r=e.event,a=e.threadUrl;return E.a.createElement(Rd,{sx:{alignItems:"center !important"}},E.a.createElement(Pl,{size:"s",initials:t?t.name:n.name,src:t?t.icon:n.icon,variant:"avatar"}),E.a.createElement(Bd,{sx:{marginTop:0},ml:2},E.a.createElement(Ln.Flex,{alignItems:"center"},E.a.createElement(Ln.Flex,{flex:1},E.a.createElement(Ad,null,E.a.createElement(Kt.b,{to:t?t.link:n.link},t?t.name:n.name)),E.a.createElement(Md,{sx:{textTransform:"lowercase"},variant:"text",ml:1},a?E.a.createElement(Kt.b,{to:a},r):r)))))},Pd=_n(Kt.b)(Id(),(function(e){return e.theme.colors.mediumdark}),sn.s1),Md=_n(Ln.Text)(Cd(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.darker})),_d=_n(Ln.Box)(wd()),Ld=_n(Ln.Text)(kd(),(function(e){return e.theme.colors.mediumdark})),Ud=_n(Ln.Text)(jd(),(function(e){return e.theme.colors.mediumdark}),sn.s1),Ad=_n(Ln.Text)(Od(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),Rd=_n(Ln.Flex)(yd()),Bd=_n(Ln.Box)(Ed()),Nd=_n(Ln.Box)(xd()),zd=_n(Ln.Box)(hd(),Object(it.a)(),(function(e){return e.theme.colors.appInverse}));function Dd(){var e=Object(i.a)(["\n    fragment HeroUserUserData on User {\n  id\n  image {\n    id\n    url\n  }\n  icon {\n    id\n    url\n  }\n  displayUsername\n  location\n  summary\n  name\n  myFollow {\n    id\n  }\n  myFlag {\n    id\n  }\n  followerCount\n}\n    "]);return Dd=function(){return e},e}var $d=R()(Dd());function qd(){var e=Object(i.a)(["\n    fragment UserPageUserData on User {\n  id\n  userId: id\n  collectionFollows {\n    totalCount\n  }\n  communityFollows {\n    totalCount\n  }\n  userFollows {\n    totalCount\n  }\n  outbox {\n    totalCount\n  }\n  website\n  userName: name\n  ...HeroUserUserData\n}\n    ",""]);return qd=function(){return e},e}function Vd(){var e=Object(i.a)(["\n    fragment UserPageActivities on Activity {\n  id\n}\n    "]);return Vd=function(){return e},e}var Qd=R()(Vd()),Wd=R()(qd(),$d);function Hd(){var e=Object(i.a)(['\n    query userOutboxActivities($userId: String!, $after: [Cursor!], $before: [Cursor!], $limit: Int) {\n  user(userId: $userId) @connection(key: "userOutboxActivities", filter: ["userId"]) {\n    id\n    outbox(after: $after, before: $before, limit: $limit) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...UserOutboxActivity\n      }\n    }\n  }\n}\n    ',"\n",""]);return Hd=function(){return e},e}function Jd(){var e=Object(i.a)(["\n    fragment UserOutboxActivity on Activity {\n  ...UserPageActivities\n  ...ActivityPreview\n}\n    ","\n",""]);return Jd=function(){return e},e}var Kd=R()(Jd(),Qd,Li),Zd=R()(Hd(),Nt,Kd);var Gd=function(e){var n,t,r,a=(r={variables:{userId:e,limit:je}},V.d(Zd,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.outbox,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.outbox)&&(null===(a=e.user)||void 0===a?void 0:a.outbox)?Object(c.a)(Object(c.a)({},i),{},{user:Object(c.a)(Object(c.a)({},i.user),{},{outbox:r({prev:e.user.outbox,fetched:i.user.outbox})})}):e}})}));return Object(x.useMemo)((function(){return{activitiesPage:i}}),[i])};function Yd(){var e=Object(i.a)(['\n    query userFollowedCollections($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedCollections", filter: ["userId"]) {\n    id\n    collectionFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Collection {\n            ...UserFollowedCollection\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return Yd=function(){return e},e}function Xd(){var e=Object(i.a)(["\n    fragment UserFollowedCollection on Collection {\n  ...CollectionPreview\n}\n    ",""]);return Xd=function(){return e},e}var ef=R()(Xd(),Rt),nf=R()(Yd(),Nt,ef);var tf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:je}},V.d(nf,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.collectionFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.collectionFollows)&&(null===(a=e.user)||void 0===a?void 0:a.collectionFollows)?Object(c.a)(Object(c.a)({},i),{},{user:Object(c.a)(Object(c.a)({},i.user),{},{collectionFollows:r({prev:e.user.collectionFollows,fetched:i.user.collectionFollows})})}):e}})}));return Object(x.useMemo)((function(){return{followedCollectionsPage:i}}),[i])};function rf(){var e=Object(i.a)(['\n    query userFollowedCommunities($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedCommunities", filter: ["userId"]) {\n    id\n    communityFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on Community {\n            ...UserFollowedCommunity\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return rf=function(){return e},e}function af(){var e=Object(i.a)(["\n    fragment UserFollowedCommunity on Community {\n  ...CommunityPreview\n}\n    ",""]);return af=function(){return e},e}var of=R()(af(),Ut),lf=R()(rf(),Nt,of);var cf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:je}},V.d(lf,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.communityFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.communityFollows)&&(null===(a=e.user)||void 0===a?void 0:a.communityFollows)?Object(c.a)(Object(c.a)({},i),{},{user:Object(c.a)(Object(c.a)({},i.user),{},{communityFollows:r({prev:e.user.communityFollows,fetched:i.user.communityFollows})})}):e}})}));return Object(x.useMemo)((function(){return{followedCommunitiesPage:i}}),[i])};function uf(){var e=Object(i.a)(['\n    query userLikes($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) {\n    id\n    likes(limit: $limit, before: $before, after: $after) @connection(key: "userLikes") {\n      edges {\n        ...LikePreview\n      }\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n    }\n  }\n}\n    ',"\n",""]);return uf=function(){return e},e}var mf=R()(uf(),Si,Nt);var sf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:je}},V.d(mf,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.likes,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.likes)&&(null===(a=e.user)||void 0===a?void 0:a.likes)?Object(c.a)(Object(c.a)({},i),{},{user:Object(c.a)(Object(c.a)({},i.user),{},{likes:r({prev:e.user.likes,fetched:i.user.likes})})}):e}})}));return Object(x.useMemo)((function(){return{likesPage:i}}),[i])};function df(){var e=Object(i.a)(['\n    query userFollowedUsers($userId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  user(userId: $userId) @connection(key: "userFollowedUsers", filter: ["userId"]) {\n    id\n    userFollows(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        id\n        context {\n          ... on User {\n            ...UserFollowedUser\n          }\n        }\n      }\n    }\n  }\n}\n    ',"\n",""]);return df=function(){return e},e}function ff(){var e=Object(i.a)(["\n    fragment UserFollowedUser on User {\n  ...UserPreview\n}\n    ",""]);return ff=function(){return e},e}var vf=R()(ff(),Kr),pf=R()(df(),Nt,vf);var bf=function(e){var n,t,r,a=(r={variables:{userId:e,limit:je}},V.d(pf,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.userFollows,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,userId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.userFollows)&&(null===(a=e.user)||void 0===a?void 0:a.userFollows)?Object(c.a)(Object(c.a)({},i),{},{user:Object(c.a)(Object(c.a)({},i.user),{},{userFollows:r({prev:e.user.userFollows,fetched:i.user.userFollows})})}):e}})}));return Object(x.useMemo)((function(){return{followedUsersPage:i}}),[i])};function gf(){var e=Object(i.a)(["\n    query userData($userId: String!) {\n  user(userId: $userId) {\n    ...UserPageUserData\n  }\n}\n    ",""]);return gf=function(){return e},e}var hf=R()(gf(),Wd);var xf,Ef=function(e){var n,t,r=(t={variables:{userId:e}},V.d(hf,t)),a=sa(),i=a.me,o=a.isAdmin,l=null===(n=r.data)||void 0===n?void 0:n.user,c=lC(l).toggleFollow;return Object(x.useMemo)((function(){var e,n,t,a,l,u=null===(e=r.data)||void 0===e?void 0:e.user,m=null===u||void 0===u||null===(n=u.collectionFollows)||void 0===n?void 0:n.totalCount,s=null===u||void 0===u||null===(t=u.communityFollows)||void 0===t?void 0:t.totalCount,d=null===u||void 0===u||null===(a=u.userFollows)||void 0===a?void 0:a.totalCount,f=null===u||void 0===u||null===(l=u.outbox)||void 0===l?void 0:l.totalCount;return{isMe:!(!i||!u||i.user.id!==u.id),isAdmin:o,user:u,toggleFollow:c,totalCollections:m,totalCommunities:s,totalUsers:d,totalActivities:f}}),[i,r,c,o])};function yf(){var e=Object(i.a)(["\n  & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return yf=function(){return e},e}function Of(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  border-radius: 6px;\n"]);return Of=function(){return e},e}function jf(){var e=Object(i.a)(["\n  width: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: ",";\n  border: 3px solid ",";\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 16px;\n"]);return jf=function(){return e},e}function kf(){var e=Object(i.a)(["\n  padding: 24px;\n  padding-top: 0;\n  z-index: 9999;\n  position: relative;\n  margin-top: -60px;\n  padding-bottom: 0;\n"]);return kf=function(){return e},e}function wf(){var e=Object(i.a)(["\n  height: 250px;\n  margin: -4px;\n  background: ",';\n  background-image: url("','");\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  position: relative;\n']);return wf=function(){return e},e}function Cf(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n    .--rtl & {\n      margin-left: 8px;\n      margin-right: 0px;\n    }\n  }\n"]);return Cf=function(){return e},e}function If(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return If=function(){return e},e}function Tf(){var e=Object(i.a)(["\n  background: ",";\n  padding-bottom: 16px;\n"]);return Tf=function(){return e},e}function Ff(){var e=Object(i.a)(["\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n"]);return Ff=function(){return e},e}function Sf(){var e=Object(i.a)(["\n  justify-content: space-between;\n  ",";\n"]);return Sf=function(){return e},e}function Pf(){var e=Object(i.a)(["\n  color: ",";\n"]);return Pf=function(){return e},e}function Mf(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Mf=function(){return e},e}function _f(){var e=Object(i.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return _f=function(){return e},e}function Lf(){var e=Object(i.a)(["\n  padding: 1px 8px;\n  border: 1px solid ",";\n  border-radius: 2px;\n  color: ",";\n  display: inline-block;\n"]);return Lf=function(){return e},e}function Uf(){var e=Object(i.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return Uf=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(xf||(xf={}));var Af=function(e){return e.status===xf.Loading?null:E.a.createElement(qf,{p:1},E.a.createElement(Kf,null,E.a.createElement(Wf,{src:e.image}),E.a.createElement($f,null,E.a.createElement(Hf,null,E.a.createElement(Jf,{style:{backgroundImage:'url("'.concat(e.icon,'")')}})),E.a.createElement(zf,{mr:2},e.me?E.a.createElement(E.a.Fragment,null):E.a.createElement(E.a.Fragment,null,E.a.createElement(ct,{mr:2,variant:e.following?"danger":"primary",isSubmitting:e.toggleFollowFormik.isSubmitting,isDisabled:e.toggleFollowFormik.isSubmitting,onClick:e.toggleFollowFormik.submitForm},e.following?E.a.createElement(nt.Trans,{id:"Unfollow"}):E.a.createElement(nt.Trans,{id:"Follow"})),E.a.createElement(Nf,null,E.a.createElement(du.a,{size:20,onClick:e.toggleDropdown}),e.isOpenDropdown&&E.a.createElement(Rf,null,E.a.createElement(Hl,{orientation:"bottom",close:e.toggleDropdown},E.a.createElement(Kl,{onClick:e.flag},E.a.createElement(fu.a,{size:20,color:"rgb(101, 119, 134)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},e.isFlagged?E.a.createElement(nt.Trans,{id:"Unflag this user"}):E.a.createElement(nt.Trans,{id:"Flag this user"})," ")))))))),E.a.createElement(Zf,{ml:3},E.a.createElement(Df,{sx:{fontSize:"18px"},mt:2,variant:"heading",fontWeight:"bold"},e.name),E.a.createElement(Vf,{mt:1},"@",e.displayUsername,e.me&&e.isAdmin&&E.a.createElement(Bf,{ml:2},"Admin")),E.a.createElement(Ln.Box,{mt:2},E.a.createElement(Rs,{content:e.summary})),e.location?E.a.createElement(Qf,{mt:2},E.a.createElement("span",null,E.a.createElement(Cl.a,{strokeWidth:1,size:20})),e.location):null)))},Rf=_n(Ln.Box)(Uf()),Bf=_n(Ln.Box)(Lf(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary})),Nf=_n(Ln.Box)(_f(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),zf=_n(Ln.Flex)(Mf()),Df=_n(Ln.Text)(Pf(),(function(e){return e.theme.colors.darker})),$f=_n(Ln.Flex)(Sf(),w.a.lessThan("860px")(Ff())),qf=_n(Ln.Box)(Tf(),(function(e){return e.theme.colors.appInverse})),Vf=_n(Ln.Text)(If(),(function(e){return e.theme.colors.mediumdark})),Qf=_n(Ln.Flex)(Cf(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Wf=_n.div(wf(),(function(e){return e.theme.colors.light}),(function(e){return e.src?e.src:e.theme.colors.light})),Hf=_n.div(kf()),Jf=_n.div(jf(),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.appInverse})),Kf=_n.div(Of()),Zf=_n(Ln.Box)(yf()),Gf=function(e){var n=e.userId,t=Ef(n),r=t.user,a=t.isAdmin,i=t.isMe,o=t.toggleFollow,l=Object(x.useReducer)((function(e){return!e}),!1),m=Object(u.a)(l,2),s=m[0],d=m[1],f=Object(qt.a)({initialValues:{},onSubmit:o}),v=oC(),p=Object(x.useReducer)((function(e){return!v()&&!e}),!1),b=Object(u.a)(p,2),g=b[0],h=b[1],y=r&&g?E.a.createElement(al,{closeModal:h},E.a.createElement(Am,{done:h,ctx:r})):null,O=Object(x.useMemo)((function(){var e,n;if(!r)return{status:xf.Loading};var t={status:xf.Loaded,displayUsername:r.displayUsername,icon:(null===(e=r.icon)||void 0===e?void 0:e.url)||"",image:(null===(n=r.image)||void 0===n?void 0:n.url)||"",location:r.location||"",name:r.name||"",summary:r.summary||"",isFlagged:!!r.myFlag};return i?Object(c.a)({isAdmin:a,me:i},t):Object(c.a)({flag:h,me:i,following:!!r.myFollow,isOpenDropdown:s,toggleDropdown:d,toggleFollowFormik:f},t)}),[i,r,f,a,s]);return E.a.createElement(E.a.Fragment,null,y,E.a.createElement(Af,O))};function Yf(){var e=Object(i.a)(["\n    query communityPreview($communityId: String!) {\n  community(communityId: $communityId) {\n    id\n    ...CommunityPreview\n  }\n}\n    ",""]);return Yf=function(){return e},e}var Xf=R()(Yf(),Ut);var ev=function(e){var n,t,r,a=(r={variables:{communityId:e}},V.d(Xf,r)),i=sa().me,o=null===(n=a.data)||void 0===n?void 0:n.community,l=lC(null===(t=a.data)||void 0===t?void 0:t.community).toggleFollow,c=!!i&&!!(null===o||void 0===o?void 0:o.creator)&&i.user.id===o.creator.id;return Object(x.useMemo)((function(){var e;return{community:null===(e=a.data)||void 0===e?void 0:e.community,toggleJoin:l,isCreator:c}}),[a,l,c])},nv=t(771);function tv(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n  word-break: break-all;\n"]);return tv=function(){return e},e}function rv(){var e=Object(i.a)(["\n  position: relative;\n  div {\n    width: 100%;\n    heigth: 150px;\n    background-repeat: no-repeat;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n  &:hover {\n    & span {\n      display: block;\n    }\n  }\n"]);return rv=function(){return e},e}function av(){var e=Object(i.a)(["\n  position: relative;\n  max-height: 560px;\n  overflow: hidden;\n  z-index: 9;\n  // padding-bottom: 0;\n  cursor: pointer;\n  background: ",";\n  &:hover {\n    background: ",";\n  }\n    \n    text-decoration: none;\n  }\n  &&& a {\n    color: inherit;\n    text-decoration: none;\n    &&&:hover {\n      text-decoration: none;\n    }\n  }\n"]);return av=function(){return e},e}function iv(){var e=Object(i.a)(["\n  border: ",";\n  border-radius: 4px;\n"]);return iv=function(){return e},e}function ov(){var e=Object(i.a)(["\n  color: ",";\n  // justify-content: space-evenly;\n"]);return ov=function(){return e},e}function lv(){var e=Object(i.a)(["\n  color: ",";\n  flex: 1;\n"]);return lv=function(){return e},e}function cv(){var e=Object(i.a)(["\n  text-decoration: none;\n"]);return cv=function(){return e},e}function uv(){var e=Object(i.a)(["\n  svg {\n    margin: 0;\n  }\n"]);return uv=function(){return e},e}function mv(){var e=Object(i.a)(["\n  button {\n    width: 100%;\n  }\n"]);return mv=function(){return e},e}function sv(){var e=Object(i.a)(["\n  color: ",";\n"]);return sv=function(){return e},e}var dv=function(e){var n=e.name,t=e.icon,r=e.summary,a=e.isCreator,i=e.followersCount,o=e.joined,l=e.toggleJoinFormik,c=e.collectionsCount,u=e.link,m=e.displayUsername,s=e.hideActions,d=e.isSearch;return E.a.createElement(xv,null,d&&E.a.createElement(gr,null,E.a.createElement(nt.Trans,{id:"Community"})),E.a.createElement(Ev,{p:2},E.a.createElement(bv,{link:u},E.a.createElement(yv,null,E.a.createElement(Pl,{size:"l",src:t})),E.a.createElement(Ln.Box,{p:2},E.a.createElement(Ln.Flex,null,E.a.createElement(Ln.Box,{flex:1},E.a.createElement(Ov,{variant:"heading"},n.length>60?n.replace(/^(.{56}[^\s]*).*/,"$1..."):n),E.a.createElement(gv,null,m))),r?E.a.createElement(fv,{variant:"text",mt:2},r.length>90?r.replace(/^([\s\S]{86}[^\s]*)[\s\S]*/,"$1..."):r):null),E.a.createElement(hv,{px:2},E.a.createElement(pv,{mt:2,alignItems:"center"},E.a.createElement(_l.a,{size:18}),E.a.createElement(Ln.Text,{ml:2,variant:"suptitle"},i||0," ",E.a.createElement(nt.Trans,{id:"Users"}))),E.a.createElement(pv,{mt:2,alignSelf:"center",alignItems:"center"},E.a.createElement(nv.a,{size:18}),E.a.createElement(Ln.Text,{ml:2,variant:"suptitle"},c||0," ",E.a.createElement(nt.Trans,{id:"Collections"}))),s?null:E.a.createElement(vv,{my:3},E.a.createElement(ct,{variant:"outline",isDisabled:!!a,isSubmitting:l.isSubmitting,onClick:function(e){e.preventDefault(),l.submitForm()}},E.a.createElement(Ln.Text,{variant:"suptitle"},o?E.a.createElement(nt.Trans,{id:"Leave"}):E.a.createElement(nt.Trans,{id:"Join"}))))))))},fv=_n(Ln.Text)(sv(),(function(e){return e.theme.colors.dark})),vv=_n(Ln.Box)(mv()),pv=_n(Ln.Flex)(uv()),bv=_n(Gt)(cv()),gv=_n(Ln.Text)(lv(),(function(e){return e.theme.colors.mediumdark})),hv=_n(Ln.Box)(ov(),(function(e){return e.theme.colors.mediumdark})),xv=_n(Ln.Box)(iv(),(function(e){return e.theme.colors.border})),Ev=_n(Ln.Box)(av(),(function(e){return e.theme.colors.appInverse}),(function(e){return Object(it.b)("0.05",e.theme.colors.appInverse)})),yv=_n.div(rv()),Ov=_n(Ln.Heading)(tv(),(function(e){return e.theme.colors.darker})),jv=function(e){var n=e.communityId,t=e.flagged,r=ev(n),a=r.community,i=r.toggleJoin,o=r.isCreator,l=Object(qt.a)({initialValues:{},onSubmit:i}),c=Object(x.useMemo)((function(){return a?kv({community:a,hideActions:!!t,isCreator:o,toggleJoinFormik:l}):null}),[a,t,o,l]);return c&&E.a.createElement(dv,c)},kv=function(e){var n=e.community,t=e.hideActions,r=e.toggleJoinFormik,a=e.isCreator,i=n.id,o=n.canonicalUrl,l=n.icon,c=n.name,u=n.summary,m=n.myFollow,s=n.collectionCount,d=n.followerCount,f=n.threads,v=n.displayUsername,p=n.isLocal;return{icon:(null===l||void 0===l?void 0:l.url)||"",name:c,isCreator:a,summary:u||"",collectionsCount:s||0,joined:!!m,followersCount:d||0,threadsCount:(null===f||void 0===f?void 0:f.totalCount)||0,toggleJoinFormik:r,link:{url:p?"/communities/".concat(i):o||"",external:!p},displayUsername:v,hideActions:t}};function wv(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return wv=function(){return e},e}var Cv={placeholders:{name:Object(nt.i18nMark)("Website"),flag:Object(nt.i18nMark)("Please write the Moodle LMS instance")}},Iv=function(e){var n=e.cancel,t=e.sendToMoodleFormik,r=x.useContext(Oa).i18n;return x.createElement(Go,null,x.createElement(nl,null,x.createElement(Ln.Heading,{m:2},x.createElement(nt.Trans,{id:"Send to Moodle"}))),x.createElement(tl,{big:!0},x.createElement(el,null,x.createElement(da.b,{placeholder:r._(Cv.placeholders.flag),name:"site",value:t.values.site,onChange:t.handleChange}),x.createElement(Xo,null,200-t.values.site.length),t.errors.site&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.site)))),x.createElement(Yo,null,x.createElement(Tv,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},x.createElement(nt.Trans,{id:"Send"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"}))))},Tv=_n(ct)(wv());function Fv(){var e=Object(i.a)(["\n    query instanceInfo {\n  instance {\n    description\n    extraInfo\n    hostname\n    uploadIconTypes\n    uploadImageTypes\n    uploadMaxBytes\n    uploadResourceTypes\n  }\n}\n    "]);return Fv=function(){return e},e}var Sv=R()(Fv());function Pv(e){return V.d(Sv,e)}var Mv=pa("session")("LMS_"),_v=function(e){var n=Pv().data,t=Lv(),r=t.updateLMSPrefs,a=t.currentLMSPrefs,i=Object(x.useCallback)((function(t){if(!(null===n||void 0===n?void 0:n.instance)||!e)return!1;var r=JSON.stringify(e),a=n.instance.uploadResourceTypes.includes(e.mediaType)?"file":"link";return function(e,n,t,r){var a=r.site,i=r.course,o=r.section,l=document.createElement("form");l.target="_blank",l.method="POST",l.action="".concat(a,"/admin/tool/moodlenet/import.php"),l.style.display="none";var c={resourceurl:e,course:i,section:o,type:t,resource_info:n};Object.entries(c).forEach((function(e){var n=Object(u.a)(e,2),t=n[0],r=n[1],a=document.createElement("input");a.type="hidden",a.name=t,a.value=r||"",l.appendChild(a)})),document.body.appendChild(l),l.submit(),document.body.removeChild(l)}(e.url,r,a,t),!0}),[n,e]);return Object(x.useMemo)((function(){return{updateLMSPrefs:r,sendToLMS:i,currentLMSPrefs:a}}),[r,i,a])},Lv=function(){var e=sa(),n=e.loading,t=e.me,r=e.updateProfile,i=null===t||void 0===t?void 0:t.user,l=Object(x.useState)(Mv.get("Prefs")),c=Object(u.a)(l,2),m=c[0],s=c[1];Object(x.useEffect)((function(){var e;(null===i||void 0===i||null===(e=i.extraInfo)||void 0===e?void 0:e.LMS)?s(i.extraInfo.LMS):s(Mv.get("Prefs"))}),[i]);var d=Object(x.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),Mv.set("Prefs",t),n||!i){e.next=5;break}return e.next=5,r({profile:{extraInfo:{LMS:t}}});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,i,n]);return Object(x.useMemo)((function(){return{updateLMSPrefs:d,currentLMSPrefs:m,loading:n}}),[d,m,n])},Uv=ci.object({site:ci.string().matches(qe).required()}),Av=function(e){var n=e.done,t=e.resource,r=_v(t),a=r.currentLMSPrefs,i=r.sendToLMS,o=r.updateLMSPrefs,l=Object(qt.a)({initialValues:a||{site:""},enableReinitialize:!0,validationSchema:Uv,onSubmit:function(e){var t=!a||a.site!==e.site,r=t?Object(c.a)(Object(c.a)({},e),{},{course:void 0,section:void 0}):a;r&&(t&&o(r),n(i(r)))}});return E.a.createElement(Iv,{cancel:n,sendToMoodleFormik:l})};function Rv(){var e=Object(i.a)(["\n    query resourcePreview($resourceId: String!) {\n  resource(resourceId: $resourceId) {\n    id\n    ...ResourcePreview\n  }\n}\n    ",""]);return Rv=function(){return e},e}var Bv=R()(Rv(),yi);var Nv=function(e){var n,t,r,a,i,o,l,c,u=(c={variables:{resourceId:e}},V.d(Bv,c)),m=hs(null===(n=u.data)||void 0===n||null===(t=n.resource)||void 0===t?void 0:t.id,null===(r=u.data)||void 0===r||null===(a=r.resource)||void 0===a?void 0:a.myLike,null===(i=u.data)||void 0===i||null===(o=i.resource)||void 0===o||null===(l=o.likers)||void 0===l?void 0:l.totalCount,"Resource").toggleLike;return Object(x.useMemo)((function(){var e;return{resource:null===(e=u.data)||void 0===e?void 0:e.resource,toggleLike:m}}),[u,m])},zv=function(e){var n=Dv(null===e||void 0===e?void 0:e.community);if(!e||!n)return null;var t=e.preferredUsername,r=e.canonicalUrl,a=e.icon,i=e.summary;return{canonicalUrl:r||"",icon:a,name:e.name,preferredUsername:t,summary:i||"",community:n}},Dv=function(e){if(!e)return null;var n=e.name,t=e.preferredUsername,r=e.icon,a=e.summary;return{canonicalUrl:e.canonicalUrl||"",icon:(null===r||void 0===r?void 0:r.url)||"",name:n,preferredUsername:t,summary:a||""}};function $v(){var e=Object(i.a)(["\n    mutation editCollection($collection: CollectionUpdateInput!, $collectionId: String!, $icon: UploadInput) {\n  updateCollection(collection: $collection, collectionId: $collectionId, icon: $icon) {\n    ...EditCollectionQueryData\n  }\n}\n    ",""]);return $v=function(){return e},e}function qv(){var e=Object(i.a)(["\n    query editCollectionData($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    ...EditCollectionQueryData\n  }\n}\n    ",""]);return qv=function(){return e},e}function Vv(){var e=Object(i.a)(["\n    fragment EditCollectionQueryData on Collection {\n  id\n  name\n  summary\n  icon {\n    id\n    url\n  }\n  updatedAt\n}\n    "]);return Vv=function(){return e},e}var Qv=R()(Vv()),Wv=R()(qv(),Qv);var Hv=R()($v(),Qv);var Jv=function(e){var n,t=V.c(Hv,n),r=Object(u.a)(t,2),i=r[0],l=r[1],c=function(e){return V.d(Wv,e)}({variables:{collectionId:e}}),m=iC(function(){var n=Object(o.a)(a.a.mark((function n(t){var r,o,u,m,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m=t.collection,s=t.icon,!l.loading){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",i({variables:{collectionId:e,icon:ua(s,null===(r=c.data)||void 0===r||null===(o=r.collection)||void 0===o||null===(u=o.icon)||void 0===u?void 0:u.url),collection:{name:m.name,summary:m.summary}}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,i,l,c]);return Object(x.useMemo)((function(){var e,n=null===(e=c.data)||void 0===e?void 0:e.collection;return{edit:m,collection:n}}),[m,c])};function Kv(){var e=Object(i.a)(["\n    query collectionData($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    ...CollectionPageData\n  }\n}\n    ",""]);return Kv=function(){return e},e}var Zv=R()(Kv(),zc);var Gv=function(e){var n,t,r,a=sa().me,i=null===(n=(r={variables:{collectionId:e}},V.d(Zv,r)).data)||void 0===n?void 0:n.collection,o=lC(i).toggleFollow,l=Jv(e).edit,c=!!(null===i||void 0===i||null===(t=i.community)||void 0===t?void 0:t.myFollow),u=!!a&&!!(null===i||void 0===i?void 0:i.creator)&&a.user.id===i.creator.id,m=!!(null===a||void 0===a?void 0:a.isInstanceAdmin)||u;return Object(x.useMemo)((function(){return{isCommunityMember:c,isCreator:u,collection:i,toggleJoin:o,edit:l,canModify:m}}),[i,u,o,l,m,c])};function Yv(){var e=Object(i.a)(['\n    query collectionResources($collectionId: String!, $limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  collection(collectionId: $collectionId) @connection(key: "collectionResources", filter: ["collectionId"]) {\n    id\n    resources(limit: $limit, before: $before, after: $after) {\n      totalCount\n      pageInfo {\n        ...FullPageInfo\n      }\n      edges {\n        ...CollectionResource\n      }\n    }\n  }\n}\n    ',"\n",""]);return Yv=function(){return e},e}function Xv(){var e=Object(i.a)(["\n    fragment CollectionResource on Resource {\n  ...CollectionPageResource\n}\n    ",""]);return Xv=function(){return e},e}var ep=R()(Xv(),Dc),np=R()(Yv(),Nt,ep);var tp=function(e){var n,t,r,a=(r={variables:{collectionId:e,limit:je}},V.d(np,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.collection)||void 0===t?void 0:t.resources,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,collectionId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.collection)||void 0===t?void 0:t.resources)&&(null===(a=e.collection)||void 0===a?void 0:a.resources)?Object(c.a)(Object(c.a)({},i),{},{collection:Object(c.a)(Object(c.a)({},i.collection),{},{resources:r({prev:e.collection.resources,fetched:i.collection.resources})})}):e}})}));return Object(x.useMemo)((function(){return{resourcesPage:i}}),[i])},rp=function(e){var n,t,r,a=(r={variables:{collectionId:e,limit:je}},V.d(Xr,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.collection)||void 0===t?void 0:t.followers,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,collectionId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.collection)||void 0===t?void 0:t.followers)&&(null===(a=e.collection)||void 0===a?void 0:a.followers)?Object(c.a)(Object(c.a)({},i),{},{collection:Object(c.a)(Object(c.a)({},i.collection),{},{followers:r({prev:e.collection.followers,fetched:i.collection.followers})})}):e}})}));return Object(x.useMemo)((function(){return{collectionFollowersPage:i}}),[i])};function ap(){var e=Object(i.a)(["\n    fragment AddResourceCreateResourceMutationResult on Resource {\n  id\n  ...ResourcePreview\n}\n    ",""]);return ap=function(){return e},e}var ip=R()(ap(),yi);function op(){var e=Object(i.a)(["\n    mutation addResourceCreateResource($contextId: String!, $resource: ResourceInput!, $icon: UploadInput, $content: UploadInput!) {\n  createResource(contextId: $contextId, resource: $resource, content: $content, icon: $icon) {\n    id\n    ...AddResourceCreateResourceMutationResult\n  }\n}\n    ",""]);return op=function(){return e},e}var lp=R()(op(),ip);var cp=function(){var e,n=V.c(lp,e),t=Object(u.a)(n,2),r=t[0],i=t[1],l=iC(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.collectionId,o=n.content,l=n.icon,c=n.resource,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{contextId:t,resource:c,content:ma(o),icon:ua(l,null)},refetchQueries:[(a={collectionId:t,limit:je},u=void 0,{query:np,variables:a,context:u})]}));case 4:case"end":return e.stop()}var a,u}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(x.useMemo)((function(){return{create:l}}),[l])};function up(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return up=function(){return e},e}function mp(){var e=Object(i.a)(["\n  height: 40px;\n  background: white;\n  border-radius: 2px;\n  border: ",";\n"]);return mp=function(){return e},e}function sp(){var e=Object(i.a)(["\n  position: absolute;\n  left: -9999px;\n  &:hover {\n    + ",",\n    + ",",\n    + "," {\n      border: 4px solid #97a395;\n    }\n  }\n  &:checked{\n    + ",",\n    + ",",\n    + "," {\n      border: 4px solid #67d654;\n    }\n"]);return sp=function(){return e},e}function dp(){var e=Object(i.a)(['\n  background-image: url("','");\n']);return dp=function(){return e},e}function fp(){var e=Object(i.a)(['\n  background-image: url("','");\n']);return fp=function(){return e},e}function vp(){var e=Object(i.a)(['\n  background-image: url("','");\n']);return vp=function(){return e},e}function pp(){var e=Object(i.a)(["\n  background-repeat: no-repeat;\n  background-position: center center;\n  width: 110px !important;\n  line-height: 38px !important;\n  display: inline-block;\n  background-size: contain;\n  margin-right: 4px;\n  border: 4px solid transparent;\n  text-indent: -9999px;\n  cursor: pointer;\n  border-radius: 5px;\n"]);return pp=function(){return e},e}function bp(){var e=Object(i.a)(["\n  display: block;\n"]);return bp=function(){return e},e}function gp(){var e=Object(i.a)(["\n  width: 200px;\n"]);return gp=function(){return e},e}function hp(){var e=Object(i.a)(["\n  background: ",";\n"]);return hp=function(){return e},e}function xp(){var e=Object(i.a)([""]);return xp=function(){return e},e}var Ep,yp=t(652),Op=t(653),jp=t(654),kp={placeholders:{name:Object(nt.i18nMark)("A title for the resource"),summary:Object(nt.i18nMark)("Please type or copy/paste a summary about the resource..."),submit:Object(nt.i18nMark)("Uploading the resource")}},wp=function(e){var n=e.cancel,t=e.formik,r=e.acceptedLicenses,a=e.hideIconField,i=Object(u.a)(r,3),o=i[0],l=i[1],m=i[2],s=x.useContext(Oa).i18n,d=x.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{resource:e}))}),[t]),f="string"===typeof t.values.resource?t.values.resource:"",v=x.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),p="string"===typeof t.values.icon?t.values.icon:"";return x.createElement(Ip,null,x.createElement(tl,null,x.createElement("label",null,x.createElement(nt.Trans,{id:"Resource"})),x.createElement(el,null,x.createElement(vo,{initialUrl:f,onFileSelect:d,uploadType:"resource"}),x.createElement(Cp,null,x.createElement(nt.Trans,{id:"Max filesize: 20MB"})))),x.createElement(tl,null,x.createElement("label",null,x.createElement(nt.Trans,{id:"Title"})),x.createElement(el,null,x.createElement(x.Fragment,null,x.createElement(Up,{placeholder:s._(kp.placeholders.name),name:"name",value:t.values.name,onChange:t.handleChange}),x.createElement(Xo,null,90-t.values.name.length)),t.errors.name&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.name)))),x.createElement(tl,{big:!0},x.createElement("label",null,x.createElement(nt.Trans,{id:"Description"})),x.createElement(el,null,x.createElement(x.Fragment,null,x.createElement(da.d,{placeholder:s._(kp.placeholders.summary),name:"summary",value:t.values.summary,onChange:t.handleChange}),x.createElement(Xo,null,1e3-t.values.summary.length)))),a?null:x.createElement(tl,null,x.createElement("label",null,x.createElement(nt.Trans,{id:"Image"})),x.createElement(el,null,x.createElement(Ln.Box,{sx:{width:"120px",height:"120px"}},x.createElement(vo,{initialUrl:p,onFileSelect:v,filePattern:"image/*"})))),x.createElement(tl,null,x.createElement(Tp,null,x.createElement("label",null,x.createElement(nt.Trans,{id:"CC License"})),x.createElement(Fp,{href:"https://blog.moodle.net/2019/free-cultural-works/",target:"blank"},x.createElement(nt.Trans,{id:"Confused? Read this!"}))),x.createElement(el,null,x.createElement(Lp,{type:"radio",name:"license",id:o,value:o,checked:t.values.license===o,onChange:t.handleChange}),x.createElement(Pp,{htmlFor:o},o),x.createElement(Lp,{type:"radio",name:"license",id:l,value:l,checked:t.values.license===l,onChange:t.handleChange}),x.createElement(Mp,{htmlFor:l},l),x.createElement(Lp,{type:"radio",name:"license",id:m,value:m,checked:t.values.license===m,onChange:t.handleChange}),x.createElement(_p,{htmlFor:m},m))),x.createElement(Yo,null,x.createElement(Ap,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},x.createElement(nt.Trans,{id:"Publish"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"}))))},Cp=_n(Ln.Text)(xp()),Ip=_n(Ln.Box)(hp(),(function(e){return e.theme.colors.appInverse})),Tp=_n.div(gp()),Fp=_n.a(bp()),Sp=_n.label(pp()),Pp=_n(Sp)(vp(),yp),Mp=_n(Sp)(fp(),Op),_p=_n(Sp)(dp(),jp),Lp=_n.input(sp(),Pp,Mp,_p,Pp,Mp,_p),Up=_n(da.b)(mp(),(function(e){return e.theme.colors.border})),Ap=_n(ct)(up()),Rp=ci.object({name:ci.string().max(90).required("title is required"),summary:ci.string().max(1e3),icon:(Ep=ci.mixed()).test.apply(Ep,Object(C.a)(El)),resource:ci.mixed().required(),license:ci.string()}),Bp={name:"",summary:"",icon:"",license:Ve[1],resource:null},Np=function(e){var n=e.done,t=e.collectionId,r=cp().create,a=Object(qt.a)({validationSchema:Rp,initialValues:Bp,enableReinitialize:!0,validateOnBlur:!1,validateOnChange:!1,onSubmit:function(e){var a=e.resource,i=e.icon,o=e.name,l=e.license,c=e.summary;if(a)return r({collectionId:t,resource:{name:o,summary:c,license:l},content:a,icon:i}).then(n)}}),i=!a.values.resource||-1!==a.values.resource.type.indexOf("image");return Object(x.useEffect)((function(){i&&a.values.icon&&a.setValues(Object(c.a)(Object(c.a)({},a.values),{},{icon:null}))}),[a,i]),E.a.createElement(wp,{hideIconField:i,cancel:n,formik:a,acceptedLicenses:Ve})};function zp(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return zp=function(){return e},e}function Dp(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return Dp=function(){return e},e}function $p(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return $p=function(){return e},e}function qp(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return qp=function(){return e},e}function Vp(){var e=Object(i.a)(["\n  color: ",";\n"]);return Vp=function(){return e},e}function Qp(){var e=Object(i.a)(["\n  color: ",";\n"]);return Qp=function(){return e},e}function Wp(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return Wp=function(){return e},e}var Hp,Jp,Kp={placeholders:{name:Object(nt.i18nMark)("Edit the name of the collection"),summary:Object(nt.i18nMark)("Please describe what the collection is for and what kind of resources it is likely to contain..."),icon:Object(nt.i18nMark)("Enter the URL of an icon to represent the collection")}},Zp=function(e){var n=e.cancel,t=e.formik,r=x.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return x.createElement(Go,null,x.createElement("form",{onSubmit:t.handleSubmit},x.createElement(nb,null,x.createElement(Ln.Box,{sx:{width:"120px",height:"120px"}},x.createElement(vo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),x.createElement(eb,null,x.createElement(Yp,{fontWeight:"bold"},x.createElement(Gp,null,x.createElement(da.b,{placeholder:Kp.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),x.createElement(Xo,null,60-t.values.name.length),t.errors.name&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.name)))),x.createElement(Xp,{mt:2},x.createElement(Gp,null,x.createElement(da.d,{placeholder:Kp.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),x.createElement(Xo,null,500-t.values.summary.length),t.errors.summary&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.summary)))))),x.createElement(Yo,null,x.createElement(ct,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.createElement(nt.Trans,{id:"Save"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"})))))},Gp=_n(el)(Wp()),Yp=_n(Ln.Text)(Qp(),(function(e){return e.theme.colors.mediumdark})),Xp=_n(Ln.Text)(Vp(),(function(e){return e.theme.colors.mediumdark})),eb=_n.div(qp(),Object(it.a)(),(function(e){return e.theme.colors.mediumdark}),w.a.lessThan("medium")($p()),(function(e){return e.theme.colors.mediumdark})),nb=_n(Ln.Flex)(Dp(),w.a.lessThan("medium")(zp())),tb=ci.object({name:ci.string().min(2).max(60).required(),summary:ci.string().max(500),icon:(Hp=ci.mixed()).test.apply(Hp,Object(C.a)(El))}),rb=function(e){var n=e.done,t=e.collectionId,r=Jv(t),a=r.collection,i=r.edit,o=Object(x.useMemo)((function(){var e;return{icon:(null===a||void 0===a||null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:(null===a||void 0===a?void 0:a.name)||"",summary:(null===a||void 0===a?void 0:a.summary)||""}}),[a]),l=Object(qt.a)({enableReinitialize:!0,onSubmit:function(e){return i({collection:{name:e.name,summary:e.summary||void 0},icon:e.icon}).then(n)},validationSchema:tb,initialValues:o});return E.a.createElement(Zp,{cancel:n,formik:l})};function ab(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n"]);return ab=function(){return e},e}function ib(){var e=Object(i.a)(["\n  margin-bottom: 16px;\n  border-radius: 6px;\n  box-sizing: border-box;\n  background: ",";\n"]);return ib=function(){return e},e}function ob(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return ob=function(){return e},e}function lb(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return lb=function(){return e},e}function cb(){var e=Object(i.a)([""]);return cb=function(){return e},e}function ub(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  text-transform: lowercase;\n"]);return ub=function(){return e},e}function mb(){var e=Object(i.a)(["\n  color: ",";\n"]);return mb=function(){return e},e}function sb(){var e=Object(i.a)(["\n  border-top: 1px solid ",";\n"]);return sb=function(){return e},e}function db(){var e=Object(i.a)(["\n  position: relative;\n  cursor: pointer;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  border: ",";\n  border-radius: 4px;\n  svg {\n    margin: 0 auto;\n    stroke: ",";\n  }\n"]);return db=function(){return e},e}function fb(){var e=Object(i.a)(["\n  align-items: center;\n"]);return fb=function(){return e},e}function vb(){var e=Object(i.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return vb=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(Jp||(Jp={}));var pb=function(e){var n=e.collection;return n.status===Jp.Loading?E.a.createElement(Ln.Text,null,"Loading..."):E.a.createElement(kb,null,E.a.createElement(wb,null,E.a.createElement(jb,null,E.a.createElement(Eb,{fontWeight:"bold"},n.name),E.a.createElement(yb,{mt:1},"+",n.fullName),E.a.createElement(Ln.Box,{mt:2},E.a.createElement(Rs,{content:n.summary})),E.a.createElement(gb,{mt:2},E.a.createElement(Ob,{mt:3,alignItems:"center"},E.a.createElement(ct,{variant:n.following?"danger":"primary",disabled:n.toggleJoinFormik.isSubmitting,onClick:n.toggleJoinFormik.submitForm,isSubmitting:n.toggleJoinFormik.isSubmitting},n.following?"Unfollow":"Follow"),E.a.createElement(hb,{ml:2,onClick:n.toggleDropdown},E.a.createElement(du.a,{size:20}),n.isOpenDropdown&&E.a.createElement(bb,null,E.a.createElement(Hl,{orientation:"bottom",close:n.toggleDropdown},n.canModify&&E.a.createElement(Kl,{onClick:n.edit},E.a.createElement(Bl.a,{size:20,color:"rgb(101, 119, 134)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},E.a.createElement(nt.Trans,{id:"Edit the collection"}))),E.a.createElement(Kl,{onClick:n.flag},E.a.createElement(fu.a,{size:20,color:"rgb(101, 119, 134)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},n.isFlagged?E.a.createElement(nt.Trans,{id:"Unflag this collection"}):E.a.createElement(nt.Trans,{id:"Flag this collection"}))),n.isAdmin?E.a.createElement(xb,{onClick:n.addToFeatured},E.a.createElement(Rl.a,{size:20,color:"rgb(211, 103, 5)"}),E.a.createElement(Ln.Text,{sx:{flex:1},ml:2},E.a.createElement(nt.Trans,{id:"Add to featured list"}))):null))))))))},bb=_n(Ln.Box)(vb()),gb=_n(Ln.Flex)(fb()),hb=_n(Ln.Box)(db(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark})),xb=_n(Kl)(sb(),(function(e){return Object(it.b)("0.1",e.theme.colors.light)})),Eb=_n(Ln.Text)(mb(),(function(e){return e.theme.colors.darker})),yb=_n(Ln.Text)(ub(),(function(e){return e.theme.colors.mediumdark})),Ob=_n(Ln.Flex)(cb()),jb=_n.div(lb(),Object(it.a)(),(function(e){return e.theme.colors.mediumdark}),w.a.lessThan("medium")(ob()),(function(e){return e.theme.colors.mediumdark})),kb=_n(Ln.Box)(ib(),(function(e){return e.theme.colors.appInverse})),wb=_n(Ln.Flex)(ab()),Cb=function(e){var n=e.collectionId,t=e.basePath,r=Gv(n),a=r.collection,i=r.canModify,o=r.toggleJoin,l=sa().isAdmin,c=Object(qt.a)({initialValues:{},onSubmit:o}),m=oC(),s=E.a.useReducer((function(e){return!e}),!1),d=Object(u.a)(s,2),f=d[0],v=d[1],p=Object(x.useReducer)((function(e){return!(!i||m())&&!e}),!1),b=Object(u.a)(p,2),g=b[0],h=b[1],y=a&&g?E.a.createElement(al,{closeModal:h},E.a.createElement(rb,{collectionId:a.id,done:h})):null,O=Object(x.useReducer)((function(e){return!m()&&!e}),!1),j=Object(u.a)(O,2),k=j[0],w=j[1],C=a&&k?E.a.createElement(al,{closeModal:w},E.a.createElement(Am,{done:w,ctx:a})):null,I=Object(x.useReducer)((function(e){return!(!l||m())&&!e}),!1),T=Object(u.a)(I,2),F=T[0],S=T[1],P=a&&F?E.a.createElement(al,{closeModal:S},E.a.createElement(Em,{done:S,ctx:a,featureId:null})):null,M=Object(x.useMemo)((function(){var e,n,r,o,u;return a?{collection:{isOpenDropdown:f,toggleDropdown:v,basePath:t,isAdmin:l,status:Jp.Loaded,canModify:i,following:!!a.myFollow,isFlagged:!!a.myFlag,followerCount:a.followerCount||0,icon:(null===(e=a.icon)||void 0===e?void 0:e.url)||"",name:a.name,fullName:a.displayUsername,summary:a.summary||"",communityName:(null===(n=a.community)||void 0===n?void 0:n.name)||"",communityId:(null===(r=a.community)||void 0===r?void 0:r.id)||"",communityIcon:(null===(o=a.community)||void 0===o||null===(u=o.icon)||void 0===u?void 0:u.url)||"",toggleJoinFormik:c,edit:h,addToFeatured:S,flag:w}}:{collection:{status:Jp.Loading}}}),[a,f,t,l,i,c]);return E.a.createElement(E.a.Fragment,null,y,P,C,E.a.createElement(pb,M))};function Ib(){var e=Object(i.a)(["\n    query userPreview($userId: String!) {\n  user(userId: $userId) {\n    id\n    ...UserPreview\n  }\n}\n    ",""]);return Ib=function(){return e},e}var Tb=R()(Ib(),Kr);var Fb=function(e){var n,t,r=(t={variables:{userId:e}},V.d(Tb,t)),a=lC(null===(n=r.data)||void 0===n?void 0:n.user).toggleFollow;return Object(x.useMemo)((function(){var e;return{user:null===(e=r.data)||void 0===e?void 0:e.user,toggleFollow:a}}),[r,a])},Sb=t(35);function Pb(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Pb=function(){return e},e}function Mb(){var e=Object(i.a)(["\n  color: ",";\n  flex: 1;\n"]);return Mb=function(){return e},e}function _b(){var e=Object(i.a)(["\n  flex: 1;\n"]);return _b=function(){return e},e}function Lb(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none !important;\n"]);return Lb=function(){return e},e}function Ub(){var e=Object(i.a)(["\n  border: ",";\n  border-radius: 4px;\n  &:hover {\n    background: ",";\n  }\n  * {\n    text-decoration: none;\n  }\n"]);return Ub=function(){return e},e}function Ab(){var e=Object(i.a)(["\n  text-decoration: none !important;\n  * {\n    text-decoration: none !important;\n  }\n"]);return Ab=function(){return e},e}var Rb=function(e){var n=e.image,t=e.name,r=e.username,a=e.bio,i=e.profileUrl;e.toggleFollowFormik,e.hideActions;return E.a.createElement(Bb,{to:i},E.a.createElement(Nb,{p:3},E.a.createElement(Pl,{variant:"avatar",src:n}),E.a.createElement(Db,{ml:2},E.a.createElement(qb,null,E.a.createElement(zb,{variant:"subhead"},t),E.a.createElement($b,{ml:1},r)),E.a.createElement(Ln.Box,{mr:1},E.a.createElement(Ln.Text,{variant:"text"},a)))))},Bb=_n(Kt.c)(Ab()),Nb=_n(Ln.Flex)(Ub(),(function(e){return e.theme.colors.border}),(function(e){return Object(it.b)("0.05",e.theme.colors.mediumlight)})),zb=_n(Ln.Text)(Lb(),(function(e){return e.theme.colors.dark})),Db=_n(Ln.Box)(_b()),$b=_n(Ln.Text)(Mb(),(function(e){return e.theme.colors.mediumdark})),qb=_n(Ln.Flex)(Pb()),Vb=function(e){var n=e.userId,t=e.flagged,r=Fb(n),a=r.user,i=r.toggleFollow,o=Object(qt.a)({initialValues:{},onSubmit:i}),l=Object(x.useMemo)((function(){if(!a)return null;var e=!!t,n=a.userName,r=a.displayUsername,i=a.image,l=a.icon,c=a.summary,u=a.myFollow;return{image:(null===l||void 0===l?void 0:l.url)||(null===i||void 0===i?void 0:i.url)||"",name:n||"",username:r,bio:c||"",isFollowing:!!u,toggleFollowFormik:o,profileUrl:FO.getPath({userId:a.id,tab:void 0},void 0),hideActions:e}}),[a,o,t]);return l&&E.a.createElement(Sb.a,{px:2,py:1,pb:0},E.a.createElement(Rb,l))};function Qb(){var e=Object(i.a)(["\n    fragment ShareLinkWebMeta on WebMetadata {\n  image\n  summary\n  title\n  url\n}\n    "]);return Qb=function(){return e},e}var Wb=R()(Qb());function Hb(){var e=Object(i.a)(["\n    mutation shareLinkFetchWebMeta($url: String!) {\n  fetchWebMetadata(url: $url) {\n    ...ShareLinkWebMeta\n  }\n}\n    ",""]);return Hb=function(){return e},e}var Jb=R()(Hb(),Wb);var Kb=t(772);function Zb(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return Zb=function(){return e},e}function Gb(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  ",";\n"]);return Gb=function(){return e},e}function Yb(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return Yb=function(){return e},e}function Xb(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return Xb=function(){return e},e}function eg(){var e=Object(i.a)(["\n  color: ",";\n"]);return eg=function(){return e},e}function ng(){var e=Object(i.a)(["\n  color: ",";\n"]);return ng=function(){return e},e}function tg(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return tg=function(){return e},e}function rg(){var e=Object(i.a)(["\n  padding: 8px;\n  background: ",";\n  border-radius: 4px;\n"]);return rg=function(){return e},e}var ag={placeholders:{name:Object(nt.i18nMark)("Type the name of the resource"),summary:Object(nt.i18nMark)("Please describe what the resource is about..."),icon:Object(nt.i18nMark)("Enter the URL of an icon to represent the resource")}},ig=function(e){var n=e.cancel,t=e.formik,r=x.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{icon:e}))}),[t]),a="string"===typeof t.values.icon?t.values.icon:"";return x.createElement(og,null,x.createElement("form",{onSubmit:t.handleSubmit},x.createElement(sg,null,x.createElement(Ln.Box,{sx:{width:"120px",height:"120px"}},x.createElement(vo,{initialUrl:a,onFileSelect:r,filePattern:"image/*"})),x.createElement(mg,null,x.createElement(cg,{fontWeight:"bold"},x.createElement(lg,null,x.createElement(da.b,{placeholder:ag.placeholders.name,disabled:t.isSubmitting,name:"name",value:t.values.name,onChange:t.handleChange}),x.createElement(Xo,null,60-t.values.name.length),t.errors.name&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.name)))),x.createElement(ug,{mt:2},x.createElement(lg,null,x.createElement(da.d,{placeholder:ag.placeholders.summary,disabled:t.isSubmitting,name:"summary",value:t.values.summary,onChange:t.handleChange}),x.createElement(Xo,null,500-t.values.summary.length),t.errors.summary&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},t.errors.summary)))))),x.createElement(Yo,null,x.createElement(ct,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},x.createElement(nt.Trans,{id:"Share"})),x.createElement(ct,{variant:"outline",onClick:n},x.createElement(nt.Trans,{id:"Cancel"})))))},og=_n(Go)(rg(),(function(e){return e.theme.colors.appInverse})),lg=_n(el)(tg()),cg=_n(Ln.Text)(ng(),(function(e){return e.theme.colors.mediumdark})),ug=_n(Ln.Text)(eg(),(function(e){return e.theme.colors.mediumdark})),mg=_n.div(Xb(),Object(it.a)(),(function(e){return e.theme.colors.mediumdark}),w.a.lessThan("medium")(Yb()),(function(e){return e.theme.colors.mediumdark})),sg=_n(Ln.Flex)(Gb(),w.a.lessThan("medium")(Zb()));function dg(){var e=Object(i.a)(["\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  border: 0;\n  background: transparent;\n  box-shadow: none;\n  width: 40px;\n  height: 37px;\n  cursor: pointer;\n  color: ",";\n  svg {\n    stroke: "," !important;\n  }\n  .--rtl & {\n    left: 2px;\n    right: auto;\n  }\n"]);return dg=function(){return e},e}function fg(){var e=Object(i.a)(["\n  height: 40px;\n  background: ",";\n  border-radius: 4px;\n  border: 3px solid "," !important;\n"]);return fg=function(){return e},e}function vg(){var e=Object(i.a)(["\n  padding: 10px;\n"]);return vg=function(){return e},e}function pg(){var e=Object(i.a)(["\n  background: ",";\n  border-top: ",";\n  padding: 16px;\n"]);return pg=function(){return e},e}function bg(){var e=Object(i.a)(["\n  position: relative;\n"]);return bg=function(){return e},e}var gg,hg={placeholders:{url:Object(nt.i18nMark)("Enter the URL of the resource"),name:Object(nt.i18nMark)("A name or title for the resource"),summary:Object(nt.i18nMark)("Please type or copy/paste a summary about the resource..."),submit:Object(nt.i18nMark)("Fetch the resource"),image:Object(nt.i18nMark)("Enter the URL of an image to represent the resource")}},xg=function(e){var n=x.useContext(Oa).i18n;return x.createElement(x.Fragment,null,x.createElement(yg,null,x.createElement(Eg,{onSubmit:e.FetchLinkFormik.handleSubmit},x.createElement(jg,{placeholder:n._(hg.placeholders.url),onChange:e.FetchLinkFormik.handleChange,name:"fetchUrl",value:e.FetchLinkFormik.values.fetchUrl}),x.createElement(kg,{disabled:e.FetchLinkFormik.isSubmitting,type:"submit"},x.createElement(Kb.a,{width:18,height:18,strokeWidth:2}))),e.FetchLinkFormik.errors.fetchUrl&&x.createElement(ko,{variant:"negative"},e.FetchLinkFormik.errors.fetchUrl)),e.FetchLinkFormik.isSubmitting?x.createElement(Og,null,x.createElement(at,null)):null,e.isFetched?x.createElement(ig,{formik:e.formik,cancel:e.cancelFetched}):null)},Eg=_n.form(bg()),yg=_n(Ln.Box)(pg(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),Og=_n.div(vg()),jg=_n(da.b)(fg(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.medium})),kg=_n.button(dg(),(function(e){return e.theme.colors.gray}),(function(e){return e.theme.colors.secondary})),wg=ci.object({name:ci.string().max(90).required(),summary:ci.string().max(1e3),icon:(gg=ci.mixed()).test.apply(gg,Object(C.a)(El))}),Cg={name:"",summary:"",icon:""},Ig={fetchUrl:""},Tg=function(e){var n,t,r=e.done,a=e.collectionId,i=cp().create,o=V.c(Jb,t),l=Object(u.a)(o,2),c=l[0],m=l[1],s=Object(x.useRef)(ci.object({fetchUrl:ci.string().matches(qe).required(ya._("url is required"))})).current,d=Object(qt.a)({initialValues:Ig,enableReinitialize:!0,validationSchema:s,onSubmit:function(e){var n=e.fetchUrl;return c({variables:{url:n}})}}),f=null===(n=m.data)||void 0===n?void 0:n.fetchWebMetadata,v=Object(qt.a)({initialValues:f?{icon:f.image||"",name:f.title||"",summary:f.summary||""}:Cg,validationSchema:wg,enableReinitialize:!0,onSubmit:function(e){var n=e.icon,t=e.name,o=e.summary,l=(null===f||void 0===f?void 0:f.url)||d.values.fetchUrl;if(l)return i({collectionId:a,content:l,icon:n,resource:{name:t,summary:o}}).then(r)}});return E.a.createElement(xg,{FetchLinkFormik:d,cancelFetched:r,formik:v,isFetched:!!f})};function Fg(){var e=Object(i.a)(["\n  background: ",";\n  button {\n    width: 100%;\n    height: 50px;\n  }\n"]);return Fg=function(){return e},e}function Sg(){var e=Object(i.a)(["\n  text-transform: capitalize;\n"]);return Sg=function(){return e},e}var Pg,Mg=function(e){var n=e.HeroCollection,t=e.ShareLink,r=e.UploadResourcePanel,a=e.Followers,i=e.Resources,o=e.tabPaths,l=e.loadMoreResources,c=e.loadMoreFollowers,u=e.isCommunityMember,m=e.communityId,s=e.communityName,d=e.communityIcon,f=e.shareLink,v=e.upload;return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,n,x.createElement(Lg,{tabPaths:o}),x.createElement(Pn.d,null,x.createElement(Pn.b,{path:o.followers},x.createElement(x.Fragment,null,x.createElement(Tt,null,a),c&&x.createElement(mt,{LoadMoreFormik:c}))),x.createElement(Pn.b,{exact:!0,path:o.resources},x.createElement(x.Fragment,null,u?x.createElement(Ug,{p:3},x.createElement(ct,{mr:2,onClick:f,variant:"outline"},x.createElement(nt.Trans,{id:"Share link"})),x.createElement(ct,{onClick:v,variant:"outline"},x.createElement(nt.Trans,{id:"Add new resource"}))):null,t,r,x.createElement(Tt,null,i.map((function(e){return x.createElement(Sb.a,{mx:3,my:2,mb:3,key:e.key||""},e)}))),l&&x.createElement(mt,{LoadMoreFormik:l}))))))),x.createElement(Zn,null,x.createElement(_g,{mb:2,variant:"suptitle"},x.createElement(nt.Trans,{id:"Community"})),x.createElement(is,{id:m,name:s,icon:d})))},_g=_n(Ln.Text)(Sg()),Lg=function(e){var n=e.tabPaths;return x.createElement(It,{p:3,pt:3},x.createElement(Kt.c,{exact:!0,to:n.resources},x.createElement(nt.Trans,{id:"Resources"})),x.createElement(Kt.c,{exact:!0,to:n.followers},x.createElement(nt.Trans,{id:"Followers"})))},Ug=_n(Ln.Flex)(Fg(),(function(e){return e.theme.colors.appInverse}));!function(e){e[e.Resources=0]="Resources",e[e.Followers=1]="Followers"}(Pg||(Pg={}));var Ag={id:"Collection {name} - Followers"},Rg={id:"Collection {name} - Resources"},Bg=function(e){var n=Object(x.useState)(),t=Object(u.a)(n,2),r=t[0],a=t[1],i=Object(x.useCallback)((function(){return a(void 0)}),[]),o=e.collectionId,l=e.basePath,c=e.tab,m=Gv(e.collectionId),s=m.collection,d=m.isCommunityMember,f=c===Pg.Followers?Ag:(Pg.Resources,Rg);vi(!!(null===s||void 0===s?void 0:s.name)&&f,s);var v=rp(e.collectionId).collectionFollowersPage,p=Object(u.a)(v.formiks,1)[0],b=tp(e.collectionId).resourcesPage,g=Object(u.a)(b.formiks,1)[0],h=oC(),y=E.a.createElement(Cb,{basePath:l,collectionId:o}),O=b.edges.map((function(e){return E.a.createElement(Gy,{resourceId:e.id,key:e.id})})).filter((function(e){return!!e})),j=v.edges.map((function(e){return e.creator&&E.a.createElement(Vb,{userId:e.creator.userId,key:e.creator.userId})})).filter((function(e){return!!e})),k="upload"===r?E.a.createElement(Np,{done:i,collectionId:o}):null,w="share"===r?E.a.createElement(Tg,{collectionId:o,done:i}):null,C=Object(x.useMemo)((function(){var e,n;if(!s)return null;var t={followers:uy.getPath({collectionId:o,tab:"followers"},void 0),resources:uy.getPath({collectionId:o,tab:void 0},void 0)};return{ShareLink:w,HeroCollection:y,Resources:O,UploadResourcePanel:k,tabPaths:t,Followers:j,communityIcon:(null===(e=s.community)||void 0===e||null===(n=e.icon)||void 0===n?void 0:n.url)||"",communityId:s.community?s.community.id:"",communityName:s.community?s.community.name:"",loadMoreFollowers:p,loadMoreResources:g,isCommunityMember:d,shareLink:function(){return a("share"===r||h()?void 0:"share")},upload:function(){return a("upload"===r||h()?void 0:"upload")}}}),[s,o,w,y,O,k,j,p,g,d,r,h]);return C&&E.a.createElement(Mg,C)};function Ng(){var e=Object(i.a)(["\n  margin: 0 auto;\n  width: 432px;\n  margin-top: 60px;\n  padding: 16px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    color: #fff !important;\n    text-transform: uppercase\n      &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return Ng=function(){return e},e}var zg,Dg=_n.div(Ng()),$g=function(){return x.createElement(x.Fragment,null,x.createElement(Dg,null,x.createElement(Ln.Box,{sx:{textAlign:"center"}},x.createElement(Fa,null),x.createElement(Ln.Heading,null,x.createElement("span",{"aria-label":"icon",role:"img"},"\ud83e\udd14"),x.createElement(nt.Trans,{id:"Page not found"})))))},qg={id:"Page Not Found"},Vg=function(){return vi(qg,{}),E.a.createElement($g,null)},Qg=function(){var e,n,t,r=(t={variables:{limit:10}},V.d(Dr,t)),a=Vt(null===(e=r.data)||void 0===e||null===(n=e.me)||void 0===n?void 0:n.user.communityFollows,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:10}),updateQuery:function(e,n){var r,a,i,o,l,u,m=n.fetchMoreResult;return(null===m||void 0===m||null===(r=m.me)||void 0===r||null===(a=r.user)||void 0===a?void 0:a.communityFollows)&&(null===(i=e.me)||void 0===i||null===(o=i.user)||void 0===o?void 0:o.communityFollows)?Object(c.a)(Object(c.a)({},m),{},{me:Object(c.a)(Object(c.a)({},m.me),{},{user:Object(c.a)(Object(c.a)({},m.me.user),{},{communityFollows:t({prev:null===(l=e.me)||void 0===l?void 0:l.user.communityFollows,fetched:null===(u=m.me)||void 0===u?void 0:u.user.communityFollows})})})}):e}})}));return Object(x.useMemo)((function(){return{myCommunityFollowsPage:a}}),[a])},Wg=t(773);function Hg(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return Hg=function(){return e},e}function Jg(){var e=Object(i.a)(["\n  height: 50px;\n  line-height: 50px;\n  font-weight: 600;\n  color: ",";\n  a:focus,\n  a:active {\n    color: inherit;\n  }\n  ",";\n"]);return Jg=function(){return e},e}function Kg(){var e=Object(i.a)(["\nimg {\n    margin-right: 0;\n}\n"]);return Kg=function(){return e},e}function Zg(){var e=Object(i.a)(["\n  border-radius: 4px;\n  padding: 0px 4px;\n  &:hover {\n    background: ",";\n  }\n  ",";\n"]);return Zg=function(){return e},e}function Gg(){var e=Object(i.a)(["\n  position: relative;\n  color: inherit;\n  img {\n    width: 36px;\n    height: 36px;\n  }\n  &.active {\n    div {\n      color: ",";\n      position: relative;\n    }\n  }\n  div {\n    color: ",";\n  }\n"]);return Gg=function(){return e},e}function Yg(){var e=Object(i.a)(["\n  margin-bottom: 0px;\n  img {\n    width: 36px;\n    height: 36px;\n  }\n  &.active {\n    > div {\n      background: ",";\n    }\n    div {\n      color: "," !important;\n    }\n    position: relative;\n  }\n"]);return Yg=function(){return e},e}function Xg(){var e=Object(i.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return Xg=function(){return e},e}function eh(){var e=Object(i.a)(["\n  overflow-y: auto;\n  flex: 1;\n"]);return eh=function(){return e},e}function nh(){var e=Object(i.a)(["\n    position: relative;\nwidth: 100%\n"]);return nh=function(){return e},e}function th(){var e=Object(i.a)(["\nwidth: auto;\n"]);return th=function(){return e},e}function rh(){var e=Object(i.a)(["\n  justify-content: space-between;\n  height: 100%;\n  display: flex;\n  "," ",";\n"]);return rh=function(){return e},e}function ah(){var e=Object(i.a)(["\n  transition: 'all 250ms ease';\n  flex: 1;\n"]);return ah=function(){return e},e}function ih(){var e=Object(i.a)(["\n  //   width: 50px;\n  // "]);return ih=function(){return e},e}function oh(){var e=Object(i.a)(["\n  width: 240px;\n  // ","\n"]);return oh=function(){return e},e}!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(zg||(zg={}));var lh=_n(Ln.Flex)(oh(),w.a.lessThan("medium")(ih())),ch=_n(Ln.Box)(ah()),uh=_n(Ln.Box)(rh(),w.a.lessThan("1280px")(th()),w.a.lessThan("860px")(nh())),mh=_n(Ln.Box)(eh()),sh=_n(Ln.Box)(Xg()),dh=_n(Kt.c)(Yg(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.appInverse})),fh=_n(Kt.c)(Gg(),(function(e){return e.theme.colors.primary}),(function(e){return e.isActive?e.theme.colors.primary:e.theme.colors.darker})),vh=_n(Ln.Flex)(Zg(),(function(e){return e.theme.colors.medium}),w.a.lessThan("1280px")(Kg())),ph=_n(Ln.Text)(Jg(),(function(e){return e.theme.colors.darker}),Object(it.c)("220px")),bh=_n(ph)(Hg()),gh=function(e){var n=x.useContext(Oa).i18n;return x.createElement(x.Fragment,null,e.isSidebarOpen?x.createElement(lh,{className:"sidebar"},x.createElement(ch,null,x.createElement(uh,null,e.status===zg.Loading?x.createElement(Ln.Text,null,"Loading"):x.createElement(mh,null,x.createElement(x.Fragment,null,x.createElement(sh,null,x.createElement(fh,{exact:!0,to:e.discoverPath},x.createElement(vh,{alignItems:"center"},x.createElement(Ln.Box,{height:"50px"},x.createElement(Wg.a,{size:36,strokeWidth:"1"})),x.createElement(bh,{variant:"link"},x.createElement(nt.Trans,{id:"Discover"})))),x.createElement(fh,{exact:!0,to:e.homePath},x.createElement(vh,{alignItems:"center"},x.createElement(Pl,{size:"s",src:we}),x.createElement(bh,{variant:"link"},n._("My Timeline"))))),x.createElement(sh,null,e.communities.map((function(e,n){return x.createElement(dh,{key:e.link,to:e.link},x.createElement(vh,{alignItems:"center",mb:2},x.createElement(Pl,{size:"s",initials:e.name.substr(0,2),src:e.icon}),x.createElement(bh,{variant:"link"},e.name)))})),e.LoadMoreFormik&&x.createElement(mt,{LoadMoreFormik:e.LoadMoreFormik}))))))):null)},hh=function(){var e,n,t,r=V.d(cm,t),a=Vt(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.featuredCollections,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var r,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(r=i.instance)||void 0===r?void 0:r.featuredCollections)&&(null===(a=e.instance)||void 0===a?void 0:a.featuredCollections)?Object(c.a)(Object(c.a)({},i),{},{instance:Object(c.a)(Object(c.a)({},i.instance),{},{feturedCollections:t({prev:e.instance.featuredCollections,fetched:i.instance.featuredCollections})})}):e}})}));return Object(x.useMemo)((function(){return{featuredCollectionsPage:a}}),[a])},xh=t(200),Eh=t.n(xh),yh=(t(338),t(339),function(e){var n=e.width,t=void 0===n?24:n,r=e.height,a=void 0===r?24:r,i=e.strokeWidth,o=void 0===i?2:i,l=e.color,c=void 0===l?"#333":l;return x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",color:c,width:t,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-clipboard"},x.createElement("polyline",{points:"15 18 9 12 15 6"}))}),Oh=function(e){var n=e.width,t=void 0===n?24:n,r=e.height,a=void 0===r?24:r,i=e.strokeWidth,o=void 0===i?2:i,l=e.color,c=void 0===l?"#333":l;return x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",color:c,width:t,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-users"},x.createElement("polyline",{points:"9 18 15 12 9 6"}))};function jh(){var e=Object(i.a)(["\n  display: inline-flex;\n  color: ",";\n  cursor: pointer;\n  padding-right: 10px;\n  button {\n    height: 30px;\n    line-height: 10px;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n    }\n  }\n"]);return jh=function(){return e},e}function kh(){var e=Object(i.a)(["\n  justify-content: right;\n  align-items: center;\n"]);return kh=function(){return e},e}function wh(){var e=Object(i.a)(["\n  & span {\n    cursor: pointer;\n    display: inline-block;\n    height: 30px;\n    & svg {\n      color: "," !important;\n      vertical-align: middle;\n      height: 30px;\n    }\n    &:hover {\n      & svg {\n        color: "," !important;\n      }\n    }\n  }\n  float: right;\n"]);return wh=function(){return e},e}function Ch(){var e=Object(i.a)(["\n  font-weight: 700;\n  padding: 8px;\n  border-bottom: ",";\n  margin: 0;\n  color: ",";\n  & h5 {\n    margin: 0;\n    color: ",";\n    display: inline-block;\n    flex: 1;\n    padding: 0;\n    text-transform: uppercase;\n    height: 30px;\n    font-weight: 500;\n    line-height: 30px;\n  }\n"]);return Ch=function(){return e},e}var Ih=_n(Sb.b)(Ch(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Th=_n(Sb.b)(wh(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),Fh=_n(Sb.b)(kh()),Sh=_n(Sb.b)(jh(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.primary})),Ph=function(e){var n=Object(x.useRef)();return E.a.createElement(E.a.Fragment,null,E.a.createElement(Ih,null,E.a.createElement("h5",null,E.a.createElement(nt.Trans,{id:"Featured collections"})," "),E.a.createElement(Th,null,e.canEdit?E.a.createElement(Fh,null,E.a.createElement(Sh,{onClick:e.toggleEdit},e.isEditing?E.a.createElement(ct,{variant:"outline"},E.a.createElement(nt.Trans,{id:"Done"})):E.a.createElement(ct,{variant:"outline"},E.a.createElement(nt.Trans,{id:"Edit"})))):null,E.a.createElement("span",{onClick:n.current&&n.current.slickPrev},E.a.createElement(yh,{width:26,height:26,strokeWidth:1,color:"#333"})),E.a.createElement("span",{onClick:n.current&&n.current.slickNext},E.a.createElement(Oh,{width:26,height:26,strokeWidth:1,color:"#333"})))),E.a.createElement(Sb.a,{px:2},E.a.createElement(Eh.a,Object.assign({ref:function(e){return n.current=e||void 0}},Mh(e.featuredCollections.length)),e.featuredCollections)))},Mh=function(e){return{dots:!1,arrows:!1,infinite:!0,autoplay:!1,speed:500,slidesToShow:e>3?3:e,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:e>3?3:e,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:e>2?2:e,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}};function _h(){var e=Object(i.a)(["\n  position: absolute;\n  right: -9px;\n  top: 0px;\n  cursor: pointer;\n  background: ",";\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return _h=function(){return e},e}function Lh(){var e=Object(i.a)(["\n  color: rgba(250, 250, 250);\n  ",";\n  margin: 0;\n  line-height: 40px;\n"]);return Lh=function(){return e},e}function Uh(){var e=Object(i.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  padding: 0 8px;\n  background: rgba(0, 0, 0, 0.8);\n"]);return Uh=function(){return e},e}function Ah(){var e=Object(i.a)(["\n  //   width: 100%;\n  height: auto;\n  padding: 50%;\n  border-radius: 4px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n"]);return Ah=function(){return e},e}function Rh(){var e=Object(i.a)(["\n  display: block;\n"]);return Rh=function(){return e},e}function Bh(){var e=Object(i.a)(["\n  cursor: pointer;\n  position: relative;\n  max-width: 200px;\n  max-height: 270px;\n  border-radius: 4px;\n  padding-top: 10px;\n  "," & a {\n    color: inherit;\n    text-decoration: none;\n    width: 100%;\n  }\n"]);return Bh=function(){return e},e}var Nh=t(340),zh=_n(Ln.Box)(Bh(),w.a.lessThan("medium")(Rh())),Dh=_n.div(Ah()),$h=_n.div(Uh()),qh=_n(Ln.Text)(Lh(),Object(it.c)("170px")),Vh=_n(Ln.Box)(_h(),(function(e){return e.theme.colors.medium})),Qh=function(e){var n=e.collection,t=e.canEdit,r=e.isEditing,a=e.remove;return x.createElement(zh,{py:1,mb:2,mr:3},t&&r?x.createElement(Vh,{onClick:a},x.createElement(Fo.a,{color:"#fff",size:16})):null,x.createElement(Kt.b,{to:n.link},x.createElement(Dh,{style:{backgroundImage:'url("'.concat(n.icon||Nh,'")')}},x.createElement($h,null,x.createElement(qh,{my:2,fontWeight:600},n.name.length>80?n.name.replace(/^(.{76}[^\s]*).*/,"$1..."):n.name)))))},Wh=function(){var e=sa().isAdmin,n=hh().featuredCollectionsPage,t=Object(x.useReducer)((function(e){return!e}),!1),r=Object(u.a)(t,2),a=r[0],i=r[1],o=Object(x.useState)(null),l=Object(u.a)(o,2),c=l[0],m=l[1],s=Object(x.useMemo)((function(){return n.edges.map((function(n){var t,r=n.context;if(!r||"Collection"!==r.__typename)return null;var i={collection:{icon:(null===(t=r.icon)||void 0===t?void 0:t.url)||"",name:r.name,link:uy.getPath({collectionId:r.id,tab:void 0},void 0)},canEdit:e,isEditing:a,remove:function(){return m(n)}};return E.a.createElement(Qh,Object.assign({key:r.id},i))})).filter((function(e){return!!e}))}),[n.edges,e,a]),d=Object(x.useMemo)((function(){var e;return c&&"Collection"===(null===(e=c.context)||void 0===e?void 0:e.__typename)&&E.a.createElement(al,{closeModal:function(){return m(null)}},E.a.createElement(Em,{ctx:c.context,done:function(){return m(null)},featureId:c.id}))}),[c]),f=Object(x.useMemo)((function(){return{featuredCollections:s,isEditing:a,toggleEdit:i,canEdit:e}}),[s,a,e]);return E.a.createElement(E.a.Fragment,null,d,E.a.createElement(Ph,f))};function Hh(){var e=Object(i.a)(["\n  background: aliceblue;\n  text-align: center;\n  padding: 4px;\n  border-radius: 4px;\n"]);return Hh=function(){return e},e}var Jh=function(e){var n;return x.createElement(x.Fragment,null,x.createElement(Zn,null,x.createElement(Gn,null,x.createElement(Yn,{fontWeight:"bold"},"Popular communities"),x.createElement(Xn,null,null===(n=e.communities)||void 0===n?void 0:n.map((function(e,n){var t=e.isLocal?"/communities/".concat(e.id):e.canonicalUrl;return x.createElement(et,{key:n,mb:3},x.createElement("a",{href:null!==t&&void 0!==t?t:"/"},e.name))})))),x.createElement(Gn,null,x.createElement(Yn,{fontWeight:"bold"},"Popular hashtags"),x.createElement(Xn,null,x.createElement(et,{mb:3},"#pedagogy"),x.createElement(et,{mb:3},"#transition"),x.createElement(et,{mb:3},"#english"),x.createElement(et,{mb:3},"#template"),x.createElement(et,{mb:3},"#assessment"),x.createElement(et,null,x.createElement(Kh,{variant:"text"},x.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"),x.createElement(nt.Trans,{id:"This feature is coming soon!"}),x.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"))))),x.createElement(Gn,null,x.createElement(Yn,{fontWeight:"bold"},"Popular categories"),x.createElement(Xn,null,x.createElement(et,{mb:3},"Humanities"),x.createElement(et,{mb:3},"Behavioural science"),x.createElement(et,{mb:3},"English"),x.createElement(et,{mb:3},"Romana"),x.createElement(et,{mb:3},"Postgraduate"),x.createElement(Kh,{variant:"text"},x.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"),x.createElement(nt.Trans,{id:"This feature is coming soon!"})," ",x.createElement("span",{"aria-label":"icon",role:"img"},"\u2728"))))))},Kh=_n(Ln.Text)(Hh());function Zh(){var e=Object(i.a)(["\n  query popularCommunites {\n    communities(limit: 5) {\n      totalCount\n      edges {\n        id\n        name\n        isLocal\n        canonicalUrl\n      }\n    }\n  }\n"]);return Zh=function(){return e},e}var Gh=R()(Zh()),Yh=function(){var e=Object(V.a)(),n=Object(x.useState)([]),t=Object(u.a)(n,2),r=t[0],a=t[1];return Object(x.useEffect)((function(){e.query({query:Gh}).then((function(e){var n;e.data&&e.data.communities&&a(null!==(n=e.data.communities.edges)&&void 0!==n?n:[])}))}),[e]),E.a.createElement(Jh,{communities:r})};function Xh(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: ",";\n  border-radius: 8px;\n  max-height: 270px;\n"]);return Xh=function(){return e},e}function ex(){var e=Object(i.a)(["\n  background: ",";\n  height: 40px;\n  line-height: 40px;\n"]);return ex=function(){return e},e}var nx=function(e){var n=e.ActivitiesBox,t=e.FeaturedCommunitiesBox,r=(e.FeaturedCollectionsBox,e.CollectionsBoxes),a=e.CommunitiesBoxes,i=e.LoadMoreFormik,o=e.tabPaths;return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(ax,null,t),x.createElement(Ct,null,x.createElement(tx,{tabPaths:o}),x.createElement(Pn.d,null,x.createElement(Pn.b,{exact:!0,path:o.communities},x.createElement(Tt,null,a),i&&x.createElement(mt,{LoadMoreFormik:i})),x.createElement(Pn.b,{exact:!0,path:o.collections},x.createElement(Tt,null,x.createElement(St,null,r)),i&&x.createElement(mt,{LoadMoreFormik:i})),x.createElement(Pn.b,{exact:!0,path:o.timeline},x.createElement(Ot,null,n),i&&x.createElement(mt,{LoadMoreFormik:i})))))),x.createElement(Yh,null))},tx=function(e){var n=e.tabPaths;return x.createElement(x.Fragment,null,x.createElement(rx,{px:2,mt:2},x.createElement(Ln.Text,{variant:"suptitle"},"Browse Home instance")),x.createElement(It,null,x.createElement(Kt.c,{exact:!0,to:n.timeline},x.createElement(nt.Trans,{id:"Timeline"})),x.createElement(Kt.c,{exact:!0,to:n.communities},x.createElement(nt.Trans,{id:"All communities"}))))},rx=_n(Ln.Box)(ex(),(function(e){return e.theme.colors.appInverse})),ax=_n(Ln.Flex)(Xh(),(function(e){return e.theme.colors.appInverse})),ix=function(){var e,n,t,r=(t={variables:{limit:je}},V.d(Bi,t)),a=Vt(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.outbox,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var r,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(r=i.instance)||void 0===r?void 0:r.outbox)&&(null===(a=e.instance)||void 0===a?void 0:a.outbox)?Object(c.a)(Object(c.a)({},i),{},{instance:Object(c.a)(Object(c.a)({},i.instance),{},{outbox:t({prev:e.instance.outbox,fetched:i.instance.outbox})})}):e}})}));return Object(x.useMemo)((function(){return{activitiesPage:a}}),[a])},ox=function(){var e,n,t,r=V.d(fm,t),a=Vt(null===(e=r.data)||void 0===e||null===(n=e.instance)||void 0===n?void 0:n.featuredCommunities,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var r,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(r=i.instance)||void 0===r?void 0:r.featuredCommunities)&&(null===(a=e.instance)||void 0===a?void 0:a.featuredCommunities)?Object(c.a)(Object(c.a)({},i),{},{instance:Object(c.a)(Object(c.a)({},i.instance),{},{featuredCommunities:t({prev:e.instance.featuredCommunities,fetched:i.instance.featuredCommunities})})}):e}})}));return Object(x.useMemo)((function(){return{featuredCommunitiesPage:a}}),[a])};function lx(){var e=Object(i.a)(["\n  display: inline-flex;\n  color: ",";\n  cursor: pointer;\n  padding-right: 10px;\n  button {\n    height: 30px;\n    line-height: 10px;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n    }\n  }\n"]);return lx=function(){return e},e}function cx(){var e=Object(i.a)(["\n  justify-content: right;\n  align-items: center;\n"]);return cx=function(){return e},e}function ux(){var e=Object(i.a)(["\n  & span {\n    cursor: pointer;\n    display: inline-block;\n    height: 30px;\n    & svg {\n      color: "," !important;\n      vertical-align: middle;\n      height: 30px;\n    }\n    &:hover {\n      & svg {\n        color: "," !important;\n      }\n    }\n  }\n  float: right;\n"]);return ux=function(){return e},e}function mx(){var e=Object(i.a)(["\n  font-weight: 700;\n  padding: 8px;\n  border-bottom: ",";\n  margin: 0;\n  color: ",";\n  & h5 {\n    margin: 0;\n    color: ",";\n    display: inline-block;\n    flex: 1;\n    padding: 0;\n    text-transform: uppercase;\n    height: 30px;\n    font-weight: 500;\n    line-height: 30px;\n  }\n"]);return mx=function(){return e},e}var sx=_n(Sb.b)(mx(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),dx=_n(Sb.b)(ux(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),fx=_n(Sb.b)(cx()),vx=_n(Sb.b)(lx(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.primary})),px=function(e){var n=Object(x.useRef)();return E.a.createElement(E.a.Fragment,null,E.a.createElement(sx,null,E.a.createElement("h5",null,E.a.createElement(nt.Trans,{id:"Featured communities"})," "),E.a.createElement(dx,null,e.canEdit?E.a.createElement(fx,null,E.a.createElement(vx,{onClick:e.toggleEdit},e.isEditing?E.a.createElement(ct,{variant:"outline"},E.a.createElement(nt.Trans,{id:"Done"})):E.a.createElement(ct,{variant:"outline"},E.a.createElement(nt.Trans,{id:"Edit"})))):null,E.a.createElement("span",{onClick:n.current&&n.current.slickPrev},E.a.createElement(yh,{width:26,height:26,strokeWidth:1,color:"#333"})),E.a.createElement("span",{onClick:n.current&&n.current.slickNext},E.a.createElement(Oh,{width:26,height:26,strokeWidth:1,color:"#333"})))),E.a.createElement(Sb.a,{px:2},E.a.createElement(Eh.a,Object.assign({ref:function(e){return n.current=e||void 0}},bx(e.featuredCommunities.length)),e.featuredCommunities)))},bx=function(e){return{dots:!1,arrows:!1,infinite:!0,autoplay:!1,speed:500,slidesToShow:e>3?3:e,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:e>3?3:e,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:e>2?2:e,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}};function gx(){var e=Object(i.a)(["\n  position: absolute;\n  right: -9px;\n  top: 0px;\n  cursor: pointer;\n  background: ",";\n  width: 20px;\n  height: 20px;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  z-index: 999999999;\n"]);return gx=function(){return e},e}function hx(){var e=Object(i.a)(["\n  color: rgba(250, 250, 250);\n  ",";\n  margin: 0;\n  line-height: 40px;\n"]);return hx=function(){return e},e}function xx(){var e=Object(i.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  padding: 0 8px;\n  background: rgba(0, 0, 0, 0.8);\n"]);return xx=function(){return e},e}function Ex(){var e=Object(i.a)(["\n  //   width: 100%;\n  height: auto;\n  padding: 50%;\n  border-radius: 4px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  position: relative;\n"]);return Ex=function(){return e},e}function yx(){var e=Object(i.a)(["\n  display: block;\n"]);return yx=function(){return e},e}function Ox(){var e=Object(i.a)(["\n  cursor: pointer;\n  position: relative;\n  max-width: 200px;\n  max-height: 270px;\n  border-radius: 4px;\n  padding-top: 10px;\n  "," & a {\n    color: inherit;\n    text-decoration: none;\n    width: 100%;\n  }\n"]);return Ox=function(){return e},e}var jx,kx=t(340),wx=_n(Ln.Box)(Ox(),w.a.lessThan("medium")(yx())),Cx=_n.div(Ex()),Ix=_n.div(xx()),Tx=_n(Ln.Text)(hx(),Object(it.c)("170px")),Fx=_n(Ln.Box)(gx(),(function(e){return e.theme.colors.medium})),Sx=function(e){var n=e.community,t=e.canEdit,r=e.isEditing,a=e.remove;return x.createElement(wx,{py:1,mb:2,mr:3},t&&r?x.createElement(Fx,{onClick:a},x.createElement(Fo.a,{color:"#fff",size:16})):null,x.createElement(Kt.b,{to:n.link},x.createElement(Cx,{style:{backgroundImage:'url("'.concat(n.icon||kx,'")')}},x.createElement(Ix,null,x.createElement(Tx,{my:2,fontWeight:600},n.name.length>80?n.name.replace(/^(.{76}[^\s]*).*/,"$1..."):n.name)))))},Px=function(){var e=sa().isAdmin,n=ox().featuredCommunitiesPage,t=Object(x.useReducer)((function(e){return!e}),!1),r=Object(u.a)(t,2),a=r[0],i=r[1],o=Object(x.useState)(null),l=Object(u.a)(o,2),c=l[0],m=l[1],s=Object(x.useMemo)((function(){return n.edges.map((function(n){var t,r=n.context;if(!r||"Community"!==r.__typename)return null;var i={community:{icon:(null===(t=r.icon)||void 0===t?void 0:t.url)||"",name:r.name,link:Gk.getPath({tab:void 0,communityId:r.id},void 0)},canEdit:e,isEditing:a,remove:function(){return m(n)}};return E.a.createElement(Sx,Object.assign({key:r.id},i))})).filter((function(e){return!!e}))}),[n.edges,e,a]),d=Object(x.useMemo)((function(){var e;return c&&"Community"===(null===(e=c.context)||void 0===e?void 0:e.__typename)&&E.a.createElement(al,{closeModal:function(){return m(null)}},E.a.createElement(Em,{ctx:c.context,done:function(){return m(null)},featureId:c.id}))}),[c]),f=Object(x.useMemo)((function(){return{isEditing:a,toggleEdit:i,featuredCommunities:s,canEdit:e}}),[a,s,e]);return E.a.createElement(E.a.Fragment,null,d,E.a.createElement(px,f))},Mx=function(){var e,n,t=(n={variables:{limit:je}},V.d(Di,n)),r=Vt(null===(e=t.data)||void 0===e?void 0:e.communities,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.communities)&&e.communities?Object(c.a)(Object(c.a)({},t),{},{communities:r({prev:e.communities,fetched:t.communities})}):e}})}));return Object(x.useMemo)((function(){return{allCommunitiesPage:r}}),[r])};!function(e){e[e.Activities=0]="Activities",e[e.Communities=1]="Communities",e[e.Collections=2]="Collections"}(jx||(jx={}));var _x={id:"Discover Activities"},Lx={id:"Discover Collections"},Ux={id:"Discover Communities"},Ax=function(e){e.basePath;var n=e.tab,t=n===jx.Collections?Lx:n===jx.Communities?Ux:(jx.Activities,_x);vi(t);var r=ix().activitiesPage,a=Object(u.a)(r.formiks,1)[0],i=Mx().allCommunitiesPage,o=Object(u.a)(i.formiks,1)[0],l=Jt().allCollectionsPage,c=Object(u.a)(l.formiks,1)[0],m=Object(x.useMemo)((function(){var e=E.a.createElement(Wh,null),t=E.a.createElement(Px,null),u=E.a.createElement(E.a.Fragment,null,r.edges.map((function(e){return E.a.createElement(XO,{activityId:e.id,key:e.id})}))),m=E.a.createElement(E.a.Fragment,null,l.edges.map((function(e){return E.a.createElement(Sb.a,{m:2,key:e.id},E.a.createElement(fC,{collectionId:e.id}))}))),s=E.a.createElement(E.a.Fragment,null,i.edges.map((function(e){return E.a.createElement(Sb.a,{m:2,key:e.id},E.a.createElement(jv,{communityId:e.id}))}))),d=n===jx.Activities?a:n===jx.Collections?c:n===jx.Communities?o:null;return{tabPaths:{collections:Nx.getPath({tab:"collections"},void 0),communities:Nx.getPath({tab:"communities"},void 0),timeline:Nx.getPath({tab:void 0},void 0)},ActivitiesBox:u,FeaturedCollectionsBox:e,FeaturedCommunitiesBox:t,CollectionsBoxes:m,CommunitiesBoxes:s,LoadMoreFormik:d}}),[r.edges,a,l.edges,c,i.edges,o,n]);return E.a.createElement(nx,m)},Rx=function(e){var n,t="string"===typeof e.path?[e.path]:(null===(n=e.path)||void 0===n?void 0:n.length)?e.path:[],r=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t[r],i=new URLSearchParams(n||{}).toString(),o=Object(Pn.f)(a,e);return i?"".concat(o,"?").concat(i):o};return{is:function(n){return!!Object(Pn.g)(n,e)},getSimpleLink:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!t||t.isLocal,o=r(e,n,a),l=i?o:(null===t||void 0===t?void 0:t.canonicalUrl)||"#?#",c={external:!i,url:l};return c},getPath:r}},Bx={exact:!0,path:"/discover/:tab(collections|communities)?",component:function(e){var n=e.match.params.tab,t="collections"===n?jx.Collections:"communities"===n?jx.Communities:n?null:jx.Activities,r=Object(x.useMemo)((function(){return null===t?null:{basePath:"/discover",tab:t}}),[t]);return r?E.a.createElement(ly,null,E.a.createElement(Ax,r)):E.a.createElement(Vg,null)}},Nx=Rx(Bx),zx=function(){var e,n,t,r=(t={variables:{limit:je}},V.d(ks,t)),a=Vt(null===(e=r.data)||void 0===e||null===(n=e.me)||void 0===n?void 0:n.user.inbox,(function(e){var n=e.cursor,t=e.update;return r.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var r,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(r=i.me)||void 0===r?void 0:r.user.inbox)&&(null===(a=e.me)||void 0===a?void 0:a.user.inbox)?Object(c.a)(Object(c.a)({},i),{},{me:Object(c.a)(Object(c.a)({},i.me),{},{user:Object(c.a)(Object(c.a)({},i.me.user),{},{inbox:t({prev:e.me.user.inbox,fetched:i.me.user.inbox})})})}):e}})}));return Object(x.useMemo)((function(){return{activitiesPage:a}}),[a])};function Dx(){var e=Object(i.a)(["\n  background: ",";\n  height: 40px;\n  line-height: 40px;\n  border-bottom: ",";\n"]);return Dx=function(){return e},e}var $x=function(e){var n=e.basePath,t=e.InboxElements,r=e.nextInboxFormik;return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,x.createElement(qx,{px:2},x.createElement(Ln.Text,{variant:"suptitle"},x.createElement(nt.Trans,{id:"My timeline"}))),x.createElement(Pn.d,null,x.createElement(Pn.b,{path:"".concat(n)},x.createElement(Ot,null,t),r&&x.createElement(mt,{LoadMoreFormik:r})))))),x.createElement(Yh,null))},qx=_n(Ln.Box)(Dx(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),Vx={id:"My Activities"},Qx=function(e){var n=e.basePath;vi(Vx);var t=zx().activitiesPage,r=Object(u.a)(t.formiks,1)[0],a=Object(x.useMemo)((function(){return E.a.createElement(E.a.Fragment,null,t.edges.map((function(e){return e&&E.a.createElement(XO,{activityId:e.id,key:e.id})})))}),[t]),i=Object(x.useMemo)((function(){return{InboxElements:a,nextInboxFormik:r,basePath:n}}),[a,r,n]);return E.a.createElement($x,i)},Wx=function(e){var n=e.children,t=e.to,r=sa(),a=r.me;return r.loading?null:a?E.a.createElement(Pn.a,{to:t}):E.a.createElement(E.a.Fragment,null,n)},Hx=function(e){var n=e.children;return E.a.createElement(Wx,{to:"/"},n)},Jx=function(e){var n=e.children,t=e.to,r=sa(),a=r.me;return r.loading?null:a?E.a.createElement(E.a.Fragment,null,n):E.a.createElement(Pn.a,{to:t})},Kx=function(e){var n=e.children;return E.a.createElement(Jx,{to:"/login"},n)},Zx={exact:!0,path:"/",component:function(e){e.match;var n=Object(x.useMemo)((function(){return{basePath:""}}),[]);return n?E.a.createElement(Kx,null,E.a.createElement(ly,null,E.a.createElement(Qx,n))):E.a.createElement(Vg,null)}},Gx=Rx(Zx),Yx=function(){var e=Object(x.useContext)(hi).isOpen,n=Qg().myCommunityFollowsPage,t=Object(u.a)(n.formiks,1)[0],r=Object(x.useMemo)((function(){return n.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){var n;return{icon:(null===(n=e.icon)||void 0===n?void 0:n.url)||"",link:Gk.getPath({communityId:e.id,tab:void 0},void 0),name:e.name}}))}),[n]),a=Object(x.useMemo)((function(){return{isSidebarOpen:e,status:zg.Loaded,communities:r,LoadMoreFormik:t,discoverPath:Nx.getPath({tab:void 0},void 0),homePath:Gx.getPath(void 0,void 0)}}),[r,e,t]);return E.a.createElement(gh,a)},Xx=t(774);function eE(){var e=Object(i.a)(["\n  background: ",";\n  height: calc(100vh - 75px);\n  text-align: left;\n  position: absolute;\n  z-index: 999999999999;\n  top: 0;\n  left: 0;\n  bottom: 0px;\n  right: 16px;\n  transition: transform 0.3s ease-in-out;\n  transform: ",";\n  // overflow: scroll;\n  display: grid;\n  grid-template-rows: 160px 1fr 60px;\n  @media (max-width: ",") {\n    width: 100%;\n  }\n"]);return eE=function(){return e},e}function nE(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  width: 18px;\n  height: 18px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  z-index: 10;\n  line-height: 75px;\n  margin: 0 auto;\n  margin-top: 26px;\n  &:focus {\n    outline: none;\n  }\n\n  div {\n    width: 18px;\n    height: 2px;\n    background: ",";\n    border-radius: 10px;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n\n    :first-child {\n      transform: ",";\n    }\n\n    :nth-child(2) {\n      opacity: ",";\n      transform: ",";\n    }\n\n    :nth-child(3) {\n      transform: ",";\n    }\n  }\n"]);return nE=function(){return e},e}function tE(){var e=Object(i.a)(["\n  z-index: 99998;\n  background: rgba(0,0,0,.9);\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  height: calc(100vh - 75px);\n  cursor: pointer;\n  transition: opacity 0.3s ease-in-out;\n  // transform: ",";\n"]);return tE=function(){return e},e}function rE(){var e=Object(i.a)(["\n  line-height: 60px;\n  height: 60px;\n  cursor: pointer;\n  align-items: center;\n  margin: 0 auto;\n  text-align: center;\n  width: 100px;\n  svg {\n    stroke: ",";\n  }\n  div {\n    font-weight: 600;\n    color: ",";\n  }\n  & span {\n    display: inline-block;\n    margin-right: 8px;\n  }\n  & a {\n    color: inherit !important;\n    text-decoration: none;\n  }\n  &:hover {\n    color: ",";\n  }\n"]);return rE=function(){return e},e}function aE(){var e=Object(i.a)(["\n  border-top: 1px solid ",";\n"]);return aE=function(){return e},e}function iE(){var e=Object(i.a)(["\n  overflow: scroll;\n  padding: 16px;\n"]);return iE=function(){return e},e}function oE(){var e=Object(i.a)(["\n  line-height: initial;\n  margin-top: 8px;\n  font-weight: 500;\n  color: ",";\n"]);return oE=function(){return e},e}function lE(){var e=Object(i.a)(["\n  line-height: initial;\n  margin-top: 8px;\n  font-weight: 700;\n  color: ",";\n"]);return lE=function(){return e},e}function cE(){var e=Object(i.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  line-height: initial;\n"]);return cE=function(){return e},e}function uE(){var e=Object(i.a)(["\n  position: relative;\n  > div:first-of-type {\n    width: 60px;\n    height: 60px;\n    border-radius: 60px;\n  }\n"]);return uE=function(){return e},e}function mE(){var e=Object(i.a)(["\n  padding: 16px;\n  border-bottom: ",";\n"]);return mE=function(){return e},e}function sE(){var e=Object(i.a)([""]);return sE=function(){return e},e}var dE=function(e){var n=e.open,t=e.setOpen;return E.a.createElement(kE,{open:n,onClick:function(){return t(!n)}},E.a.createElement("div",null),E.a.createElement("div",null),E.a.createElement("div",null))},fE=function(e){var n=e.open,t=e.Side,r=e.setOpen,a=e.userImage,i=e.name,o=e.username,l=e.signout;return E.a.createElement(E.a.Fragment,null,n&&E.a.createElement(jE,{onClick:function(){return r(!1)}}),E.a.createElement(wE,{open:n},E.a.createElement(pE,null,E.a.createElement(bE,null,E.a.createElement(Pl,{size:"s",src:a}),E.a.createElement(hE,null,i),E.a.createElement(xE,null,o),E.a.createElement(gE,{to:"/settings"},E.a.createElement(Bl.a,{size:"24",strokeWidth:1,color:"#333"})))),E.a.createElement(EE,null,t),E.a.createElement(vE,null,E.a.createElement(yE,null,E.a.createElement(OE,{onClick:l},E.a.createElement(Xx.a,{size:18}),E.a.createElement(Ln.Box,{ml:2},"Sign out"))))))},vE=_n(Ln.Box)(sE()),pE=_n(Ln.Box)(mE(),(function(e){return e.theme.colors.border})),bE=_n(Ln.Box)(uE()),gE=_n(Kt.c)(cE()),hE=_n(Ln.Box)(lE(),(function(e){return e.theme.colors.dark})),xE=_n(Ln.Box)(oE(),(function(e){return e.theme.colors.mediumdark})),EE=_n(Ln.Box)(iE()),yE=_n.div(aE(),(function(e){return e.theme.colors.medium})),OE=_n(Ln.Flex)(rE(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.primary})),jE=_n(Ln.Box)(tE(),(function(e){return e.open?"":"translateX(-100%)"})),kE=_n.button(nE(),(function(e){var n=e.theme;return e.open?n.colors.primary:n.colors.darker}),(function(e){return e.open?"rotate(45deg)":"rotate(0)"}),(function(e){return e.open?"0":"1"}),(function(e){return e.open?"translateX(20px)":"translateX(0)"}),(function(e){return e.open?"rotate(-45deg)":"rotate(0)"})),wE=_n.nav(eE(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.open?"translateX(0)":"translateX(-100%)"}),(function(e){return e.theme.mobile}));function CE(){var e=Object(i.a)(["\n    display: none;\n  "]);return CE=function(){return e},e}function IE(){var e=Object(i.a)(["\n  ","\n"]);return IE=function(){return e},e}function TE(){var e=Object(i.a)(["\n  // Enable to put the right side scrollbar next to the content\n  //overflow: auto;\n"]);return TE=function(){return e},e}function FE(){var e=Object(i.a)(["\n  overflow: auto;\n"]);return FE=function(){return e},e}function SE(){var e=Object(i.a)(["\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n  "]);return SE=function(){return e},e}function PE(){var e=Object(i.a)(["\n    height: calc(100vh - 150px);\n    overflow: overlay;\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n  "]);return PE=function(){return e},e}function ME(){var e=Object(i.a)(["\n  grid-template-rows: auto;\n  grid-template-columns: 240px 1fr;\n  column-gap: 8px;\n  height: calc(100vh - 66px);\n  "]);return ME=function(){return e},e}function _E(){var e=Object(i.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  \n  ","\n  ","\n  ","\n"]);return _E=function(){return e},e}function LE(){var e=Object(i.a)(["\n    grid-template-rows: 75px 1fr 75px;\n  "]);return LE=function(){return e},e}function UE(){var e=Object(i.a)(["\n    grid-template-rows: 50px auto;\n    row-gap: 8px;\n  "]);return UE=function(){return e},e}function AE(){var e=Object(i.a)(["\n  height: 100vh;\n  display: grid;\n  ","\n  ","\n"]);return AE=function(){return e},e}function RE(){var e=Object(i.a)(["\n  height: calc(100vh - 75px);\n  "]);return RE=function(){return e},e}function BE(){var e=Object(i.a)(["\n    display: none;\n  "]);return BE=function(){return e},e}function NE(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-rows: auto;\n  height: calc(100vh - 58px);\n  &.panel_sidebar {\n    ","\n  }\n  ","\n"]);return NE=function(){return e},e}function zE(){var e=Object(i.a)(["\n    display: none;\n  "]);return zE=function(){return e},e}function DE(){var e=Object(i.a)(["\n  background: ","\n  display: grid;\n  border-top: ",";\n  grid-template-columns: 1fr 1fr 1fr;\n  ","\n\n"]);return DE=function(){return e},e}function $E(){var e=Object(i.a)(["\n  height: 75px;\n  line-height: 75px;\n  text-align: center;\n"]);return $E=function(){return e},e}function qE(){var e=Object(i.a)(["\n    display: none;\n  "]);return qE=function(){return e},e}function VE(){var e=Object(i.a)(["\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 24px;\n  flex:1;\n}\n","\n"]);return VE=function(){return e},e}function QE(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return QE=function(){return e},e}function WE(){var e=Object(i.a)(["\n  div {\n    max-width: 36px;\n    height: 36px;\n    min-width: 36px;\n    margin: 0 auto;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return WE=function(){return e},e}function HE(){var e=Object(i.a)(["\n  img {\n    width: 36px;\n    height: 36px;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return HE=function(){return e},e}var JE=function(e){var n=e.SidebarBox,t=e.HeaderBox,r=e.SearchBox,a=e.children,i=e.userImage,o=e.userLink,l=e.username,c=e.name,m=e.signout,s=E.a.useState(!1),d=Object(u.a)(s,2),f=d[0],v=d[1],p=Object(Pn.h)();return E.a.createElement(ty,null,E.a.createElement(YE,null,E.a.createElement(GE,{onClick:function(){return p.goBack()}},E.a.createElement(wl.a,{size:"20"})),r),E.a.createElement(oy,null,t),E.a.createElement(ry,null,E.a.createElement(ny,{className:"panel_sidebar"},E.a.createElement(ay,null,n)),E.a.createElement(ny,null,E.a.createElement(iy,null,a))),E.a.createElement(ey,null,E.a.createElement(XE,null,E.a.createElement(dE,{open:f,setOpen:v}),E.a.createElement(fE,{username:l,name:c,userImage:i,signout:m,open:f,setOpen:v,Side:n})),E.a.createElement(XE,null,E.a.createElement(Kt.c,{to:"/"},E.a.createElement(KE,null,E.a.createElement(Sb.c,{src:we})))),E.a.createElement(XE,null,E.a.createElement(ZE,null,E.a.createElement(Kt.c,{to:o},E.a.createElement(Pl,{src:i,size:"m"}))))))},KE=_n(Ln.Box)(HE()),ZE=_n(Ln.Box)(WE()),GE=_n(Ln.Box)(QE(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),YE=_n(Ln.Box)(VE(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),w.a.greaterThan("medium")(qE())),XE=_n(Ln.Box)($E()),ey=_n(Ln.Box)(DE(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),w.a.greaterThan("medium")(zE())),ny=_n(Ln.Box)(NE(),w.a.lessThan("medium")(BE()),w.a.lessThan("medium")(RE())),ty=_n(Ln.Box)(AE(),w.a.greaterThan("large")(UE()),w.a.lessThan("medium")(LE())),ry=_n(Ln.Box)(_E(),w.a.greaterThan("medium")(ME()),w.a.lessThan("medium")(PE()),w.a.lessThan("small")(SE())),ay=_n(Ln.Box)(FE()),iy=_n(Ln.Box)(TE()),oy=_n(Ln.Box)(IE(),w.a.lessThan("medium")(CE())),ly=function(e){var n=e.children,t=sa(),r=t.loading,a=t.me,i=t.logout,o=Object(x.useMemo)((function(){var e,n=null===a||void 0===a?void 0:a.user;if(!n||r)return null;var t=(null===(e=n.icon)||void 0===e?void 0:e.url)||"",o=FO.getPath({tab:void 0,userId:n.id},void 0);return{SidebarBox:E.a.createElement(Yx,null),HeaderBox:E.a.createElement(Dw,null),SearchBox:E.a.createElement(kl,null),userImage:t,userLink:o,signout:i,username:n.displayUsername||"",name:n.preferredUsername||""}}),[r,i,a]);return o?E.a.createElement(xi,null,E.a.createElement(JE,o,n)):E.a.createElement(nC,null,n)},cy={exact:!0,path:"/collections/:collectionId/:tab(followers)?",component:function(e){var n=e.match,t=n.params.collectionId,r=n.params.tab,a="followers"===r?Pg.Followers:r?null:Pg.Resources,i=Object(x.useMemo)((function(){return null===a?null:{collectionId:t,tab:a,basePath:"/collections/".concat(t)}}),[t,a]);return i?E.a.createElement(ly,null,E.a.createElement(Bg,i)):E.a.createElement(Vg,null)}},uy=Rx(cy),my=t(776),sy=t(777);function dy(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n"]);return dy=function(){return e},e}function fy(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return fy=function(){return e},e}function vy(){var e=Object(i.a)(["\n  position: relative;\n  text-decoration: none;\n  background: ",";\n  margin-top: 0;\n  border-radius: 6px;\n"]);return vy=function(){return e},e}function py(){var e=Object(i.a)(["\n  text-decoration: none;\n  color: ",";\n\n  svg {\n    margin: 0px;\n    margin-right: 5px;\n    display: inline-flex;\n    position: relative;\n    top: 2px;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return py=function(){return e},e}function by(){var e=Object(i.a)(["\n  border: ",";\n  background: ",";\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n"]);return by=function(){return e},e}function gy(){var e=Object(i.a)(["\n  ",";\n  color: ",";\n"]);return gy=function(){return e},e}function hy(){var e=Object(i.a)(["\n  margin: auto;\n  & svg {\n    stroke: ",";\n  }\n"]);return hy=function(){return e},e}function xy(){var e=Object(i.a)(["\n  border-radius: 4px;\n  min-width: 140px;\n  height: 140px;\n  display: flex;\n  align-items: center;\n\n  vertical-align: text-center;\n  background-color: ",";\n"]);return xy=function(){return e},e}function Ey(){var e=Object(i.a)(["\n  border-radius: 5px;\n  color: ",";\n  text-transform: uppercase;\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-weight: 600;\n  cursor: default;\n  margin-right: 4px;\n  display: inline-flex;\n  border: 1px solid ",";\n"]);return Ey=function(){return e},e}function yy(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: none;\n    fill: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg {\n      fill: ",";\n    }\n    div {\n      color: ",";\n    }\n    color: ",";\n    background: ",";\n    border-color: ",";\n  }\n"]);return yy=function(){return e},e}function Oy(){var e=Object(i.a)(["\n  align-items: center;\n  cursor: pointer;\n  margin-right: 8px;\n  margin-left: 8px;\n"]);return Oy=function(){return e},e}function jy(){var e=Object(i.a)(["\n  justify-content: start;\n  padding: 8px;\n  padding-top: 0;\n"]);return jy=function(){return e},e}function ky(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n  text-decoration: none;\n  margin-top: 4px;\n\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n    text-decoration: none;\n  }\n"]);return ky=function(){return e},e}function wy(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return wy=function(){return e},e}function Cy(){var e=Object(i.a)(["\n  font-size: ",";\n  color: ",";\n"]);return Cy=function(){return e},e}function Iy(){var e=Object(i.a)(["\n  color: ",";\n  word-break: break-word;\n"]);return Iy=function(){return e},e}function Ty(){var e=Object(i.a)(["\n  flex: 1;\n  a {\n    text-decoration: underline;\n    font-weight: 600;\n    color: ",";\n  }\n"]);return Ty=function(){return e},e}function Fy(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Fy=function(){return e},e}function Sy(){var e=Object(i.a)(["\n  .dropdown {\n    right: 0;\n    left: auto;\n  }\n"]);return Sy=function(){return e},e}var Py=function(e){var n=e.icon,t=e.name,r=e.summary,a=e.link,i=e.collectionLink,o=e.collectionName,l=e.like,c=e.isFile,u=e.license,m=e.isFlagged,s=e.isSearch,d=e.hideActions,f=e.isOpenDropdown,v=e.toggleDropdown,p=e.toggleFlag,b=(e.sendToMoodle,c?my.a:sy.a);return x.createElement(Wy,null,s&&x.createElement(gr,null,x.createElement(nt.Trans,{id:"Resource"})),x.createElement(Jy,{p:2},""!==n?x.createElement(Pl,{size:"m",src:n}):x.createElement(qy,null,x.createElement(Vy,null,x.createElement(b,{strokeWidth:"2",size:64}))),x.createElement(Ky,{flex:1,ml:3},x.createElement(Hy,{href:a,target:"_blank"},x.createElement(Zy,{flex:"1"},x.createElement(b,{strokeWidth:"1",size:18}),t)),c?x.createElement($y,{mt:1},u):x.createElement(By,null,x.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},x.createElement(Qy,{flex:1},a))),x.createElement(Uy,{variant:"text",mt:2},r))),x.createElement(_y,null,x.createElement(Ly,{ml:2},"Added in: ",x.createElement(Kt.c,{to:i}," ",o)),d?null:x.createElement(Ny,null,l&&x.createElement(Dy,{bordered:!0,liked:!!l.iLikeIt,onClick:l.toggleLikeFormik.submitForm},x.createElement(Ry,null,x.createElement(Rl.a,{strokeWidth:"1",size:"18"})),x.createElement(Ay,{variant:"text",sx:{textTransform:"capitalize"},ml:1},l.totalLikes)),x.createElement(zy,{onClick:v,sx:{position:"relative"}},x.createElement(Ry,null,x.createElement(Ps.a,{className:"hover",size:18})),f&&x.createElement(My,null,x.createElement(Hl,{orientation:"bottom",close:v},p&&x.createElement(Kl,{onClick:p},x.createElement(fu.a,{size:18}),x.createElement(Ln.Text,{sx:{flex:1},ml:2},m?x.createElement(nt.Trans,{id:"Unflag this resource"}):x.createElement(nt.Trans,{id:"Flag this resource"})))))))))},My=_n(Ln.Box)(Sy()),_y=_n(Ln.Flex)(Fy()),Ly=_n(Ln.Flex)(Ty(),(function(e){return e.theme.colors.dark})),Uy=_n(Ln.Text)(Iy(),(function(e){return e.theme.colors.dark})),Ay=_n(Ln.Text)(Cy(),sn.s1,(function(e){return e.theme.colors.darker})),Ry=_n(Ln.Box)(wy()),By=_n(Ln.Box)(ky(),(function(e){return e.theme.colors.mediumdark}),sn.s2),Ny=_n(Ln.Flex)(jy()),zy=_n(Ln.Flex)(Oy()),Dy=_n(Ln.Flex)(yy(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),sn.s1,(function(e){return e.liked?e.theme.colors.lightest:e.theme.colors.primary}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary})),$y=_n(Ln.Text)(Ey(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.secondary})),qy=_n(Ln.Box)(xy(),(function(e){return e.theme.colors.light})),Vy=_n.div(hy(),(function(e){return e.theme.colors.medium})),Qy=_n(Ln.Text)(gy(),Object(it.c)("380px"),(function(e){return e.theme.colors.mediumdark})),Wy=_n(Ln.Box)(by(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),Hy=_n.a(py(),(function(e){return e.theme.colors.darker})),Jy=_n(Ln.Flex)(vy(),(function(e){return e.theme.colors.appInverse})),Ky=_n(Ln.Box)(fy()),Zy=_n(Ln.Heading)(dy(),(function(e){return e.theme.colors.darker})),Gy=function(e){var n=e.resourceId,t=e.flagged,r=Nv(n),a=r.resource,i=r.toggleLike,o=Object(qt.a)({initialValues:{},onSubmit:i}),l=oC(),m=Object(x.useReducer)((function(e){return!e}),!1),s=Object(u.a)(m,2),d=s[0],f=s[1],v=Object(x.useReducer)((function(e){return!e}),!1),p=Object(u.a)(v,2),b=p[0],g=p[1],h=Object(x.useReducer)((function(e){return!l()&&!e}),!1),y=Object(u.a)(h,2),O=y[0],j=y[1],k=Object(x.useMemo)((function(){var e;if(!a)return null;var n=!!t;return Object(c.a)(Object(c.a)({},Yy({resource:a,like:{iLikeIt:!!a.myLike,toggleLikeFormik:o,totalLikes:(null===(e=a.likers)||void 0===e?void 0:e.totalCount)||0},hideActions:n})),{},{isOpenDropdown:d,toggleDropdown:f,sendToMoodle:g,toggleFlag:j})}),[a,t,o,d]),w=O&&a?E.a.createElement(al,{closeModal:j},E.a.createElement(Am,{done:j,ctx:a})):null,C=Object(x.useMemo)((function(){return function(e){var n=zv(null===e||void 0===e?void 0:e.collection);if(!e||!n)return null;var t=e.name,r=e.canonicalUrl,a=e.icon,i=e.license,o=e.summary,l=e.content,c=e.payload;return{canonicalUrl:r||"",collection:n,icon:(null===a||void 0===a?void 0:a.url)||"",name:t,summary:o||"",url:(null===l||void 0===l?void 0:l.url)||(null===c||void 0===c?void 0:c.url)||"",licence:i||"",mediaType:(null===l||void 0===l?void 0:l.mediaType)||""}}(a)}),[a]),I=C&&b?E.a.createElement(al,{closeModal:g},E.a.createElement(Av,{done:g,resource:C})):null;return k&&E.a.createElement(E.a.Fragment,null,w,I,E.a.createElement(Py,k))},Yy=function(e){var n,t,r,a,i,o=e.hideActions,l=e.like,c=e.resource;return{icon:(null===(n=c.icon)||void 0===n?void 0:n.url)||"",link:(null===(t=c.payload)||void 0===t?void 0:t.url)||"",name:c.name||"",summary:c.summary||"",like:l,isFile:!!(null===(r=c.payload)||void 0===r?void 0:r.upload),license:c.license||null,isFlagged:!!c.myFlag,hideActions:o,collectionName:(null===(a=c.collection)||void 0===a?void 0:a.name)||"",collectionLink:uy.getPath({collectionId:(null===(i=c.collection)||void 0===i?void 0:i.id)||"",tab:void 0},void 0)}};function Xy(){var e=Object(i.a)(["\n  background: ",";\n  border-left: 3px solid ",";\n"]);return Xy=function(){return e},e}function eO(){var e=Object(i.a)(["\n  font-size: ",";\n"]);return eO=function(){return e},e}function nO(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return nO=function(){return e},e}function tO(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return tO=function(){return e},e}function rO(){var e=Object(i.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n"]);return rO=function(){return e},e}function aO(){var e=Object(i.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return aO=function(){return e},e}function iO(){var e=Object(i.a)(["\n  color: ",";\n"]);return iO=function(){return e},e}var oO=function(e){var n=e.content,t=e.like,r=e.actor,a=e.createdAt,i=e.communityName,o=e.communityLink,l=e.hideActions,c=e.url;return E.a.createElement(fO,{pl:2},E.a.createElement(Fd,{actor:r,createdAt:a,event:"",communityName:i,communityLink:o}),E.a.createElement(lO,{dangerouslySetInnerHTML:{__html:Ls.a.sanitize(n)},sx:{textDecoration:"none"},variant:"text",mb:2}),E.a.createElement(uO,{mt:2},l?null:E.a.createElement(Ln.Box,null,E.a.createElement(cO,null,E.a.createElement(mO,null,E.a.createElement(Kt.c,{to:c},E.a.createElement(sO,null,E.a.createElement(Ms.a,{className:"hover",strokeWidth:"1",color:"rgba(0,0,0,.4)",size:"18"})),E.a.createElement(dO,{ml:1,variant:"text",sx:{textTransform:"capitalize",textDecoration:"none"}},E.a.createElement(nt.Trans,{id:"Reply"})))),E.a.createElement(mO,{liked:!!t.iLikeIt,onClick:t.toggleLikeFormik.submitForm},E.a.createElement(sO,null,E.a.createElement(Rl.a,{strokeWidth:"1",size:"18"})),E.a.createElement(dO,{variant:"text",sx:{textTransform:"capitalize"},ml:1},t.totalLikes+" "," ",E.a.createElement(nt.Trans,{id:"Star"})))))))},lO=_n(Ln.Text)(iO(),(function(e){return e.theme.colors.dark})),cO=_n(Ln.Flex)(aO()),uO=_n(Ln.Box)(rO()),mO=_n(Ln.Flex)(tO(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),sn.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),sO=_n(Ln.Box)(nO()),dO=_n(Ln.Text)(eO(),sn.s1),fO=_n(Ln.Box)(Xy(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.light})),vO=function(e){var n=e.commentId,t=Ss(n),r=t.comment,a=t.toggleLike,i=Object(qt.a)({initialValues:{},onSubmit:a}),o=Object(x.useMemo)((function(){if(!r)return null;var e=gd(r),n=e.communityLink,t=e.communityName;return{url:r.thread?GO.getPath({threadId:r.thread.id},void 0):"",communityLink:n,communityName:t,actor:r.creator?SO(r.creator):{icon:"",link:"",name:""},createdAt:r.createdAt,content:r.content,like:{iLikeIt:!!r.myLike,totalLikes:r.likerCount||0,toggleLikeFormik:i}}}),[r,i]);return o&&E.a.createElement(oO,o)},pO=function e(n){var t,r=n.context,a=n.flagged;if("Collection"===r.__typename)return a?E.a.createElement(fC,{collectionId:r.id,flagged:a}):E.a.createElement(fC,{collectionId:r.id});if("Comment"===r.__typename)return E.a.createElement(dd,{commentId:r.id,mainComment:!1});if("Community"===r.__typename)return a?E.a.createElement(jv,{communityId:r.id,flagged:a}):E.a.createElement(jv,{communityId:r.id});if("Resource"===r.__typename)return a?E.a.createElement(Gy,{resourceId:r.id,flagged:a}):E.a.createElement(Gy,{resourceId:r.id});if("User"===r.__typename)return a?E.a.createElement(Vb,{userId:r.userId,flagged:a}):E.a.createElement(Vb,{userId:r.userId});if("Like"===r.__typename&&"Comment"===(null===(t=r.context)||void 0===t?void 0:t.__typename))return E.a.createElement(vO,{commentId:r.context.id});var i=void 0!==r&&zm(r);return i?E.a.createElement(e,{context:i}):null},bO=t(778);function gO(){var e=Object(i.a)(["\n  ",";\n  color: ",";\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return gO=function(){return e},e}var hO,xO=function(e){var n=e.HeroUserBox,t=e.LikesBoxes,r=e.ActivityBoxes,a=e.CommunityBoxes,i=e.CollectionsBoxes,o=(e.UserBoxes,e.basePath),l=e.totalCommunities,c=e.userLink,u=e.totalCollections,m=e.totalUsers,s=(e.userName,e.loadMoreActivities),d=e.loadMoreLikes,f=e.loadMoreCommunities,v=e.loadMoreCollections;e.loadMoreFollowing;return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,x.createElement(Ln.Box,{mb:2},n,x.createElement(EO,{basePath:o,totalCommunities:l,totalCollections:u,totalUsers:m})),x.createElement(Pn.d,null,x.createElement(Pn.b,{exact:!0,path:"".concat(o,"/")},x.createElement(Ot,null,r),s&&x.createElement(mt,{LoadMoreFormik:s})),x.createElement(Pn.b,{exact:!0,path:"".concat(o,"/starred")},x.createElement(Ot,null,t),d&&x.createElement(mt,{LoadMoreFormik:d})),x.createElement(Pn.b,{path:"".concat(o,"/communities")},x.createElement(Tt,null,a),f&&x.createElement(mt,{LoadMoreFormik:f})),x.createElement(Pn.b,{path:"".concat(o,"/collections")},x.createElement(Tt,null,x.createElement(St,null,i)),v&&x.createElement(mt,{LoadMoreFormik:v})))))),x.createElement(Zn,null,c.length>0?x.createElement(Gn,null,x.createElement(Yn,{fontWeight:"bold"},"Relevant links"),x.createElement(Xn,null,x.createElement(et,null,x.createElement(Ln.Flex,null,x.createElement(bO.a,{size:20})," ",x.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},x.createElement(yO,{ml:2,flex:1},c)))))):null))},EO=function(e){var n=e.basePath,t=e.totalCommunities;e.totalCollections,e.totalUsers;return x.createElement(It,{p:3,pt:3},x.createElement(Kt.c,{exact:!0,to:"".concat(n)},"Recent activity"),x.createElement(Kt.c,{exact:!0,to:"".concat(n,"/starred")},"Starred"),x.createElement(Kt.c,{exact:!0,to:"".concat(n,"/communities")},t," communities"))},yO=_n(Ln.Text)(gO(),Object(it.c)("250px"),(function(e){return e.theme.colors.dark}));!function(e){e[e.Starred=0]="Starred",e[e.Communities=1]="Communities",e[e.Collections=2]="Collections",e[e.Following=3]="Following",e[e.Activities=4]="Activities"}(hO||(hO={}));var OO={id:"User {name} - Starred"},jO={id:"User {name} - Communities"},kO={id:"User {name} - Collections"},wO={id:"User {name} - Following"},CO={id:"User {name} - Activities"},IO=function(e){var n,t=e.userId,r=e.basePath,a=e.tab,i=Ef(t),o=a===hO.Starred?OO:a===hO.Communities?jO:a===hO.Collections?kO:a===hO.Following?wO:(hO.Activities,CO);vi(!!(null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.name)&&o,i.user);var l=sf(t).likesPage,c=Object(u.a)(l.formiks,1)[0],m=Gd(t).activitiesPage,s=Object(u.a)(m.formiks,1)[0],d=tf(t).followedCollectionsPage,f=Object(u.a)(d.formiks,1)[0],v=cf(t).followedCommunitiesPage,p=Object(u.a)(v.formiks,1)[0],b=bf(t).followedUsersPage,g=Object(u.a)(b.formiks,1)[0],h=Object(x.useMemo)((function(){var e,n,a=i.totalActivities,o=i.totalCollections,u=i.totalCommunities,h=i.totalUsers,x=E.a.createElement(E.a.Fragment,null,l.edges.map((function(e){var n="Category"!==e.context.__typename&&"Flag"!==e.context.__typename&&"Follow"!==e.context.__typename&&"Like"!==e.context.__typename&&"SpatialThing"!==e.context.__typename&&"Organisation"!==e.context.__typename&&"Taggable"!==e.context.__typename&&"Intent"!==e.context.__typename?e.context:null,t=gd(n),r=t.communityLink,a=t.communityName,o=i.user?SO(i.user):null,l=e,c=Dm(l,fe.Created),u="Comment"===e.context.__typename?E.a.createElement(vO,{key:e.id,commentId:e.context.id}):E.a.createElement(pO,{context:l}),m={actor:o,communityLink:r,communityName:a,createdAt:e.createdAt,event:c,status:pd.Loaded,preview:u};return E.a.createElement(Td,Object.assign({},m,{key:l.id}))}))),y=E.a.createElement(E.a.Fragment,null,m.edges.map((function(e){return E.a.createElement(XO,{activityId:e.id,key:e.id})}))),O=E.a.createElement(E.a.Fragment,null,d.edges.map((function(e){return e.context})).filter((function(e){return"Collection"===e.__typename})).map((function(e){return E.a.createElement(Sb.a,{m:2,mb:0,key:e.id},E.a.createElement(fC,{collectionId:e.id,key:e.id}))}))),j=E.a.createElement(E.a.Fragment,null,v.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){return E.a.createElement(jv,{communityId:e.id,key:e.id})}))),k=E.a.createElement(E.a.Fragment,null,b.edges.map((function(e){return e.context})).filter((function(e){return"User"===e.__typename})).map((function(e){return E.a.createElement(Vb,{userId:e.userId,key:e.userId})})));return{basePath:r,ActivityBoxes:y,LikesBoxes:x,HeroUserBox:E.a.createElement(Gf,{userId:t}),CollectionsBoxes:O,CommunityBoxes:j,UserBoxes:k,userName:(null===(e=i.user)||void 0===e?void 0:e.name)||"",totalActivities:"".concat(a||"0"),totalCollections:"".concat(o||"0"),totalCommunities:"".concat(u||"0"),totalUsers:"".concat(h||"0"),userLink:(null===(n=i.user)||void 0===n?void 0:n.website)||"",loadMoreActivities:s,loadMoreCollections:f,loadMoreCommunities:p,loadMoreFollowing:g,loadMoreLikes:c}}),[i,l,m.edges,d.edges,v.edges,b.edges,t,r,s,f,p,g,c]);return E.a.createElement(xO,h)},TO={exact:!0,path:"/user/:userId/:tab(starred|communities|collections|following)?",component:function(e){var n=e.match,t=n.params.userId,r=n.params.tab,a="starred"===r?hO.Starred:"communities"===r?hO.Communities:"collections"===r?hO.Collections:"following"===r?hO.Following:r?null:hO.Activities,i=Object(x.useMemo)((function(){return null===a?null:{tab:a,userId:t,basePath:FO.getPath({tab:void 0,userId:t},void 0)}}),[a,t]);return i?E.a.createElement(ly,null,E.a.createElement(IO,i)):E.a.createElement(Vg,null)}},FO=Rx(TO),SO=function(e){var n,t;return{icon:(null===(n=e.icon)||void 0===n?void 0:n.url)||(null===(t=e.image)||void 0===t?void 0:t.url)||"",name:e.userName||"",link:FO.getPath({tab:void 0,userId:e.userId},void 0)}},PO=function(e){var n,t,r,a=(r={variables:{threadId:e,limit:je}},V.d(Cs,r)),i=Vt(null===(n=a.data)||void 0===n||null===(t=n.thread)||void 0===t?void 0:t.comments,(function(n){var t=n.cursor,r=n.update;return a.fetchMore({variables:Object(c.a)(Object(c.a)({},t),{},{limit:je,threadId:e}),updateQuery:function(e,n){var t,a,i=n.fetchMoreResult;return(null===i||void 0===i||null===(t=i.thread)||void 0===t?void 0:t.comments)&&(null===(a=e.thread)||void 0===a?void 0:a.comments)?Object(c.a)(Object(c.a)({},i),{},{thread:Object(c.a)(Object(c.a)({},i.thread),{},{comments:r({prev:e.thread.comments,fetched:i.thread.comments})})}):e}})}));return Object(x.useMemo)((function(){return{commentPage:i}}),[i])},MO=t(779);function _O(){var e=Object(i.a)(["\n  border-bottom: ",";\n  background: ",";\n  cursor: pointer;\n  &:hover {\n    background: ",";\n  }\n  a {\n    text-decoration: none;\n    * {\n      text-decoration: none;\n    }\n  }\n"]);return _O=function(){return e},e}function LO(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  flex: 1;\n"]);return LO=function(){return e},e}function UO(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return UO=function(){return e},e}function AO(){var e=Object(i.a)(['\n  max-width: 28px !important;\n  max-height: 28px !important;\n  border-radius: 28px !important;\n  background: url("','");\n  background-repeat: no-repeat;\n  background-position: cover;\n  width: 28px;\n  height: 28px;\n  background-size: cover;\n']);return AO=function(){return e},e}function RO(){var e=Object(i.a)(["\n  color: ",";\n"]);return RO=function(){return e},e}function BO(){var e=Object(i.a)(["\n  svg {\n    vertical-align: middle;\n  }\n"]);return BO=function(){return e},e}var NO=function(e){var n=e.content,t=e.lastActivity,r=e.totalReplies,a=e.totalLikes,i=e.members,o=e.link;return E.a.createElement(QO,{p:3},E.a.createElement(Kt.c,{to:o},E.a.createElement(DO,{variant:"text"},n),E.a.createElement(Ln.Flex,{mt:2,alignItems:"center"},E.a.createElement(Ln.Flex,{flex:1},E.a.createElement(VO,null,E.a.createElement(nt.Trans,{id:"Last activity"})," ",fa.DateTime.fromSQL(t).toRelative()),E.a.createElement(qO,null,E.a.createElement(Ln.Flex,{alignItems:"center"},E.a.createElement(zO,{mr:1},E.a.createElement(MO.a,{size:16}))," ",r||0),E.a.createElement(Ln.Flex,{ml:3,alignItems:"center"},E.a.createElement(zO,{mr:1},E.a.createElement(Rl.a,{size:16})),a||0))),E.a.createElement(Ln.Flex,null,i.map((function(e,n){return E.a.createElement($O,{ml:1,src:e})}))))))},zO=_n(Ln.Box)(BO()),DO=_n(Ln.Text)(RO(),(function(e){return e.theme.colors.dark})),$O=_n(Ln.Box)(AO(),(function(e){return e.src})),qO=_n(Ln.Flex)(UO(),(function(e){return e.theme.colors.mediumdark})),VO=_n(Ln.Text)(LO(),(function(e){return e.theme.colors.mediumdark})),QO=_n(Ln.Box)(_O(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.lighter})),WO=function(e){var n=e.threadId,t=bd(n),r=t.mainComment,a=t.totalReplies,i=Object(x.useMemo)((function(){return r?{content:r.content,lastActivity:r.createdAt,members:[],totalLikes:"".concat(r.likerCount||0),totalReplies:a?"".concat(a):"",link:"/thread/".concat(n)}:null}),[r,a,n]);return i&&E.a.createElement(NO,i)},HO=function(e){var n=e.ctx;if(!n)return null;switch(n.__typename){case"Activity":return E.a.createElement(XO,{activityId:n.id});case"Collection":return E.a.createElement(fC,{collectionId:n.id});case"Comment":return E.a.createElement(dd,{commentId:n.id,mainComment:!1});case"Community":return E.a.createElement(jv,{communityId:n.id});case"Resource":return E.a.createElement(Gy,{resourceId:n.id});case"Thread":return E.a.createElement(WO,{threadId:n.id});case"User":return E.a.createElement(Vb,{userId:n.id});default:return null}},JO={id:"Discussion: {excerpt}"},KO=function(e){var n=e.threadId,t=PO(n).commentPage,r=Object(u.a)(t.formiks,1)[0],a=bd(n),i=a.mainComment&&{excerpt:"".concat(a.mainComment.content.substring(0,30)," ...")};vi(!!i&&JO,i);var o=Object(qt.a)({initialValues:{replyMessage:""},onSubmit:function(e){var n=e.replyMessage;return a.reply(n)}}),l=Object(x.useMemo)((function(){var e,n=a.context,i=a.mainComment;if(n&&("User"===n.__typename||"Like"===n.__typename||"Follow"===n.__typename||"Comment"===n.__typename))return null;var l=zm(n);if(!i||!l)return null;var u=gd(l),m=u.communityName,s=u.communityId,d=u.communityIcon,f={communityLink:"/communities/".concat(s),communityName:m,event:"started a discussion",status:pd.Loaded},v=E.a.createElement(Td,Object(c.a)(Object(c.a)({},f),{},{actor:i.creator?SO(i.creator):null,preview:E.a.createElement(dd,{commentId:i.id,mainComment:!0}),createdAt:i.createdAt}));return{Comments:E.a.createElement(E.a.Fragment,null,t.edges.filter((function(e){var n;return e.id!==(null===(n=a.mainComment)||void 0===n?void 0:n.id)})).map((function(e){return E.a.createElement(Sb.a,{mb:1,key:e.id},E.a.createElement(Td,Object(c.a)(Object(c.a)({},f),{},{event:"replied",actor:e.creator?SO(e.creator):{icon:"",link:"",name:""},preview:E.a.createElement(dd,{commentId:e.id,mainComment:!1,hideActions:!0}),createdAt:e.createdAt})))}))),Context:E.a.createElement(HO,{ctx:"User"===l.__typename?Object(c.a)(Object(c.a)({},l),{},{id:l.userId}):l}),MainThread:v,communityIcon:d,communityId:s,communityName:m,reply:a.canReply?{replyFormik:o}:null,isCommunityContext:"Community"===(null===(e=a.context)||void 0===e?void 0:e.__typename),loadMoreComments:r}}),[a,t,r,o]);return l&&E.a.createElement(as,l)},ZO={exact:!0,path:"/thread/:threadId",component:function(e){var n=e.match.params.threadId,t=Object(x.useMemo)((function(){return{threadId:n}}),[n]);return E.a.createElement(ly,null,E.a.createElement(KO,t))}},GO=Rx(ZO),YO=function(e){var n,t,r,a=null===(n=(t={variables:{activityId:e}},V.d(Nm,t)).data)||void 0===n?void 0:n.activity,i=zm(null===a||void 0===a?void 0:a.context),o=function(e){return e?Dm(e.context,e.verb):""}(a)||"",l=(r=i)?"Comment"===r.__typename?r.thread?GO.getPath({threadId:r.thread.id},void 0):"":"Resource"===r.__typename?r.payload?r.payload.url:"":"User"===r.__typename?FO.getPath({userId:r.userId,tab:void 0},void 0):"Collection"===r.__typename?uy.getPath({collectionId:r.id,tab:void 0},void 0):"Community"===r.__typename?Gk.getPath({communityId:r.id,tab:void 0},void 0):null:"",c=gd(i);return Object(x.useMemo)((function(){return{activity:a,mainContext:i,eventString:o,link:l,communityInfoStrings:c}}),[a,i,o,l,c])},XO=function(e){var n=e.activityId,t=YO(n),r=Object(x.useMemo)((function(){var e=t.activity,n=t.communityInfoStrings,r=t.eventString;if(e){var a,i,o;if(!e.context)return console.error("ActivityPreviewHOC: user or context :null",e),null;var l="Comment"===e.context.__typename?null===(a=e.context.thread)||void 0===a?void 0:a.id:"Like"===e.context.__typename&&"Comment"===(null===(i=e.context.context)||void 0===i?void 0:i.__typename)?null===(o=e.context.context.thread)||void 0===o?void 0:o.id:void 0,u=E.a.createElement(E.a.Fragment,null);return"Category"!==e.context.__typename&&"Intent"!==e.context.__typename&&"Organisation"!==e.context.__typename&&"SpatialThing"!==e.context.__typename&&"Taggable"!==e.context.__typename&&(u=E.a.createElement(pO,{context:e.context})),Object(c.a)(Object(c.a)({status:pd.Loaded,createdAt:e.createdAt,actor:e.user&&SO(e.user),threadUrl:l&&GO.getPath({threadId:l},void 0),event:r},n),{},{preview:u})}return{status:pd.Loading}}),[t]);return r&&E.a.createElement(Td,r)};function ej(){var e=Object(i.a)(["\n  background: ",";\n"]);return ej=function(){return e},e}function nj(){var e=Object(i.a)(["\n  background: ",";\n  height: 50px;\n  line-height: 50px;\n  align-items: center;}\n  </>\n);\n\n  border-bottom: ",";\n  button {\n    width: 190px;\n    text-transform: inherit;\n    letter-spacing: 0;\n    padding: 0;\n    height: 32px;\n    line-height: 32px;\n    background: #ffe5cd;\n    color: #ca6a11;\n    border: none;\n  }\n"]);return nj=function(){return e},e}var tj=function(e){var n=e.tabPaths;return x.createElement(It,{p:3,pt:0},x.createElement(Kt.c,{exact:!0,to:n.intents},x.createElement(nt.Trans,{id:"Intents"})),x.createElement(Kt.c,{exact:!0,to:n.inventory},x.createElement(nt.Trans,{id:"Recent Inventory"})),x.createElement(Kt.c,{to:n.timeline},x.createElement(nt.Trans,{id:"Recent activity"})),x.createElement(Kt.c,{to:n.discussions},x.createElement(nt.Trans,{id:"Discussions"})),x.createElement(Kt.c,{to:n.members},x.createElement(nt.Trans,{id:"Members"})))},rj=_n(Ln.Flex)(nj(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border})),aj=_n(Ln.Box)(ej(),(function(e){return e.theme.colors.appInverse})),ij=function(e){var n=e.Activities,t=e.HeroCommunity,r=e.Members,a=e.Intents,i=e.Inventory,o=e.tabPaths,l=e.newThreadFormik,c=e.Threads,u=e.loadMoreActivities,m=e.loadMoreThreads;return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,t,x.createElement(tj,{tabPaths:o}),x.createElement(Pn.d,null,x.createElement(Pn.b,{exact:!0,path:o.intents},x.createElement(Tt,null,a)),x.createElement(Pn.b,{exact:!0,path:o.inventory},x.createElement(Tt,null,i)),x.createElement(Pn.b,{exact:!0,path:o.timeline},x.createElement(x.Fragment,null,x.createElement(Ot,{mt:2},n),u&&x.createElement(mt,{LoadMoreFormik:u}))),x.createElement(Pn.b,{exact:!0,path:o.discussions},x.createElement(x.Fragment,null,x.createElement(aj,{p:3,mb:2},l&&x.createElement(Zm,{placeholder:"Start a new thread...",submit:function(e){l.setValues({text:e}),l.submitForm()}})),x.createElement(rj,{px:3,mt:2},x.createElement(Ln.Text,{variant:"suptitle"},"All discussions")),x.createElement(Tt,null,c),m&&x.createElement(mt,{LoadMoreFormik:m}))),x.createElement(Pn.b,{path:o.members},x.createElement(x.Fragment,null,x.createElement(Tt,null,r))))))),x.createElement(Yh,null))};function oj(){var e=Object(i.a)(["\n    query communityIntents($communityId: ID) {\n  intentsFiltered(inScopeOf: [$communityId]) {\n    ...IntentPreview\n  }\n}\n    ",""]);return oj=function(){return e},e}function lj(){var e=Object(i.a)(["\n    fragment IntentPreview on Intent {\n  id\n  name\n  note\n  tags {\n    __typename\n  }\n}\n    "]);return lj=function(){return e},e}var cj=R()(lj()),uj=R()(oj(),cj);var mj=function(e){var n,t,r,a=null!==(n=null===(t=(r={variables:{communityId:e}},V.d(uj,r)).data)||void 0===t?void 0:t.intentsFiltered)&&void 0!==n?n:[];return Object(x.useMemo)((function(){return{communityIntents:a}}),[a])};function sj(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none;\n"]);return sj=function(){return e},e}function dj(){var e=Object(i.a)(["\n  flex: 1;\n  position: relative;\n  div {\n    text-decoration: none;\n  }\n"]);return dj=function(){return e},e}function fj(){var e=Object(i.a)(["\n  position: relative;\n  text-decoration: none;\n  background: ",";\n  margin-top: 0;\n  border-radius: 6px;\n"]);return fj=function(){return e},e}function vj(){var e=Object(i.a)(["\n  text-decoration: none;\n  color: ",";\n  background: 0;\n  border: 0;\n\n  svg {\n    margin: 0px;\n    margin-right: 5px;\n    display: inline-flex;\n    position: relative;\n    top: 2px;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return vj=function(){return e},e}function pj(){var e=Object(i.a)(["\n  border: ",";\n  background: ",";\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px 0px #0000001f;\n  margin: 10px;\n"]);return pj=function(){return e},e}function bj(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border: 1px solid ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: none;\n    fill: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg {\n      fill: ",";\n    }\n    div {\n      color: ",";\n    }\n    color: ",";\n    background: ",";\n    border-color: ",";\n  }\n"]);return bj=function(){return e},e}function gj(){var e=Object(i.a)(["\n  justify-content: start;\n  padding: 8px;\n  padding-top: 0;\n"]);return gj=function(){return e},e}function hj(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return hj=function(){return e},e}function xj(){var e=Object(i.a)(["\n  font-size: ",";\n  color: ",";\n"]);return xj=function(){return e},e}function Ej(){var e=Object(i.a)(["\n  color: ",";\n  word-break: break-word;\n"]);return Ej=function(){return e},e}function yj(){var e=Object(i.a)(["\n  flex: 1;\n  a {\n    text-decoration: underline;\n    font-weight: 600;\n    color: ",";\n  }\n"]);return yj=function(){return e},e}function Oj(){var e=Object(i.a)(["\n  align-items: center;\n"]);return Oj=function(){return e},e}var jj=function(e){var n=e.icon,t=e.name,r=e.summary,a=e.link,i=e.collectionLink,o=e.collectionName,l=e.like,c=e.isSearch,u=e.hideActions,m=e.onOpen;return x.createElement(Pj,null,c&&x.createElement(gr,null,x.createElement(nt.Trans,{id:"Intent"})),x.createElement(_j,{p:2},""!==n&&x.createElement(Pl,{size:"m",src:n}),x.createElement(Lj,{flex:1,ml:3},x.createElement(Mj,{onClick:function(){m&&m(a)}},x.createElement(Uj,{flex:"1"},t)),r&&x.createElement(Cj,{variant:"text",mt:2},r))),x.createElement(kj,null,x.createElement(wj,{ml:2,mb:2},"Added in ",x.createElement(Kt.c,{to:i}," +",o)),u?null:x.createElement(Fj,null,l&&x.createElement(Sj,{bordered:!0,liked:!!l.iLikeIt,onClick:l.toggleLikeFormik.submitForm},x.createElement(Tj,null,x.createElement(Rl.a,{strokeWidth:"1",size:"18"})),x.createElement(Ij,{variant:"text",sx:{textTransform:"capitalize"},ml:1},l.totalLikes)))))},kj=_n(Ln.Flex)(Oj()),wj=_n(Ln.Flex)(yj(),(function(e){return e.theme.colors.dark})),Cj=_n(Ln.Text)(Ej(),(function(e){return e.theme.colors.dark})),Ij=_n(Ln.Text)(xj(),sn.s1,(function(e){return e.theme.colors.darker})),Tj=_n(Ln.Box)(hj()),Fj=_n(Ln.Flex)(gj()),Sj=_n(Ln.Flex)(bj(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.liked?e.theme.colors.primary:"transparent"}),(function(e){return e.bordered?e.theme.colors.primary:"transparent"}),sn.s1,(function(e){return e.liked?e.theme.colors.lightest:e.theme.colors.primary}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked,e.theme.colors.lightest}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary}),(function(e){return e.liked?e.theme.colors.mediumdark:e.theme.colors.primary})),Pj=_n(Ln.Box)(pj(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),Mj=_n.button(vj(),(function(e){return e.theme.colors.darker})),_j=_n(Ln.Flex)(fj(),(function(e){return e.theme.colors.appInverse})),Lj=_n(Ln.Box)(dj()),Uj=_n(Ln.Heading)(sj(),(function(e){return e.theme.colors.darker})),Aj=function(e){var n=e.intentId,t={name:e.name,summary:e.note,link:n,like:null,hideActions:!0,collectionLink:e.communityLink,collectionName:e.communityName,onOpen:e.onOpen};return t&&E.a.createElement(jj,t)};function Rj(){var e=Object(i.a)(["\n    query actions {\n  actions {\n    label\n    id\n    note\n  }\n}\n    "]);return Rj=function(){return e},e}var Bj=R()(Rj());function Nj(e){return V.d(Bj,e)}function zj(){var e=Object(i.a)(["\n    query unitsPages {\n  unitsPages {\n    edges {\n      id\n      symbol\n      label\n    }\n  }\n}\n    "]);return zj=function(){return e},e}function Dj(){var e=Object(i.a)(["\n    query economicEventsFiltered($action: ID!) {\n  economicEventsFiltered(action: $action) {\n    id\n    provider {\n      id\n      name\n    }\n    receiver {\n      id\n      name\n    }\n  }\n}\n    "]);return Dj=function(){return e},e}function $j(){var e=Object(i.a)(["\n    query spatialThingsPages {\n  spatialThingsPages {\n    edges {\n      id\n      name\n      lat\n      long\n    }\n  }\n}\n    "]);return $j=function(){return e},e}var qj=R()($j());function Vj(e){return V.d(qj,e)}var Qj=R()(Dj());var Wj=R()(zj());function Hj(e){return V.d(Wj,e)}var Jj=function(e){var n,t,r,a=e.children,i=x.useState([]),o=Object(u.a)(i,2),l=o[0],m=o[1],s=x.useState([]),d=Object(u.a)(s,2),f=d[0],v=d[1],p=x.useState(""),b=Object(u.a)(p,2),g=b[0],h=b[1],E=Nj(),y=(r={variables:{action:g}},V.d(Qj,r)).data;x.useEffect((function(){var e,n,t=null===y||void 0===y||null===(e=y.economicEventsFiltered)||void 0===e?void 0:e.map((function(e){return e.provider})),r=null===y||void 0===y||null===(n=y.economicEventsFiltered)||void 0===n?void 0:n.map((function(e){return e.receiver})),a=[];(null===t||void 0===t?void 0:t.length)&&t.forEach((function(e){!a.some((function(n){return n.id===e.id}))&&a.push(e)}));var i=[];(null===r||void 0===r?void 0:r.length)&&r.forEach((function(e){!i.some((function(n){return n.id===e.id}))&&i.push(e)})),m(a),v(i)}),[y]);var O=Hj(),j={actionList:null===(n=E.data)||void 0===n?void 0:n.actions,providerList:l,receiverList:f,unitPages:null===(t=O.data)||void 0===t?void 0:t.unitsPages,setAction:h},k=x.Children.map(a,(function(e){return x.isValidElement(e)?x.cloneElement(e,Object(c.a)({},j)):e}));return x.createElement("div",null,k)};function Kj(){var e=Object(i.a)(["\n    query intentPanel($intentId: ID) {\n  intent(id: $intentId) {\n    resourceInventoriedAs {\n      id\n      trace {\n        hasPointInTime\n        action {\n          label\n        }\n      }\n    }\n  }\n}\n    "]);return Kj=function(){return e},e}function Zj(){var e=Object(i.a)(["\n    mutation createEconomicEvent($note: String, $action: ID!, $provider: ID!, $receiver: ID!, $hasUnit: ID!, $hasNumericalValue: Float!) {\n  createEconomicEvent(event: {note: $note, action: $action, provider: $provider, receiver: $receiver, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}}) {\n    economicEvent {\n      id\n    }\n    economicResource {\n      id\n    }\n  }\n}\n    "]);return Zj=function(){return e},e}var Gj=R()(Zj());R()(Kj());var Yj=function(){var e,n=V.c(Gj,e),t=Object(u.a)(n,2),r=t[0],i=t[1],l=iC(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c,u,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.note,o=n.action,l=n.provider,c=n.receiver,u=n.hasUnit,m=n.hasNumericalValue,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{note:t,action:o,provider:l,receiver:c,hasUnit:u,hasNumericalValue:m}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return Object(x.useMemo)((function(){return{create:l}}),[l])};function Xj(){var e=Object(i.a)(["\n  background-color: transparent !important;\n  color: #ff5a5f !important;\n  text-align: right !important;\n  line-height: 1 !important;\n"]);return Xj=function(){return e},e}function ek(){var e=Object(i.a)(["\n  textarea,\n  input {\n    opacity: ",";\n    cursor: ",";\n    border: 1px solid #05244f;\n    border-radius: 4px;\n    height: 40px;\n    display: block;\n    width: 100%;\n    box-sizing: border-box;\n    padding 0 10px;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    color: #666666;\n    letter-spacing: 1px;\n    margin-bottom: 10px;\n  }\n  textarea {\n    padding: 10px;\n    height: 120px;\n  }\n"]);return ek=function(){return e},e}var nk=function(e){var n=e.id,t=e.name,r=e.type,a=void 0===r?"text":r,i=e.onChange,o=e.placeholder,l=void 0===o?"":o,c=e.label,u=e.value,m=void 0===u?"":u,s=e.hint,d=void 0===s?{class:"error",value:""}:s,f=e.disabled,v=void 0!==f&&f;return E.a.createElement(tk,{disabled:v},E.a.createElement("label",{htmlFor:n},c),"textarea"!==a&&E.a.createElement("input",{id:n,type:a,name:t,placeholder:l,value:m,onChange:i,disabled:v}),"textarea"===a&&E.a.createElement("textarea",{id:n,name:t,placeholder:l,value:m,onChange:i,disabled:v}),E.a.createElement("span",{className:"hint ".concat(d.class)},d.value))},tk=_n("div")(ek(),(function(e){return!0===e.disabled?"0.7":"1"}),(function(e){return!0===e.disabled?"default":"text"})),rk=_n(ko)(Xj()),ak=t(204);function ik(){var e=Object(i.a)(["\n  margin-bottom: 10px;\n  small {\n    display: block;\n    padding-top: 6px;\n    font-size: 10px;\n    color: #aaa;\n  }\n  b,\n  .select__value-container,\n  .select__single-value {\n    display: block;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    font-size: 14px;\n    color: #666666;\n    letter-spacing: 1px;\n  }\n  .select__control > div {\n    height: 36px;\n  }\n  .select__value-container > div:not(.select__single-value) {\n    height: 36px;\n    padding: 0;\n    margin: 0;\n    line-height: 36px;\n  }\n  .select__value-container {\n    height: 36px;\n    padding: 0 10px;\n  }\n  .select__control--menu-is-open,\n  .select__control--is-focused {\n    border-color: #05244f !important;\n    box-shadow: none;\n\n    small {\n      display: none;\n    }\n  }\n  .select__control {\n    border: 1px solid #05244f;\n    border-radius: 4px;\n    height: 40px;\n  }\n  ",";\n  margin: '0 10px 0 0 ';\n  opacity: ",";\n  cursor: 'pointer';\n  &:hover && not:['disabled'] {\n    background: ",";\n  }\n"]);return ik=function(){return e},e}var ok=_n(ak.a)(ik(),Object(it.e)("background, 0.2s"),(function(e){return!0===e.disabled?"0.7":"1"}),(function(e){return"primary"===e.variant||"danger"===e.variant?Object(it.b)("0.1",e.theme.colors.primary):Object(it.d)("0.3",e.theme.colors.primary)})),lk=function(e){var n=e.onSelect,t=e.disabled,r=void 0!==t&&t,a=e.variant,i=e.placeholder,o=void 0===i?"":i,l=e.name,c=e.options,u=e.id,m=e.value,s=c?c.map((function(e){return{id:e.id,value:e.label,label:E.a.createElement("span",null,E.a.createElement("b",null,e.label),e.note&&E.a.createElement("small",null,e.note))}})):[];return E.a.createElement(ok,{onChange:function(e){return n(l,{id:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.value})},variant:a,placeholder:o,disabled:r,className:"basic-single",classNamePrefix:"select",value:s.find((function(e){return e.id===(null===m||void 0===m?void 0:m.id)}))||null,isDisabled:!1,isLoading:!1,isClearable:!0,isRtl:!1,isSearchable:!0,name:l,id:u,options:s})},ck=function(e,n){if("string"===typeof n)return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return{id:e.id,label:e[n]}})):[];var t=function(e){var t="".concat(n.template);return n.variables.forEach((function(n){t=t.replace(n,"".concat(e[n]))})),t};return(null===e||void 0===e?void 0:e.length)?e.map((function(e){return{id:e.id,label:t(e)}})):[]};function uk(){var e=Object(i.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n  > button {\n    width: 100%;\n  }\n\n  .event_btn {\n    height: 40px;\n    text-transform: uppercase;\n    font-family: 'Arial', sans-serif;\n    font-weight: 600;\n    letter-spacing: 1px;\n  }\n"]);return uk=function(){return e},e}function mk(){var e=Object(i.a)(["\n  .d-flex {\n    margin-top: 10px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    & > div {\n      width: calc(50% - 5px);\n    }\n\n    button {\n      width: 100%;\n      background: #cdcdcd;\n    }\n  }\n"]);return mk=function(){return e},e}function sk(){var e=Object(i.a)(["\n  display: block;\n  font-size: 10px;\n  color: #aaa;\n  font-family: 'Arial', sans-serif;\n  text-transform: uppercase;\n  margin-bottom: 2px;\n"]);return sk=function(){return e},e}function dk(){var e=Object(i.a)(["\n  display: block;\n  position: relative;\n"]);return dk=function(){return e},e}var fk=_n("div")(dk()),vk=_n("label")(sk()),pk=_n("form")(mk()),bk=_n.div(uk()),gk=function(e){var n=e.actionList,t=e.setAction,r=e.providerList,i=e.receiverList,l=e.unitPages,d=x.useState({note:"",action:{id:"",label:"",note:""},provider:{id:"",label:""},receiver:{id:"",label:""},hasUnit:{id:"",label:""},hasNumericalValue:""}),f=Object(u.a)(d,2),v=f[0],p=f[1],b=x.useState([]),g=Object(u.a)(b,2),h=g[0],E=g[1],y=x.useState([]),O=Object(u.a)(y,2),j=O[0],k=O[1],w=x.useState([]),C=Object(u.a)(w,2),I=C[0],T=C[1];x.useEffect((function(){E(ck(r,"name")),k(ck(i,"name"))}),[r,i]),x.useEffect((function(){T(ck(null===l||void 0===l?void 0:l.edges,{variables:["label","symbol"],template:"label / symbol"}))}),[l]),x.useEffect((function(){return F()}),[]);var F=function(){return p({note:"",action:{id:"",label:"",note:""},provider:{id:"",label:""},receiver:{id:"",label:""},hasUnit:{id:"",label:""},hasNumericalValue:""})},S=function(e,n){P({target:{name:e,value:n}}),(null===n||void 0===n?void 0:n.id)&&t(n.id)},P=function(e){var n=e.target,t=n.name,r=n.value;p(Object(c.a)(Object(c.a)({},v),{},Object(m.a)({},t,r)))},M=Yj().create,_=function(){var e=Object(o.a)(a.a.mark((function e(n){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,M({note:v.note,action:v.action.id,provider:v.provider.id,receiver:v.receiver.id,hasUnit:v.hasUnit.id,hasNumericalValue:+v.hasNumericalValue});case 3:!(null===(t=e.sent)||void 0===t?void 0:t.errors)&&s.c.success("Event was created",{position:"top-right",transition:s.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})&&F();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return x.createElement("div",{style:{margin:"0 10px 12px 0"}},x.createElement(pk,{onSubmit:_},x.createElement(fk,null,x.createElement(lk,{options:n,variant:"primary",placeholder:"Select action",value:v.action,id:"action",name:"action",onSelect:S})),h.length?x.createElement("div",null,x.createElement("div",{className:"d-flex"},x.createElement(fk,null,x.createElement(vk,null,"Provider"),x.createElement(lk,{options:h,variant:"primary",placeholder:"Provider",value:v.provider,id:"provider",name:"provider",onSelect:S})),x.createElement(fk,null,x.createElement(vk,null,"Receiver"),x.createElement(lk,{options:j,variant:"primary",placeholder:"Receiver",value:v.receiver,id:"receiver",name:"receiver",onSelect:S}))),x.createElement(fk,null,x.createElement(vk,null,"note"),x.createElement(nk,{id:"note",type:"textarea",name:"note",hint:{class:"error",value:""},onChange:P,placeholder:"note",value:v.note})),x.createElement("div",{className:"d-flex"},x.createElement(fk,null,x.createElement(vk,null,"unit"),x.createElement(lk,{options:I,value:v.hasUnit,placeholder:"Unit",variant:"primary",id:"hasUnit",name:"hasUnit",onSelect:S})),x.createElement(fk,null,x.createElement(vk,null,"numerical value"),x.createElement(nk,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:P,hint:{class:"error",value:""},placeholder:"Numerical Value",value:v.hasNumericalValue}))),x.createElement(bk,null,x.createElement(ct,{variant:"info",type:"submit",onClick:_,className:"event_btn"},x.createElement(nt.Trans,{id:"Create Event"})))):null),x.createElement(s.b,null))},hk=t(780),xk=t(792);function Ek(){var e=Object(i.a)(["\n  text-align: center;\n  display: block;\n"]);return Ek=function(){return e},e}function yk(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  padding: 16px;\n  ",";\n"]);return yk=function(){return e},e}function Ok(){var e=Object(i.a)(["\n      margin-top: 8px;\n    "]);return Ok=function(){return e},e}function jk(){var e=Object(i.a)(["\n  flex: 1;\n  margin-left: 16px;\n  position: relative;\n  ",";\n  & h2 {\n    margin: 0;\n    line-height: 32px !important;\n    font-size: 24px !important;\n    color: ",";\n    ",";\n  }\n  & p {\n    margin: 0;\n    color: rgba(0, 0, 0, 0.8);\n    font-size: 15px;\n    margin-top: 8px;\n    color: ",";\n  }\n  .--rtl & {\n    margin-right: 16px;\n    margin-left: 0px;\n  }\n"]);return jk=function(){return e},e}function kk(){var e=Object(i.a)(["\n  color: ",";\n"]);return kk=function(){return e},e}function wk(){var e=Object(i.a)(["\n  margin-bottom: 16px;\n  > img {\n    max-width: 100%;\n  }\n"]);return wk=function(){return e},e}function Ck(){var e=Object(i.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr 1fr;\n  padding: 16px;\n"]);return Ck=function(){return e},e}function Ik(){var e=Object(i.a)(["\n  width: 100%;\n  margin-bottom: 16px;\n  > button {\n    width: 100%;\n  }\n"]);return Ik=function(){return e},e}function Tk(){var e=Object(i.a)(["\n  list-style: none;\n  > li {\n    display: flex;\n    padding: 10px;\n    margin-bottom: 10px;\n    background: ",";\n    border-radius: 3px;\n    color: ",";\n    > span:last-child {\n      margin-left: auto;\n    }\n  }\n"]);return Tk=function(){return e},e}var Fk=_n.ul(Tk(),(function(e){return e.theme.colors.darkest}),(function(e){return e.theme.colors.light})),Sk=_n.div(Ik()),Pk=_n.div(Ck()),Mk=_n.div(wk()),_k=_n(Ln.Text)(kk(),(function(e){return e.theme.colors.mediumdark})),Lk=_n.div(jk(),Object(it.a)(),(function(e){return e.theme.colors.mediumdark}),w.a.lessThan("medium")(Ok()),(function(e){return e.theme.colors.mediumdark})),Uk=_n(Ln.Flex)(yk(),w.a.lessThan("medium")(Ek())),Ak=function(e){var n=e.actor,t=e.createdAt,r=e.link,a=e.name,i=e.collectionName,o=(e.tags,e.icon),l=e.resourceQuantity,c=e.history,m=x.useState(!1),s=Object(u.a)(m,2),d=s[0],f=s[1];return x.createElement(Go,null,x.createElement(nl,null,x.createElement(Ln.Heading,{m:2},a),x.createElement(Fd,{actor:null!==n&&void 0!==n?n:void 0,createdAt:null!==t&&void 0!==t?t:"",event:"Created a resource",communityLink:r,communityName:i})),x.createElement(Uk,null,x.createElement(Lk,null,x.createElement(_k,{fontWeight:"bold"}))),x.createElement(Pk,null,x.createElement(Ln.Box,null,o&&""!==o&&x.createElement(Mk,null,x.createElement("img",{src:o,alt:a})),x.createElement(Sk,null,x.createElement(ct,{variant:"outline"},x.createElement(nt.Trans,{id:"Follow"}))),x.createElement(Sk,null,x.createElement(ct,{variant:"outline"},x.createElement(nt.Trans,{id:"Comment"}))),x.createElement(Sk,null,x.createElement(ct,{variant:"outline"},x.createElement(nt.Trans,{id:"Remaining"})," ",l)),x.createElement(Sk,null,x.createElement(ct,{style:{background:d?Fn.colors.darkest:"transparent",color:d?Fn.colors.light:Fn.colors.dark},variant:"outline",onClick:function(){f(!d)}},x.createElement("span",{style:{height:"24px",display:"inline-block",marginTop:"-12px",marginRight:6,verticalAlign:"middle"}},x.createElement(nt.Trans,{id:"History"}),x.createElement("span",{style:{marginLeft:6}}),c&&c.length),x.createElement(hk.a,{style:{display:"inline-block"}}))),x.createElement(Sk,null,d&&x.createElement(Fk,null,c&&c.map((function(e,n){return x.createElement("li",{key:n},x.createElement("span",null,e.action),e.date&&x.createElement("span",null,Object(xk.a)(new Date(e.date),"dd MMM yyyy")))}))))),x.createElement(Ln.Box,null,x.createElement(Jj,null,x.createElement(gk,null)))))};function Rk(){var e=Object(i.a)(["\n    query intentItem($intentId: ID) {\n  intent(id: $intentId) {\n    hasBeginning\n    hasPointInTime\n    name\n    note\n    image\n    tags {\n      ... on Taggable {\n        name\n      }\n    }\n    resourceQuantity {\n      hasUnit {\n        label\n      }\n      hasNumericalValue\n    }\n    resourceInventoriedAs {\n      id\n      trace {\n        hasPointInTime\n        action {\n          label\n        }\n      }\n    }\n    provider {\n      name\n      image\n      id\n    }\n  }\n}\n    "]);return Rk=function(){return e},e}var Bk=R()(Rk());var Nk=function(e){var n,t,r,a,i,o,l,c,u,m,s,d,f,v=e.intentId,p=e.communityName,b=Nj(),g=null===(n=(f={variables:{intentId:v}},V.d(Bk,f)).data)||void 0===n?void 0:n.intent,h=(null===(t=b.data)||void 0===t?void 0:t.actions)||[];if(!g)return null;var E=g.provider,y={icon:E&&"image"in E&&E.image||"",name:null!==(r=null===E||void 0===E?void 0:E.name)&&void 0!==r?r:"",link:null!==(a=null===E||void 0===E?void 0:E.id)&&void 0!==a?a:""},O=null!==(i=null===g||void 0===g?void 0:g.tags)&&void 0!==i?i:[],j=null!==(o=null===(l=g.resourceQuantity)||void 0===l?void 0:l.hasNumericalValue)&&void 0!==o?o:0,k=null!==(c=null===(u=g.resourceInventoriedAs)||void 0===u||null===(m=u.trace)||void 0===m?void 0:m.map((function(e){var n;return{action:e.action.label,date:null!==(n=e.hasPointInTime)&&void 0!==n?n:null}})))&&void 0!==c?c:[],w={actor:y,actionList:h,collectionName:p,link:v,createdAt:null!==(s=null===g||void 0===g?void 0:g.hasPointInTime)&&void 0!==s?s:null,name:null!==(d=null===g||void 0===g?void 0:g.name)&&void 0!==d?d:"",tags:O.map((function(e){var n;return null!==(n=e.name)&&void 0!==n?n:""})),icon:null===g||void 0===g?void 0:g.image,resourceQuantity:j,history:k,like:null,isFlagged:!1,isOpenDropdown:!1,toggleDropdown:function(){},toggleFlag:null,collectionLink:p};return x.createElement(Ak,w)};function zk(){var e=Object(i.a)(["\n    query economicResourcesFiltered($agent: [ID]) {\n  economicResourcesFiltered(agent: $agent) {\n    id\n    name\n    note\n    image\n  }\n}\n    "]);return zk=function(){return e},e}var Dk=R()(zk());function $k(e){return V.d(Dk,e)}var qk;!function(e){e[e.Activities=0]="Activities",e[e.Intents=1]="Intents",e[e.Inventory=2]="Inventory",e[e.Discussions=3]="Discussions",e[e.Members=4]="Members"}(qk||(qk={}));var Vk={id:"Community {name} - Intents"},Qk={id:"Community {name} - Activities"},Wk={id:"Community {name} - Discussions"},Hk={id:"Community {name} - Members"},Jk={id:"Community {name} - Inventory"},Kk=function(e){var n,t=e.communityId,r=e.basePath,a=e.tab,i=Pc(t),o=i.community,l=i.createThread,c=Object(x.useState)(null),m=Object(u.a)(c,2),d=m[0],f=m[1],v=a===qk.Members?Hk:a===qk.Activities?Qk:a===qk.Discussions?Wk:a===qk.Inventory?Jk:(qk.Intents,Vk);vi(!!(null===o||void 0===o?void 0:o.name)&&v,o);var p=_c(t).communityFollowersPage,b=Mc(t).threadsPage,g=Object(u.a)(b.formiks,1)[0],h=vc(t).collectionsPage,y=Object(u.a)(h.formiks,1)[0],O=uc(t).activitiesPage,j=Object(u.a)(O.formiks,1)[0],k=mj(t).communityIntents,w=function(e){var n=$k({variables:{agent:[e]}}).data,t=(null===n||void 0===n?void 0:n.economicResourcesFiltered)||[];return Object(x.useMemo)((function(){return{communityInventory:t}}),[t])}("01F494QA0T31JTQGJ80QFHTFM0").communityInventory,C=!!(null===o||void 0===o?void 0:o.myFollow),I=function(e){return!C&&(Object(s.c)(e,{type:"warning"}),!0)},T=Object(Pn.h)(),F=Object(qt.a)({initialValues:{text:""},onSubmit:function(e){var n=e.text;return I(ya._("You should join this community to create a new trhead"))?void 0:l(n).then((function(e){T.push("/thread/".concat(e))}))}}),S=O.edges.map((function(e){return E.a.createElement(XO,{activityId:e.id,key:e.id})})),P=b.edges.map((function(e){var n;return(null===(n=e.comments)||void 0===n?void 0:n.edges[0])?E.a.createElement(Ln.Box,{key:e.id},E.a.createElement(WO,{threadId:e.id})):(console.warn("Found a thread [id:".concat(e.id,"] with an empty comments edges .. skipping"),e),null)})).filter((function(e){return!!e})),M=p.edges.map((function(e){var n;return e.creator&&E.a.createElement(Vb,{key:e.id,userId:null===(n=e.creator)||void 0===n?void 0:n.userId})})).filter((function(e){return!!e})),_=E.a.createElement(Rm,{communityId:t,basePath:r}),L=k.map((function(e,n){var r,a,i;return e&&E.a.createElement(Aj,{key:n,name:null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"",intentId:e.id,note:null!==(a=null===e||void 0===e?void 0:e.note)&&void 0!==a?a:"",communityName:null!==(i=null===o||void 0===o?void 0:o.name)&&void 0!==i?i:"",communityLink:"/communities/".concat(t),onOpen:f})})).filter((function(e){return!!e})),U=w.map((function(e,n){var t,r,a;return e&&E.a.createElement(Aj,{key:n,name:null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"",intentId:e.id,note:null!==(r=null===e||void 0===e?void 0:e.note)&&void 0!==r?r:"",communityName:null!==(a=null===o||void 0===o?void 0:o.name)&&void 0!==a?a:"",communityLink:"/inventory/".concat(e.id),onOpen:function(){return T.push("/inventory/".concat(e.id))}})})).filter((function(e){return!!e})),A=oC(),R=Object(x.useReducer)((function(e){return!I(ya._("You should join this community to create new collections"))&&!A()&&!e}),!1),B=Object(u.a)(R,2),N=B[0],z=B[1],D=N?E.a.createElement(al,{closeModal:z},E.a.createElement(mu,{done:z,communityId:t})):null,$=d?E.a.createElement(al,{closeModal:function(){f(null)}},E.a.createElement(Nk,{communityName:null!==(n=null===o||void 0===o?void 0:o.name)&&void 0!==n?n:"",intentId:d})):null,q=Object(x.useMemo)((function(){if(!o)return null;var e={discussions:Gk.getPath({communityId:t,tab:"discussions"},void 0),members:Gk.getPath({communityId:t,tab:"members"},void 0),timeline:Gk.getPath({communityId:t,tab:"timeline"},void 0),inventory:Gk.getPath({communityId:t,tab:"inventory"},void 0),intents:Gk.getPath({communityId:t,tab:void 0},void 0)};return{Members:M,Intents:L,Inventory:U,Activities:S,HeroCommunity:_,Threads:P,tabPaths:e,isJoined:C,newThreadFormik:C?F:null,loadMoreActivities:j,loadMoreCollections:y,loadMoreThreads:g,createCollection:z}}),[o,t,M,L,U,S,_,P,C,F,j,y,g]);return q&&E.a.createElement(E.a.Fragment,null,D,$,E.a.createElement(ij,q))},Zk={exact:!0,path:"/communities/:communityId/:tab(inventory|timeline|members|discussions|intents)?",component:function(e){var n=e.match,t=n.params.communityId,r=n.params.tab,a="timeline"===r?qk.Activities:"inventory"===r?qk.Inventory:"members"===r?qk.Members:"discussions"===r?qk.Discussions:r?null:qk.Intents,i=Object(x.useMemo)((function(){return null===a?null:{communityId:t,tab:a,basePath:"/communities/".concat(t)}}),[a,t]);return null===i?E.a.createElement(Vg,null):E.a.createElement(ly,null,E.a.createElement(Kk,i))}},Gk=Rx(Zk);function Yk(){var e=Object(i.a)(["\n  margin-top: 9px;\n  cursor: pointer;\n"]);return Yk=function(){return e},e}function Xk(){var e=Object(i.a)(["\n  border-bottom: ",";\n  height: 50px;\n  background: ",";\n"]);return Xk=function(){return e},e}function ew(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: auto auto 1fr auto;\n  column-gap: 8px;\n"]);return ew=function(){return e},e}function nw(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return nw=function(){return e},e}function tw(){var e=Object(i.a)(["\n  height: 30px;\n  line-height: 30px;\n  text-decoration: none;\n  padding: 0 8px;\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n  margin-top: 10px;\n  &:hover {\n    background: ",";\n  }\n  a {\n    text-decoration: none;\n  }\n  div {\n    text-decoration: none;\n    color: ",";\n  }\n"]);return tw=function(){return e},e}function rw(){var e=Object(i.a)(["\n  cursor: pointer;\n  display: flex;\n  flex: 0 0 120px;\n  order: 2;\n  justify-content: center;\n  align-items: center;\n  img {\n    min-width: 36px;\n    height: 36px;\n    border-radius: 36px;\n  }\n"]);return rw=function(){return e},e}function aw(){var e=Object(i.a)(["\n  cursor: pointer;\n  display: flex;\n  flex: 0 0 200px;\n  order: 2;\n  justify-content: flex-end;\n  align-items: center;\n  img {\n    min-width: 36px;\n    height: 36px;\n    border-radius: 36px;\n  }\n"]);return aw=function(){return e},e}function iw(){var e=Object(i.a)(["\n    img {\n        margin-right: 0;\n    }\n  "]);return iw=function(){return e},e}function ow(){var e=Object(i.a)(["\n  border-radius: 0px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  &:hover {\n    background: ",";\n  }\n  ",";\n"]);return ow=function(){return e},e}function lw(){var e=Object(i.a)(["\n  ",";\n  color: ",";\n"]);return lw=function(){return e},e}function cw(){var e=Object(i.a)(["\n  color: ",";\n"]);return cw=function(){return e},e}function uw(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]);return uw=function(){return e},e}function mw(){var e=Object(i.a)(["\n  display: flex;\n  margin-top: 7px;\n  input {\n    width: 100%;\n    border-radius: 4px;\n    max-width: 500px;\n    height: 36px;\n    margin: 0;\n    border: 0;\n    background: ",";\n  }\n"]);return mw=function(){return e},e}function sw(){var e=Object(i.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  grid-template-columns: 1fr 120px 200px;\n"]);return sw=function(){return e},e}var dw=function(e){var n=Object(Pn.h)(),t=E.a.useContext(Oa).i18n,r=Object(Pn.i)(),a=Object(Pn.j)(),i=Gk.is(r.pathname),o=Object(x.useState)(!1),l=Object(u.a)(o,2),c=l[0],m=l[1];return E.a.createElement(kw,null,E.a.createElement(fw,null,E.a.createElement(jw,null,E.a.createElement(Ow,{onClick:function(){return n.goBack()}},E.a.createElement(wl.a,{size:"20"})),E.a.createElement(ww,{to:e.user?"/":"/discover"},E.a.createElement(Pl,{size:"s",src:we})),E.a.createElement(vw,null,e.Search),i&&E.a.createElement(pw,{to:"/communities/".concat(a.communityId,"/map/"),title:"Map"},E.a.createElement(Cl.a,{size:"20"}))),E.a.createElement(Ew,null,e.user&&E.a.createElement(hw,{sx:{position:"relative"},alignItems:"center",onClick:m},E.a.createElement(gw,{ml:2,variant:"link"},"Create"),E.a.createElement(bw,null,E.a.createElement(Il.default,{size:"20"})),c&&E.a.createElement(rc,{createCommunity:e.createCommunity,createResource:e.createResource,createIntent:e.createIntent,toggleDropdown:function(){m(!c)}}))),E.a.createElement(xw,{alignItems:"center"},e.user?E.a.createElement(hw,{sx:{position:"relative"},alignItems:"center",onClick:e.toggleDropdown},E.a.createElement(Pl,{size:"s",initials:e.user.name.substring(0,2),src:e.user.icon,variant:"avatar"}),E.a.createElement(gw,{ml:2,variant:"link"},e.user.name),E.a.createElement(bw,{ml:2},E.a.createElement(Il.default,{size:"20"})),e.isOpenDropdown&&E.a.createElement(tc,{isAdmin:e.user.isAdmin,logout:e.user.logout,userLink:e.user.link,toggleDropdown:e.toggleDropdown})):E.a.createElement(Ln.Box,null,E.a.createElement(yw,null,E.a.createElement(Kt.b,{to:"/"},E.a.createElement(Ln.Text,{variant:"link"},t._("Sign in"))))))))},fw=_n(Ln.Box)(sw()),vw=_n(Ln.Box)(mw(),(function(e){return e.theme.colors.app})),pw=_n(Kt.b)(uw()),bw=_n(Ln.Box)(cw(),(function(e){return e.theme.colors.medium})),gw=_n(Ln.Text)(lw(),Object(it.c)("180px"),(function(e){return e.theme.colors.darker})),hw=_n(Ln.Flex)(ow(),(function(e){return e.theme.colors.lighter}),w.a.lessThan("1280px")(iw())),xw=_n(Ln.Box)(aw()),Ew=_n(Ln.Box)(rw()),yw=_n(hw)(tw(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return Object(it.b)("0.1",e.theme.colors.primary)}),(function(e){return e.theme.colors.lighter})),Ow=_n(Ln.Box)(nw(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),jw=_n(Ln.Box)(ew()),kw=_n(Ln.Box)(Xk(),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.appInverse})),ww=_n(Kt.b)(Yk()),Cw=t(109);function Iw(){var e=Object(i.a)(["\n    mutation createEconomicEventAndExistResource($id: ID!, $note: String, $action: ID!, $provider: ID!, $receiver: ID!, $hasUnit: ID!, $hasNumericalValue: Float!, $atLocation: ID, $name: String, $eventNote: String, $image: URI) {\n  createEconomicEvent(event: {resourceInventoriedAs: $id, note: $eventNote, action: $action, provider: $provider, receiver: $receiver, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}}, newInventoriedResource: {name: $name, note: $note, image: $image, currentLocation: $atLocation}) {\n    economicEvent {\n      id\n      action {\n        id\n      }\n    }\n    economicResource {\n      id\n    }\n  }\n}\n    "]);return Iw=function(){return e},e}function Tw(){var e=Object(i.a)(["\n    mutation createEconomicEventAndNewResource($note: String, $atLocation: ID, $action: ID!, $provider: ID!, $receiver: ID!, $hasUnit: ID!, $hasNumericalValue: Float!, $name: String, $image: URI) {\n  createEconomicEvent(event: {action: $action, atLocation: $atLocation, provider: $provider, receiver: $receiver, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}}, newInventoriedResource: {note: $note, name: $name, image: $image, currentLocation: $atLocation}) {\n    economicEvent {\n      id\n      note\n      receiver {\n        id\n        name\n        note\n      }\n      provider {\n        id\n        name\n        note\n      }\n      resourceQuantity {\n        hasNumericalValue\n        hasUnit {\n          label\n          symbol\n        }\n      }\n      resourceInventoriedAs {\n        id\n        name\n        image\n        onhandQuantity {\n          hasNumericalValue\n          hasUnit {\n            label\n            symbol\n          }\n        }\n        accountingQuantity {\n          hasNumericalValue\n          hasUnit {\n            label\n            symbol\n          }\n        }\n      }\n    }\n  }\n}\n    "]);return Tw=function(){return e},e}var Fw=R()(Tw());var Sw=R()(Iw());var Pw,Mw=function(){var e,n=V.c(Fw,e),t=Object(u.a)(n,2),r=t[0],i=t[1],l=iC(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c,u,m,s,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,o=n.note,l=n.action,c=n.provider,u=n.receiver,m=n.hasUnit,s=n.hasNumericalValue,d=n.image,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{name:t,note:o,action:l,provider:c,receiver:u,hasUnit:m,hasNumericalValue:s,image:d}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(x.useMemo)((function(){return{create:l}}),[l])},_w=function(e){var n=e.title,t=e.formik,r=e.done,a=e.unitPages,i=e.actionList,o=e.providerList,l=e.receiverList,d=e.setAction,f=void 0===d?function(){}:d,v=E.a.useState([]),p=Object(u.a)(v,2),b=p[0],g=p[1],h=E.a.useState([]),x=Object(u.a)(h,2),y=x[0],O=x[1],j=E.a.useState([]),k=Object(u.a)(j,2),w=k[0],C=k[1],I=E.a.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{image:e}))}),[t]);E.a.useEffect((function(){if(null===a||void 0===a?void 0:a.length){var e=a.map((function(e){return{id:e.id,label:"".concat(e.label," / ").concat(e.symbol)}}));C(e)}}),[a]),E.a.useEffect((function(){g(ck(o,"name")),O(ck(l,"name"))}),[o,l]),E.a.useEffect((function(){C(ck(null===a||void 0===a?void 0:a.edges,{variables:["label","symbol"],template:"label / symbol"}))}),[a]);var T="string"===typeof t.values.image?t.values.image:"";return E.a.createElement(Go,null,E.a.createElement("form",{onSubmit:t.handleSubmit},E.a.createElement(nl,null,E.a.createElement(Ln.Heading,{m:2},E.a.createElement(nt.Trans,{id:"{title}",values:{title:n}}))),E.a.createElement(au,null,E.a.createElement(ru,null,E.a.createElement(nu,null,E.a.createElement("div",{className:"d-flex"},E.a.createElement(Ln.Box,{sx:{width:"140",height:"140"},className:"item_photo"},E.a.createElement(vo,{initialUrl:T,onFileSelect:I,filePattern:"image/*"})),E.a.createElement("div",{className:"item_info"},E.a.createElement(Ln.Box,null,E.a.createElement(fk,null,E.a.createElement(vk,null,Object(nt.i18nMark)("Resource")),E.a.createElement(nk,{type:"text",id:"name",name:"name",disabled:t.isSubmitting,onChange:t.handleChange,placeholder:Object(nt.i18nMark)("Name of your resource"),value:t.values.name}),E.a.createElement(Xo,null,60-t.values.name.length)),t.errors.name&&E.a.createElement(rk,{variant:"negative"},t.errors.name)),E.a.createElement(Ln.Box,null,E.a.createElement(fk,null,E.a.createElement(vk,null,"Actions"),E.a.createElement(lk,{onSelect:function(e,n){f(n.id),t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{action:n}))},options:i,variant:"primary",id:"actions",name:"actions",placeholder:Object(nt.i18nMark)("Select action"),value:t.values.action})),t.errors.action&&E.a.createElement(rk,{variant:"negative"},t.errors.action&&"Required"))))),E.a.createElement(nu,null,E.a.createElement("div",{className:"d-flex"},E.a.createElement("div",{className:"item_col-6"},E.a.createElement(fk,null,E.a.createElement(vk,null,"Receiver"),E.a.createElement(lk,{onSelect:function(e,n){t.setValues(Object(c.a)(Object(c.a)({},t.values),{},Object(m.a)({},e,n)))},placeholder:Object(nt.i18nMark)("Provider"),options:b,variant:"primary",value:t.values.provider,id:"provider",name:"provider"})),t.errors.provider&&E.a.createElement(rk,{variant:"negative"},t.errors.provider&&"Required")),E.a.createElement("div",{className:"item_col-6"},E.a.createElement(fk,null,E.a.createElement(vk,null,"Receiver"),E.a.createElement(lk,{onSelect:function(e,n){t.setValues(Object(c.a)(Object(c.a)({},t.values),{},Object(m.a)({},e,n)))},placeholder:Object(nt.i18nMark)("Receiver"),options:y,variant:"primary",value:t.values.receiver,id:"receiver",name:"receiver"})),t.errors.receiver&&E.a.createElement(rk,{variant:"negative"},t.errors.receiver&&"Required")))),E.a.createElement(nu,null,E.a.createElement("div",{className:"d-flex"},E.a.createElement("div",{className:"item_col-6"},E.a.createElement(fk,null,E.a.createElement(vk,null,"unit"),E.a.createElement(lk,{onSelect:function(e,n){t.setValues(Object(c.a)(Object(c.a)({},t.values),{},Object(m.a)({},e,n)))},options:w,variant:"primary",id:"hasUnit",name:"hasUnit",placeholder:Object(nt.i18nMark)("Unit"),value:t.values.hasUnit})),t.errors.hasUnit&&E.a.createElement(rk,{variant:"negative"},t.errors.hasUnit&&"Required")),E.a.createElement("div",{className:"item_col-6"},E.a.createElement(fk,null,E.a.createElement(vk,null,"numerical value"),E.a.createElement(nk,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:t.handleChange,placeholder:Object(nt.i18nMark)("Numerical Value"),value:t.values.hasNumericalValue})),t.errors.hasNumericalValue&&E.a.createElement(rk,{variant:"negative"},t.errors.hasNumericalValue)))),E.a.createElement(nu,null,E.a.createElement(fk,null,E.a.createElement(vk,null,"note"),E.a.createElement(nk,{id:"note",type:"textarea",name:"note",onChange:t.handleChange,placeholder:Object(nt.i18nMark)("Note"),value:t.values.note})),E.a.createElement(Xo,null,t.values.note?500-t.values.note.length:500),t.errors.note&&E.a.createElement(rk,{variant:"negative"},t.errors.note)))),E.a.createElement(Yo,{mb:3},E.a.createElement(ct,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},E.a.createElement(nt.Trans,{id:"Save"})),E.a.createElement(ct,{variant:"outline",onClick:r},E.a.createElement(nt.Trans,{id:"Cancel"})))),E.a.createElement(s.b,null))},Lw=(ci.object({name:ci.string().min(2).max(60).required(),summary:ci.string().max(500),icon:(Pw=ci.mixed()).test.apply(Pw,Object(C.a)(El))}),function(e){var n=e.done,t=(e.resource,Object(Cw.a)(e,["done","resource"])),r=Object(Pn.h)(),a=Mw().create,i=ci.object().shape({name:ci.string().max(60,"Too Long!").required("Required"),note:ci.string().max(500,"Too Long!"),action:ci.object().shape({id:ci.string().required("Required")}),provider:ci.object().shape({id:ci.string().required("Required")}),receiver:ci.object().shape({id:ci.string().required("Required")}),hasUnit:ci.object().shape({id:ci.string().required("Required")}),hasNumericalValue:ci.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),o=Object(qt.a)({initialValues:{name:"",note:"",image:void 0,action:{id:"",label:""},provider:{id:"",label:"",note:""},receiver:{id:"",label:"",note:""},hasUnit:{id:"",label:"",note:""},hasNumericalValue:0},validateOnChange:!1,validateOnBlur:!1,validationSchema:i,enableReinitialize:!0,onSubmit:function(e){return a({name:e.name,action:e.action.id,note:e.note,provider:e.provider.id,receiver:e.receiver.id,hasUnit:e.hasUnit.id,hasNumericalValue:e.hasNumericalValue,image:e.image}).then((function(e){if(!e.errors){var t,a;console.log(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.createEconomicEvent.economicEvent.resourceInventoriedAs);var i=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.createEconomicEvent.economicEvent.resourceInventoriedAs.id,o="/inventory/".concat(i," ");n(),r.replace(o),s.c.success("Resource was created",{position:"top-right",transition:s.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}})).catch((function(e){return console.log(e)}))}}),l=Object(c.a)(Object(c.a)({},t),{},{title:"Create a new Resource",formik:o,done:n});return E.a.createElement(Jj,null,E.a.createElement(_w,l))});function Uw(){var e=Object(i.a)(["\n    mutation createOffer($action: String!, $name: String!, $communityId: ID!, $note: String, $hasUnit: ID!, $hasNumericalValue: Float!, $atLocation: ID) {\n  createOffer(intent: {action: $action, name: $name, resourceQuantity: {hasUnit: $hasUnit, hasNumericalValue: $hasNumericalValue}, atLocation: $atLocation, inScopeOf: [$communityId], note: $note}) {\n    intent {\n      id\n      inScopeOf {\n        __typename\n      }\n      name\n      note\n      atLocation {\n        lat\n        long\n        alt\n      }\n      resourceQuantity {\n        hasUnit {\n          label\n          id\n        }\n        hasNumericalValue\n      }\n    }\n  }\n}\n    "]);return Uw=function(){return e},e}function Aw(){var e=Object(i.a)(["\n    mutation createIntent($name: String!, $action: String!, $communityId: ID!, $note: String) {\n  createIntent(intent: {action: $action, name: $name, inScopeOf: [$communityId], note: $note}) {\n    intent {\n      id\n      inScopeOf {\n        __typename\n      }\n      name\n      note\n    }\n  }\n}\n    "]);return Aw=function(){return e},e}R()(Aw());var Rw=R()(Uw());var Bw=function(){var e,n=V.c(Rw,e),t=Object(u.a)(n,2),r=t[0],i=t[1],l=iC(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c,u,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,o=n.note,l=n.communityId,c=n.atLocation,u=n.hasNumericalValue,m=n.hasUnit,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{name:t,note:o,communityId:l,action:"produced",atLocation:c,hasUnit:m,hasNumericalValue:u}}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(x.useMemo)((function(){return{create:l}}),[l])},Nw=function(e){var n=e.formik,t=e.cancel,r=e.communities,a=e.unitPages,i=e.spatialThings,o=E.a.useState([]),l=Object(u.a)(o,2),d=l[0],f=l[1];return E.a.useEffect((function(){if(null===a||void 0===a?void 0:a.length){var e=a.map((function(e){return{id:e.id,label:"".concat(e.label," / ").concat(e.symbol)}}));f(e)}}),[a]),E.a.createElement(Go,null,E.a.createElement("form",{onSubmit:n.handleSubmit},E.a.createElement(nl,null,E.a.createElement(Ln.Heading,{m:2},E.a.createElement(nt.Trans,{id:"Create an intent"}))),E.a.createElement(au,null,E.a.createElement(ru,null,E.a.createElement(nu,null,E.a.createElement(fk,null,E.a.createElement(vk,null,Object(nt.i18nMark)("Resource")),E.a.createElement(nk,{type:"text",id:"name",name:"name",disabled:n.isSubmitting,onChange:n.handleChange,hint:{class:"error",value:""},placeholder:Object(nt.i18nMark)("Name of your resource"),value:n.values.name})),E.a.createElement(Xo,null,60-n.values.name.length),n.errors.name&&E.a.createElement(Wo,null,E.a.createElement(rk,{variant:"negative"},n.errors.name))),E.a.createElement(nu,null,E.a.createElement(vk,null,Object(nt.i18nMark)("community name")),E.a.createElement(lk,{onSelect:function(e,t){n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(m.a)({},e,t.id)))},value:{id:n.values.communityId,label:""},variant:"primary",id:"communityId",name:"communityId",options:r}),n.errors.communityId&&E.a.createElement(Wo,null,E.a.createElement(rk,{variant:"negative"},n.errors.communityId))),E.a.createElement(tu,null,E.a.createElement(fk,null,E.a.createElement(vk,null,Object(nt.i18nMark)("unit")),E.a.createElement(lk,{onSelect:function(e,t){n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(m.a)({},e,t.id)))},options:d,placeholder:Object(nt.i18nMark)("unit"),value:{id:n.values.hasUnit,label:""},variant:"primary",id:"hasUnit",name:"hasUnit"}),n.errors.hasUnit&&E.a.createElement(Wo,null,E.a.createElement(rk,{variant:"negative"},n.errors.hasUnit))),E.a.createElement(fk,null,E.a.createElement(vk,null,Object(nt.i18nMark)("Numerical Value")),E.a.createElement(nk,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:n.handleChange,hint:{class:"error",value:""},placeholder:Object(nt.i18nMark)("Numerical Value"),value:n.values.hasNumericalValue.toString()}),n.errors.hasNumericalValue&&E.a.createElement(Wo,null,E.a.createElement(rk,{variant:"negative"},n.errors.hasNumericalValue)))),E.a.createElement(nu,null,E.a.createElement(vk,null,Object(nt.i18nMark)("location")),E.a.createElement(lk,{onSelect:function(e,t){n.setValues(Object(c.a)(Object(c.a)({},n.values),{},Object(m.a)({},e,t.id)))},options:null===i||void 0===i?void 0:i.map((function(e){return{id:e.id,value:e.id,label:e.name}})),placeholder:Object(nt.i18nMark)("CustomSelect location"),value:{id:n.values.atLocation||"",label:""},variant:"primary",id:"atLocation",name:"atLocation"}),n.errors.hasUnit&&E.a.createElement(Wo,null,E.a.createElement(rk,{variant:"negative"},n.errors.atLocation))),E.a.createElement(nu,null,E.a.createElement(ou,{mt:2},E.a.createElement(fk,null,E.a.createElement(vk,null,Object(nt.i18nMark)("description")),E.a.createElement(nk,{type:"textarea",id:"note",name:"note",onChange:n.handleChange,disabled:n.isSubmitting,hint:{class:"error",value:""},placeholder:Object(nt.i18nMark)("A description of your intent"),value:n.values.note})),E.a.createElement(Xo,null,n.values.note?500-n.values.note.length:500),n.errors.note&&E.a.createElement(Wo,null,E.a.createElement(rk,{variant:"negative"},n.errors.note)))))),E.a.createElement(Yo,{mb:3},E.a.createElement(ct,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"}},E.a.createElement(nt.Trans,{id:"Save"})),E.a.createElement(ct,{variant:"outline",onClick:t},E.a.createElement(nt.Trans,{id:"Cancel"})))),E.a.createElement(s.b,null))},zw=function(e){var n,t,r=e.done,a=Object(Pn.h)(),i=Object(Pn.i)(),o=Bw().create,l=Qg().myCommunityFollowsPage,c=Object(x.useMemo)((function(){return l.edges.map((function(e){return e.context})).filter((function(e){return"Community"===e.__typename})).map((function(e){return{id:e.id,label:e.name}}))}),[l]),u=null===(n=Hj().data)||void 0===n?void 0:n.unitsPages,m=null===(t=Vj().data)||void 0===t?void 0:t.spatialThingsPages,d=ci.object().shape({name:ci.string().max(60,"Too Long!").required("Required"),note:ci.string().max(500,"Too Long!"),communityId:ci.string().required("Required"),hasUnit:ci.string().required("Required"),hasNumericalValue:ci.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),f={communities:c,formik:Object(qt.a)({initialValues:{name:"",communityId:"",note:"",atLocation:"",hasUnit:"",hasNumericalValue:0},validateOnChange:!1,validateOnBlur:!1,validationSchema:d,enableReinitialize:!0,onSubmit:function(e){return o({name:e.name,communityId:e.communityId,note:e.note,atLocation:e.atLocation,hasUnit:e.hasUnit,hasNumericalValue:e.hasNumericalValue}).then((function(n){var t,r,o="/communities/".concat(e.communityId,"/intents");o===i.pathname?window.location.reload():(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(r=t.createIntent)||void 0===r?void 0:r.intent)&&a.replace(o);!n.errors&&s.c.success("Intent was created",{position:"top-right",transition:s.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})})).catch((function(e){return console.log(e)}))}}),unitPages:null===u||void 0===u?void 0:u.edges,spatialThings:(null===m||void 0===m?void 0:m.edges)||null,cancel:r};return x.createElement(Nw,f)},Dw=function(){var e,n=sa(),t=null===(e=n.me)||void 0===e?void 0:e.user,r=oC(),a=Object(x.useReducer)((function(e){return!r()&&!e}),!1),i=Object(u.a)(a,2),o=i[0],l=i[1],c=Object(x.useReducer)((function(e){return!r()&&!e}),!1),m=Object(u.a)(c,2),s=m[0],d=m[1],f=Object(x.useReducer)((function(e){return!r()&&!e}),!1),v=Object(u.a)(f,2),p=v[0],b=v[1],g=o?E.a.createElement(al,{closeModal:l},E.a.createElement(Ol,{done:l})):null,h=s?E.a.createElement(al,{closeModal:d},E.a.createElement(zw,{done:d})):null,y=p?E.a.createElement(al,{closeModal:b},E.a.createElement(Lw,{done:b})):null,O=Object(x.useContext)(hi).toggleOpen,j=Object(x.useReducer)((function(e){return!e}),!1),k=Object(u.a)(j,2),w=k[0],C=k[1],I=Object(x.useMemo)((function(){var e;return{Search:E.a.createElement(kl,{key:"search"}),user:t?{isAdmin:n.isAdmin,logout:n.logout,icon:(null===(e=t.icon)||void 0===e?void 0:e.url)||"",link:"/user/".concat(t.id),name:t.name||""}:null,toggleSideBar:O,createCommunity:l,createIntent:d,createResource:b,isOpenDropdown:w,toggleDropdown:C}}),[t,n.isAdmin,n.logout,O,w]);return E.a.createElement(E.a.Fragment,null,g,h,y,E.a.createElement(dw,I))};function $w(){var e=Object(i.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  height: calc(100vh - 66px);\n  display: grid;\n  grid-template-rows: auto;\n  grid-template-columns: 1fr;\n  column-gap: 8px;\n"]);return $w=function(){return e},e}function qw(){var e=Object(i.a)(["\n  height: 100vh;\n  grid-template-rows: 50px auto;\n  row-gap: 8px;\n  display: grid;\n"]);return qw=function(){return e},e}function Vw(){var e=Object(i.a)(["\n    display: none;\n  "]);return Vw=function(){return e},e}function Qw(){var e=Object(i.a)(["\na {\n  height: 40px;\n  line-height: 40px;\n  padding: 0 8px;\n  border-radius: 4px;\n  text-decoration: none;\n  background: ",";\n  color: ",";\n  margin-right: 8px;\n}\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 8px;\n  margin-left: 8px;\n  flex:1;\n}\n","\n"]);return Qw=function(){return e},e}function Ww(){var e=Object(i.a)(["\n    display: none;\n  "]);return Ww=function(){return e},e}function Hw(){var e=Object(i.a)(["\n  ","\n"]);return Hw=function(){return e},e}function Jw(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return Jw=function(){return e},e}var Kw=function(e){var n=e.children,t=e.HeaderBox,r=e.SearchBox,a=Object(Pn.h)();return E.a.createElement(Xw,null,E.a.createElement(Yw,null,E.a.createElement(Zw,{onClick:function(){return a.goBack()}},E.a.createElement(wl.a,{size:"20"})),r,E.a.createElement(Kt.b,{to:"/login"},"Log in")),E.a.createElement(Gw,null,t),E.a.createElement(eC,null,n))},Zw=_n(Ln.Box)(Jw(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),Gw=_n(Ln.Box)(Hw(),w.a.lessThan("medium")(Ww())),Yw=_n(Ln.Box)(Qw(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),w.a.greaterThan("medium")(Vw())),Xw=_n(Ln.Box)(qw()),eC=_n(Ln.Box)($w()),nC=function(e){var n=e.children,t=e.withoutHeader,r={HeaderBox:void 0!==t&&t?void 0:E.a.createElement(Dw,null),SearchBox:E.a.createElement(kl,null)};return E.a.createElement(xi,null,E.a.createElement(Kw,r,n))},tC={exact:!0,path:"/login",component:function(e){e.match;return E.a.createElement(Hx,null,E.a.createElement(nC,{withoutHeader:!0},E.a.createElement(gi,null)))}},rC=Rx(tC),aC={content:function(){return E.a.createElement(nt.Trans,{id:"You need to <0>login</0> for that",components:[E.a.createElement(Kt.b,{to:rC.getPath(void 0,void 0)})]})},opts:{type:"warning"}};function iC(e,n,t){var r=Object(x.useCallback)(e,n),i=oC(t);return Object(x.useCallback)(Object(o.a)(a.a.mark((function e(){var n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i()?null:r.apply(void 0,n));case 1:case"end":return e.stop()}}),e)}))),[r,i])}var oC=function(e){var n,t=sa().me,r=!!(null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id);return Object(x.useCallback)((function(){var n=Object(c.a)(Object(c.a)({},aC),e),t=n.content,a=n.opts;return!r&&Object(s.c)(t,a),!r}),[r,e])},lC=function(e){var n,t=V.c(Wr,n),r=Object(u.a)(t,2),i=r[0],l=r[1],c=function(e){return V.c(Hr,e)}(),m=Object(u.a)(c,2),s=m[0],d=m[1],f=l.loading||d.loading,v=iC(Object(o.a)(a.a.mark((function n(){var t,r,o,l,c,u,m,d;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=(t=e||{}).id,o=t.followerCount,l=t.myFollow,c=t.__typename,u=t.name,r&&!f){n.next=3;break}return n.abrupt("return");case 3:if(l){n.next=8;break}return m=g({ctx:"Collection"===c?"Following Collection ".concat(u):"User"===c?"Following User ".concat(u):"Community"===c?"Joined Community ".concat(u):void 0}),n.abrupt("return",i({variables:{contextId:r},context:m,optimisticResponse:cC(c,r,o||0),refetchQueries:"Community"===c?[$r({limit:10}),ia({communityId:r})]:"Collection"===c?[Ur({limit:10}),ea({collectionId:r})]:[]}));case 8:return d=g({ctx:"Collection"===c?"Unfollowing Collection ".concat(u):"User"===c?"Unfollowing User ".concat(u):"Community"===c?"Leaving Community ".concat(u):void 0}),n.abrupt("return",qr(l.id)?void 0:s({variables:{contextId:l.id},context:d,optimisticResponse:uC(c,r,o||1),refetchQueries:"Community"===c?[$r({}),ia({communityId:r})]:"Collection"===c?[Ur({}),ea({collectionId:r})]:[]}));case 10:case"end":return n.stop()}}),n)}))),[e,f]);return Object(x.useMemo)((function(){return{toggleFollow:v}}),[v])},cC=function(e,n,t){return{__typename:"RootMutationType",createFollow:{__typename:"Follow",context:{__typename:e,id:n,myFollow:{__typename:"Follow",id:"#"},followerCount:t+1}}}},uC=function(e,n,t){return{__typename:"RootMutationType",delete:{__typename:"Follow",context:{__typename:e,id:n,myFollow:null,followerCount:t-1}}}};function mC(){var e=Object(i.a)(["\n    query collectionPreview($collectionId: String!) {\n  collection(collectionId: $collectionId) {\n    id\n    ...CollectionPreview\n  }\n}\n    ",""]);return mC=function(){return e},e}var sC=R()(mC(),Rt);var dC=function(e){var n,t,r=(t={variables:{collectionId:e}},V.d(sC,t)),a=lC(null===(n=r.data)||void 0===n?void 0:n.collection).toggleFollow;return Object(x.useMemo)((function(){var e;return{collection:null===(e=r.data)||void 0===e?void 0:e.collection,toggleFollow:a}}),[r,a])},fC=function(e){var n=e.collectionId,t=e.flagged,r=dC(n),a=r.collection,i=r.toggleFollow,o=Object(qt.a)({initialValues:{},onSubmit:i}),l=Object(x.useMemo)((function(){return a?vC({collection:a,toggleFollowFormik:o,hideActions:!!t}):null}),[a,o,t]);return l&&E.a.createElement(br,l)},vC=function(e){var n=e.collection,t=e.hideActions,r=e.toggleFollowFormik,a=n.id,i=n.icon,o=n.isLocal,l=n.canonicalUrl,c=n.name,u=n.summary,m=n.resourceCount,s=n.displayUsername,d=n.myFollow;return{displayUsername:s,icon:(null===i||void 0===i?void 0:i.url)||"",isFollowing:!!d,link:{url:o?"/collections/".concat(a):l||"",external:!o},name:c,summary:u||"",totalResources:m||null,toggleFollowFormik:r,hideActions:t}},pC={id:"All Collections"},bC=function(){vi(pC);var e=Jt().allCollectionsPage,n=Object(qt.a)({initialValues:{},onSubmit:function(){return e.ready?e.next():void 0}}),t=Object(x.useMemo)((function(){return{CollectionsBoxes:E.a.createElement(E.a.Fragment,null,e.edges.map((function(e){return E.a.createElement(fC,{collectionId:e.id})}))),LoadMoreFormik:n}}),[e,n]);return E.a.createElement(Pt,t)},gC={exact:!0,path:"/collections",component:function(){return E.a.createElement(ly,null,E.a.createElement(bC,null))}},hC=function(e){var n=e.CommunitiesBoxes,t=e.LoadMoreFormik;return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,x.createElement(Bn,{name:"All Communities"}),x.createElement(Tt,null,n),x.createElement(mt,{LoadMoreFormik:t})))),x.createElement(Yh,null))},xC={id:"All Communities"},EC=function(){vi(xC);var e=Mx().allCommunitiesPage,n=Object(qt.a)({initialValues:{},onSubmit:function(){return e.ready?e.next():void 0}}),t=Object(x.useMemo)((function(){return{CommunitiesBoxes:E.a.createElement(Sb.a,{m:2},e.edges.map((function(e){return E.a.createElement(jv,{communityId:e.id})}))),LoadMoreFormik:n}}),[e,n]);return E.a.createElement(hC,t)},yC={exact:!0,path:"/communities",component:function(){return E.a.createElement(ly,null,E.a.createElement(EC,null))}};function OC(){var e=Object(i.a)(["\n  background: #fff;\n  border-radius: 4px;\n  height: inherit;\n  padding: 30px 20px;\n  text-align: center;\n  height: fit-content;\n"]);return OC=function(){return e},e}function jC(){var e=Object(i.a)(["\n  text-align: center;\n  margin-top: 10px;\n"]);return jC=function(){return e},e}function kC(){var e=Object(i.a)(["\n  margin-bottom: 100px;\n  width: 432px;\n"]);return kC=function(){return e},e}function wC(){var e=Object(i.a)(["\n  margin: 0 auto;\n  width: 100%;\n  max-width: 900px;\n  margin-top: 60px;\n  padding: 16px;\n  padding-bottom: 50px;\n \n  }\n"]);return wC=function(){return e},e}function CC(){var e=Object(i.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr;\n  grid-template-areas: 'form' 'footer';\n"]);return CC=function(){return e},e}var IC=_n.div(CC()),TC=_n.div(wC()),FC=_n(Ln.Box)(kC()),SC=function(e){var n=e.result;return x.createElement(x.Fragment,null,x.createElement(TC,null,x.createElement(IC,null,x.createElement(FC,null,x.createElement(Fa,null),x.createElement(MC,null,x.createElement(Ln.Box,null,n?null===n.error?x.createElement(x.Fragment,null,x.createElement(Ln.Text,{variant:"text"},"Email confirmed"),x.createElement(Ln.Text,{variant:"text",sx:{fontWeight:"bold",marginTop:"5px"}},"Welcome ",n.username,"!")):x.createElement(Ln.Text,{variant:"text"},"Error in email confirmation: ",n.error):x.createElement(Ln.Text,{variant:"text"},"Checking ...")),x.createElement(PC,null,x.createElement(Kt.b,{to:"/"},x.createElement(ct,{mt:3,variant:"primary"},x.createElement(nt.Trans,{id:"Sign in"})))))))))},PC=_n(Ln.Box)(jC()),MC=_n.div(OC()),_C={id:"Confirm your email"},LC=function(e){var n,t,r=e.token;vi(_C);var a=Object(Pn.h)().push,i=ui(),o=i.confirmEmail,l=i.confirmEmailStatus,c=null===(n=l.data)||void 0===n||null===(t=n.confirmEmail)||void 0===t?void 0:t.me.user.name;Object(x.useEffect)((function(){c&&setTimeout((function(){return a("/")}),2e3)}),[c,a]),Object(x.useEffect)((function(){o(r)}),[r,o]);var u=Object(x.useMemo)((function(){return l.loading?{result:null}:l.error?{result:{error:l.error.message}}:c?{result:{error:null,username:c}}:{result:{error:"No Data Received"}}}),[l,c]);return E.a.createElement(SC,u)},UC={exact:!0,path:"/confirm-email/:token",component:function(e){var n=e.match;return E.a.createElement(Wx,{to:"/#welcome"},E.a.createElement(nC,null,E.a.createElement(LC,{token:n.params.token})))}};function AC(){var e=Object(i.a)(["\n  width: 10px;\n  height: 10px;\n"]);return AC=function(){return e},e}function RC(){var e=Object(i.a)(["\n  grid-area: form;\n"]);return RC=function(){return e},e}function BC(){var e=Object(i.a)(["\n  margin: 0 auto;\n  width: 432px;\n  margin-top: 60px;\n  padding: 16px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return BC=function(){return e},e}function NC(){var e=Object(i.a)(["\n  display: grid;\n  grid-column-gap: 16px;\n  grid-template-columns: 1fr;\n  grid-template-areas: 'form';\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return NC=function(){return e},e}var zC={placeholders:{password:Object(nt.i18nMark)("Enter your new password"),passwordConfirm:Object(nt.i18nMark)("Confirm your new password")}},DC=function(e){var n=e.formik;return x.createElement(x.Fragment,null,x.createElement(qC,null,x.createElement($C,null,x.createElement(VC,null,x.createElement(Fa,null),x.createElement(da.b,{placeholder:zC.placeholders.password,name:"password",type:"password",value:n.values.password,onChange:n.handleChange}),n.errors.password&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.password)),x.createElement(QC,null),x.createElement(da.b,{placeholder:zC.placeholders.passwordConfirm,name:"passwordConfirm",type:"password",value:n.values.passwordConfirm,onChange:n.handleChange}),n.errors.passwordConfirm&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.passwordConfirm)),x.createElement(ct,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",onClick:n.submitForm},x.createElement(nt.Trans,{id:"Save the new password"}))))))},$C=_n.div(NC()),qC=_n.div(BC()),VC=_n.div(RC()),QC=_n.div(AC()),WC=ci.object().shape({password:ci.string().min(6).max(50).required("Password is required"),passwordConfirm:ci.string().oneOf([ci.ref("password"),null],"Passwords must match").required("Password confirm is required")}),HC={password:"",passwordConfirm:""},JC={id:"reate new Password"},KC=function(e){var n=e.token;vi(JC);var t=ui().resetPwd,r=Object(qt.a)({onSubmit:function(e){var r=e.password;return t({password:r,token:n})},initialValues:HC,validationSchema:WC}),a=Object(x.useMemo)((function(){return{formik:r}}),[r]);return E.a.createElement(DC,a)},ZC={exact:!0,path:"/reset/:token",component:function(e){var n=e.match.params.token,t=Object(x.useMemo)((function(){return{token:n}}),[n]);return E.a.createElement(Hx,null,E.a.createElement(nC,{withoutHeader:!0},E.a.createElement(KC,t)))}};function GC(){var e=Object(i.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n  border-radius: 4px;\n  border: 1px solid #eee;\n  padding: 10px;\n  width: 100%;\n\n  .d-flex {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .wrapper_info {\n    margin-left: 20px;\n  }\n\n  .intent {\n    padding: 10px 0;\n    &:not(:last-child) {\n      border-bottom: 1px solid #eee;\n    }\n  }\n"]);return GC=function(){return e},e}var YC=t(341).default,XC=t(342).default,eI=function(e){var n,t=e.data,r=x.useState(!1),a=Object(u.a)(r,2),i=a[0],o=a[1];return x.createElement(nI,null,x.createElement(Ln.Box,{mb:2,style:{display:"flex"}},x.createElement(Pl,{size:"default",src:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"https://api.reflowproject.eu/api/explore",REACT_APP_SENTRY_API_KEY:"https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849"}).REACT_APP_UPLOADS,"/").concat(null===t||void 0===t?void 0:t.image)}),x.createElement("div",{className:"wrapper_info"},x.createElement("b",null,x.createElement(nt.Trans,{id:"Primary Accountable:"})),x.createElement(OI,{variant:"heading"},x.createElement(nt.Trans,{id:"{0}",values:{0:null===t||void 0===t?void 0:t.name}})),x.createElement(nt.Trans,{id:"<0><1>Relationships As Object: </1>{0}</0>",values:{0:(null===t||void 0===t?void 0:t.relationshipsAsObject)+""},components:[x.createElement(Ln.Text,{variant:"text"}),x.createElement("b",null)]}))),x.createElement(ct,{mr:2,onClick:function(){return o(!i)},variant:"show-more"},i?x.createElement(x.Fragment,null,x.createElement(XC,{size:"16"}),x.createElement(nt.Trans,{id:"Hide intents"})):x.createElement(x.Fragment,null,x.createElement(YC,{size:"16"}),x.createElement(nt.Trans,{id:"Show intents"}))),i?x.createElement("div",{className:i?"show":"hide"},null===t||void 0===t||null===(n=t.intents)||void 0===n?void 0:n.map((function(e){return x.createElement("div",{key:e.id,className:"intent  d-flex"},x.createElement("div",null,x.createElement(Ln.Box,null,x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"Name:"})," ")," ",x.createElement(nt.Trans,{id:"{0}",values:{0:e.name}}))),x.createElement(Ln.Box,null,x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"Note:"})," ")," ",x.createElement(nt.Trans,{id:"{0}",values:{0:e.note}})))),x.createElement(Pl,{size:"default",src:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GRAPHQL_ENDPOINT:"https://api.reflowproject.eu/api/explore",REACT_APP_SENTRY_API_KEY:"https://a2c6737d369743ee87622b3bec4458f7@o373800.ingest.sentry.io/5444849"}).REACT_APP_UPLOADS,"/").concat(null===e||void 0===e?void 0:e.image)||"some"}))}))):null)},nI=_n("div")(GC());function tI(){var e=Object(i.a)(["\n  flex-basis: 100px;\n  width: 100px;\n  height: 100px;\n\n  img {\n    height: 100px;\n  }\n"]);return tI=function(){return e},e}function rI(){var e=Object(i.a)(["\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return rI=function(){return e},e}function aI(){var e=Object(i.a)(["\n  flex-basis: 140px;\n  width: 140px;\n  height: 140px;\n  border-radius: 4px;\n  background-color: #f3f3f3;\n\n  img {\n    width: 100%;\n    height: 140px;\n    object-fit: cover;\n    border-radius: 4px;\n  }\n"]);return aI=function(){return e},e}function iI(){var e=Object(i.a)(["\n  flex-basis: calc(100% - 160px);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: flex-start;\n"]);return iI=function(){return e},e}function oI(){var e=Object(i.a)(["\n  display: flex\n  justify-content: flex-end;\n  padding: 15px 0 0;\n  \n  &:not(:last-child) {\n    margin-bottom: 10px;\n    }\n  \n  button {\n    margin-right: 0;\n  }\n  "]);return oI=function(){return e},e}function lI(){var e=Object(i.a)(["\n  flex-basis: calc(100% - 100px);\n  padding 10px 10px 10px 20px;\n  border-bottom: 1px solid #ccc\n"]);return lI=function(){return e},e}function cI(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-grow: 0;\n  background: #fff;\n  height: auto\n  padding: 1em;\n  margin-bottom: 10px;\n"]);return cI=function(){return e},e}function uI(){var e=Object(i.a)(["\n  width: 30px;\n  display: inline-block;\n  svg {\n    stroke: ",";\n  }\n"]);return uI=function(){return e},e}function mI(){var e=Object(i.a)(["\n  color: ",";\n  text-decoration: none !important;\n"]);return mI=function(){return e},e}function sI(){var e=Object(i.a)(["\n  background: ",";\n  color: ",";\n  text-transform: uppercase;\n  font-weight: bold;\n  font-size: 10px;\n  border-radius: 4px;\n  padding: 3px 5px;\n  width: auto;\n  display: inline-block;\n  margin-bottom: 10px;\n"]);return sI=function(){return e},e}var dI=t(341).default,fI=t(342).default,vI=t(671).default,pI=t(672).default,bI=t(673).default,gI=t(674).default,hI=t(650).default,xI=t(675),EI=function(e){var n,t,r,a=e.resource,i=e.openEditModal,o=e.openUpdateResourceModal,l=window.location.href,m=x.useState({first:!1,second:!1}),s=Object(u.a)(m,2),d=s[0],f=s[1];return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,x.createElement(CI,null,x.createElement(ct,{mr:2,onClick:i,variant:"button"},x.createElement(nt.Trans,{id:"Perform event"})),x.createElement(ct,{ml:2,onClick:o,variant:"error"},x.createElement(gI,{size:"20"})," ",x.createElement(nt.Trans,{id:"Edit"}))),x.createElement(kI,null,x.createElement("div",null,x.createElement(TI,null,(null===a||void 0===a?void 0:a.image)&&x.createElement("img",{src:a.image,alt:a.name})),x.createElement(FI,null,(null===a||void 0===a?void 0:a.id)&&x.createElement(xI,{value:l}))),x.createElement(II,null,x.createElement(Ln.Box,{mb:2},x.createElement(OI,{variant:"heading"}," ",x.createElement(nt.Trans,{id:"{0}",values:{0:a&&a.name}}))),x.createElement(Ln.Box,null,x.createElement(Ln.Text,{variant:"text"},x.createElement(jI,null,x.createElement(bI,{size:"16"})),x.createElement("b",null,x.createElement(nt.Trans,{id:"Note:"})," ")," ",x.createElement(nt.Trans,{id:"{0}",values:{0:(null===a||void 0===a?void 0:a.note)?a.note:"Not provided"}}))),x.createElement(Ln.Box,null,x.createElement(Ln.Text,{variant:"text"},x.createElement(jI,null,x.createElement(vI,{size:"16"})),x.createElement("b",null,x.createElement(nt.Trans,{id:"Location:"}))," ",(null===a||void 0===a||null===(n=a.currentLocation)||void 0===n?void 0:n.name)?a.currentLocation.name:"Not provided")),x.createElement(Ln.Box,null,x.createElement(Ln.Text,{variant:"text"},x.createElement(jI,null,x.createElement(pI,{size:"16"})),x.createElement("b",null,"Quantity in stock:")," ",x.createElement("span",{style:{color:(null===a||void 0===a?void 0:a.onhandQuantity)&&a.onhandQuantity.hasNumericalValue<0?"red":"inherit"}},(null===a||void 0===a?void 0:a.onhandQuantity)?"".concat(null===a||void 0===a||null===(t=a.onhandQuantity)||void 0===t?void 0:t.hasNumericalValue," ").concat(null===a||void 0===a||null===(r=a.onhandQuantity)||void 0===r?void 0:r.hasUnit.label):"Not provided"))),x.createElement(eI,{data:null===a||void 0===a?void 0:a.primaryAccountable}),x.createElement(nI,null,x.createElement("div",{className:"d-flex"},x.createElement(Ln.Text,{variant:"heading"},x.createElement(nt.Trans,{id:"Some data"})),x.createElement(ct,{mr:2,onClick:function(){return f(Object(c.a)(Object(c.a)({},d),{},{first:!d.first}))},variant:"show-more"},d.first?x.createElement(x.Fragment,null,x.createElement(fI,{size:"16"}),x.createElement(nt.Trans,{id:"Hide data"})):x.createElement(x.Fragment,null,x.createElement(dI,{size:"16"}),x.createElement(nt.Trans,{id:"Show data"})))),d.first?x.createElement("div",null,x.createElement("div",{className:"intent"},x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"contained In:"}))," ",(null===a||void 0===a?void 0:a.containedIn)+"")),x.createElement("div",{className:"intent"},x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"contains:"}))," ",(null===a||void 0===a?void 0:a.contains)+"")),x.createElement("div",{className:"intent"},x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"lot:"}))," ",(null===a||void 0===a?void 0:a.lot)+"")),x.createElement("div",{className:"intent"},x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"stage:"}))," ",(null===a||void 0===a?void 0:a.stage)+"")),x.createElement("div",{className:"intent"},x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"trace length:"}))," ",null===a||void 0===a?void 0:a.trace.length)),x.createElement("div",{className:"intent"},x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"tracking Identifier:"}))," ",(null===a||void 0===a?void 0:a.trackingIdentifier)+"")),x.createElement("div",{className:"intent"},x.createElement(Ln.Text,{variant:"text"},x.createElement("b",null,x.createElement(nt.Trans,{id:"unit Of Effort:"}))," ",(null===a||void 0===a?void 0:a.unitOfEffort)+""))):null),(null===a||void 0===a?void 0:a.track)&&(null===a||void 0===a?void 0:a.track.length)>0&&x.createElement(ct,{mr:2,onClick:function(){return f(Object(c.a)(Object(c.a)({},d),{},{second:!d.second}))},variant:"show-more"},d.second?x.createElement(x.Fragment,null,x.createElement(fI,{size:"16"}),x.createElement(nt.Trans,{id:"Show less events"})):x.createElement(x.Fragment,null,x.createElement(dI,{size:"16"}),x.createElement(nt.Trans,{id:"Show more events"}))),d.second&&(null===a||void 0===a?void 0:a.track.map((function(e){var n,t;return x.createElement(wI,null,x.createElement(yI,null,e.action?x.createElement(nt.Trans,{id:"{0}",values:{0:e.action.label}}):x.createElement(nt.Trans,{id:"Not provided"})),x.createElement(Ln.Box,{mr:1},x.createElement(Ln.Text,{variant:"text"},x.createElement(jI,null,x.createElement(bI,{size:"16"})),x.createElement("b",null,x.createElement(nt.Trans,{id:"Track note:"}))," ",e.note?e.note:"Not provided")),x.createElement(Ln.Box,{mr:1},x.createElement(Ln.Text,{variant:"text"},x.createElement(jI,null,x.createElement(pI,{size:"16"})),x.createElement("b",null,"Quantity")," ","".concat(null===(n=e.resourceQuantity)||void 0===n?void 0:n.hasNumericalValue," ").concat(null===(t=e.resourceQuantity)||void 0===t?void 0:t.hasUnit.label))),x.createElement(Ln.Box,{mr:1},x.createElement(Ln.Text,{variant:"text"},x.createElement(jI,null,x.createElement(hI,{size:"16"})),x.createElement("b",null,x.createElement(nt.Trans,{id:"Provider:"}))," ",e.provider?e.provider.name:"Not provided")),x.createElement(Ln.Box,{mr:1},x.createElement(Ln.Text,{variant:"text"},x.createElement(jI,null,x.createElement(hI,{size:"16"})),x.createElement("b",null,x.createElement(nt.Trans,{id:"Receiver:"})),e.receiver?e.receiver.name:"Not provided")))})))))))),x.createElement(Yh,null))},yI=_n(Ln.Text)(sI(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.light})),OI=_n(Ln.Text)(mI(),(function(e){return e.theme.colors.dark})),jI=_n(Ln.Box)(uI(),(function(e){return e.theme.colors.mediumdark})),kI=_n("div")(cI()),wI=_n("div")(lI()),CI=_n("div")(oI()),II=_n("div")(iI()),TI=_n("div")(aI()),FI=_n(TI)(rI());_n(TI)(tI());function SI(){var e=Object(i.a)(["\n  font-size: ",";\n  color: ",";\n  text-decoration: none !important;\n  margin-bottom: 10px;\n\n  &:hover {\n    text-decoration: underline !important;\n  }\n"]);return SI=function(){return e},e}function PI(){var e=Object(i.a)(["\n  text-decoration: none !important;\n  * {\n    text-decoration: none !important;\n  }\n"]);return PI=function(){return e},e}var MI=function(e){var n=e.inventory;return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,n.map((function(e){var n=e.id,t=e.name,r=e.note,a=e.image;return x.createElement(_I,{to:"/inventory/".concat(n)},x.createElement(kI,{key:n},x.createElement(TI,null,a&&x.createElement("img",{src:a,alt:t})),x.createElement(II,null,x.createElement(LI,{variant:"subhead"},t),x.createElement(Ln.Box,{mr:1},x.createElement(Ln.Text,{variant:"text"},r)))))}))))),x.createElement(Yh,null))},_I=_n(Kt.c)(PI()),LI=_n(Ln.Text)(SI(),sn.m1,(function(e){return e.theme.colors.dark})),UI=function(e){var n=e.userId,t=sa().me,r=$k({variables:{agent:[t?t.user.id:n]}}).data;return E.a.createElement(MI,{inventory:(null===r||void 0===r?void 0:r.economicResourcesFiltered)||[]})},AI={exact:!1,path:"/inventory/user/:userId",component:function(e){var n=e.match.params.userId,t={userId:n,basePath:"/inventory/user/".concat(n)};return E.a.createElement(ly,null,E.a.createElement(UI,t))}},RI=function(e){var n,t=e.title,r=e.formik,a=e.done,i=e.actionList,o=e.providerList,l=e.receiverList,d=e.setAction,f=void 0===d?function(){}:d,v=E.a.useState([]),p=Object(u.a)(v,2),b=p[0],g=p[1],h=E.a.useState([]),x=Object(u.a)(h,2),y=x[0],O=x[1];return E.a.useEffect((function(){g(ck(o,"name")),O(ck(l,"name"))}),[o,l]),E.a.createElement(Go,null,E.a.createElement("form",{onSubmit:r.handleSubmit},E.a.createElement(nl,null,E.a.createElement(Ln.Heading,{m:2},E.a.createElement(nt.Trans,{id:"{title}",values:{title:t}}))),E.a.createElement(au,null,E.a.createElement(ru,null,E.a.createElement(nu,null,E.a.createElement("div",{className:"d-flex"},E.a.createElement(Ln.Box,{sx:{width:"140",height:"140"},className:"item_photo"},E.a.createElement(TI,null,E.a.createElement("img",{src:"object"!==typeof r.values.image?r.values.image:r.values.image.path,alt:"img"}))),E.a.createElement("div",{className:"item_info"},E.a.createElement(Ln.Box,{mr:1,mb:2},E.a.createElement(OI,{variant:"heading"}," ",E.a.createElement(nt.Trans,{id:"{0}",values:{0:r.values.name}}))),E.a.createElement(Ln.Box,{mr:1,mb:2},E.a.createElement(Ln.Text,{variant:"text"},E.a.createElement("b",null,E.a.createElement(nt.Trans,{id:"Location:"})," ")," ",E.a.createElement(nt.Trans,{id:"{0}",values:{0:null===(n=r.values.atLocation)||void 0===n?void 0:n.label}}))),E.a.createElement(Ln.Box,{mr:1},E.a.createElement(Ln.Text,{variant:"text"},E.a.createElement("b",null,E.a.createElement(nt.Trans,{id:"Note:"})," ")," ",E.a.createElement(nt.Trans,{id:"{0}",values:{0:r.values.note}})))))),E.a.createElement(nu,null,E.a.createElement(Ln.Box,null,E.a.createElement(fk,null,E.a.createElement(vk,null,"Actions"),E.a.createElement(lk,{onSelect:function(e,n){f(n.id),r.setValues(Object(c.a)(Object(c.a)({},r.values),{},{action:n}))},options:i,variant:"primary",id:"actions",name:"actions",placeholder:Object(nt.i18nMark)("Select action"),value:r.values.action})),r.errors.action&&E.a.createElement(rk,{variant:"negative"},r.errors.action&&"Required")),E.a.createElement("div",{className:"d-flex"},E.a.createElement("div",{className:"item_col-6"},E.a.createElement(fk,null,E.a.createElement(vk,null,"Receiver"),E.a.createElement(lk,{onSelect:function(e,n){r.setValues(Object(c.a)(Object(c.a)({},r.values),{},Object(m.a)({},e,n)))},placeholder:Object(nt.i18nMark)("Provider"),options:b,variant:"primary",value:r.values.provider,id:"provider",name:"provider"})),r.errors.provider&&E.a.createElement(rk,{variant:"negative"},r.errors.provider&&"Required")),E.a.createElement("div",{className:"item_col-6"},E.a.createElement(fk,null,E.a.createElement(vk,null,"Receiver"),E.a.createElement(lk,{onSelect:function(e,n){r.setValues(Object(c.a)(Object(c.a)({},r.values),{},Object(m.a)({},e,n)))},placeholder:Object(nt.i18nMark)("Receiver"),options:y,variant:"primary",value:r.values.receiver,id:"receiver",name:"receiver"})),r.errors.receiver&&E.a.createElement(rk,{variant:"negative"},r.errors.receiver&&"Required")))),E.a.createElement(nu,null,E.a.createElement("div",{className:"d-flex"},E.a.createElement("div",{className:"item_col-6"},E.a.createElement(fk,null,E.a.createElement(vk,null,"unit"),E.a.createElement(nk,{type:"text",id:"hasUnit",name:"hasUnit",disabled:!0,onChange:r.handleChange,value:r.values.hasUnit.label})),r.errors.hasUnit&&E.a.createElement(rk,{variant:"negative"},r.errors.hasUnit&&"Required")),E.a.createElement("div",{className:"item_col-6"},E.a.createElement(fk,null,E.a.createElement(vk,null,"numerical value"),E.a.createElement(nk,{type:"number",id:"hasNumericalValue",name:"hasNumericalValue",onChange:r.handleChange,placeholder:Object(nt.i18nMark)("Numerical Value"),value:r.values.hasNumericalValue})),r.errors.hasNumericalValue&&E.a.createElement(rk,{variant:"negative"},r.errors.hasNumericalValue)))),E.a.createElement(nu,null,E.a.createElement(fk,null,E.a.createElement(vk,null,"Event Note"),E.a.createElement(nk,{id:"eventNote",type:"textarea",name:"eventNote",onChange:r.handleChange,placeholder:Object(nt.i18nMark)("Event Note"),value:r.values.eventNote})),E.a.createElement(Xo,null,r.values.eventNote?500-r.values.eventNote.length:500),r.errors.eventNote&&E.a.createElement(rk,{variant:"negative"},r.errors.eventNote)))),E.a.createElement(Yo,{mb:3},E.a.createElement(ct,{variant:"primary",isSubmitting:r.isSubmitting,isDisabled:r.isSubmitting,type:"submit",style:{marginLeft:"10px"}},E.a.createElement(nt.Trans,{id:"Save"})),E.a.createElement(ct,{variant:"outline",onClick:a},E.a.createElement(nt.Trans,{id:"Cancel"})))),E.a.createElement(s.b,null))};function BI(){var e=Object(i.a)(["\n    query economicResource($id: ID!) {\n  economicResource(id: $id) {\n    id\n    trackingIdentifier\n    primaryAccountable {\n      id\n      name\n      image\n      relationshipsAsObject {\n        id\n        relationship {\n          id\n          inverseRoleLabel\n        }\n      }\n      intents {\n        id\n        name\n        note\n        image\n      }\n    }\n    name\n    note\n    image\n    stage {\n      id\n      name\n      note\n    }\n    contains {\n      image\n      track {\n        id\n        action {\n          id\n        }\n        fulfills {\n          effortQuantity {\n            id\n            hasUnit {\n              id\n              label\n              symbol\n            }\n          }\n        }\n      }\n    }\n    stage {\n      id\n      name\n      note\n    }\n    containedIn {\n      id\n      name\n      trace {\n        id\n        note\n      }\n      track {\n        id\n        note\n      }\n    }\n    currentLocation {\n      id\n      name\n      lat\n      long\n    }\n    lot {\n      id\n      expiryDate\n      batchNumber\n    }\n    trace {\n      id\n      note\n      action {\n        id\n      }\n    }\n    track {\n      id\n      note\n      resourceQuantity {\n        id\n        hasUnit {\n          id\n          label\n        }\n        hasNumericalValue\n      }\n      action {\n        id\n        label\n      }\n      provider {\n        id\n        name\n      }\n      receiver {\n        id\n        name\n      }\n    }\n    unitOfEffort {\n      id\n      label\n    }\n    onhandQuantity {\n      id\n      hasNumericalValue\n      hasUnit {\n        id\n        label\n      }\n    }\n  }\n}\n    "]);return BI=function(){return e},e}var NI=R()(BI());var zI,DI=function(e,n){return{query:NI,variables:e,context:n}},$I=function(){var e,n=V.c(Sw,e),t=Object(u.a)(n,2),r=t[0],i=t[1],l=iC(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l,c,u,m,s,d,f,v,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id,o=n.eventNote,l=n.atLocation,c=n.name,u=n.note,m=n.action,s=n.provider,d=n.receiver,f=n.hasUnit,v=n.hasNumericalValue,p=n.image,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{id:t,eventNote:o,atLocation:l,name:c,note:u,action:m,provider:s,receiver:d,hasUnit:f,hasNumericalValue:v,image:p},refetchQueries:[DI({id:t})]}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(x.useMemo)((function(){return{create:l}}),[l])},qI=(ci.object({name:ci.string().min(2).max(60).required(),summary:ci.string().max(500),image:(zI=ci.mixed()).test.apply(zI,Object(C.a)(El))}),function(e){var n=e.done,t=e.resource,r=Object(Cw.a)(e,["done","resource"]),a=$I().create,i=ci.object().shape({name:ci.string().max(60,"Too Long!").required("Required"),note:ci.string().max(500,"Too Long!"),eventNote:ci.string().max(500,"Too Long!"),action:ci.object().shape({id:ci.string().required("Required")}),provider:ci.object().shape({id:ci.string().required("Required")}),receiver:ci.object().shape({id:ci.string().required("Required")}),hasUnit:ci.object().shape({id:ci.string().required("Required")}),hasNumericalValue:ci.string().required("Required").notOneOf([0,"0",null,void 0],"Not null")}),o=Object(qt.a)({initialValues:E.a.useMemo((function(){var e,n,r,a,i,o,l,c,u,m,s,d,f={name:"",note:"",image:void 0,atLocation:{id:"",label:"",value:""},action:{id:"",label:""},provider:{id:"",label:""},receiver:{id:"",label:""},hasUnit:{id:"",label:""},hasNumericalValue:0,eventNote:""};t&&(f={name:t.name||"",note:t.note||"",image:t.image||void 0,action:{id:"",label:""},provider:{id:(null===(e=t.track[0])||void 0===e||null===(n=e.provider)||void 0===n?void 0:n.id)||"",label:(null===(r=t.track[0])||void 0===r||null===(a=r.provider)||void 0===a?void 0:a.name)||""},receiver:{id:(null===(i=t.track[0])||void 0===i||null===(o=i.receiver)||void 0===o?void 0:o.id)||"",label:(null===(l=t.track[0])||void 0===l||null===(c=l.receiver)||void 0===c?void 0:c.name)||""},hasUnit:{id:(null===(u=t.onhandQuantity)||void 0===u?void 0:u.hasUnit.id)||"",label:(null===(m=t.onhandQuantity)||void 0===m?void 0:m.hasUnit.label)||""},hasNumericalValue:(null===(s=t.onhandQuantity)||void 0===s?void 0:s.hasNumericalValue)||0,eventNote:(null===(d=t.track[0])||void 0===d?void 0:d.note)||"",atLocation:t.currentLocation?{id:t.currentLocation.id,value:t.currentLocation.id,label:t.currentLocation.name}:{id:"",label:"",value:""}});return f}),[t]),validateOnChange:!1,validateOnBlur:!1,validationSchema:i,enableReinitialize:!0,onSubmit:function(e){return a({id:t.id,name:e.name,atLocation:e.atLocation.id,eventNote:e.eventNote||"",action:e.action.id,note:e.note,provider:e.provider.id,receiver:e.receiver.id,hasUnit:e.hasUnit.id,hasNumericalValue:e.hasNumericalValue,image:e.image}).then((function(e){e.errors?console.log(e.errors[0].message):(s.c.success("Event on resource ".concat(t.name," created"),{position:"top-right",transition:s.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n())})).catch((function(e){return console.log(e)}))}}),l=Object(c.a)(Object(c.a)({},r),{},{title:"Create a new event on resource ".concat(t.name),formik:o,done:n});return E.a.createElement(Jj,null,E.a.createElement(RI,l))}),VI=function(e){var n=e.title,t=e.formik,r=e.done,a=e.spatialThings,i=E.a.useCallback((function(e){return t.setValues(Object(c.a)(Object(c.a)({},t.values),{},{image:e}))}),[t]),o="string"===typeof t.values.image?t.values.image:"";return E.a.createElement(Go,null,E.a.createElement("form",{onSubmit:t.handleSubmit},E.a.createElement(nl,null,E.a.createElement(Ln.Heading,{m:2},E.a.createElement(nt.Trans,{id:"{title}",values:{title:n}}))),E.a.createElement(au,null,E.a.createElement(ru,null,E.a.createElement(nu,null,E.a.createElement("div",{className:"d-flex"},E.a.createElement(Ln.Box,{sx:{width:"140",height:"140"},className:"item_photo"},E.a.createElement(vo,{initialUrl:o,onFileSelect:i,filePattern:"image/*"}),E.a.createElement("p",null),E.a.createElement(vk,null,"Image URL"),E.a.createElement(nk,{type:"text",id:"image",name:"image",onChange:t.handleChange,placeholder:Object(nt.i18nMark)("Image"),value:"object"!==typeof t.values.image?t.values.image:t.values.image.path})),E.a.createElement("div",{className:"item_info"},E.a.createElement(Ln.Box,null,E.a.createElement(fk,null,E.a.createElement(vk,null,Object(nt.i18nMark)("Resource")),E.a.createElement(nk,{type:"text",id:"name",name:"name",disabled:t.isSubmitting,onChange:t.handleChange,placeholder:Object(nt.i18nMark)("Name of your resource"),value:t.values.name}),E.a.createElement(Xo,null,60-t.values.name.length)),t.errors.name&&E.a.createElement(rk,{variant:"negative"},t.errors.name)),E.a.createElement(Ln.Box,null,E.a.createElement(vk,null,Object(nt.i18nMark)("location")),E.a.createElement(lk,{onSelect:function(e,n){t.setValues(Object(c.a)(Object(c.a)({},t.values),{},Object(m.a)({},e,n)))},options:null===a||void 0===a?void 0:a.map((function(e){return{id:e.id,value:e.id,label:e.name}})),placeholder:Object(nt.i18nMark)("CustomSelect location"),value:t.values.atLocation||{id:"",value:"",label:""},variant:"primary",id:"atLocation",name:"atLocation"}),t.errors.atLocation&&E.a.createElement(Wo,null,E.a.createElement(rk,{variant:"negative"},t.errors.atLocation))),E.a.createElement(nu,null,E.a.createElement(fk,null,E.a.createElement(vk,null,Object(nt.i18nMark)("Note")),E.a.createElement(nk,{type:"textarea",id:"note",name:"note",onChange:t.handleChange,placeholder:Object(nt.i18nMark)("Note"),value:t.values.note}),E.a.createElement(Xo,null,t.values.note?500-t.values.note.length:500)),t.errors.note&&E.a.createElement(rk,{variant:"negative"},t.errors.note))))))),E.a.createElement(Yo,{mb:3},E.a.createElement(ct,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"}},E.a.createElement(nt.Trans,{id:"Update"})),E.a.createElement(ct,{variant:"outline",onClick:r},E.a.createElement(nt.Trans,{id:"Cancel"})))),E.a.createElement(s.b,null))};function QI(){var e=Object(i.a)(["\n    mutation updateEconomicResource($id: ID!, $note: String, $image: URI) {\n  updateEconomicResource(resource: {id: $id, note: $note, image: $image}) {\n    economicResource {\n      id\n    }\n  }\n}\n    "]);return QI=function(){return e},e}var WI=R()(QI());var HI,JI=function(){var e,n=V.c(WI,e),t=Object(u.a)(n,2),r=t[0],i=t[1],l=iC(function(){var e=Object(o.a)(a.a.mark((function e(n){var t,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id,o=n.note,l=n.image,!i.loading){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",r({variables:{id:t,note:o,image:l},refetchQueries:[DI({id:t})]}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,r]);return Object(x.useMemo)((function(){return{update:l}}),[l])},KI=(ci.object({name:ci.string().min(2).max(60).required(),note:ci.string().max(500),image:(HI=ci.mixed()).test.apply(HI,Object(C.a)(El))}),function(e){var n,t=e.done,r=e.resource,a=Object(Cw.a)(e,["done","resource"]),i=JI().update,o=ci.object().shape({note:ci.string().max(500,"Too Long!")}),l=null===(n=Vj().data)||void 0===n?void 0:n.spatialThingsPages,u=Object(qt.a)({initialValues:E.a.useMemo((function(){var e={note:"",image:void 0,location:""};return r&&(e={name:r.name||"",note:r.note||"",image:r.image||void 0,atLocation:r.currentLocation?{id:r.currentLocation.id,value:r.currentLocation.id,label:r.currentLocation.name}:{id:"",label:"",value:""}}),e}),[r]),validateOnChange:!1,validateOnBlur:!1,validationSchema:o,enableReinitialize:!0,onSubmit:function(e){var n;return i({id:r.id,name:e.name,note:e.note,atLocation:null===(n=e.atLocation)||void 0===n?void 0:n.id,image:e.image}).then((function(e){e.errors?console.log(e.errors[0].message):(s.c.success("Resource was updated",{position:"top-right",transition:s.a,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),t())})).catch((function(e){return console.log(e)}))}}),m=Object(c.a)(Object(c.a)({},a),{},{spatialThings:null===l||void 0===l?void 0:l.edges,title:"Update resource ".concat(r.name),formik:u,done:t});return E.a.createElement(VI,m)}),ZI=function(e){var n,t=e.resourceId,r=(n={variables:{id:t.trim()}},V.d(NI,n)),a=r.data,i=r.loading,o=r.error,l=null===a||void 0===a?void 0:a.economicResource,c=oC(),m=Object(x.useReducer)((function(e){return!c()&&!e}),!1),s=Object(u.a)(m,2),d=s[0],f=s[1],v=Object(x.useReducer)((function(e){return!c()&&!e}),!1),p=Object(u.a)(v,2),b=p[0],g=p[1],h=d?E.a.createElement(al,{closeModal:f},E.a.createElement(qI,{done:f,resource:l})):null,y=b?E.a.createElement(al,{closeModal:g},E.a.createElement(KI,{done:g,resource:l})):null,O={openEditModal:f,openUpdateResourceModal:g,resource:l,loading:i,error:o};return E.a.createElement(E.a.Fragment,null,y,h,E.a.createElement(EI,O))},GI={exact:!1,path:"/inventory/:resourceId",component:function(e){var n={resourceId:e.match.params.resourceId};return E.a.createElement(ly,null,E.a.createElement(ZI,n))}},YI=function(e){var n=e.userId;return x.createElement(jt,null,x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,"hi ",n))),x.createElement(Yh,null))};function XI(){var e=Object(i.a)(["\n    query user($userId: String!) {\n  user(userId: $userId) {\n    outbox(limit: 15) {\n      edges {\n        user {\n          icon {\n            id\n          }\n          name\n          image {\n            id\n          }\n        }\n        verb\n        context {\n          ... on Community {\n            ...CommunityPreview\n          }\n          ... on Collection {\n            ...CollectionPreview\n          }\n          ... on Resource {\n            ...ResourcePreview\n          }\n          ... on User {\n            ...UserPreview\n          }\n          ... on Comment {\n            ...CommentPreview\n          }\n          ... on Flag {\n            ...FlagPreview\n          }\n          ... on Like {\n            ...LikePreview\n          }\n          ... on Follow {\n            ...FollowPreview\n          }\n        }\n      }\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n      }\n    }\n  }\n}\n    ","\n","\n","\n","\n","\n","\n","\n",""]);return XI=function(){return e},e}var eT=R()(XI(),Ut,Rt,yi,Kr,Ci,Ti,Si,Mi);var nT=function(e){var n,t=e.userId,r=sa().me,a=r?r.user.id:t,i=(n={variables:{userId:a}},V.d(eT,n)),o=i.error,l=i.data;console.log({data:l}),console.log("Error:",o);var c={userId:t};return E.a.createElement(YI,c)},tT={exact:!1,path:"/activity",component:function(e){var n={userId:e.match.params.userId,basePath:"/activity"};return E.a.createElement(ly,null,E.a.createElement(nT,n))}},rT=t(798),aT=t(801),iT=t(781),oT=t(802),lT=(t(681),t(57)),cT=t(399);function uT(){var e=Object(i.a)(["\n  width: 100%;\n  height: 400px;\n"]);return uT=function(){return e},e}var mT=t.n(cT).a.renderToString(E.a.createElement(Cl.a,{size:"30",color:Fn.colors.primary,fill:Fn.colors.secondary})),sT=Object(lT.divIcon)({className:"maker--pin",html:mT,iconSize:[30,30]}),dT=function(e){var n=e.center,t=e.zoom,r=void 0===t?20:t,a=e.markers,i=void 0===a?[]:a,o=e.tileAttribution,l=void 0===o?'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors':o,c=function(e,n){return n||(1===e.length?e[0].position:e.length>1?new lT.LatLngBounds(e.map((function(e){var n=e.position;return[n.lat,n.lng]}))).getCenter():void 0)}(i,n);return E.a.createElement(fT,null,c&&E.a.createElement(rT.a,{center:c,zoom:r,style:{height:"100%",width:"100%"}},E.a.createElement(aT.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:l}),i.map((function(e,n){var t=e.position,r=e.popup;return E.a.createElement(iT.a,{icon:sT,key:n,position:t},r&&E.a.createElement(oT.a,null,r))}))))},fT=k.default.div(uT()),vT=function(e){var n=e.center,t=e.zoom,r=void 0===t?13:t,a=e.markers,i=void 0===a?[]:a;return E.a.createElement(jt,null,E.a.createElement(kt,null,E.a.createElement(wt,null,E.a.createElement(Ct,null,E.a.createElement(dT,{center:n,zoom:r,markers:i})))))};function pT(){var e=Object(i.a)(["\n  query communityMapPoints($communityId: [ID]!) {\n    proposalsFiltered(inScopeOf: $communityId) {\n      __typename\n      id\n      name\n      note\n      eligibleLocation {\n        lat\n        long\n        geom\n      }\n    }\n  }\n"]);return pT=function(){return e},e}var bT=R()(pT()),gT=function(e){if(!e)return!1;var n=e.eligibleLocation;return n&&(n.geom||(null===n||void 0===n?void 0:n.lat)&&n.long)},hT=function(e){var n=e.communityId,t=Object(V.a)(),r=Object(x.useState)([]),a=Object(u.a)(r,2),i=a[0],o=a[1];return Object(x.useEffect)((function(){t.query({query:bT,variables:{communityId:n}}).then((function(e){e.data&&e.data.proposalsFiltered&&o(e.data.proposalsFiltered.filter(gT).map((function(e){return e})).map((function(e){var n=e.eligibleLocation,t=n.lat,r=n.long,a=n.geom;return{position:t&&r?{lat:t,lng:r}:{lat:a.coordinates[0],lng:a.coordinates[1]},popup:e.name}})))}))}),[n,t]),vi({id:"Map"}),E.a.createElement(vT,{markers:i,zoom:13,center:{lat:41.396,lng:2.192}})},xT={exact:!0,path:"/communities/:communityId/map/",component:function(e){var n=e.match;return null===n?E.a.createElement(Vg,null):E.a.createElement(ly,null,E.a.createElement(hT,{communityId:n.params.communityId}))}};Rx(xT);function ET(){var e=Object(i.a)(["\n  width: 432px;\n"]);return ET=function(){return e},e}function yT(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  margin-top: 60px;\n  padding: 16px;\n  padding-bottom: 50px;\n  & button {\n    margin-top: 16px;\n    width: 100%;\n    color: #fff !important;\n    text-transform: uppercase\n      &:hover {\n      background: #d67218 !important;\n    }\n  }\n"]);return yT=function(){return e},e}function OT(){var e=Object(i.a)(["\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n"]);return OT=function(){return e},e}function jT(){var e=Object(i.a)([""]);return jT=function(){return e},e}function kT(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  padding: 16px;\n  max-width: 400px;\n"]);return kT=function(){return e},e}function wT(){var e=Object(i.a)(["\n  background: ",";\n  padding: 8px 16px;\n  border-radius: 4px;\n  text-decoration: none;\n  font-weight: 600;\n  color: ",";\n  margin-top: 16px;\n  margin: 0 auto;\n  display: block;\n  text-align: center;\n  margin-top: 16px;\n"]);return wT=function(){return e},e}var CT={placeholders:{email:Object(nt.i18nMark)("Enter your email")}},IT=function(e){var n=e.formik,t=e.isSubmitted;return x.createElement(x.Fragment,null,x.createElement(MT,null,x.createElement(PT,null,x.createElement(Fa,null),t?x.createElement(FT,null,x.createElement(ST,{variant:"text"},x.createElement(nt.Trans,{id:"If your email is linked to an account in our database, we have sent you an email with which you can reset your password. It may take a few minutes to arrive depending on your mail provider."})),x.createElement(TT,{to:"/login"},x.createElement(nt.Trans,{id:"Login"}))):x.createElement(_T,null,x.createElement(da.b,{placeholder:CT.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),n.errors.email&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.email)),x.createElement(ct,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",onClick:n.submitForm},x.createElement(nt.Trans,{id:"Reset the password"}))))))},TT=_n(Kt.b)(wT(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter})),FT=_n(Ln.Box)(kT(),(function(e){return e.theme.colors.appInverse})),ST=_n(Ln.Text)(jT()),PT=_n.div(OT()),MT=_n.div(yT()),_T=_n.form(ET()),LT=ci.object({email:ci.string().max(50).required()}),UT={email:""},AT={id:"Reset Password"},RT=function(){vi(AT);var e=ui().resetPwdReq,n=Object(qt.a)({onSubmit:function(n){var t=n.email;return e(t)},initialValues:UT,validationSchema:LT});return E.a.createElement(IT,{formik:n,isSubmitted:n.submitCount>0})},BT={exact:!0,path:"/reset",component:function(e){e.match;return E.a.createElement(Hx,null,E.a.createElement(nC,{withoutHeader:!0},E.a.createElement(RT,null)))}};function NT(){var e=Object(i.a)(["\n    mutation searchUnfollow($contextId: String!) {\n  delete(contextId: $contextId) {\n    __typename\n  }\n}\n    "]);return NT=function(){return e},e}function zT(){var e=Object(i.a)(["\n    mutation searchFollow($url: String!) {\n  createFollowByUrl(url: $url) {\n    id\n  }\n}\n    "]);return zT=function(){return e},e}function DT(){var e=Object(i.a)(["\n    query SearchHostIndexAndMyFollows {\n  instance {\n    ...SearchInstance\n  }\n}\n    ",""]);return DT=function(){return e},e}function $T(){var e=Object(i.a)(["\n    fragment SearchInstance on Instance {\n  hostname\n}\n    "]);return $T=function(){return e},e}var qT=R()($T()),VT=R()(DT(),qT);var QT=R()(zT());var WT=R()(NT());var HT=function(e,n){var t=JT(null===e||void 0===e?void 0:e.community,n);if(!e||!t)return null;var r=e.preferredUsername,a=e.canonicalUrl,i=e.icon,o=e.summary,l=e.index_mothership_object_id,c=e.name;return{__typename:"Collection",community:t,displayUsername:c,icon:i?{__typename:"Content",id:"",url:i}:null,id:l,isLocal:n,myFlag:null,myFollow:null,name:c,canonicalUrl:a,summary:o,preferredUsername:r}},JT=function(e,n){if(!e)return null;var t=e.name,r=e.preferredUsername,a=e.summary,i=e.canonicalUrl,o=e.icon,l=e.index_mothership_object_id,c=e.followers;return{__typename:"Community",icon:o?{__typename:"Content",id:"",url:o}:null,id:l,isLocal:n,name:t,canonicalUrl:i,summary:a,followerCount:(null===c||void 0===c?void 0:c.totalCount)||0,threads:{totalCount:0,__typename:"ThreadsPage"},displayUsername:t,myFlag:null,myFollow:null,collectionCount:0,preferredUsername:r,creator:null}},KT=function(e){var n=ZT(null===e||void 0===e?void 0:e.community);if(!e||!n)return null;var t=e.preferredUsername,r=e.canonicalUrl,a=e.icon,i=e.summary;return{canonicalUrl:r||"",icon:a,name:e.name,preferredUsername:t,summary:i||"",community:n}},ZT=function(e){if(!e)return null;var n=e.name,t=e.preferredUsername,r=e.icon,a=e.summary;return{canonicalUrl:e.canonicalUrl||"",icon:r||"",name:n,preferredUsername:t,summary:a||""}},GT=t(795),YT=t(794),XT=t(800),eF=t(796);function nF(){var e=Object(i.a)(["\n  background: ",";\n  max-width: 600px;\n"]);return nF=function(){return e},e}function tF(){var e=Object(i.a)(["\n  li {\n    height: 40px;\n    line-height: 40px;\n    input {\n      margin-right: 8px;\n    }\n  }\n"]);return tF=function(){return e},e}var rF=function(e){var n=e.previews,t=e.Pagination,r=e.Filter;return E.a.createElement(E.a.Fragment,null,E.a.createElement("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/instantsearch.css@7.1.1/themes/reset-min.css"}),E.a.createElement(jt,null,E.a.createElement(kt,null,E.a.createElement(iF,null,E.a.createElement(wt,null,E.a.createElement(Ct,null,E.a.createElement(Bn,{name:"Search results"}),E.a.createElement(Ln.Box,null,n.map((function(e){return E.a.createElement(Ln.Box,{m:2,key:e.key},e)})))),E.a.createElement(Ln.Box,{m:2},t)))),E.a.createElement(Zn,null,E.a.createElement(Gn,null,E.a.createElement(Yn,{fontWeight:"bold"},E.a.createElement(nt.Trans,{id:"Filters"})),E.a.createElement(Xn,null,E.a.createElement(aF,null,r))))))},aF=_n(Ln.Box)(tF()),iF=_n(Ln.Box)(nF(),(function(e){return e.theme.colors.appInverse})),oF=Object(eF.a)((function(e){var n=e.hits,t={previews:x.useMemo((function(){return n.map((function(e){return"Collection"===e.index_type?x.createElement(lF,{hit:e,key:e.objectID}):"Resource"===e.index_type?x.createElement(uF,{hit:e,key:e.objectID}):"Community"===e.index_type?x.createElement(cF,{hit:e,key:e.objectID}):(console.warn("Could not preview searchHit:",e),null)})).filter((function(e){return!!e}))}),[n]),Pagination:x.createElement(GT.a,{showNext:!0}),Filter:x.createElement(YT.a,{attribute:"index_type"})};return x.createElement(x.Fragment,null,x.createElement(XT.a,{hitsPerPage:8}),x.createElement(rF,t))})),lF=function(e){var n=e.hit,t=mF(n),r=HT(n,t),a=sF(n).toggleFollowFormik,i=r&&vC({collection:r,hideActions:!1,toggleFollowFormik:a});return!i&&console.warn("Could not preview searchHit:",n),i&&x.createElement(br,Object.assign({isSearch:!0},i))},cF=function(e){var n=e.hit,t=mF(n),r=JT(n,t),a=sF(n).toggleFollowFormik,i=r&&kv({community:r,hideActions:!1,toggleJoinFormik:a,isCreator:!1});return!i&&console.warn("Could not preview searchHit:",n),i&&x.createElement(dv,Object.assign({isSearch:!0},i))},uF=function(e){var n,t=e.hit,r=mF(t),a=Pv().data,i=!!((null===a||void 0===a||null===(n=a.instance)||void 0===n?void 0:n.uploadResourceTypes)||[]).find((function(e){var n;return"text/html"!==e.toLowerCase()&&e.toLowerCase()===(null===(n=t.mediaType)||void 0===n?void 0:n.toLowerCase())})),o=function(e){var n=e.resource,t=e.isLocal,r=e.isFile,a=HT(null===n||void 0===n?void 0:n.collection,t),i=null===n||void 0===n?void 0:n.url;if(!(n&&a&&i))return null;var o=n.name,l=n.canonicalUrl,c=n.icon,u=n.licence,m=n.summary,s=n.mediaType,d=n.index_mothership_object_id,f=n.likes;return{__typename:"Resource",canonicalUrl:l||"",collection:a,icon:c?{__typename:"Content",id:"",url:c}:null,name:o,summary:m||"",license:u,id:d,likers:{__typename:"LikesPage",totalCount:parseInt((null===f||void 0===f?void 0:f.totalCount)||"0")||0},myFlag:null,myLike:null,payload:{__typename:"Content",id:"",url:i,mirror:{__typename:"ContentMirror",url:i},mediaType:s||"",upload:r?{__typename:"ContentUpload"}:null}}}({resource:t,isLocal:r,isFile:i}),l=x.useReducer((function(e){return!e}),!1),m=Object(u.a)(l,2),s=m[0],d=m[1],f=x.useReducer((function(e){return!e}),!1),v=Object(u.a)(f,2),p=v[0],b=v[1],g=o&&Object(c.a)(Object(c.a)({},Yy({resource:o,hideActions:!1,like:null})),{},{isOpenDropdown:p,toggleDropdown:b,toggleFlag:null,sendToMoodle:d});!g&&console.warn("Could not preview searchHit:",t);var h=x.useMemo((function(){return function(e){var n=KT(null===e||void 0===e?void 0:e.collection);if(!e||!n)return null;var t=e.name,r=e.canonicalUrl,a=e.icon,i=e.licence;return{canonicalUrl:r||"",collection:n,icon:a||"",name:t,summary:e.summary||"",url:e.url||"",licence:i||"",mediaType:e.mediaType||""}}(t)}),[t]),E=h&&s?x.createElement(al,{closeModal:d},x.createElement(Av,{done:d,resource:h})):null;return g&&x.createElement(x.Fragment,null,E,x.createElement(Py,Object.assign({isSearch:!0},g)))},mF=function(e){var n,t,r=(t={context:g({noShowError:!0})},V.d(VT,t)).data,a=null===r||void 0===r||null===(n=r.instance)||void 0===n?void 0:n.hostname;return e.index_instance===a},sF=function(e){var n,t=V.c(QT,n),r=Object(u.a)(t,2),i=(r[0],r[1]),l=function(e){return V.c(WT,e)}(),c=Object(u.a)(l,2),m=(c[0],c[1]),s={},d=Object(qt.a)({initialValues:{},onSubmit:function(){var n=Object(o.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.canonicalUrl&&!i.loading&&!m.loading){n.next=2;break}return n.abrupt("return");case 2:n.next=6;break;case 6:n.next=8;break;case 8:return n.abrupt("return");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()});return x.useMemo((function(){return{toggleFollowFormik:d,hitSearchFollow:s}}),[d,s])},dF={exact:!1,path:"/search",component:function(){return De?E.a.createElement(Vg,null):E.a.createElement(ly,null,E.a.createElement(oF,null))}},fF=t(782),vF=t(783),pF=t(784),bF=t(785);function gF(){var e=Object(i.a)(["\ncolor: ","\nborder-bottom: 1px solid ",";\na {\n  color: ","\n  text-decoration: none;\n  font-weight: 700;\n  &.active {\n      color: ",";\n    .icon {\n        background: ",";\n        svg {\n          stroke: ",";\n        }\n    }\n    \n  }\n}\n&:hover {\n    .icon {\n        background: ",";\n        svg {\n          stroke: ",";\n        }\n    }\n  }\n  "]);return gF=function(){return e},e}function hF(){var e=Object(i.a)([""]);return hF=function(){return e},e}function xF(){var e=Object(i.a)(["\n  text-transform: uppercase;\n  border-bottom: 4px solid ",";\n  padding: 16px;\n"]);return xF=function(){return e},e}function EF(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  margin: 0px;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  margin-bottom: 8px !important;\n"]);return EF=function(){return e},e}function yF(){var e=Object(i.a)(["\n  width: 80px;\n"]);return yF=function(){return e},e}function OF(){var e=Object(i.a)(["\n  width: 290px;\n"]);return OF=function(){return e},e}function jF(){var e=Object(i.a)(["\n  width: 350px;\n  align-items: stretch;\n  border: 0 solid black;\n  box-sizing: border-box;\n  flex-basis: auto;\n  flex-direction: column;\n  flex-shrink: 0;\n  min-height: 0px;\n  min-width: 0px;\n  padding: 0px;\n  position: relative;\n  z-index: 0;\n  font-family: ",";\n  &.extra {\n    width: 100%;\n  }\n  ",";\n  ",";\n"]);return jF=function(){return e},e}function kF(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  border-radius: 40px;\n  display: flex;\n  align-items: center;\n  svg {\n    stroke: ",";\n    width: 40px;\n  }\n"]);return kF=function(){return e},e}function wF(){var e=Object(i.a)(["\n  & button {\n    span {\n      vertical-align: sub;\n      display: inline-block;\n      height: 30px;\n      margin-right: 4px;\n    }\n  }\n"]);return wF=function(){return e},e}function CF(){var e=Object(i.a)(["\n  width: 100%;\n  position: relative;\n  border-radius: 6px;\n  & p {\n    color: ",";\n    padding: 0 24px;\n    margin-left: 120px;\n    margin: 0;\n    margin-left: 136px;\n    margin-top: -40px;\n    line-height: 26px;\n    padding-bottom: 16px;\n  }\n"]);return CF=function(){return e},e}function IF(){var e=Object(i.a)(["\n  padding: 24px;\n  padding-top: 0;\n  z-index: 9999;\n  position: relative;\n  margin-top: -60px;\n  padding-bottom: 0;\n"]);return IF=function(){return e},e}function TF(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n  }\n"]);return TF=function(){return e},e}function FF(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n  line-height: 26px;\n  border-radius: 100px;\n  align-items: center;\n  span {\n    margin-right: 8px;\n    & svg {\n      stroke: ",";\n      vertical-align: text-bottom;\n    }\n  }\n"]);return FF=function(){return e},e}function SF(){var e=Object(i.a)(["\n  color: ",";\n  font-weight: 500;\n"]);return SF=function(){return e},e}function PF(){var e=Object(i.a)([""]);return PF=function(){return e},e}function MF(){var e=Object(i.a)(["\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n"]);return MF=function(){return e},e}function _F(){var e=Object(i.a)(["\n  justify-content: space-between;\n  ",";\n"]);return _F=function(){return e},e}function LF(){var e=Object(i.a)(["\n  height: 250px;\n  border-radius: 4px;\n  width: 100%;\n  display: inline-block;\n  .thumb {\n    height: 100%;\n  }\n"]);return LF=function(){return e},e}function UF(){var e=Object(i.a)(["\n  width: 120px;\n  height: 120px;\n  border-radius: 6px;\n  background: ",";\n  border: 3px solid ",";\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 16px;\n"]);return UF=function(){return e},e}function AF(){var e=Object(i.a)(["\n  input {\n    background: #fbfbfb;\n    color: ",";\n    border: 0;\n    font-weight: 700;\n  }\n\n  textarea {\n    background: #fbfbfb;\n    border-radius: 2px;\n    border: 0;\n    height: 120px;\n    resize: none;\n  }\n"]);return AF=function(){return e},e}function RF(){var e=Object(i.a)(["\n  border-top: 4px solid ",";\n  border-bottom: 1px solid ",";\n"]);return RF=function(){return e},e}function BF(){var e=Object(i.a)(["\ndisplay: none;\n"]);return BF=function(){return e},e}function NF(){var e=Object(i.a)(["\n  ",";\n"]);return NF=function(){return e},e}function zF(){var e=Object(i.a)(["\n  background: ",";\n"]);return zF=function(){return e},e}var DF,$F={placeholders:{name:Object(nt.i18nMark)("Display Name"),summary:Object(nt.i18nMark)("Please tell us a little bit about yourself..."),location:Object(nt.i18nMark)("Choose a location"),website:Object(nt.i18nMark)("Enter a URL to share more info about you")}};!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded"}(DF||(DF={}));var qF=function(e){var n=e.formik,t=e.Preferences,r=e.Instance,a=e.Invites,i=e.Flags,o=e.ModerationLog,l=e.displayUsername,u=e.isAdmin,m=e.sectionPaths,s=x.useCallback((function(e){return n.setValues(Object(c.a)(Object(c.a)({},n.values),{},{icon:e}))}),[n]),d="string"===typeof n.values.icon?n.values.icon:"",f=x.useCallback((function(e){return n.setValues(Object(c.a)(Object(c.a)({},n.values),{},{image:e}))}),[n]),v="string"===typeof n.values.image?n.values.image:"";return x.createElement(jt,null,x.createElement(QF,{sectionPaths:m,isAdmin:u}),x.createElement(kt,null,x.createElement(wt,null,x.createElement(Ct,null,x.createElement(VF,null,x.createElement(Pn.d,null,x.createElement(Pn.b,{path:m.preferences},t),x.createElement(Pn.b,{path:m.instance},r),x.createElement(Pn.b,{path:m.invites},a),x.createElement(Pn.b,{path:m.flags},i),x.createElement(Pn.b,{path:m.logs},o),x.createElement(Pn.b,{path:m.general},x.createElement(YF,{p:1,pb:2},x.createElement(rS,null,x.createElement(Ln.Flex,null,x.createElement(ZF,null,x.createElement(vo,{initialUrl:v,filePattern:"image/*",onFileSelect:f}))),x.createElement(GF,null,x.createElement(tS,null,x.createElement(KF,null,x.createElement(vo,{initialUrl:d,filePattern:"image/*",onFileSelect:s})))),x.createElement(aS,{mt:2,ml:3},x.createElement(JF,null,x.createElement(da.b,{placeholder:$F.placeholders.name,disabled:n.isSubmitting,name:"name",value:n.values.name,onChange:n.handleChange})),x.createElement(XF,{mt:1,p:2},l),x.createElement(JF,null,x.createElement(da.d,{placeholder:$F.placeholders.summary,disabled:n.isSubmitting,name:"summary",value:n.values.summary,onChange:n.handleChange})),x.createElement(eS,{mt:2},x.createElement("span",null,x.createElement(Cl.a,{strokeWidth:1,size:20})),x.createElement(JF,null,x.createElement(da.b,{placeholder:$F.placeholders.location,disabled:n.isSubmitting,name:"location",value:n.values.location,onChange:n.handleChange}))),x.createElement(nS,{mt:2},x.createElement("span",null,x.createElement(bO.a,{strokeWidth:1,size:20})),x.createElement(JF,null,x.createElement(da.b,{placeholder:$F.placeholders.website,disabled:n.isSubmitting,name:"website",value:n.values.website,onChange:n.handleChange}))))),x.createElement(Yo,{sx:{height:"inherit !important"}},x.createElement(ct,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:n.submitForm},x.createElement(nt.Trans,{id:"Save"})))))))))))},VF=_n(Ln.Box)(zF(),(function(e){return e.theme.colors.appInverse})),QF=function(e){var n=e.sectionPaths,t=e.isAdmin;return x.createElement(oS,{mr:2},x.createElement(lS,null,x.createElement(cS,null,x.createElement(uS,{p:3},x.createElement(Kt.c,{exact:!0,to:n.general},x.createElement(Ln.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},x.createElement(iS,{className:"icon",mr:1},x.createElement(Bl.a,{size:20})),x.createElement(WF,null,x.createElement(nt.Trans,{id:"General information"}))))),x.createElement(uS,{p:3},x.createElement(Kt.c,{to:n.preferences},x.createElement(Ln.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},x.createElement(iS,{className:"icon",mr:1},x.createElement(fF.a,{size:20})),x.createElement(WF,null,x.createElement(nt.Trans,{id:"Preferences"}))))),t?x.createElement(x.Fragment,null,x.createElement(HF,{p:3},x.createElement(Ln.Flex,{alignItems:"center",p:3,sx:{textTransform:"capitalize",fontSize:"14px"}},x.createElement(Ln.Text,{variant:"suptitle"},"Admin"))),x.createElement(uS,{p:3},x.createElement(Kt.c,{to:n.instance},x.createElement(Ln.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},x.createElement(iS,{className:"icon",mr:1},x.createElement(vF.a,{size:20})),x.createElement(WF,null,x.createElement(nt.Trans,{id:"Instance"}))))),x.createElement(uS,{p:3},x.createElement(Kt.c,{to:n.invites},x.createElement(Ln.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},x.createElement(iS,{className:"icon",mr:1},x.createElement(pF.a,{size:20})),x.createElement(WF,null,x.createElement(nt.Trans,{id:"Invites"}))))),x.createElement(uS,{p:3},x.createElement(Kt.c,{to:n.flags},x.createElement(Ln.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},x.createElement(iS,{className:"icon",mr:1},x.createElement(fu.a,{size:20})),x.createElement(WF,null,x.createElement(nt.Trans,{id:"Flags"}))))),x.createElement(uS,{p:3},x.createElement(Kt.c,{to:n.logs},x.createElement(Ln.Flex,{alignItems:"center",sx:{textTransform:"capitalize",fontSize:"14px"}},x.createElement(iS,{className:"icon",mr:1},x.createElement(bF.a,{size:20})),x.createElement(WF,null,x.createElement(nt.Trans,{id:"Moderation log"})))))):null)))},WF=_n(Ln.Text)(NF(),w.a.lessThan("medium")(BF())),HF=_n(Ln.Flex)(RF(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.lighter})),JF=_n(el)(AF(),(function(e){return e.theme.colors.mediumdark})),KF=_n.div(UF(),(function(e){return e.theme.colors.light}),(function(e){return e.theme.colors.light})),ZF=_n(Ln.Box)(LF()),GF=_n(Ln.Flex)(_F(),w.a.lessThan("860px")(MF())),YF=_n(Ln.Box)(PF()),XF=_n(Ln.Text)(SF(),(function(e){return e.theme.colors.mediumdark})),eS=_n(Ln.Flex)(FF(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.medium})),nS=_n(Ln.Flex)(TF(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.medium})),tS=_n.div(IF()),rS=_n.div(CF(),(function(e){return e.theme.colors.mediumdark})),aS=_n(Ln.Box)(wF()),iS=_n(Ln.Box)(kF(),(function(e){return e.theme.colors.medium})),oS=_n(Ln.Flex)(jF(),(function(e){return e.theme.fontFamily}),w.a.lessThan("1095px")(OF()),w.a.lessThan("medium")(yF())),lS=_n(Ln.Box)(EF(),(function(e){return e.theme.colors.appInverse})),cS=(_n(Ln.Text)(xF(),(function(e){return e.theme.colors.lighter})),_n(Ln.Box)(hF())),uS=_n(Ln.Text)(gF(),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),mS=function(){var e,n,t=V.d(Om,n),r=Vt(null===(e=t.data)||void 0===e?void 0:e.flags,(function(e){var n=e.cursor,r=e.update;return t.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var t=n.fetchMoreResult;return(null===t||void 0===t?void 0:t.flags)&&e.flags?Object(c.a)(Object(c.a)({},t),{},{flags:r({prev:e.flags,fetched:t.flags})}):e}})}));return Object(x.useMemo)((function(){return{flagsPage:r}}),[r])};function sS(){var e=Object(i.a)(["\n    mutation deactivateFlaggedUser($userId: String!) {\n  delete(contextId: $userId) {\n    ... on User {\n      id\n    }\n  }\n}\n    "]);return sS=function(){return e},e}function dS(){var e=Object(i.a)(["\n    mutation deleteFlagContext($contextId: String!) {\n  delete(contextId: $contextId) {\n    ... on Collection {\n      id\n    }\n    ... on Comment {\n      id\n    }\n    ... on Community {\n      id\n    }\n    ... on Flag {\n      id\n    }\n    ... on Follow {\n      id\n    }\n    ... on Like {\n      id\n    }\n    ... on Resource {\n      id\n    }\n  }\n}\n    "]);return dS=function(){return e},e}function fS(){var e=Object(i.a)(["\n    mutation deleteFlag($flagId: String!) {\n  delete(contextId: $flagId) {\n    ... on Flag {\n      id\n    }\n  }\n}\n    "]);return fS=function(){return e},e}function vS(){var e=Object(i.a)(["\n    query flagPreviewData($flagId: String!) {\n  flag(flagId: $flagId) {\n    ...FlagPreview\n  }\n}\n    ",""]);return vS=function(){return e},e}var pS=R()(vS(),Ti);var bS=R()(fS());var gS=R()(dS());var hS=R()(sS());var xS=function(e){var n,t,r=(t={variables:{flagId:e}},V.d(pS,t)),i=function(e){return V.c(gS,e)}(),l=Object(u.a)(i,2),c=l[0],m=l[1],s=function(e){return V.c(bS,e)}(),d=Object(u.a)(s,2),f=d[0],v=d[1],p=function(e){return V.c(hS,e)}(),b=Object(u.a)(p,2),g=b[0],h=b[1],E=null===(n=r.data)||void 0===n?void 0:n.flag,y=iC(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&"User"===E.context.__typename&&!h.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",g({variables:{userId:E.context.userId}}));case 3:case"end":return e.stop()}}),e)}))),[E]),O=iC(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&"User"!==E.context.__typename&&!v.loading&&!m.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",Promise.all([f({variables:{flagId:E.id},refetchQueries:[jm({})]}),c({variables:{contextId:E.id}})]));case 3:case"end":return e.stop()}}),e)}))),[E]),j=iC(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&!v.loading){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",f({variables:{flagId:E.id},refetchQueries:[jm({})]}));case 3:case"end":return e.stop()}}),e)}))),[E]);return Object(x.useMemo)((function(){return{flag:E,deactivateFlaggedUser:y,deleteFlagContext:O,ignoreFlag:j,deleteFlagContextStatus:m,deactivateFlaggedUserStatus:h,ignoreFlagStatus:v}}),[E,y,O,j,m,h,v])},ES=t(786),yS=t(787);function OS(){var e=Object(i.a)(["\n  background: ",";\n"]);return OS=function(){return e},e}function jS(){var e=Object(i.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 99999px;\n  display: inline-flex;\n  align-items: center;\n  align-content: center;\n  text-align: center;\n  margin-left: -8px;\n  svg {\n    margin: 0 auto;\n  }\n"]);return jS=function(){return e},e}function kS(){var e=Object(i.a)(["\n  align-items: center;\n  color: ",";\n  div {\n    color: ",";\n  }\n  &:hover {\n    background: ",";\n  }\n  cursor: pointer;\n  background: ",";\n  border-radius: 4px;\n  padding: 0 8px;\n  margin-right: 8px;\n  text-align: center;\n  font-size: ",";\n  svg {\n    stroke: ",";\n  }\n  a {\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 9;\n  }\n  &:hover {\n    svg.hover {\n      stroke: ",";\n      // fill: ",";\n    }\n  }\n"]);return kS=function(){return e},e}function wS(){var e=Object(i.a)(["\n  position: relative;\n  z-index: 999999999999999999999999999999999999;\n  margin-top: 16px;\n"]);return wS=function(){return e},e}function CS(){var e=Object(i.a)(["\n  flex: 1;\n  justify-content: start;\n"]);return CS=function(){return e},e}function IS(){var e=Object(i.a)(["\n  color: ",";\n  background: ",";\n  border-left: 3px solid ",";\n"]);return IS=function(){return e},e}var TS=function(e){var n=e.FlaggedItemContextElement,t=e.type,r=e.reason,a=e.blockUser,i=e.ignoreFlag,o=e.deleteContent;return E.a.createElement(LS,null,E.a.createElement(FS,null,n),E.a.createElement(Ln.Text,{variant:"text",pt:2},r),E.a.createElement(PS,null,E.a.createElement(Ln.Box,null,E.a.createElement(SS,null,"User"===t?E.a.createElement(MS,{onClick:a},E.a.createElement(_S,null,E.a.createElement(ES.a,{strokeWidth:"1",size:"18"})),E.a.createElement(Ln.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},E.a.createElement(nt.Trans,{id:"Block"}))):E.a.createElement(MS,{onClick:o},E.a.createElement(_S,null,E.a.createElement(yS.a,{strokeWidth:"1",size:"18"})),E.a.createElement(Ln.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},E.a.createElement(nt.Trans,{id:"Delete"}))),E.a.createElement(MS,{ml:2,onClick:i},E.a.createElement(_S,{className:"unflag"},E.a.createElement(fu.a,{className:"hover",strokeWidth:"1",size:"16"})),E.a.createElement(Ln.Text,{variant:"suptitle",sx:{textTransform:"capitalize"},ml:1},E.a.createElement(nt.Trans,{id:"Ignore"})))))))},FS=_n(Ln.Box)(IS(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.light})),SS=_n(Ln.Flex)(CS()),PS=_n(Ln.Box)(wS()),MS=_n(Ln.Flex)(kS(),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.liked?Object(it.b)("0.1",e.theme.colors.secondary):Object(it.b)("0.05",e.theme.colors.mediumlight)}),(function(e){return e.liked?e.theme.colors.secondary:e.theme.colors.mediumlight}),sn.s1,(function(e){return e.liked?e.theme.colors.lighter:e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark}),(function(e){return e.theme.colors.mediumdark})),_S=_n(Ln.Box)(jS()),LS=_n(Ln.Box)(OS(),(function(e){return e.theme.colors.appInverse}));function US(){var e=Object(i.a)(["\n  margin-left: 8px;\n  .--rtl & {\n    margin-right: 8px;\n    margin-left: 0px;\n  }\n"]);return US=function(){return e},e}var AS=function(e){var n=e.title,t=e.description,r=e.action,a=e.cancel,i=e.confirm,o=e.waiting;return x.createElement(Go,null,x.createElement(nl,null,x.createElement(Ln.Heading,{m:2},n)),x.createElement(tl,null,x.createElement(el,null,x.createElement(Ln.Text,null,t))),x.createElement(Yo,null,x.createElement(RS,{variant:"primary",isSubmitting:o,isDisabled:o,type:"submit",style:{marginLeft:"10px"},onClick:i},r),x.createElement(ct,{variant:"outline",onClick:a},x.createElement(nt.Trans,{id:"Cancel"}))))},RS=_n(ct)(US()),BS=function(e){var n=e.flagId,t=xS(n),r=t.deactivateFlaggedUser,a=t.deleteFlagContext,i=t.flag,o=t.ignoreFlag,l=t.deleteFlagContextStatus,c=t.deactivateFlaggedUserStatus,m=t.ignoreFlagStatus,s=Object(x.useState)(),d=Object(u.a)(s,2),f=d[0],v=d[1],p=Object(x.useCallback)((function(){return v(void 0)}),[]),b=i&&f?E.a.createElement(al,{closeModal:p},"delete"===f?E.a.createElement(AS,{cancel:p,confirm:function(){return a().then(p)},waiting:l.loading||m.loading,action:ya._("Delete flagged content"),description:ya._("Are you sure you want to permanently delete this ".concat(i.context.__typename," content?")),title:ya._("Delete")}):"block"===f?E.a.createElement(AS,{cancel:p,confirm:function(){return r().then(p)},waiting:c.loading,action:ya._("Delete user"),description:ya._("Are you sure you want to permanently delete this user?"),title:ya._("Delete")}):"ignore"===f?E.a.createElement(AS,{cancel:p,confirm:function(){return o().then(p)},waiting:l.loading,action:ya._("Ignore flag"),description:ya._("Are you sure you want to ignore and delete this flag?"),title:ya._("Ignore")}):null):null,g=Object(x.useMemo)((function(){if(i){if("Comment"===i.context.__typename){var e,n=i.context,t=gd(n),r=t.communityLink,a=t.communityName,o=E.a.createElement(dd,{commentId:n.id,mainComment:!1,hideActions:!0}),l=i.creator&&SO(i.creator);return E.a.createElement(Td,{actor:l,commentActor:n.creator?SO(n.creator):void 0,createdAt:n.createdAt,event:"commented",communityLink:r,communityName:a,status:pd.Loaded,threadUrl:(null===(e=n.thread)||void 0===e?void 0:e.id)&&GO.getPath({threadId:n.thread.id},void 0),preview:o})}return i?E.a.createElement(pO,{context:i.context}):E.a.createElement(E.a.Fragment,null)}return E.a.createElement(E.a.Fragment,null)}),[i]),h=Object(x.useMemo)((function(){return i?{FlaggedItemContextElement:g,reason:i.message,type:i.context.__typename,blockUser:function(){return v("block")},deleteContent:function(){return v("delete")},ignoreFlag:function(){return v("ignore")}}:null}),[g,i]);return h&&E.a.createElement(E.a.Fragment,null,b,E.a.createElement(TS,h))},NS=function(e){var n=e.FlagPreviews,t=e.loadMoreFlags;return x.createElement(Ln.Box,null,x.createElement(Ln.Text,{px:3,mt:2,variant:"heading"},x.createElement(nt.Trans,{id:"Flags"})),x.createElement(tl,null,n?x.createElement(Ln.Box,{mt:2,sx:{width:"600px"}},n.map((function(e){return x.createElement(Ft,{key:e.key||""},e)})),t?x.createElement(mt,{LoadMoreFormik:t}):null," "):x.createElement(Ln.Text,{pt:3},x.createElement(nt.Trans,{id:"No flags yet"}))))},zS=function(){var e=mS().flagsPage,n=Object(u.a)(e.formiks,1)[0],t=Object(x.useMemo)((function(){return e.edges.map((function(e){var n=e.creator&&SO(e.creator);return E.a.createElement(Td,{key:e.id,actor:n,communityLink:"",communityName:"",createdAt:e.createdAt,event:"flagged",preview:E.a.createElement(BS,{flagId:e.id}),status:pd.Loaded})}))}),[e.edges]),r=Object(x.useMemo)((function(){return{FlagPreviews:t,loadMoreFlags:n}}),[t,n]);return E.a.createElement(NS,r)};function DS(){var e=Object(i.a)(['\n    query instanceRegisterEmailDomainAccesses($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  registerEmailDomainAccesses(limit: $limit, before: $before, after: $after) @connection(key: "instanceRegisterEmailDomainAccesses") {\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n    edges {\n      id\n      domain\n    }\n  }\n}\n    ',""]);return DS=function(){return e},e}function $S(){var e=Object(i.a)(['\n    query instanceRegisterEmailAccesses($limit: Int, $before: [Cursor!], $after: [Cursor!]) {\n  registerEmailAccesses(limit: $limit, before: $before, after: $after) @connection(key: "instanceRegisterEmailAccesses") {\n    totalCount\n    pageInfo {\n      ...FullPageInfo\n    }\n    edges {\n      id\n      email\n    }\n  }\n}\n    ',""]);return $S=function(){return e},e}function qS(){var e=Object(i.a)(["\n    mutation sendInviteEmail($email: String!) {\n  sendInvite(email: $email)\n}\n    "]);return qS=function(){return e},e}function VS(){var e=Object(i.a)(["\n    mutation removeEmailFromAllowList($id: String!) {\n  deleteRegisterEmailAccess(id: $id) {\n    id\n  }\n}\n    "]);return VS=function(){return e},e}function QS(){var e=Object(i.a)(["\n    mutation addEmailToAllowList($email: String!) {\n  createRegisterEmailAccess(email: $email) {\n    email\n    id\n  }\n}\n    "]);return QS=function(){return e},e}function WS(){var e=Object(i.a)(["\n    mutation removeEmailDomainFromAllowList($id: String!) {\n  deleteRegisterEmailDomainAccess(id: $id) {\n    id\n  }\n}\n    "]);return WS=function(){return e},e}function HS(){var e=Object(i.a)(["\n    mutation addEmailDomainToAllowList($domain: String!) {\n  createRegisterEmailDomainAccess(domain: $domain) {\n    domain\n    id\n  }\n}\n    "]);return HS=function(){return e},e}var JS=R()(HS());var KS=R()(WS());R()(QS());var ZS=R()(VS());var GS=R()(qS());var YS=R()($S(),Nt);var XS=R()(DS(),Nt);var eP=function(e,n){return{query:YS,variables:e,context:n}},nP=function(e,n){return{query:XS,variables:e,context:n}},tP=function(){var e,n,t,r=V.c(JS,t),a=Object(u.a)(r,2),i=a[0],o=a[1],l=function(e){return V.c(KS,e)}(),m=Object(u.a)(l,2),s=m[0],d=m[1],f=function(e){return V.c(ZS,e)}(),v=Object(u.a)(f,2),p=v[0],b=v[1],g=function(e){return V.c(GS,e)}(),h=Object(u.a)(g,2),E=h[0],y=h[1],O=function(e){return V.d(YS,e)}({variables:{limit:je}}),j=Vt(null===(e=O.data)||void 0===e?void 0:e.registerEmailAccesses,(function(e){var n=e.cursor,t=e.update;return O.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var r=n.fetchMoreResult;return(null===r||void 0===r?void 0:r.registerEmailAccesses)&&e.registerEmailAccesses?Object(c.a)(Object(c.a)({},r),{},{registerEmailAccesses:t({prev:e.registerEmailAccesses,fetched:r.registerEmailAccesses})}):e}})})),k=function(e){return V.d(XS,e)}({variables:{limit:je}}),w=Vt(null===(n=k.data)||void 0===n?void 0:n.registerEmailDomainAccesses,(function(e){var n=e.cursor,t=e.update;return k.fetchMore({variables:Object(c.a)(Object(c.a)({},n),{},{limit:je}),updateQuery:function(e,n){var r=n.fetchMoreResult;return(null===r||void 0===r?void 0:r.registerEmailDomainAccesses)&&e.registerEmailDomainAccesses?Object(c.a)(Object(c.a)({},r),{},{registerEmailDomainAccesses:t({prev:e.registerEmailDomainAccesses,fetched:r.registerEmailDomainAccesses})}):e}})})),C=iC((function(e){return i({variables:{domain:e},refetchQueries:[nP({})]})}),[i]),I=iC((function(e){return s({variables:{id:e},refetchQueries:[nP({})]})}),[s]),T=iC((function(e){return E({variables:{email:e}})}),[E]),F=iC((function(e){return E({variables:{email:e},refetchQueries:[eP({})]})}),[E]),S=iC((function(e){return p({variables:{id:e},refetchQueries:[eP({})]})}),[p]);return Object(x.useMemo)((function(){return{listEmailDomainsPage:w,listEmailsPage:j,addEmailDomain:C,removeEmailDomain:I,addEmail:F,removeEmail:S,sendInviteEmail:T,addEmailDomainStatus:o,removeEmailDomainStatus:d,removeEmailStatus:b,sendInviteEmailStatus:y}}),[w,j,C,I,F,S,T,o,d,b,y])};function rP(){var e=Object(i.a)(["\n  cursor: pointer;\n  width: 30px;\n  height: 30px;\n  border-radius: 30px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  svg{\n    stroke: ",";\n  }\n  &:hover {\n    // background: ",";\n    svg{\n      stroke: ",";\n    }\n  }\n"]);return rP=function(){return e},e}function aP(){var e=Object(i.a)(["\n  align-items: center;\n"]);return aP=function(){return e},e}function iP(){var e=Object(i.a)(["\n  && {\n    flex: 1;\n    color: ",";\n  }\n"]);return iP=function(){return e},e}function oP(){var e=Object(i.a)(["\n  padding: 20px;\n  border-bottom: 1px solid ",";\n"]);return oP=function(){return e},e}function lP(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]);return lP=function(){return e},e}function cP(){var e=Object(i.a)(["\n  flex:1;\n  // color: ",";\n"]);return cP=function(){return e},e}var uP={placeholders:{domain:Object(nt.i18nMark)("Enter domain (e.g. moodle.com)")}},mP=_n(Ln.Text)(cP(),(function(e){return e.theme.colors.medium})),sP=_n(el)(lP()),dP=_n.div(oP(),(function(e){return e.theme.colors.lighter})),fP=_n(da.b)(iP(),(function(e){return e.theme.colors.mediumdark})),vP=_n(tl)(aP()),pP=_n(Ln.Box)(rP(),(function(e){return e.theme.colors.medium}),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary})),bP=function(e){var n=e.formikAddDomain,t=e.removeDomain,r=e.domainsList,a=e.loadMoreDomains;return E.a.createElement(Ln.Box,null,E.a.createElement(Ln.Text,{px:3,mt:2,variant:"heading"},E.a.createElement("span",{style:{marginRight:"8px"},"aria-label":"icon",role:"img"},"\ud83c\udfa8"),"Customize your instance"),E.a.createElement(dP,null,E.a.createElement(da.c,{pt:3},E.a.createElement(nt.Trans,{id:"Add Domain to allowlist"})),E.a.createElement(sP,null,E.a.createElement(fP,{placeholder:uP.placeholders.domain,disabled:n.isSubmitting,name:"domain",value:n.values.domain,onChange:n.handleChange}),E.a.createElement(Yo,null,E.a.createElement(ct,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:n.submitForm},E.a.createElement(nt.Trans,{id:"Add"}))))),E.a.createElement(Ln.Box,{p:3},E.a.createElement(Ln.Text,{p:3,variant:"suptitle"},E.a.createElement(nt.Trans,{id:"Allowed Domains"})),r.map((function(e){return E.a.createElement(vP,{key:e},E.a.createElement(mP,null,e),E.a.createElement(pP,{onClick:function(){return t(e)}},E.a.createElement(yS.a,{size:21})))})),a?E.a.createElement(mt,{LoadMoreFormik:a}):null," "),E.a.createElement(Ln.Text,{variant:"suptitle",p:3},E.a.createElement(nt.Trans,{id:"More options will be available soon"})))},gP=ci.object().shape({domain:ci.string().matches(qe)}),hP=function(){var e=Object(x.useState)(),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(x.useCallback)((function(){return r(void 0)}),[]),i=tP(),o=i.removeEmailDomain,l=i.addEmailDomain,c=i.listEmailDomainsPage,m=i.removeEmailDomainStatus,s=Object(u.a)(c.formiks,1)[0],d=Object(qt.a)({initialValues:{domain:""},validationSchema:gP,onSubmit:function(e,n){var t=e.domain,r=n.resetForm;return t?l(t).then((function(){return r()})):void 0}}),f=Object(x.useMemo)((function(){return c.edges.map((function(e){return e.domain}))}),[c]),v=Object(x.useCallback)((function(){var e,n=null===(e=c.edges.find((function(e){return t===e.domain})))||void 0===e?void 0:e.id;n?o(n).then(a):a()}),[t,c.edges,o,a]),p=t?E.a.createElement(al,{closeModal:function(){return r(void 0)}},E.a.createElement(AS,{cancel:a,confirm:v,action:ya._("Delete domain from allowlist"),description:ya._("Are you sure you want to delete ".concat(t," from allowlist?")),title:ya._("Delete"),waiting:m.loading})):null,b=Object(x.useMemo)((function(){return{formikAddDomain:d,removeDomain:r,domainsList:f,loadMoreDomains:s}}),[d,f,s]);return E.a.createElement(E.a.Fragment,null,p,E.a.createElement(bP,b))};function xP(){var e=Object(i.a)(["\n  padding: 20px;\n  border-bottom: 1px solid ",";\n"]);return xP=function(){return e},e}function EP(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]);return EP=function(){return e},e}function yP(){var e=Object(i.a)(["\n  align-items: center;\n"]);return yP=function(){return e},e}function OP(){var e=Object(i.a)(["\n  && {\n    flex: 1;\n    color: ",";\n  }\n"]);return OP=function(){return e},e}function jP(){var e=Object(i.a)(["\n  flex:1;\n  // color: ",";\n"]);return jP=function(){return e},e}var kP={placeholders:{email:Object(nt.i18nMark)("Add email addresses (comma-separated) to invite to instance")}},wP=function(e){var n=e.emailsList,t=e.formikAddEmail,r=e.sendInvite,a=e.loadMoreEmails;return E.a.createElement(Ln.Box,null,E.a.createElement(Ln.Text,{variant:"heading",px:3,mt:2},"Manage your instance registration"),E.a.createElement(SP,null,E.a.createElement(da.c,{pt:3},E.a.createElement(nt.Trans,{id:"Email"})),E.a.createElement(FP,null,E.a.createElement(IP,{placeholder:kP.placeholders.email,disabled:t.isSubmitting,name:"email",value:t.values.email,onChange:t.handleChange}),E.a.createElement(Yo,null,E.a.createElement(ct,{variant:"primary",isSubmitting:t.isSubmitting,isDisabled:t.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:t.submitForm},E.a.createElement(nt.Trans,{id:"Add"}))))),E.a.createElement(Ln.Box,{p:3},E.a.createElement(Ln.Text,{p:3,variant:"suptitle"},E.a.createElement(nt.Trans,{id:"Sent invitations"})),n.map((function(e,n){return E.a.createElement(TP,{key:"".concat(n,"-").concat(e)},E.a.createElement(CP,null,e),E.a.createElement(ct,{variant:"outline",onClick:function(){return r(e)}},E.a.createElement(nt.Trans,{id:"Send again"})))})),a?E.a.createElement(mt,{LoadMoreFormik:a}):null," "))},CP=_n(Ln.Text)(jP(),(function(e){return e.theme.colors.medium})),IP=_n(da.b)(OP(),(function(e){return e.theme.colors.mediumdark})),TP=_n(tl)(yP()),FP=_n(el)(EP()),SP=_n.div(xP(),(function(e){return e.theme.colors.lighter})),PP=ci.object().shape({email:ci.string().matches(/^.+@.+\..+$/)}),MP=function(){var e=tP(),n=e.addEmail,t=e.listEmailsPage,r=e.sendInviteEmail,a=Object(u.a)(t.formiks,1)[0],i=Object(qt.a)({initialValues:{email:""},validationSchema:PP,onSubmit:function(e,t){var r=e.email,a=t.resetForm;return r?n(r).then((function(){return a()})):void 0}}),o=Object(x.useMemo)((function(){return t.edges.map((function(e){return e.email}))}),[t]),l=Object(x.useMemo)((function(){return{formikAddEmail:i,sendInvite:r,emailsList:o,loadMoreEmails:a}}),[i,r,o,a]);return E.a.createElement(wP,l)},_P=function(){return E.a.createElement(Ln.Box,null,E.a.createElement(Ln.Text,{px:3,mt:2,variant:"heading"},E.a.createElement(nt.Trans,{id:"Moderation Log"})),E.a.createElement(Ln.Text,{variant:"suptitle",p:3},E.a.createElement(nt.Trans,{id:"Logs will be available soon"})))},LP=function(){return E.a.createElement(_P,null)};function UP(){var e=Object(i.a)(["\n  text-align: right;\n  padding: 0px 20px;\n\n  a {\n    text-decoration: underline;\n    color: ",";\n    &:hover {\n      color: ",";\n    }\n  }\n"]);return UP=function(){return e},e}var AP,RP=function(e){return x.createElement(ak.a,{options:e.locales,defaultValue:e.current,onChange:function(n){var t=Array.isArray(n)?n[0]:n;t&&e.setLocale(t.value)}})},BP=function(e){return x.createElement(Ln.Box,null,x.createElement(tl,null,x.createElement(el,null,x.createElement("label",null,x.createElement(nt.Trans,{id:"Select language"})),x.createElement(RP,e),x.createElement(Ln.Box,{width:.5,mt:2},x.createElement(da.c,{htmlFor:"moodleWebsite"},"Moodle LMS site location"),x.createElement(da.b,{id:"moodleWebsite",disabled:e.formik.isSubmitting,value:e.formik.values.moodleWebsite,onChange:e.formik.handleChange,name:"moodleWebsite",placeholder:"Type your Moodle LMS instance"})),x.createElement(Yo,{sx:{height:"inherit !important"}},x.createElement(ct,{variant:"primary",isSubmitting:e.formik.isSubmitting,isDisabled:e.formik.isSubmitting,type:"submit",style:{marginLeft:"10px"},onClick:e.formik.submitForm},x.createElement(nt.Trans,{id:"Save"}))))),x.createElement(NP,{variant:"text",my:3,mt:2},x.createElement("a",{href:"https://www.transifex.com/moodlenet/moodlenet/",target:"_blank",rel:"noopener noreferrer"},x.createElement(nt.Trans,{id:"Want to contibute to MoodleNet translation?"}))))},NP=_n(Ln.Text)(UP(),(function(e){return e.theme.colors.dark}),(function(e){return e.theme.colors.darkest})),zP=ci.object({moodleWebsite:ci.string().matches(qe)}),DP=function(){var e,n,t=E.a.useContext(Oa),r=t.available,a=t.current,i=t.set,o=sa(),l=o.me,c=o.updateProfile,u=null===l||void 0===l?void 0:l.user,m=Object(qt.a)({enableReinitialize:!0,initialValues:{moodleWebsite:(null===u||void 0===u||null===(e=u.extraInfo)||void 0===e||null===(n=e.LMS)||void 0===n?void 0:n.site)||""},validationSchema:zP,onSubmit:function(e){var n=e.moodleWebsite;return c({profile:{extraInfo:{LMS:{site:n}}}})}}),s=Object(x.useMemo)((function(){return r.map((function(e){return{value:e.code,label:e.desc}}))}),[r]),d=Object(x.useMemo)((function(){return s.find((function(e){return e.value===a.code}))||s[0]}),[a.code,s]),f=Object(x.useCallback)((function(e){var n=r.find((function(n){return n.code===e}));n&&i(n)}),[r,i]);return E.a.createElement(BP,{formik:m,current:d,locales:s,setLocale:f})};!function(e){e[e.Preferences=0]="Preferences",e[e.Invites=1]="Invites",e[e.Instance=2]="Instance",e[e.Flags=3]="Flags",e[e.ModerationLogs=4]="ModerationLogs",e[e.General=5]="General"}(AP||(AP={}));var $P={id:"Settings - Preferences"},qP={id:"Settings - Invites"},VP={id:"Settings - Instance"},QP={id:"Settings - Flags"},WP={id:"Settings - Moderation"},HP={id:"Settings - General"},JP=function(e){e.basePath;var n=e.tab,t=n===AP.Preferences?$P:n===AP.Invites?qP:n===AP.Instance?VP:n===AP.Flags?QP:n===AP.ModerationLogs?WP:(AP.General,HP);vi(t);var r=sa(),a=r.me,i=r.updateProfile,o=null===a||void 0===a?void 0:a.user,l=Object(x.useMemo)((function(){var e,n;return{icon:(null===o||void 0===o||null===(e=o.icon)||void 0===e?void 0:e.url)||void 0,image:(null===o||void 0===o||null===(n=o.image)||void 0===n?void 0:n.url)||void 0,location:(null===o||void 0===o?void 0:o.location)||"",name:(null===o||void 0===o?void 0:o.name)||"",website:(null===o||void 0===o?void 0:o.website)||"",summary:(null===o||void 0===o?void 0:o.summary)||""}}),[o]),c=Object(qt.a)({initialValues:l,enableReinitialize:!0,onSubmit:function(e){var n=e.icon,t=e.image,r=Object(Cw.a)(e,["icon","image"]);return i({profile:r,icon:n,image:t})}}),u=Object(x.useMemo)((function(){return{preferences:CM.getPath({tab:"preferences"},void 0),instance:CM.getPath({tab:"instance"},void 0),invites:CM.getPath({tab:"invites"},void 0),flags:CM.getPath({tab:"flags"},void 0),logs:CM.getPath({tab:"logs"},void 0),general:CM.getPath({tab:void 0},void 0)}}),[]),m=Object(x.useMemo)((function(){return{sectionPaths:u,displayUsername:(null===o||void 0===o?void 0:o.displayUsername)||"",isAdmin:!!(null===a||void 0===a?void 0:a.isInstanceAdmin),formik:c,Preferences:E.a.createElement(DP,null),Instance:E.a.createElement(hP,null),Invites:E.a.createElement(MP,null),Flags:E.a.createElement(zS,null),ModerationLog:E.a.createElement(LP,null)}}),[a,o,u,c]);return m&&E.a.createElement(qF,m)};function KP(){var e=Object(i.a)(["\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  margin-top: 16px;\n"]);return KP=function(){return e},e}function ZP(){var e=Object(i.a)(["\n    grid-template-rows: auto;\n    grid-template-columns:1fr;\n    column-gap: 0px;\n    margin: 0;\n    margin: 0 8px;\n  "]);return ZP=function(){return e},e}function GP(){var e=Object(i.a)(["\n  height: calc(100vh - 150px);\n  overflow: overlay;\n  grid-template-rows: auto;\n  grid-template-columns:1fr;\n  column-gap: 0px;\n  margin: 0;\n  margin: 0 8px;\n  "]);return GP=function(){return e},e}function YP(){var e=Object(i.a)(["\n  grid-template-rows: auto;\n  grid-template-columns:  1fr;\n  height: calc(100vh - 66px);\n  "]);return YP=function(){return e},e}function XP(){var e=Object(i.a)(["\n  max-width: 1096px;\n  margin: 0 auto;\n  display: grid;\n  \n  ","\n  ","\n  ","\n"]);return XP=function(){return e},e}function eM(){var e=Object(i.a)(["\n    grid-template-rows: 75px 1fr 75px;\n  "]);return eM=function(){return e},e}function nM(){var e=Object(i.a)(["\n    grid-template-rows: 50px auto;\n    row-gap: 8px;\n  "]);return nM=function(){return e},e}function tM(){var e=Object(i.a)(["\n  height: 100vh;\n  display: grid;\n  ","\n  ","\n"]);return tM=function(){return e},e}function rM(){var e=Object(i.a)(["\n    display: none;\n  "]);return rM=function(){return e},e}function aM(){var e=Object(i.a)(["\n  background: ","\n  display: grid;\n  border-top: ",";\n  grid-template-columns: 1fr 1fr 1fr;\n  ","\n\n"]);return aM=function(){return e},e}function iM(){var e=Object(i.a)(["\n  height: 75px;\n  line-height: 75px;\n  text-align: center;\n"]);return iM=function(){return e},e}function oM(){var e=Object(i.a)(["\n    display: none;\n  "]);return oM=function(){return e},e}function lM(){var e=Object(i.a)(["\nheight: 75px;\nline-height: 75px;\ntext-align: center;\nbackground: ","\nborder-bottom: ",";\ndisplay: flex;\nalign-items: center;\ninput {\n  width: 100%;\n  border-radius: 4px;\n  max-width: 500px;\n  height: 40px;\n  margin: 0;\n  border: 0;\n  background: ",";\n}\n.ais-SearchBox {\n  border: 0;\n  height: auto;\n  margin: 0;\n  width: auto;\n  margin: 0;\n  margin-right: 24px;\n  flex:1;\n}\n","\n"]);return lM=function(){return e},e}function cM(){var e=Object(i.a)(["\n    display: none;\n  "]);return cM=function(){return e},e}function uM(){var e=Object(i.a)(["\n  ","\n"]);return uM=function(){return e},e}function mM(){var e=Object(i.a)(["\n  div {\n    max-width: 36px;\n    height: 36px;\n    min-width: 36px;\n    margin: 0 auto;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return mM=function(){return e},e}function sM(){var e=Object(i.a)(["\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n  min-width: 40px;\n  border-radius: 40px;\n  margin-top: 5px;\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n    svg {\n      stroke: ",";\n    }\n  }\n  svg {\n    stroke: ",";\n    margin: 0 auto;\n  }\n"]);return sM=function(){return e},e}function dM(){var e=Object(i.a)(["\n  img {\n    width: 36px;\n    height: 36px;\n    border-radius: 36px;\n    margin-top: 15px;\n  }\n"]);return dM=function(){return e},e}var fM=function(e){var n=e.SidebarBox,t=e.HeaderBox,r=e.SearchBox,a=e.children,i=e.userImage,o=e.userLink,l=e.username,c=e.name,m=e.signout,s=E.a.useState(!1),d=Object(u.a)(s,2),f=d[0],v=d[1],p=Object(Pn.h)();return E.a.createElement(yM,null,E.a.createElement(hM,null,E.a.createElement(pM,{onClick:function(){return p.goBack()}},E.a.createElement(wl.a,{size:"20"})),r),E.a.createElement(gM,null,t),E.a.createElement(OM,null,E.a.createElement(jM,null,a)),E.a.createElement(EM,null,E.a.createElement(xM,null,E.a.createElement(dE,{open:f,setOpen:v}),E.a.createElement(fE,{username:l,name:c,userImage:i,signout:m,open:f,setOpen:v,Side:n})),E.a.createElement(xM,null,E.a.createElement(Kt.c,{to:"/"},E.a.createElement(vM,null,E.a.createElement(Sb.c,{src:we})))),E.a.createElement(xM,null,E.a.createElement(bM,null,E.a.createElement(Kt.c,{to:o},E.a.createElement(Pl,{src:i,size:"m"}))))))},vM=_n(Ln.Box)(dM()),pM=_n(Ln.Box)(sM(),(function(e){return e.theme.colors.lighter}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.mediumdark})),bM=_n(Ln.Box)(mM()),gM=_n(Ln.Box)(uM(),w.a.lessThan("medium")(cM())),hM=_n(Ln.Box)(lM(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.app}),w.a.greaterThan("medium")(oM())),xM=_n(Ln.Box)(iM()),EM=_n(Ln.Box)(aM(),(function(e){return e.theme.colors.appInverse}),(function(e){return e.theme.colors.border}),w.a.greaterThan("medium")(rM())),yM=_n(Ln.Box)(tM(),w.a.greaterThan("large")(nM()),w.a.lessThan("medium")(eM())),OM=_n(Ln.Box)(XP(),w.a.greaterThan("medium")(YP()),w.a.lessThan("medium")(GP()),w.a.lessThan("small")(ZP())),jM=_n(Ln.Box)(KP()),kM=function(e){var n=e.children,t=sa(),r=t.me,a=t.logout,i=Object(x.useMemo)((function(){var e,n=null===r||void 0===r?void 0:r.user;if(!n)return null;var t=(null===(e=n.icon)||void 0===e?void 0:e.url)||"",i="/user/".concat(n.id);return{SidebarBox:E.a.createElement(Yx,null),HeaderBox:E.a.createElement(Dw,null),SearchBox:E.a.createElement(kl,null),userImage:t,userLink:i,signout:a,username:n.displayUsername||"",name:n.preferredUsername||""}}),[a,r]);return i?E.a.createElement(fM,i,n):E.a.createElement(nC,null,n)},wM={exact:!0,path:"/settings/:tab(preferences|logs|invites|instance|flags)?",component:function(e){var n=e.match.params.tab,t="preferences"===n?AP.Preferences:"logs"===n?AP.ModerationLogs:"invites"===n?AP.Invites:"instance"===n?AP.Instance:"flags"===n?AP.Flags:n?null:AP.General,r=Object(x.useMemo)((function(){return null===t?null:{tab:t,basePath:"/settings"}}),[t]);return r?E.a.createElement(Kx,null,E.a.createElement(kM,null,E.a.createElement(JP,r))):E.a.createElement(Vg,null)}},CM=Rx(wM),IM=t(788);function TM(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: center;\n  div {\n    color: white;\n  }\n"]);return TM=function(){return e},e}function FM(){var e=Object(i.a)(["\n  margin: 0;\n  flex: 1;\n  input {\n    height: 50px;\n    color: inherit;\n    background-color: transparent;\n    border-radius: 4px;\n    border: 1px solid #dadada;\n  }\n  background: ",";\n  border-radius: 4px;\n  height: inherit;\n  border: 1px solid #dddfe2;\n  text-align: left;\n  height: fit-content;\n  padding: 16px;\n"]);return FM=function(){return e},e}function SM(){var e=Object(i.a)(["\n  grid-area: header;\n  text-align: center;\n"]);return SM=function(){return e},e}function PM(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 900px;\n  padding-bottom: 50px;\n"]);return PM=function(){return e},e}function MM(){var e=Object(i.a)(["\n    // display: grid;\n    // grid-template-columns: 1fr;\n    padding: 16px\n  "]);return MM=function(){return e},e}function _M(){var e=Object(i.a)(["\n  ",";\n"]);return _M=function(){return e},e}function LM(){var e=Object(i.a)(["\n  background: #fff;\n  border-radius: 4px;\n  height: inherit;\n  padding: 30px 20px;\n  text-align: center;\n  height: fit-content;\n"]);return LM=function(){return e},e}function UM(){var e=Object(i.a)(["\n  text-align: center;\n  margin-top: 10px;\n"]);return UM=function(){return e},e}var AM={login:Object(nt.i18nMark)("Sign in"),placeholders:{email:Object(nt.i18nMark)("eg. mary@moodlers.org"),preferredUsername:Object(nt.i18nMark)("eg. moodlerMary"),name:Object(nt.i18nMark)("eg. Moodler Mary"),password:Object(nt.i18nMark)("Choose your password"),passwordConfirm:Object(nt.i18nMark)("Confirm your password")}},RM=function(e){var n=e.formik,t=e.registeredUsername,r=e.registeredEmail;return x.createElement(DM,null,!n.isSubmitting&&n.submitCount&&t&&r?x.createElement(Ln.Box,{mt:3},x.createElement(Fa,null),x.createElement(NM,null,x.createElement(Ln.Box,null,x.createElement(Ln.Text,{variant:"suptitle"},x.createElement(nt.Trans,{id:"Welcome"})," ",x.createElement("b",null,t)),x.createElement(Ln.Text,{mt:2,variant:"text"},x.createElement(nt.Trans,{id:"Please confirm your email address"}),x.createElement("b",null," "+r+" "),x.createElement(nt.Trans,{id:"by clicking on the link we emailed you (check your spam folder if necessary)."}))),x.createElement(BM,null,x.createElement(Kt.b,{to:"/"},x.createElement(ct,{mt:3,variant:"primary"},x.createElement(nt.Trans,{id:"Sign in"}))))),">"):x.createElement(zM,null,x.createElement(Fa,null),x.createElement($M,null,x.createElement(VM,{p:3},x.createElement(Ln.Box,{mr:2},x.createElement(IM.a,{size:"20",color:"white"})),x.createElement(Ln.Text,{variant:"suptitle"},ke))),x.createElement(Ln.Flex,{mt:2},x.createElement(qM,{onSubmit:n.handleSubmit},x.createElement(Ln.Box,null,x.createElement("label",null,x.createElement(nt.Trans,{id:"Email"})),x.createElement(da.b,{placeholder:AM.placeholders.email,name:"email",value:n.values.email,onChange:n.handleChange}),n.errors.email&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.email))),x.createElement(Ln.Box,{mt:3},x.createElement("label",null,x.createElement(nt.Trans,{id:"Full name"})),x.createElement(da.b,{placeholder:AM.placeholders.name,name:"name",value:n.values.name,onChange:n.handleChange}),n.errors.name&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.name))),x.createElement(Ln.Box,{mt:3},x.createElement("label",null,x.createElement(nt.Trans,{id:"Preferred username"})),x.createElement(da.b,{placeholder:AM.placeholders.preferredUsername,name:"username",value:n.values.username,onChange:n.handleChange}),n.errors.username&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.username))),x.createElement(Ln.Box,{mt:3},x.createElement("label",null,x.createElement(nt.Trans,{id:"Password"})),x.createElement(da.b,{placeholder:AM.placeholders.password,name:"password",type:"password",value:n.values.password,onChange:n.handleChange}),n.errors.password&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.password))),x.createElement(Ln.Box,{mt:3},x.createElement("label",null,x.createElement(nt.Trans,{id:"Confirm password"})),x.createElement(da.b,{placeholder:AM.placeholders.passwordConfirm,name:"passwordConfirm",type:"password",value:n.values.passwordConfirm,onChange:n.handleChange}),n.errors.passwordConfirm&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.passwordConfirm))),x.createElement(Ln.Box,{mt:3,mb:3},x.createElement(da.c,{alignItems:"center"},x.createElement(da.a,{name:"terms",id:"remember",value:n.values.terms,onChange:n.handleChange}),x.createElement(Ln.Text,{mr:1},"I have read and agreed the"),x.createElement(Kt.c,{to:"/terms",target:"_blank"},"Terms and Conditions")),n.errors.terms&&x.createElement(Wo,null,x.createElement(ko,{variant:"negative"},n.errors.terms))),x.createElement(Ln.Box,{mt:3},x.createElement(ct,{variant:"primary",isSubmitting:n.isSubmitting,isDisabled:n.isSubmitting,type:"submit"},x.createElement(nt.Trans,{id:"Sign up"})))))))},BM=_n(Ln.Box)(UM()),NM=_n.div(LM()),zM=_n(Ln.Box)(_M(),w.a.lessThan("medium")(MM())),DM=_n.div(PM()),$M=_n.div(SM()),qM=_n.form(FM(),(function(e){return e.theme.colors.appInverse})),VM=_n(Ln.Flex)(TM(),(function(e){return e.green?"#546d4f":e.theme.colors.secondary})),QM={name:"",email:"",password:"",username:"",passwordConfirm:"",terms:!1},WM={id:"Sign Up"},HM=function(){vi(WM);var e=ui(),n=e.signUp,t=e.signUpStatus,r=e.usernameAvailable,a=ci.object({username:ci.string().min(3).max(16).matches($e).required().test("checkDuplUsername","username already exists",(function(e){return e&&r(e)})),email:ci.string().max(50).required(),name:ci.string().max(50).required(),password:ci.string().min(6).max(50).required(),passwordConfirm:ci.string().oneOf([ci.ref("password"),null],"Passwords must match").required(),terms:ci.boolean().oneOf([!0],"Must Accept Terms and Conditions")}),i=Object(qt.a)({initialValues:QM,enableReinitialize:!0,validateOnChange:!1,validateOnBlur:!1,validationSchema:a,onSubmit:function(e){return n({email:e.email,name:e.name,password:e.password,preferredUsername:e.username,wantsEmailDigest:!1,wantsNotifications:!1})}}),o=Object(x.useMemo)((function(){var e,n;return t.called&&(null===(e=t.data)||void 0===e||null===(n=e.createUser)||void 0===n?void 0:n.user.name)?{formik:i,registeredUsername:t.data.createUser.user.name,registeredEmail:t.data.createUser.email}:{formik:i}}),[t,i]);return E.a.createElement(RM,o)},JM={exact:!0,path:"/signup",component:function(e){e.match;return E.a.createElement(nC,{withoutHeader:!0},E.a.createElement(HM,null))}},KM={id:"Moodle LMS"},ZM=function(e){if(vi(KM),e.badParams)return E.a.createElement("div",null,E.a.createElement("h2",null,"Bad Params"));var n=e.params,t=n.course,r=n.site,a=n.section;return E.a.createElement("div",null,E.a.createElement("h1",null,"Welcome from Moodle LMS !"),E.a.createElement("h2",null,"Site: ",r),t&&E.a.createElement("h3",null,"course: ",t),a&&E.a.createElement("h3",null,"section: ",a))},GM={exact:!0,path:"/lms/moodle/search",component:function(e){e.match;var n=Lv(),t=n.updateLMSPrefs,r=n.loading,a=Object(x.useRef)(function(){var e=new URLSearchParams(window.location.search),n=e.get("site");return n?{site:n,course:e.get("course")||void 0,section:e.get("section")||void 0}:null}()),i=Object(x.useRef)(!1),o=Object(x.useState)(),l=Object(u.a)(o,2),c=l[0],m=l[1];return Object(x.useEffect)((function(){var e=a.current;i.current||r||(e?t(e).then((function(){return m({params:e})})):m({badParams:!0}),i.current=!0)}),[t,r]),E.a.createElement(Kx,null,E.a.createElement(ly,null,c&&E.a.createElement(ZM,c)))}},YM=t(789);function XM(){var e=Object(i.a)(["\n  background: ",";\n  border-radius: 4px;\n  align-items: center;\n  div {\n    color: white;\n  }\n"]);return XM=function(){return e},e}function e_(){var e=Object(i.a)(["\n  .extra {\n    width: 100%;\n    margin-right: 0;\n    margin-left: 0;\n  }\n"]);return e_=function(){return e},e}function n_(){var e=Object(i.a)(["\n  margin: 0 auto;\n  max-width: 1020px;\n"]);return n_=function(){return e},e}function t_(){var e=Object(i.a)(["\n    // display: grid;\n    // grid-template-columns: 1fr;\n    padding: 16px\n  "]);return t_=function(){return e},e}function r_(){var e=Object(i.a)(["\n  ",";\n"]);return r_=function(){return e},e}var a_=function(e){var n=e.terms_users_text_data,t=e.terms_cookies_text_data,r=e.terms_indexing_text_data,a=e.terms_users_data,i=e.terms_privacy_enabled,o=e.privacy_url_text_data,l=e.terms_privacy_text_data,c=e.terms_cookies_data,u=e.terms_indexing_data;return x.createElement(o_,null,x.createElement(i_,null,x.createElement(Fa,null),x.createElement(Ln.Flex,{mt:2},x.createElement(l_,null,x.createElement(c_,{green:!0,mb:3,mt:3,p:3},x.createElement(Ln.Box,{mr:2},x.createElement(YM.a,{size:"20",color:"white"})),x.createElement(Ln.Text,{variant:"suptitle"}," ","Please read the following. By using this instance of MoodleNet you are consenting to these agreements.")),x.createElement(Gn,{className:"extra"},x.createElement(Ln.Box,{p:3},x.createElement(su.a,null,a||n)),x.createElement(Ln.Box,{p:3},i?x.createElement(su.a,null,o||l):null),x.createElement(Ln.Box,{p:3},x.createElement(su.a,null,c||t)),x.createElement(Ln.Box,{p:3},x.createElement(su.a,null,u||r)))))))},i_=_n(Ln.Box)(r_(),w.a.lessThan("medium")(t_())),o_=_n.div(n_()),l_=_n(Ln.Box)(e_()),c_=_n(Ln.Flex)(XM(),(function(e){return e.green?"#546d4f":e.theme.colors.primary})),u_=t(168),m_={id:"Terms and Conditions"},s_=function(){vi(m_);var e=E.a.useContext(Oa).i18n,n={data:e._(Ce)},t={data:e._(Ue)},r={data:e._(Ie)},a={data:e._(Te)},i=Object(u_.a)(Se,{useCache:!0,manual:!0}),o=Object(u.a)(i,2),l=o[0],c=o[1],m=Object(u_.a)(Pe,{useCache:!0,manual:!0}),s=Object(u.a)(m,2),d=s[0],f=s[1],v=Object(u_.a)(Me,{useCache:!0,manual:!0}),p=Object(u.a)(v,2),b=p[0],g=p[1],h=Object(u_.a)(Le,{useCache:!0}),y=Object(u.a)(h,2),O=y[0],j=y[1];Object(x.useEffect)((function(){Fe&&(c(),f(),g()),_e&&j()}),[]);var k=Object(x.useMemo)((function(){return{terms_privacy_enabled:_e,terms_users_data:l.data,terms_users_text_data:n.data,privacy_url_text_data:O.data,terms_privacy_text_data:t.data,terms_cookies_data:d.data,terms_cookies_text_data:r.data,terms_indexing_data:b.data,terms_indexing_text_data:a.data}}),[O.data,d.data,r.data,b.data,a.data,t.data,l.data,n.data]);return E.a.createElement(a_,k)},d_={exact:!0,path:"/terms",component:function(){return E.a.createElement(nC,{withoutHeader:!0},E.a.createElement(s_,null))}},f_=function(){return E.a.createElement(Pn.d,null,E.a.createElement(Pn.b,TO),E.a.createElement(Pn.b,Zk),E.a.createElement(Pn.b,cy),E.a.createElement(Pn.b,wM),E.a.createElement(Pn.b,gC),E.a.createElement(Pn.b,yC),E.a.createElement(Pn.b,ZO),E.a.createElement(Pn.b,AI),E.a.createElement(Pn.b,GI),E.a.createElement(Pn.b,tT),E.a.createElement(Pn.b,Bx),E.a.createElement(Pn.b,dF),E.a.createElement(Pn.b,ZC),E.a.createElement(Pn.b,BT),E.a.createElement(Pn.b,tC),E.a.createElement(Pn.b,JM),E.a.createElement(Pn.b,UC),E.a.createElement(Pn.b,d_),E.a.createElement(Pn.b,GM),E.a.createElement(Pn.b,Zx),E.a.createElement(Pn.b,xT),E.a.createElement(Pn.b,{component:Vg}))};function v_(){var e=Object(i.a)(["\n    top 50%;\n  "]);return v_=function(){return e},e}function p_(){var e=Object(i.a)(["\n    top 10px;\n  "]);return p_=function(){return e},e}function b_(){var e=Object(i.a)(["\n  ","\n  ","\n"]);return b_=function(){return e},e}var g_=function(){var e=x.useState(!0),n=Object(u.a)(e,2),t=n[0],r=n[1];return t?x.createElement(h_,null,x.createElement(ko,{variant:"warning"},x.createElement("div",{style:{textAlign:"center"}},"This site is currently in active development. We are looking forward to reading your feedback and ideas in our"," ",x.createElement("a",{href:"https://github.com/reflow-project/zenpub-client/issues",target:"_blank",rel:"noopener noreferrer"},"Issues Tracker"),x.createElement("span",{style:{cursor:"pointer",position:"absolute",top:"10px",right:"10px"},onClick:function(){return r(!1)}},x.createElement(Fo.a,{size:16}))))):null},h_=_n(Sb.a)(b_(),w.a.greaterThan("medium")(p_()),w.a.lessThan("medium")(v_())),x_=function(){return x.createElement(Sn,null,x.createElement(x.Fragment,null,x.createElement(g_,null),x.createElement(f_,null)))},E_=t(402),y_=t.n(E_),O_=t(265),j_=t.n(O_),k_=t(797),w_=function(e){return"?".concat(j_.a.stringify(e))},C_=ze&&ze.appId&&ze.apiKey&&y_()(ze.appId,ze.apiKey),I_=function(e){var n,t=e.children,r=Object(Pn.h)().push,a=Object(Pn.i)(),i=E.a.useRef(),o=E.a.useRef(T_(a.pathname)),l=E.a.useState((n=a.search,j_.a.parse(n.slice(1)))),c=Object(u.a)(l,2),m=c[0],s=c[1];E.a.useEffect((function(){var e=setTimeout((function(){o.current&&!T_(a.pathname)?(i.current=void 0,o.current=!1,s(F_)):m.query?(i.current=i.current||(T_(a.pathname)?void 0:a),o.current=!0,r(function(e){return"/search/".concat(w_(e))}(m))):T_(a.pathname)&&(i.current?r(i.current):r("/"),i.current=void 0)}),500);return function(){clearTimeout(e)}}),[m,a.pathname,a.hash,a.search,r]);var d=E.a.useCallback((function(e){var n,t;!("query"in e)||(null===e||void 0===e?void 0:e.query)==(null===m||void 0===m?void 0:m.query)&&(null===e||void 0===e||null===(n=e.refinementList)||void 0===n?void 0:n.index_type)==(null===m||void 0===m||null===(t=m.refinementList)||void 0===t?void 0:t.index_type)&&(null===e||void 0===e?void 0:e.page)==(null===m||void 0===m?void 0:m.page)||s(e)}),[m]);return C_&&ze?E.a.createElement(k_.a,{searchState:m,onSearchStateChange:d,searchClient:C_,refresh:!0,indexName:ze.indexName||"",createURL:w_},t):E.a.createElement(E.a.Fragment,null,t)},T_=function(e){return"/search/"===e},F_={query:""},S_=function(e){var n=e.children;return E.a.createElement(ja,null,E.a.createElement(fi,null,E.a.createElement(Kt.a,null,E.a.createElement(I_,null,n))))},P_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M_(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");P_?(!function(e){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):__(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):__(e)}))}}function __(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function L_(){var e=Object(i.a)([" \n          width: 90vw !important;\n          margin: 0 auto; \n        "]);return L_=function(){return e},e}function U_(){var e=Object(i.a)(["\n      body, html {\n          border: 0;\n          margin: 0;\n          padding: 0;\n          width: 100%;\n          height: 100%;\n          font-family: "," !important;\n      }\n\n      * {\n        box-sizing: border-box;\n      }\n      input, textarea {\n        ::placeholder {\n          font-family: "," !important;\n        }\n      }\n      h1 {\n        font-size: 50px;\n      }\n      h2 {\n        font-size: 30px;\n      }\n      h3 {\n        font-size: 18px;\n      }\n      p {\n        font-size: 18px;\n      }\n\n      body {\n        background: ",";\n        .ais-SearchBox {\n          border-radius: 4px;\n          border: ","\n          height: 34px;\n          width: 380px;\n          background: ","\n          input {\n            border: none;\n            margin: 0 !important; \n            border-radius: 4px;\n            text-indent: 30px;\n            padding: 0;\n            height: 32px;\n            background: ",";\n          }\n        }\n        .ais-InstantSearch__root { \n          display: flex;\n        width: 100%;\n        }\n      }\n\n      .Toastify__toast--success{\n        background-color: ",";\n      }\n\n      .Toastify__toast-container--top-right{\n        top:60px !important;\n        ","; \n    }\n\n    input, textarea{\n      &:focus::placeholder{\n        color: transparent;\n      }\n    }\n\n    input:focus::-webkit-input-placeholder, textarea:focus::-webkit-input-placeholder { color:transparent; }\n    input:focus:-moz-placeholder, textarea:focus:-moz-placeholder { color:transparent; } /* FF 4-18 */\n    input:focus::-moz-placeholder, textarea:focus::-moz-placeholder { color:transparent; } /* FF 19+ */\n    input:focus:-ms-input-placeholder, textarea:focus:-ms-input-placeholder { color:transparent; } /* IE 10+ */\n  "]);return U_=function(){return e},e}function A_(){return(A_=Object(o.a)(a.a.mark((function e(){var n,t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.createGlobalStyle)(U_(),mn.primary,mn.primary,Qe,un,Qe,Qe,Je,w.a.lessThan("480px")(L_())),t=pa("local"),e.next=4,In({localKVStore:t("APOLLO#"),appLinks:[h]});case 4:r=e.sent,i=function(){return x.createElement(y.a,{client:r.client},x.createElement(S_,null,x.createElement(n,null),x.createElement(s.b,{hideProgressBar:!0,transition:s.a,autoClose:3e3,newestOnTop:!0}),x.createElement(x_,null)))},j.a.render(x.createElement(i,null),document.getElementById("root")),M_();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a({dsn:Oe}),function(){A_.apply(this,arguments)}()}},[[409,2,3]]]);
//# sourceMappingURL=main.9c8db500.chunk.js.map